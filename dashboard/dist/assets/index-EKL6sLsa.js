import{u as cy,r as uy,a as dy,_ as j,b as Bi,j as r,D as at,d as lt,e as ct,B as A,T as k,f as hc,g as on,S as fc,F as es,A as ge,h as De,C as Ue,i as Ct,k as X,l as _e,m as hy,I as Er,E as fy,n as Pe,V as pc,o as mc,L as py,p as hn,q as Nf,s as St,t as yt,R as xn,v as be,W as gn,G as K,w as po,x as Bf,y as Hf,z as Fn,H as de,J as zt,K as Re,M as Ne,N as Tn,O as Qn,Q as dr,U as It,X as Ee,Y as kt,c as Ve,Z as ce,$ as Br,a0 as Hi,a1 as An,a2 as pt,a3 as Ye,a4 as zf,a5 as Gf,a6 as Cl,a7 as gc,a8 as $t,a9 as Uf,aa as xc,ab as re,ac as my,ad as gy,ae as hs,af as pn,ag as Xe,ah as se,ai as Fe,aj as ie,ak as xy,al as yy,am as Wf,an as by,ao as vy,ap as Vu,aq as ts,ar as qf,as as Cy,at as vt,au as Sn,av as mt,aw as ut,ax as hr,P as U,ay as wy,az as sr,aA as Kf,aB as Yt,aC as no,aD as jy,aE as Sy,aF as wl,aG as Py,aH as yc,aI as jn,aJ as zi,aK as ky,aL as Iy,aM as Ey,aN as Ty,aO as mo,aP as sn,aQ as Nu,aR as Ay,aS as uo,aT as My,aU as Ry,aV as Qf,aW as Yf,aX as Xf,aY as fi,aZ as ir,a_ as Dy,a$ as Fy,b0 as go,b1 as bc,b2 as Oy,b3 as Je,b4 as Jf,b5 as _y,b6 as Zf,b7 as Tr,b8 as Ly,b9 as Bu,ba as Hu,bb as vc,bc as Ar,bd as Hn,be as $y,bf as Vy,bg as Ny,bh as By,bi as Hy,bj as zy,bk as Ht,bl as Gy,bm as Uy,bn as ep,bo as Cc,bp as Wy,bq as qy,br as Ky,bs as zu,bt as Gu,bu as Qy,bv as Yy,bw as Xy,bx as Jy,by as ot,bz as ue,bA as tp,bB as un,bC as Wo,bD as Mr,bE as Xs,bF as Zy,bG as eb,bH as np,bI as Sa,bJ as Pa,bK as Hr,bL as zn,bM as Gn,bN as ka,bO as tb,bP as Gi,bQ as Pn,bR as Ui,bS as rr,bT as nb,bU as pi,bV as jl,bW as Ia,bX as rb,bY as fs,bZ as ps,b_ as ms,b$ as Mn,c0 as he,c1 as gs,c2 as rp,c3 as qo,c4 as ob,c5 as sb,c6 as ib,c7 as ab,c8 as op,c9 as lb,ca as sp,cb,cc as ub,cd as db,ce as hb,cf as fb,cg as pb,ch as mb,ci as gb,cj as wc,ck as jc,cl as xb,cm as yb,cn as ip,co as bb,cp as vb,cq as Cb,cr as ns,cs as Sc,ct as ap,cu as wb,cv as jb,cw as Sb,cx as Ea,cy as Uu,cz as Pb,cA as Wu,cB as kb,cC as Ib,cD as Ta,cE as Eb,cF as Tb,cG as Ab,cH as Mb,cI as lp,cJ as Rb,cK as Db,cL as Fb,cM as Ob,cN as _b,cO as Lb,cP as $b,cQ as Aa,cR as Vb,cS as Nb}from"./mui-vendor-BHlHlGtl.js";import{h as Bb,g as Pc,b as Hb,c as Le,a as f,e as kc,d as zb,u as Ic,r as cp,N as up,i as Gb,L as qu,O as Ub,B as Wb,j as qb,k as Dt}from"./react-vendor-QNX_tP7X.js";import{R as Kb,A as Qb,C as Yb,X as Xb,Y as Jb,T as Zb,L as ev,a as Fs}from"./chart-vendor-CXDpu7Oe.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Os={},Ku;function tv(){if(Ku)return Os;Ku=1;var e=Bb();return Os.createRoot=e.createRoot,Os.hydrateRoot=e.hydrateRoot,Os}var nv=tv();const rv=Pc(nv);var Ao={},Ma={};const ov=Hb(cy);var Qu;function sv(){return Qu||(Qu=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=ov}(Ma)),Ma}var Yu;function iv(){if(Yu)return Ao;Yu=1;var e=uy();Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var t=e(sv()),n=dy();return Ao.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ao}var av=iv();const lv=Pc(av);function dp(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=dp(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function zr(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=dp(e))&&(o&&(o+=" "),o+=t);return o}let cv={data:""},uv=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||cv,dv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hv=/\/\*[^]*?\*\/|  +/g,Xu=/\n+/g,Sr=(e,t)=>{let n="",o="",s="";for(let i in e){let a=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":o+=i[1]=="f"?Sr(a,i):i+"{"+Sr(a,i[1]=="k"?"":t)+"}":typeof a=="object"?o+=Sr(a,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Sr.p?Sr.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+o},_n={},hp=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+hp(e[n]);return t}return e},fv=(e,t,n,o,s)=>{let i=hp(e),a=_n[i]||(_n[i]=(u=>{let c=0,d=11;for(;c<u.length;)d=101*d+u.charCodeAt(c++)>>>0;return"go"+d})(i));if(!_n[a]){let u=i!==e?e:(c=>{let d,h,p=[{}];for(;d=dv.exec(c.replace(hv,""));)d[4]?p.shift():d[3]?(h=d[3].replace(Xu," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][d[1]]=d[2].replace(Xu," ").trim();return p[0]})(e);_n[a]=Sr(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let l=n&&_n.g?_n.g:null;return n&&(_n.g=_n[a]),((u,c,d,h)=>{h?c.data=c.data.replace(h,u):c.data.indexOf(u)===-1&&(c.data=d?u+c.data:c.data+u)})(_n[a],t,o,l),a},pv=(e,t,n)=>e.reduce((o,s,i)=>{let a=t[i];if(a&&a.call){let l=a(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=u?"."+u:l&&typeof l=="object"?l.props?"":Sr(l,""):l===!1?"":l}return o+s+(a??"")},"");function Ec(e){let t=this||{},n=e.call?e(t.p):e;return fv(n.unshift?n.raw?pv(n,[].slice.call(arguments,1),t.p):n.reduce((o,s)=>Object.assign(o,s&&s.call?s(t.p):s),{}):n,uv(t.target),t.g,t.o,t.k)}Ec.bind({g:1});Ec.bind({k:1});function mv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fp(e,t,n){return t&&mv(e.prototype,t),e}function Qe(){return Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qe.apply(this,arguments)}function pp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function xs(e,t){if(e==null)return{};var n={},o=Object.keys(e),s,i;for(i=0;i<o.length;i++)s=o[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ju(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Zu=function(){return""},mp=Le.createContext({enqueueSnackbar:Zu,closeSnackbar:Zu}),vr={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ed=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Tc=function(t){return""+ed(t.vertical)+ed(t.horizontal)},_s=function(t){return!!t||t===0},Ls="unmounted",Kr="exited",Qr="entering",Mo="entered",td="exiting",Ac=function(e){pp(t,e);function t(o){var s;s=e.call(this,o)||this;var i=o.appear,a;return s.appearStatus=null,o.in?i?(a=Kr,s.appearStatus=Qr):a=Mo:o.unmountOnExit||o.mountOnEnter?a=Ls:a=Kr,s.state={status:a},s.nextCallback=null,s}t.getDerivedStateFromProps=function(s,i){var a=s.in;return a&&i.status===Ls?{status:Kr}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Qr&&a!==Mo&&(i=Qr):(a===Qr||a===Mo)&&(i=td)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i=s,a=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(a=s.exit,i=s.enter),{exit:a,enter:i}},n.updateStatus=function(s,i){s===void 0&&(s=!1),i!==null?(this.cancelNextCallback(),i===Qr?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===Kr&&this.setState({status:Ls})},n.performEnter=function(s){var i=this,a=this.props.enter,l=s,u=this.getTimeouts();if(!s&&!a){this.safeSetState({status:Mo},function(){i.props.onEntered&&i.props.onEntered(i.node,l)});return}this.props.onEnter&&this.props.onEnter(this.node,l),this.safeSetState({status:Qr},function(){i.props.onEntering&&i.props.onEntering(i.node,l),i.onTransitionEnd(u.enter,function(){i.safeSetState({status:Mo},function(){i.props.onEntered&&i.props.onEntered(i.node,l)})})})},n.performExit=function(){var s=this,i=this.props.exit,a=this.getTimeouts();if(!i){this.safeSetState({status:Kr},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:td},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Kr},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,a=!0;return this.nextCallback=function(){a&&(a=!1,i.nextCallback=null,s())},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var a=s==null&&!this.props.addEndListener;if(!this.node||a){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Ls)return null;var i=this.props,a=i.children,l=xs(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return a(s,l)},fp(t,[{key:"node",get:function(){var s,i=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!i)throw new Error("notistack - Custom snackbar is not refForwarding");return i}}]),t}(Le.Component);function Yr(){}Ac.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Yr,onEntering:Yr,onEntered:Yr,onExit:Yr,onExiting:Yr,onExited:Yr};function nd(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Sl(e,t){return f.useMemo(function(){return e==null&&t==null?null:function(n){nd(e,n),nd(t,n)}},[e,t])}function mi(e){var t=e.timeout,n=e.style,o=n===void 0?{}:n,s=e.mode;return{duration:typeof t=="object"?t[s]||0:t,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var Pl={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},gp=function(t){t.scrollTop=t.scrollTop},rd=function(t){return Math.round(t)+"ms"};function ro(e,t){e===void 0&&(e=["all"]);var n=t||{},o=n.duration,s=o===void 0?300:o,i=n.easing,a=i===void 0?Pl.easeInOut:i,l=n.delay,u=l===void 0?0:l,c=Array.isArray(e)?e:[e];return c.map(function(d){var h=typeof s=="string"?s:rd(s),p=typeof u=="string"?u:rd(u);return d+" "+h+" "+a+" "+p}).join(",")}function gv(e){return e&&e.ownerDocument||document}function xp(e){var t=gv(e);return t.defaultView||window}function xv(e,t){t===void 0&&(t=166);var n;function o(){for(var s=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=function(){e.apply(s,a)};clearTimeout(n),n=setTimeout(u,t)}return o.clear=function(){clearTimeout(n)},o}function yv(e,t){var n=t.getBoundingClientRect(),o=xp(t),s;if(t.fakeTransform)s=t.fakeTransform;else{var i=o.getComputedStyle(t);s=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var a=0,l=0;if(s&&s!=="none"&&typeof s=="string"){var u=s.split("(")[1].split(")")[0].split(",");a=parseInt(u[4],10),l=parseInt(u[5],10)}switch(e){case"left":return"translateX("+(o.innerWidth+a-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-a)+"px)";case"up":return"translateY("+(o.innerHeight+l-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-l)+"px)"}}function $s(e,t){if(t){var n=yv(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var yp=f.forwardRef(function(e,t){var n=e.children,o=e.direction,s=o===void 0?"down":o,i=e.in,a=e.style,l=e.timeout,u=l===void 0?0:l,c=e.onEnter,d=e.onEntered,h=e.onExit,p=e.onExited,y=xs(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),m=f.useRef(null),g=Sl(n.ref,m),v=Sl(g,t),x=function(I,R){$s(s,I),gp(I),c&&c(I,R)},b=function(I){var R=a?.transitionTimingFunction||Pl.easeOut,V=mi({timeout:u,mode:"enter",style:Qe({},a,{transitionTimingFunction:R})});I.style.webkitTransition=ro("-webkit-transform",V),I.style.transition=ro("transform",V),I.style.webkitTransform="none",I.style.transform="none"},C=function(I){var R=a?.transitionTimingFunction||Pl.sharp,V=mi({timeout:u,mode:"exit",style:Qe({},a,{transitionTimingFunction:R})});I.style.webkitTransition=ro("-webkit-transform",V),I.style.transition=ro("transform",V),$s(s,I),h&&h(I)},P=function(I){I.style.webkitTransition="",I.style.transition="",p&&p(I)},F=f.useCallback(function(){m.current&&$s(s,m.current)},[s]);return f.useEffect(function(){if(!(i||s==="down"||s==="right")){var T=xv(function(){m.current&&$s(s,m.current)}),I=xp(m.current);return I.addEventListener("resize",T),function(){T.clear(),I.removeEventListener("resize",T)}}},[s,i]),f.useEffect(function(){i||F()},[i,F]),f.createElement(Ac,Object.assign({appear:!0,nodeRef:m,onEnter:x,onEntered:d,onEntering:b,onExit:C,onExited:P,in:i,timeout:u},y),function(T,I){return f.cloneElement(n,Qe({ref:v,style:Qe({visibility:T==="exited"&&!i?"hidden":void 0},a,{},n.props.style)},I))})});yp.displayName="Slide";var Wi=function(t){return Le.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},bv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},vv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Cv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},wv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},jv={default:void 0,success:Le.createElement(bv,null),warning:Le.createElement(vv,null),error:Le.createElement(Cv,null),info:Le.createElement(wv,null)},Rr={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:jv,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:yp,transitionDuration:{enter:225,exit:195}},Sv=function(t,n){var o=function(i){return typeof i=="number"||i===null};return o(t)?t:o(n)?n:Rr.autoHideDuration},Pv=function(t,n){var o=function(i,a){return a.some(function(l){return typeof i===l})};return o(t,["string","number"])?t:o(t,["object"])?Qe({},Rr.transitionDuration,{},o(n,["object"])&&n,{},t):o(n,["string","number"])?n:o(n,["object"])?Qe({},Rr.transitionDuration,{},n):Rr.transitionDuration},kv=function(t,n){return function(o,s){return s===void 0&&(s=!1),s?Qe({},Rr[o],{},n[o],{},t[o]):o==="autoHideDuration"?Sv(t.autoHideDuration,n.autoHideDuration):o==="transitionDuration"?Pv(t.transitionDuration,n.transitionDuration):t[o]||n[o]||Rr[o]}};function ys(e){return Object.entries(e).reduce(function(t,n){var o,s=n[0],i=n[1];return Qe({},t,(o={},o[s]=Ec(i),o))},{})}var xo={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},od=ys({root:{height:0},entered:{height:"auto"}}),Ra="0px",Da=175,bp=f.forwardRef(function(e,t){var n=e.children,o=e.in,s=e.onExited,i=f.useRef(null),a=f.useRef(null),l=Sl(t,a),u=function(){return i.current?i.current.clientHeight:0},c=function(g){g.style.height=Ra},d=function(g){var v=u(),x=mi({timeout:Da,mode:"enter"}),b=x.duration,C=x.easing;g.style.transitionDuration=typeof b=="string"?b:b+"ms",g.style.height=v+"px",g.style.transitionTimingFunction=C||""},h=function(g){g.style.height="auto"},p=function(g){g.style.height=u()+"px"},y=function(g){gp(g);var v=mi({timeout:Da,mode:"exit"}),x=v.duration,b=v.easing;g.style.transitionDuration=typeof x=="string"?x:x+"ms",g.style.height=Ra,g.style.transitionTimingFunction=b||""};return f.createElement(Ac,{in:o,unmountOnExit:!0,onEnter:c,onEntered:h,onEntering:d,onExit:p,onExited:s,onExiting:y,nodeRef:a,timeout:Da},function(m,g){return f.createElement("div",Object.assign({ref:l,className:zr(od.root,m==="entered"&&od.entered),style:Qe({pointerEvents:"all",overflow:"hidden",minHeight:Ra,transition:ro("height")},m==="entered"&&{overflow:"visible"},{},m==="exited"&&!o&&{visibility:"hidden"})},g),f.createElement("div",{ref:i,className:xo.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});bp.displayName="Collapse";var sd={right:"left",left:"right",bottom:"up",top:"down"},Iv=function(t){return t.horizontal!=="center"?sd[t.horizontal]:sd[t.vertical]},Ev=function(t){return"anchorOrigin"+Tc(t)},Tv=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(o){return!n[o]}).reduce(function(o,s){var i;return Qe({},o,(i={},i[s]=t[s],i))},{})},Av=function(){};function Ko(e,t){return e.reduce(function(n,o){return o==null?n:function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=[].concat(a);t&&u.indexOf(t)===-1&&u.push(t),n.apply(this,u),o.apply(this,u)}},Av)}var Mv=typeof window<"u"?f.useLayoutEffect:f.useEffect;function id(e){var t=f.useRef(e);return Mv(function(){t.current=e}),f.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var vp=f.forwardRef(function(e,t){var n=e.children,o=e.className,s=e.autoHideDuration,i=e.disableWindowBlurListener,a=i===void 0?!1:i,l=e.onClose,u=e.id,c=e.open,d=e.SnackbarProps,h=d===void 0?{}:d,p=f.useRef(),y=id(function(){l&&l.apply(void 0,arguments)}),m=id(function(C){!l||C==null||(p.current&&clearTimeout(p.current),p.current=setTimeout(function(){y(null,"timeout",u)},C))});f.useEffect(function(){return c&&m(s),function(){p.current&&clearTimeout(p.current)}},[c,s,m]);var g=function(){p.current&&clearTimeout(p.current)},v=f.useCallback(function(){s!=null&&m(s*.5)},[s,m]),x=function(P){h.onMouseEnter&&h.onMouseEnter(P),g()},b=function(P){h.onMouseLeave&&h.onMouseLeave(P),v()};return f.useEffect(function(){if(!a&&c)return window.addEventListener("focus",v),window.addEventListener("blur",g),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",g)}},[a,v,c]),f.createElement("div",Object.assign({ref:t},h,{className:zr(xo.Snackbar,o),onMouseEnter:x,onMouseLeave:b}),n)});vp.displayName="Snackbar";var Fa,Rv=ys({root:(Fa={display:"flex",flexWrap:"wrap",flexGrow:1},Fa[vr.upSm]={flexGrow:"initial",minWidth:"288px"},Fa)}),Cp=f.forwardRef(function(e,t){var n=e.className,o=xs(e,["className"]);return Le.createElement("div",Object.assign({ref:t,className:zr(Rv.root,n)},o))});Cp.displayName="SnackbarContent";var Ro=ys({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ad="notistack-snackbar",wp=f.forwardRef(function(e,t){var n=e.id,o=e.message,s=e.action,i=e.iconVariant,a=e.variant,l=e.hideIconVariant,u=e.style,c=e.className,d=i[a],h=s;return typeof h=="function"&&(h=h(n)),Le.createElement(Cp,{ref:t,role:"alert","aria-describedby":ad,style:u,className:zr(xo.MuiContent,xo.MuiContentVariant(a),Ro.root,Ro[a],c,!l&&d&&Ro.lessPadding)},Le.createElement("div",{id:ad,className:Ro.message},l?null:d,o),h&&Le.createElement("div",{className:Ro.action},h))});wp.displayName="MaterialDesignContent";var Dv=f.memo(wp),Fv=ys({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),Ov=function(t){var n=f.useRef(),o=f.useState(!0),s=o[0],i=o[1],a=Ko([t.snack.onClose,t.onClose]),l=function(){t.snack.requestClose&&a(null,"instructed",t.snack.id)},u=f.useCallback(function(){n.current=setTimeout(function(){i(function(V){return!V})},125)},[]);f.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var c=t.snack,d=t.classes,h=t.Component,p=h===void 0?Dv:h,y=f.useMemo(function(){return Tv(d)},[d]),m=c.open,g=c.SnackbarProps,v=c.TransitionComponent,x=c.TransitionProps,b=c.transitionDuration,C=c.disableWindowBlurListener,P=c.content,F=xs(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=Qe({direction:Iv(F.anchorOrigin),timeout:b},x),I=P;typeof I=="function"&&(I=I(F.id,F.message));var R=["onEnter","onEntered","onExit","onExited"].reduce(function(V,O){var S;return Qe({},V,(S={},S[O]=Ko([t.snack[O],t[O]],F.id),S))},{});return Le.createElement(bp,{in:s,onExited:R.onExited},Le.createElement(vp,{open:m,id:F.id,disableWindowBlurListener:C,autoHideDuration:F.autoHideDuration,className:zr(Fv.wrappedRoot,y.root,y[Ev(F.anchorOrigin)]),SnackbarProps:g,onClose:a},Le.createElement(v,Object.assign({},T,{appear:!0,in:m,onExit:R.onExit,onExited:u,onEnter:R.onEnter,onEntered:Ko([R.onEntered,l],F.id)}),I||Le.createElement(p,Object.assign({},F)))))},Do,Oa,Vs,Ns,_a,Ln={view:{default:20},snackbar:{default:6,dense:2}},ld="."+xo.CollapseWrapper,La=16,Bs=ys({root:(Do={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:ro(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Do[ld]={padding:Ln.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Do.maxWidth="calc(100% - "+Ln.view.default*2+"px)",Do[vr.downXs]={width:"100%",maxWidth:"calc(100% - "+La*2+"px)"},Do),rootDense:(Oa={},Oa[ld]={padding:Ln.snackbar.dense+"px 0px"},Oa),top:{top:Ln.view.default-Ln.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Ln.view.default-Ln.snackbar.default+"px",flexDirection:"column-reverse"},left:(Vs={left:Ln.view.default+"px"},Vs[vr.upSm]={alignItems:"flex-start"},Vs[vr.downXs]={left:La+"px"},Vs),right:(Ns={right:Ln.view.default+"px"},Ns[vr.upSm]={alignItems:"flex-end"},Ns[vr.downXs]={right:La+"px"},Ns),center:(_a={left:"50%",transform:"translateX(-50%)"},_a[vr.upSm]={alignItems:"center"},_a)}),_v=function(t){var n=t.classes,o=n===void 0?{}:n,s=t.anchorOrigin,i=t.dense,a=t.children,l=zr(xo.SnackbarContainer,Bs[s.vertical],Bs[s.horizontal],Bs.root,o.containerRoot,o["containerAnchorOrigin"+Tc(s)],i&&Bs.rootDense);return Le.createElement("div",{className:l},a)},Lv=f.memo(_v),cd=function(t){var n=typeof t=="string"||f.isValidElement(t);return!n},$v=function(e){pp(t,e);function t(o){var s;return s=e.call(this,o)||this,s.enqueueSnackbar=function(i,a){if(a===void 0&&(a={}),i==null)throw new Error("enqueueSnackbar called with invalid argument");var l=cd(i)?i:a,u=cd(i)?i.message:i,c=l.key,d=l.preventDuplicate,h=xs(l,["key","preventDuplicate"]),p=_s(c),y=p?c:new Date().getTime()+Math.random(),m=kv(h,s.props),g=Qe({id:y},h,{message:u,open:!0,entered:!1,requestClose:!1,persist:m("persist"),action:m("action"),content:m("content"),variant:m("variant"),anchorOrigin:m("anchorOrigin"),disableWindowBlurListener:m("disableWindowBlurListener"),autoHideDuration:m("autoHideDuration"),hideIconVariant:m("hideIconVariant"),TransitionComponent:m("TransitionComponent"),transitionDuration:m("transitionDuration"),TransitionProps:m("TransitionProps",!0),iconVariant:m("iconVariant",!0),style:m("style",!0),SnackbarProps:m("SnackbarProps",!0),className:zr(s.props.className,h.className)});return g.persist&&(g.autoHideDuration=void 0),s.setState(function(v){if(d===void 0&&s.props.preventDuplicate||d){var x=function(F){return p?F.id===y:F.message===u},b=v.queue.findIndex(x)>-1,C=v.snacks.findIndex(x)>-1;if(b||C)return v}return s.handleDisplaySnack(Qe({},v,{queue:[].concat(v.queue,[g])}))}),y},s.handleDisplaySnack=function(i){var a=i.snacks;return a.length>=s.maxSnack?s.handleDismissOldest(i):s.processQueue(i)},s.processQueue=function(i){var a=i.queue,l=i.snacks;return a.length>0?Qe({},i,{snacks:[].concat(l,[a[0]]),queue:a.slice(1,a.length)}):i},s.handleDismissOldest=function(i){if(i.snacks.some(function(d){return!d.open||d.requestClose}))return i;var a=!1,l=!1,u=i.snacks.reduce(function(d,h){return d+(h.open&&h.persist?1:0)},0);u===s.maxSnack&&(l=!0);var c=i.snacks.map(function(d){return!a&&(!d.persist||l)?(a=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),s.props.onClose&&s.props.onClose(null,"maxsnack",d.id),Qe({},d,{open:!1})):Qe({},d,{requestClose:!0})):Qe({},d)});return Qe({},i,{snacks:c})},s.handleEnteredSnack=function(i,a,l){if(!_s(l))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(u){var c=u.snacks;return{snacks:c.map(function(d){return d.id===l?Qe({},d,{entered:!0}):Qe({},d)})}})},s.handleCloseSnack=function(i,a,l){s.props.onClose&&s.props.onClose(i,a,l);var u=l===void 0;s.setState(function(c){var d=c.snacks,h=c.queue;return{snacks:d.map(function(p){return!u&&p.id!==l?Qe({},p):p.entered?Qe({},p,{open:!1}):Qe({},p,{requestClose:!0})}),queue:h.filter(function(p){return p.id!==l})}})},s.closeSnackbar=function(i){var a=s.state.snacks.find(function(l){return l.id===i});_s(i)&&a&&a.onClose&&a.onClose(null,"instructed",i),s.handleCloseSnack(null,"instructed",i)},s.handleExitedSnack=function(i,a){if(!_s(a))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(l){var u=s.processQueue(Qe({},l,{snacks:l.snacks.filter(function(c){return c.id!==a})}));return u.queue.length===0?u:s.handleDismissOldest(u)})},s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(Ju(s)),closeSnackbar:s.closeSnackbar.bind(Ju(s))}},s}var n=t.prototype;return n.render=function(){var s=this,i=this.state.contextValue,a=this.props,l=a.domRoot,u=a.children,c=a.dense,d=c===void 0?!1:c,h=a.Components,p=h===void 0?{}:h,y=a.classes,m=this.state.snacks.reduce(function(v,x){var b,C=Tc(x.anchorOrigin),P=v[C]||[];return Qe({},v,(b={},b[C]=[].concat(P,[x]),b))},{}),g=Object.keys(m).map(function(v){var x=m[v],b=x[0];return Le.createElement(Lv,{key:v,dense:d,anchorOrigin:b.anchorOrigin,classes:y},x.map(function(C){return Le.createElement(Ov,{key:C.id,snack:C,classes:y,Component:p[C.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:Ko([s.handleExitedSnack,s.props.onExited],C.id),onEntered:Ko([s.handleEnteredSnack,s.props.onEntered],C.id)})}))});return Le.createElement(mp.Provider,{value:i},u,l?kc.createPortal(g,l):g)},fp(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||Rr.maxSnack}}]),t}(f.Component),Kt=function(){return f.useContext(mp)},qi=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(o){var s=this,i=o||function(){};return this.listeners.push(i),this.onSubscribe(),function(){s.listeners=s.listeners.filter(function(a){return a!==i}),s.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),jp=typeof window>"u";function Ft(){}function Vv(e,t){return typeof e=="function"?e(t):e}function Nv(e){return typeof e=="number"&&e>=0&&e!==1/0}function gi(e){return Array.isArray(e)?e:[e]}function Bv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $a(e,t,n){return Ki(e)?typeof t=="function"?j({},n,{queryKey:e,queryFn:t}):j({},t,{queryKey:e}):e}function Zn(e,t,n){return Ki(e)?[j({},t,{queryKey:e}),n]:[e||{},t]}function Hv(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function ud(e,t){var n=e.active,o=e.exact,s=e.fetching,i=e.inactive,a=e.predicate,l=e.queryKey,u=e.stale;if(Ki(l)){if(o){if(t.queryHash!==Mc(l,t.options))return!1}else if(!xi(t.queryKey,l))return!1}var c=Hv(n,i);if(c==="none")return!1;if(c!=="all"){var d=t.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||typeof s=="boolean"&&t.isFetching()!==s||a&&!a(t))}function dd(e,t){var n=e.exact,o=e.fetching,s=e.predicate,i=e.mutationKey;if(Ki(i)){if(!t.options.mutationKey)return!1;if(n){if(Pr(t.options.mutationKey)!==Pr(i))return!1}else if(!xi(t.options.mutationKey,i))return!1}return!(typeof o=="boolean"&&t.state.status==="loading"!==o||s&&!s(t))}function Mc(e,t){var n=t?.queryKeyHashFn||Pr;return n(e)}function Pr(e){var t=gi(e);return zv(t)}function zv(e){return JSON.stringify(e,function(t,n){return kl(n)?Object.keys(n).sort().reduce(function(o,s){return o[s]=n[s],o},{}):n})}function xi(e,t){return Sp(gi(e),gi(t))}function Sp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!Sp(e[n],t[n])}):!1}function Pp(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||kl(e)&&kl(t)){for(var o=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{},l=0,u=0;u<i;u++){var c=n?u:s[u];a[c]=Pp(e[c],t[c]),a[c]===e[c]&&l++}return o===i&&l===o?e:a}return t}function kl(e){if(!hd(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!hd(n)||!n.hasOwnProperty("isPrototypeOf"))}function hd(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ki(e){return typeof e=="string"||Array.isArray(e)}function Gv(e){return new Promise(function(t){setTimeout(t,e)})}function fd(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function kp(){if(typeof AbortController=="function")return new AbortController}var Uv=function(e){Bi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!jp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setFocused(l):a.onFocus()})},n.setFocused=function(s){this.focused=s,s&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(s){s()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(qi),Js=new Uv,Wv=function(e){Bi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!jp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setOnline(l):a.onOnline()})},n.setOnline=function(s){this.online=s,s&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(s){s()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(qi),Zs=new Wv;function qv(e){return Math.min(1e3*Math.pow(2,e),3e4)}function yi(e){return typeof e?.cancel=="function"}var Ip=function(t){this.revert=t?.revert,this.silent=t?.silent};function Va(e){return e instanceof Ip}var Ep=function(t){var n=this,o=!1,s,i,a,l;this.abort=t.abort,this.cancel=function(p){return s?.(p)},this.cancelRetry=function(){o=!0},this.continueRetry=function(){o=!1},this.continue=function(){return i?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(p,y){a=p,l=y});var u=function(y){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(y),i?.(),a(y))},c=function(y){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(y),i?.(),l(y))},d=function(){return new Promise(function(y){i=y,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){i=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},h=function p(){if(!n.isResolved){var y;try{y=t.fn()}catch(m){y=Promise.reject(m)}s=function(g){if(!n.isResolved&&(c(new Ip(g)),n.abort==null||n.abort(),yi(y)))try{y.cancel()}catch{}},n.isTransportCancelable=yi(y),Promise.resolve(y).then(u).catch(function(m){var g,v;if(!n.isResolved){var x=(g=t.retry)!=null?g:3,b=(v=t.retryDelay)!=null?v:qv,C=typeof b=="function"?b(n.failureCount,m):b,P=x===!0||typeof x=="number"&&n.failureCount<x||typeof x=="function"&&x(n.failureCount,m);if(o||!P){c(m);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,m),Gv(C).then(function(){if(!Js.isFocused()||!Zs.isOnline())return d()}).then(function(){o?c(m):p()})}})}};h()},Kv=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(o){var s;this.transactions++;try{s=o()}finally{this.transactions--,this.transactions||this.flush()}return s},t.schedule=function(o){var s=this;this.transactions?this.queue.push(o):fd(function(){s.notifyFn(o)})},t.batchCalls=function(o){var s=this;return function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];s.schedule(function(){o.apply(void 0,a)})}},t.flush=function(){var o=this,s=this.queue;this.queue=[],s.length&&fd(function(){o.batchNotifyFn(function(){s.forEach(function(i){o.notifyFn(i)})})})},t.setNotifyFunction=function(o){this.notifyFn=o},t.setBatchNotifyFunction=function(o){this.batchNotifyFn=o},e}(),jt=new Kv,Tp=console;function Ap(){return Tp}function Qv(e){Tp=e}var Yv=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(o){var s;this.options=j({},this.defaultOptions,o),this.meta=o?.meta,this.cacheTime=Math.max(this.cacheTime||0,(s=this.options.cacheTime)!=null?s:300*1e3)},t.setDefaultOptions=function(o){this.defaultOptions=o},t.scheduleGc=function(){var o=this;this.clearGcTimeout(),Nv(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){o.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(o,s){var i,a,l=this.state.data,u=Vv(o,l);return(i=(a=this.options).isDataEqual)!=null&&i.call(a,l,u)?u=l:this.options.structuralSharing!==!1&&(u=Pp(l,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:s?.updatedAt}),u},t.setState=function(o,s){this.dispatch({type:"setState",state:o,setStateOptions:s})},t.cancel=function(o){var s,i=this.promise;return(s=this.retryer)==null||s.cancel(o),i?i.then(Ft).catch(Ft):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(o){return o.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(o){return o.getCurrentResult().isStale})},t.isStaleByTime=function(o){return o===void 0&&(o=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Bv(this.state.dataUpdatedAt,o)},t.onFocus=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.onOnline=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnReconnect()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.addObserver=function(o){this.observers.indexOf(o)===-1&&(this.observers.push(o),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:o}))},t.removeObserver=function(o){this.observers.indexOf(o)!==-1&&(this.observers=this.observers.filter(function(s){return s!==o}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:o}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(o,s){var i=this,a,l,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(o&&this.setOptions(o),!this.options.queryFn){var d=this.observers.find(function(b){return b.options.queryFn});d&&this.setOptions(d.options)}var h=gi(this.queryKey),p=kp(),y={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(y,"signal",{enumerable:!0,get:function(){if(p)return i.abortSignalConsumed=!0,p.signal}});var m=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(y)):Promise.reject("Missing queryFn")},g={fetchOptions:s,options:this.options,queryKey:h,state:this.state,fetchFn:m,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var v;(v=this.options.behavior)==null||v.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=g.fetchOptions)==null?void 0:l.meta)){var x;this.dispatch({type:"fetch",meta:(x=g.fetchOptions)==null?void 0:x.meta})}return this.retryer=new Ep({fn:g.fetchFn,abort:p==null||(u=p.abort)==null?void 0:u.bind(p),onSuccess:function(C){i.setData(C),i.cache.config.onSuccess==null||i.cache.config.onSuccess(C,i),i.cacheTime===0&&i.optionalRemove()},onError:function(C){Va(C)&&C.silent||i.dispatch({type:"error",error:C}),Va(C)||(i.cache.config.onError==null||i.cache.config.onError(C,i),Ap().error(C)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(o){var s=this;this.state=this.reducer(this.state,o),jt.batch(function(){s.observers.forEach(function(i){i.onQueryUpdate(o)}),s.cache.notify({query:s,type:"queryUpdated",action:o})})},t.getDefaultState=function(o){var s=typeof o.initialData=="function"?o.initialData():o.initialData,i=typeof o.initialData<"u",a=i?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0,l=typeof s<"u";return{data:s,dataUpdateCount:0,dataUpdatedAt:l?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},t.reducer=function(o,s){var i,a;switch(s.type){case"failed":return j({},o,{fetchFailureCount:o.fetchFailureCount+1});case"pause":return j({},o,{isPaused:!0});case"continue":return j({},o,{isPaused:!1});case"fetch":return j({},o,{fetchFailureCount:0,fetchMeta:(i=s.meta)!=null?i:null,isFetching:!0,isPaused:!1},!o.dataUpdatedAt&&{error:null,status:"loading"});case"success":return j({},o,{data:s.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:(a=s.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=s.error;return Va(l)&&l.revert&&this.revertState?j({},this.revertState):j({},o,{error:l,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return j({},o,{isInvalidated:!0});case"setState":return j({},o,s.state);default:return o}},e}(),Xv=function(e){Bi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.queries=[],s.queriesMap={},s}var n=t.prototype;return n.build=function(s,i,a){var l,u=i.queryKey,c=(l=i.queryHash)!=null?l:Mc(u,i),d=this.get(c);return d||(d=new Yv({cache:this,queryKey:u,queryHash:c,options:s.defaultQueryOptions(i),state:a,defaultOptions:s.getQueryDefaults(u),meta:i.meta}),this.add(d)),d},n.add=function(s){this.queriesMap[s.queryHash]||(this.queriesMap[s.queryHash]=s,this.queries.push(s),this.notify({type:"queryAdded",query:s}))},n.remove=function(s){var i=this.queriesMap[s.queryHash];i&&(s.destroy(),this.queries=this.queries.filter(function(a){return a!==s}),i===s&&delete this.queriesMap[s.queryHash],this.notify({type:"queryRemoved",query:s}))},n.clear=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){s.remove(i)})})},n.get=function(s){return this.queriesMap[s]},n.getAll=function(){return this.queries},n.find=function(s,i){var a=Zn(s,i),l=a[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(u){return ud(l,u)})},n.findAll=function(s,i){var a=Zn(s,i),l=a[0];return Object.keys(l).length>0?this.queries.filter(function(u){return ud(l,u)}):this.queries},n.notify=function(s){var i=this;jt.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){i.onFocus()})})},n.onOnline=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){i.onOnline()})})},t}(qi),Jv=function(){function e(n){this.options=j({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||Zv(),this.meta=n.meta}var t=e.prototype;return t.setState=function(o){this.dispatch({type:"setState",state:o})},t.addObserver=function(o){this.observers.indexOf(o)===-1&&this.observers.push(o)},t.removeObserver=function(o){this.observers=this.observers.filter(function(s){return s!==o})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Ft).catch(Ft)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var o=this,s,i=this.state.status==="loading",a=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){o.mutationCache.config.onMutate==null||o.mutationCache.config.onMutate(o.state.variables,o)}).then(function(){return o.options.onMutate==null?void 0:o.options.onMutate(o.state.variables)}).then(function(l){l!==o.state.context&&o.dispatch({type:"loading",context:l,variables:o.state.variables})})),a.then(function(){return o.executeMutation()}).then(function(l){s=l,o.mutationCache.config.onSuccess==null||o.mutationCache.config.onSuccess(s,o.state.variables,o.state.context,o)}).then(function(){return o.options.onSuccess==null?void 0:o.options.onSuccess(s,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(s,null,o.state.variables,o.state.context)}).then(function(){return o.dispatch({type:"success",data:s}),s}).catch(function(l){return o.mutationCache.config.onError==null||o.mutationCache.config.onError(l,o.state.variables,o.state.context,o),Ap().error(l),Promise.resolve().then(function(){return o.options.onError==null?void 0:o.options.onError(l,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(void 0,l,o.state.variables,o.state.context)}).then(function(){throw o.dispatch({type:"error",error:l}),l})})},t.executeMutation=function(){var o=this,s;return this.retryer=new Ep({fn:function(){return o.options.mutationFn?o.options.mutationFn(o.state.variables):Promise.reject("No mutationFn found")},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(o){var s=this;this.state=eC(this.state,o),jt.batch(function(){s.observers.forEach(function(i){i.onMutationUpdate(o)}),s.mutationCache.notify(s)})},e}();function Zv(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function eC(e,t){switch(t.type){case"failed":return j({},e,{failureCount:e.failureCount+1});case"pause":return j({},e,{isPaused:!0});case"continue":return j({},e,{isPaused:!1});case"loading":return j({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return j({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return j({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return j({},e,t.state);default:return e}}var tC=function(e){Bi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.mutations=[],s.mutationId=0,s}var n=t.prototype;return n.build=function(s,i,a){var l=new Jv({mutationCache:this,mutationId:++this.mutationId,options:s.defaultMutationOptions(i),state:a,defaultOptions:i.mutationKey?s.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(l),l},n.add=function(s){this.mutations.push(s),this.notify(s)},n.remove=function(s){this.mutations=this.mutations.filter(function(i){return i!==s}),s.cancel(),this.notify(s)},n.clear=function(){var s=this;jt.batch(function(){s.mutations.forEach(function(i){s.remove(i)})})},n.getAll=function(){return this.mutations},n.find=function(s){return typeof s.exact>"u"&&(s.exact=!0),this.mutations.find(function(i){return dd(s,i)})},n.findAll=function(s){return this.mutations.filter(function(i){return dd(s,i)})},n.notify=function(s){var i=this;jt.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var s=this.mutations.filter(function(i){return i.state.isPaused});return jt.batch(function(){return s.reduce(function(i,a){return i.then(function(){return a.continue().catch(Ft)})},Promise.resolve())})},t}(qi);function nC(){return{onFetch:function(t){t.fetchFn=function(){var n,o,s,i,a,l,u=(n=t.fetchOptions)==null||(o=n.meta)==null?void 0:o.refetchPage,c=(s=t.fetchOptions)==null||(i=s.meta)==null?void 0:i.fetchMore,d=c?.pageParam,h=c?.direction==="forward",p=c?.direction==="backward",y=((a=t.state.data)==null?void 0:a.pages)||[],m=((l=t.state.data)==null?void 0:l.pageParams)||[],g=kp(),v=g?.signal,x=m,b=!1,C=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},P=function(w,E,M,$){return x=$?[E].concat(x):[].concat(x,[E]),$?[M].concat(w):[].concat(w,[M])},F=function(w,E,M,$){if(b)return Promise.reject("Cancelled");if(typeof M>"u"&&!E&&w.length)return Promise.resolve(w);var L={queryKey:t.queryKey,signal:v,pageParam:M,meta:t.meta},_=C(L),B=Promise.resolve(_).then(function(G){return P(w,M,G,$)});if(yi(_)){var z=B;z.cancel=_.cancel}return B},T;if(!y.length)T=F([]);else if(h){var I=typeof d<"u",R=I?d:pd(t.options,y);T=F(y,I,R)}else if(p){var V=typeof d<"u",O=V?d:rC(t.options,y);T=F(y,V,O,!0)}else(function(){x=[];var D=typeof t.options.getNextPageParam>"u",w=u&&y[0]?u(y[0],0,y):!0;T=w?F([],D,m[0]):Promise.resolve(P([],m[0],y[0]));for(var E=function(L){T=T.then(function(_){var B=u&&y[L]?u(y[L],L,y):!0;if(B){var z=D?m[L]:pd(t.options,_);return F(_,D,z)}return Promise.resolve(P(_,m[L],y[L]))})},M=1;M<y.length;M++)E(M)})();var S=T.then(function(D){return{pages:D,pageParams:x}}),N=S;return N.cancel=function(){b=!0,g?.abort(),yi(T)&&T.cancel()},S}}}}function pd(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function rC(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var oC=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Xv,this.mutationCache=n.mutationCache||new tC,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var o=this;this.unsubscribeFocus=Js.subscribe(function(){Js.isFocused()&&Zs.isOnline()&&(o.mutationCache.onFocus(),o.queryCache.onFocus())}),this.unsubscribeOnline=Zs.subscribe(function(){Js.isFocused()&&Zs.isOnline()&&(o.mutationCache.onOnline(),o.queryCache.onOnline())})},t.unmount=function(){var o,s;(o=this.unsubscribeFocus)==null||o.call(this),(s=this.unsubscribeOnline)==null||s.call(this)},t.isFetching=function(o,s){var i=Zn(o,s),a=i[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(o){return this.mutationCache.findAll(j({},o,{fetching:!0})).length},t.getQueryData=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state.data},t.getQueriesData=function(o){return this.getQueryCache().findAll(o).map(function(s){var i=s.queryKey,a=s.state,l=a.data;return[i,l]})},t.setQueryData=function(o,s,i){var a=$a(o),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(s,i)},t.setQueriesData=function(o,s,i){var a=this;return jt.batch(function(){return a.getQueryCache().findAll(o).map(function(l){var u=l.queryKey;return[u,a.setQueryData(u,s,i)]})})},t.getQueryState=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state},t.removeQueries=function(o,s){var i=Zn(o,s),a=i[0],l=this.queryCache;jt.batch(function(){l.findAll(a).forEach(function(u){l.remove(u)})})},t.resetQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=this.queryCache,h=j({},u,{active:!0});return jt.batch(function(){return d.findAll(u).forEach(function(p){p.reset()}),a.refetchQueries(h,c)})},t.cancelQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var h=jt.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.cancel(d)})});return Promise.all(h).then(Ft).catch(Ft)},t.invalidateQueries=function(o,s,i){var a,l,u,c=this,d=Zn(o,s,i),h=d[0],p=d[1],y=j({},h,{active:(a=(l=h.refetchActive)!=null?l:h.active)!=null?a:!0,inactive:(u=h.refetchInactive)!=null?u:!1});return jt.batch(function(){return c.queryCache.findAll(h).forEach(function(m){m.invalidate()}),c.refetchQueries(y,p)})},t.refetchQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=jt.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.fetch(void 0,j({},c,{meta:{refetchPage:u?.refetchPage}}))})}),h=Promise.all(d).then(Ft);return c?.throwOnError||(h=h.catch(Ft)),h},t.fetchQuery=function(o,s,i){var a=$a(o,s,i),l=this.defaultQueryOptions(a);typeof l.retry>"u"&&(l.retry=!1);var u=this.queryCache.build(this,l);return u.isStaleByTime(l.staleTime)?u.fetch(l):Promise.resolve(u.state.data)},t.prefetchQuery=function(o,s,i){return this.fetchQuery(o,s,i).then(Ft).catch(Ft)},t.fetchInfiniteQuery=function(o,s,i){var a=$a(o,s,i);return a.behavior=nC(),this.fetchQuery(a)},t.prefetchInfiniteQuery=function(o,s,i){return this.fetchInfiniteQuery(o,s,i).then(Ft).catch(Ft)},t.cancelMutations=function(){var o=this,s=jt.batch(function(){return o.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(s).then(Ft).catch(Ft)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(o){return this.mutationCache.build(this,o).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(o){this.defaultOptions=o},t.setQueryDefaults=function(o,s){var i=this.queryDefaults.find(function(a){return Pr(o)===Pr(a.queryKey)});i?i.defaultOptions=s:this.queryDefaults.push({queryKey:o,defaultOptions:s})},t.getQueryDefaults=function(o){var s;return o?(s=this.queryDefaults.find(function(i){return xi(o,i.queryKey)}))==null?void 0:s.defaultOptions:void 0},t.setMutationDefaults=function(o,s){var i=this.mutationDefaults.find(function(a){return Pr(o)===Pr(a.mutationKey)});i?i.defaultOptions=s:this.mutationDefaults.push({mutationKey:o,defaultOptions:s})},t.getMutationDefaults=function(o){var s;return o?(s=this.mutationDefaults.find(function(i){return xi(o,i.mutationKey)}))==null?void 0:s.defaultOptions:void 0},t.defaultQueryOptions=function(o){if(o?._defaulted)return o;var s=j({},this.defaultOptions.queries,this.getQueryDefaults(o?.queryKey),o,{_defaulted:!0});return!s.queryHash&&s.queryKey&&(s.queryHash=Mc(s.queryKey,s)),s},t.defaultQueryObserverOptions=function(o){return this.defaultQueryOptions(o)},t.defaultMutationOptions=function(o){return o?._defaulted?o:j({},this.defaultOptions.mutations,this.getMutationDefaults(o?.mutationKey),o,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),sC=zb.unstable_batchedUpdates;jt.setBatchNotifyFunction(sC);var iC=console;Qv(iC);var md=Le.createContext(void 0),aC=Le.createContext(!1);function lC(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=md),window.ReactQueryClientContext):md}var cC=function(t){var n=t.client,o=t.contextSharing,s=o===void 0?!1:o,i=t.children;Le.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var a=lC(s);return Le.createElement(aC.Provider,{value:s},Le.createElement(a.Provider,{value:n},i))};const Mp=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Qi=f.createContext({}),Yi=f.createContext(null),Xi=typeof document<"u",Rc=Xi?f.useLayoutEffect:f.useEffect,Rp=f.createContext({strict:!1}),Dc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),uC="framerAppearId",Dp="data-"+Dc(uC);function dC(e,t,n,o){const{visualElement:s}=f.useContext(Qi),i=f.useContext(Rp),a=f.useContext(Yi),l=f.useContext(Mp).reducedMotion,u=f.useRef();o=o||i.renderer,!u.current&&o&&(u.current=o(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current;f.useInsertionEffect(()=>{c&&c.update(n,a)});const d=f.useRef(!!(n[Dp]&&!window.HandoffComplete));return Rc(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),f.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function oo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function hC(e,t,n){return f.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):oo(n)&&(n.current=o))},[t])}function rs(e){return typeof e=="string"||Array.isArray(e)}function Ji(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Fc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Oc=["initial",...Fc];function Zi(e){return Ji(e.animate)||Oc.some(t=>rs(e[t]))}function Fp(e){return!!(Zi(e)||e.variants)}function fC(e,t){if(Zi(e)){const{initial:n,animate:o}=e;return{initial:n===!1||rs(n)?n:void 0,animate:rs(o)?o:void 0}}return e.inherit!==!1?t:{}}function pC(e){const{initial:t,animate:n}=fC(e,f.useContext(Qi));return f.useMemo(()=>({initial:t,animate:n}),[gd(t),gd(n)])}function gd(e){return Array.isArray(e)?e.join(" "):e}const xd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},os={};for(const e in xd)os[e]={isEnabled:t=>xd[e].some(n=>!!t[n])};function mC(e){for(const t in e)os[t]={...os[t],...e[t]}}const _c=f.createContext({}),Op=f.createContext({}),gC=Symbol.for("motionComponentSymbol");function xC({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:s}){e&&mC(e);function i(l,u){let c;const d={...f.useContext(Mp),...l,layoutId:yC(l)},{isStatic:h}=d,p=pC(l),y=o(l,h);if(!h&&Xi){p.visualElement=dC(s,y,d,t);const m=f.useContext(Op),g=f.useContext(Rp).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,g,e,m))}return f.createElement(Qi.Provider,{value:p},c&&p.visualElement?f.createElement(c,{visualElement:p.visualElement,...d}):null,n(s,l,hC(y,p.visualElement,u),y,h,p.visualElement))}const a=f.forwardRef(i);return a[gC]=s,a}function yC({layoutId:e}){const t=f.useContext(_c).id;return t&&e!==void 0?t+"-"+e:e}function bC(e){function t(o,s={}){return xC(e(o,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(o,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const vC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lc(e){return typeof e!="string"||e.includes("-")?!1:!!(vC.indexOf(e)>-1||/[A-Z]/.test(e))}const bi={};function CC(e){Object.assign(bi,e)}const bs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gr=new Set(bs);function _p(e,{layout:t,layoutId:n}){return Gr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!bi[e]||e==="opacity")}const qt=e=>!!(e&&e.getVelocity),wC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jC=bs.length;function SC(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},o,s){let i="";for(let a=0;a<jC;a++){const l=bs[a];if(e[l]!==void 0){const u=wC[l]||l;i+=`${u}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,o?"":i):n&&o&&(i="none"),i}const Lp=e=>t=>typeof t=="string"&&t.startsWith(e),$p=Lp("--"),Il=Lp("var(--"),PC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,kC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cr=(e,t,n)=>Math.min(Math.max(n,e),t),Ur={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Qo={...Ur,transform:e=>cr(0,1,e)},Hs={...Ur,default:1},Yo=e=>Math.round(e*1e5)/1e5,ea=/(-)?([\d]*\.?[\d])+/g,Vp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,IC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function vs(e){return typeof e=="string"}const Cs=e=>({test:t=>vs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Yn=Cs("deg"),kn=Cs("%"),ke=Cs("px"),EC=Cs("vh"),TC=Cs("vw"),yd={...kn,parse:e=>kn.parse(e)/100,transform:e=>kn.transform(e*100)},bd={...Ur,transform:Math.round},Np={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,size:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,rotate:Yn,rotateX:Yn,rotateY:Yn,rotateZ:Yn,scale:Hs,scaleX:Hs,scaleY:Hs,scaleZ:Hs,skew:Yn,skewX:Yn,skewY:Yn,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Qo,originX:yd,originY:yd,originZ:ke,zIndex:bd,fillOpacity:Qo,strokeOpacity:Qo,numOctaves:bd};function $c(e,t,n,o){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let u=!1,c=!1,d=!0;for(const h in t){const p=t[h];if($p(h)){i[h]=p;continue}const y=Np[h],m=kC(p,y);if(Gr.has(h)){if(u=!0,a[h]=m,!d)continue;p!==(y.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,l[h]=m):s[h]=m}if(t.transform||(u||o?s.transform=SC(e.transform,n,d,o):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:y=0}=l;s.transformOrigin=`${h} ${p} ${y}`}}const Vc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bp(e,t,n){for(const o in t)!qt(t[o])&&!_p(o,n)&&(e[o]=t[o])}function AC({transformTemplate:e},t,n){return f.useMemo(()=>{const o=Vc();return $c(o,t,{enableHardwareAcceleration:!n},e),Object.assign({},o.vars,o.style)},[t])}function MC(e,t,n){const o=e.style||{},s={};return Bp(s,o,e),Object.assign(s,AC(e,t,n)),e.transformValues?e.transformValues(s):s}function RC(e,t,n){const o={},s=MC(e,t,n);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=s,o}const DC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||DC.has(e)}let Hp=e=>!vi(e);function FC(e){e&&(Hp=t=>t.startsWith("on")?!vi(t):e(t))}try{FC(require("@emotion/is-prop-valid").default)}catch{}function OC(e,t,n){const o={};for(const s in e)s==="values"&&typeof e.values=="object"||(Hp(s)||n===!0&&vi(s)||!t&&!vi(s)||e.draggable&&s.startsWith("onDrag"))&&(o[s]=e[s]);return o}function vd(e,t,n){return typeof e=="string"?e:ke.transform(t+n*e)}function _C(e,t,n){const o=vd(t,e.x,e.width),s=vd(n,e.y,e.height);return`${o} ${s}`}const LC={offset:"stroke-dashoffset",array:"stroke-dasharray"},$C={offset:"strokeDashoffset",array:"strokeDasharray"};function VC(e,t,n=1,o=0,s=!0){e.pathLength=1;const i=s?LC:$C;e[i.offset]=ke.transform(-o);const a=ke.transform(t),l=ke.transform(n);e[i.array]=`${a} ${l}`}function Nc(e,{attrX:t,attrY:n,attrScale:o,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...c},d,h,p){if($c(e,c,d,p),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:m,dimensions:g}=e;y.transform&&(g&&(m.transform=y.transform),delete y.transform),g&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=_C(g,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),o!==void 0&&(y.scale=o),a!==void 0&&VC(y,a,l,u,!1)}const zp=()=>({...Vc(),attrs:{}}),Bc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function NC(e,t,n,o){const s=f.useMemo(()=>{const i=zp();return Nc(i,t,{enableHardwareAcceleration:!1},Bc(o),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Bp(i,e.style,e),s.style={...i,...s.style}}return s}function BC(e=!1){return(n,o,s,{latestValues:i},a)=>{const u=(Lc(n)?NC:RC)(o,i,a,n),d={...OC(o,typeof n=="string",e),...u,ref:s},{children:h}=o,p=f.useMemo(()=>qt(h)?h.get():h,[h]);return f.createElement(n,{...d,children:p})}}function Gp(e,{style:t,vars:n},o,s){Object.assign(e.style,t,s&&s.getProjectionStyles(o));for(const i in n)e.style.setProperty(i,n[i])}const Up=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wp(e,t,n,o){Gp(e,t,void 0,o);for(const s in t.attrs)e.setAttribute(Up.has(s)?s:Dc(s),t.attrs[s])}function Hc(e,t){const{style:n}=e,o={};for(const s in n)(qt(n[s])||t.style&&qt(t.style[s])||_p(s,e))&&(o[s]=n[s]);return o}function qp(e,t){const n=Hc(e,t);for(const o in e)if(qt(e[o])||qt(t[o])){const s=bs.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;n[s]=e[o]}return n}function zc(e,t,n,o={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),t}function Kp(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ci=e=>Array.isArray(e),HC=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),zC=e=>Ci(e)?e[e.length-1]||0:e;function ei(e){const t=qt(e)?e.get():e;return HC(t)?t.toValue():t}function GC({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},o,s,i){const a={latestValues:UC(o,s,i,e),renderState:t()};return n&&(a.mount=l=>n(o,l,a)),a}const Qp=e=>(t,n)=>{const o=f.useContext(Qi),s=f.useContext(Yi),i=()=>GC(e,t,o,s);return n?i():Kp(i)};function UC(e,t,n,o){const s={},i=o(e,{});for(const p in i)s[p]=ei(i[p]);let{initial:a,animate:l}=e;const u=Zi(e),c=Fp(e);t&&c&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Ji(h)&&(Array.isArray(h)?h:[h]).forEach(y=>{const m=zc(e,y);if(!m)return;const{transitionEnd:g,transition:v,...x}=m;for(const b in x){let C=x[b];if(Array.isArray(C)){const P=d?C.length-1:0;C=C[P]}C!==null&&(s[b]=C)}for(const b in g)s[b]=g[b]}),s}const it=e=>e;let Cd=class{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}};function WC(e){let t=new Cd,n=new Cd,o=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(u,c=!1,d=!1)=>{const h=d&&s,p=h?t:n;return c&&a.add(u),p.add(u)&&h&&s&&(o=t.order.length),u},cancel:u=>{n.remove(u),a.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),o=t.order.length,o)for(let c=0;c<o;c++){const d=t.order[c];d(u),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(u))}};return l}const zs=["prepare","read","update","preRender","render","postRender"],qC=40;function KC(e,t){let n=!1,o=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=zs.reduce((h,p)=>(h[p]=WC(()=>n=!0),h),{}),a=h=>i[h].process(s),l=()=>{const h=performance.now();n=!1,s.delta=o?1e3/60:Math.max(Math.min(h-s.timestamp,qC),1),s.timestamp=h,s.isProcessing=!0,zs.forEach(a),s.isProcessing=!1,n&&t&&(o=!1,e(l))},u=()=>{n=!0,o=!0,s.isProcessing||e(l)};return{schedule:zs.reduce((h,p)=>{const y=i[p];return h[p]=(m,g=!1,v=!1)=>(n||u(),y.schedule(m,g,v)),h},{}),cancel:h=>zs.forEach(p=>i[p].cancel(h)),state:s,steps:i}}const{schedule:et,cancel:Kn,state:Mt,steps:Na}=KC(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),QC={useVisualState:Qp({scrapeMotionValuesFromProps:qp,createRenderState:zp,onMount:(e,t,{renderState:n,latestValues:o})=>{et.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{Nc(n,o,{enableHardwareAcceleration:!1},Bc(t.tagName),e.transformTemplate),Wp(t,n)})}})},YC={useVisualState:Qp({scrapeMotionValuesFromProps:Hc,createRenderState:Vc})};function XC(e,{forwardMotionProps:t=!1},n,o){return{...Lc(e)?QC:YC,preloadedFeatures:n,useRender:BC(t),createVisualElement:o,Component:e}}function Nn(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}const Yp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ta(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const JC=e=>t=>Yp(t)&&e(t,ta(t));function Un(e,t,n,o){return Nn(e,t,JC(n),o)}const ZC=(e,t)=>n=>t(e(n)),ar=(...e)=>e.reduce(ZC);function Xp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const wd=Xp("dragHorizontal"),jd=Xp("dragVertical");function Jp(e){let t=!1;if(e==="y")t=jd();else if(e==="x")t=wd();else{const n=wd(),o=jd();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function Zp(){const e=Jp(!0);return e?(e(),!1):!0}class fr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Sd(e,t){const n="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||Zp())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&et.update(()=>l[o](i,a))};return Un(e.current,n,s,{passive:!e.getProps()[o]})}class ew extends fr{mount(){this.unmount=ar(Sd(this.node,!0),Sd(this.node,!1))}unmount(){}}class tw extends fr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ar(Nn(this.node.current,"focus",()=>this.onFocus()),Nn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const em=(e,t)=>t?e===t?!0:em(e,t.parentElement):!1;function Ba(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ta(n))}class nw extends fr{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),i=Un(window,"pointerup",(l,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();et.update(()=>{!h&&!em(this.node.current,l.target)?d&&d(l,u):c&&c(l,u)})},{passive:!(o.onTap||o.onPointerUp)}),a=Un(window,"pointercancel",(l,u)=>this.cancelPress(l,u),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=ar(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ba("up",(u,c)=>{const{onTap:d}=this.node.getProps();d&&et.update(()=>d(u,c))})};this.removeEndListeners(),this.removeEndListeners=Nn(this.node.current,"keyup",a),Ba("down",(l,u)=>{this.startPress(l,u)})},n=Nn(this.node.current,"keydown",t),o=()=>{this.isPressing&&Ba("cancel",(i,a)=>this.cancelPress(i,a))},s=Nn(this.node.current,"blur",o);this.removeAccessibleListeners=ar(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&et.update(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Zp()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&et.update(()=>o(t,n))}mount(){const t=this.node.getProps(),n=Un(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Nn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ar(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const El=new WeakMap,Ha=new WeakMap,rw=e=>{const t=El.get(e.target);t&&t(e)},ow=e=>{e.forEach(rw)};function sw({root:e,...t}){const n=e||document;Ha.has(n)||Ha.set(n,{});const o=Ha.get(n),s=JSON.stringify(t);return o[s]||(o[s]=new IntersectionObserver(ow,{root:e,...t})),o[s]}function iw(e,t,n){const o=sw(t);return El.set(e,n),o.observe(e),()=>{El.delete(e),o.unobserve(e)}}const aw={some:0,all:1};class lw extends fr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:o,threshold:typeof s=="number"?s:aw[s]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(u)};return iw(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(cw(t,n))&&this.startObserver()}unmount(){}}function cw({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const uw={inView:{Feature:lw},tap:{Feature:nw},focus:{Feature:tw},hover:{Feature:ew}};function tm(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function dw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.get()),t}function hw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.getVelocity()),t}function na(e,t,n){const o=e.getProps();return zc(o,t,n!==void 0?n:o.custom,dw(e),hw(e))}let Gc=it;const Dr=e=>e*1e3,Wn=e=>e/1e3,fw={current:!1},nm=e=>Array.isArray(e)&&typeof e[0]=="number";function rm(e){return!!(!e||typeof e=="string"&&om[e]||nm(e)||Array.isArray(e)&&e.every(rm))}const Ho=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,om={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ho([0,.65,.55,1]),circOut:Ho([.55,0,1,.45]),backIn:Ho([.31,.01,.66,-.59]),backOut:Ho([.33,1.53,.69,.99])};function sm(e){if(e)return nm(e)?Ho(e):Array.isArray(e)?e.map(sm):om[e]}function pw(e,t,n,{delay:o=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:u}={}){const c={[t]:n};u&&(c.offset=u);const d=sm(l);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:o,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function mw(e,{repeat:t,repeatType:n="loop"}){const o=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[o]}const im=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,gw=1e-7,xw=12;function yw(e,t,n,o,s){let i,a,l=0;do a=t+(n-t)/2,i=im(a,o,s)-e,i>0?n=a:t=a;while(Math.abs(i)>gw&&++l<xw);return a}function ws(e,t,n,o){if(e===t&&n===o)return it;const s=i=>yw(i,0,1,e,n);return i=>i===0||i===1?i:im(s(i),t,o)}const bw=ws(.42,0,1,1),vw=ws(0,0,.58,1),am=ws(.42,0,.58,1),Cw=e=>Array.isArray(e)&&typeof e[0]!="number",lm=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cm=e=>t=>1-e(1-t),Uc=e=>1-Math.sin(Math.acos(e)),um=cm(Uc),ww=lm(Uc),dm=ws(.33,1.53,.69,.99),Wc=cm(dm),jw=lm(Wc),Sw=e=>(e*=2)<1?.5*Wc(e):.5*(2-Math.pow(2,-10*(e-1))),Pw={linear:it,easeIn:bw,easeInOut:am,easeOut:vw,circIn:Uc,circInOut:ww,circOut:um,backIn:Wc,backInOut:jw,backOut:dm,anticipate:Sw},Pd=e=>{if(Array.isArray(e)){Gc(e.length===4);const[t,n,o,s]=e;return ws(t,n,o,s)}else if(typeof e=="string")return Pw[e];return e},qc=(e,t)=>n=>!!(vs(n)&&IC.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),hm=(e,t,n)=>o=>{if(!vs(o))return o;const[s,i,a,l]=o.match(ea);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},kw=e=>cr(0,255,e),za={...Ur,transform:e=>Math.round(kw(e))},kr={test:qc("rgb","red"),parse:hm("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+za.transform(e)+", "+za.transform(t)+", "+za.transform(n)+", "+Yo(Qo.transform(o))+")"};function Iw(e){let t="",n="",o="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,o+=o,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:s?parseInt(s,16)/255:1}}const Tl={test:qc("#"),parse:Iw,transform:kr.transform},so={test:qc("hsl","hue"),parse:hm("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+kn.transform(Yo(t))+", "+kn.transform(Yo(n))+", "+Yo(Qo.transform(o))+")"},Ot={test:e=>kr.test(e)||Tl.test(e)||so.test(e),parse:e=>kr.test(e)?kr.parse(e):so.test(e)?so.parse(e):Tl.parse(e),transform:e=>vs(e)?e:e.hasOwnProperty("red")?kr.transform(e):so.transform(e)},rt=(e,t,n)=>-n*e+n*t+e;function Ga(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ew({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;s=Ga(u,l,e+1/3),i=Ga(u,l,e),a=Ga(u,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:o}}const Ua=(e,t,n)=>{const o=e*e;return Math.sqrt(Math.max(0,n*(t*t-o)+o))},Tw=[Tl,kr,so],Aw=e=>Tw.find(t=>t.test(e));function kd(e){const t=Aw(e);let n=t.parse(e);return t===so&&(n=Ew(n)),n}const fm=(e,t)=>{const n=kd(e),o=kd(t),s={...n};return i=>(s.red=Ua(n.red,o.red,i),s.green=Ua(n.green,o.green,i),s.blue=Ua(n.blue,o.blue,i),s.alpha=rt(n.alpha,o.alpha,i),kr.transform(s))};function Mw(e){var t,n;return isNaN(e)&&vs(e)&&(((t=e.match(ea))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Vp))===null||n===void 0?void 0:n.length)||0)>0}const pm={regex:PC,countKey:"Vars",token:"${v}",parse:it},mm={regex:Vp,countKey:"Colors",token:"${c}",parse:Ot.parse},gm={regex:ea,countKey:"Numbers",token:"${n}",parse:Ur.parse};function Wa(e,{regex:t,countKey:n,token:o,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,o),e.values.push(...i.map(s)))}function wi(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Wa(n,pm),Wa(n,mm),Wa(n,gm),n}function xm(e){return wi(e).values}function ym(e){const{values:t,numColors:n,numVars:o,tokenised:s}=wi(e),i=t.length;return a=>{let l=s;for(let u=0;u<i;u++)u<o?l=l.replace(pm.token,a[u]):u<o+n?l=l.replace(mm.token,Ot.transform(a[u])):l=l.replace(gm.token,Yo(a[u]));return l}}const Rw=e=>typeof e=="number"?0:e;function Dw(e){const t=xm(e);return ym(e)(t.map(Rw))}const ur={test:Mw,parse:xm,createTransformer:ym,getAnimatableNone:Dw},bm=(e,t)=>n=>`${n>0?t:e}`;function vm(e,t){return typeof e=="number"?n=>rt(e,t,n):Ot.test(e)?fm(e,t):e.startsWith("var(")?bm(e,t):wm(e,t)}const Cm=(e,t)=>{const n=[...e],o=n.length,s=e.map((i,a)=>vm(i,t[a]));return i=>{for(let a=0;a<o;a++)n[a]=s[a](i);return n}},Fw=(e,t)=>{const n={...e,...t},o={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(o[s]=vm(e[s],t[s]));return s=>{for(const i in o)n[i]=o[i](s);return n}},wm=(e,t)=>{const n=ur.createTransformer(t),o=wi(e),s=wi(t);return o.numVars===s.numVars&&o.numColors===s.numColors&&o.numNumbers>=s.numNumbers?ar(Cm(o.values,s.values),n):bm(e,t)},ss=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},Id=(e,t)=>n=>rt(e,t,n);function Ow(e){return typeof e=="number"?Id:typeof e=="string"?Ot.test(e)?fm:wm:Array.isArray(e)?Cm:typeof e=="object"?Fw:Id}function _w(e,t,n){const o=[],s=n||Ow(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||it:t;l=ar(u,l)}o.push(l)}return o}function jm(e,t,{clamp:n=!0,ease:o,mixer:s}={}){const i=e.length;if(Gc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=_w(t,o,s),l=a.length,u=c=>{let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=ss(e[d],e[d+1],c);return a[d](h)};return n?c=>u(cr(e[0],e[i-1],c)):u}function Lw(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const s=ss(0,t,o);e.push(rt(n,1,s))}}function $w(e){const t=[0];return Lw(t,e.length-1),t}function Vw(e,t){return e.map(n=>n*t)}function Nw(e,t){return e.map(()=>t||am).splice(0,e.length-1)}function ji({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const s=Cw(o)?o.map(Pd):Pd(o),i={done:!1,value:t[0]},a=Vw(n&&n.length===t.length?n:$w(t),e),l=jm(a,t,{ease:Array.isArray(s)?s:Nw(t,s)});return{calculatedDuration:e,next:u=>(i.value=l(u),i.done=u>=e,i)}}function Sm(e,t){return t?e*(1e3/t):0}const Bw=5;function Pm(e,t,n){const o=Math.max(t-Bw,0);return Sm(n-e(o),t-o)}const qa=.001,Hw=.01,zw=10,Gw=.05,Uw=1;function Ww({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let s,i,a=1-t;a=cr(Gw,Uw,a),e=cr(Hw,zw,Wn(e)),a<1?(s=c=>{const d=c*a,h=d*e,p=d-n,y=Al(c,a),m=Math.exp(-h);return qa-p/y*m},i=c=>{const h=c*a*e,p=h*n+n,y=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-h),g=Al(Math.pow(c,2),a);return(-s(c)+qa>0?-1:1)*((p-y)*m)/g}):(s=c=>{const d=Math.exp(-c*e),h=(c-n)*e+1;return-qa+d*h},i=c=>{const d=Math.exp(-c*e),h=(n-c)*(e*e);return d*h});const l=5/e,u=Kw(s,i,l);if(e=Dr(e),isNaN(u))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(u,2)*o;return{stiffness:c,damping:a*2*Math.sqrt(o*c),duration:e}}}const qw=12;function Kw(e,t,n){let o=n;for(let s=1;s<qw;s++)o=o-e(o)/t(o);return o}function Al(e,t){return e*Math.sqrt(1-t*t)}const Qw=["duration","bounce"],Yw=["stiffness","damping","mass"];function Ed(e,t){return t.some(n=>e[n]!==void 0)}function Xw(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ed(e,Yw)&&Ed(e,Qw)){const n=Ww(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function km({keyframes:e,restDelta:t,restSpeed:n,...o}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:p}=Xw({...o,velocity:-Wn(o.velocity||0)}),y=h||0,m=u/(2*Math.sqrt(l*c)),g=i-s,v=Wn(Math.sqrt(l/c)),x=Math.abs(g)<5;n||(n=x?.01:2),t||(t=x?.005:.5);let b;if(m<1){const C=Al(v,m);b=P=>{const F=Math.exp(-m*v*P);return i-F*((y+m*v*g)/C*Math.sin(C*P)+g*Math.cos(C*P))}}else if(m===1)b=C=>i-Math.exp(-v*C)*(g+(y+v*g)*C);else{const C=v*Math.sqrt(m*m-1);b=P=>{const F=Math.exp(-m*v*P),T=Math.min(C*P,300);return i-F*((y+m*v*g)*Math.sinh(T)+C*g*Math.cosh(T))/C}}return{calculatedDuration:p&&d||null,next:C=>{const P=b(C);if(p)a.done=C>=d;else{let F=y;C!==0&&(m<1?F=Pm(b,C,P):F=0);const T=Math.abs(F)<=n,I=Math.abs(i-P)<=t;a.done=T&&I}return a.value=a.done?i:P,a}}}function Td({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},y=R=>l!==void 0&&R<l||u!==void 0&&R>u,m=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let g=n*t;const v=h+g,x=a===void 0?v:a(v);x!==v&&(g=x-h);const b=R=>-g*Math.exp(-R/o),C=R=>x+b(R),P=R=>{const V=b(R),O=C(R);p.done=Math.abs(V)<=c,p.value=p.done?x:O};let F,T;const I=R=>{y(p.value)&&(F=R,T=km({keyframes:[p.value,m(p.value)],velocity:Pm(C,R,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:R=>{let V=!1;return!T&&F===void 0&&(V=!0,P(R),I(R)),F!==void 0&&R>F?T.next(R-F):(!V&&P(R),p)}}}const Jw=e=>{const t=({timestamp:n})=>e(n);return{start:()=>et.update(t,!0),stop:()=>Kn(t),now:()=>Mt.isProcessing?Mt.timestamp:performance.now()}},Ad=2e4;function Md(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<Ad;)t+=n,o=e.next(t);return t>=Ad?1/0:t}const Zw={decay:Td,inertia:Td,tween:ji,keyframes:ji,spring:km};function Si({autoplay:e=!0,delay:t=0,driver:n=Jw,keyframes:o,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:u,onStop:c,onComplete:d,onUpdate:h,...p}){let y=1,m=!1,g,v;const x=()=>{v=new Promise(z=>{g=z})};x();let b;const C=Zw[s]||ji;let P;C!==ji&&typeof o[0]!="number"&&(P=jm([0,100],o,{clamp:!1}),o=[0,100]);const F=C({...p,keyframes:o});let T;l==="mirror"&&(T=C({...p,keyframes:[...o].reverse(),velocity:-(p.velocity||0)}));let I="idle",R=null,V=null,O=null;F.calculatedDuration===null&&i&&(F.calculatedDuration=Md(F));const{calculatedDuration:S}=F;let N=1/0,D=1/0;S!==null&&(N=S+a,D=N*(i+1)-a);let w=0;const E=z=>{if(V===null)return;y>0&&(V=Math.min(V,z)),y<0&&(V=Math.min(z-D/y,V)),R!==null?w=R:w=Math.round(z-V)*y;const G=w-t*(y>=0?1:-1),J=y>=0?G<0:G>D;w=Math.max(G,0),I==="finished"&&R===null&&(w=D);let ee=w,te=F;if(i){const le=Math.min(w,D)/N;let Y=Math.floor(le),ne=le%1;!ne&&le>=1&&(ne=1),ne===1&&Y--,Y=Math.min(Y,i+1),!!(Y%2)&&(l==="reverse"?(ne=1-ne,a&&(ne-=a/N)):l==="mirror"&&(te=T)),ee=cr(0,1,ne)*N}const Ce=J?{done:!1,value:o[0]}:te.next(ee);P&&(Ce.value=P(Ce.value));let{done:W}=Ce;!J&&S!==null&&(W=y>=0?w>=D:w<=0);const Q=R===null&&(I==="finished"||I==="running"&&W);return h&&h(Ce.value),Q&&L(),Ce},M=()=>{b&&b.stop(),b=void 0},$=()=>{I="idle",M(),g(),x(),V=O=null},L=()=>{I="finished",d&&d(),M(),g()},_=()=>{if(m)return;b||(b=n(E));const z=b.now();u&&u(),R!==null?V=z-R:(!V||I==="finished")&&(V=z),I==="finished"&&x(),O=V,R=null,I="running",b.start()};e&&_();const B={then(z,G){return v.then(z,G)},get time(){return Wn(w)},set time(z){z=Dr(z),w=z,R!==null||!b||y===0?R=z:V=b.now()-z/y},get duration(){const z=F.calculatedDuration===null?Md(F):F.calculatedDuration;return Wn(z)},get speed(){return y},set speed(z){z===y||!b||(y=z,B.time=Wn(w))},get state(){return I},play:_,pause:()=>{I="paused",R=w},stop:()=>{m=!0,I!=="idle"&&(I="idle",c&&c(),$())},cancel:()=>{O!==null&&E(O),$()},complete:()=>{I="finished"},sample:z=>(V=0,E(z))};return B}function e0(e){let t;return()=>(t===void 0&&(t=e()),t)}const t0=e0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),n0=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gs=10,r0=2e4,o0=(e,t)=>t.type==="spring"||e==="backgroundColor"||!rm(t.ease);function s0(e,t,{onUpdate:n,onComplete:o,...s}){if(!(t0()&&n0.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,u,c=!1;const d=()=>{u=new Promise(C=>{l=C})};d();let{keyframes:h,duration:p=300,ease:y,times:m}=s;if(o0(t,s)){const C=Si({...s,repeat:0,delay:0});let P={done:!1,value:h[0]};const F=[];let T=0;for(;!P.done&&T<r0;)P=C.sample(T),F.push(P.value),T+=Gs;m=void 0,h=F,p=T-Gs,y="linear"}const g=pw(e.owner.current,t,h,{...s,duration:p,ease:y,times:m}),v=()=>{c=!1,g.cancel()},x=()=>{c=!0,et.update(v),l(),d()};return g.onfinish=()=>{c||(e.set(mw(h,s)),o&&o(),x())},{then(C,P){return u.then(C,P)},attachTimeline(C){return g.timeline=C,g.onfinish=null,it},get time(){return Wn(g.currentTime||0)},set time(C){g.currentTime=Dr(C)},get speed(){return g.playbackRate},set speed(C){g.playbackRate=C},get duration(){return Wn(p)},play:()=>{a||(g.play(),Kn(v))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:C}=g;if(C){const P=Si({...s,autoplay:!1});e.setWithVelocity(P.sample(C-Gs).value,P.sample(C).value,Gs)}x()},complete:()=>{c||g.finish()},cancel:x}}function i0({keyframes:e,delay:t,onUpdate:n,onComplete:o}){const s=()=>(n&&n(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return t?Si({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const a0={type:"spring",stiffness:500,damping:25,restSpeed:10},l0=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),c0={type:"keyframes",duration:.8},u0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d0=(e,{keyframes:t})=>t.length>2?c0:Gr.has(e)?e.startsWith("scale")?l0(t[1]):a0:u0,Ml=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ur.test(t)||t==="0")&&!t.startsWith("url(")),h0=new Set(["brightness","contrast","saturate","opacity"]);function f0(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(ea)||[];if(!o)return e;const s=n.replace(o,"");let i=h0.has(t)?1:0;return o!==n&&(i*=100),t+"("+i+s+")"}const p0=/([a-z-]*)\(.*?\)/g,Rl={...ur,getAnimatableNone:e=>{const t=e.match(p0);return t?t.map(f0).join(" "):e}},m0={...Np,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:Rl,WebkitFilter:Rl},Kc=e=>m0[e];function Im(e,t){let n=Kc(e);return n!==Rl&&(n=ur),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Em=e=>/^0[^.\s]+$/.test(e);function g0(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Em(e)}function x0(e,t,n,o){const s=Ml(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=o.from!==void 0?o.from:e.get();let l;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?a:i[c-1]),g0(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(s&&u.length&&l)for(let c=0;c<u.length;c++){const d=u[c];i[d]=Im(t,l)}return i}function y0({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:u,elapsed:c,...d}){return!!Object.keys(d).length}function Qc(e,t){return e[t]||e.default||e}const b0={skipAnimations:!1},Yc=(e,t,n,o={})=>s=>{const i=Qc(o,e)||{},a=i.delay||o.delay||0;let{elapsed:l=0}=o;l=l-Dr(a);const u=x0(t,e,n,i),c=u[0],d=u[u.length-1],h=Ml(e,c),p=Ml(e,d);let y={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:m=>{t.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(y0(i)||(y={...y,...d0(e,y)}),y.duration&&(y.duration=Dr(y.duration)),y.repeatDelay&&(y.repeatDelay=Dr(y.repeatDelay)),!h||!p||fw.current||i.type===!1||b0.skipAnimations)return i0(y);if(!o.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const m=s0(t,e,y);if(m)return m}return Si(y)};function Pi(e){return!!(qt(e)&&e.add)}const Tm=e=>/^\-?\d*\.?\d+$/.test(e);function Xc(e,t){e.indexOf(t)===-1&&e.push(t)}function Jc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Zc{constructor(){this.subscriptions=[]}add(t){return Xc(this.subscriptions,t),()=>Jc(this.subscriptions,t)}notify(t,n,o){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,o);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const v0=e=>!isNaN(parseFloat(e));class C0{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,s=!0)=>{this.prev=this.current,this.current=o;const{delta:i,timestamp:a}=Mt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=v0(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Zc);const o=this.events[t].add(n);return t==="change"?()=>{o(),et.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=t,this.timeDelta=o}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Sm(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yo(e,t){return new C0(e,t)}const Am=e=>t=>t.test(e),w0={test:e=>e==="auto",parse:e=>e},Mm=[Ur,ke,kn,Yn,TC,EC,w0],Fo=e=>Mm.find(Am(e)),j0=[...Mm,Ot,ur],S0=e=>j0.find(Am(e));function P0(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,yo(n))}function k0(e,t){const n=na(e,t);let{transitionEnd:o={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...o};for(const a in i){const l=zC(i[a]);P0(e,a,l)}}function I0(e,t,n){var o,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const u=i[l],c=t[u];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(o=n[u])!==null&&o!==void 0?o:e.readValue(u))!==null&&s!==void 0?s:t[u]),d!=null&&(typeof d=="string"&&(Tm(d)||Em(d))?d=parseFloat(d):!S0(d)&&ur.test(c)&&(d=Im(u,c)),e.addValue(u,yo(d,{owner:e})),n[u]===void 0&&(n[u]=d),d!==null&&e.setBaseTarget(u,d))}}function E0(e,t){return t?(t[e]||t.default||t).from:void 0}function T0(e,t,n){const o={};for(const s in e){const i=E0(s,t);if(i!==void 0)o[s]=i;else{const a=n.getValue(s);a&&(o[s]=a.get())}}return o}function A0({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function M0(e,t){const n=e.get();if(Array.isArray(t)){for(let o=0;o<t.length;o++)if(t[o]!==n)return!0}else return n!==t}function Rm(e,t,{delay:n=0,transitionOverride:o,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const u=e.getValue("willChange");o&&(i=o);const c=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const p=e.getValue(h),y=l[h];if(!p||y===void 0||d&&A0(d,h))continue;const m={delay:n,elapsed:0,...Qc(i||{},h)};if(window.HandoffAppearAnimations){const x=e.getProps()[Dp];if(x){const b=window.HandoffAppearAnimations(x,h,p,et);b!==null&&(m.elapsed=b,m.isHandoff=!0)}}let g=!m.isHandoff&&!M0(p,y);if(m.type==="spring"&&(p.getVelocity()||m.velocity)&&(g=!1),p.animation&&(g=!1),g)continue;p.start(Yc(h,p,y,e.shouldReduceMotion&&Gr.has(h)?{type:!1}:m));const v=p.animation;Pi(u)&&(u.add(h),v.then(()=>u.remove(h))),c.push(v)}return a&&Promise.all(c).then(()=>{a&&k0(e,a)}),c}function Dl(e,t,n={}){const o=na(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(Rm(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return R0(e,t,c+u,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>c())}else return Promise.all([i(),a(n.delay)])}function R0(e,t,n=0,o=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*o,u=s===1?(c=0)=>c*o:(c=0)=>l-c*o;return Array.from(e.variantChildren).sort(D0).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(Dl(c,t,{...i,delay:n+u(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function D0(e,t){return e.sortNodePosition(t)}function F0(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const s=t.map(i=>Dl(e,i,n));o=Promise.all(s)}else if(typeof t=="string")o=Dl(e,t,n);else{const s=typeof t=="function"?na(e,t,n.custom):t;o=Promise.all(Rm(e,s,n))}return o.then(()=>e.notify("AnimationComplete",t))}const O0=[...Fc].reverse(),_0=Fc.length;function L0(e){return t=>Promise.all(t.map(({animation:n,options:o})=>F0(e,n,o)))}function $0(e){let t=L0(e);const n=N0();let o=!0;const s=(u,c)=>{const d=na(e,c);if(d){const{transition:h,transitionEnd:p,...y}=d;u={...u,...y,...p}}return u};function i(u){t=u(e)}function a(u,c){const d=e.getProps(),h=e.getVariantContext(!0)||{},p=[],y=new Set;let m={},g=1/0;for(let x=0;x<_0;x++){const b=O0[x],C=n[b],P=d[b]!==void 0?d[b]:h[b],F=rs(P),T=b===c?C.isActive:null;T===!1&&(g=x);let I=P===h[b]&&P!==d[b]&&F;if(I&&o&&e.manuallyAnimateOnMount&&(I=!1),C.protectedKeys={...m},!C.isActive&&T===null||!P&&!C.prevProp||Ji(P)||typeof P=="boolean")continue;let V=V0(C.prevProp,P)||b===c&&C.isActive&&!I&&F||x>g&&F,O=!1;const S=Array.isArray(P)?P:[P];let N=S.reduce(s,{});T===!1&&(N={});const{prevResolvedValues:D={}}=C,w={...D,...N},E=M=>{V=!0,y.has(M)&&(O=!0,y.delete(M)),C.needsAnimating[M]=!0};for(const M in w){const $=N[M],L=D[M];if(m.hasOwnProperty(M))continue;let _=!1;Ci($)&&Ci(L)?_=!tm($,L):_=$!==L,_?$!==void 0?E(M):y.add(M):$!==void 0&&y.has(M)?E(M):C.protectedKeys[M]=!0}C.prevProp=P,C.prevResolvedValues=N,C.isActive&&(m={...m,...N}),o&&e.blockInitialAnimation&&(V=!1),V&&(!I||O)&&p.push(...S.map(M=>({animation:M,options:{type:b,...u}})))}if(y.size){const x={};y.forEach(b=>{const C=e.getBaseTarget(b);C!==void 0&&(x[b]=C)}),p.push({animation:x})}let v=!!p.length;return o&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),o=!1,v?t(p):Promise.resolve()}function l(u,c,d){var h;if(n[u].isActive===c)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(y=>{var m;return(m=y.animationState)===null||m===void 0?void 0:m.setActive(u,c)}),n[u].isActive=c;const p=a(d,u);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function V0(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!tm(t,e):!1}function br(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N0(){return{animate:br(!0),whileInView:br(),whileHover:br(),whileTap:br(),whileDrag:br(),whileFocus:br(),exit:br()}}class B0 extends fr{constructor(t){super(t),t.animationState||(t.animationState=$0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Ji(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let H0=0;class z0 extends fr{constructor(){super(...arguments),this.id=H0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:o}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:o??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const G0={animation:{Feature:B0},exit:{Feature:z0}},Rd=(e,t)=>Math.abs(e-t);function U0(e,t){const n=Rd(e.x,t.x),o=Rd(e.y,t.y);return Math.sqrt(n**2+o**2)}class Dm{constructor(t,n,{transformPagePoint:o,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Qa(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=U0(h.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:m}=h,{timestamp:g}=Mt;this.history.push({...m,timestamp:g});const{onStart:v,onMove:x}=this.handlers;p||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ka(p,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Qa(h.type==="pointercancel"?this.lastMoveEventInfo:Ka(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,v),m&&m(h,v)},!Yp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=o,this.contextWindow=s||window;const a=ta(t),l=Ka(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Mt;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,Qa(l,this.history)),this.removeListeners=ar(Un(this.contextWindow,"pointermove",this.handlePointerMove),Un(this.contextWindow,"pointerup",this.handlePointerUp),Un(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kn(this.updatePoint)}}function Ka(e,t){return t?{point:t(e.point)}:e}function Dd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qa({point:e},t){return{point:e,delta:Dd(e,Fm(t)),offset:Dd(e,W0(t)),velocity:q0(t,.1)}}function W0(e){return e[0]}function Fm(e){return e[e.length-1]}function q0(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const s=Fm(e);for(;n>=0&&(o=e[n],!(s.timestamp-o.timestamp>Dr(t)));)n--;if(!o)return{x:0,y:0};const i=Wn(s.timestamp-o.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-o.x)/i,y:(s.y-o.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Xt(e){return e.max-e.min}function Fl(e,t=0,n=.01){return Math.abs(e-t)<=n}function Fd(e,t,n,o=.5){e.origin=o,e.originPoint=rt(t.min,t.max,e.origin),e.scale=Xt(n)/Xt(t),(Fl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=rt(n.min,n.max,e.origin)-e.originPoint,(Fl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Xo(e,t,n,o){Fd(e.x,t.x,n.x,o?o.originX:void 0),Fd(e.y,t.y,n.y,o?o.originY:void 0)}function Od(e,t,n){e.min=n.min+t.min,e.max=e.min+Xt(t)}function K0(e,t,n){Od(e.x,t.x,n.x),Od(e.y,t.y,n.y)}function _d(e,t,n){e.min=t.min-n.min,e.max=e.min+Xt(t)}function Jo(e,t,n){_d(e.x,t.x,n.x),_d(e.y,t.y,n.y)}function Q0(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?rt(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?rt(n,e,o.max):Math.min(e,n)),e}function Ld(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Y0(e,{top:t,left:n,bottom:o,right:s}){return{x:Ld(e.x,n,s),y:Ld(e.y,t,o)}}function $d(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function X0(e,t){return{x:$d(e.x,t.x),y:$d(e.y,t.y)}}function J0(e,t){let n=.5;const o=Xt(e),s=Xt(t);return s>o?n=ss(t.min,t.max-o,e.min):o>s&&(n=ss(e.min,e.max-s,t.min)),cr(0,1,n)}function Z0(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ol=.35;function ej(e=Ol){return e===!1?e=0:e===!0&&(e=Ol),{x:Vd(e,"left","right"),y:Vd(e,"top","bottom")}}function Vd(e,t,n){return{min:Nd(e,t),max:Nd(e,n)}}function Nd(e,t){return typeof e=="number"?e:e[t]||0}const Bd=()=>({translate:0,scale:1,origin:0,originPoint:0}),io=()=>({x:Bd(),y:Bd()}),Hd=()=>({min:0,max:0}),ft=()=>({x:Hd(),y:Hd()});function Zt(e){return[e("x"),e("y")]}function Om({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function tj({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function nj(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function Ya(e){return e===void 0||e===1}function _l({scale:e,scaleX:t,scaleY:n}){return!Ya(e)||!Ya(t)||!Ya(n)}function Cr(e){return _l(e)||_m(e)||e.z||e.rotate||e.rotateX||e.rotateY}function _m(e){return zd(e.x)||zd(e.y)}function zd(e){return e&&e!=="0%"}function ki(e,t,n){const o=e-n,s=t*o;return n+s}function Gd(e,t,n,o,s){return s!==void 0&&(e=ki(e,s,o)),ki(e,n,o)+t}function Ll(e,t=0,n=1,o,s){e.min=Gd(e.min,t,n,o,s),e.max=Gd(e.max,t,n,o,s)}function Lm(e,{x:t,y:n}){Ll(e.x,t.translate,t.scale,t.originPoint),Ll(e.y,n.translate,n.scale,n.originPoint)}function rj(e,t,n,o=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ao(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Lm(e,a)),o&&Cr(i.latestValues)&&ao(e,i.latestValues))}t.x=Ud(t.x),t.y=Ud(t.y)}function Ud(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function er(e,t){e.min=e.min+t,e.max=e.max+t}function Wd(e,t,[n,o,s]){const i=t[s]!==void 0?t[s]:.5,a=rt(e.min,e.max,i);Ll(e,t[n],t[o],a,t.scale)}const oj=["x","scaleX","originX"],sj=["y","scaleY","originY"];function ao(e,t){Wd(e.x,t,oj),Wd(e.y,t,sj)}function $m(e,t){return Om(nj(e.getBoundingClientRect(),t))}function ij(e,t,n){const o=$m(e,n),{scroll:s}=t;return s&&(er(o.x,s.offset.x),er(o.y,s.offset.y)),o}const Vm=({current:e})=>e?e.ownerDocument.defaultView:null,aj=new WeakMap;class lj{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ft(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ta(d,"page").point)},i=(d,h)=>{const{drag:p,dragPropagation:y,onDragStart:m}=this.getProps();if(p&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Jp(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zt(v=>{let x=this.getAxisMotionValue(v).get()||0;if(kn.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[v];C&&(x=Xt(C)*(parseFloat(x)/100))}}this.originPoint[v]=x}),m&&et.update(()=>m(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:m,onDrag:g}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:v}=h;if(y&&this.currentDirection===null){this.currentDirection=cj(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),u=()=>Zt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Dm(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Vm(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&et.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:s}=this.getProps();if(!o||!Us(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(a=Q0(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&oo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Y0(s.layoutBox,n):this.constraints=!1,this.elastic=ej(o),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Zt(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Z0(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!oo(t))return!1;const o=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=ij(o,s.root,this.visualElement.getTransformPagePoint());let a=X0(s.layout.layoutBox,i);if(n){const l=n(tj(a));this.hasMutatedConstraints=!!l,l&&(a=Om(l))}return a}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=Zt(d=>{if(!Us(d,n,this.currentDirection))return;let h=u&&u[d]||{};a&&(h={min:0,max:0});const p=s?200:1e6,y=s?40:1e7,m={type:"inertia",velocity:o?t[d]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(l)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return o.start(Yc(t,o,0,n))}stopAnimation(){Zt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),s=o[n];return s||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){Zt(n=>{const{drag:o}=this.getProps();if(!Us(n,o,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-rt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!oo(n)||!o||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zt(a=>{const l=this.getAxisMotionValue(a);if(l){const u=l.get();s[a]=J0({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Zt(a=>{if(!Us(a,t,null))return;const l=this.getAxisMotionValue(a),{min:u,max:c}=this.constraints[a];l.set(rt(u,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;aj.set(this.visualElement,this);const t=this.visualElement.current,n=Un(t,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(u)}),o=()=>{const{dragConstraints:u}=this.getProps();oo(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",o);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),o();const a=Nn(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=u[d].translate,h.set(h.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Ol,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Us(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function cj(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class uj extends fr{constructor(t){super(t),this.removeGroupControls=it,this.removeListeners=it,this.controls=new lj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const qd=e=>(t,n)=>{e&&et.update(()=>e(t,n))};class dj extends fr{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(t){this.session=new Dm(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vm(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:s}=this.node.getProps();return{onSessionStart:qd(t),onStart:qd(n),onMove:o,onEnd:(i,a)=>{delete this.session,s&&et.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=Un(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function hj(){const e=f.useContext(Yi);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,s=f.useId();return f.useEffect(()=>o(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ti={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ke.test(e))e=parseFloat(e);else return e;const n=Kd(e,t.target.x),o=Kd(e,t.target.y);return`${n}% ${o}%`}},fj={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,s=ur.parse(e);if(s.length>5)return o;const i=ur.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=u;const c=rt(l,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};class pj extends Le.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:s}=this.props,{projection:i}=t;CC(mj),i&&(n.group&&n.group.add(i),o&&o.register&&s&&o.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ti.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:s,isPresent:i}=this.props,a=o.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||et.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),o&&o.deregister&&o.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Nm(e){const[t,n]=hj(),o=f.useContext(_c);return Le.createElement(pj,{...e,layoutGroup:o,switchLayoutGroup:f.useContext(Op),isPresent:t,safeToRemove:n})}const mj={borderRadius:{...Oo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oo,borderTopRightRadius:Oo,borderBottomLeftRadius:Oo,borderBottomRightRadius:Oo,boxShadow:fj},Bm=["TopLeft","TopRight","BottomLeft","BottomRight"],gj=Bm.length,Qd=e=>typeof e=="string"?parseFloat(e):e,Yd=e=>typeof e=="number"||ke.test(e);function xj(e,t,n,o,s,i){s?(e.opacity=rt(0,n.opacity!==void 0?n.opacity:1,yj(o)),e.opacityExit=rt(t.opacity!==void 0?t.opacity:1,0,bj(o))):i&&(e.opacity=rt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let a=0;a<gj;a++){const l=`border${Bm[a]}Radius`;let u=Xd(t,l),c=Xd(n,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Yd(u)===Yd(c)?(e[l]=Math.max(rt(Qd(u),Qd(c),o),0),(kn.test(c)||kn.test(u))&&(e[l]+="%")):e[l]=c}(t.rotate||n.rotate)&&(e.rotate=rt(t.rotate||0,n.rotate||0,o))}function Xd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const yj=Hm(0,.5,um),bj=Hm(.5,.95,it);function Hm(e,t,n){return o=>o<e?0:o>t?1:n(ss(e,t,o))}function Jd(e,t){e.min=t.min,e.max=t.max}function Jt(e,t){Jd(e.x,t.x),Jd(e.y,t.y)}function Zd(e,t,n,o,s){return e-=t,e=ki(e,1/n,o),s!==void 0&&(e=ki(e,1/s,o)),e}function vj(e,t=0,n=1,o=.5,s,i=e,a=e){if(kn.test(t)&&(t=parseFloat(t),t=rt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=rt(i.min,i.max,o);e===i&&(l-=t),e.min=Zd(e.min,t,n,l,s),e.max=Zd(e.max,t,n,l,s)}function eh(e,t,[n,o,s],i,a){vj(e,t[n],t[o],t[s],t.scale,i,a)}const Cj=["x","scaleX","originX"],wj=["y","scaleY","originY"];function th(e,t,n,o){eh(e.x,t,Cj,n?n.x:void 0,o?o.x:void 0),eh(e.y,t,wj,n?n.y:void 0,o?o.y:void 0)}function nh(e){return e.translate===0&&e.scale===1}function zm(e){return nh(e.x)&&nh(e.y)}function jj(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Gm(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function rh(e){return Xt(e.x)/Xt(e.y)}class Sj{constructor(){this.members=[]}add(t){Xc(this.members,t),t.scheduleRender()}remove(t){if(Jc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let o;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){o=i;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oh(e,t,n){let o="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(o=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:u,rotateX:c,rotateY:d}=n;u&&(o+=`rotate(${u}deg) `),c&&(o+=`rotateX(${c}deg) `),d&&(o+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(o+=`scale(${a}, ${l})`),o||"none"}const Pj=(e,t)=>e.depth-t.depth;class kj{constructor(){this.children=[],this.isDirty=!1}add(t){Xc(this.children,t),this.isDirty=!0}remove(t){Jc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Pj),this.isDirty=!1,this.children.forEach(t)}}function Ij(e,t){const n=performance.now(),o=({timestamp:s})=>{const i=s-n;i>=t&&(Kn(o),e(i-t))};return et.read(o,!0),()=>Kn(o)}function Ej(e){window.MotionDebug&&window.MotionDebug.record(e)}function Tj(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Aj(e,t,n){const o=qt(e)?e:yo(e);return o.start(Yc("",o,t,n)),o.animation}const sh=["","X","Y","Z"],Mj={visibility:"hidden"},ih=1e3;let Rj=0;const wr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Um({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:s}){return class{constructor(a={},l=t?.()){this.id=Rj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wr.totalNodes=wr.resolvedTargetDeltas=wr.recalculatedProjection=0,this.nodes.forEach(Oj),this.nodes.forEach(Nj),this.nodes.forEach(Bj),this.nodes.forEach(_j),Ej(wr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new kj)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Zc),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tj(a),this.instance=a;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||u)&&(this.isLayoutDirty=!0),e){let h;const p=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ij(p,250),ti.hasAnimatedSinceResize&&(ti.hasAnimatedSinceResize=!1,this.nodes.forEach(lh))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:y,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Wj,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=d.getProps(),b=!this.targetLayout||!Gm(this.targetLayout,m)||y,C=!p&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,C);const P={...Qc(g,"layout"),onPlay:v,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||lh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hj),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ah);return}this.isUpdating||this.nodes.forEach($j),this.isUpdating=!1,this.nodes.forEach(Vj),this.nodes.forEach(Dj),this.nodes.forEach(Fj),this.clearAllSnapshots();const l=performance.now();Mt.delta=cr(0,1e3/60,l-Mt.timestamp),Mt.timestamp=l,Mt.isProcessing=!0,Na.update.process(Mt),Na.preRender.process(Mt),Na.render.process(Mt),Mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Lj),this.sharedNodes.forEach(zj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:o(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!zm(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&(l||Cr(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),qj(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ft();const l=a.measureViewportBox(),{scroll:u}=this.root;return u&&(er(l.x,u.offset.x),er(l.y,u.offset.y)),l}removeElementScroll(a){const l=ft();Jt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){Jt(l,a);const{scroll:p}=this.root;p&&(er(l.x,-p.offset.x),er(l.y,-p.offset.y))}er(l.x,d.offset.x),er(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const u=ft();Jt(u,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ao(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Cr(d.latestValues)&&ao(u,d.latestValues)}return Cr(this.latestValues)&&ao(u,this.latestValues),u}removeTransform(a){const l=ft();Jt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!Cr(c.latestValues))continue;_l(c.latestValues)&&c.updateSnapshot();const d=ft(),h=c.measurePageBox();Jt(d,h),th(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Cr(this.latestValues)&&th(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Mt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),Jo(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ft(),this.targetWithTransforms=ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K0(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jt(this.target,this.layout.layoutBox),Lm(this.target,this.targetDelta)):Jt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),Jo(this.relativeTargetOrigin,this.target,y.target),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_l(this.parent.latestValues)||_m(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Mt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Jt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;rj(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:m}=l;if(!m){this.projectionTransform&&(this.projectionDelta=io(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=io(),this.projectionDeltaWithTransform=io());const g=this.projectionTransform;Xo(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=oh(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==p||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),wr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const u=this.snapshot,c=u?u.latestValues:{},d={...this.latestValues},h=io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ft(),y=u?u.source:void 0,m=this.layout?this.layout.source:void 0,g=y!==m,v=this.getStack(),x=!v||v.members.length<=1,b=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(Uj));this.animationProgress=0;let C;this.mixTargetDelta=P=>{const F=P/1e3;ch(h.x,a.x,F),ch(h.y,a.y,F),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gj(this.relativeTarget,this.relativeTargetOrigin,p,F),C&&jj(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ft()),Jt(C,this.relativeTarget)),g&&(this.animationValues=d,xj(d,c,this.latestValues,F,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{ti.hasAnimatedSinceResize=!0,this.currentAnimation=Aj(0,ih,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ih),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:d}=a;if(!(!l||!u||!c)){if(this!==a&&this.layout&&c&&Wm(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ft();const h=Xt(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+h;const p=Xt(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+p}Jt(l,u),ao(l,d),Xo(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Sj),this.sharedNodes.get(a).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(l=!0),!l)return;const c={};for(let d=0;d<sh.length;d++){const h="rotate"+sh[d];u[h]&&(c[h]=u[h],a.setStaticValue(h,0))}a.render();for(const d in c)a.setStaticValue(d,c[d]);a.scheduleRender()}getProjectionStyles(a){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mj;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ei(a?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=ei(a?.pointerEvents)||""),this.hasProjected&&!Cr(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=oh(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:y,y:m}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(u=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in bi){if(p[g]===void 0)continue;const{correct:v,applyTo:x}=bi[g],b=c.transform==="none"?p[g]:v(p[g],h);if(x){const C=x.length;for(let P=0;P<C;P++)c[x[P]]=b}else c[g]=b}return this.options.layoutId&&(c.pointerEvents=h===this?ei(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(ah),this.root.sharedNodes.clear()}}}function Dj(e){e.updateLayout()}function Fj(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:s}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?Zt(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],y=Xt(p);p.min=o[h].min,p.max=p.min+y}):Wm(i,n.layoutBox,o)&&Zt(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],y=Xt(o[h]);p.max=p.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+y)});const l=io();Xo(l,o,n.layoutBox);const u=io();a?Xo(u,e.applyTransform(s,!0),n.measuredBox):Xo(u,o,n.layoutBox);const c=!zm(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:y}=h;if(p&&y){const m=ft();Jo(m,n.layoutBox,p.layoutBox);const g=ft();Jo(g,o,y.layoutBox),Gm(m,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function Oj(e){wr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _j(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Lj(e){e.clearSnapshot()}function ah(e){e.clearMeasurements()}function $j(e){e.isLayoutDirty=!1}function Vj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function lh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Nj(e){e.resolveTargetDelta()}function Bj(e){e.calcProjection()}function Hj(e){e.resetRotation()}function zj(e){e.removeLeadSnapshot()}function ch(e,t,n){e.translate=rt(t.translate,0,n),e.scale=rt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function uh(e,t,n,o){e.min=rt(t.min,n.min,o),e.max=rt(t.max,n.max,o)}function Gj(e,t,n,o){uh(e.x,t.x,n.x,o),uh(e.y,t.y,n.y,o)}function Uj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Wj={duration:.45,ease:[.4,0,.1,1]},dh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),hh=dh("applewebkit/")&&!dh("chrome/")?Math.round:it;function fh(e){e.min=hh(e.min),e.max=hh(e.max)}function qj(e){fh(e.x),fh(e.y)}function Wm(e,t,n){return e==="position"||e==="preserve-aspect"&&!Fl(rh(t),rh(n),.2)}const Kj=Um({attachResizeListener:(e,t)=>Nn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xa={current:void 0},qm=Um({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Xa.current){const e=new Kj({});e.mount(window),e.setOptions({layoutScroll:!0}),Xa.current=e}return Xa.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qj={pan:{Feature:dj},drag:{Feature:uj,ProjectionNode:qm,MeasureLayout:Nm}},Yj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Xj(e){const t=Yj.exec(e);if(!t)return[,];const[,n,o]=t;return[n,o]}function $l(e,t,n=1){const[o,s]=Xj(e);if(!o)return;const i=window.getComputedStyle(t).getPropertyValue(o);if(i){const a=i.trim();return Tm(a)?parseFloat(a):a}else return Il(s)?$l(s,t,n+1):s}function Jj(e,{...t},n){const o=e.current;if(!(o instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Il(i))return;const a=$l(i,o);a&&s.set(a)});for(const s in t){const i=t[s];if(!Il(i))continue;const a=$l(i,o);a&&(t[s]=a,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const Zj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Km=e=>Zj.has(e),eS=e=>Object.keys(e).some(Km),ph=e=>e===Ur||e===ke,mh=(e,t)=>parseFloat(e.split(", ")[t]),gh=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const s=o.match(/^matrix3d\((.+)\)$/);if(s)return mh(s[1],t);{const i=o.match(/^matrix\((.+)\)$/);return i?mh(i[1],e):0}},tS=new Set(["x","y","z"]),nS=bs.filter(e=>!tS.has(e));function rS(e){const t=[];return nS.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:gh(4,13),y:gh(5,14)};bo.translateX=bo.x;bo.translateY=bo.y;const oS=(e,t,n)=>{const o=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{l[c]=bo[c](o,i)}),t.render();const u=t.measureViewportBox();return n.forEach(c=>{const d=t.getValue(c);d&&d.jump(l[c]),e[c]=bo[c](u,i)}),e},sS=(e,t,n={},o={})=>{t={...t},o={...o};const s=Object.keys(t).filter(Km);let i=[],a=!1;const l=[];if(s.forEach(u=>{const c=e.getValue(u);if(!e.hasValue(u))return;let d=n[u],h=Fo(d);const p=t[u];let y;if(Ci(p)){const m=p.length,g=p[0]===null?1:0;d=p[g],h=Fo(d);for(let v=g;v<m&&p[v]!==null;v++)y?Gc(Fo(p[v])===y):y=Fo(p[v])}else y=Fo(p);if(h!==y)if(ph(h)&&ph(y)){const m=c.get();typeof m=="string"&&c.set(parseFloat(m)),typeof p=="string"?t[u]=parseFloat(p):Array.isArray(p)&&y===ke&&(t[u]=p.map(parseFloat))}else h?.transform&&y?.transform&&(d===0||p===0)?d===0?c.set(y.transform(d)):t[u]=h.transform(p):(a||(i=rS(e),a=!0),l.push(u),o[u]=o[u]!==void 0?o[u]:t[u],c.jump(p))}),l.length){const u=l.indexOf("height")>=0?window.pageYOffset:null,c=oS(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Xi&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:o}}else return{target:t,transitionEnd:o}};function iS(e,t,n,o){return eS(t)?sS(e,t,n,o):{target:t,transitionEnd:o}}const aS=(e,t,n,o)=>{const s=Jj(e,t,o);return t=s.target,o=s.transitionEnd,iS(e,t,n,o)},Vl={current:null},Qm={current:!1};function lS(){if(Qm.current=!0,!!Xi)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vl.current=e.matches;e.addListener(t),t()}else Vl.current=!1}function cS(e,t,n){const{willChange:o}=t;for(const s in t){const i=t[s],a=n[s];if(qt(i))e.addValue(s,i),Pi(o)&&o.add(s);else if(qt(a))e.addValue(s,yo(i,{owner:e})),Pi(o)&&o.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,yo(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const xh=new WeakMap,Ym=Object.keys(os),uS=Ym.length,yh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],dS=Oc.length;class hS{constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=Zi(n),this.isVariantNode=Fp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const p=d[h];l[h]!==void 0&&qt(p)&&(p.set(l[h],!1),Pi(c)&&c.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,xh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),Qm.current||lS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){xh.delete(this.current),this.projection&&this.projection.unmount(),Kn(this.notifyUpdate),Kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const o=Gr.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},o,s,i){let a,l;for(let u=0;u<uS;u++){const c=Ym[u],{isEnabled:d,Feature:h,ProjectionNode:p,MeasureLayout:y}=os[c];p&&(a=p),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),y&&(l=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:d,dragConstraints:h,layoutScroll:p,layoutRoot:y}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!d||h&&oo(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:y})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ft()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<yh.length;o++){const s=yh[o];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=cS(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const n={};for(let o=0;o<dS;o++){const s=Oc[o],i=this.props[s];(rs(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=yo(n,{owner:this}),this.addValue(t,o)),o}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props,s=typeof o=="string"||typeof o=="object"?(n=zc(this.props,o))===null||n===void 0?void 0:n[t]:void 0;if(o&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qt(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Zc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Xm extends hS{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...o},{transformValues:s},i){let a=T0(o,t||{},this);if(s&&(n&&(n=s(n)),o&&(o=s(o)),a&&(a=s(a))),i){I0(this,o,a);const l=aS(this,o,a,n);n=l.transitionEnd,o=l.target}return{transition:t,transitionEnd:n,...o}}}function fS(e){return window.getComputedStyle(e)}class pS extends Xm{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Gr.has(n)){const o=Kc(n);return o&&o.default||0}else{const o=fS(t),s=($p(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $m(t,n)}build(t,n,o,s){$c(t,n,o,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Hc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,o,s){Gp(t,n,o,s)}}class mS extends Xm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Gr.has(n)){const o=Kc(n);return o&&o.default||0}return n=Up.has(n)?n:Dc(n),t.getAttribute(n)}measureInstanceViewportBox(){return ft()}scrapeMotionValuesFromProps(t,n){return qp(t,n)}build(t,n,o,s){Nc(t,n,o,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,o,s){Wp(t,n,o,s)}mount(t){this.isSVGTag=Bc(t.tagName),super.mount(t)}}const gS=(e,t)=>Lc(e)?new mS(t,{enableHardwareAcceleration:!1}):new pS(t,{enableHardwareAcceleration:!0}),xS={layout:{ProjectionNode:qm,MeasureLayout:Nm}},yS={...G0,...uw,...Qj,...xS},Gt=bC((e,t)=>XC(e,t,yS,gS));function Jm(){const e=f.useRef(!1);return Rc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function bS(){const e=Jm(),[t,n]=f.useState(0),o=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>et.postRender(o),[o]),t]}class vS extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CS({children:e,isPresent:t}){const n=f.useId(),o=f.useRef(null),s=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:u}=s.current;if(t||!o.current||!i||!a)return;o.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),f.createElement(vS,{isPresent:t,childRef:o,sizeRef:s},f.cloneElement(e,{ref:o}))}const Ja=({children:e,initial:t,isPresent:n,onExitComplete:o,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=Kp(wS),u=f.useId(),c=f.useMemo(()=>({id:u,initial:t,isPresent:n,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;o&&o()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return f.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),f.useEffect(()=>{!n&&!l.size&&o&&o()},[n]),a==="popLayout"&&(e=f.createElement(CS,{isPresent:n},e)),f.createElement(Yi.Provider,{value:c},e)};function wS(){return new Map}function jS(e){return f.useEffect(()=>()=>e(),[])}const jr=e=>e.key||"";function SS(e,t){e.forEach(n=>{const o=jr(n);t.set(o,n)})}function PS(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const Zm=({children:e,custom:t,initial:n=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=f.useContext(_c).forceRender||bS()[0],u=Jm(),c=PS(e);let d=c;const h=f.useRef(new Map).current,p=f.useRef(d),y=f.useRef(new Map).current,m=f.useRef(!0);if(Rc(()=>{m.current=!1,SS(c,y),p.current=d}),jS(()=>{m.current=!0,y.clear(),h.clear()}),m.current)return f.createElement(f.Fragment,null,d.map(b=>f.createElement(Ja,{key:jr(b),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},b)));d=[...d];const g=p.current.map(jr),v=c.map(jr),x=g.length;for(let b=0;b<x;b++){const C=g[b];v.indexOf(C)===-1&&!h.has(C)&&h.set(C,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((b,C)=>{if(v.indexOf(C)!==-1)return;const P=y.get(C);if(!P)return;const F=g.indexOf(C);let T=b;if(!T){const I=()=>{h.delete(C);const R=Array.from(y.keys()).filter(V=>!v.includes(V));if(R.forEach(V=>y.delete(V)),p.current=c.filter(V=>{const O=jr(V);return O===C||R.includes(O)}),!h.size){if(u.current===!1)return;l(),o&&o()}};T=f.createElement(Ja,{key:jr(P),isPresent:!1,onExitComplete:I,custom:t,presenceAffectsLayout:i,mode:a},P),h.set(C,T)}d.splice(F,0,T)}),d=d.map(b=>{const C=b.key;return h.has(C)?b:f.createElement(Ja,{key:jr(b),isPresent:!0,presenceAffectsLayout:i,mode:a},b)}),f.createElement(f.Fragment,null,h.size?d:d.map(b=>f.cloneElement(b)))};var kS={};const eg=f.createContext(null),Vt=()=>{const e=f.useContext(eg);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},IS=({children:e})=>{const[t,n]=f.useState(null),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),c=Ic(),d=kS.REACT_APP_API_URL||window.location.origin;f.useEffect(()=>{console.log("[AuthContext] Checking session on mount..."),p(),h()},[]);const h=async()=>{try{const x=await fetch(`${d}/api/auth/csrf-token`,{credentials:"include"});if(x.ok){const b=await x.json();return u(b.csrfToken),console.log("[AuthContext] CSRF token fetched:",b.csrfToken),b.csrfToken}}catch(x){console.error("[AuthContext] Failed to fetch CSRF token:",x)}return null};f.useEffect(()=>{console.log("[AuthContext] User state changed:",t)},[t]);const p=async()=>{console.log("[AuthContext] checkSession called");try{console.log("[AuthContext] Checking API /api/auth/me...");const x=await fetch(`${d}/api/auth/me`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("[AuthContext] API response status:",x.status),x.ok){const b=await x.json();console.log("[AuthContext] Got user from API:",b),n(b)}else console.log("[AuthContext] API returned non-OK status"),n(null)}catch(x){console.error("[AuthContext] Session check failed:",x),n(null)}finally{s(!1)}},v={user:t,loading:o,error:i,login:async(x,b,C=null,P=null)=>{console.log("[AuthContext] Login attempt for:",x);try{a(null);const F=await fetch(`${d}/api/auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:b,...C&&{totpToken:C},...P&&{fido2Response:P}})}),T=await F.json();if(console.log("[AuthContext] Login response:",T),!F.ok)throw new Error(T.error||"Login failed");return T.requiresTwoFactor?{requiresTwoFactor:!0,mfaMethods:T.mfaMethods||[],hasFIDO2:T.hasFIDO2,hasTOTP:T.hasTOTP}:(n(T.user),console.log("[AuthContext] Login successful, user set:",T.user),console.log("[AuthContext] Authentication uses httpOnly cookies (secure)"),await h(),c("/dashboard"),{success:!0})}catch(F){throw console.error("[AuthContext] Login error:",F),a(F.message),F}},logout:async()=>{console.log("[AuthContext] Logout called");try{await fetch(`${d}/api/auth/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(x){console.error("[AuthContext] Logout error:",x)}finally{n(null),sessionStorage.clear(),c("/login")}},checkSession:p,apiRequest:async(x,b={})=>{console.log("[AuthContext] API Request to:",x);let C=l;b.method&&b.method!=="GET"&&(C||(console.log("[AuthContext] CSRF token not found, fetching..."),C=await h()),console.log("[AuthContext] CSRF token to use:",C?`${C.substring(0,10)}...`:"none"));const P={...b,credentials:"include",headers:{"Content-Type":"application/json",...b.method&&b.method!=="GET"&&C?{"X-CSRF-Token":C}:{},...b.headers}};console.log("[AuthContext] Request headers:",P.headers);try{const F=await fetch(`${d}${x}`,P);if(F.status===401){const T=F.headers.get("content-type");if(T&&T.includes("application/json"))try{if((await F.clone().json()).requiresAdminAuth)return console.log("[AuthContext] Admin authentication required, not a login issue"),F}catch{}console.log("[AuthContext] 401 Unauthorized, redirecting to login"),sessionStorage.clear(),n(null),c("/login")}return F}catch(F){throw console.error("[AuthContext] API Request error:",F),F}}};return r.jsx(eg.Provider,{value:v,children:e})},ES=({open:e,onClose:t,mfaMethods:n,onVerify:o,username:s})=>{const{enqueueSnackbar:i}=Kt(),[a,l]=f.useState(""),[u,c]=f.useState(""),[d,h]=f.useState(!1),[p,y]=f.useState("");f.useEffect(()=>{n&&n.length===1?l(n[0]):n&&n.includes("fido2")?l("fido2"):n&&n.includes("totp")&&l("totp")},[n]);const m=(C,P)=>{P!==null&&(l(P),y(""),c(""))},g=async()=>{if(!u||u.length!==6){y("Please enter a 6-digit code");return}h(!0),y("");try{await o("totp",u)}catch(C){y(C.message||"Invalid code"),c("")}finally{h(!1)}},v=async()=>{h(!0),y("");try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await C.json(),F=await fetch("/api/mfa/fido2/authenticate/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":P},credentials:"include",body:JSON.stringify({username:s})});if(!F.ok)throw new Error("Failed to start authentication");const{data:T}=await F.json(),I=M=>{let $=M.replace(/-/g,"+").replace(/_/g,"/");const L=(4-$.length%4)%4;L&&($+="=".repeat(L));const _=window.atob($),B=_.length,z=new Uint8Array(B);for(let G=0;G<B;G++)z[G]=_.charCodeAt(G);return z.buffer},R=M=>{const $=new Uint8Array(M);let L="";for(let _=0;_<$.byteLength;_++)L+=String.fromCharCode($[_]);return window.btoa(L).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},V={...T,challenge:I(T.challenge),allowCredentials:T.allowCredentials?.map(M=>({...M,id:I(M.id)})),timeout:T.timeout||6e4,userVerification:T.userVerification||"preferred"};i("Please interact with your security key...",{variant:"info"});const O=await navigator.credentials.get({publicKey:V});if(!O)throw new Error("Authentication cancelled");const S={id:O.id,rawId:R(O.rawId),type:O.type,response:{clientDataJSON:R(O.response.clientDataJSON),authenticatorData:R(O.response.authenticatorData),signature:R(O.response.signature),userHandle:O.response.userHandle?R(O.response.userHandle):null}},N=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:D}=await N.json(),w=await fetch("/api/mfa/fido2/authenticate/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":D},credentials:"include",body:JSON.stringify({credential:S})});if(!w.ok){const M=await w.json();throw new Error(M.error||"Authentication failed")}const E=await w.json();await o("fido2",E.mfaToken||"verified"),i("Security key verified successfully!",{variant:"success"})}catch(C){console.error("FIDO2 authentication error:",C),C.name==="NotAllowedError"?y("Authentication was cancelled or timed out"):C.name==="InvalidStateError"?y("No security key registered for this account"):y(C.message||"Failed to authenticate with security key")}finally{h(!1)}},x=()=>{a==="totp"?g():a==="fido2"&&v()},b=C=>{C.key==="Enter"&&a==="totp"&&g()};return r.jsxs(at,{open:e,onClose:()=>!d&&t(),maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:d,children:[r.jsx(lt,{children:"Two-Factor Authentication Required"}),r.jsxs(ct,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Select your preferred authentication method:"}),n&&n.length>1&&r.jsxs(hc,{value:a,exclusive:!0,onChange:m,fullWidth:!0,sx:{mt:2},children:[n.includes("totp")&&r.jsxs(on,{value:"totp",children:[r.jsx(fc,{sx:{mr:1}}),"Authenticator App"]}),n.includes("fido2")&&r.jsxs(on,{value:"fido2",children:[r.jsx(es,{sx:{mr:1}}),"Security Key"]})]})]}),p&&r.jsx(ge,{severity:"error",sx:{mb:2},children:p}),a==="totp"&&r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Enter the 6-digit code from your authenticator app:"}),r.jsx(De,{fullWidth:!0,label:"6-Digit Code",value:u,onChange:C=>{const P=C.target.value.replace(/\D/g,"");P.length<=6&&c(P)},onKeyPress:b,placeholder:"000000",autoFocus:!0,disabled:d,inputProps:{maxLength:6,pattern:"[0-9]*",inputMode:"numeric",style:{letterSpacing:"0.5em",fontSize:"1.5rem",textAlign:"center"}},sx:{mt:2}})]}),a==="fido2"&&r.jsxs(A,{textAlign:"center",sx:{py:2},children:[r.jsx(es,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:d?"Waiting for security key...":"Click verify to authenticate with your security key"}),r.jsx(k,{variant:"body2",color:"textSecondary",children:"Insert your security key and follow the browser prompts"}),d&&r.jsx(Ue,{sx:{mt:2}})]})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:t,disabled:d,children:"Cancel"}),r.jsx(X,{onClick:x,variant:"contained",disabled:d||!a||a==="totp"&&(!u||u.length!==6),children:d?"Verifying...":"Verify"})]})]})},TS=()=>{const e=Ic(),{enqueueSnackbar:t}=Kt(),{login:n}=Vt(),[o,s]=f.useState({username:"",password:"",rememberMe:!1}),[i,a]=f.useState(!1),[l,u]=f.useState(!1),[c,d]=f.useState(""),[h,p]=f.useState(!1),[y,m]=f.useState([]),g=b=>{const{name:C,value:P,checked:F}=b.target;s(T=>({...T,[C]:C==="rememberMe"?F:P})),d("")},v=async b=>{b.preventDefault(),u(!0),d("");try{const C=await n(o.username,o.password);C.requiresTwoFactor?(m(C.mfaMethods||[]),p(!0),u(!1)):C.success&&(t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(C){d(C.message||"Login failed. Please try again."),t(C.message||"Login failed",{variant:"error"})}finally{u(!1)}},x=async(b,C)=>{u(!0);try{(await n(o.username,o.password,b==="totp"?C:void 0,b==="fido2"?{fido2Verified:!0}:void 0)).success&&(p(!1),t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(P){throw u(!1),P}};return r.jsxs(A,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:b=>b.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:2},children:[r.jsx(Gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:r.jsxs(_e,{sx:{width:{xs:"100%",sm:400},p:4,WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)",backgroundColor:"background.paper",boxShadow:3},children:[r.jsxs(A,{sx:{textAlign:"center",mb:3},children:[r.jsx(Gt.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:r.jsx(hy,{sx:{fontSize:48,color:"primary.main",mb:2}})}),r.jsx(k,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"SMTP Relay"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Control Center Login"})]}),r.jsxs("form",{onSubmit:v,noValidate:!0,children:[r.jsx(De,{fullWidth:!0,id:"username",name:"username",label:"Username",value:o.username,onChange:g,margin:"normal",required:!0,autoFocus:!0,autoComplete:"username","aria-label":"Username",InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(fy,{color:"action"})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx(De,{fullWidth:!0,id:"password",name:"password",label:"Password",type:i?"text":"password",value:o.password,onChange:g,margin:"normal",required:!0,autoComplete:"current-password","aria-label":"Password",InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(py,{color:"action"})}),endAdornment:r.jsx(Er,{position:"end",children:r.jsx(Pe,{onClick:()=>a(!i),edge:"end",size:"small","aria-label":i?"Hide password":"Show password",title:i?"Hide password":"Show password",children:i?r.jsx(pc,{}):r.jsx(mc,{})})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx(hn,{control:r.jsx(Nf,{name:"rememberMe",checked:o.rememberMe,onChange:g,color:"primary"}),label:"Remember me",sx:{mt:1,mb:2}}),c&&r.jsx(Gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:r.jsx(ge,{severity:"error",sx:{mb:2},children:c})}),r.jsx(X,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:l,sx:{mt:2,mb:2,height:48,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)"}},children:l?r.jsx(Ue,{size:24,color:"inherit"}):"Sign In"}),r.jsx(St,{sx:{my:2},children:r.jsx(k,{variant:"caption",color:"text.secondary",children:"SECURITY INFO"})}),r.jsx(A,{sx:{textAlign:"center"},children:r.jsx(k,{variant:"caption",color:"text.secondary",children:"This is a secure system. Unauthorized access is prohibited. All activities are monitored and logged."})})]})]})}),r.jsx(ES,{open:h,onClose:()=>p(!1),mfaMethods:y,onVerify:x,username:o.username})]})},Rn=Object.create(null);Rn.open="0";Rn.close="1";Rn.ping="2";Rn.pong="3";Rn.message="4";Rn.upgrade="5";Rn.noop="6";const ni=Object.create(null);Object.keys(Rn).forEach(e=>{ni[Rn[e]]=e});const Nl={type:"error",data:"parser error"},tg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ng=typeof ArrayBuffer=="function",rg=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,eu=({type:e,data:t},n,o)=>tg&&t instanceof Blob?n?o(t):bh(t,o):ng&&(t instanceof ArrayBuffer||rg(t))?n?o(t):bh(new Blob([t]),o):o(Rn[e]+(t||"")),bh=(e,t)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];t("b"+(o||""))},n.readAsDataURL(e)};function vh(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Za;function AS(e,t){if(tg&&e.data instanceof Blob)return e.data.arrayBuffer().then(vh).then(t);if(ng&&(e.data instanceof ArrayBuffer||rg(e.data)))return t(vh(e.data));eu(e,!1,n=>{Za||(Za=new TextEncoder),t(Za.encode(n))})}const Ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ch.length;e++)zo[Ch.charCodeAt(e)]=e;const MS=e=>{let t=e.length*.75,n=e.length,o,s=0,i,a,l,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),d=new Uint8Array(c);for(o=0;o<n;o+=4)i=zo[e.charCodeAt(o)],a=zo[e.charCodeAt(o+1)],l=zo[e.charCodeAt(o+2)],u=zo[e.charCodeAt(o+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|u&63;return c},RS=typeof ArrayBuffer=="function",tu=(e,t)=>{if(typeof e!="string")return{type:"message",data:og(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:DS(e.substring(1),t)}:ni[n]?e.length>1?{type:ni[n],data:e.substring(1)}:{type:ni[n]}:Nl},DS=(e,t)=>{if(RS){const n=MS(e);return og(n,t)}else return{base64:!0,data:e}},og=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},sg="",FS=(e,t)=>{const n=e.length,o=new Array(n);let s=0;e.forEach((i,a)=>{eu(i,!1,l=>{o[a]=l,++s===n&&t(o.join(sg))})})},OS=(e,t)=>{const n=e.split(sg),o=[];for(let s=0;s<n.length;s++){const i=tu(n[s],t);if(o.push(i),i.type==="error")break}return o};function _S(){return new TransformStream({transform(e,t){AS(e,n=>{const o=n.length;let s;if(o<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,o);else if(o<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,o)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(o))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let el;function Ws(e){return e.reduce((t,n)=>t+n.length,0)}function qs(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let s=0;s<t;s++)n[s]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function LS(e,t){el||(el=new TextDecoder);const n=[];let o=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(o===0){if(Ws(n)<1)break;const u=qs(n,1);i=(u[0]&128)===128,s=u[0]&127,s<126?o=3:s===126?o=1:o=2}else if(o===1){if(Ws(n)<2)break;const u=qs(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),o=3}else if(o===2){if(Ws(n)<8)break;const u=qs(n,8),c=new DataView(u.buffer,u.byteOffset,u.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Nl);break}s=d*Math.pow(2,32)+c.getUint32(4),o=3}else{if(Ws(n)<s)break;const u=qs(n,s);l.enqueue(tu(i?u:el.decode(u),t)),o=0}if(s===0||s>e){l.enqueue(Nl);break}}}})}const ig=4;function gt(e){if(e)return $S(e)}function $S(e){for(var t in gt.prototype)e[t]=gt.prototype[t];return e}gt.prototype.on=gt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};gt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===t||o.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};gt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,t)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};gt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ra=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),VS="arraybuffer";function ag(e,...t){return t.reduce((n,o)=>(e.hasOwnProperty(o)&&(n[o]=e[o]),n),{})}const NS=rn.setTimeout,BS=rn.clearTimeout;function oa(e,t){t.useNativeTimers?(e.setTimeoutFn=NS.bind(rn),e.clearTimeoutFn=BS.bind(rn)):(e.setTimeoutFn=rn.setTimeout.bind(rn),e.clearTimeoutFn=rn.clearTimeout.bind(rn))}const HS=1.33;function zS(e){return typeof e=="string"?GS(e):Math.ceil((e.byteLength||e.size)*HS)}function GS(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function lg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function US(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function WS(e){let t={},n=e.split("&");for(let o=0,s=n.length;o<s;o++){let i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class qS extends Error{constructor(t,n,o){super(t),this.description=n,this.context=o,this.type="TransportError"}}class nu extends gt{constructor(t){super(),this.writable=!1,oa(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,o){return super.emitReserved("error",new qS(t,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=tu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=US(t);return n.length?"?"+n:""}}class KS extends nu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};OS(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,FS(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=lg()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let cg=!1;try{cg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const QS=cg;function YS(){}class XS extends KS{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}}doWrite(t,n){const o=this.request({method:"POST",data:t});o.on("success",n),o.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=t}}let ho=class ri extends gt{constructor(t,n,o){super(),this.createRequest=t,oa(this,o),this._opts=o,this._method=o.method||"GET",this._uri=n,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var t;const n=ag(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(n);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&o.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var s;o.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=ri.requestsCount++,ri.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=YS,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ri.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};ho.requestsCount=0;ho.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wh);else if(typeof addEventListener=="function"){const e="onpagehide"in rn?"pagehide":"unload";addEventListener(e,wh,!1)}}function wh(){for(let e in ho.requests)ho.requests.hasOwnProperty(e)&&ho.requests[e].abort()}const JS=function(){const e=ug({xdomain:!1});return e&&e.responseType!==null}();class ZS extends XS{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=JS&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ho(ug,this.uri(),t)}}function ug(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||QS))return new XMLHttpRequest}catch{}if(!t)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const dg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class e1 extends nu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,o=dg?{}:ag(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,o)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;eu(o,this.supportsBinary,i=>{try{this.doWrite(o,i)}catch{}s&&ra(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=lg()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const tl=rn.WebSocket||rn.MozWebSocket;class t1 extends e1{createSocket(t,n,o){return dg?new tl(t,n,o):n?new tl(t,n):new tl(t)}doWrite(t,n){this.ws.send(n)}}class n1 extends nu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=LS(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=t.readable.pipeThrough(n).getReader(),s=_S();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{o.read().then(({done:l,value:u})=>{l||(this.onPacket(u),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;this._writer.write(o).then(()=>{s&&ra(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const r1={websocket:t1,webtransport:n1,polling:ZS},o1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Bl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");n!=-1&&o!=-1&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let s=o1.exec(e||""),i={},a=14;for(;a--;)i[s1[a]]=s[a]||"";return n!=-1&&o!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=i1(i,i.path),i.queryKey=a1(i,i.query),i}function i1(e,t){const n=/\/{2,9}/g,o=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&o.splice(0,1),t.slice(-1)=="/"&&o.splice(o.length-1,1),o}function a1(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,s,i){s&&(n[s]=i)}),n}const Hl=typeof addEventListener=="function"&&typeof removeEventListener=="function",oi=[];Hl&&addEventListener("offline",()=>{oi.forEach(e=>e())},!1);class lr extends gt{constructor(t,n){if(super(),this.binaryType=VS,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const o=Bl(t);n.hostname=o.host,n.secure=o.protocol==="https"||o.protocol==="wss",n.port=o.port,o.query&&(n.query=o.query)}else n.host&&(n.hostname=Bl(n.host).host);oa(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(o=>{const s=o.prototype.name;this.transports.push(s),this._transportsByName[s]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=WS(this.opts.query)),Hl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},oi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=ig,n.transport=t,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&lr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",lr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const s=this.writeBuffer[o].data;if(s&&(n+=zS(s)),o>0&&n>this._maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ra(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,o){return this._sendPacket("message",t,n,o),this}send(t,n,o){return this._sendPacket("message",t,n,o),this}_sendPacket(t,n,o,s){if(typeof n=="function"&&(s=n,n=void 0),typeof o=="function"&&(s=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const i={type:t,data:n,options:o};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}_onError(t){if(lr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Hl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=oi.indexOf(this._offlineEventListener);o!==-1&&oi.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}lr.protocol=ig;class l1 extends lr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),o=!1;lr.priorWebsocketSuccess=!1;const s=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!o)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;lr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){o||(o=!0,d(),n.close(),n=null)}const a=h=>{const p=new Error("probe error: "+h);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function u(){a("socket closed")}function c(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",l),this.off("close",u),this.off("upgrading",c)};n.once("open",s),n.once("error",a),n.once("close",l),this.once("close",u),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let o=0;o<t.length;o++)~this.transports.indexOf(t[o])&&n.push(t[o]);return n}}let c1=class extends l1{constructor(t,n={}){const o=typeof t=="object"?t:n;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(s=>r1[s]).filter(s=>!!s)),super(t,o)}};function u1(e,t="",n){let o=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),o=Bl(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const i=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port+t,o.href=o.protocol+"://"+i+(n&&n.port===o.port?"":":"+o.port),o}const d1=typeof ArrayBuffer=="function",h1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,hg=Object.prototype.toString,f1=typeof Blob=="function"||typeof Blob<"u"&&hg.call(Blob)==="[object BlobConstructor]",p1=typeof File=="function"||typeof File<"u"&&hg.call(File)==="[object FileConstructor]";function ru(e){return d1&&(e instanceof ArrayBuffer||h1(e))||f1&&e instanceof Blob||p1&&e instanceof File}function si(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,o=e.length;n<o;n++)if(si(e[n]))return!0;return!1}if(ru(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return si(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&si(e[n]))return!0;return!1}function m1(e){const t=[],n=e.data,o=e;return o.data=zl(n,t),o.attachments=t.length,{packet:o,buffers:t}}function zl(e,t){if(!e)return e;if(ru(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=zl(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=zl(e[o],t));return n}return e}function g1(e,t){return e.data=Gl(e.data,t),delete e.attachments,e}function Gl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Gl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Gl(e[n],t));return e}const x1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],y1=5;var ze;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ze||(ze={}));class b1{constructor(t){this.replacer=t}encode(t){return(t.type===ze.EVENT||t.type===ze.ACK)&&si(t)?this.encodeAsBinary({type:t.type===ze.EVENT?ze.BINARY_EVENT:ze.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===ze.BINARY_EVENT||t.type===ze.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=m1(t),o=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(o),s}}function jh(e){return Object.prototype.toString.call(e)==="[object Object]"}class ou extends gt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const o=n.type===ze.BINARY_EVENT;o||n.type===ze.BINARY_ACK?(n.type=o?ze.EVENT:ze.ACK,this.reconstructor=new v1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ru(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const o={type:Number(t.charAt(0))};if(ze[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===ze.BINARY_EVENT||o.type===ze.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(i,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(a)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););o.nsp=t.substring(i,n)}else o.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}o.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(ou.isPayloadValid(o.type,i))o.data=i;else throw new Error("invalid payload")}return o}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case ze.CONNECT:return jh(n);case ze.DISCONNECT:return n===void 0;case ze.CONNECT_ERROR:return typeof n=="string"||jh(n);case ze.EVENT:case ze.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&x1.indexOf(n[0])===-1);case ze.ACK:case ze.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class v1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=g1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const C1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ou,Encoder:b1,get PacketType(){return ze},protocol:y1},Symbol.toStringTag,{value:"Module"}));function cn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const w1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fg extends gt{constructor(t,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[cn(t,"open",this.onopen.bind(this)),cn(t,"packet",this.onpacket.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var o,s,i;if(w1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:ze.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),a.id=d}const l=(s=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var o;const s=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((o,s)=>{const i=(a,l)=>a?s(a):o(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>o!==this._queue[0]?void 0:(s!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ze.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(o=>String(o.id)===t)){const o=this.acks[t];delete this.acks[t],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ze.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ze.EVENT:case ze.BINARY_EVENT:this.onevent(t);break;case ze.ACK:case ze.BINARY_ACK:this.onack(t);break;case ze.DISCONNECT:this.ondisconnect();break;case ze.CONNECT_ERROR:this.destroy();const o=new Error(t.data.message);o.data=t.data.data,this.emitReserved("connect_error",o);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let o=!1;return function(...s){o||(o=!0,n.packet({type:ze.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ze.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,t.data)}}}function jo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}jo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};jo.prototype.reset=function(){this.attempts=0};jo.prototype.setMin=function(e){this.ms=e};jo.prototype.setMax=function(e){this.max=e};jo.prototype.setJitter=function(e){this.jitter=e};class Ul extends gt{constructor(t,n){var o;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,oa(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new jo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||C1;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new c1(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const s=cn(n,"open",function(){o.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=cn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(cn(t,"ping",this.onping.bind(this)),cn(t,"data",this.ondata.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this)),cn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ra(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let o=this.nsps[t];return o?this._autoConnect&&!o.active&&o.connect():(o=new fg(this,t,n),this.nsps[t]=o),o}_destroy(t){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let o=0;o<n.length;o++)this.engine.write(n[o],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const _o={};function ii(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=u1(e,t.path||"/socket.io"),o=n.source,s=n.id,i=n.path,a=_o[s]&&i in _o[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let u;return l?u=new Ul(o,t):(_o[s]||(_o[s]=new Ul(o,t)),u=_o[s]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(ii,{Manager:Ul,Socket:fg,io:ii,connect:ii});var j1={};const pg=f.createContext(null),su=()=>{const e=f.useContext(pg);if(!e)throw new Error("useWebSocket must be used within WebSocketProvider");return e},S1=({children:e})=>{const[t,n]=f.useState(null),[o,s]=f.useState(!1),[i,a]=f.useState(null),[l,u]=f.useState([]),[c,d]=f.useState(null),{user:h}=Vt(),p=j1.REACT_APP_API_URL||"http://localhost:3001";f.useEffect(()=>{if(!h){t&&(t.disconnect(),n(null));return}const b=ii(p,{withCredentials:!0,transports:["websocket","polling"]});return b.on("connect",()=>{console.log("WebSocket connected"),s(!0),b.emit("request:stats"),b.emit("request:devices")}),b.on("disconnect",()=>{console.log("WebSocket disconnected"),s(!1)}),b.on("connect_error",C=>{console.error("WebSocket connection error:",C.message),s(!1)}),b.on("stats:update",C=>{a(C)}),b.on("devices:update",C=>{u(C)}),b.on("queue:update",C=>{d(C)}),b.on("email:sent",C=>{console.log("Email sent:",C)}),b.on("email:failed",C=>{console.error("Email failed:",C)}),n(b),()=>{b.disconnect()}},[h,p]);const x={socket:t,connected:o,stats:i,devices:l,queueStatus:c,requestStats:()=>{t&&o&&t.emit("request:stats")},requestDevices:()=>{t&&o&&t.emit("request:devices")},requestQueueStatus:()=>{t&&o&&t.emit("request:queue")},sendCommand:(b,C)=>{t&&o&&t.emit(b,C)}};return r.jsx(pg.Provider,{value:x,children:e})},Ks=({title:e,value:t,icon:n,color:o,trend:s})=>r.jsx(Gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:e}),r.jsx(k,{variant:"h4",component:"div",children:t}),s&&r.jsxs(k,{variant:"body2",color:s>0?"success.main":"error.main",children:[s>0?"+":"",s,"%"]})]}),r.jsx(A,{sx:{color:o},children:n})]})})})}),P1=()=>{const{socket:e,connected:t}=su(),[n,o]=f.useState({totalEmails:0,emailsToday:0,activeDevices:0,queueSize:0,successRate:0,avgProcessingTime:0}),[s,i]=f.useState([]),[a,l]=f.useState({smtp:"healthy",exchange:"healthy",redis:"healthy",disk:85,memory:65,cpu:45});f.useEffect(()=>{if(e&&t)return e.emit("request:stats"),e.on("stats:update",d=>{o(h=>({...h,totalEmails:d.totalEmails??h.totalEmails,emailsToday:d.emailsToday??h.emailsToday,activeDevices:d.activeDevices??h.activeDevices,queueSize:d.queueSize??h.queueSize,successRate:d.successRate??h.successRate,avgProcessingTime:d.avgProcessingTime??h.avgProcessingTime}))}),e.on("activity:update",d=>{i(d)}),e.on("health:update",d=>{l(d)}),()=>{e.off("stats:update"),e.off("activity:update"),e.off("health:update")}},[e,t]);const u=()=>{e&&t&&e.emit("request:stats")},c=d=>{switch(d){case"healthy":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(gn,{color:"warning"});case"error":return r.jsx(Tn,{color:"error"});default:return r.jsx(Ne,{})}};return r.jsxs(A,{sx:{flexGrow:1,p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Dashboard"}),r.jsx(yt,{title:"Refresh",children:r.jsx(Pe,{onClick:u,children:r.jsx(xn,{})})})]}),!t&&r.jsx(A,{mb:2,children:r.jsx(be,{label:"Connecting to server...",color:"warning",icon:r.jsx(gn,{})})}),r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ks,{title:"Total Emails",value:n.totalEmails.toLocaleString(),icon:r.jsx(po,{fontSize:"large"}),color:"primary.main",trend:12})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ks,{title:"Active Devices",value:n.activeDevices,icon:r.jsx(Bf,{fontSize:"large"}),color:"success.main"})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ks,{title:"Queue Size",value:n.queueSize,icon:r.jsx(Hf,{fontSize:"large"}),color:"warning.main"})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ks,{title:"Success Rate",value:`${n.successRate}%`,icon:r.jsx(Fn,{fontSize:"large"}),color:"info.main"})})]}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{elevation:3,sx:{p:2},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"System Health"}),r.jsxs(A,{sx:{mt:2},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.smtp),r.jsx(k,{sx:{ml:1},children:"SMTP Server"})]}),r.jsx(be,{label:a.smtp,color:a.smtp==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.exchange),r.jsx(k,{sx:{ml:1},children:"Exchange Online"})]}),r.jsx(be,{label:a.exchange,color:a.exchange==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.redis),r.jsx(k,{sx:{ml:1},children:"Redis Cache"})]}),r.jsx(be,{label:a.redis,color:a.redis==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{mt:3,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["CPU Usage (",a.cpu,"%)"]}),r.jsx(zt,{variant:"determinate",value:a.cpu,color:a.cpu>80?"error":"primary"})]}),r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Memory Usage (",a.memory,"%)"]}),r.jsx(zt,{variant:"determinate",value:a.memory,color:a.memory>80?"error":"primary"})]}),r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Disk Usage (",a.disk,"%)"]}),r.jsx(zt,{variant:"determinate",value:a.disk,color:a.disk>90?"error":a.disk>80?"warning":"primary"})]})]})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{elevation:3,sx:{p:2},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),r.jsx(A,{sx:{mt:2},children:s.length===0?r.jsx(k,{color:"textSecondary",align:"center",children:"No recent activity"}):s.map((d,h)=>r.jsxs(A,{sx:{mb:1,pb:1,borderBottom:"1px solid #e0e0e0"},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",children:[r.jsxs(k,{variant:"body2",children:[d.device," - ",d.action]}),r.jsx(k,{variant:"caption",color:"textSecondary",children:d.time})]}),d.details&&r.jsx(k,{variant:"caption",color:"textSecondary",children:d.details})]},h))})]})})]})]})},mg=f.createContext(void 0);function Be(){const e=f.useContext(mg);if(e===void 0)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const gg=f.createContext(void 0),pe=()=>{const e=f.useContext(gg);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},xg=f.createContext(void 0);function pr(){const e=f.useContext(xg);if(e===void 0)throw new Error(["MUI: Could not find the data grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const Sh={};function iu(e,t){const n=f.useRef(Sh);return n.current===Sh&&(n.current=e(t)),n}const k1=[];function yg(e){f.useEffect(e,k1)}const On=(e,t="warning")=>{let n=!1;const o=Array.isArray(e)?e.join(`
`):e;return()=>{n||(n=!0,t==="error"?console.error(o):console.warn(o))}},I1=Object.is;function bg(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,o=0;for(const s in e)if(n+=1,!I1(e[s],t[s])||!(s in t))return!1;for(const s in t)o+=1;return n===o}On(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);function E1(e){return e.acceptsApiRef}function Ph(e,t){return E1(t)?t(e):t(e.current.state)}const T1=Object.is,au=bg,A1=()=>({state:null,equals:null,selector:null}),ae=(e,t,n=T1)=>{const o=iu(A1),s=o.current.selector!==null,[i,a]=f.useState(s?null:Ph(e,t));return o.current.state=i,o.current.equals=n,o.current.selector=t,yg(()=>e.current.store.subscribe(()=>{const l=Ph(e,o.current.selector);o.current.equals(o.current.state,l)||(o.current.state=l,a(l))})),i};function He(e){return dr("MuiDataGrid",e)}const H=Qn("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","autoHeight","autosizing","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--selectionMode","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorderColor","cell--withRightBorder","columnHeader--withRightBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]);var Ii="NOT_FOUND";function M1(e){var t;return{get:function(o){return t&&e(t.key,o)?t.value:Ii},put:function(o,s){t={key:o,value:s}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function R1(e,t){var n=[];function o(l){var u=n.findIndex(function(d){return t(l,d.key)});if(u>-1){var c=n[u];return u>0&&(n.splice(u,1),n.unshift(c)),c.value}return Ii}function s(l,u){o(l)===Ii&&(n.unshift({key:l,value:u}),n.length>e&&n.pop())}function i(){return n}function a(){n=[]}return{get:o,put:s,getEntries:i,clear:a}}var D1=function(t,n){return t===n};function F1(e){return function(n,o){if(n===null||o===null||n.length!==o.length)return!1;for(var s=n.length,i=0;i<s;i++)if(!e(n[i],o[i]))return!1;return!0}}function sa(e,t){var n=typeof t=="object"?t:{equalityCheck:t},o=n.equalityCheck,s=o===void 0?D1:o,i=n.maxSize,a=i===void 0?1:i,l=n.resultEqualityCheck,u=F1(s),c=a===1?M1(u):R1(a,u);function d(){var h=c.get(arguments);if(h===Ii){if(h=e.apply(null,arguments),l){var p=c.getEntries(),y=p.find(function(m){return l(m.value,h)});y&&(h=y.value)}c.put(arguments,h)}return h}return d.clearCache=function(){return c.clear()},d}function O1(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(o){return typeof o=="function"})){var n=t.map(function(o){return typeof o=="function"?"function "+(o.name||"unnamed")+"()":typeof o}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function _1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=0,d,h={memoizeOptions:void 0},p=l.pop();if(typeof p=="object"&&(h=p,p=l.pop()),typeof p!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof p+"]");var y=h,m=y.memoizeOptions,g=m===void 0?n:m,v=Array.isArray(g)?g:[g],x=O1(l),b=e.apply(void 0,[function(){return c++,p.apply(null,arguments)}].concat(v)),C=e(function(){for(var F=[],T=x.length,I=0;I<T;I++)F.push(x[I].apply(null,arguments));return d=b.apply(null,F),d});return Object.assign(C,{resultFunc:p,memoizedResultFunc:b,dependencies:x,lastResult:function(){return d},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),C};return s}var L1=_1(sa);const $1={cache:new WeakMap};On(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g. `mySelector(state, apiRef.current.instanceId)`."]);function Wl(e){return"current"in e&&"instanceId"in e.current}const ql={id:"default"},Te=(e,t,n,o,s,i,...a)=>{if(a.length>0)throw new Error("Unsupported number of selectors");let l;if(e&&t&&n)l=(u,c)=>{const d=Wl(u),h=c??(d?u.current.instanceId:ql),p=d?u.current.state:u,y=e(p,h),m=t(p,h);return n(y,m)};else if(e&&t)l=(u,c)=>{const d=Wl(u),h=c??(d?u.current.instanceId:ql),p=d?u.current.state:u,y=e(p,h);return t(y)};else throw new Error("Missing arguments");return l.acceptsApiRef=!0,l},nt=(...e)=>{const t=(...n)=>{var o,s;const[i,a]=n,l=Wl(i),u=l?i.current.instanceId:a??ql,c=l?i.current.state:i,{cache:d}=$1;if(d.get(u)&&(o=d.get(u))!=null&&o.get(e)){var h;return(h=d.get(u))==null?void 0:h.get(e)(c,u)}const p=L1(...e);return d.get(u)||d.set(u,new Map),(s=d.get(u))==null||s.set(e,p),p(c,u)};return t.acceptsApiRef=!0,t},Fr=e=>e.columns,qn=Te(Fr,e=>e.orderedFields),So=Te(Fr,e=>e.lookup),In=nt(qn,So,(e,t)=>e.map(n=>t[n])),fn=Te(Fr,e=>e.columnVisibilityModel),Pt=nt(In,fn,(e,t)=>e.filter(n=>t[n.field]!==!1)),ia=nt(Pt,e=>e.map(t=>t.field)),vo=nt(Pt,e=>{const t=[];let n=0;for(let o=0;o<e.length;o+=1)t.push(n),n+=e[o].computedWidth;return t}),lu=Te(Pt,vo,(e,t)=>{const n=e.length;return n===0?0:t[n-1]+e[n-1].computedWidth}),vg=nt(In,e=>e.filter(t=>t.filterable)),V1=nt(In,e=>e.reduce((t,n)=>(n.filterable&&(t[n.field]=n),t),{})),aa=e=>e.columnGrouping,N1=nt(aa,e=>{var t;return(t=e?.unwrappedGroupingModel)!=null?t:{}}),Cg=nt(aa,e=>{var t;return(t=e?.lookup)!=null?t:{}}),B1=nt(aa,e=>{var t;return(t=e?.headerStructure)!=null?t:[]}),js=Te(aa,e=>{var t;return(t=e?.maxDepth)!=null?t:0}),yn=e=>e.rows,la=Te(yn,e=>e.totalRowCount),H1=Te(yn,e=>e.loading),z1=Te(yn,e=>e.totalTopLevelRowCount),Bn=Te(yn,e=>e.dataRowIdToModelLookup),Ei=Te(yn,e=>e.dataRowIdToIdLookup),dn=Te(yn,e=>e.tree),G1=Te(yn,e=>e.groupingName),kh=Te(yn,e=>e.treeDepths),ca=nt(yn,e=>{const t=Object.entries(e.treeDepths);return t.length===0?1:t.filter(([,n])=>n>0).map(([n])=>Number(n)).sort((n,o)=>o-n)[0]+1}),Go=Te(yn,e=>e.dataRowIds),U1=Te(yn,e=>e?.additionalRowGroups),Po=nt(U1,e=>{var t,n;const o=e?.pinnedRows;return{bottom:o==null||(t=o.bottom)==null?void 0:t.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}}),top:o==null||(n=o.top)==null?void 0:n.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}})}}),W1=Te(Po,e=>{var t,n;return((e==null||(t=e.top)==null?void 0:t.length)||0)+((e==null||(n=e.bottom)==null?void 0:n.length)||0)}),wg=()=>{var e;const t=pr(),n=pe(),o=ae(t,Pt),s=ae(t,la),i=ae(t,js),a=ae(t,W1);let l="grid";return(e=n.experimentalFeatures)!=null&&e.ariaV7&&n.treeData&&(l="treegrid"),{role:l,"aria-colcount":o.length,"aria-rowcount":i+1+a+s,"aria-multiselectable":!n.disableMultipleRowSelection}},q1=e=>{const{classes:t}=e;return Ee({root:["main"]},He,t)},K1=It("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})(()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"})),Q1=f.forwardRef((e,t)=>{var n;const o=pe(),s=q1(o),i=(n=o.experimentalFeatures)!=null&&n.ariaV7?wg:null,a=typeof i=="function"?i():null;return r.jsx(K1,j({ref:t,className:s.root,ownerState:o},a,{children:e.children}))}),jg=e=>e.sorting,cu=Te(jg,e=>e.sortedRows),uu=nt(cu,Bn,(e,t)=>e.map(n=>{var o;return{id:n,model:(o=t[n])!=null?o:{}}})),en=Te(jg,e=>e.sortModel),Y1=nt(en,e=>e.reduce((n,o,s)=>(n[o.field]={sortDirection:o.sort,sortIndex:e.length>1?s+1:void 0},n),{})),du=e=>e.filter,bt=Te(du,e=>e.filterModel);Te(bt,e=>e.quickFilterValues);const X1=e=>e.visibleRowsLookup,Sg=Te(du,e=>e.filteredRowsLookup);Te(du,e=>e.filteredDescendantCountLookup);const mr=nt(X1,uu,(e,t)=>t.filter(n=>e[n.id]!==!1)),Zo=nt(mr,e=>e.map(t=>t.id)),J1=nt(Sg,uu,(e,t)=>t.filter(n=>e[n.id]!==!1)),Z1=nt(J1,e=>e.map(t=>t.id)),Pg=nt(mr,dn,ca,(e,t,n)=>n<2?e:e.filter(o=>{var s;return((s=t[o.id])==null?void 0:s.depth)===0})),kg=Te(mr,e=>e.length),Ig=Te(Pg,e=>e.length),eP=nt(bt,So,(e,t)=>{var n;return(n=e.items)==null?void 0:n.filter(o=>{var s,i;if(!o.field)return!1;const a=t[o.field];if(!(a!=null&&a.filterOperators)||(a==null||(s=a.filterOperators)==null?void 0:s.length)===0)return!1;const l=a.filterOperators.find(u=>u.value===o.operator);return l?!l.InputComponent||o.value!=null&&((i=o.value)==null?void 0:i.toString())!=="":!1})}),tP=nt(eP,e=>e.reduce((n,o)=>(n[o.field]?n[o.field].push(o):n[o.field]=[o],n),{})),ua=e=>e.focus,Qt=Te(ua,e=>e.cell),nP=Te(ua,e=>e.columnHeader);Te(ua,e=>e.columnHeaderFilter);const Ti=Te(ua,e=>e.columnGroupHeader),da=e=>e.tabIndex,Ai=Te(da,e=>e.cell),Eg=Te(da,e=>e.columnHeader);Te(da,e=>e.columnHeaderFilter);const rP=Te(da,e=>e.columnGroupHeader),hu=e=>e.density,oP=Te(hu,e=>e.value),ko=Te(hu,e=>e.factor),Kl=e=>e.columnMenu;function sP(e){const{VirtualScrollerComponent:t,ColumnHeadersProps:n,children:o}=e,s=pr(),i=pe(),a=f.useRef(null),l=ae(s,Pt),u=ae(s,tP),c=ae(s,Y1),d=ae(s,vo),h=ae(s,Eg),p=ae(s,Ai),y=ae(s,rP),m=ae(s,nP),g=ae(s,Ti),v=ae(s,ko),x=ae(s,js),b=ae(s,Kl),C=ae(s,fn),P=ae(s,B1),F=!(y===null&&h===null&&p===null);kt(()=>{s.current.computeSizeAndPublishResizeEvent();const O=a.current;if(typeof ResizeObserver>"u")return()=>{};let S;const N=new ResizeObserver(()=>{S=requestAnimationFrame(()=>{s.current.computeSizeAndPublishResizeEvent()})});return O&&N.observe(O),()=>{S&&window.cancelAnimationFrame(S),O&&N.unobserve(O)}},[s]);const T=f.useRef(null),I=f.useRef(null),R=f.useRef(null);s.current.register("private",{columnHeadersContainerElementRef:I,columnHeadersElementRef:T,virtualScrollerRef:R,mainElementRef:a});const V=!!s.current.getRootDimensions();return r.jsxs(Q1,{ref:a,children:[r.jsx(i.slots.columnHeaders,j({ref:I,innerRef:T,visibleColumns:l,filterColumnLookup:u,sortColumnLookup:c,columnPositions:d,columnHeaderTabIndexState:h,columnGroupHeaderTabIndexState:y,columnHeaderFocus:m,columnGroupHeaderFocus:g,densityFactor:v,headerGroupingMaxDepth:x,columnMenuState:b,columnVisibility:C,columnGroupsHeaderStructure:P,hasOtherElementInTabSequence:F},n)),V&&r.jsx(t,{ref:R}),o]})}function iP(){var e;const t=pe();return t.hideFooter?null:r.jsx(t.slots.footer,j({},(e=t.slotProps)==null?void 0:e.footer))}const Lt="auto-generated-group-node-root",fo=Symbol("mui.id_autogenerated"),aP=()=>({type:"group",id:Lt,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null});function lP(e,t,n="A row was provided without id in the rows prop:"){if(e==null)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join(`
`))}const Mi=(e,t,n)=>{const o=t?t(e):e.id;return lP(o,e,n),o},ai=({rows:e,getRowId:t,loading:n,rowCount:o})=>{const s={type:"full",rows:[]},i={},a={};for(let l=0;l<e.length;l+=1){const u=e[l],c=Mi(u,t);i[c]=u,a[c]=c,s.rows.push(c)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:n,rowCountPropBeforePartialUpdates:o,updates:s,dataRowIdToIdLookup:a,dataRowIdToModelLookup:i}},Tg=({tree:e,rowCountProp:t=0})=>{const n=e[Lt];return Math.max(t,n.children.length+(n.footerId==null?0:1))},Ag=({apiRef:e,rowCountProp:t=0,loadingProp:n,previousTree:o,previousTreeDepths:s})=>{const i=e.current.caches.rows,{tree:a,treeDepths:l,dataRowIds:u,groupingName:c}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:o,previousTreeDepths:s,updates:i.updates,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIdToModelLookup:i.dataRowIdToModelLookup}),d=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:a,treeDepths:l,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIds:u,dataRowIdToModelLookup:i.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},j({},d,{totalRowCount:Math.max(t,d.dataRowIds.length),totalTopLevelRowCount:Tg({tree:d.tree,rowCountProp:t}),groupingName:c,loading:n})},is=e=>e.type==="skeletonRow"||e.type==="footer"||e.type==="group"&&e.isAutoGenerated||e.type==="pinnedRow"&&e.isAutoGenerated,fu=(e,t,n)=>{const o=e[t];if(o.type!=="group")return[];const s=[];for(let i=0;i<o.children.length;i+=1){const a=o.children[i];(!n||!is(e[a]))&&s.push(a);const l=fu(e,a,n);for(let u=0;u<l.length;u+=1)s.push(l[u])}return!n&&o.footerId!=null&&s.push(o.footerId),s},cP=({previousCache:e,getRowId:t,updates:n})=>{var o,s,i;if(e.updates.type==="full")throw new Error("MUI: Unable to prepare a partial update if a full update is not applied yet");const a=new Map;n.forEach(p=>{const y=Mi(p,t,"A row was provided without id when calling updateRows():");a.has(y)?a.set(y,j({},a.get(y),p)):a.set(y,p)});const l={type:"partial",actions:{insert:[...(o=e.updates.actions.insert)!=null?o:[]],modify:[...(s=e.updates.actions.modify)!=null?s:[]],remove:[...(i=e.updates.actions.remove)!=null?i:[]]},idToActionLookup:j({},e.updates.idToActionLookup)},u=j({},e.dataRowIdToModelLookup),c=j({},e.dataRowIdToIdLookup),d={insert:{},modify:{},remove:{}};a.forEach((p,y)=>{const m=l.idToActionLookup[y];if(p._action==="delete"){if(m==="remove"||!u[y])return;m!=null&&(d[m][y]=!0),l.actions.remove.push(y),delete u[y],delete c[y];return}const g=u[y];if(g){m==="remove"?(d.remove[y]=!0,l.actions.modify.push(y)):m==null&&l.actions.modify.push(y),u[y]=j({},g,p);return}m==="remove"?(d.remove[y]=!0,l.actions.insert.push(y)):m==null&&l.actions.insert.push(y),u[y]=p,c[y]=y});const h=Object.keys(d);for(let p=0;p<h.length;p+=1){const y=h[p],m=d[y];Object.keys(m).length>0&&(l.actions[y]=l.actions[y].filter(g=>!m[g]))}return{dataRowIdToModelLookup:u,dataRowIdToIdLookup:c,updates:l,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}};function Mg(e){var t,n;const o=Po(e),s=(o==null||(t=o.top)==null?void 0:t.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0,i=(o==null||(n=o.bottom)==null?void 0:n.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0;return{top:s,bottom:i}}function Rg(e,t){const n=ko(e);return`var(--DataGrid-overlayHeight, ${2*Math.floor(t*n)}px)`}const uP=It("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapper})(({overlayType:e})=>({position:"sticky",top:0,left:0,width:0,height:0,zIndex:e==="loadingOverlay"?5:4})),dP=It("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapperInner})({}),hP=e=>{const{classes:t}=e;return Ee({root:["overlayWrapper"],inner:["overlayWrapperInner"]},He,t)};function fP(e){var t,n;const o=Be(),s=pe(),[i,a]=f.useState(()=>{var d,h;return(d=(h=o.current.getRootDimensions())==null?void 0:h.viewportInnerSize)!=null?d:null}),l=f.useCallback(()=>{var d,h;a((d=(h=o.current.getRootDimensions())==null?void 0:h.viewportInnerSize)!=null?d:null)},[o]);kt(()=>o.current.subscribeEvent("viewportInnerSizeChange",l),[o,l]);let u=(t=i?.height)!=null?t:0;s.autoHeight&&u===0&&(u=Rg(o,s.rowHeight));const c=hP(j({},e,{classes:s.classes}));return i?r.jsx(uP,{className:Ve(c.root),overlayType:e.overlayType,children:r.jsx(dP,j({className:Ve(c.inner),style:{height:u,width:(n=i?.width)!=null?n:0}},e))}):null}function pP(){const e=Be(),t=pe(),n=ae(e,la),o=ae(e,kg),s=ae(e,H1),i=!s&&n===0,a=!s&&n>0&&o===0;let l=null,u="";if(i){var c;l=r.jsx(t.slots.noRowsOverlay,j({},(c=t.slotProps)==null?void 0:c.noRowsOverlay)),u="noRowsOverlay"}if(a){var d;l=r.jsx(t.slots.noResultsOverlay,j({},(d=t.slotProps)==null?void 0:d.noResultsOverlay)),u="noResultsOverlay"}if(s){var h;l=r.jsx(t.slots.loadingOverlay,j({},(h=t.slotProps)==null?void 0:h.loadingOverlay)),u="loadingOverlay"}return l===null?null:r.jsx(fP,{overlayType:u,children:l})}function ha(e){return f.memo(e,bg)}let nl;function mP(){return nl===void 0&&document.createElement("div").focus({get preventScroll(){return nl=!0,!1}}),nl}var Dn=function(e){return e.Cell="cell",e.Row="row",e}(Dn||{}),Ke=function(e){return e.Edit="edit",e.View="view",e}(Ke||{}),Ze=function(e){return e.Edit="edit",e.View="view",e}(Ze||{}),Bt=function(e){return e.And="and",e.Or="or",e}(Bt||{}),$n=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}($n||{}),ln=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(ln||{}),Xn=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(Xn||{}),Vn=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(Vn||{});function Dg(e){return e.field!==void 0}function gP(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function xP(e,t){return e.closest(`.${t}`)}function pu(e){return e.replace(/["\\]/g,"\\$&")}function yP(e,t){return e.querySelector(`[role="columnheader"][data-field="${pu(t)}"]`)}function Fg(e){return`.${H.row}[data-id="${pu(String(e))}"]`}function bP(e,t){return e.querySelector(Fg(t))}function vP(e,{id:t,field:n}){const o=Fg(t),s=`.${H.cell}[data-field="${pu(n)}"]`,i=`${o} ${s}`;return e.querySelector(i)}function Ss(e){return e.target.nodeType===1&&!e.currentTarget.contains(e.target)}function Oe(e,t,n){const o=f.useRef(!0);f.useEffect(()=>{o.current=!1,e.current.register(n,t)},[e,n,t]),o.current&&e.current.register(n,t)}class lo extends Error{}function CP(e,t){const{getRowId:n}=t,o=f.useCallback(m=>({field:m,colDef:e.current.getColumn(m)}),[e]),s=f.useCallback(m=>{const g=e.current.getRow(m);if(!g)throw new lo(`No row with id #${m} found`);return{id:m,columns:e.current.getAllColumns(),row:g}},[e]),i=f.useCallback((m,g)=>{const v=e.current.getRow(m),x=e.current.getRowNode(m);if(!v||!x)throw new lo(`No row with id #${m} found`);const b=Qt(e),C=Ai(e);return{id:m,field:g,row:v,rowNode:x,value:v[g],colDef:e.current.getColumn(g),cellMode:e.current.getCellMode(m,g),api:e.current,hasFocus:b!==null&&b.field===g&&b.id===m,tabIndex:C&&C.field===g&&C.id===m?0:-1}},[e]),a=f.useCallback((m,g)=>{const v=e.current.getColumn(g),x=e.current.getCellValue(m,g),b=e.current.getRow(m),C=e.current.getRowNode(m);if(!b||!C)throw new lo(`No row with id #${m} found`);const P=Qt(e),F=Ai(e),T={id:m,field:g,row:b,rowNode:C,colDef:v,cellMode:e.current.getCellMode(m,g),hasFocus:P!==null&&P.field===g&&P.id===m,tabIndex:F&&F.field===g&&F.id===m?0:-1,value:x,formattedValue:x,isEditable:!1};return v&&v.valueFormatter&&(T.formattedValue=v.valueFormatter({id:m,field:T.field,value:T.value,api:e.current})),T.isEditable=v&&e.current.isCellEditable(T),T},[e]),l=f.useCallback((m,g)=>{const v=e.current.getColumn(g);if(!v||!v.valueGetter){const x=e.current.getRow(m);if(!x)throw new lo(`No row with id #${m} found`);return x[g]}return v.valueGetter(i(m,g))},[e,i]),u=f.useCallback((m,g)=>{var v;const x=fo in m?m[fo]:(v=n?.(m))!=null?v:m.id,b=g.field;return!g||!g.valueGetter?m[b]:g.valueGetter(i(x,b))},[i,n]),c=f.useCallback((m,g)=>{var v;const x=u(m,g);if(!g||!g.valueFormatter)return x;const b=(v=n?n(m):m.id)!=null?v:m[fo],C=g.field;return g.valueFormatter({id:b,field:C,value:x,api:e.current})},[e,n,u]),d=f.useCallback(m=>e.current.rootElementRef.current?yP(e.current.rootElementRef.current,m):null,[e]),h=f.useCallback(m=>e.current.rootElementRef.current?bP(e.current.rootElementRef.current,m):null,[e]),p=f.useCallback((m,g)=>e.current.rootElementRef.current?vP(e.current.rootElementRef.current,{id:m,field:g}):null,[e]);Oe(e,{getCellValue:l,getCellParams:a,getCellElement:p,getRowValue:u,getRowFormattedValue:c,getRowParams:s,getRowElement:h,getColumnHeaderParams:o,getColumnHeaderElement:d},"public")}const wP=["changeReason","unstable_updateValueOnRender"],jP=["column","rowId","editCellState","align","children","colIndex","height","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","isNotVisible","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver","style"],SP=["changeReason","unstable_updateValueOnRender"],Ri={id:-1,field:"__unset__",row:{},rowNode:{id:-1,depth:0,type:"leaf",parent:-1,groupingKey:null},colDef:{type:"string",field:"__unset__",computedWidth:0},cellMode:Ke.View,hasFocus:!1,tabIndex:-1,value:null,formattedValue:"__unset__",isEditable:!1,api:{}},PP=e=>{const{align:t,showRightBorder:n,isEditable:o,isSelected:s,isSelectionMode:i,classes:a}=e,l={root:["cell",`cell--text${An(t)}`,o&&"cell--editable",s&&"selected",n&&"cell--withRightBorder",i&&!o&&"cell--selectionMode","withBorderColor"],content:["cellContent"]};return Ee(l,He,a)},kP=f.forwardRef((e,t)=>{const{column:n,rowId:o,editCellState:s}=e,i=Be(),a=pe(),l=n.field,u=ae(i,()=>{try{const V=i.current.getCellParams(o,l);return V.api=i.current,V}catch(R){if(R instanceof lo)return Ri;throw R}},au),c=ae(i,()=>i.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:o,field:l}));if(u===Ri)return null;const{cellMode:d,hasFocus:h,isEditable:p,value:y,formattedValue:m}=u,g=n.type==="actions",v=(d==="view"||!p)&&!g?u.tabIndex:-1,{classes:x,getCellClassName:b}=a,C=i.current.unstable_applyPipeProcessors("cellClassName",[],{id:o,field:l});n.cellClassName&&C.push(typeof n.cellClassName=="function"?n.cellClassName(u):n.cellClassName),b&&C.push(b(u));let P;if(s==null&&n.renderCell&&(P=n.renderCell(u),C.push(H["cell--withRenderer"]),C.push(x?.["cell--withRenderer"])),s!=null&&n.renderEditCell){const R=i.current.getRowWithUpdatedValues(o,n.field),V=ce(s,wP),O=j({},u,{row:R},V);P=n.renderEditCell(O),C.push(H["cell--editing"]),C.push(x?.["cell--editing"])}const{slots:F}=a,T=F.cell,I=j({},e,{ref:t,field:l,formattedValue:m,hasFocus:h,isEditable:p,isSelected:c,value:y,cellMode:d,children:P,tabIndex:v,className:Ve(C)});return f.createElement(T,I)}),IP=ha(kP),EP=f.forwardRef((e,t)=>{var n,o,s,i;const{column:a,rowId:l,editCellState:u,align:c,colIndex:d,height:h,width:p,className:y,showRightBorder:m,colSpan:g,disableDragEvents:v,isNotVisible:x,onClick:b,onDoubleClick:C,onMouseDown:P,onMouseUp:F,onMouseOver:T,onKeyDown:I,onKeyUp:R,onDragEnter:V,onDragOver:O,style:S}=e,N=ce(e,jP),D=Be(),w=pe(),E=a.field,M=ae(D,()=>{try{const fe=D.current.getCellParams(l,E);return fe.api=D.current,fe}catch(oe){if(oe instanceof lo)return Ri;throw oe}},au),$=ae(D,()=>D.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:l,field:E})),{cellMode:L,hasFocus:_,isEditable:B,value:z,formattedValue:G}=M,J=a.type==="actions"&&((n=(o=a).getActions)==null?void 0:n.call(o,D.current.getRowParams(l)).some(oe=>!oe.props.disabled)),ee=(L==="view"||!B)&&!J?M.tabIndex:-1,{classes:te,getCellClassName:Ce}=w,W=D.current.unstable_applyPipeProcessors("cellClassName",[],{id:l,field:E});a.cellClassName&&W.push(typeof a.cellClassName=="function"?a.cellClassName(M):a.cellClassName),Ce&&W.push(Ce(M));const Q=G??z,le=f.useRef(null),Y=Br(t,le),ne=f.useRef(null),je=(s=w.unstable_cellSelection)!=null?s:!1,Z={align:c,showRightBorder:m,isEditable:B,classes:w.classes,isSelected:$,isSelectionMode:je},ye=PP(Z),xe=f.useCallback(oe=>fe=>{const we=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,we,fe),F&&F(fe)},[D,E,F,l]),Se=f.useCallback(oe=>fe=>{const we=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,we,fe),P&&P(fe)},[D,E,P,l]),ve=f.useCallback((oe,fe)=>we=>{if(!D.current.getRow(l))return;const $e=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,$e,we),fe&&fe(we)},[D,E,l]),Ae=f.useMemo(()=>x?j({padding:0,opacity:0,width:0,border:0},S):j({minWidth:p,maxWidth:p,minHeight:h,maxHeight:h==="auto"?"none":h},S),[p,h,x,S]);if(f.useEffect(()=>{if(!_||L===Ke.Edit)return;const oe=Hi(D.current.rootElementRef.current);if(le.current&&!le.current.contains(oe.activeElement)){const fe=le.current.querySelector('[tabindex="0"]'),we=ne.current||fe||le.current;if(mP())we.focus({preventScroll:!0});else{const $e=D.current.getScrollPosition();we.focus(),D.current.scroll($e)}}},[_,L,D]),M===Ri)return null;let We=N.onFocus,Ge;if(u==null&&a.renderCell&&(Ge=a.renderCell(M),W.push(H["cell--withRenderer"]),W.push(te?.["cell--withRenderer"])),u!=null&&a.renderEditCell){const oe=D.current.getRowWithUpdatedValues(l,a.field),fe=ce(u,SP),we=j({},M,{row:oe},fe);Ge=a.renderEditCell(we),W.push(H["cell--editing"]),W.push(te?.["cell--editing"])}if(Ge===void 0){const oe=Q?.toString();Ge=r.jsx("div",{className:ye.content,title:oe,role:"presentation",children:oe})}f.isValidElement(Ge)&&J&&(Ge=f.cloneElement(Ge,{focusElementRef:ne}));const xt=v?null:{onDragEnter:ve("cellDragEnter",V),onDragOver:ve("cellDragOver",O)},Ie=(i=w.experimentalFeatures)==null?void 0:i.ariaV7;return r.jsx("div",j({ref:Y,className:Ve(y,W,ye.root),role:Ie?"gridcell":"cell","data-field":E,"data-colindex":d,"aria-colindex":d+1,"aria-colspan":g,style:Ae,tabIndex:ee,onClick:ve("cellClick",b),onDoubleClick:ve("cellDoubleClick",C),onMouseOver:ve("cellMouseOver",T),onMouseDown:Se("cellMouseDown"),onMouseUp:xe("cellMouseUp"),onKeyDown:ve("cellKeyDown",I),onKeyUp:ve("cellKeyUp",R)},xt,N,{onFocus:We,children:Ge}))}),Ql=ha(EP),TP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex"],AP=e=>{const{classes:t}=e;return Ee({root:["booleanCell"]},He,t)};function MP(e){const{value:t}=e,n=ce(e,TP),o=Be(),s=pe(),i={classes:s.classes},a=AP(i),l=f.useMemo(()=>t?s.slots.booleanCellTrueIcon:s.slots.booleanCellFalseIcon,[s.slots.booleanCellFalseIcon,s.slots.booleanCellTrueIcon,t]);return r.jsx(l,j({fontSize:"small",className:a.root,titleAccess:o.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":!!t},n))}const RP=f.memo(MP),DP=e=>is(e.rowNode)?"":r.jsx(RP,j({},e)),FP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"],OP=e=>{const{classes:t}=e;return Ee({root:["editBooleanCell"]},He,t)};function _P(e){var t;const{id:n,value:o,field:s,className:i,hasFocus:a,onValueChange:l}=e,u=ce(e,FP),c=Be(),d=f.useRef(null),h=pt(),[p,y]=f.useState(o),m=pe(),g={classes:m.classes},v=OP(g),x=f.useCallback(async b=>{const C=b.target.checked;l&&await l(b,C),y(C),await c.current.setEditCellValue({id:n,field:s,value:C},b)},[c,s,n,l]);return f.useEffect(()=>{y(o)},[o]),kt(()=>{a&&d.current.focus()},[a]),r.jsx("label",j({htmlFor:h,className:Ve(v.root,i)},u,{children:r.jsx(m.slots.baseCheckbox,j({id:h,inputRef:d,checked:!!p,onChange:x,size:"small"},(t=m.slotProps)==null?void 0:t.baseCheckbox))}))}const LP=e=>r.jsx(_P,j({},e)),$P=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],VP=Ye(zf)({fontSize:"inherit"}),NP=e=>{const{classes:t}=e;return Ee({root:["editInputCell"]},He,t)};function BP(e){const{id:t,value:n,field:o,colDef:s,hasFocus:i,inputProps:a,onValueChange:l}=e,u=ce(e,$P),c=s.type==="dateTime",d=Be(),h=f.useRef(),p=f.useMemo(()=>{let P;n==null?P=null:n instanceof Date?P=n:P=new Date((n??"").toString());let F;return P==null||Number.isNaN(P.getTime())?F="":F=new Date(P.getTime()-P.getTimezoneOffset()*60*1e3).toISOString().substr(0,c?16:10),{parsed:P,formatted:F}},[n,c]),[y,m]=f.useState(p),v={classes:pe().classes},x=NP(v),b=f.useCallback(P=>{if(P==="")return null;const[F,T]=P.split("T"),[I,R,V]=F.split("-"),O=new Date;if(O.setFullYear(Number(I),Number(R)-1,Number(V)),O.setHours(0,0,0,0),T){const[S,N]=T.split(":");O.setHours(Number(S),Number(N),0,0)}return O},[]),C=f.useCallback(async P=>{const F=P.target.value,T=b(F);l&&await l(P,T),m({parsed:T,formatted:F}),d.current.setEditCellValue({id:t,field:o,value:T},P)},[d,o,t,l,b]);return f.useEffect(()=>{m(P=>{var F,T;return p.parsed!==P.parsed&&((F=p.parsed)==null?void 0:F.getTime())!==((T=P.parsed)==null?void 0:T.getTime())?p:P})},[p]),kt(()=>{i&&h.current.focus()},[i]),r.jsx(VP,j({inputRef:h,fullWidth:!0,className:x.root,type:c?"datetime-local":"date",inputProps:j({max:c?"9999-12-31T23:59":"9999-12-31"},a),value:y.formatted,onChange:C},u))}const Og=e=>r.jsx(BP,j({},e)),HP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],zP=e=>{const{classes:t}=e;return Ee({root:["editInputCell"]},He,t)},GP=Ye(zf,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})(({theme:e})=>j({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),UP=f.forwardRef((e,t)=>{const n=pe(),{id:o,value:s,field:i,colDef:a,hasFocus:l,debounceMs:u=200,isProcessingProps:c,onValueChange:d}=e,h=ce(e,HP),p=Be(),y=f.useRef(),[m,g]=f.useState(s),v=zP(n),x=f.useCallback(async C=>{const P=C.target.value;d&&await d(C,P);const F=p.current.getColumn(i);let T=P;F.valueParser&&(T=F.valueParser(P,p.current.getCellParams(o,i))),g(T),p.current.setEditCellValue({id:o,field:i,value:T,debounceMs:u,unstable_skipValueParser:!0},C)},[p,u,i,o,d]),b=p.current.unstable_getEditCellMeta(o,i);return f.useEffect(()=>{b?.changeReason!=="debouncedSetEditCellValue"&&g(s)},[b,s]),kt(()=>{l&&y.current.focus()},[l]),r.jsx(GP,j({ref:t,inputRef:y,className:v.root,ownerState:n,fullWidth:!0,type:a.type==="number"?a.type:"text",value:m??"",onChange:x,endAdornment:c?r.jsx(n.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},h))}),WP=e=>r.jsx(UP,j({},e)),Di=e=>e==="Escape",qP=e=>e==="Enter",_g=e=>e==="Tab",Lg=e=>e===" ",KP=e=>e.indexOf("Arrow")===0,QP=e=>e==="Home"||e==="End",YP=e=>e.indexOf("Page")===0;function $g(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}const Fi=e=>QP(e)||KP(e)||YP(e)||Lg(e),XP=e=>!!e.key,JP=e=>_g(e)||Di(e);function Or(e){return e?.type==="singleSelect"}function Yl(e,t,n){if(t===void 0)return;const o=t.find(s=>{const i=n(s);return String(i)===String(e)});return n(o)}const ZP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","getOptionLabel","getOptionValue"],ek=["MenuProps"];function tk(e){return!!e.key}function nk(e){var t,n,o;const s=pe(),{id:i,value:a,field:l,row:u,colDef:c,hasFocus:d,error:h,onValueChange:p,initialOpen:y=s.editMode===Dn.Cell,getOptionLabel:m,getOptionValue:g}=e,v=ce(e,ZP),x=Be(),b=f.useRef(),C=f.useRef(),[P,F]=f.useState(y),I=(n=(((t=s.slotProps)==null?void 0:t.baseSelect)||{}).native)!=null?n:!1,R=((o=s.slotProps)==null?void 0:o.baseSelect)||{},{MenuProps:V}=R,O=ce(R,ek);if(kt(()=>{if(d){var $;($=C.current)==null||$.focus()}},[d]),!Or(c))return null;let S;if(typeof c?.valueOptions=="function"?S=c?.valueOptions({id:i,row:u,field:l}):S=c?.valueOptions,!S)return null;const N=g||c.getOptionValue,D=m||c.getOptionLabel,w=async $=>{if(!Or(c)||!S)return;F(!1);const L=$.target,_=Yl(L.value,S,N);p&&await p($,_),await x.current.setEditCellValue({id:i,field:l,value:_},$)},E=($,L)=>{if(s.editMode===Dn.Row){F(!1);return}if(L==="backdropClick"||Di($.key)){const _=x.current.getCellParams(i,l);x.current.publishEvent("cellEditStop",j({},_,{reason:Di($.key)?ln.escapeKeyDown:ln.cellFocusOut}))}},M=$=>{tk($)&&$.key==="Enter"||F(!0)};return!S||!c?null:r.jsx(s.slots.baseSelect,j({ref:b,inputRef:C,value:a,onChange:w,open:P,onOpen:M,MenuProps:j({onClose:E},V),error:h,native:I,fullWidth:!0},v,O,{children:S.map($=>{var L;const _=N($);return f.createElement(s.slots.baseSelectOption,j({},((L=s.slotProps)==null?void 0:L.baseSelectOption)||{},{native:I,key:_,value:_}),D($))})}))}const rk=e=>r.jsx(nk,j({},e)),ok=["open","target","onClose","children","position","className","onExited"],sk=e=>{const{classes:t}=e;return Ee({root:["menu"]},He,t)},ik=Ye(gc,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})(({theme:e})=>({zIndex:e.zIndex.modal,[`& .${H.menuList}`]:{outline:0}})),ak={"bottom-start":"top left","bottom-end":"top right"};function Vg(e){var t;const{open:n,target:o,onClose:s,children:i,position:a,className:l,onExited:u}=e,c=ce(e,ok),d=Be(),h=pe(),p=sk(h),y=f.useRef(null);kt(()=>{if(n)y.current=document.activeElement instanceof HTMLElement?document.activeElement:null;else{var v,x;(v=y.current)==null||(x=v.focus)==null||x.call(v),y.current=null}},[n]),f.useEffect(()=>{const v=n?"menuOpen":"menuClose";d.current.publishEvent(v,{target:o})},[d,n,o]);const m=v=>x=>{v&&v(),u&&u(x)},g=v=>{v.target&&(o===v.target||o!=null&&o.contains(v.target))||s(v)};return r.jsx(ik,j({as:h.slots.basePopper,className:Ve(l,p.root),ownerState:h,open:n,anchorEl:o,transition:!0,placement:a},c,(t=h.slotProps)==null?void 0:t.basePopper,{children:({TransitionProps:v,placement:x})=>r.jsx(Gf,{onClickAway:g,mouseEvent:"onMouseDown",children:r.jsx(Cl,j({},v,{style:{transformOrigin:ak[x]},onExited:m(v?.onExited),children:r.jsx(de,{children:i})}))})}))}const lk=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"],ck=e=>typeof e.getActions=="function";function uk(e){var t;const{colDef:n,id:o,hasFocus:s,tabIndex:i,position:a="bottom-end",focusElementRef:l}=e,u=ce(e,lk),[c,d]=f.useState(-1),[h,p]=f.useState(!1),y=Be(),m=f.useRef(null),g=f.useRef(null),v=f.useRef(!1),x=f.useRef({}),b=$t(),C=pt(),P=pt(),F=pe();if(!ck(n))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const T=n.getActions(y.current.getRowParams(o)),I=T.filter(M=>!M.props.showInMenu),R=T.filter(M=>M.props.showInMenu),V=I.length+(R.length?1:0);f.useLayoutEffect(()=>{s||Object.entries(x.current).forEach(([M,$])=>{$?.stop({},()=>{delete x.current[M]})})},[s]),f.useEffect(()=>{if(c<0||!m.current||c>=m.current.children.length)return;m.current.children[c].focus({preventScroll:!0})},[c]),f.useEffect(()=>{s||(d(-1),v.current=!1)},[s]),f.useImperativeHandle(l,()=>({focus(){if(!v.current){const M=T.findIndex($=>!$.props.disabled);d(M)}}}),[T]),f.useEffect(()=>{c>=V&&d(V-1)},[c,V]);const O=()=>{p(!0),d(V-1),v.current=!0},S=()=>{p(!1)},N=M=>$=>{x.current[M]=$},D=(M,$)=>L=>{d(M),v.current=!0,$&&$(L)},w=M=>{if(V<=1)return;const $=(_,B)=>{var z;if(_<0||_>T.length)return _;const G=b.direction==="rtl"?-1:1,J=(B==="left"?-1:1)*G;return(z=T[_+J])!=null&&z.props.disabled?$(_+J,B):_+J};let L=c;M.key==="ArrowRight"?L=$(c,"right"):M.key==="ArrowLeft"&&(L=$(c,"left")),!(L<0||L>=V)&&L!==c&&(M.preventDefault(),M.stopPropagation(),d(L))},E=M=>{M.key==="Tab"&&M.preventDefault(),["Tab","Escape"].includes(M.key)&&S()};return r.jsxs("div",j({role:"menu",ref:m,tabIndex:-1,className:H.actionsCell,onKeyDown:w},u,{children:[I.map((M,$)=>f.cloneElement(M,{key:$,touchRippleRef:N($),onClick:D($,M.props.onClick),tabIndex:c===$?i:-1})),R.length>0&&P&&r.jsx(F.slots.baseIconButton,j({ref:g,id:P,"aria-label":y.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?C:void 0,role:"menuitem",size:"small",onClick:O,touchRippleRef:N(P),tabIndex:c===I.length?i:-1},(t=F.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(F.slots.moreActionsIcon,{fontSize:"small"})})),R.length>0&&r.jsx(Vg,{open:h,target:g.current,position:a,onClose:S,children:r.jsx(Uf,{id:C,className:H.menuList,onKeyDown:E,"aria-labelledby":P,variant:"menu",autoFocusItem:!0,children:R.map((M,$)=>f.cloneElement(M,{key:$,closeMenu:S}))})})]}))}const dk=e=>r.jsx(uk,j({},e)),hk=["field","align","width","contentWidth"],fk=e=>{const{align:t,classes:n}=e,o={root:["cell","cellSkeleton",`cell--text${An(t)}`,"withBorderColor"]};return Ee(o,He,n)};function pk(e){const{align:t,width:n,contentWidth:o}=e,s=ce(e,hk),a={classes:pe().classes,align:t},l=fk(a);return r.jsx("div",j({className:l.root,style:{width:n}},s,{children:r.jsx(xc,{width:`${o}%`})}))}function mk(e){return e.vars?e.vars.palette.TableCell.border:e.palette.mode==="light"?my(re(e.palette.divider,1),.88):gy(re(e.palette.divider,1),.68)}const Ih={[`.${H.columnSeparator}, .${H["columnSeparator--resizing"]}`]:{visibility:"visible",width:"auto"}},Eh={[`& .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.menuIcon}`]:{width:"auto",visibility:"visible"}},gk=Ye("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${H.autoHeight}`]:t.autoHeight},{[`&.${H.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${H["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${H["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${H["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${H.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`&.${H["root--disableUserSelection"]} .${H.cell}`]:t["root--disableUserSelection"]},{[`&.${H.autosizing}`]:t.autosizing},{[`& .${H.editBooleanCell}`]:t.editBooleanCell},{[`& .${H["cell--editing"]}`]:t["cell--editing"]},{[`& .${H["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${H["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${H["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${H["cell--withRenderer"]}`]:t["cell--withRenderer"]},{[`& .${H.cell}`]:t.cell},{[`& .${H["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${H["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${H["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${H["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${H["cell--withRightBorder"]}`]:t["cell--withRightBorder"]},{[`& .${H.cellContent}`]:t.cellContent},{[`& .${H.cellCheckbox}`]:t.cellCheckbox},{[`& .${H.cellSkeleton}`]:t.cellSkeleton},{[`& .${H.checkboxInput}`]:t.checkboxInput},{[`& .${H["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${H["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${H["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${H["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${H["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${H["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${H["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${H["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${H["columnHeader--withRightBorder"]}`]:t["columnHeader--withRightBorder"]},{[`& .${H.columnHeader}`]:t.columnHeader},{[`& .${H.headerFilterRow}`]:t.headerFilterRow},{[`& .${H.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${H.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${H.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${H["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${H["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${H.columnSeparator}`]:t.columnSeparator},{[`& .${H.filterIcon}`]:t.filterIcon},{[`& .${H.iconSeparator}`]:t.iconSeparator},{[`& .${H.menuIcon}`]:t.menuIcon},{[`& .${H.menuIconButton}`]:t.menuIconButton},{[`& .${H.menuOpen}`]:t.menuOpen},{[`& .${H.menuList}`]:t.menuList},{[`& .${H["row--editable"]}`]:t["row--editable"]},{[`& .${H["row--editing"]}`]:t["row--editing"]},{[`& .${H["row--dragging"]}`]:t["row--dragging"]},{[`& .${H.row}`]:t.row},{[`& .${H.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${H.rowReorderCell}`]:t.rowReorderCell},{[`& .${H["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${H.sortIcon}`]:t.sortIcon},{[`& .${H.withBorderColor}`]:t.withBorderColor},{[`& .${H.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${H.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${H.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${H["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})(({theme:e})=>{const t=mk(e),n=e.shape.borderRadius;return j({"--unstable_DataGrid-radius":typeof n=="number"?`${n}px`:n,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:re(e.palette.background.default,e.palette.action.disabledOpacity),"--DataGrid-cellOffsetMultiplier":2,flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:t,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflowAnchor:"none",[`&.${H.autoHeight}`]:{height:"auto",[`& .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"}},[`&.${H.autosizing}`]:{[`& .${H.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},[`& .${H.cell} > *`]:{overflow:"visible !important",whiteSpace:"nowrap"},[`& .${H.groupingCriteriaCell}`]:{width:"unset"},[`& .${H.treeDataGroupingCell}`]:{width:"unset"}},[`& .${H["virtualScrollerContent--overflowed"]} .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"},[`& .${H.columnHeader}, & .${H.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${H.columnHeader}:focus-within, & .${H.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:re(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${H.columnHeader}:focus, & .${H.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${H.columnHeaderCheckbox}, & .${H.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${H.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${H["columnHeader--sorted"]} .${H.iconButtonContainer}, & .${H["columnHeader--filtered"]} .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}) .${H.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${H.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden",position:"relative"},[`& .${H.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${H["columnHeader--filledGroup"]} .${H.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]} .${H.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H.headerFilterRow}`]:{borderTop:`1px solid ${t}`},[`& .${H.sortIcon}, & .${H.filterIcon}`]:{fontSize:"inherit"},[`& .${H["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${H["columnHeader--alignCenter"]} .${H.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${H["columnHeader--alignRight"]} .${H.columnHeaderDraggableContainer}, & .${H["columnHeader--alignRight"]} .${H.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${H["columnHeader--alignCenter"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${H["columnHeader--alignRight"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${H["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${H.columnSeparator}`]:{visibility:"hidden",position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:t},"@media (hover: hover)":{[`& .${H.columnHeaders}:hover`]:Ih,[`& .${H.columnHeader}:hover`]:Eh,[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}):hover .${H.sortIcon}`]:{opacity:.5}},"@media (hover: none)":{[`& .${H.columnHeaders}`]:Ih,[`& .${H.columnHeader}`]:Eh},[`& .${H["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${H["columnSeparator--sideRight"]}`]:{right:-12},[`& .${H["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:(e.vars||e).palette.text.primary,"@media (hover: none)":{color:t}},[`&.${H["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${H.iconSeparator}`]:{color:"inherit"},[`& .${H.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`.${H.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${H.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(
                ${e.vars.palette.action.selectedOpacity} + 
                ${e.vars.palette.action.hoverOpacity}
              ))`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${H.cell}`]:{display:"flex",alignItems:"center",borderBottom:"1px solid","&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`&.${H["root--disableUserSelection"]} .${H.cell}`]:{userSelect:"none"},[`& .${H.row}:not(.${H["row--dynamicHeight"]}) > .${H.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${H.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${H.cell}.${H["cell--selectionMode"]}`]:{cursor:"default"},[`& .${H.cell}.${H["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`solid ${(e.vars||e).palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${H["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${H["row--editing"]} .${H.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${H.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${H.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${H.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${H.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${H.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${H.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`.${H.withBorderColor}`]:{borderColor:t},[`& .${H["cell--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["columnHeader--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${H["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${H["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${H.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${H.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${H["columnHeader--dragging"]}, & .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${H.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${H.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${H.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})}),xk=["children","className"],yk=e=>{const{autoHeight:t,density:n,classes:o}=e,s={root:["root",t&&"autoHeight",`root--density${An(n)}`,"withBorderColor"]};return Ee(s,He,o)},bk=f.forwardRef(function(t,n){var o;const s=pe(),{children:i,className:a}=t,l=ce(t,xk),u=pr(),c=ae(u,oP),d=f.useRef(null),h=Br(d,n),p=(o=s.experimentalFeatures)!=null&&o.ariaV7?null:wg,y=typeof p=="function"?p():null,m=j({},s,{density:c}),g=yk(m);u.current.register("public",{rootElementRef:d});const[v,x]=f.useState(!1);return kt(()=>{x(!0)},[]),v?r.jsx(gk,j({ref:h,className:Ve(a,g.root),ownerState:m},y,l,{children:i})):null}),vk=["className"],Ck=e=>{const{classes:t}=e;return Ee({root:["footerContainer","withBorderColor"]},He,t)},wk=It("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),jk=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,vk),i=pe(),a=Ck(i);return r.jsx(wk,j({ref:n,className:Ve(a.root,o),ownerState:i},s))}),Sk=["className"],Pk=e=>{const{classes:t}=e;return Ee({root:["overlay"]},He,t)},kk=It("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),mu=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,Sk),i=pe(),a=Pk(i);return r.jsx(kk,j({ref:n,className:Ve(a.root,o),ownerState:i},s))}),Ik=["className"],Ek=e=>{const{classes:t}=e;return Ee({root:["iconButtonContainer"]},He,t)},Tk=It("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),Ng=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,Ik),i=pe(),a=Ek(i);return r.jsx(Tk,j({ref:n,className:Ve(a.root,o),ownerState:i},s))}),Ak=e=>{const{classes:t}=e;return Ee({icon:["sortIcon"]},He,t)};function Mk(e,t,n,o){let s;const i={};return t==="asc"?s=e.columnSortedAscendingIcon:t==="desc"?s=e.columnSortedDescendingIcon:(s=e.columnUnsortedIcon,i.sortingOrder=o),s?r.jsx(s,j({fontSize:"small",className:n},i)):null}function Rk(e){var t;const{direction:n,index:o,sortingOrder:s}=e,i=Be(),a=pe(),l=j({},e,{classes:a.classes}),u=Ak(l),c=Mk(a.slots,n,u.icon,s);if(!c)return null;const d=r.jsx(a.slots.baseIconButton,j({tabIndex:-1,"aria-label":i.current.getLocaleText("columnHeaderSortIconLabel"),title:i.current.getLocaleText("columnHeaderSortIconLabel"),size:"small"},(t=a.slotProps)==null?void 0:t.baseIconButton,{children:c}));return r.jsxs(Ng,{children:[o!=null&&r.jsx(hs,{badgeContent:o,color:"default",children:d}),o==null&&d]})}const Dk=f.memo(Rk),Fk=e=>{const{classes:t,open:n}=e;return Ee({root:["menuIcon",n&&"menuOpen"],button:["menuIconButton"]},He,t)},Ok=f.memo(e=>{var t,n;const{colDef:o,open:s,columnMenuId:i,columnMenuButtonId:a,iconButtonRef:l}=e,u=Be(),c=pe(),d=j({},e,{classes:c.classes}),h=Fk(d),p=f.useCallback(y=>{y.preventDefault(),y.stopPropagation(),u.current.toggleColumnMenu(o.field)},[u,o.field]);return r.jsx("div",{className:h.root,children:r.jsx(c.slots.baseTooltip,j({title:u.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},(t=c.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx(c.slots.baseIconButton,j({ref:l,tabIndex:-1,className:h.button,"aria-label":u.current.getLocaleText("columnMenuLabel"),size:"small",onClick:p,"aria-haspopup":"menu","aria-expanded":s,"aria-controls":s?i:void 0,id:a},(n=c.slotProps)==null?void 0:n.baseIconButton,{children:r.jsx(c.slots.columnMenuIcon,{fontSize:"small"})}))}))})});function _k({columnMenuId:e,columnMenuButtonId:t,ContentComponent:n,contentComponentProps:o,field:s,open:i,target:a,onExited:l}){const u=Be(),c=u.current.getColumn(s),d=pn(h=>{h&&(h.stopPropagation(),a!=null&&a.contains(h.target))||u.current.hideColumnMenu()});return!a||!c?null:r.jsx(Vg,{placement:`bottom-${c.align==="right"?"start":"end"}`,open:i,target:a,onClose:d,onExited:l,children:r.jsx(n,j({colDef:c,hideMenu:d,open:i,id:e,labelledby:t},o))})}const Lk=["className"],$k=e=>{const{classes:t}=e;return Ee({root:["columnHeaderTitle"]},He,t)},Vk=It("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)"}),Nk=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,Lk),i=pe(),a=$k(i);return r.jsx(Vk,j({ref:n,className:Ve(a.root,o),ownerState:i},s))});function Bk(e){var t;const{label:n,description:o}=e,s=pe(),i=f.useRef(null),[a,l]=f.useState(""),u=f.useCallback(()=>{if(!o&&i!=null&&i.current){const c=gP(i.current);l(c?n:"")}},[o,n]);return r.jsx(s.slots.baseTooltip,j({title:o||a},(t=s.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx(Nk,{onMouseOver:u,ref:i,children:n})}))}const Hk=["resizable","resizing","height","side"];var Bg=function(e){return e.Left="left",e.Right="right",e}(Bg||{});const zk=e=>{const{resizable:t,resizing:n,classes:o,side:s}=e,i={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",s&&`columnSeparator--side${An(s)}`],icon:["iconSeparator"]};return Ee(i,He,o)};function Gk(e){const{height:t,side:n=Bg.Right}=e,o=ce(e,Hk),s=pe(),i=j({},e,{side:n,classes:s.classes}),a=zk(i),l=f.useCallback(u=>{u.preventDefault(),u.stopPropagation()},[]);return r.jsx("div",j({className:a.root,style:{minHeight:t,opacity:s.showColumnVerticalBorder?0:1}},o,{onClick:l,children:r.jsx(s.slots.columnResizeIcon,{className:a.icon})}))}const Uk=f.memo(Gk),Wk=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps"],Hg=f.forwardRef(function(t,n){const{classes:o,columnMenuOpen:s,colIndex:i,height:a,isResizing:l,sortDirection:u,hasFocus:c,tabIndex:d,separatorSide:h,isDraggable:p,headerComponent:y,description:m,width:g,columnMenuIconButton:v=null,columnMenu:x=null,columnTitleIconButtons:b=null,headerClassName:C,label:P,resizable:F,draggableContainerProps:T,columnHeaderSeparatorProps:I}=t,R=ce(t,Wk),V=pr(),O=pe(),S=f.useRef(null),[N,D]=f.useState(s),w=Br(S,n);let E="none";return u!=null&&(E=u==="asc"?"ascending":"descending"),f.useEffect(()=>{N||D(s)},[N,s]),f.useLayoutEffect(()=>{const M=V.current.state.columnMenu;if(c&&!M.open){const L=S.current.querySelector('[tabindex="0"]')||S.current;L?.focus(),V.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[V,c]),r.jsxs("div",j({ref:w,className:Ve(o.root,C),style:{height:a,width:g,minWidth:g,maxWidth:g},role:"columnheader",tabIndex:d,"aria-colindex":i+1,"aria-sort":E,"aria-label":y==null?P:void 0},R,{children:[r.jsxs("div",j({className:o.draggableContainer,draggable:p,role:"presentation"},T,{children:[r.jsxs("div",{className:o.titleContainer,role:"presentation",children:[r.jsx("div",{className:o.titleContainerContent,children:y!==void 0?y:r.jsx(Bk,{label:P,description:m,columnWidth:g})}),b]}),v]})),r.jsx(Uk,j({resizable:!O.disableColumnResize&&!!F,resizing:l,height:a,side:h},I)),x]}))}),qk=e=>{const{colDef:t,classes:n,isDragging:o,sortDirection:s,showRightBorder:i,filterItemsCounter:a}=e,l=s!=null,u=a!=null&&a>0,c=t.type==="number",d={root:["columnHeader",t.headerAlign==="left"&&"columnHeader--alignLeft",t.headerAlign==="center"&&"columnHeader--alignCenter",t.headerAlign==="right"&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",o&&"columnHeader--moving",l&&"columnHeader--sorted",u&&"columnHeader--filtered",c&&"columnHeader--numeric","withBorderColor",i&&"columnHeader--withRightBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return Ee(d,He,n)};function Kk(e){var t,n,o,s;const{colDef:i,columnMenuOpen:a,colIndex:l,headerHeight:u,isResizing:c,sortDirection:d,sortIndex:h,filterItemsCounter:p,hasFocus:y,tabIndex:m,disableReorder:g,separatorSide:v}=e,x=pr(),b=pe(),C=f.useRef(null),P=pt(),F=pt(),T=f.useRef(null),[I,R]=f.useState(a),V=f.useMemo(()=>!b.disableColumnReorder&&!g&&!i.disableReorder,[b.disableColumnReorder,g,i.disableReorder]);let O;i.renderHeader&&(O=i.renderHeader(x.current.getColumnHeaderParams(i.field)));const S=j({},e,{classes:b.classes,showRightBorder:b.showColumnVerticalBorder}),N=qk(S),D=f.useCallback(ee=>te=>{Ss(te)||x.current.publishEvent(ee,x.current.getColumnHeaderParams(i.field),te)},[x,i.field]),w=f.useMemo(()=>({onClick:D("columnHeaderClick"),onDoubleClick:D("columnHeaderDoubleClick"),onMouseOver:D("columnHeaderOver"),onMouseOut:D("columnHeaderOut"),onMouseEnter:D("columnHeaderEnter"),onMouseLeave:D("columnHeaderLeave"),onKeyDown:D("columnHeaderKeyDown"),onFocus:D("columnHeaderFocus"),onBlur:D("columnHeaderBlur")}),[D]),E=f.useMemo(()=>V?{onDragStart:D("columnHeaderDragStart"),onDragEnter:D("columnHeaderDragEnter"),onDragOver:D("columnHeaderDragOver"),onDragEnd:D("columnHeaderDragEnd")}:{},[V,D]),M=f.useMemo(()=>({onMouseDown:D("columnSeparatorMouseDown"),onDoubleClick:D("columnSeparatorDoubleClick")}),[D]);f.useEffect(()=>{I||R(a)},[I,a]);const $=f.useCallback(()=>{R(!1)},[]),L=!b.disableColumnMenu&&!i.disableColumnMenu&&r.jsx(Ok,{colDef:i,columnMenuId:P,columnMenuButtonId:F,open:I,iconButtonRef:T}),_=r.jsx(_k,{columnMenuId:P,columnMenuButtonId:F,field:i.field,open:a,target:T.current,ContentComponent:b.slots.columnMenu,contentComponentProps:(t=b.slotProps)==null?void 0:t.columnMenu,onExited:$}),B=(n=i.sortingOrder)!=null?n:b.sortingOrder,z=r.jsxs(f.Fragment,{children:[!b.disableColumnFilter&&r.jsx(b.slots.columnHeaderFilterIconButton,j({field:i.field,counter:p},(o=b.slotProps)==null?void 0:o.columnHeaderFilterIconButton)),i.sortable&&!i.hideSortIcons&&r.jsx(Dk,{direction:d,index:h,sortingOrder:B})]});f.useLayoutEffect(()=>{const ee=x.current.state.columnMenu;if(y&&!ee.open){var te;const W=C.current.querySelector('[tabindex="0"]')||C.current;W?.focus(),(te=x.current.columnHeadersContainerElementRef)!=null&&te.current&&(x.current.columnHeadersContainerElementRef.current.scrollLeft=0)}},[x,y]);const G=typeof i.headerClassName=="function"?i.headerClassName({field:i.field,colDef:i}):i.headerClassName,J=(s=i.headerName)!=null?s:i.field;return r.jsx(Hg,j({ref:C,classes:N,columnMenuOpen:a,colIndex:l,height:u,isResizing:c,sortDirection:d,hasFocus:y,tabIndex:m,separatorSide:v,isDraggable:V,headerComponent:O,description:i.description,elementId:i.field,width:i.computedWidth,columnMenuIconButton:L,columnTitleIconButtons:z,headerClassName:G,label:J,resizable:!b.disableColumnResize&&!!i.resizable,"data-field":i.field,columnMenu:_,draggableContainerProps:E,columnHeaderSeparatorProps:M},w))}const as=()=>({items:[],logicOperator:Bt.And,quickFilterValues:[],quickFilterLogicOperator:Bt.And}),Th=1e3;class Qk{constructor(t=Th){this.timeouts=new Map,this.cleanupTimeout=Th,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const s=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,s)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Yk{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}var En=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e}(En||{});class Xk{}function Jk(e){let t=0;return function(o,s,i,a){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Yk:new Qk);const[l]=f.useState(new Xk),u=f.useRef(null),c=f.useRef();c.current=i;const d=f.useRef(null);if(!u.current&&c.current){const h=(p,y,m)=>{if(!y.defaultMuiPrevented){var g;(g=c.current)==null||g.call(c,p,y,m)}};u.current=o.current.subscribeEvent(s,h,a),t+=1,d.current={cleanupToken:t},e.registry.register(l,()=>{var p;(p=u.current)==null||p.call(u),u.current=null,d.current=null},d.current)}else!c.current&&u.current&&(u.current(),u.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));f.useEffect(()=>{if(!u.current&&c.current){const h=(p,y,m)=>{if(!y.defaultMuiPrevented){var g;(g=c.current)==null||g.call(c,p,y,m)}};u.current=o.current.subscribeEvent(s,h,a)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var h;(h=u.current)==null||h.call(u),u.current=null}},[o,s,a])}}const Zk={registry:null},me=Jk(Zk),eI={isFirst:!0};function tt(e,t,n){me(e,t,n,eI)}function Et(e,t){const n=f.useRef(null);if(n.current)return n.current;const o=e.current.getLogger(t);return n.current=o,o}function tI(e){return typeof e=="number"&&!Number.isNaN(e)}function zg(e){return typeof e=="function"}function gu(e){return typeof e=="object"&&e!==null}function nI(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}function li(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const Co=(e,t,n)=>Math.max(t,Math.min(n,e));function _r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(!_r(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;for(let i=0;i<s.length;i+=1){const a=s[i];if(!_r(a[1],t.get(a[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),o=n.length;if(o!==Object.keys(t).length)return!1;for(let s=0;s<o;s+=1)if(!Object.prototype.hasOwnProperty.call(t,n[s]))return!1;for(let s=0;s<o;s+=1){const i=n[s];if(!_r(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function rI(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function oI(e,t,n){const o=rI(e);return()=>t+(n-t)*o()}function Gg(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const sI=(e,t,n,o,s)=>{const i=Et(e,"useNativeEventListener"),[a,l]=f.useState(!1),u=f.useRef(o),c=f.useCallback(d=>u.current&&u.current(d),[]);f.useEffect(()=>{u.current=o},[o]),f.useEffect(()=>{let d;if(zg(t)?d=t():d=t&&t.current?t.current:null,d&&n&&!a){i.debug(`Binding native ${n} event`),d.addEventListener(n,c,s);const h=d;l(!0);const p=()=>{i.debug(`Clearing native ${n} event`),h.removeEventListener(n,c,s)};e.current.subscribeEvent("unmount",p)}},[t,c,n,a,i,s,e])},Ps=e=>{const t=f.useRef(!0);t.current&&(t.current=!1,e())},iI=100,aI=e=>e?0:100,Ug=(e,t)=>t>0&&e>0?Math.ceil(e/t):0;On(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error");const Wg=e=>({page:0,pageSize:e?0:100}),lI=(e,t=0)=>t===0?e:Math.max(Math.min(e,t-1),0),qg=(e,t)=>{if(t===En.DataGrid&&e>iI)throw new Error(["MUI: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`))},xu=e=>e.pagination,tn=Te(xu,e=>e.paginationModel),co=Te(xu,e=>e.rowCount),cI=Te(tn,e=>e.page),Kg=Te(tn,e=>e.pageSize),uI=Te(Kg,co,(e,t)=>Ug(t,e)),yu=nt(tn,dn,ca,mr,Pg,(e,t,n,o,s)=>{const i=s.length,a=Math.min(e.pageSize*e.page,i-1),l=Math.min(a+e.pageSize-1,i-1);if(a===-1||l===-1)return null;if(n<2)return{firstRowIndex:a,lastRowIndex:l};const u=s[a],c=l-a+1,d=o.findIndex(m=>m.id===u.id);let h=d,p=0;for(;h<o.length&&p<=c;){var y;const m=o[h],g=(y=t[m.id])==null?void 0:y.depth;g===void 0?h+=1:((p<c||g>0)&&(h+=1),g===0&&(p+=1))}return{firstRowIndex:d,lastRowIndex:h-1}}),dI=nt(mr,yu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Qg=nt(Zo,yu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),ls=e=>e.preferencePanel;var $r=function(e){return e.filters="filters",e.columns="columns",e}($r||{});const cs=e=>e.rowsMeta,nn=e=>e.rowSelection,hI=Te(nn,e=>e.length),fI=nt(nn,Bn,(e,t)=>new Map(e.map(n=>[n,t[n]]))),Oi=nt(nn,e=>e.reduce((t,n)=>(t[n]=n,t),{})),pI=On(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Yg=(e,t)=>t&&e.length>1?(pI(),[e[0]]):e,Ah=(e,t)=>n=>j({},n,{sorting:j({},n.sorting,{sortModel:Yg(e,t)})}),mI=e=>e==="desc",gI=(e,t)=>{const n=t.current.getColumn(e.field);if(!n)return null;const o=mI(e.sort)?(...i)=>-1*n.sortComparator(...i):n.sortComparator;return{getSortCellParams:i=>({id:i,field:n.field,rowNode:t.current.getRowNode(i),value:t.current.getCellValue(i,n.field),api:t.current}),comparator:o}},xI=(e,t,n)=>e.reduce((o,s,i)=>{if(o!==0)return o;const a=t.params[i],l=n.params[i];return o=s.comparator(a.value,l.value,a,l),o},0),yI=(e,t)=>{const n=e.map(o=>gI(o,t)).filter(o=>!!o);return n.length===0?null:o=>o.map(s=>({node:s,params:n.map(i=>i.getSortCellParams(s.id))})).sort((s,i)=>xI(n,s,i)).map(s=>s.node.id)},Mh=(e,t)=>{const n=e.indexOf(t);return!t||n===-1||n+1===e.length?e[0]:e[n+1]},bu=(e,t)=>e==null&&t!=null?-1:t==null&&e!=null?1:e==null&&t==null?0:null,bI=new Intl.Collator,vI=(e,t)=>{const n=bu(e,t);return n!==null?n:typeof e=="string"?bI.compare(e.toString(),t.toString()):e-t},Xg=(e,t)=>{const n=bu(e,t);return n!==null?n:Number(e)-Number(t)},Jg=(e,t)=>{const n=bu(e,t);return n!==null?n:e>t?1:e<t?-1:0},Zg=e=>e.headerFiltering,CI=Te(Zg,e=>e.editing),wI=Te(Zg,e=>e.menuOpen),jI=(e,t)=>{const n={enabled:!t.disableVirtualization,enabledForColumns:!0};return j({},e,{virtualization:n})};function SI(e,t){const n=i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabled:i})}))};Oe(e,{unstable_setVirtualization:n,unstable_setColumnVirtualization:i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabledForColumns:i})}))}},"public"),f.useEffect(()=>{n(!t.disableVirtualization)},[t.disableVirtualization])}const ex=e=>e.virtualization,PI=Te(ex,e=>e.enabled),tx=Te(ex,e=>e.enabledForColumns),kI=e=>{const{classes:t}=e;return Ee({icon:["filterIcon"]},He,t)};function II(e){var t,n;const{counter:o,field:s,onClick:i}=e,a=Be(),l=pe(),u=j({},e,{classes:l.classes}),c=kI(u),d=ae(a,ls),h=pt(),p=pt(),y=f.useCallback(v=>{v.preventDefault(),v.stopPropagation();const{open:x,openedPanelValue:b}=ls(a.current.state);x&&b===$r.filters?a.current.hideFilterPanel():a.current.showFilterPanel(void 0,p,h),i&&i(a.current.getColumnHeaderParams(s),v)},[a,s,i,p,h]);if(!o)return null;const m=d.open&&d.labelId===h,g=r.jsx(l.slots.baseIconButton,j({id:h,onClick:y,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?p:void 0},(t=l.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(l.slots.columnFilteredIcon,{className:c.icon,fontSize:"small"})}));return r.jsx(l.slots.baseTooltip,j({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(o),enterDelay:1e3},(n=l.slotProps)==null?void 0:n.baseTooltip,{children:r.jsxs(Ng,{children:[o>1&&r.jsx(hs,{badgeContent:o,color:"default",children:g}),o===1&&g]})}))}const EI=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],TI=e=>{const{classes:t}=e;return Ee({root:["checkboxInput"]},He,t)},AI=f.forwardRef(function(t,n){var o;const{field:s,id:i,value:a,rowNode:l,hasFocus:u,tabIndex:c}=t,d=ce(t,EI),h=Be(),p=pe(),y={classes:p.classes},m=TI(y),g=f.useRef(null),v=f.useRef(null),x=Br(g,n),b=h.current.getCellElement(i,s),C=I=>{const R={value:I.target.checked,id:i};h.current.publishEvent("rowSelectionCheckboxChange",R,I)};f.useLayoutEffect(()=>{c===0&&b&&(b.tabIndex=-1)},[b,c]),f.useEffect(()=>{if(u){var I;const R=(I=g.current)==null?void 0:I.querySelector("input");R?.focus({preventScroll:!0})}else v.current&&v.current.stop({})},[u]);const P=f.useCallback(I=>{Lg(I.key)&&I.stopPropagation()},[]);if(l.type==="footer"||l.type==="pinnedRow")return null;const F=h.current.isRowSelectable(i),T=h.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return r.jsx(p.slots.baseCheckbox,j({ref:x,tabIndex:c,checked:a,onChange:C,className:m.root,inputProps:{"aria-label":T},onKeyDown:P,disabled:!F,touchRippleRef:v},(o=p.slotProps)==null?void 0:o.baseCheckbox,d))}),MI=AI,RI=["field","colDef"],DI=e=>{const{classes:t}=e;return Ee({root:["checkboxInput"]},He,t)},FI=f.forwardRef(function(t,n){var o;const s=ce(t,RI),[,i]=f.useState(!1),a=Be(),l=pe(),u={classes:l.classes},c=DI(u),d=ae(a,Eg),h=ae(a,nn),p=ae(a,Zo),y=ae(a,Qg),m=f.useMemo(()=>typeof l.isRowSelectable!="function"?h:h.filter(R=>a.current.getRow(R)?l.isRowSelectable(a.current.getRowParams(R)):!1),[a,l.isRowSelectable,h]),g=f.useMemo(()=>(!l.pagination||!l.checkboxSelectionVisibleOnly?p:y).reduce((V,O)=>(V[O]=!0,V),{}),[l.pagination,l.checkboxSelectionVisibleOnly,y,p]),v=f.useMemo(()=>m.filter(R=>g[R]).length,[m,g]),x=v>0&&v<Object.keys(g).length,b=v>0,C=R=>{const V={value:R.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",V)},P=d!==null&&d.field===t.field?0:-1;f.useLayoutEffect(()=>{const R=a.current.getColumnHeaderElement(t.field);P===0&&R&&(R.tabIndex=-1)},[P,a,t.field]);const F=f.useCallback(R=>{R.key===" "&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!b})},[a,b]),T=f.useCallback(()=>{i(R=>!R)},[]);f.useEffect(()=>a.current.subscribeEvent("rowSelectionChange",T),[a,T]);const I=a.current.getLocaleText(b?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return r.jsx(l.slots.baseCheckbox,j({ref:n,indeterminate:x,checked:b,onChange:C,className:c.root,inputProps:{"aria-label":I},tabIndex:P,onKeyDown:F},(o=l.slotProps)==null?void 0:o.baseCheckbox,s))}),Rh=Xe(r.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),Dh=Xe(r.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),Fh=Xe(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),Oh=Xe(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),OI=Xe(r.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),_h=Xe(r.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),_I=Xe(r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");Xe(r.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");Xe(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const LI=Xe(r.jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),$I=Xe(r.jsx("path",{d:"M11 19V5h2v14z"}),"Separator"),VI=Xe(r.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),NI=Xe(r.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),BI=Xe(r.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),HI=Xe(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),rl=Xe(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Lh=Xe(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),zI=Xe(r.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),GI=Xe(r.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),$h=Xe(r.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),UI=Xe(r.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),WI=Xe(r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),qI=Xe(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),KI=Xe(r.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),QI=Xe(r.jsx("g",{children:r.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),YI=Xe(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");Xe(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const XI=Xe(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),JI=["hideMenu","colDef","id","labelledby","className","children","open"],ZI=Ye(Uf)(()=>({minWidth:248})),eE=f.forwardRef(function(t,n){const{hideMenu:o,id:s,labelledby:i,className:a,children:l,open:u}=t,c=ce(t,JI),d=f.useCallback(h=>{_g(h.key)&&h.preventDefault(),JP(h.key)&&o(h)},[o]);return r.jsx(ZI,j({id:s,ref:n,className:Ve(H.menuList,a),"aria-labelledby":i,onKeyDown:d,autoFocus:u},c,{children:l}))}),tE=["displayOrder"],nE=e=>{const t=pr(),{defaultSlots:n,defaultSlotProps:o,slots:s={},slotProps:i={},hideMenu:a,colDef:l,addDividers:u=!0}=e,c=f.useMemo(()=>j({},n,s),[n,s]),d=f.useMemo(()=>{if(!i||Object.keys(i).length===0)return o;const y=j({},i);return Object.entries(o).forEach(([m,g])=>{y[m]=j({},g,i[m]||{})}),y},[o,i]),h=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),p=f.useMemo(()=>{const y=Object.keys(n);return Object.keys(s).filter(m=>!y.includes(m))},[s,n]);return f.useMemo(()=>{const g=Array.from(new Set([...h,...p])).filter(v=>c[v]!=null).sort((v,x)=>{const b=d[v],C=d[x],P=Number.isFinite(b?.displayOrder)?b.displayOrder:100,F=Number.isFinite(C?.displayOrder)?C.displayOrder:100;return P-F});return g.reduce((v,x,b)=>{let C={colDef:l,onClick:a};const P=d[x];if(P){const F=ce(P,tE);C=j({},C,F)}return u&&b!==g.length-1?[...v,[c[x],C],[St,{}]]:[...v,[c[x],C]]},[])},[u,l,h,a,c,d,p])};function rE(e){const{colDef:t,onClick:n}=e,o=Be(),s=pe(),l=Pt(o).filter(c=>c.disableColumnMenu!==!0).length===1,u=f.useCallback(c=>{l||(o.current.setColumnVisibility(t.field,!1),n(c))},[o,t.field,n,l]);return s.disableColumnSelector||t.hideable===!1?null:r.jsxs(se,{onClick:u,disabled:l,children:[r.jsx(Fe,{children:r.jsx(s.slots.columnMenuHideIcon,{fontSize:"small"})}),r.jsx(ie,{children:o.current.getLocaleText("columnMenuHideColumn")})]})}function oE(e){const{onClick:t}=e,n=Be(),o=pe(),s=f.useCallback(i=>{t(i),n.current.showPreferences($r.columns)},[n,t]);return o.disableColumnSelector?null:r.jsxs(se,{onClick:s,children:[r.jsx(Fe,{children:r.jsx(o.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),r.jsx(ie,{children:n.current.getLocaleText("columnMenuManageColumns")})]})}function sE(e){return r.jsxs(f.Fragment,{children:[r.jsx(rE,j({},e)),r.jsx(oE,j({},e))]})}function iE(e){const{colDef:t,onClick:n}=e,o=Be(),s=pe(),i=f.useCallback(a=>{n(a),o.current.showFilterPanel(t.field)},[o,t.field,n]);return s.disableColumnFilter||!t.filterable?null:r.jsxs(se,{onClick:i,children:[r.jsx(Fe,{children:r.jsx(s.slots.columnMenuFilterIcon,{fontSize:"small"})}),r.jsx(ie,{children:o.current.getLocaleText("columnMenuFilter")})]})}function aE(e){var t;const{colDef:n,onClick:o}=e,s=Be(),i=ae(s,en),a=pe(),l=f.useMemo(()=>{if(!n)return null;const h=i.find(p=>p.field===n.field);return h?.sort},[n,i]),u=(t=n.sortingOrder)!=null?t:a.sortingOrder,c=f.useCallback(h=>{o(h);const p=h.currentTarget.getAttribute("data-value")||null;s.current.sortColumn(n,p===l?null:p)},[s,n,o,l]);if(!n||!n.sortable||!u.some(h=>!!h))return null;const d=h=>{const p=s.current.getLocaleText(h);return typeof p=="function"?p(n):p};return r.jsxs(f.Fragment,{children:[u.includes("asc")&&l!=="asc"?r.jsxs(se,{onClick:c,"data-value":"asc",children:[r.jsx(Fe,{children:r.jsx(a.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),r.jsx(ie,{children:d("columnMenuSortAsc")})]}):null,u.includes("desc")&&l!=="desc"?r.jsxs(se,{onClick:c,"data-value":"desc",children:[r.jsx(Fe,{children:r.jsx(a.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),r.jsx(ie,{children:d("columnMenuSortDesc")})]}):null,u.includes(null)&&l!=null?r.jsxs(se,{onClick:c,children:[r.jsx(Fe,{}),r.jsx(ie,{children:s.current.getLocaleText("columnMenuUnsort")})]}):null]})}const lE=["defaultSlots","defaultSlotProps","slots","slotProps"],cE={columnMenuSortItem:aE,columnMenuFilterItem:iE,columnMenuColumnsItem:sE},uE={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},dE=f.forwardRef(function(t,n){const{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}=t,l=ce(t,lE),u=nE(j({},l,{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}));return r.jsx(eE,j({ref:n},l,{children:u.map(([c,d],h)=>r.jsx(c,j({},d),h))}))}),hE=f.forwardRef(function(t,n){return r.jsx(dE,j({},t,{ref:n,defaultSlots:cE,defaultSlotProps:uE}))}),fE=["className"],pE=e=>{const{classes:t}=e;return Ee({root:["panelContent"]},He,t)},mE=It("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function nx(e){const{className:t}=e,n=ce(e,fE),o=pe(),s=pE(o);return r.jsx(mE,j({className:Ve(t,s.root),ownerState:o},n))}const gE=["className"],xE=e=>{const{classes:t}=e;return Ee({root:["panelFooter"]},He,t)},yE=It("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})(({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"}));function rx(e){const{className:t}=e,n=ce(e,gE),o=pe(),s=xE(o);return r.jsx(yE,j({className:Ve(t,s.root),ownerState:o},n))}const bE=["className"],vE=e=>{const{classes:t}=e;return Ee({root:["panelHeader"]},He,t)},CE=It("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,t)=>t.panelHeader})(({theme:e})=>({padding:e.spacing(1)}));function wE(e){const{className:t}=e,n=ce(e,bE),o=pe(),s=vE(o);return r.jsx(CE,j({className:Ve(t,s.root),ownerState:o},n))}const jE=["className","slotProps"],SE=e=>{const{classes:t}=e;return Ee({root:["panelWrapper"]},He,t)},PE=Ye("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),kE=()=>!0,ox=f.forwardRef(function(t,n){const{className:o,slotProps:s={}}=t,i=ce(t,jE),a=pe(),l=SE(a);return r.jsx(xy,j({open:!0,disableEnforceFocus:!0,isEnabled:kE},s.TrapFocus,{children:r.jsx(PE,j({ref:n,tabIndex:-1,className:Ve(o,l.root),ownerState:a},i))}))}),IE=!1,EE=["sort","searchPredicate","autoFocusSearchField","disableHideAllButton","disableShowAllButton","getTogglableColumns"],TE=e=>{const{classes:t}=e;return Ee({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},He,t)},AE=Ye("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,t)=>t.columnsPanel})({padding:"8px 0px 8px 8px"}),ME=Ye("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,t)=>t.columnsPanelRow})(({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${yy.root}`]:{marginRight:e.spacing(.5)}}));Ye(Pe)({justifyContent:"flex-end"});const Vh=new Intl.Collator,RE=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1;function DE(e){var t,n,o;const s=Be(),i=f.useRef(null),a=ae(s,In),l=ae(s,fn),u=pe(),[c,d]=f.useState(""),h=TE(u),{sort:p,searchPredicate:y=RE,autoFocusSearchField:m=!0,disableHideAllButton:g=!1,disableShowAllButton:v=!1,getTogglableColumns:x}=e,b=ce(e,EE),C=f.useMemo(()=>{switch(p){case"asc":return[...a].sort((S,N)=>Vh.compare(S.headerName||S.field,N.headerName||N.field));case"desc":return[...a].sort((S,N)=>-Vh.compare(S.headerName||S.field,N.headerName||N.field));default:return a}},[a,p]),P=S=>{const{name:N}=S.target;s.current.setColumnVisibility(N,l[N]===!1)},F=f.useCallback(S=>{const N=fn(s),D=j({},N),w=x?x(a):null;return a.forEach(E=>{E.hideable&&(w==null||w.includes(E.field))&&(S?delete D[E.field]:D[E.field]=!1)}),s.current.setColumnVisibilityModel(D)},[s,a,x]),T=f.useCallback(S=>{d(S.target.value)},[]),I=f.useMemo(()=>{const S=x?x(C):null,N=S?C.filter(({field:D})=>S.includes(D)):C;return c?N.filter(D=>y(D,c.toLowerCase())):N},[C,c,y,x]),R=f.useRef(null);f.useEffect(()=>{m?i.current.focus():R.current&&typeof R.current.focus=="function"&&R.current.focus()},[m]);let V=!1;const O=S=>V===!1&&S.hideable!==!1?(V=!0,!0):!1;return r.jsxs(ox,j({},b,{children:[r.jsx(wE,{children:r.jsx(u.slots.baseTextField,j({label:s.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:s.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:i,value:c,onChange:T,variant:"standard",fullWidth:!0},(t=u.slotProps)==null?void 0:t.baseTextField))}),r.jsx(nx,{children:r.jsx(AE,{className:h.root,ownerState:u,children:I.map(S=>{var N;return r.jsxs(ME,{className:h.columnsPanelRow,ownerState:u,children:[r.jsx(hn,{control:r.jsx(u.slots.baseSwitch,j({disabled:S.hideable===!1,checked:l[S.field]!==!1,onClick:P,name:S.field,size:"small",inputRef:O(S)?R:void 0},(N=u.slotProps)==null?void 0:N.baseSwitch)),label:S.headerName||S.field}),!u.disableColumnReorder&&IE]},S.field)})})}),v&&g?null:r.jsxs(rx,{children:[g?r.jsx("span",{}):r.jsx(u.slots.baseButton,j({onClick:()=>F(!1)},(n=u.slotProps)==null?void 0:n.baseButton,{disabled:g,children:s.current.getLocaleText("columnsPanelHideAllButton")})),v?null:r.jsx(u.slots.baseButton,j({onClick:()=>F(!0)},(o=u.slotProps)==null?void 0:o.baseButton,{disabled:v,children:s.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))}const FE=["children","className","classes"],OE=Qn("MuiDataGrid",["panel","paper"]),_E=Ye(gc,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})(({theme:e})=>({zIndex:e.zIndex.modal})),LE=Ye(de,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex"})),$E=f.forwardRef((e,t)=>{const{children:n,className:o}=e,s=ce(e,FE),i=Be(),a=pe(),l=OE,[u,c]=f.useState(!1),d=f.useCallback(()=>{i.current.hidePreferences()},[i]),h=f.useCallback(g=>{Di(g.key)&&i.current.hidePreferences()},[i]),p=f.useMemo(()=>[{name:"flip",enabled:!0,options:{rootBoundary:"document"}},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{c(!0)},effect:()=>()=>{c(!1)}}],[]),[y,m]=f.useState(null);return f.useEffect(()=>{var g;const v=(g=i.current.rootElementRef)==null||(g=g.current)==null?void 0:g.querySelector(`.${H.columnHeaders}`);v&&m(v)},[i]),y?r.jsx(_E,j({ref:t,placement:"bottom-start",className:Ve(o,l.panel),ownerState:a,anchorEl:y,modifiers:p},s,{children:r.jsx(Gf,{mouseEvent:"onMouseUp",onClickAway:d,children:r.jsx(LE,{className:l.paper,ownerState:a,elevation:8,onKeyDown:h,children:u&&n})})})):null}),VE=f.forwardRef(function(t,n){var o,s,i;const a=Be(),l=ae(a,In),u=pe(),c=ae(a,ls),d=a.current.unstable_applyPipeProcessors("preferencePanel",null,(o=c.openedPanelValue)!=null?o:$r.filters);return r.jsx(u.slots.panel,j({ref:n,as:u.slots.basePopper,open:l.length>0&&c.open,id:c.panelId,"aria-labelledby":c.labelId},(s=u.slotProps)==null?void 0:s.panel,t,(i=u.slotProps)==null?void 0:i.basePopper,{children:d}))}),NE=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],BE=["InputComponentProps"],HE=e=>{const{classes:t}=e;return Ee({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},He,t)},zE=Ye("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})(({theme:e})=>({display:"flex",padding:e.spacing(1)})),GE=Ye("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})(({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)})),UE=Ye("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,t)=>t.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),WE=Ye("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),qE=Ye("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:120}),KE=Ye("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),QE=e=>{switch(e){case Bt.And:return"filterPanelOperatorAnd";case Bt.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `logicOperator` property in the `GridFilterPanel`.")}},Lo=e=>e.headerName||e.field,Nh=new Intl.Collator,YE=f.forwardRef(function(t,n){var o,s,i,a,l,u,c,d,h,p;const{item:y,hasMultipleFilters:m,deleteFilter:g,applyFilterChanges:v,multiFilterOperator:x,showMultiFilterOperators:b,disableMultiFilterOperator:C,applyMultiFilterOperatorChanges:P,focusElementRef:F,logicOperators:T=[Bt.And,Bt.Or],columnsSort:I,filterColumns:R,deleteIconProps:V={},logicOperatorInputProps:O={},operatorInputProps:S={},columnInputProps:N={},valueInputProps:D={}}=t,w=ce(t,NE),E=Be(),M=ae(E,vg),$=ae(E,bt),L=pt(),_=pt(),B=pt(),z=pt(),G=pe(),J=HE(G),ee=f.useRef(null),te=f.useRef(null),Ce=m&&T.length>0,W=((o=G.slotProps)==null?void 0:o.baseFormControl)||{},le=(i=(((s=G.slotProps)==null?void 0:s.baseSelect)||{}).native)!=null?i:!0,Y=((a=G.slotProps)==null?void 0:a.baseInputLabel)||{},ne=((l=G.slotProps)==null?void 0:l.baseSelectOption)||{},{InputComponentProps:je}=D,Z=ce(D,BE),ye=f.useMemo(()=>{if(R===void 0||typeof R!="function")return M;const Ie=R({field:y.field,columns:M,currentFilters:$?.items||[]});return M.filter(oe=>Ie.includes(oe.field))},[R,$?.items,M,y.field]),xe=f.useMemo(()=>{switch(I){case"asc":return ye.sort((Ie,oe)=>Nh.compare(Lo(Ie),Lo(oe)));case"desc":return ye.sort((Ie,oe)=>-Nh.compare(Lo(Ie),Lo(oe)));default:return ye}},[ye,I]),Se=y.field?E.current.getColumn(y.field):null,ve=f.useMemo(()=>{var Ie;return!y.operator||!Se?null:(Ie=Se.filterOperators)==null?void 0:Ie.find(oe=>oe.value===y.operator)},[y,Se]),Ae=f.useCallback(Ie=>{const oe=Ie.target.value,fe=E.current.getColumn(oe);if(fe.field===Se.field)return;const we=fe.filterOperators.find(st=>st.value===y.operator)||fe.filterOperators[0],$e=!we.InputComponent||we.InputComponent!==ve?.InputComponent||fe.type!==Se.type;v(j({},y,{field:oe,operator:we.value,value:$e?void 0:y.value}))},[E,v,y,Se,ve]),We=f.useCallback(Ie=>{const oe=Ie.target.value,fe=Se?.filterOperators.find($e=>$e.value===oe),we=!(fe!=null&&fe.InputComponent)||fe?.InputComponent!==ve?.InputComponent;v(j({},y,{operator:oe,value:we?void 0:y.value}))},[v,y,Se,ve]),Ge=f.useCallback(Ie=>{const oe=Ie.target.value===Bt.And.toString()?Bt.And:Bt.Or;P(oe)},[P]),xt=()=>{G.disableMultipleColumnsFiltering?y.value===void 0?g(y):v(j({},y,{value:void 0})):g(y)};return f.useImperativeHandle(F,()=>({focus:()=>{if(ve!=null&&ve.InputComponent){var Ie;ee==null||(Ie=ee.current)==null||Ie.focus()}else te.current.focus()}}),[ve]),r.jsxs(zE,j({ref:n,className:J.root,"data-id":y.id,ownerState:G},w,{children:[r.jsx(GE,j({variant:"standard",as:G.slots.baseFormControl},W,V,{className:Ve(J.deleteIcon,W.className,V.className),ownerState:G,children:r.jsx(G.slots.baseIconButton,j({"aria-label":E.current.getLocaleText("filterPanelDeleteIconLabel"),title:E.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:xt,size:"small"},(u=G.slotProps)==null?void 0:u.baseIconButton,{children:r.jsx(G.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),r.jsx(UE,j({variant:"standard",as:G.slots.baseFormControl},W,O,{sx:j({display:Ce?"flex":"none",visibility:b?"visible":"hidden"},W.sx||{},O.sx||{}),className:Ve(J.logicOperatorInput,W.className,O.className),ownerState:G,children:r.jsx(G.slots.baseSelect,j({inputProps:{"aria-label":E.current.getLocaleText("filterPanelLogicOperator")},value:x,onChange:Ge,disabled:!!C||T.length===1,native:le},(c=G.slotProps)==null?void 0:c.baseSelect,{children:T.map(Ie=>f.createElement(G.slots.baseSelectOption,j({},ne,{native:le,key:Ie.toString(),value:Ie.toString()}),E.current.getLocaleText(QE(Ie))))}))})),r.jsxs(WE,j({variant:"standard",as:G.slots.baseFormControl},W,N,{className:Ve(J.columnInput,W.className,N.className),ownerState:G,children:[r.jsx(G.slots.baseInputLabel,j({},Y,{htmlFor:L,id:_,children:E.current.getLocaleText("filterPanelColumns")})),r.jsx(G.slots.baseSelect,j({labelId:_,id:L,label:E.current.getLocaleText("filterPanelColumns"),value:y.field||"",onChange:Ae,native:le},(d=G.slotProps)==null?void 0:d.baseSelect,{children:xe.map(Ie=>f.createElement(G.slots.baseSelectOption,j({},ne,{native:le,key:Ie.field,value:Ie.field}),Lo(Ie)))}))]})),r.jsxs(qE,j({variant:"standard",as:G.slots.baseFormControl},W,S,{className:Ve(J.operatorInput,W.className,S.className),ownerState:G,children:[r.jsx(G.slots.baseInputLabel,j({},Y,{htmlFor:B,id:z,children:E.current.getLocaleText("filterPanelOperator")})),r.jsx(G.slots.baseSelect,j({labelId:z,label:E.current.getLocaleText("filterPanelOperator"),id:B,value:y.operator,onChange:We,native:le,inputRef:te},(h=G.slotProps)==null?void 0:h.baseSelect,{children:Se==null||(p=Se.filterOperators)==null?void 0:p.map(Ie=>f.createElement(G.slots.baseSelectOption,j({},ne,{native:le,key:Ie.value,value:Ie.value}),Ie.label||E.current.getLocaleText(`filterOperator${An(Ie.value)}`)))}))]})),r.jsx(KE,j({variant:"standard",as:G.slots.baseFormControl},W,Z,{className:Ve(J.valueInput,W.className,Z.className),ownerState:G,children:ve!=null&&ve.InputComponent?r.jsx(ve.InputComponent,j({apiRef:E,item:y,applyValue:v,focusElementRef:ee},ve.InputComponentProps,je)):null}))]}))});class vu{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new vu}start(t,n){this.clear(),this.currentId=setTimeout(n,t)}}function Cu(){const e=iu(vu.create).current;return yg(e.disposeEffect),e}const XE=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","clearButton","InputProps","variant"];function wn(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,tabIndex:u,disabled:c,clearButton:d,InputProps:h,variant:p="standard"}=e,y=ce(e,XE),m=Cu(),[g,v]=f.useState((t=o.value)!=null?t:""),[x,b]=f.useState(!1),C=pt(),P=pe(),F=f.useCallback(T=>{const{value:I}=T.target;v(String(I)),b(!0),m.start(P.filterDebounceMs,()=>{const R=j({},o,{value:I,fromInput:C});s(R),b(!1)})},[C,s,o,P.filterDebounceMs,m]);return f.useEffect(()=>{if(o.fromInput!==C||o.value===void 0){var I;v(String((I=o.value)!=null?I:""))}},[C,o]),r.jsx(P.slots.baseTextField,j({id:C,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:g,onChange:F,variant:p,type:i||"text",InputProps:j({},x||d?{endAdornment:x?r.jsx(P.slots.loadIcon,{fontSize:"small",color:"action"}):d}:{},{disabled:c},h,{inputProps:j({tabIndex:u},h?.inputProps)}),InputLabelProps:{shrink:!0},inputRef:l},y,(n=P.slotProps)==null?void 0:n.baseTextField))}const JE=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function Xr(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,InputProps:u,clearButton:c,tabIndex:d,disabled:h}=e,p=ce(e,JE),y=Cu(),[m,g]=f.useState((t=o.value)!=null?t:""),[v,x]=f.useState(!1),b=pt(),C=pe(),P=f.useCallback(F=>{const T=F.target.value;g(String(T)),x(!0),y.start(C.filterDebounceMs,()=>{s(j({},o,{value:T})),x(!1)})},[s,o,C.filterDebounceMs,y]);return f.useEffect(()=>{var F;const T=(F=o.value)!=null?F:"";g(String(T))},[o.value]),r.jsx(C.slots.baseTextField,j({fullWidth:!0,id:b,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:m,onChange:P,variant:"standard",type:i||"text",InputLabelProps:{shrink:!0},inputRef:l,InputProps:j({},v||c?{endAdornment:v?r.jsx(C.slots.loadIcon,{fontSize:"small",color:"action"}):c}:{},{disabled:h},u,{inputProps:j({max:i==="datetime-local"?"9999-12-31T23:59":"9999-12-31",tabIndex:d},u?.inputProps)})},p,(n=C.slotProps)==null?void 0:n.baseTextField))}const ZE=["item","applyValue","type","apiRef","focusElementRef","getOptionLabel","getOptionValue","placeholder","tabIndex","label","variant","isFilterActive","clearButton","InputLabelProps"],eT=({column:{valueOptions:e,field:t},OptionComponent:n,getOptionLabel:o,getOptionValue:s,isSelectNative:i,baseSelectOptionProps:a})=>(typeof e=="function"?["",...e({field:t})]:["",...e||[]]).map(u=>{const c=s(u),d=o(u);return f.createElement(n,j({},a,{native:i,key:c,value:c}),d)}),tT=Ye("div")({display:"flex",alignItems:"flex-end",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Bh(e){var t,n,o,s,i,a,l,u;const{item:c,applyValue:d,type:h,apiRef:p,focusElementRef:y,getOptionLabel:m,getOptionValue:g,placeholder:v,tabIndex:x,label:b,variant:C="standard",clearButton:P}=e,F=ce(e,ZE),[T,I]=f.useState((t=c.value)!=null?t:""),R=pt(),V=pt(),O=pe(),S=(n=(o=O.slotProps)==null||(o=o.baseSelect)==null?void 0:o.native)!=null?n:!0;let N=null;if(c.field){const L=p.current.getColumn(c.field);Or(L)&&(N=L)}const D=g||((s=N)==null?void 0:s.getOptionValue),w=m||((i=N)==null?void 0:i.getOptionLabel),E=f.useMemo(()=>{if(N)return typeof N.valueOptions=="function"?N.valueOptions({field:N.field}):N.valueOptions},[N]),M=f.useCallback(L=>{let _=L.target.value;_=Yl(_,E,D),I(String(_)),d(j({},c,{value:_}))},[E,D,d,c]);if(f.useEffect(()=>{var L;let _;if(E!==void 0){if(_=Yl(c.value,E,D),_!==c.value){d(j({},c,{value:_}));return}}else _=c.value;_=(L=_)!=null?L:"",I(String(_))},[c,E,d,D]),!Or(N)||!Or(N))return null;const $=b??p.current.getLocaleText("filterPanelInputLabel");return r.jsxs(tT,{children:[r.jsxs(O.slots.baseFormControl,{children:[r.jsx(O.slots.baseInputLabel,j({},(a=O.slotProps)==null?void 0:a.baseInputLabel,{id:V,htmlFor:R,shrink:!0,variant:C,children:$})),r.jsx(O.slots.baseSelect,j({id:R,label:$,labelId:V,value:T,onChange:M,variant:C,type:h||"text",inputProps:{tabIndex:x,ref:y,placeholder:v??p.current.getLocaleText("filterPanelInputPlaceholder")},native:S,notched:C==="outlined"?!0:void 0},F,(l=O.slotProps)==null?void 0:l.baseSelect,{children:eT({column:N,OptionComponent:O.slots.baseSelectOption,getOptionLabel:w,getOptionValue:D,isSelectNative:S,baseSelectOptionProps:(u=O.slotProps)==null?void 0:u.baseSelectOption})}))]}),P]})}const nT=["item","applyValue","apiRef","focusElementRef","isFilterActive","clearButton","tabIndex","label","variant","InputLabelProps"],rT=Ye("div")({display:"flex",alignItems:"center",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function oT(e){var t,n,o,s;const{item:i,applyValue:a,apiRef:l,focusElementRef:u,clearButton:c,tabIndex:d,label:h,variant:p="standard"}=e,y=ce(e,nT),[m,g]=f.useState(i.value||""),v=pe(),x=pt(),b=pt(),C=((t=v.slotProps)==null?void 0:t.baseSelect)||{},P=(n=C.native)!=null?n:!0,F=((o=v.slotProps)==null?void 0:o.baseSelectOption)||{},T=f.useCallback(R=>{const V=R.target.value;g(V),a(j({},i,{value:V}))},[a,i]);f.useEffect(()=>{g(i.value||"")},[i.value]);const I=h??l.current.getLocaleText("filterPanelInputLabel");return r.jsxs(rT,{children:[r.jsxs(v.slots.baseFormControl,{fullWidth:!0,children:[r.jsx(v.slots.baseInputLabel,j({},(s=v.slotProps)==null?void 0:s.baseInputLabel,{id:x,shrink:!0,variant:p,children:I})),r.jsxs(v.slots.baseSelect,j({labelId:x,id:b,label:I,value:m,onChange:T,variant:p,notched:p==="outlined"?!0:void 0,native:P,displayEmpty:!0,inputProps:{ref:u,tabIndex:d}},y,C,{children:[r.jsx(v.slots.baseSelectOption,j({},F,{native:P,value:"",children:l.current.getLocaleText("filterValueAny")})),r.jsx(v.slots.baseSelectOption,j({},F,{native:P,value:"true",children:l.current.getLocaleText("filterValueTrue")})),r.jsx(v.slots.baseSelectOption,j({},F,{native:P,value:"false",children:l.current.getLocaleText("filterValueFalse")}))]}))]}),c]})}const sT=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],Hh=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(Math.random()*1e5)}),iT=f.forwardRef(function(t,n){var o,s;const i=Be(),a=pe(),l=ae(i,bt),u=ae(i,vg),c=f.useRef(null),d=f.useRef(null),{logicOperators:h=[Bt.And,Bt.Or],columnsSort:p,filterFormProps:y,getColumnForNewFilter:m,disableAddFilterButton:g=!1,disableRemoveAllButton:v=!1}=t,x=ce(t,sT),b=i.current.upsertFilterItem,C=f.useCallback(S=>{i.current.setFilterLogicOperator(S)},[i]),P=f.useCallback(()=>{let S;if(m&&typeof m=="function"){const N=m({currentFilters:l?.items||[],columns:u});if(N===null)return null;S=u.find(({field:D})=>D===N)}else S=u.find(N=>{var D;return(D=N.filterOperators)==null?void 0:D.length});return S?Hh(S):null},[l?.items,u,m]),F=f.useCallback(()=>{if(m===void 0||typeof m!="function")return P();const S=l.items.length?l.items:[P()].filter(Boolean),N=m({currentFilters:S,columns:u});if(N===null)return null;const D=u.find(({field:w})=>w===N);return D?Hh(D):null},[l.items,u,m,P]),T=f.useMemo(()=>l.items.length?l.items:(d.current||(d.current=P()),d.current?[d.current]:[]),[l.items,P]),I=T.length>1,R=()=>{const S=F();S&&i.current.upsertFilterItems([...T,S])},V=f.useCallback(S=>{const N=T.length===1;i.current.deleteFilterItem(S),N&&i.current.hideFilterPanel()},[i,T.length]),O=()=>{T.length===1&&T[0].value===void 0&&(i.current.deleteFilterItem(T[0]),i.current.hideFilterPanel()),i.current.setFilterModel(j({},l,{items:[]}))};return f.useEffect(()=>{h.length>0&&l.logicOperator&&!h.includes(l.logicOperator)&&C(h[0])},[h,C,l.logicOperator]),f.useEffect(()=>{T.length>0&&c.current.focus()},[T.length]),r.jsxs(ox,j({ref:n},x,{children:[r.jsx(nx,{children:T.map((S,N)=>r.jsx(YE,j({item:S,applyFilterChanges:b,deleteFilter:V,hasMultipleFilters:I,showMultiFilterOperators:N>0,multiFilterOperator:l.logicOperator,disableMultiFilterOperator:N!==1,applyMultiFilterOperatorChanges:C,focusElementRef:N===T.length-1?c:null,logicOperators:h,columnsSort:p},y),S.id==null?N:S.id))}),!a.disableMultipleColumnsFiltering&&!(g&&v)?r.jsxs(rx,{children:[g?r.jsx("span",{}):r.jsx(a.slots.baseButton,j({onClick:R,startIcon:r.jsx(a.slots.filterPanelAddIcon,{})},(o=a.slotProps)==null?void 0:o.baseButton,{children:i.current.getLocaleText("filterPanelAddFilter")})),v?null:r.jsx(a.slots.baseButton,j({onClick:O,startIcon:r.jsx(a.slots.filterPanelRemoveAllIcon,{})},(s=a.slotProps)==null?void 0:s.baseButton,{children:i.current.getLocaleText("filterPanelRemoveAll")}))]}):null]}))}),aT=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function sx(e){const{item:t,applyValue:n,type:o,apiRef:s,focusElementRef:i,color:a,error:l,helperText:u,size:c,variant:d}=e,h=ce(e,aT),p={color:a,error:l,helperText:u,size:c,variant:d},[y,m]=f.useState(t.value||[]),g=pt(),v=pe();f.useEffect(()=>{var b;const C=(b=t.value)!=null?b:[];m(C.map(String))},[t.value]);const x=f.useCallback((b,C)=>{m(C.map(String)),n(j({},t,{value:[...C]}))},[n,t]);return r.jsx(Wf,j({multiple:!0,freeSolo:!0,options:[],filterOptions:(b,C)=>{const{inputValue:P}=C;return P==null||P===""?[]:[P]},id:g,value:y,onChange:x,renderTags:(b,C)=>b.map((P,F)=>r.jsx(v.slots.baseChip,j({variant:"outlined",size:"small",label:P},C({index:F})))),renderInput:b=>{var C;return r.jsx(v.slots.baseTextField,j({},b,{label:s.current.getLocaleText("filterPanelInputLabel"),placeholder:s.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},b.InputLabelProps,{shrink:!0}),inputRef:i,type:o||"text"},p,(C=v.slotProps)==null?void 0:C.baseTextField))}},h))}const lT=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant","getOptionLabel","getOptionValue"],cT=by();function uT(e){var t,n;const{item:o,applyValue:s,apiRef:i,focusElementRef:a,color:l,error:u,helperText:c,size:d,variant:h="standard",getOptionLabel:p,getOptionValue:y}=e,m=ce(e,lT),g={color:l,error:u,helperText:c,size:d,variant:h},v=pt(),x=pe();let b=null;if(o.field){const O=i.current.getColumn(o.field);Or(O)&&(b=O)}const C=y||((t=b)==null?void 0:t.getOptionValue),P=p||((n=b)==null?void 0:n.getOptionLabel),F=f.useCallback((O,S)=>C(O)===C(S),[C]),T=f.useMemo(()=>{var O;return(O=b)!=null&&O.valueOptions?typeof b.valueOptions=="function"?b.valueOptions({field:b.field}):b.valueOptions:[]},[b]),I=f.useMemo(()=>T?.map(C),[T,C]),R=f.useMemo(()=>Array.isArray(o.value)?T!==void 0?o.value.map(S=>I?.findIndex(N=>N===S)).filter(S=>S>=0).map(S=>T[S]):o.value:[],[o.value,T,I]);f.useEffect(()=>{(!Array.isArray(o.value)||R.length!==o.value.length)&&s(j({},o,{value:R.map(C)}))},[o,R,s,C]);const V=f.useCallback((O,S)=>{s(j({},o,{value:S.map(C)}))},[s,o,C]);return r.jsx(Wf,j({multiple:!0,options:T,isOptionEqualToValue:F,filterOptions:cT,id:v,value:R,onChange:V,getOptionLabel:P,renderTags:(O,S)=>O.map((N,D)=>r.jsx(x.slots.baseChip,j({variant:"outlined",size:"small",label:P(N)},S({index:D})))),renderInput:O=>{var S;return r.jsx(x.slots.baseTextField,j({},O,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},O.InputLabelProps,{shrink:!0}),inputRef:a,type:"singleSelect"},g,(S=x.slotProps)==null?void 0:S.baseTextField))}},m))}const dT=["hideMenu","options"],hT=["hideMenu","options"];function fT(e){const t=Be(),{hideMenu:n,options:o}=e,s=ce(e,dT);return r.jsx(se,j({onClick:()=>{t.current.exportDataAsCsv(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportCSV")}))}function pT(e){const t=Be(),{hideMenu:n,options:o}=e,s=ce(e,hT);return r.jsx(se,j({onClick:()=>{t.current.exportDataAsPrint(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportPrint")}))}const mT=["className","selectedRowCount"],gT=e=>{const{classes:t}=e;return Ee({root:["selectedRowCount"]},He,t)},xT=It("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),yT=f.forwardRef(function(t,n){const{className:o,selectedRowCount:s}=t,i=ce(t,mT),a=Be(),l=pe(),u=gT(l),c=a.current.getLocaleText("footerRowSelected")(s);return r.jsx(xT,j({ref:n,className:Ve(u.root,o),ownerState:l},i,{children:c}))}),bT=f.forwardRef(function(t,n){var o,s;const i=Be(),a=pe(),l=ae(i,z1),u=ae(i,hI),c=ae(i,Ig),d=!a.hideFooterSelectedRowCount&&u>0?r.jsx(yT,{selectedRowCount:u}):r.jsx("div",{}),h=!a.hideFooterRowCount&&!a.pagination?r.jsx(a.slots.footerRowCount,j({},(o=a.slotProps)==null?void 0:o.footerRowCount,{rowCount:l,visibleRowCount:c})):null,p=a.pagination&&!a.hideFooterPagination&&a.slots.pagination&&r.jsx(a.slots.pagination,j({},(s=a.slotProps)==null?void 0:s.pagination));return r.jsxs(jk,j({ref:n},t,{children:[d,h,p]}))});function vT(){var e,t;const n=pe();return r.jsxs(f.Fragment,{children:[r.jsx(n.slots.preferencesPanel,j({},(e=n.slotProps)==null?void 0:e.preferencesPanel)),n.slots.toolbar&&r.jsx(n.slots.toolbar,j({},(t=n.slotProps)==null?void 0:t.toolbar))]})}const CT=f.forwardRef(function(t,n){return r.jsx(mu,j({ref:n},t,{children:r.jsx(Ue,{})}))}),wT=f.forwardRef(function(t,n){const s=Be().current.getLocaleText("noRowsLabel");return r.jsx(mu,j({ref:n},t,{children:s}))}),jT=Ye(vy)(({theme:e})=>({[`& .${Vu.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${Vu.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),ST=f.forwardRef(function(t,n){const o=Be(),s=pe(),i=ae(o,tn),a=ae(o,co),l=f.useMemo(()=>Math.floor(a/(i.pageSize||1)),[a,i.pageSize]),u=f.useCallback(p=>{const y=Number(p.target.value);o.current.setPageSize(y)},[o]),c=f.useCallback((p,y)=>{o.current.setPage(y)},[o]),h=(p=>{for(let y=0;y<s.pageSizeOptions.length;y+=1){const m=s.pageSizeOptions[y];if(typeof m=="number"){if(m===p)return!0}else if(m.value===p)return!0}return!1})(i.pageSize)?s.pageSizeOptions:[];return r.jsx(jT,j({ref:n,component:"div",count:a,page:i.page<=l?i.page:l,rowsPerPageOptions:h,rowsPerPage:i.pageSize,onPageChange:c,onRowsPerPageChange:u},o.current.getLocaleText("MuiTablePagination"),t))}),PT=["className","rowCount","visibleRowCount"],kT=e=>{const{classes:t}=e;return Ee({root:["rowCount"]},He,t)},IT=It("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)})),ET=f.forwardRef(function(t,n){const{className:o,rowCount:s,visibleRowCount:i}=t,a=ce(t,PT),l=Be(),u=pe(),c=kT(u);if(s===0)return null;const d=i<s?l.current.getLocaleText("footerTotalVisibleRows")(i,s):s.toLocaleString();return r.jsxs(IT,j({ref:n,className:Ve(c.root,o),ownerState:u},a,{children:[l.current.getLocaleText("footerTotalRows")," ",d]}))}),_i=(e,t)=>{let n,o;return t.pagination&&t.paginationMode==="client"?(o=yu(e),n=dI(e)):(n=mr(e),n.length===0?o=null:o={firstRowIndex:0,lastRowIndex:n.length-1}),{rows:n,range:o}},Wr=(e,t)=>{const n=_i(e,t);return f.useMemo(()=>({rows:n.rows,range:n.range}),[n.rows,n.range])},Xl={current:null};function ks(e){return e.isInternal=!0,e}function Li(e){return e!==void 0&&e.isInternal===!0}function TT(e){return ks((t,n)=>{const o=e(t,n);return o&&(s=>o(s.value,s.row,n,Xl.current))})}function Is(e){return e.map(t=>j({},t,{getApplyFilterFn:TT(t.getApplyFilterFnV7),getApplyFilterFnV7:ks(t.getApplyFilterFnV7)}))}function ix(e){return ks((t,n,o)=>{const s=e(t,n,o);return s&&(i=>s(i.value,i.row,n,o))})}function ax(e){return{current:e.current.getPublicApi()}}let $o;function AT(){if($o!==void 0)return $o;try{$o=new Function("return true")()}catch{$o=!1}return $o}const Jl=(e,t)=>{const n=j({},e);if(n.id==null&&(n.id=Math.round(Math.random()*1e5)),n.operator==null){const o=So(t)[n.field];n.operator=o&&o.filterOperators[0].value}return n},MT=On(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),RT=On("MUI: The `id` field is required on `filterModel.items` when you use multiple filters.","error"),DT=On("MUI: The `operator` field is required on `filterModel.items`, one or more of your filtering item has no `operator` provided.","error"),lx=(e,t,n)=>{const o=e.items.length>1;let s;o&&t?(MT(),s=[e.items[0]]):s=e.items;const i=o&&s.some(l=>l.id==null),a=s.some(l=>l.operator==null);return i&&RT(),a&&DT(),a||i?j({},e,{items:s.map(l=>Jl(l,n))}):e.items!==s?j({},e,{items:s}):e},zh=(e,t,n)=>o=>j({},o,{filterModel:lx(e,t,n)}),or=e=>typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,cx=(e,t)=>{if(!e.field||!e.operator)return null;const n=t.current.getColumn(e.field);if(!n)return null;let o;if(n.valueParser){var s;const y=n.valueParser;o=Array.isArray(e.value)?(s=e.value)==null?void 0:s.map(m=>y(m)):y(e.value)}else o=e.value;const{ignoreDiacritics:i}=t.current.rootProps;i&&(o=or(o));const a=j({},e,{value:o}),l=n.filterOperators;if(!(l!=null&&l.length))throw new Error(`MUI: No filter operators found for column '${n.field}'.`);const u=l.find(y=>y.value===a.operator);if(!u)throw new Error(`MUI: No filter operator found for column '${n.field}' and operator value '${a.operator}'.`);const c=!Li(u.getApplyFilterFn),d=!Li(u.getApplyFilterFnV7),h=ax(t);if(u.getApplyFilterFnV7&&!(c&&!d)){const y=u.getApplyFilterFnV7(a,n);return typeof y!="function"?null:{v7:!0,item:a,fn:m=>{let g=t.current.getRowValue(m,n);return i&&(g=or(g)),y(g,m,n,h)}}}const p=u.getApplyFilterFn(a,n);return typeof p!="function"?null:{v7:!1,item:a,fn:y=>{const m=t.current.getCellParams(y,a.field);Xl.current=h,i&&(m.value=or(m.value));const g=p(m);return Xl.current=null,g}}};let Gh=1;const FT=(e,t,n)=>{const{items:o}=e,s=o.map(l=>cx(l,t)).filter(l=>!!l);if(s.length===0)return null;if(n||!AT())return(l,u)=>{const c={};for(let d=0;d<s.length;d+=1){const h=s[d];(!u||u(h.item.field))&&(c[h.item.id]=h.v7?h.fn(l):h.fn(t.current.getRowId(l)))}return c};const i=new Function("getRowId","appliers","row","shouldApplyFilter",`"use strict";
${s.map((l,u)=>`const shouldApply${u} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(l.item.field)});`).join(`
`)}

const result$$ = {
${s.map((l,u)=>`  ${JSON.stringify(String(l.item.id))}: !shouldApply${u}
    ? false
    : ${l.v7?`appliers[${u}].fn(row)`:`appliers[${u}].fn(getRowId(row))`},`).join(`
`)}
};

return result$$;`.replaceAll("$$",String(Gh)));return Gh+=1,(l,u)=>i(t.current.getRowId,s,l,u)},OT=(e,t)=>{var n,o,s;const i=(n=(o=e.quickFilterValues)==null?void 0:o.filter(Boolean))!=null?n:[];if(i.length===0)return null;const l=((s=e.quickFilterExcludeHiddenColumns)!=null?s:!1)?ia(t):qn(t),u=[],{ignoreDiacritics:c}=t.current.rootProps,d=ax(t);return l.forEach(h=>{const p=t.current.getColumn(h),y=p?.getApplyQuickFilterFn,m=p?.getApplyQuickFilterFnV7,g=!Li(y),v=!Li(m);m&&!(g&&!v)?u.push({column:p,appliers:i.map(x=>{const b=c?or(x):x;return{v7:!0,fn:m(b,p,d)}})}):y&&u.push({column:p,appliers:i.map(x=>{const b=c?or(x):x;return{v7:!1,fn:y(b,p,d)}})})}),function(p,y){const m={},g={};e:for(let x=0;x<i.length;x+=1){const b=i[x];for(let C=0;C<u.length;C+=1){const{column:P,appliers:F}=u[C],{field:T}=P;if(y&&!y(T))continue;const I=F[x];let R=t.current.getRowValue(p,P);if(I.fn!==null)if(I.v7){if(c&&(R=or(R)),I.fn(R,p,P,d)){m[b]=!0;continue e}}else{var v;const V=(v=g[T])!=null?v:t.current.getCellParams(t.current.getRowId(p),T);if(c&&(V.value=or(V.value)),g[T]=V,I.fn(V)){m[b]=!0;continue e}}}m[b]=!1}return m}},_T=(e,t,n)=>{const o=FT(e,t,n),s=OT(e,t);return function(a,l,u){var c,d;u.passingFilterItems=(c=o?.(a,l))!=null?c:null,u.passingQuickFilterValues=(d=s?.(a,l))!=null?d:null}},Uh=e=>e!=null,LT=(e,t,n)=>(e.cleanedFilterItems||(e.cleanedFilterItems=n.filter(o=>cx(o,t)!==null)),e.cleanedFilterItems),$T=(e,t,n,o,s)=>{const i=LT(s,o,n.items),a=e.filter(Uh),l=t.filter(Uh);if(a.length>0){var u;const d=p=>a.some(y=>y[p.id]);if(((u=n.logicOperator)!=null?u:as().logicOperator)===Bt.And){if(!i.every(d))return!1}else if(!i.some(d))return!1}if(l.length>0&&n.quickFilterValues!=null){var c;const d=p=>l.some(y=>y[p]);if(((c=n.quickFilterLogicOperator)!=null?c:as().quickFilterLogicOperator)===Bt.And){if(!n.quickFilterValues.every(d))return!1}else if(!n.quickFilterValues.some(d))return!1}return!0},Wh=ks(e=>{if(!e)return null;const t=new RegExp(li(e),"i");return(n,o,s,i)=>{let a=i.current.getRowFormattedValue(o,s);return i.current.ignoreDiacritics&&(a=or(a)),a!=null?t.test(a.toString()):!1}}),VT=(e=!1)=>Is([{value:"contains",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(li(n),"i");return s=>s!=null?o.test(String(s)):!1},InputComponent:wn},{value:"equals",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?o.compare(n,s.toString())===0:!1},InputComponent:wn},{value:"startsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`^${li(n)}.*$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:wn},{value:"endsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`.*${li(n)}$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:wn},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t===""||t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!==""&&t!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:t=>{if(!Array.isArray(t.value)||t.value.length===0)return null;const n=e?t.value:t.value.map(s=>s.trim()),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?n.some(i=>o.compare(i,s.toString()||"")===0):!1},InputComponent:sx}]),mn={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:vI,type:"string",align:"left",filterOperators:VT(),renderEditCell:WP,getApplyQuickFilterFn:ix(Wh),getApplyQuickFilterFnV7:Wh},NT=()=>Is([{value:"is",getApplyFilterFnV7:e=>{if(!e.value)return null;const t=e.value==="true";return n=>!!n===t},InputComponent:oT}]);function BT({value:e,api:t}){return e?t.getLocaleText("booleanCellTrueLabel"):t.getLocaleText("booleanCellFalseLabel")}const HT=e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}},ux=j({},mn,{type:"boolean",align:"center",headerAlign:"center",renderCell:DP,renderEditCell:LP,sortComparator:Xg,valueFormatter:BT,filterOperators:NT(),getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,aggregable:!1,pastedValueParser:e=>HT(e)}),Jn="__check__",Io=j({},ux,{field:Jn,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,valueGetter:e=>Oi(e.api.state,e.api.instanceId)[e.id]!==void 0,renderHeader:e=>r.jsx(FI,j({},e)),renderCell:e=>r.jsx(MI,j({},e))}),fa="actions",zT=j({},mn,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:dk,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0}),wu="__detail_panel_toggle__",_t=e=>e.editRows,GT=["selected","hovered","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","isLastVisible","focusedCellColumnIndexNotInRange","isNotVisible","focusedCell","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"],UT=e=>{const{editable:t,editing:n,selected:o,isLastVisible:s,rowHeight:i,classes:a}=e;return Ee({root:["row",o&&"selected",t&&"row--editable",n&&"row--editing",s&&"row--lastVisible",i==="auto"&&"row--dynamicHeight"]},He,a)};function WT({width:e}){if(!e)return null;const t={width:e};return r.jsx("div",{className:`${H.cell} ${H.withBorderColor}`,style:t})}const qT=f.forwardRef(function(t,n){const{selected:o,hovered:s,rowId:i,row:a,index:l,style:u,position:c,rowHeight:d,className:h,visibleColumns:p,renderedColumns:y,containerWidth:m,firstColumnToRender:g,isLastVisible:v=!1,focusedCellColumnIndexNotInRange:x,isNotVisible:b,focusedCell:C,onClick:P,onDoubleClick:F,onMouseEnter:T,onMouseLeave:I,onMouseOut:R,onMouseOver:V}=t,O=ce(t,GT),S=Be(),N=f.useRef(null),D=pe(),w=Wr(S,D),E=ae(S,lu),M=ae(S,en),$=ae(S,ca),L=ae(S,js),_=ae(S,_t),B=Br(N,n),z=l+L+2,G={selected:o,isLastVisible:v,classes:D.classes,editing:S.current.getRowMode(i)===Ze.Edit,editable:D.editMode===Dn.Row,rowHeight:d},J=UT(G);f.useLayoutEffect(()=>{d==="auto"&&N.current&&typeof ResizeObserver>"u"&&S.current.unstable_storeRowHeightMeasurement(i,N.current.clientHeight,c)},[S,d,i,c]),f.useLayoutEffect(()=>{if(w.range){const $e=S.current.getRowIndexRelativeToVisibleRows(i);$e!=null&&S.current.unstable_setLastMeasuredRowIndex($e)}const oe=N.current;if(!oe||d!=="auto"||typeof ResizeObserver>"u")return;const we=new ResizeObserver($e=>{const[st]=$e,an=st.borderBoxSize&&st.borderBoxSize.length>0?st.borderBoxSize[0].blockSize:st.contentRect.height;S.current.unstable_storeRowHeightMeasurement(i,an,c)});return we.observe(oe),()=>we.disconnect()},[S,w.range,l,d,i,c]);const ee=f.useCallback((oe,fe)=>we=>{Ss(we)||S.current.getRow(i)&&(S.current.publishEvent(oe,S.current.getRowParams(i),we),fe&&fe(we))},[S,i]),te=f.useCallback(oe=>{const fe=xP(oe.target,H.cell),we=fe?.getAttribute("data-field");if(we){if(we===Io.field||we===wu||we==="__reorder__"||S.current.getCellMode(i,we)===Ke.Edit)return;const $e=S.current.getColumn(we);if($e?.type===fa)return}ee("rowClick",P)(oe)},[S,P,ee,i]),{slots:Ce,slotProps:W,disableColumnReorder:Q}=D,le=Ce.cell===Ql?Ql:IP,Y=D.rowReordering,ne=(oe,fe)=>{var we,$e;const st=Q&&oe.disableReorder||!Y&&!!M.length&&$>1&&Object.keys(_).length>0,an=(we=($e=_[i])==null?void 0:$e[oe.field])!=null?we:null;let vn=!1;return x!==void 0&&p[x].field===oe.field&&(vn=!0),r.jsx(le,j({column:oe,width:fe.width,rowId:i,height:d,showRightBorder:fe.showRightBorder,align:oe.align||"left",colIndex:fe.indexRelativeToAllColumns,colSpan:fe.colSpan,disableDragEvents:st,editCellState:an,isNotVisible:vn},W?.cell),oe.field)},je=ae(S,()=>j({},S.current.unstable_getRowInternalSizes(i)),au);let Z=d;if(Z==="auto"&&je){let oe=0;const fe=Object.entries(je).reduce((we,[$e,st])=>/^base[A-Z]/.test($e)?(oe+=1,st>we?st:we):we,0);fe>0&&oe>1&&(Z=fe)}const ye=f.useMemo(()=>{if(b)return{opacity:0,width:0,height:0};const oe=j({},u,{maxHeight:d==="auto"?"none":d,minHeight:Z});if(je!=null&&je.spacingTop){const fe=D.rowSpacingType==="border"?"borderTopWidth":"marginTop";oe[fe]=je.spacingTop}if(je!=null&&je.spacingBottom){const fe=D.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let we=oe[fe];typeof we!="number"&&(we=parseInt(we||"0",10)),we+=je.spacingBottom,oe[fe]=we}return oe},[b,d,u,Z,je,D.rowSpacingType]),xe=S.current.unstable_applyPipeProcessors("rowClassName",[],i);if(typeof D.getRowClassName=="function"){var Se;const oe=l-(((Se=w.range)==null?void 0:Se.firstRowIndex)||0),fe=j({},S.current.getRowParams(i),{isFirstVisible:oe===0,isLastVisible:oe===w.rows.length-1,indexRelativeToCurrentPage:oe});xe.push(D.getRowClassName(fe))}const ve=oI(1e4,20,80),Ae=S.current.getRowNode(i);if(!Ae)return null;const We=Ae.type,Ge=[];for(let oe=0;oe<y.length;oe+=1){const fe=y[oe];let we=g+oe;x!==void 0&&C&&(p[x].field===fe.field?we=x:we-=1);const $e=S.current.unstable_getCellColSpanInfo(i,we);if($e&&!$e.spannedByColSpan)if(We!=="skeletonRow"){const{colSpan:st,width:an}=$e.cellProps,vn={width:an,colSpan:st,showRightBorder:D.showCellVerticalBorder,indexRelativeToAllColumns:we};Ge.push(ne(fe,vn))}else{const{width:st}=$e.cellProps,an=Math.round(ve());Ge.push(r.jsx(Ce.skeletonCell,{width:st,contentWidth:an,field:fe.field,align:fe.align},fe.field))}}const xt=m-E,Ie=a?{onClick:te,onDoubleClick:ee("rowDoubleClick",F),onMouseEnter:ee("rowMouseEnter",T),onMouseLeave:ee("rowMouseLeave",I),onMouseOut:ee("rowMouseOut",R),onMouseOver:ee("rowMouseOver",V)}:null;return r.jsxs("div",j({ref:B,"data-id":i,"data-rowindex":l,role:"row",className:Ve(...xe,J.root,h,s&&"Mui-hovered"),"aria-rowindex":z,"aria-selected":o,style:ye},Ie,O,{children:[Ge,xt>0&&r.jsx(WT,{width:xt})]}))}),KT=ha(qT);function QT({privateApiRef:e,props:t,children:n}){const o=f.useRef(e.current.getPublicApi());return r.jsx(gg.Provider,{value:t,children:r.jsx(xg.Provider,{value:e,children:r.jsx(mg.Provider,{value:o,children:n})})})}const YT=nI()&&window.localStorage.getItem("DEBUG")!=null,Uo=()=>{},XT={debug:Uo,info:Uo,warn:Uo,error:Uo},qh=["debug","info","warn","error"];function Kh(e,t,n=console){const o=qh.indexOf(t);if(o===-1)throw new Error(`MUI: Log level ${t} not recognized.`);return qh.reduce((i,a,l)=>(l>=o?i[a]=(...u)=>{const[c,...d]=u;n[a](`MUI: ${e} - ${c}`,...d)}:i[a]=Uo,i),{})}const JT=(e,t)=>{const n=f.useCallback(o=>YT?Kh(o,"debug",t.logger):t.logLevel?Kh(o,t.logLevel.toString(),t.logger):XT,[t.logLevel,t.logger]);Oe(e,{getLogger:n},"private")};class ju{static create(t){return new ju(t)}constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{this.value=n,this.listeners.forEach(o=>o(n))},this.value=t,this.listeners=new Set}}class ZT{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let s=this.events[t];s||(s={highPriority:new Map,regular:new Map},this.events[t]=s),o.isFirst?s.highPriority.set(n,!0):s.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const s=Array.from(o.highPriority.keys()),i=Array.from(o.regular.keys());for(let a=s.length-1;a>=0;a-=1){const l=s[a];o.highPriority.has(l)&&l.apply(this,n)}for(let a=0;a<i.length;a+=1){const l=i[a];o.regular.has(l)&&l.apply(this,n)}}once(t,n){const o=this;this.on(t,function s(...i){o.removeListener(t,s),n.apply(o,i)})}}const dx=Symbol("mui.api_private"),e2=e=>e.isPropagationStopped!==void 0;let Qh=0;function t2(e){var t;const n=(t=e.current)==null?void 0:t[dx];if(n)return n;const o={},s={state:o,store:ju.create(o),instanceId:{id:Qh}};return Qh+=1,s.getPublicApi=()=>e.current,s.register=(i,a)=>{Object.keys(a).forEach(l=>{const u=a[l],c=s[l];if(c?.spying===!0?c.target=u:s[l]=u,i==="public"){const d=e.current,h=d[l];h?.spying===!0?h.target=u:d[l]=u}})},s.register("private",{caches:{},eventManager:new ZT}),s}function n2(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[dx]:e.current}}function r2(e,t){const n=f.useRef(),o=f.useRef();o.current||(o.current=t2(n)),n.current||(n.current=n2(o));const s=f.useCallback((...a)=>{const[l,u,c={}]=a;if(c.defaultMuiPrevented=!1,e2(c)&&c.isPropagationStopped())return;const d=t.signature===En.DataGridPro?{api:o.current.getPublicApi()}:{};o.current.eventManager.emit(l,u,c,d)},[o,t.signature]),i=f.useCallback((a,l,u)=>{o.current.eventManager.on(a,l,u);const c=o.current;return()=>{c.eventManager.removeListener(a,l)}},[o]);return Oe(o,{subscribeEvent:i,publishEvent:s},"public"),f.useImperativeHandle(e,()=>n.current,[n]),f.useEffect(()=>{const a=o.current;return()=>{a.publishEvent("unmount")}},[o]),o}const o2=(e,t)=>{const n=f.useCallback(o=>{if(t.localeText[o]==null)throw new Error(`Missing translation for key ${o}.`);return t.localeText[o]},[t.localeText]);e.current.register("public",{getLocaleText:n})},s2=e=>{const t=f.useRef({}),n=f.useRef(!1),o=f.useCallback(d=>{n.current||!d||(n.current=!0,Object.values(d.appliers).forEach(h=>{h()}),n.current=!1)},[]),s=f.useCallback((d,h,p)=>{t.current[d]||(t.current[d]={processors:new Map,appliers:{}});const y=t.current[d];return y.processors.get(h)!==p&&(y.processors.set(h,p),o(y)),()=>{t.current[d].processors.set(h,null)}},[o]),i=f.useCallback((d,h,p)=>(t.current[d]||(t.current[d]={processors:new Map,appliers:{}}),t.current[d].appliers[h]=p,()=>{const y=t.current[d].appliers,m=ce(y,[h].map(ts));t.current[d].appliers=m}),[]),a=f.useCallback(d=>{const h=t.current[d];o(h)},[o]),l=f.useCallback((...d)=>{const[h,p,y]=d;return t.current[h]?Array.from(t.current[h].processors.values()).reduce((g,v)=>v?v(g,y):g,p):p},[]),u={registerPipeProcessor:s,registerPipeApplier:i,requestPipeProcessorsApplication:a},c={unstable_applyPipeProcessors:l};Oe(e,u,"private"),Oe(e,c,"public")},dt=(e,t,n)=>{const o=f.useRef(),s=f.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=f.useCallback(()=>{o.current=e.current.registerPipeProcessor(t,s.current,n)},[e,n,t]);Ps(()=>{i()});const a=f.useRef(!0);f.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},Su=(e,t,n)=>{const o=f.useRef(),s=f.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=f.useCallback(()=>{o.current=e.current.registerPipeApplier(t,s.current,n)},[e,n,t]);Ps(()=>{i()});const a=f.useRef(!0);f.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},$i=(e,t,n,o)=>{const s=f.useCallback(()=>{e.current.registerStrategyProcessor(t,n,o)},[e,o,n,t]);Ps(()=>{s()});const i=f.useRef(!0);f.useEffect(()=>{i.current?i.current=!1:s()},[s])},Vr="none",Yh={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree",visibleRowsLookupCreation:"rowTree"},i2=e=>{const t=f.useRef(new Map),n=f.useRef({}),o=f.useCallback((u,c,d)=>{const h=()=>{const m=n.current[c],g=ce(m,[u].map(ts));n.current[c]=g};n.current[c]||(n.current[c]={});const p=n.current[c],y=p[u];return p[u]=d,!y||y===d||u===e.current.getActiveStrategy(Yh[c])&&e.current.publishEvent("activeStrategyProcessorChange",c),h},[e]),s=f.useCallback((u,c)=>{const d=e.current.getActiveStrategy(Yh[u]);if(d==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const h=n.current[u];if(!h||!h[d])throw new Error(`No processor found for processor "${u}" on strategy "${d}"`);const p=h[d];return p(c)},[e]),i=f.useCallback(u=>{var c;const h=Array.from(t.current.entries()).find(([,p])=>p.group!==u?!1:p.isAvailable());return(c=h?.[0])!=null?c:Vr},[]),a=f.useCallback((u,c,d)=>{t.current.set(c,{group:u,isAvailable:d}),e.current.publishEvent("strategyAvailabilityChange")},[e]);Oe(e,{registerStrategyProcessor:o,applyStrategyProcessor:s,getActiveStrategy:i,setStrategyAvailability:a},"private")},a2=(e,t)=>{const n=f.useRef({}),[,o]=f.useState(),s=f.useCallback(d=>{n.current[d.stateId]=d},[]),i=f.useCallback((d,h)=>{let p;if(zg(d)?p=d(e.current.state):p=d,e.current.state===p)return!1;let y=!1;const m=[];if(Object.keys(n.current).forEach(g=>{const v=n.current[g],x=v.stateSelector(e.current.state,e.current.instanceId),b=v.stateSelector(p,e.current.instanceId);b!==x&&(m.push({stateId:v.stateId,hasPropChanged:b!==v.propModel}),v.propModel!==void 0&&b!==v.propModel&&(y=!0))}),m.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${m[0].stateId}, therefore, you're not allowed to update ${m.map(g=>g.stateId).join(", ")} in the same transaction.`);if(y||(e.current.state=p,e.current.publishEvent&&e.current.publishEvent("stateChange",p),e.current.store.update(p)),m.length===1){const{stateId:g,hasPropChanged:v}=m[0],x=n.current[g],b=x.stateSelector(p,e.current.instanceId);if(x.propOnChange&&v){const C=t.signature===En.DataGridPro?{api:e.current,reason:h}:{reason:h};x.propOnChange(b,C)}y||e.current.publishEvent(x.changeEvent,b,{reason:h})}return!y},[e,t.signature]),a=f.useCallback((d,h,p)=>e.current.setState(y=>j({},y,{[d]:h(y[d])}),p),[e]),l=f.useCallback(()=>o(()=>e.current.state),[e]),u={setState:i,forceUpdate:l},c={updateControlState:a,registerControlState:s};Oe(e,u,"public"),Oe(e,c,"private")},l2=(e,t)=>{const n=r2(e,t);return JT(n,t),a2(n,t),s2(n),i2(n),o2(n,t),n.current.register("private",{rootProps:t}),n},Nt=(e,t,n)=>{const o=f.useRef(!1);o.current||(t.current.state=e(t.current.state,n,t),o.current=!0)},c2=/(\d+)-(\d+)-(\d+)/,u2=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Jr(e,t,n,o){if(!e.value)return null;const[s,i,a,l,u]=e.value.match(n?u2:c2).slice(1).map(Number),c=new Date(s,i-1,a,l||0,u||0).getTime();return d=>{if(!d)return!1;if(o)return t(d.getTime(),c);const p=new Date(d).setHours(n?d.getHours():0,n?d.getMinutes():0,0,0);return t(p,c)}}const hx=e=>Is([{value:"is",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n===o,e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n!==o,e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n>o,e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n>=o,e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n<o,e,!e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n<=o,e),InputComponent:Xr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!=null,requiresFilterValue:!1}]);function fx({value:e,columnType:t,rowId:n,field:o}){if(!(e instanceof Date))throw new Error([`MUI: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${n}, field: "${o}".`].join(`
`))}function d2({value:e,field:t,id:n}){return e?(fx({value:e,columnType:"date",rowId:n,field:t}),e.toLocaleDateString()):""}function h2({value:e,field:t,id:n}){return e?(fx({value:e,columnType:"dateTime",rowId:n,field:t}),e.toLocaleString()):""}const f2=j({},mn,{type:"date",sortComparator:Jg,valueFormatter:d2,filterOperators:hx(),renderEditCell:Og,pastedValueParser:e=>new Date(e)}),p2=j({},mn,{type:"dateTime",sortComparator:Jg,valueFormatter:h2,filterOperators:hx(!0),renderEditCell:Og,pastedValueParser:e=>new Date(e)}),tr=e=>e==null?null:Number(e),Xh=ks(e=>e==null||Number.isNaN(e)||e===""?null:t=>tr(t)===tr(e)),m2=()=>Is([{value:"=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>tr(t)===e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>tr(t)!==e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)>e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)>=e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)<e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)<=e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFnV7:()=>e=>e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:e=>!Array.isArray(e.value)||e.value.length===0?null:t=>t!=null&&e.value.includes(Number(t)),InputComponent:sx,InputComponentProps:{type:"number"}}]),g2=j({},mn,{type:"number",align:"right",headerAlign:"right",sortComparator:Xg,valueParser:e=>e===""?null:Number(e),valueFormatter:({value:e})=>tI(e)?e.toLocaleString():e||"",filterOperators:m2(),getApplyQuickFilterFn:ix(Xh),getApplyQuickFilterFnV7:Xh}),Zr=e=>e==null||!gu(e)?e:e.value,x2=()=>Is([{value:"is",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>Zr(t)===Zr(e.value),InputComponent:Bh},{value:"not",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>Zr(t)!==Zr(e.value),InputComponent:Bh},{value:"isAnyOf",getApplyFilterFnV7:e=>{if(!Array.isArray(e.value)||e.value.length===0)return null;const t=e.value.map(Zr);return n=>t.includes(Zr(n))},InputComponent:uT}]),y2=e=>typeof e[0]=="object",b2=e=>gu(e)?e.value:e,v2=e=>gu(e)?e.label:String(e),C2=j({},mn,{type:"singleSelect",getOptionLabel:v2,getOptionValue:b2,valueFormatter(e){const{id:t,field:n,value:o,api:s}=e,i=e.api.getColumn(n);if(!Or(i))return"";let a;if(typeof i.valueOptions=="function"?a=i.valueOptions({id:t,row:t?s.getRow(t):null,field:n}):a=i.valueOptions,o==null)return"";if(!a)return o;if(!y2(a))return i.getOptionLabel(o);const l=a.find(u=>i.getOptionValue(u)===o);return l?i.getOptionLabel(l):""},renderEditCell:rk,filterOperators:x2(),pastedValueParser:(e,t)=>{const n=t.colDef,o=n.valueOptions,s=typeof o=="function"?o({field:n.field}):o||[],i=n.getOptionValue;if(s.find(l=>i(l)===e))return e}}),px="__default__",w2=()=>({string:mn,number:g2,date:f2,dateTime:p2,boolean:ux,singleSelect:C2,[fa]:zT,[px]:mn});function Zl(e,t){if(typeof e=="string"){if(t.shouldAppendQuotes||t.escapeFormulas){const n=e.replace(/"/g,'""');return[t.delimiter,`
`,"\r",'"'].some(o=>e.includes(o))?`"${n}"`:t.escapeFormulas&&["=","+","-","@","	","\r"].includes(n[0])?`'${n}`:n}return e}return e}const mx=(e,t)=>{const{csvOptions:n,ignoreValueFormatter:o}=t;let s;if(o){var i;const l=e.colDef.type;if(l==="number")s=String(e.value);else if(l==="date"||l==="dateTime"){var a;s=(a=e.value)==null?void 0:a.toISOString()}else typeof((i=e.value)==null?void 0:i.toString)=="function"?s=e.value.toString():s=e.value}else s=e.formattedValue;return Zl(s,n)};On(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);class ec{constructor(t){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=t}addValue(t){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),t==null?this.rowString+="":typeof this.options.sanitizeCellValue=="function"?this.rowString+=this.options.sanitizeCellValue(t,this.options.csvOptions):this.rowString+=t,this.isEmpty=!1}getRowString(){return this.rowString}}const j2=({id:e,columns:t,getCellParams:n,csvOptions:o,ignoreValueFormatter:s})=>{const i=new ec({csvOptions:o});return t.forEach(a=>{const l=n(e,a.field);i.addValue(mx(l,{ignoreValueFormatter:s,csvOptions:o}))}),i.getRowString()};function S2(e){const{columns:t,rowIds:n,csvOptions:o,ignoreValueFormatter:s,apiRef:i}=e,a=n.reduce((h,p)=>`${h}${j2({id:p,columns:t,getCellParams:i.current.getCellParams,ignoreValueFormatter:s,csvOptions:o})}\r
`,"").trim();if(!o.includeHeaders)return a;const l=t.filter(h=>h.field!==Io.field),u=[];if(o.includeColumnGroupsHeaders){const h=i.current.unstable_getAllGroupDetails();let p=0;const y=l.reduce((m,g)=>{const v=i.current.unstable_getColumnGroupPath(g.field);return m[g.field]=v,p=Math.max(p,v.length),m},{});for(let m=0;m<p;m+=1){const g=new ec({csvOptions:o,sanitizeCellValue:Zl});u.push(g),l.forEach(v=>{const x=(y[v.field]||[])[m],b=h[x];g.addValue(b?b.headerName||b.groupId:"")})}}const c=new ec({csvOptions:o,sanitizeCellValue:Zl});return l.forEach(h=>{c.addValue(h.headerName||h.field)}),u.push(c),`${`${u.map(h=>h.getRowString()).join(`\r
`)}\r
`}${a}`.trim()}function Jh(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const n=document.createRange();n.selectNode(t);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function P2(e){navigator.clipboard?navigator.clipboard.writeText(e).catch(()=>{Jh(e)}):Jh(e)}function k2(e){var t;return!!((t=window.getSelection())!=null&&t.toString()||e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}const I2=(e,t)=>{const n=t.unstable_ignoreValueFormatterDuringExport,o=(typeof n=="object"?n?.clipboardExport:n)||!1,s=t.clipboardCopyCellDelimiter,i=f.useCallback(a=>{if(!((a.ctrlKey||a.metaKey)&&a.key==="c")||k2(a.target))return;let l="";if(e.current.getSelectedRows().size>0)l=e.current.getDataAsCsv({includeHeaders:!1,delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1});else{const c=Qt(e);if(c){const d=e.current.getCellParams(c.id,c.field);l=mx(d,{csvOptions:{delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:o})}}l=e.current.unstable_applyPipeProcessors("clipboardCopy",l),l&&(P2(l),e.current.publishEvent("clipboardCopy",l))},[e,o,s]);sI(e,e.current.rootElementRef,"keydown",i),tt(e,"clipboardCopy",t.onClipboardCopy)},E2=e=>j({},e,{columnMenu:{open:!1}}),T2=e=>{const t=Et(e,"useGridColumnMenu"),n=f.useCallback(a=>{e.current.setState(u=>u.columnMenu.open&&u.columnMenu.field===a?u:(t.debug("Opening Column Menu"),j({},u,{columnMenu:{open:!0,field:a}})))&&(e.current.hidePreferences(),e.current.forceUpdate())},[e,t]),o=f.useCallback(()=>{const a=Kl(e.current.state);if(a.field){const u=So(e),c=fn(e),d=qn(e);let h=a.field;if(u[h]||(h=d[0]),c[h]===!1){const p=d.filter(m=>m===h?!0:c[m]!==!1),y=p.indexOf(h);h=p[y+1]||p[y-1]}e.current.setColumnHeaderFocus(h)}e.current.setState(u=>!u.columnMenu.open&&u.columnMenu.field===void 0?u:(t.debug("Hiding Column Menu"),j({},u,{columnMenu:j({},u.columnMenu,{open:!1,field:void 0})})))&&e.current.forceUpdate()},[e,t]),s=f.useCallback(a=>{t.debug("Toggle Column Menu");const l=Kl(e.current.state);!l.open||l.field!==a?n(a):o()},[e,t,n,o]);Oe(e,{showColumnMenu:n,hideColumnMenu:o,toggleColumnMenu:s},"public"),me(e,"columnResizeStart",o),me(e,"virtualScrollerWheel",e.current.hideColumnMenu),me(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)},gx=["maxWidth","minWidth","width","flex"];function A2({initialFreeSpace:e,totalFlexUnits:t,flexColumns:n}){const o=new Set(n.map(a=>a.field)),s={all:{},frozenFields:[],freeze:a=>{const l=s.all[a];l&&l.frozen!==!0&&(s.all[a].frozen=!0,s.frozenFields.push(a))}};function i(){if(s.frozenFields.length===o.size)return;const a={min:{},max:{}};let l=e,u=t,c=0;s.frozenFields.forEach(d=>{l-=s.all[d].computedWidth,u-=s.all[d].flex});for(let d=0;d<n.length;d+=1){const h=n[d];if(s.all[h.field]&&s.all[h.field].frozen===!0)continue;let y=l/u*h.flex;y<h.minWidth?(c+=h.minWidth-y,y=h.minWidth,a.min[h.field]=!0):y>h.maxWidth&&(c+=h.maxWidth-y,y=h.maxWidth,a.max[h.field]=!0),s.all[h.field]={frozen:!1,computedWidth:y,flex:h.flex}}c<0?Object.keys(a.max).forEach(d=>{s.freeze(d)}):c>0?Object.keys(a.min).forEach(d=>{s.freeze(d)}):n.forEach(({field:d})=>{s.freeze(d)}),i()}return i(),s.all}const tc=(e,t)=>{const n={};let o=0,s=0;const i=[];e.orderedFields.forEach(l=>{const u=j({},e.lookup[l]);if(e.columnVisibilityModel[l]===!1)u.computedWidth=0;else{let c;u.flex&&u.flex>0?(o+=u.flex,c=0,i.push(u)):c=Co(u.width||mn.width,u.minWidth||mn.minWidth,u.maxWidth||mn.maxWidth),s+=c,u.computedWidth=c}n[l]=u});const a=Math.max(t-s,0);if(o>0&&t>0){const l=A2({initialFreeSpace:a,totalFlexUnits:o,flexColumns:i});Object.keys(l).forEach(u=>{n[u].computedWidth=l[u].computedWidth})}return j({},e,{lookup:n})},M2=(e,t)=>{if(!t)return e;const{orderedFields:n=[],dimensions:o={}}=t,s=Object.keys(o);if(s.length===0&&n.length===0)return e;const i={},a=[];for(let d=0;d<n.length;d+=1){const h=n[d];e.lookup[h]&&(i[h]=!0,a.push(h))}const l=a.length===0?e.orderedFields:[...a,...e.orderedFields.filter(d=>!i[d])],u=j({},e.lookup);for(let d=0;d<s.length;d+=1){const h=s[d],p=j({},u[h],{hasBeenResized:!0});Object.entries(o[h]).forEach(([y,m])=>{p[y]=m===-1?1/0:m}),u[h]=p}return j({},e,{orderedFields:l,lookup:u})};function Zh(e,t){let n=e[px];return t&&e[t]&&(n=e[t]),n}const to=({apiRef:e,columnsToUpsert:t,initialState:n,columnTypes:o,columnVisibilityModel:s=fn(e),keepOnlyColumnsToUpsert:i=!1})=>{var a,l,u;const c=!e.current.state.columns;let d;if(c)d={orderedFields:[],lookup:{},columnVisibilityModel:s};else{const m=Fr(e.current.state);d={orderedFields:i?[]:[...m.orderedFields],lookup:j({},m.lookup),columnVisibilityModel:s}}let h={};i&&!c&&(h=Object.keys(d.lookup).reduce((m,g)=>j({},m,{[g]:!1}),{})),t.forEach(m=>{const{field:g}=m;h[g]=!0;let v=d.lookup[g];v==null?(v=j({},Zh(o,m.type),{field:g,hasBeenResized:!1}),d.orderedFields.push(g)):i&&d.orderedFields.push(g),v&&v.type!==m.type&&(v=j({},Zh(o,m.type),{field:g}));let x=v.hasBeenResized;gx.forEach(b=>{m[b]!==void 0&&(x=!0,m[b]===-1&&(m[b]=1/0))}),d.lookup[g]=j({},v,m,{hasBeenResized:x})}),i&&!c&&Object.keys(d.lookup).forEach(m=>{h[m]||delete d.lookup[m]});const p=e.current.unstable_applyPipeProcessors("hydrateColumns",d),y=M2(p,n);return tc(y,(a=(l=(u=e.current).getRootDimensions)==null||(l=l.call(u))==null?void 0:l.viewportInnerSize.width)!=null?a:0)},ef=e=>t=>j({},t,{columns:e});function nc({firstColumnToRender:e,apiRef:t,firstRowToRender:n,lastRowToRender:o,visibleRows:s}){let i=e;for(let a=n;a<o;a+=1)if(s[a]){const u=s[a].id,c=t.current.unstable_getCellColSpanInfo(u,e);c&&c.spannedByColSpan&&(i=c.leftVisibleCellIndex)}return i}function R2({firstColumnIndex:e,minColumnIndex:t,columnBuffer:n,firstRowToRender:o,lastRowToRender:s,apiRef:i,visibleRows:a}){const l=Math.max(e-n,t);return nc({firstColumnToRender:l,apiRef:i,firstRowToRender:o,lastRowToRender:s,visibleRows:a})}function Pu(e,t){const n=ko(e),o=js(e);return Math.floor(t*n)*((o??0)+1)}const xx=w2(),D2=(e,t,n)=>{var o,s,i,a;const l=to({apiRef:n,columnTypes:xx,columnsToUpsert:t.columns,initialState:(o=t.initialState)==null?void 0:o.columns,columnVisibilityModel:(s=(i=t.columnVisibilityModel)!=null?i:(a=t.initialState)==null||(a=a.columns)==null?void 0:a.columnVisibilityModel)!=null?s:{},keepOnlyColumnsToUpsert:!0});return j({},e,{columns:l})};function F2(e,t){var n,o;const s=Et(e,"useGridColumns"),i=xx,a=f.useRef(t.columns),l=f.useRef(i);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:fn,changeEvent:"columnVisibilityModelChange"});const u=f.useCallback(w=>{s.debug("Updating columns state."),e.current.setState(ef(w)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",w.orderedFields)},[s,e]),c=f.useCallback(w=>So(e)[w],[e]),d=f.useCallback(()=>In(e),[e]),h=f.useCallback(()=>Pt(e),[e]),p=f.useCallback((w,E=!0)=>(E?Pt(e):In(e)).findIndex($=>$.field===w),[e]),y=f.useCallback(w=>{const E=p(w);return vo(e)[E]},[e,p]),m=f.useCallback(w=>{fn(e)!==w&&(e.current.setState(M=>j({},M,{columns:to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:w,keepOnlyColumnsToUpsert:!1})})),e.current.forceUpdate())},[e,i]),g=f.useCallback(w=>{const E=to({apiRef:e,columnTypes:i,columnsToUpsert:w,initialState:void 0,keepOnlyColumnsToUpsert:!1});u(E)},[e,u,i]),v=f.useCallback((w,E)=>{var M;const $=fn(e),L=(M=$[w])!=null?M:!0;if(E!==L){const _=j({},$,{[w]:E});e.current.setColumnVisibilityModel(_)}},[e]),x=f.useCallback(w=>qn(e).findIndex(M=>M===w),[e]),b=f.useCallback((w,E)=>{const M=qn(e),$=x(w);if($===E)return;s.debug(`Moving column ${w} to index ${E}`);const L=[...M],_=L.splice($,1)[0];L.splice(E,0,_),u(j({},Fr(e.current.state),{orderedFields:L}));const B={column:e.current.getColumn(w),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(w),oldIndex:$};e.current.publishEvent("columnIndexChange",B)},[e,s,u,x]),C=f.useCallback((w,E)=>{var M,$;s.debug(`Updating column ${w} width to ${E}`);const L=Fr(e.current.state),_=L.lookup[w],B=j({},_,{width:E,hasBeenResized:!0});u(tc(j({},L,{lookup:j({},L.lookup,{[w]:B})}),(M=($=e.current.getRootDimensions())==null?void 0:$.viewportInnerSize.width)!=null?M:0)),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(w),colDef:B,width:E})},[e,s,u]),P={getColumn:c,getAllColumns:d,getColumnIndex:p,getColumnPosition:y,getVisibleColumns:h,getColumnIndexRelativeToVisibleColumns:x,updateColumns:g,setColumnVisibilityModel:m,setColumnVisibility:v,setColumnWidth:C},F={setColumnIndex:b};Oe(e,P,"public"),Oe(e,F,t.signature===En.DataGrid?"private":"public");const T=f.useCallback((w,E)=>{var M,$;const L={},_=fn(e);(!E.exportOnlyDirtyModels||t.columnVisibilityModel!=null||Object.keys((M=($=t.initialState)==null||($=$.columns)==null?void 0:$.columnVisibilityModel)!=null?M:{}).length>0||Object.keys(_).length>0)&&(L.columnVisibilityModel=_),L.orderedFields=qn(e);const z=In(e),G={};return z.forEach(J=>{if(J.hasBeenResized){const ee={};gx.forEach(te=>{let Ce=J[te];Ce===1/0&&(Ce=-1),ee[te]=Ce}),G[J.field]=ee}}),Object.keys(G).length>0&&(L.dimensions=G),j({},w,{columns:L})},[e,t.columnVisibilityModel,(n=t.initialState)==null?void 0:n.columns]),I=f.useCallback((w,E)=>{var M;const $=(M=E.stateToRestore.columns)==null?void 0:M.columnVisibilityModel,L=E.stateToRestore.columns;if($==null&&L==null)return w;const _=to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:L,columnVisibilityModel:$,keepOnlyColumnsToUpsert:!1});return e.current.setState(ef(_)),L!=null&&e.current.publishEvent("columnsChange",_.orderedFields),w},[e,i]),R=f.useCallback((w,E)=>{if(E===$r.columns){var M;const $=t.slots.columnsPanel;return r.jsx($,j({},(M=t.slotProps)==null?void 0:M.columnsPanel))}return w},[t.slots.columnsPanel,(o=t.slotProps)==null?void 0:o.columnsPanel]),V=f.useCallback(w=>t.disableColumnSelector?w:[...w,"columnMenuColumnsItem"],[t.disableColumnSelector]);dt(e,"columnMenu",V),dt(e,"exportState",T),dt(e,"restoreState",I),dt(e,"preferencePanel",R);const O=f.useRef(null);me(e,"viewportInnerSizeChange",w=>{O.current!==w.width&&(O.current=w.width,u(tc(Fr(e.current.state),w.width)))});const N=f.useCallback(()=>{s.info("Columns pipe processing have changed, regenerating the columns");const w=to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});u(w)},[e,s,u,i]);Su(e,"hydrateColumns",N);const D=f.useRef(!0);f.useEffect(()=>{if(D.current){D.current=!1;return}if(s.info(`GridColumns have changed, new length ${t.columns.length}`),a.current===t.columns&&l.current===i)return;const w=to({apiRef:e,columnTypes:i,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});a.current=t.columns,l.current=i,u(w)},[s,e,u,t.columns,i]),f.useEffect(()=>{t.columnVisibilityModel!==void 0&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)},[e,s,t.columnVisibilityModel])}const O2=.7,_2=1.3,yx={compact:O2,comfortable:_2,standard:1},L2=(e,t)=>j({},e,{density:{value:t.density,factor:yx[t.density]}}),$2=(e,t)=>{const n=Et(e,"useDensity"),o=f.useCallback(i=>{n.debug(`Set grid density to ${i}`),e.current.setState(a=>{const l=hu(a),u={value:i,factor:yx[i]};return _r(l,u)?a:j({},a,{density:u})}),e.current.forceUpdate()},[n,e]);f.useEffect(()=>{e.current.setDensity(t.density)},[e,t.density]),Oe(e,{setDensity:o},"public")};function V2(e,t="csv",n=document.title||"untitled"){const o=`${n}.${t}`;if("download"in HTMLAnchorElement.prototype){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=o,i.click(),setTimeout(()=>{URL.revokeObjectURL(s)});return}throw new Error("MUI: exportAs not supported")}const bx=({apiRef:e,options:t})=>{const n=In(e);return t.fields?t.fields.reduce((s,i)=>{const a=n.find(l=>l.field===i);return a&&s.push(a),s},[]):(t.allColumns?n:Pt(e)).filter(s=>!s.disableExport)},N2=({apiRef:e})=>{var t,n;const o=Z1(e),s=dn(e),i=e.current.getSelectedRows(),a=o.filter(d=>s[d].type!=="footer"),l=Po(e),u=(l==null||(t=l.top)==null?void 0:t.map(d=>d.id))||[],c=(l==null||(n=l.bottom)==null?void 0:n.map(d=>d.id))||[];return a.unshift(...u),a.push(...c),i.size>0?a.filter(d=>i.has(d)):a},B2=(e,t)=>{const n=Et(e,"useGridCsvExport"),o=t.unstable_ignoreValueFormatterDuringExport,s=(typeof o=="object"?o?.csvExport:o)||!1,i=f.useCallback((c={})=>{var d,h,p,y,m;n.debug("Get data as CSV");const g=bx({apiRef:e,options:c}),x=((d=c.getRowsToExport)!=null?d:N2)({apiRef:e});return S2({columns:g,rowIds:x,csvOptions:{delimiter:c.delimiter||",",shouldAppendQuotes:(h=c.shouldAppendQuotes)!=null?h:!0,includeHeaders:(p=c.includeHeaders)!=null?p:!0,includeColumnGroupsHeaders:(y=c.includeColumnGroupsHeaders)!=null?y:!0,escapeFormulas:(m=c.escapeFormulas)!=null?m:!0},ignoreValueFormatter:s,apiRef:e})},[n,e,s]),a=f.useCallback(c=>{n.debug("Export data as CSV");const d=i(c),h=new Blob([c!=null&&c.utf8WithBom?new Uint8Array([239,187,191]):"",d],{type:"text/csv"});V2(h,"csv",c?.fileName)},[n,i]);Oe(e,{getDataAsCsv:i,exportDataAsCsv:a},"public");const u=f.useCallback((c,d)=>{var h;return(h=d.csvOptions)!=null&&h.disableToolbarButton?c:[...c,{component:r.jsx(fT,{options:d.csvOptions}),componentName:"csvExport"}]},[]);dt(e,"exportMenu",u)},ci=(e,t,n)=>{var o;let s=e.paginationModel;const i=e.rowCount,a=(o=n?.pageSize)!=null?o:s.pageSize,l=Ug(i,a);n&&(n?.page!==s.page||n?.pageSize!==s.pageSize)&&(s=n);const u=lI(s.page,l);return u!==s.page&&(s=j({},s,{page:u})),qg(s.pageSize,t),s},H2=(e,t)=>{var n;const o=Et(e,"useGridPaginationModel"),s=ae(e,ko),i=Math.floor(t.rowHeight*s);e.current.registerControlState({stateId:"paginationModel",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:tn,changeEvent:"paginationModelChange"});const a=f.useCallback(g=>{const v=tn(e);g!==v.page&&(o.debug(`Setting page to ${g}`),e.current.setPaginationModel({page:g,pageSize:v.pageSize}))},[e,o]),l=f.useCallback(g=>{const v=tn(e);g!==v.pageSize&&(o.debug(`Setting page size to ${g}`),e.current.setPaginationModel({pageSize:g,page:v.page}))},[e,o]),u=f.useCallback(g=>{const v=tn(e);g!==v&&(o.debug("Setting 'paginationModel' to",g),e.current.setState(x=>j({},x,{pagination:j({},x.pagination,{paginationModel:ci(x.pagination,t.signature,g)})})))},[e,o,t.signature]);Oe(e,{setPage:a,setPageSize:l,setPaginationModel:u},"public");const d=f.useCallback((g,v)=>{var x;const b=tn(e);return!v.exportOnlyDirtyModels||t.paginationModel!=null||((x=t.initialState)==null||(x=x.pagination)==null?void 0:x.paginationModel)!=null||b.page!==0&&b.pageSize!==aI(t.autoPageSize)?j({},g,{pagination:j({},g.pagination,{paginationModel:b})}):g},[e,t.paginationModel,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.paginationModel,t.autoPageSize]),h=f.useCallback((g,v)=>{var x,b;const C=(x=v.stateToRestore.pagination)!=null&&x.paginationModel?j({},Wg(t.autoPageSize),(b=v.stateToRestore.pagination)==null?void 0:b.paginationModel):tn(e);return e.current.setState(P=>j({},P,{pagination:j({},P.pagination,{paginationModel:ci(P.pagination,t.signature,C)})})),g},[e,t.autoPageSize,t.signature]);dt(e,"exportState",d),dt(e,"restoreState",h);const p=()=>{var g;const v=tn(e);(g=e.current.virtualScrollerRef)!=null&&g.current&&e.current.scrollToIndexes({rowIndex:v.page*v.pageSize})},y=f.useCallback(()=>{if(!t.autoPageSize)return;const g=e.current.getRootDimensions()||{viewportInnerSize:{height:0}},v=Mg(e),x=Math.floor((g.viewportInnerSize.height-v.top-v.bottom)/i);e.current.setPageSize(x)},[e,t.autoPageSize,i]),m=f.useCallback(g=>{if(g==null)return;const v=tn(e),x=uI(e);v.page>x-1&&e.current.setPage(Math.max(0,x-1))},[e]);me(e,"viewportInnerSizeChange",y),me(e,"paginationModelChange",p),me(e,"rowCountChange",m),f.useEffect(()=>{e.current.setState(g=>j({},g,{pagination:j({},g.pagination,{paginationModel:ci(g.pagination,t.signature,t.paginationModel)})}))},[e,t.paginationModel,t.paginationMode,t.signature]),f.useEffect(y,[y])};function z2(){return new Promise(e=>{requestAnimationFrame(()=>{e()})})}function G2(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}const U2=(e,t)=>{const n=Et(e,"useGridPrintExport"),o=f.useRef(null),s=f.useRef(null),i=f.useRef({}),a=f.useRef([]);f.useEffect(()=>{o.current=Hi(e.current.rootElementRef.current)},[e]);const l=f.useCallback((m,g,v)=>new Promise(x=>{const b=bx({apiRef:e,options:{fields:m,allColumns:g}}).map(F=>F.field),C=In(e),P={};C.forEach(F=>{P[F.field]=b.includes(F.field)}),v&&(P[Io.field]=!0),e.current.setColumnVisibilityModel(P),x()}),[e]),u=f.useCallback(m=>{const v=m({apiRef:e}).map(x=>e.current.getRow(x));e.current.setRows(v)},[e]),c=f.useCallback((m,g)=>{var v,x;const b=j({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},g),C=m.contentDocument;if(!C)return;const P=cs(e.current.state),F=e.current.rootElementRef.current,T=F.cloneNode(!0),I=T.querySelector(`.${H.main}`);I.style.overflow="visible",T.style.contain="size";const V=T.querySelector(`.${H.columnHeaders}`).querySelector(`.${H.columnHeadersInner}`);V.style.width="100%";let O=((v=F.querySelector(`.${H.toolbarContainer}`))==null?void 0:v.offsetHeight)||0,S=((x=F.querySelector(`.${H.footerContainer}`))==null?void 0:x.offsetHeight)||0;if(b.hideToolbar){var N;(N=T.querySelector(`.${H.toolbarContainer}`))==null||N.remove(),O=0}if(b.hideFooter){var D;(D=T.querySelector(`.${H.footerContainer}`))==null||D.remove(),S=0}const w=P.currentPageTotalHeight+Pu(e,t.columnHeaderHeight)+O+S;if(T.style.height=`${w}px`,T.style.boxSizing="content-box",g!=null&&g.getRowsToExport){const L=T.querySelector(`.${H.footerContainer}`);L.style.position="absolute",L.style.width="100%",L.style.top=`${w-S}px`}const E=document.createElement("div");E.appendChild(T),C.body.innerHTML=E.innerHTML;const M=typeof b.pageStyle=="function"?b.pageStyle():b.pageStyle;if(typeof M=="string"){const L=C.createElement("style");L.appendChild(C.createTextNode(M)),C.head.appendChild(L)}b.bodyClassName&&C.body.classList.add(...b.bodyClassName.split(" "));const $=[];if(b.copyStyles){const L=F.getRootNode(),B=(L.constructor.name==="ShadowRoot"?L:o.current).querySelectorAll("style, link[rel='stylesheet']");for(let z=0;z<B.length;z+=1){const G=B[z];if(G.tagName==="STYLE"){const J=C.createElement(G.tagName),ee=G.sheet;if(ee){let te="";for(let Ce=0;Ce<ee.cssRules.length;Ce+=1)typeof ee.cssRules[Ce].cssText=="string"&&(te+=`${ee.cssRules[Ce].cssText}\r
`);J.appendChild(C.createTextNode(te)),C.head.appendChild(J)}}else if(G.getAttribute("href")){const J=C.createElement(G.tagName);for(let ee=0;ee<G.attributes.length;ee+=1){const te=G.attributes[ee];te&&J.setAttribute(te.nodeName,te.nodeValue||"")}$.push(new Promise(ee=>{J.addEventListener("load",()=>ee())})),C.head.appendChild(J)}}}Promise.all($).then(()=>{m.contentWindow.print()})},[e,o,t.columnHeaderHeight]),d=f.useCallback(m=>{var g;o.current.body.removeChild(m),e.current.restoreState(s.current||{}),(g=s.current)!=null&&(g=g.columns)!=null&&g.columnVisibilityModel||e.current.setColumnVisibilityModel(i.current),e.current.unstable_setVirtualization(!0),e.current.setRows(a.current),s.current=null,i.current={},a.current=[]},[e]),p={exportDataAsPrint:f.useCallback(async m=>{if(n.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");s.current=e.current.exportState(),i.current=fn(e);const g=Bn(e);if(a.current=Go(e).map(x=>g[x]),t.pagination){const b={page:0,pageSize:kg(e)};e.current.setState(C=>j({},C,{pagination:j({},C.pagination,{paginationModel:ci(C.pagination,"DataGridPro",b)})})),e.current.forceUpdate()}await l(m?.fields,m?.allColumns,m?.includeCheckboxes),m!=null&&m.getRowsToExport&&u(m.getRowsToExport),e.current.unstable_setVirtualization(!1),await z2();const v=G2(m?.fileName);v.onload=()=>{c(v,m),v.contentWindow.matchMedia("print").addEventListener("change",b=>{b.matches===!1&&d(v)})},o.current.body.appendChild(v)},[t,n,e,c,d,l,u])};Oe(e,p,"public");const y=f.useCallback((m,g)=>{var v;return(v=g.printOptions)!=null&&v.disableToolbarButton?m:[...m,{component:r.jsx(pT,{options:g.printOptions}),componentName:"printExport"}]},[]);dt(e,"exportMenu",y)},W2=(e,t,n)=>{var o,s,i;const a=(o=(s=t.filterModel)!=null?s:(i=t.initialState)==null||(i=i.filter)==null?void 0:i.filterModel)!=null?o:as();return j({},e,{filter:{filterModel:lx(a,t.disableMultipleColumnsFiltering,n),filteredRowsLookup:{},filteredDescendantCountLookup:{}},visibleRowsLookup:{}})},q2=e=>e.filteredRowsLookup;function tf(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function K2(){return sa(Object.values)}const Q2=(e,t)=>{var n,o;const s=Et(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:bt,changeEvent:"filterModelChange"});const i=f.useCallback(()=>{e.current.setState(O=>{const S=bt(O,e.current.instanceId),N=t.filterMode==="client"?_T(S,e,t.disableEval):null,D=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:N,filterModel:S??as()}),w=j({},O,{filter:j({},O.filter,D)}),E=tf(e,w);return j({},w,{visibleRowsLookup:E})}),e.current.publishEvent("filteredRowsSet")},[e,t.filterMode,t.disableEval]),a=f.useCallback((O,S)=>S==null||S.filterable===!1||t.disableColumnFilter?O:[...O,"columnMenuFilterItem"],[t.disableColumnFilter]),l=f.useCallback(()=>{i(),e.current.forceUpdate()},[e,i]),u=f.useCallback(O=>{const S=bt(e),N=[...S.items],D=N.findIndex(w=>w.id===O.id);D===-1?N.push(O):N[D]=O,e.current.setFilterModel(j({},S,{items:N}),"upsertFilterItem")},[e]),c=f.useCallback(O=>{const S=bt(e),N=[...S.items];O.forEach(D=>{const w=O.findIndex(E=>E.id===D.id);w===-1?N.push(D):N[w]=D}),e.current.setFilterModel(j({},S,{items:O}),"upsertFilterItems")},[e]),d=f.useCallback(O=>{const S=bt(e),N=S.items.filter(D=>D.id!==O.id);N.length!==S.items.length&&e.current.setFilterModel(j({},S,{items:N}),"deleteFilterItem")},[e]),h=f.useCallback((O,S,N)=>{if(s.debug("Displaying filter panel"),O){const D=bt(e),w=D.items.filter(L=>{var _;if(L.value!==void 0)return!(Array.isArray(L.value)&&L.value.length===0);const z=(_=e.current.getColumn(L.field).filterOperators)==null?void 0:_.find(J=>J.value===L.operator);return!(typeof z?.requiresFilterValue>"u"?!0:z?.requiresFilterValue)});let E;const M=w.find(L=>L.field===O),$=e.current.getColumn(O);M?E=w:t.disableMultipleColumnsFiltering?E=[Jl({field:O,operator:$.filterOperators[0].value},e)]:E=[...w,Jl({field:O,operator:$.filterOperators[0].value},e)],e.current.setFilterModel(j({},D,{items:E}))}e.current.showPreferences($r.filters,S,N)},[e,s,t.disableMultipleColumnsFiltering]),p=f.useCallback(()=>{s.debug("Hiding filter panel"),e.current.hidePreferences()},[e,s]),y=f.useCallback(O=>{const S=bt(e);S.logicOperator!==O&&e.current.setFilterModel(j({},S,{logicOperator:O}),"changeLogicOperator")},[e]),m=f.useCallback(O=>{const S=bt(e);_r(S.quickFilterValues,O)||e.current.setFilterModel(j({},S,{quickFilterValues:[...O]}))},[e]),g=f.useCallback((O,S)=>{bt(e)!==O&&(s.debug("Setting filter model"),e.current.updateControlState("filter",zh(O,t.disableMultipleColumnsFiltering,e),S),e.current.unstable_applyFilters())},[e,s,t.disableMultipleColumnsFiltering]),v={setFilterLogicOperator:y,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:u,upsertFilterItems:c,setFilterModel:g,showFilterPanel:h,hideFilterPanel:p,setQuickFilterValues:m,ignoreDiacritics:t.ignoreDiacritics};Oe(e,v,"public");const x=f.useCallback((O,S)=>{var N;const D=bt(e);return!S.exportOnlyDirtyModels||t.filterModel!=null||((N=t.initialState)==null||(N=N.filter)==null?void 0:N.filterModel)!=null||!_r(D,as())?j({},O,{filter:{filterModel:D}}):O},[e,t.filterModel,(n=t.initialState)==null||(n=n.filter)==null?void 0:n.filterModel]),b=f.useCallback((O,S)=>{var N;const D=(N=S.stateToRestore.filter)==null?void 0:N.filterModel;return D==null?O:(e.current.updateControlState("filter",zh(D,t.disableMultipleColumnsFiltering,e),"restoreState"),j({},O,{callbacks:[...O.callbacks,e.current.unstable_applyFilters]}))},[e,t.disableMultipleColumnsFiltering]),C=f.useCallback((O,S)=>{if(S===$r.filters){var N;const D=t.slots.filterPanel;return r.jsx(D,j({},(N=t.slotProps)==null?void 0:N.filterPanel))}return O},[t.slots.filterPanel,(o=t.slotProps)==null?void 0:o.filterPanel]),{getRowId:P}=t,F=iu(K2),T=f.useCallback(O=>{if(t.filterMode!=="client"||!O.isRowMatchingFilters)return{filteredRowsLookup:{},filteredDescendantCountLookup:{}};const S=Bn(e),N={},{isRowMatchingFilters:D}=O,w={},E={passingFilterItems:null,passingQuickFilterValues:null},M=F.current(e.current.state.rows.dataRowIdToModelLookup);for(let _=0;_<M.length;_+=1){const B=M[_],z=P?P(B):B.id;D(B,void 0,E);const G=$T([E.passingFilterItems],[E.passingQuickFilterValues],O.filterModel,e,w);N[z]=G}const $="auto-generated-group-footer-root";return S[$]&&(N[$]=!0),{filteredRowsLookup:N,filteredDescendantCountLookup:{}}},[e,t.filterMode,P,F]);dt(e,"columnMenu",a),dt(e,"exportState",x),dt(e,"restoreState",b),dt(e,"preferencePanel",C),$i(e,Vr,"filtering",T),$i(e,Vr,"visibleRowsLookupCreation",q2);const I=f.useCallback(()=>{s.debug("onColUpdated - GridColumns changed, applying filters");const O=bt(e),S=V1(e),N=O.items.filter(D=>D.field&&S[D.field]);N.length<O.items.length&&e.current.setFilterModel(j({},O,{items:N}))},[e,s]),R=f.useCallback(O=>{O==="filtering"&&e.current.unstable_applyFilters()},[e]),V=f.useCallback(()=>{e.current.setState(O=>j({},O,{visibleRowsLookup:tf(e,O)})),e.current.forceUpdate()},[e]);me(e,"rowsSet",i),me(e,"columnsChange",I),me(e,"activeStrategyProcessorChange",R),me(e,"rowExpansionChange",V),me(e,"columnVisibilityModelChange",()=>{const O=bt(e);O.quickFilterValues&&O.quickFilterExcludeHiddenColumns&&e.current.unstable_applyFilters()}),Ps(()=>{e.current.unstable_applyFilters()}),kt(()=>{t.filterModel!==void 0&&e.current.setFilterModel(t.filterModel)},[e,s,t.filterModel])},Y2=e=>j({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),X2=(e,t)=>{const n=Et(e,"useGridFocus"),o=f.useRef(null),s=f.useCallback((I,R)=>{I&&e.current.getRow(I.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(I.id,I.field),R)},[e]),i=f.useCallback((I,R)=>{const V=Qt(e);V?.id===I&&V?.field===R||(e.current.setState(O=>(n.debug(`Focusing on cell with id=${I} and field=${R}`),j({},O,{tabIndex:{cell:{id:I,field:R},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:I,field:R},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),e.current.forceUpdate(),e.current.getRow(I)&&(V&&s(V,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(I,R))))},[e,n,s]),a=f.useCallback((I,R={})=>{const V=Qt(e);s(V,R),e.current.setState(O=>(n.debug(`Focusing on column header with colIndex=${I}`),j({},O,{tabIndex:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),l=f.useCallback((I,R={})=>{const V=Qt(e);s(V,R),e.current.setState(O=>(n.debug(`Focusing on column header filter with colIndex=${I}`),j({},O,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),u=f.useCallback((I,R,V={})=>{const O=Qt(e);O&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(O.id,O.field),V),e.current.setState(S=>j({},S,{tabIndex:{columnGroupHeader:{field:I,depth:R},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:I,depth:R},columnHeader:null,columnHeaderFilter:null,cell:null}})),e.current.forceUpdate()},[e]),c=f.useCallback(()=>Ti(e),[e]),d=f.useCallback((I,R,V)=>{let O=e.current.getColumnIndex(R);const S=Pt(e),N=_i(e,{pagination:t.pagination,paginationMode:t.paginationMode}),D=Po(e),w=[].concat(D.top||[],N.rows,D.bottom||[]);let E=w.findIndex(_=>_.id===I);V==="right"?O+=1:V==="left"?O-=1:E+=1,O>=S.length?(E+=1,E<w.length&&(O=0)):O<0&&(E-=1,E>=0&&(O=S.length-1)),E=Co(E,0,w.length-1);const M=w[E];if(!M)return;const $=e.current.unstable_getCellColSpanInfo(M.id,O);$&&$.spannedByColSpan&&(V==="left"||V==="below"?O=$.leftVisibleCellIndex:V==="right"&&(O=$.rightVisibleCellIndex)),O=Co(O,0,S.length-1);const L=S[O];e.current.setCellFocus(M.id,L.field)},[e,t.pagination,t.paginationMode]),h=f.useCallback(({id:I,field:R})=>{e.current.setCellFocus(I,R)},[e]),p=f.useCallback((I,R)=>{R.key==="Enter"||R.key==="Tab"||R.key==="Shift"||Fi(R.key)||e.current.setCellFocus(I.id,I.field)},[e]),y=f.useCallback(({field:I},R)=>{R.target===R.currentTarget&&e.current.setColumnHeaderFocus(I,R)},[e]),m=f.useCallback(({fields:I,depth:R},V)=>{if(V.target!==V.currentTarget)return;const O=Ti(e);O!==null&&O.depth===R&&I.includes(O.field)||e.current.setColumnGroupHeaderFocus(I[0],R,V)},[e]),g=f.useCallback((I,R)=>{var V;(V=R.relatedTarget)!=null&&V.className.includes(H.columnHeader)||(n.debug("Clearing focus"),e.current.setState(O=>j({},O,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))},[n,e]),v=f.useCallback(I=>{o.current=I},[]),x=f.useCallback(I=>{const R=o.current;o.current=null;const V=Qt(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:I,cell:R}))return;if(!V){R&&e.current.setCellFocus(R.id,R.field);return}if(R?.id===V.id&&R?.field===V.field)return;const S=e.current.getCellElement(V.id,V.field);S!=null&&S.contains(I.target)||(R?e.current.setCellFocus(R.id,R.field):(e.current.setState(N=>j({},N,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})),e.current.forceUpdate(),s(V,I)))},[e,s]),b=f.useCallback(I=>{if(I.cellMode==="view")return;const R=Qt(e);(R?.id!==I.id||R?.field!==I.field)&&e.current.setCellFocus(I.id,I.field)},[e]),C=f.useCallback(()=>{const I=Qt(e);I&&!e.current.getRow(I.id)&&e.current.setState(R=>j({},R,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))},[e]),P=pn(()=>{const I=Qt(e);if(!I)return;const R=_i(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(R.rows.find(S=>S.id===I.id))return;const O=Pt(e);e.current.setState(S=>j({},S,{tabIndex:{cell:{id:R.rows[0].id,field:O[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}}))}),F={setCellFocus:i,setColumnHeaderFocus:a,setColumnHeaderFilterFocus:l},T={moveFocusToRelativeCell:d,setColumnGroupHeaderFocus:u,getColumnGroupHeaderFocus:c};Oe(e,F,"public"),Oe(e,T,"private"),f.useEffect(()=>{const I=Hi(e.current.rootElementRef.current);return I.addEventListener("mouseup",x),()=>{I.removeEventListener("mouseup",x)}},[e,x]),me(e,"columnHeaderBlur",g),me(e,"cellDoubleClick",h),me(e,"cellMouseDown",v),me(e,"cellKeyDown",p),me(e,"cellModeChange",b),me(e,"columnHeaderFocus",y),me(e,"columnGroupHeaderFocus",m),me(e,"rowsSet",C),me(e,"paginationModelChange",P)};function J2(e,t){const n=Po(e)||{};return[...n.top||[],...t,...n.bottom||[]]}const ol=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e<n)return e+1}else if(o==="ltr"&&e>t)return e-1;return null},sl=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e>t)return e-1}else if(o==="ltr"&&e<n)return e+1;return null},Z2=(e,t)=>{const n=Et(e,"useGridKeyboardNavigation"),o=Wr(e,t).rows,s=$t(),i=f.useMemo(()=>J2(e,o),[e,o]),a=t.signature!=="DataGrid"&&t.unstable_headerFilters,l=f.useCallback((x,b,C="left")=>{const P=mr(e),F=e.current.unstable_getCellColSpanInfo(b,x);F&&F.spannedByColSpan&&(C==="left"?x=F.leftVisibleCellIndex:C==="right"&&(x=F.rightVisibleCellIndex));const T=P.findIndex(R=>R.id===b);n.debug(`Navigating to cell row ${T}, col ${x}`),e.current.scrollToIndexes({colIndex:x,rowIndex:T});const I=e.current.getVisibleColumns()[x].field;e.current.setCellFocus(b,I)},[e,n]),u=f.useCallback((x,b)=>{n.debug(`Navigating to header col ${x}`),e.current.scrollToIndexes({colIndex:x});const C=e.current.getVisibleColumns()[x].field;e.current.setColumnHeaderFocus(C,b)},[e,n]),c=f.useCallback((x,b)=>{n.debug(`Navigating to header filter col ${x}`),e.current.scrollToIndexes({colIndex:x});const C=e.current.getVisibleColumns()[x].field;e.current.setColumnHeaderFilterFocus(C,b)},[e,n]),d=f.useCallback((x,b,C)=>{n.debug(`Navigating to header col ${x}`),e.current.scrollToIndexes({colIndex:x});const{field:P}=e.current.getVisibleColumns()[x];e.current.setColumnGroupHeaderFocus(P,b,C)},[e,n]),h=f.useCallback(x=>{var b;return(b=i[x])==null?void 0:b.id},[i]),p=f.useCallback((x,b)=>{const C=b.currentTarget.querySelector(`.${H.columnHeaderTitleContainerContent}`);if(!!C&&C.contains(b.target)&&x.field!==Io.field||!e.current.getRootDimensions())return;const T=e.current.getViewportPageSize(),I=x.field?e.current.getColumnIndex(x.field):0,R=i.length>0?0:null,V=i.length-1,O=0,S=Pt(e).length-1,N=js(e);let D=!0;switch(b.key){case"ArrowDown":{R!==null&&(a?c(I,b):l(I,h(R)));break}case"ArrowRight":{const w=sl({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});w!==null&&u(w,b);break}case"ArrowLeft":{const w=ol({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});w!==null&&u(w,b);break}case"ArrowUp":{N>0&&d(I,N-1,b);break}case"PageDown":{R!==null&&V!==null&&l(I,h(Math.min(R+T,V)));break}case"Home":{u(O,b);break}case"End":{u(S,b);break}case"Enter":{(b.ctrlKey||b.metaKey)&&e.current.toggleColumnMenu(x.field);break}case" ":break;default:D=!1}D&&b.preventDefault()},[e,i.length,a,c,l,h,s.direction,u,d]),y=f.useCallback((x,b)=>{if(!e.current.getRootDimensions())return;const P=CI(e)===x.field,F=wI(e)===x.field;if(P||F||!Fi(b.key))return;const T=e.current.getViewportPageSize(),I=x.field?e.current.getColumnIndex(x.field):0,R=0,V=i.length-1,O=0,S=Pt(e).length-1;let N=!0;switch(b.key){case"ArrowDown":{const D=h(R);D!=null&&l(I,D);break}case"ArrowRight":{const D=sl({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});D!==null&&c(D,b);break}case"ArrowLeft":{const D=ol({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});D!==null?c(D,b):e.current.setColumnHeaderFilterFocus(x.field,b);break}case"ArrowUp":{u(I,b);break}case"PageDown":{V!==null&&l(I,h(Math.min(R+T,V)));break}case"Home":{c(O,b);break}case"End":{c(S,b);break}case" ":break;default:N=!1}N&&b.preventDefault()},[e,i.length,c,s.direction,u,l,h]),m=f.useCallback((x,b)=>{if(!e.current.getRootDimensions())return;const P=Ti(e);if(P===null)return;const{field:F,depth:T}=P,{fields:I,depth:R,maxDepth:V}=x,O=e.current.getViewportPageSize(),S=e.current.getColumnIndex(F),N=F?e.current.getColumnIndex(F):0,D=0,w=i.length-1,E=0,M=Pt(e).length-1;let $=!0;switch(b.key){case"ArrowDown":{R===V-1?u(S,b):d(S,T+1,b);break}case"ArrowUp":{R>0&&d(S,T-1,b);break}case"ArrowRight":{const L=I.length-I.indexOf(F)-1;S+L+1<=M&&d(S+L+1,T,b);break}case"ArrowLeft":{const L=I.indexOf(F);S-L-1>=E&&d(S-L-1,T,b);break}case"PageDown":{w!==null&&l(N,h(Math.min(D+O,w)));break}case"Home":{d(E,T,b);break}case"End":{d(M,T,b);break}case" ":break;default:$=!1}$&&b.preventDefault()},[e,i.length,u,d,l,h]),g=f.useCallback((x,b)=>{if(Ss(b))return;const C=e.current.getCellParams(x.id,x.field);if(C.cellMode===Ke.Edit||!Fi(b.key)||!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:b,cell:C}))return;const F=e.current.getRootDimensions();if(i.length===0||!F)return;const T=s.direction,I=e.current.getViewportPageSize(),R=x.field?e.current.getColumnIndex(x.field):0,V=i.findIndex(E=>E.id===x.id),O=0,S=i.length-1,N=0,D=Pt(e).length-1;let w=!0;switch(b.key){case"ArrowDown":{V<S&&l(R,h(V+1));break}case"ArrowUp":{V>O?l(R,h(V-1)):a?c(R,b):u(R,b);break}case"ArrowRight":{const E=sl({currentColIndex:R,firstColIndex:N,lastColIndex:D,direction:T});E!==null&&l(E,h(V),T==="rtl"?"left":"right");break}case"ArrowLeft":{const E=ol({currentColIndex:R,firstColIndex:N,lastColIndex:D,direction:T});E!==null&&l(E,h(V),T==="rtl"?"right":"left");break}case"Tab":{b.shiftKey&&R>N?l(R-1,h(V),"left"):!b.shiftKey&&R<D&&l(R+1,h(V),"right");break}case" ":{if(x.field===wu)break;const M=x.colDef;if(M&&M.type==="treeDataGroup")break;!b.shiftKey&&V<S&&l(R,h(Math.min(V+I,S)));break}case"PageDown":{V<S&&l(R,h(Math.min(V+I,S)));break}case"PageUp":{const E=Math.max(V-I,O);E!==V&&E>=O?l(R,h(E)):u(R,b);break}case"Home":{b.ctrlKey||b.metaKey||b.shiftKey?l(N,h(O)):l(N,h(V));break}case"End":{b.ctrlKey||b.metaKey||b.shiftKey?l(D,h(S)):l(D,h(V));break}default:w=!1}w&&b.preventDefault()},[e,i,s.direction,l,h,a,c,u]),v=f.useCallback((x,{event:b})=>b.key===" "?!1:x,[]);dt(e,"canStartEditing",v),me(e,"columnHeaderKeyDown",p),me(e,"headerFilterKeyDown",y),me(e,"columnGroupHeaderKeyDown",m),me(e,"cellKeyDown",g)},eA=(e,t)=>{var n;const o=Et(e,"useGridRowCount"),s=ae(e,Ig),i=ae(e,co);e.current.registerControlState({stateId:"paginationRowCount",propModel:t.rowCount,propOnChange:t.onRowCountChange,stateSelector:co,changeEvent:"rowCountChange"});const l={setRowCount:f.useCallback(d=>{i!==d&&(o.debug("Setting 'rowCount' to",d),e.current.setState(h=>j({},h,{pagination:j({},h.pagination,{rowCount:d})})))},[e,o,i])};Oe(e,l,"public");const u=f.useCallback((d,h)=>{var p;const y=co(e);return!h.exportOnlyDirtyModels||t.rowCount!=null||((p=t.initialState)==null||(p=p.pagination)==null?void 0:p.rowCount)!=null?j({},d,{pagination:j({},d.pagination,{rowCount:y})}):d},[e,t.rowCount,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.rowCount]),c=f.useCallback((d,h)=>{var p;const y=(p=h.stateToRestore.pagination)!=null&&p.rowCount?h.stateToRestore.pagination.rowCount:co(e);return e.current.setState(m=>j({},m,{pagination:j({},m.pagination,{rowCount:y})})),d},[e]);dt(e,"exportState",u),dt(e,"restoreState",c),f.useEffect(()=>{},[t.rowCount,t.paginationMode]),f.useEffect(()=>{t.paginationMode==="client"?e.current.setRowCount(s):t.rowCount!=null&&e.current.setRowCount(t.rowCount)},[e,s,t.paginationMode,t.rowCount])},tA=(e,t)=>{var n,o,s,i,a;const l=j({},Wg(t.autoPageSize),(n=t.paginationModel)!=null?n:(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.paginationModel);qg(l.pageSize,t.signature);const u=(s=(i=t.rowCount)!=null?i:(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.rowCount)!=null?s:0;return j({},e,{pagination:{paginationModel:l,rowCount:u}})},nA=(e,t)=>{H2(e,t),eA(e,t)},rA=(e,t)=>{var n,o;return j({},e,{preferencePanel:(n=(o=t.initialState)==null?void 0:o.preferencePanel)!=null?n:{open:!1}})},oA=(e,t)=>{var n;const o=Et(e,"useGridPreferencesPanel"),s=f.useRef(),i=f.useRef(),a=f.useCallback(()=>{o.debug("Hiding Preferences Panel");const p=ls(e.current.state);p.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:p.openedPanelValue}),e.current.setState(y=>j({},y,{preferencePanel:{open:!1}})),e.current.forceUpdate()},[e,o]),l=f.useCallback(()=>{i.current=setTimeout(()=>clearTimeout(s.current),0)},[]),u=f.useCallback(()=>{s.current=setTimeout(a,100)},[a]),c=f.useCallback((p,y,m)=>{o.debug("Opening Preferences Panel"),l(),e.current.setState(g=>j({},g,{preferencePanel:j({},g.preferencePanel,{open:!0,openedPanelValue:p,panelId:y,labelId:m})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:p}),e.current.forceUpdate()},[o,l,e]);Oe(e,{showPreferences:c,hidePreferences:u},"public");const d=f.useCallback((p,y)=>{var m;const g=ls(e.current.state);return!y.exportOnlyDirtyModels||((m=t.initialState)==null?void 0:m.preferencePanel)!=null||g.open?j({},p,{preferencePanel:g}):p},[e,(n=t.initialState)==null?void 0:n.preferencePanel]),h=f.useCallback((p,y)=>{const m=y.stateToRestore.preferencePanel;return m!=null&&e.current.setState(g=>j({},g,{preferencePanel:m})),p},[e]);dt(e,"exportState",d),dt(e,"restoreState",h),f.useEffect(()=>()=>{clearTimeout(s.current),clearTimeout(i.current)},[])},sA=["id","field"],iA=["id","field"],aA=On(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),lA=(e,t)=>{const[n,o]=f.useState({}),s=f.useRef(n),i=f.useRef({}),{processRowUpdate:a,onProcessRowUpdateError:l,cellModesModel:u,onCellModesModelChange:c}=t,d=w=>(...E)=>{t.editMode===Dn.Cell&&w(...E)},h=f.useCallback((w,E)=>{const M=e.current.getCellParams(w,E);if(!e.current.isCellEditable(M))throw new Error(`MUI: The cell with id=${w} and field=${E} is not editable.`)},[e]),p=f.useCallback((w,E,M)=>{if(e.current.getCellMode(w,E)!==M)throw new Error(`MUI: The cell with id=${w} and field=${E} is not in ${M} mode.`)},[e]),y=f.useCallback((w,E)=>{if(!w.isEditable||w.cellMode===Ke.Edit)return;const M=j({},w,{reason:$n.cellDoubleClick});e.current.publishEvent("cellEditStart",M,E)},[e]),m=f.useCallback((w,E)=>{if(w.cellMode===Ke.View||e.current.getCellMode(w.id,w.field)===Ke.View)return;const M=j({},w,{reason:ln.cellFocusOut});e.current.publishEvent("cellEditStop",M,E)},[e]),g=f.useCallback((w,E)=>{if(w.cellMode===Ke.Edit){if(E.which===229)return;let M;if(E.key==="Escape"?M=ln.escapeKeyDown:E.key==="Enter"?M=ln.enterKeyDown:E.key==="Tab"&&(M=E.shiftKey?ln.shiftTabKeyDown:ln.tabKeyDown,E.preventDefault()),M){const $=j({},w,{reason:M});e.current.publishEvent("cellEditStop",$,E)}}else if(w.isEditable){let M;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:E,cellParams:w,editMode:"cell"}))return;if($g(E)?M=$n.printableKeyDown:(E.ctrlKey||E.metaKey)&&E.key==="v"?M=$n.pasteKeyDown:E.key==="Enter"?M=$n.enterKeyDown:(E.key==="Delete"||E.key==="Backspace")&&(M=$n.deleteKeyDown),M){const L=j({},w,{reason:M,key:E.key});e.current.publishEvent("cellEditStart",L,E)}}},[e]),v=f.useCallback(w=>{const{id:E,field:M,reason:$}=w,L={id:E,field:M};($===$n.printableKeyDown||$===$n.deleteKeyDown||$===$n.pasteKeyDown)&&(L.deleteValue=!0),e.current.startCellEditMode(L)},[e]),x=f.useCallback(w=>{const{id:E,field:M,reason:$}=w;e.current.runPendingEditCellValueMutation(E,M);let L;$===ln.enterKeyDown?L="below":$===ln.tabKeyDown?L="right":$===ln.shiftTabKeyDown&&(L="left");const _=$==="escapeKeyDown";e.current.stopCellEditMode({id:E,field:M,ignoreModifications:_,cellToFocusAfter:L})},[e]);me(e,"cellDoubleClick",d(y)),me(e,"cellFocusOut",d(m)),me(e,"cellKeyDown",d(g)),me(e,"cellEditStart",d(v)),me(e,"cellEditStop",d(x)),tt(e,"cellEditStart",t.onCellEditStart),tt(e,"cellEditStop",t.onCellEditStop);const b=f.useCallback((w,E)=>{const M=_t(e.current.state);return M[w]&&M[w][E]?Ke.Edit:Ke.View},[e]),C=pn(w=>{const E=w!==t.cellModesModel;c&&E&&c(w,{}),!(t.cellModesModel&&E)&&(o(w),s.current=w,e.current.publishEvent("cellModesModelChange",w))}),P=f.useCallback((w,E,M)=>{const $=j({},s.current);if(M!==null)$[w]=j({},$[w],{[E]:j({},M)});else{const L=$[w],_=ce(L,[E].map(ts));$[w]=_,Object.keys($[w]).length===0&&delete $[w]}C($)},[C]),F=f.useCallback((w,E,M)=>{e.current.setState($=>{const L=j({},$.editRows);return M!==null?L[w]=j({},L[w],{[E]:j({},M)}):(delete L[w][E],Object.keys(L[w]).length===0&&delete L[w]),j({},$,{editRows:L})}),e.current.forceUpdate()},[e]),T=f.useCallback(w=>{const{id:E,field:M}=w,$=ce(w,sA);h(E,M),p(E,M,Ke.View),P(E,M,j({mode:Ke.Edit},$))},[h,p,P]),I=pn(w=>{const{id:E,field:M,deleteValue:$,initialValue:L}=w;let _=e.current.getCellValue(E,M);($||L)&&(_=$?"":L),F(E,M,{value:_,error:!1,isProcessingProps:!1}),e.current.setCellFocus(E,M)}),R=f.useCallback(w=>{const{id:E,field:M}=w,$=ce(w,iA);p(E,M,Ke.Edit),P(E,M,j({mode:Ke.View},$))},[p,P]),V=pn(async w=>{const{id:E,field:M,ignoreModifications:$,cellToFocusAfter:L="none"}=w;p(E,M,Ke.Edit),e.current.runPendingEditCellValueMutation(E,M);const _=()=>{F(E,M,null),P(E,M,null),L!=="none"&&e.current.moveFocusToRelativeCell(E,M,L)};if($){_();return}const B=_t(e.current.state),{error:z,isProcessingProps:G}=B[E][M];if(z||G){i.current[E][M].mode=Ke.Edit,P(E,M,{mode:Ke.Edit});return}const J=e.current.getRowWithUpdatedValuesFromCellEditing(E,M);if(a){const ee=te=>{i.current[E][M].mode=Ke.Edit,P(E,M,{mode:Ke.Edit}),l?l(te):aA()};try{const te=e.current.getRow(E);Promise.resolve(a(J,te)).then(Ce=>{e.current.updateRows([Ce]),_()}).catch(ee)}catch(te){ee(te)}}else e.current.updateRows([J]),_()}),O=f.useCallback(async w=>{var E;const{id:M,field:$,value:L,debounceMs:_,unstable_skipValueParser:B}=w;h(M,$),p(M,$,Ke.Edit);const z=e.current.getColumn($),G=e.current.getRow(M);let J=L;z.valueParser&&!B&&(J=z.valueParser(L,e.current.getCellParams(M,$)));let ee=_t(e.current.state),te=j({},ee[M][$],{value:J,changeReason:_?"debouncedSetEditCellValue":"setEditCellValue"});if(z.preProcessEditCellProps){const Ce=L!==ee[M][$].value;te=j({},te,{isProcessingProps:!0}),F(M,$,te),te=await Promise.resolve(z.preProcessEditCellProps({id:M,row:G,props:te,hasChanged:Ce}))}return e.current.getCellMode(M,$)===Ke.View?!1:(ee=_t(e.current.state),te=j({},te,{isProcessingProps:!1}),te.value=z.preProcessEditCellProps?ee[M][$].value:J,F(M,$,te),ee=_t(e.current.state),!((E=ee[M])!=null&&(E=E[$])!=null&&E.error))},[e,h,p,F]),S=f.useCallback((w,E)=>{const M=e.current.getColumn(E),$=_t(e.current.state),L=e.current.getRow(w);if(!$[w]||!$[w][E])return e.current.getRow(w);const{value:_}=$[w][E];return M.valueSetter?M.valueSetter({value:_,row:L}):j({},L,{[E]:_})},[e]),N={getCellMode:b,startCellEditMode:T,stopCellEditMode:R},D={setCellEditingEditCellValue:O,getRowWithUpdatedValuesFromCellEditing:S};Oe(e,N,"public"),Oe(e,D,"private"),f.useEffect(()=>{u&&C(u)},[u,C]),kt(()=>{const w=Ei(e),E=i.current;i.current=Gg(n),Object.entries(n).forEach(([M,$])=>{Object.entries($).forEach(([L,_])=>{var B,z;const G=((B=E[M])==null||(B=B[L])==null?void 0:B.mode)||Ke.View,J=(z=w[M])!=null?z:M;_.mode===Ke.Edit&&G===Ke.View?I(j({id:J,field:L},_)):_.mode===Ke.View&&G===Ke.Edit&&V(j({id:J,field:L},_))})})},[e,n,I,V])},cA=["id"],uA=["id"],dA=On(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),hA=(e,t)=>{const[n,o]=f.useState({}),s=f.useRef(n),i=f.useRef({}),a=f.useRef(null),l=f.useRef(null),{processRowUpdate:u,onProcessRowUpdateError:c,rowModesModel:d,onRowModesModelChange:h}=t,p=L=>(..._)=>{t.editMode===Dn.Row&&L(..._)},y=f.useCallback((L,_)=>{const B=e.current.getCellParams(L,_);if(!e.current.isCellEditable(B))throw new Error(`MUI: The cell with id=${L} and field=${_} is not editable.`)},[e]),m=f.useCallback((L,_)=>{if(e.current.getRowMode(L)!==_)throw new Error(`MUI: The row with id=${L} is not in ${_} mode.`)},[e]),g=f.useCallback((L,_)=>{if(!L.isEditable||e.current.getRowMode(L.id)===Ze.Edit)return;const B=e.current.getRowParams(L.id),z=j({},B,{field:L.field,reason:Xn.cellDoubleClick});e.current.publishEvent("rowEditStart",z,_)},[e]),v=f.useCallback(L=>{l.current=L},[]),x=f.useCallback((L,_)=>{L.isEditable&&e.current.getRowMode(L.id)!==Ze.View&&(l.current=null,a.current=setTimeout(()=>{var B;if(a.current=null,((B=l.current)==null?void 0:B.id)!==L.id){if(!e.current.getRow(L.id)||e.current.getRowMode(L.id)===Ze.View)return;const z=e.current.getRowParams(L.id),G=j({},z,{field:L.field,reason:Vn.rowFocusOut});e.current.publishEvent("rowEditStop",G,_)}}))},[e]);f.useEffect(()=>()=>{clearTimeout(a.current)},[]);const b=f.useCallback((L,_)=>{if(L.cellMode===Ze.Edit){if(_.which===229)return;let B;if(_.key==="Escape")B=Vn.escapeKeyDown;else if(_.key==="Enter")B=Vn.enterKeyDown;else if(_.key==="Tab"){const z=ia(e).filter(G=>e.current.getColumn(G).type===fa?!0:e.current.isCellEditable(e.current.getCellParams(L.id,G)));if(_.shiftKey?L.field===z[0]&&(B=Vn.shiftTabKeyDown):L.field===z[z.length-1]&&(B=Vn.tabKeyDown),_.preventDefault(),!B){const G=z.findIndex(ee=>ee===L.field),J=z[_.shiftKey?G-1:G+1];e.current.setCellFocus(L.id,J)}}if(B){const z=j({},e.current.getRowParams(L.id),{reason:B,field:L.field});e.current.publishEvent("rowEditStop",z,_)}}else if(L.isEditable){let B;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:_,cellParams:L,editMode:"row"}))return;if($g(_)||(_.ctrlKey||_.metaKey)&&_.key==="v"?B=Xn.printableKeyDown:_.key==="Enter"?B=Xn.enterKeyDown:(_.key==="Delete"||_.key==="Backspace")&&(B=Xn.deleteKeyDown),B){const G=e.current.getRowParams(L.id),J=j({},G,{field:L.field,reason:B});e.current.publishEvent("rowEditStart",J,_)}}},[e]),C=f.useCallback(L=>{const{id:_,field:B,reason:z}=L,G={id:_,fieldToFocus:B};(z===Xn.printableKeyDown||z===Xn.deleteKeyDown)&&(G.deleteValue=!!B),e.current.startRowEditMode(G)},[e]),P=f.useCallback(L=>{const{id:_,reason:B,field:z}=L;e.current.runPendingEditCellValueMutation(_);let G;B===Vn.enterKeyDown?G="below":B===Vn.tabKeyDown?G="right":B===Vn.shiftTabKeyDown&&(G="left");const J=B==="escapeKeyDown";e.current.stopRowEditMode({id:_,ignoreModifications:J,field:z,cellToFocusAfter:G})},[e]);me(e,"cellDoubleClick",p(g)),me(e,"cellFocusIn",p(v)),me(e,"cellFocusOut",p(x)),me(e,"cellKeyDown",p(b)),me(e,"rowEditStart",p(C)),me(e,"rowEditStop",p(P)),tt(e,"rowEditStart",t.onRowEditStart),tt(e,"rowEditStop",t.onRowEditStop);const F=f.useCallback(L=>{if(t.editMode===Dn.Cell)return Ze.View;const _=_t(e.current.state);return _[L]&&Object.keys(_[L]).length>0?Ze.Edit:Ze.View},[e,t.editMode]),T=pn(L=>{const _=L!==t.rowModesModel;h&&_&&h(L,{}),!(t.rowModesModel&&_)&&(o(L),s.current=L,e.current.publishEvent("rowModesModelChange",L))}),I=f.useCallback((L,_)=>{const B=j({},s.current);_!==null?B[L]=j({},_):delete B[L],T(B)},[T]),R=f.useCallback((L,_)=>{e.current.setState(B=>{const z=j({},B.editRows);return _!==null?z[L]=_:delete z[L],j({},B,{editRows:z})}),e.current.forceUpdate()},[e]),V=f.useCallback((L,_,B)=>{e.current.setState(z=>{const G=j({},z.editRows);return B!==null?G[L]=j({},G[L],{[_]:j({},B)}):(delete G[L][_],Object.keys(G[L]).length===0&&delete G[L]),j({},z,{editRows:G})}),e.current.forceUpdate()},[e]),O=f.useCallback(L=>{const{id:_}=L,B=ce(L,cA);m(_,Ze.View),I(_,j({mode:Ze.Edit},B))},[m,I]),S=pn(L=>{const{id:_,fieldToFocus:B,deleteValue:z,initialValue:G}=L,ee=qn(e).reduce((te,Ce)=>{if(!e.current.getCellParams(_,Ce).isEditable)return te;let Q=e.current.getCellValue(_,Ce);return B===Ce&&(z||G)&&(Q=z?"":G),te[Ce]={value:Q,error:!1,isProcessingProps:!1},te},{});R(_,ee),B&&e.current.setCellFocus(_,B)}),N=f.useCallback(L=>{const{id:_}=L,B=ce(L,uA);m(_,Ze.Edit),I(_,j({mode:Ze.View},B))},[m,I]),D=pn(L=>{const{id:_,ignoreModifications:B,field:z,cellToFocusAfter:G="none"}=L;e.current.runPendingEditCellValueMutation(_);const J=()=>{G!=="none"&&z&&e.current.moveFocusToRelativeCell(_,z,G),R(_,null),I(_,null)};if(B){J();return}const ee=_t(e.current.state),te=e.current.getRow(_);if(Object.values(ee[_]).some(le=>le.isProcessingProps)){i.current[_].mode=Ze.Edit;return}if(Object.values(ee[_]).some(le=>le.error)){i.current[_].mode=Ze.Edit,I(_,{mode:Ze.Edit});return}const Q=e.current.getRowWithUpdatedValuesFromRowEditing(_);if(u){const le=Y=>{i.current[_].mode=Ze.Edit,I(_,{mode:Ze.Edit}),c?c(Y):dA()};try{Promise.resolve(u(Q,te)).then(Y=>{e.current.updateRows([Y]),J()}).catch(le)}catch(Y){le(Y)}}else e.current.updateRows([Q]),J()}),w=f.useCallback(L=>{const{id:_,field:B,value:z,debounceMs:G,unstable_skipValueParser:J}=L;y(_,B);const ee=e.current.getColumn(B),te=e.current.getRow(_);let Ce=z;ee.valueParser&&!J&&(Ce=ee.valueParser(z,e.current.getCellParams(_,B)));let W=_t(e.current.state),Q=j({},W[_][B],{value:Ce,changeReason:G?"debouncedSetEditCellValue":"setEditCellValue"});return ee.preProcessEditCellProps||V(_,B,Q),new Promise(le=>{const Y=[];if(ee.preProcessEditCellProps){const ne=Q.value!==W[_][B].value;Q=j({},Q,{isProcessingProps:!0}),V(_,B,Q);const je=W[_],Z=ce(je,[B].map(ts)),ye=Promise.resolve(ee.preProcessEditCellProps({id:_,row:te,props:Q,hasChanged:ne,otherFieldsProps:Z})).then(xe=>{if(e.current.getRowMode(_)===Ze.View){le(!1);return}W=_t(e.current.state),xe=j({},xe,{isProcessingProps:!1}),xe.value=ee.preProcessEditCellProps?W[_][B].value:Ce,V(_,B,xe)});Y.push(ye)}Object.entries(W[_]).forEach(([ne,je])=>{if(ne===B)return;const Z=e.current.getColumn(ne);if(!Z.preProcessEditCellProps)return;je=j({},je,{isProcessingProps:!0}),V(_,ne,je),W=_t(e.current.state);const ye=W[_],xe=ce(ye,[ne].map(ts)),Se=Promise.resolve(Z.preProcessEditCellProps({id:_,row:te,props:je,hasChanged:!1,otherFieldsProps:xe})).then(ve=>{if(e.current.getRowMode(_)===Ze.View){le(!1);return}ve=j({},ve,{isProcessingProps:!1}),V(_,ne,ve)});Y.push(Se)}),Promise.all(Y).then(()=>{e.current.getRowMode(_)===Ze.Edit?(W=_t(e.current.state),le(!W[_][B].error)):le(!1)})})},[e,y,V]),E=f.useCallback(L=>{const _=_t(e.current.state),B=e.current.getRow(L);if(!_[L])return e.current.getRow(L);let z=j({},B);return Object.entries(_[L]).forEach(([G,J])=>{const ee=e.current.getColumn(G);ee.valueSetter?z=ee.valueSetter({value:J.value,row:z}):z[G]=J.value}),z},[e]),M={getRowMode:F,startRowEditMode:O,stopRowEditMode:N},$={setRowEditingEditCellValue:w,getRowWithUpdatedValuesFromRowEditing:E};Oe(e,M,"public"),Oe(e,$,"private"),f.useEffect(()=>{d&&T(d)},[d,T]),kt(()=>{const L=Ei(e),_=i.current;i.current=Gg(n),Object.entries(n).forEach(([B,z])=>{var G,J;const ee=((G=_[B])==null?void 0:G.mode)||Ze.View,te=(J=L[B])!=null?J:B;z.mode===Ze.Edit&&ee===Ze.View?S(j({id:te},z)):z.mode===Ze.View&&ee===Ze.Edit&&D(j({id:te},z))})},[e,n,S,D])},fA=e=>j({},e,{editRows:{}}),pA=(e,t)=>{lA(e,t),hA(e,t);const n=f.useRef({}),{isCellEditable:o}=t,s=f.useCallback(p=>is(p.rowNode)||!p.colDef.editable||!p.colDef.renderEditCell?!1:o?o(p):!0,[o]),i=(p,y,m,g)=>{if(!m){g();return}if(n.current[p]||(n.current[p]={}),n.current[p][y]){const[b]=n.current[p][y];clearTimeout(b)}const v=()=>{const[b]=n.current[p][y];clearTimeout(b),g(),delete n.current[p][y]},x=setTimeout(()=>{g(),delete n.current[p][y]},m);n.current[p][y]=[x,v]};f.useEffect(()=>{const p=n.current;return()=>{Object.entries(p).forEach(([y,m])=>{Object.keys(m).forEach(g=>{const[v]=p[y][g];clearTimeout(v),delete p[y][g]})})}},[]);const a=f.useCallback((p,y)=>{if(n.current[p]){if(!y)Object.keys(n.current[p]).forEach(m=>{const[,g]=n.current[p][m];g()});else if(n.current[p][y]){const[,m]=n.current[p][y];m()}}},[]),l=f.useCallback(p=>{const{id:y,field:m,debounceMs:g}=p;return new Promise(v=>{i(y,m,g,async()=>{const x=t.editMode===Dn.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(y,m)===Ke.Edit){const b=await x(p);v(b)}})})},[e,t.editMode]),u=f.useCallback((p,y)=>t.editMode===Dn.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(p,y):e.current.getRowWithUpdatedValuesFromRowEditing(p),[e,t.editMode]),c=f.useCallback((p,y)=>{var m,g;return(m=(g=_t(e.current.state)[p])==null?void 0:g[y])!=null?m:null},[e]),d={isCellEditable:s,setEditCellValue:l,getRowWithUpdatedValues:u,unstable_getEditCellMeta:c},h={runPendingEditCellValueMutation:a};Oe(e,d,"public"),Oe(e,h,"private")},mA=(e,t,n)=>(n.current.caches.rows=ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),j({},e,{rows:Ag({apiRef:n,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:null,previousTreeDepths:null})})),gA=(e,t)=>{const n=Et(e,"useGridRows"),o=Wr(e,t),s=f.useRef(Date.now()),i=Cu(),a=f.useCallback(D=>{const w=Bn(e)[D];if(w)return w;const E=e.current.getRowNode(D);return E&&is(E)?{[fo]:D}:null},[e]),l=t.getRowId,u=f.useCallback(D=>fo in D?D[fo]:l?l(D):D.id,[l]),c=f.useMemo(()=>o.rows.reduce((D,{id:w},E)=>(D[w]=E,D),{}),[o.rows]),d=f.useCallback(({cache:D,throttle:w})=>{const E=()=>{s.current=Date.now(),e.current.setState($=>j({},$,{rows:Ag({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:dn(e),previousTreeDepths:kh(e)})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(i.clear(),e.current.caches.rows=D,!w){E();return}const M=t.throttleRowsMs-(Date.now()-s.current);if(M>0){i.start(M,E);return}E()},[t.throttleRowsMs,t.rowCount,t.loading,e,i]),h=f.useCallback(D=>{n.debug(`Updating all rows, new length ${D.length}`);const w=ai({rows:D,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),E=e.current.caches.rows;w.rowsBeforePartialUpdates=E.rowsBeforePartialUpdates,d({cache:w,throttle:!0})},[n,t.getRowId,t.loading,t.rowCount,d,e]),p=f.useCallback(D=>{if(t.signature===En.DataGrid&&D.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const w=[];D.forEach(M=>{const $=Mi(M,t.getRowId,"A row was provided without id when calling updateRows():"),L=e.current.getRowNode($);if(L?.type==="pinnedRow"){const _=e.current.caches.pinnedRows,B=_.idLookup[$];B&&(_.idLookup[$]=j({},B,M))}else w.push(M)});const E=cP({updates:w,getRowId:t.getRowId,previousCache:e.current.caches.rows});d({cache:E,throttle:!0})},[t.signature,t.getRowId,d,e]),y=f.useCallback(()=>{const D=Go(e),w=Bn(e);return new Map(D.map(E=>{var M;return[E,(M=w[E])!=null?M:{}]}))},[e]),m=f.useCallback(()=>la(e),[e]),g=f.useCallback(()=>Go(e),[e]),v=f.useCallback(D=>c[D],[c]),x=f.useCallback((D,w)=>{const E=e.current.getRowNode(D);if(!E)throw new Error(`MUI: No row with id #${D} found`);if(E.type!=="group")throw new Error("MUI: Only group nodes can be expanded or collapsed");const M=j({},E,{childrenExpanded:w});e.current.setState($=>j({},$,{rows:j({},$.rows,{tree:j({},$.rows.tree,{[D]:M})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",M)},[e]),b=f.useCallback(D=>{var w;return(w=dn(e)[D])!=null?w:null},[e]),C=f.useCallback(({skipAutoGeneratedRows:D=!0,groupId:w,applySorting:E,applyFiltering:M})=>{const $=dn(e);let L;if(E){const _=$[w];if(!_)return[];const B=cu(e);L=[];const z=B.findIndex(G=>G===w)+1;for(let G=z;G<B.length&&$[B[G]].depth>_.depth;G+=1){const J=B[G];(!D||!is($[J]))&&L.push(J)}}else L=fu($,w,D);if(M){const _=Sg(e);L=L.filter(B=>_[B]!==!1)}return L},[e]),P=f.useCallback((D,w)=>{const E=e.current.getRowNode(D);if(!E)throw new Error(`MUI: No row with id #${D} found`);if(E.parent!==Lt)throw new Error("MUI: The row reordering do not support reordering of grouped rows yet");if(E.type!=="leaf")throw new Error("MUI: The row reordering do not support reordering of footer or grouping rows");e.current.setState(M=>{const $=dn(M,e.current.instanceId)[Lt],L=$.children,_=L.findIndex(z=>z===D);if(_===-1||_===w)return M;n.debug(`Moving row ${D} to index ${w}`);const B=[...L];return B.splice(w,0,B.splice(_,1)[0]),j({},M,{rows:j({},M.rows,{tree:j({},M.rows.tree,{[Lt]:j({},$,{children:B})})})})}),e.current.publishEvent("rowsSet")},[e,n]),F=f.useCallback((D,w)=>{if(t.signature===En.DataGrid&&w.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(w.length===0)return;if(ca(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const M=j({},dn(e)),$=j({},Bn(e)),L=j({},Ei(e)),_=M[Lt],B=[..._.children],z=new Set;for(let J=0;J<w.length;J+=1){const ee=w[J],te=Mi(ee,t.getRowId,"A row was provided without id when calling replaceRows()."),[Ce]=B.splice(D+J,1,te);z.has(Ce)||(delete $[Ce],delete L[Ce],delete M[Ce]);const W={id:te,depth:0,parent:Lt,type:"leaf",groupingKey:null};$[te]=ee,L[te]=te,M[te]=W,z.add(te)}M[Lt]=j({},_,{children:B});const G=B.filter(J=>M[J].type==="leaf");e.current.caches.rows.dataRowIdToModelLookup=$,e.current.caches.rows.dataRowIdToIdLookup=L,e.current.setState(J=>j({},J,{rows:j({},J.rows,{dataRowIdToModelLookup:$,dataRowIdToIdLookup:L,dataRowIds:G,tree:M})})),e.current.publishEvent("rowsSet")},[e,t.signature,t.getRowId]),T={getRow:a,getRowId:u,getRowModels:y,getRowsCount:m,getAllRowIds:g,setRows:h,updateRows:p,getRowNode:b,getRowIndexRelativeToVisibleRows:v,unstable_replaceRows:F},I={setRowIndex:P,setRowChildrenExpansion:x,getRowGroupChildren:C},R=f.useCallback(()=>{n.info("Row grouping pre-processing have changed, regenerating the row tree");let D;e.current.caches.rows.rowsBeforePartialUpdates===t.rows?D=j({},e.current.caches.rows,{updates:{type:"full",rows:Go(e)}}):D=ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),d({cache:D,throttle:!1})},[n,e,t.rows,t.getRowId,t.loading,t.rowCount,d]),V=f.useCallback(D=>{D==="rowTreeCreation"&&R()},[R]),O=f.useCallback(()=>{e.current.getActiveStrategy("rowTree")!==G1(e)&&R()},[e,R]);me(e,"activeStrategyProcessorChange",V),me(e,"strategyAvailabilityChange",O);const S=f.useCallback(()=>{e.current.setState(D=>{const w=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:dn(D,e.current.instanceId),treeDepths:kh(D,e.current.instanceId),dataRowIds:Go(D,e.current.instanceId),dataRowIdToModelLookup:Bn(D,e.current.instanceId),dataRowIdToIdLookup:Ei(D,e.current.instanceId)});return j({},D,{rows:j({},D.rows,w,{totalTopLevelRowCount:Tg({tree:w.tree,rowCountProp:t.rowCount})})})}),e.current.publishEvent("rowsSet"),e.current.forceUpdate()},[e,t.rowCount]);Su(e,"hydrateRows",S),Oe(e,T,"public"),Oe(e,I,t.signature===En.DataGrid?"private":"public");const N=f.useRef(!0);f.useEffect(()=>{if(N.current){N.current=!1;return}const D=e.current.caches.rows.rowsBeforePartialUpdates===t.rows,w=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,E=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;if(D){w||(e.current.setState(M=>j({},M,{rows:j({},M.rows,{loading:t.loading})})),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),E||(e.current.setState(M=>j({},M,{rows:j({},M.rows,{totalRowCount:Math.max(t.rowCount||0,M.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,M.rows.totalTopLevelRowCount)})})),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate());return}n.debug(`Updating all rows, new length ${t.rows.length}`),d({cache:ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1})},[t.rows,t.rowCount,t.getRowId,t.loading,n,d,e])},xA=e=>{const t={[Lt]:j({},aP(),{children:e})};for(let n=0;n<e.length;n+=1){const o=e[n];t[o]={id:o,depth:0,parent:Lt,type:"leaf",groupingKey:null}}return{groupingName:Vr,tree:t,treeDepths:{0:e.length},dataRowIds:e}},yA=({previousTree:e,actions:t})=>{const n=j({},e),o={};for(let a=0;a<t.remove.length;a+=1){const l=t.remove[a];o[l]=!0,delete n[l]}for(let a=0;a<t.insert.length;a+=1){const l=t.insert[a];n[l]={id:l,depth:0,parent:Lt,type:"leaf",groupingKey:null}}const s=n[Lt];let i=[...s.children,...t.insert];return Object.values(o).length&&(i=i.filter(a=>!o[a])),n[Lt]=j({},s,{children:i}),{groupingName:Vr,tree:n,treeDepths:{0:i.length},dataRowIds:i}},bA=e=>e.updates.type==="full"?xA(e.updates.rows):yA({previousTree:e.previousTree,actions:e.updates.actions}),vA=e=>{$i(e,Vr,"rowTreeCreation",bA)},vx=(e,t)=>e==null||Array.isArray(e)?e:t&&t[0]===e?t:[e],CA=(e,t)=>{var n;return j({},e,{rowSelection:t.rowSelection?(n=vx(t.rowSelectionModel))!=null?n:[]:[]})},wA=(e,t)=>{const n=Et(e,"useGridSelection"),o=w=>(...E)=>{t.rowSelection&&w(...E)},s=f.useMemo(()=>vx(t.rowSelectionModel,nn(e.current.state)),[e,t.rowSelectionModel]),i=f.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:s,propOnChange:t.onRowSelectionModelChange,stateSelector:nn,changeEvent:"rowSelectionChange"});const{checkboxSelection:a,disableMultipleRowSelection:l,disableRowSelectionOnClick:u,isRowSelectable:c}=t,d=!l||a,h=Wr(e,t),p=f.useCallback(w=>{var E;let M=w;const $=(E=i.current)!=null?E:w,L=e.current.isRowSelected(w);if(L){const _=Zo(e),B=_.findIndex(G=>G===$),z=_.findIndex(G=>G===M);if(B===z)return;B>z?M=_[z+1]:M=_[z-1]}i.current=w,e.current.selectRowRange({startId:$,endId:M},!L)},[e]),y=f.useCallback(w=>{if(t.signature===En.DataGrid&&!t.checkboxSelection&&Array.isArray(w)&&w.length>1)throw new Error(["MUI: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join(`
`));nn(e.current.state)!==w&&(n.debug("Setting selection model"),e.current.setState(M=>j({},M,{rowSelection:t.rowSelection?w:[]})),e.current.forceUpdate())},[e,n,t.rowSelection,t.signature,t.checkboxSelection]),m=f.useCallback(w=>nn(e.current.state).includes(w),[e]),g=f.useCallback(w=>{if(c&&!c(e.current.getRowParams(w)))return!1;const E=e.current.getRowNode(w);return!(E?.type==="footer"||E?.type==="pinnedRow")},[e,c]),v=f.useCallback(()=>fI(e),[e]),x=f.useCallback((w,E=!0,M=!1)=>{if(e.current.isRowSelectable(w))if(i.current=w,M)n.debug(`Setting selection for row ${w}`),e.current.setRowSelectionModel(E?[w]:[]);else{n.debug(`Toggling selection for row ${w}`);const L=nn(e.current.state).filter(B=>B!==w);E&&L.push(w),(L.length<2||d)&&e.current.setRowSelectionModel(L)}},[e,n,d]),b=f.useCallback((w,E=!0,M=!1)=>{n.debug("Setting selection for several rows");const $=w.filter(B=>e.current.isRowSelectable(B));let L;if(M)L=E?$:[];else{const B=j({},Oi(e));$.forEach(z=>{E?B[z]=z:delete B[z]}),L=Object.values(B)}(L.length<2||d)&&e.current.setRowSelectionModel(L)},[e,n,d]),C=f.useCallback(({startId:w,endId:E},M=!0,$=!1)=>{if(!e.current.getRow(w)||!e.current.getRow(E))return;n.debug(`Expanding selection from row ${w} to row ${E}`);const L=Zo(e),_=L.indexOf(w),B=L.indexOf(E),[z,G]=_>B?[B,_]:[_,B],J=L.slice(z,G+1);e.current.selectRows(J,M,$)},[e,n]),P={selectRow:x,setRowSelectionModel:y,getSelectedRows:v,isRowSelected:m,isRowSelectable:g},F={selectRows:b,selectRowRange:C};Oe(e,P,"public"),Oe(e,F,t.signature===En.DataGrid?"private":"public");const T=f.useCallback(()=>{if(t.keepNonExistentRowsSelected)return;const w=nn(e.current.state),E=Bn(e),M=j({},Oi(e));let $=!1;w.forEach(L=>{E[L]||(delete M[L],$=!0)}),$&&e.current.setRowSelectionModel(Object.values(M))},[e,t.keepNonExistentRowsSelected]),I=f.useCallback((w,E)=>{const M=E.metaKey||E.ctrlKey,$=!a&&!M&&!XP(E),L=!d||$,_=e.current.isRowSelected(w);L?e.current.selectRow(w,$?!0:!_,!0):e.current.selectRow(w,!_,!1)},[e,d,a]),R=f.useCallback((w,E)=>{var M;if(u)return;const $=(M=E.target.closest(`.${H.cell}`))==null?void 0:M.getAttribute("data-field");if($===Io.field||$===wu)return;if($){const _=e.current.getColumn($);if(_?.type===fa)return}e.current.getRowNode(w.id).type!=="pinnedRow"&&(E.shiftKey&&(d||a)?p(w.id):I(w.id,E))},[u,d,a,e,p,I]),V=f.useCallback((w,E)=>{if(d&&E.shiftKey){var M;(M=window.getSelection())==null||M.removeAllRanges()}},[d]),O=f.useCallback((w,E)=>{E.nativeEvent.shiftKey?p(w.id):e.current.selectRow(w.id,w.value)},[e,p]),S=f.useCallback(w=>{const M=t.checkboxSelectionVisibleOnly&&t.pagination?Qg(e):Zo(e),$=bt(e);e.current.selectRows(M,w.value,$?.items.length>0)},[e,t.checkboxSelectionVisibleOnly,t.pagination]),N=f.useCallback((w,E)=>{if(e.current.getCellMode(w.id,w.field)!==Ke.Edit&&!Ss(E)){if(Fi(E.key)&&E.shiftKey){const M=Qt(e);if(M&&M.id!==w.id){E.preventDefault();const $=e.current.isRowSelected(M.id);if(!d){e.current.selectRow(M.id,!$,!0);return}const L=e.current.getRowIndexRelativeToVisibleRows(M.id),_=e.current.getRowIndexRelativeToVisibleRows(w.id);let B,z;L>_?$?(B=_,z=L-1):(B=_,z=L):$?(B=L+1,z=_):(B=L,z=_);const G=h.rows.slice(B,z+1).map(J=>J.id);e.current.selectRows(G,!$);return}}if(E.key===" "&&E.shiftKey){E.preventDefault(),I(w.id,E);return}E.key==="a"&&(E.ctrlKey||E.metaKey)&&(E.preventDefault(),b(e.current.getAllRowIds(),!0))}},[e,I,b,h.rows,d]);me(e,"sortedRowsSet",o(T)),me(e,"rowClick",o(R)),me(e,"rowSelectionCheckboxChange",o(O)),me(e,"headerSelectionCheckboxChange",S),me(e,"cellMouseDown",o(V)),me(e,"cellKeyDown",o(N)),f.useEffect(()=>{s!==void 0&&e.current.setRowSelectionModel(s)},[e,s,t.rowSelection]),f.useEffect(()=>{t.rowSelection||e.current.setRowSelectionModel([])},[e,t.rowSelection]);const D=s!=null;f.useEffect(()=>{if(D||!t.rowSelection)return;const w=nn(e.current.state);if(g){const E=w.filter(M=>g(M));E.length<w.length&&e.current.setRowSelectionModel(E)}},[e,g,D,t.rowSelection]),f.useEffect(()=>{if(!t.rowSelection||D)return;const w=nn(e.current.state);!d&&w.length>1&&e.current.setRowSelectionModel([])},[e,d,a,D,t.rowSelection])},jA={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search…",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorEquals:"Equals",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>e!==1?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},SA=e=>{const{classes:t}=e;return f.useMemo(()=>Ee({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},He,t),[t])},PA=(e,t)=>{const n={classes:t.classes},o=SA(n),s=f.useCallback(i=>{const a=j({},Io,{cellClassName:o.cellCheckbox,headerClassName:o.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),l=t.checkboxSelection,u=i.lookup[Jn]!=null;return l&&!u?(i.lookup[Jn]=a,i.orderedFields=[Jn,...i.orderedFields]):!l&&u?(delete i.lookup[Jn],i.orderedFields=i.orderedFields.filter(c=>c!==Jn)):l&&u&&(i.lookup[Jn]=j({},a,i.lookup[Jn])),i},[e,o,t.checkboxSelection]);dt(e,"hydrateColumns",s)},kA=(e,t)=>{var n,o,s;const i=(n=(o=t.sortModel)!=null?o:(s=t.initialState)==null||(s=s.sorting)==null?void 0:s.sortModel)!=null?n:[];return j({},e,{sorting:{sortModel:Yg(i,t.disableMultipleColumnsSorting),sortedRows:[]}})},IA=(e,t)=>{var n;const o=Et(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:en,changeEvent:"sortModelChange"});const s=f.useCallback((T,I)=>{const R=en(e),V=R.findIndex(S=>S.field===T);let O=[...R];return V>-1?I?O.splice(V,1,I):O.splice(V,1):O=[...R,I],O},[e]),i=f.useCallback((T,I)=>{var R;const O=en(e).find(N=>N.field===T.field);if(O){var S;const N=I===void 0?Mh((S=T.sortingOrder)!=null?S:t.sortingOrder,O.sort):I;return N==null?void 0:j({},O,{sort:N})}return{field:T.field,sort:I===void 0?Mh((R=T.sortingOrder)!=null?R:t.sortingOrder):I}},[e,t.sortingOrder]),a=f.useCallback((T,I)=>I==null||I.sortable===!1?T:(I.sortingOrder||t.sortingOrder).some(V=>!!V)?[...T,"columnMenuSortItem"]:T,[t.sortingOrder]),l=f.useCallback(()=>{e.current.setState(T=>{if(t.sortingMode==="server")return o.debug("Skipping sorting rows as sortingMode = server"),j({},T,{sorting:j({},T.sorting,{sortedRows:fu(dn(e),Lt,!1)})});const I=en(T,e.current.instanceId),R=yI(I,e),V=e.current.applyStrategyProcessor("sorting",{sortRowList:R});return j({},T,{sorting:j({},T.sorting,{sortedRows:V})})}),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()},[e,o,t.sortingMode]),u=f.useCallback(T=>{en(e)!==T&&(o.debug("Setting sort model"),e.current.setState(Ah(T,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())},[e,o,t.disableMultipleColumnsSorting]),c=f.useCallback((T,I,R)=>{if(!T.sortable)return;const V=i(T,I);let O;!R||t.disableMultipleColumnsSorting?O=V?[V]:[]:O=s(T.field,V),e.current.setSortModel(O)},[e,s,i,t.disableMultipleColumnsSorting]),d=f.useCallback(()=>en(e),[e]),h=f.useCallback(()=>uu(e).map(I=>I.model),[e]),p=f.useCallback(()=>cu(e),[e]),y=f.useCallback(T=>e.current.getSortedRowIds()[T],[e]);Oe(e,{getSortModel:d,getSortedRows:h,getSortedRowIds:p,getRowIdFromRowIndex:y,setSortModel:u,sortColumn:c,applySorting:l},"public");const g=f.useCallback((T,I)=>{var R;const V=en(e);return!I.exportOnlyDirtyModels||t.sortModel!=null||((R=t.initialState)==null||(R=R.sorting)==null?void 0:R.sortModel)!=null||V.length>0?j({},T,{sorting:{sortModel:V}}):T},[e,t.sortModel,(n=t.initialState)==null||(n=n.sorting)==null?void 0:n.sortModel]),v=f.useCallback((T,I)=>{var R;const V=(R=I.stateToRestore.sorting)==null?void 0:R.sortModel;return V==null?T:(e.current.setState(Ah(V,t.disableMultipleColumnsSorting)),j({},T,{callbacks:[...T.callbacks,e.current.applySorting]}))},[e,t.disableMultipleColumnsSorting]),x=f.useCallback(T=>{const I=dn(e),R=I[Lt],V=T.sortRowList?T.sortRowList(R.children.map(O=>I[O])):[...R.children];return R.footerId!=null&&V.push(R.footerId),V},[e]);dt(e,"exportState",g),dt(e,"restoreState",v),$i(e,Vr,"sorting",x);const b=f.useCallback(({colDef:T},I)=>{const R=I.shiftKey||I.metaKey||I.ctrlKey;c(T,void 0,R)},[c]),C=f.useCallback(({colDef:T},I)=>{qP(I.key)&&!I.ctrlKey&&!I.metaKey&&c(T,void 0,I.shiftKey)},[c]),P=f.useCallback(()=>{const T=en(e),I=So(e);if(T.length>0){const R=T.filter(V=>I[V.field]);R.length<T.length&&e.current.setSortModel(R)}},[e]),F=f.useCallback(T=>{T==="sorting"&&e.current.applySorting()},[e]);dt(e,"columnMenu",a),me(e,"columnHeaderClick",b),me(e,"columnHeaderKeyDown",C),me(e,"rowsSet",e.current.applySorting),me(e,"columnsChange",P),me(e,"activeStrategyProcessorChange",F),Ps(()=>{e.current.applySorting()}),kt(()=>{t.sortModel!==void 0&&e.current.setSortModel(t.sortModel)},[e,t.sortModel])};function nf(e){const{clientHeight:t,scrollTop:n,offsetHeight:o,offsetTop:s}=e,i=s+o;if(o>t)return s;if(i-t>n)return i-t;if(s<n)return s}const EA=(e,t)=>{const n=$t(),o=Et(e,"useGridScroll"),s=e.current.columnHeadersElementRef,i=e.current.virtualScrollerRef,a=ae(e,mr),l=f.useCallback(h=>{const p=la(e),y=Pt(e);if(!(h.rowIndex==null)&&p===0||y.length===0)return!1;o.debug(`Scrolling to cell at row ${h.rowIndex}, col: ${h.colIndex} `);let g={};if(h.colIndex!=null){const C=vo(e);let P;if(typeof h.rowIndex<"u"){var v;const F=(v=a[h.rowIndex])==null?void 0:v.id,T=e.current.unstable_getCellColSpanInfo(F,h.colIndex);T&&!T.spannedByColSpan&&(P=T.cellProps.width)}typeof P>"u"&&(P=y[h.colIndex].computedWidth),g.left=nf({clientHeight:i.current.clientWidth,scrollTop:Math.abs(i.current.scrollLeft),offsetHeight:P,offsetTop:C[h.colIndex]})}if(h.rowIndex!=null){var x,b;const C=cs(e.current.state),P=cI(e),F=Kg(e),T=t.pagination?h.rowIndex-P*F:h.rowIndex,I=C.positions[T+1]?C.positions[T+1]-C.positions[T]:C.currentPageTotalHeight-C.positions[T],R=((x=i.current.querySelector(`.${H["pinnedRows--top"]}`))==null?void 0:x.clientHeight)||0,V=((b=i.current.querySelector(`.${H["pinnedRows--bottom"]}`))==null?void 0:b.clientHeight)||0;g.top=nf({clientHeight:i.current.clientHeight-R-V,scrollTop:i.current.scrollTop,offsetHeight:I,offsetTop:C.positions[T]})}return g=e.current.unstable_applyPipeProcessors("scrollToIndexes",g,h),typeof g.left!==void 0||typeof g.top!==void 0?(e.current.scroll(g),!0):!1},[o,e,i,t.pagination,a]),u=f.useCallback(h=>{if(i.current&&h.left!=null&&s.current){const p=n.direction==="rtl"?-1:1;s.current.scrollLeft=h.left,i.current.scrollLeft=p*h.left,o.debug(`Scrolling left: ${h.left}`)}i.current&&h.top!=null&&(i.current.scrollTop=h.top,o.debug(`Scrolling top: ${h.top}`)),o.debug("Scrolling, updating container, and viewport")},[i,n.direction,s,o]),c=f.useCallback(()=>i!=null&&i.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0},[i]);Oe(e,{scroll:u,scrollToIndexes:l,getScrollPosition:c},"public")};function TA(e,t){tt(e,"columnHeaderClick",t.onColumnHeaderClick),tt(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),tt(e,"columnHeaderOver",t.onColumnHeaderOver),tt(e,"columnHeaderOut",t.onColumnHeaderOut),tt(e,"columnHeaderEnter",t.onColumnHeaderEnter),tt(e,"columnHeaderLeave",t.onColumnHeaderLeave),tt(e,"cellClick",t.onCellClick),tt(e,"cellDoubleClick",t.onCellDoubleClick),tt(e,"cellKeyDown",t.onCellKeyDown),tt(e,"preferencePanelClose",t.onPreferencePanelClose),tt(e,"preferencePanelOpen",t.onPreferencePanelOpen),tt(e,"menuOpen",t.onMenuOpen),tt(e,"menuClose",t.onMenuClose),tt(e,"rowDoubleClick",t.onRowDoubleClick),tt(e,"rowClick",t.onRowClick),tt(e,"stateChange",t.onStateChange)}const AA=({content:e,container:t,scrollBarSize:n})=>{const o=e.width>t.width,s=e.height>t.height;let i=!1,a=!1;return(o||s)&&(i=o,a=e.height+(i?n:0)>t.height,a&&(i=e.width+n>t.width)),{hasScrollX:i,hasScrollY:a}};function MA(e,t){const n=Et(e,"useResizeContainer"),o=f.useRef(!1),s=f.useRef(null),i=f.useRef(null),a=ae(e,cs),l=ae(e,ko),u=Math.floor(t.rowHeight*l),c=Pu(e,t.columnHeaderHeight),d=f.useCallback(()=>{var I;const R=(I=e.current.rootElementRef)==null?void 0:I.current,V=lu(e),O=Mg(e);if(!s.current)return;let S;if(t.scrollbarSize!=null)S=t.scrollbarSize;else if(!V||!R)S=0;else{const _=Hi(R).createElement("div");_.style.width="99px",_.style.height="99px",_.style.position="absolute",_.style.overflow="scroll",_.className="scrollDiv",R.appendChild(_),S=_.offsetWidth-_.clientWidth,R.removeChild(_)}let N,D,w;if(t.autoHeight)w=!1,D=Math.round(V)>Math.round(s.current.width),N={width:s.current.width,height:a.currentPageTotalHeight+(D?S:0)};else{N={width:s.current.width,height:Math.max(s.current.height-c,0)};const L=AA({content:{width:Math.round(V),height:a.currentPageTotalHeight},container:{width:Math.round(N.width),height:N.height-O.top-O.bottom},scrollBarSize:S});w=L.hasScrollY,D=L.hasScrollX}const E={width:N.width-(w?S:0),height:N.height-(D?S:0)},M={viewportOuterSize:N,viewportInnerSize:E,hasScrollX:D,hasScrollY:w,scrollBarSize:S},$=i.current;i.current=M,(M.viewportInnerSize.width!==$?.viewportInnerSize.width||M.viewportInnerSize.height!==$?.viewportInnerSize.height)&&e.current.publishEvent("viewportInnerSizeChange",M.viewportInnerSize)},[e,t.scrollbarSize,t.autoHeight,a.currentPageTotalHeight,c]),[h,p]=f.useState(),y=f.useMemo(()=>qf(p,60),[]),m=f.useRef();kt(()=>{h&&(d(),e.current.publishEvent("debouncedResize",s.current))},[e,h,d]);const g=f.useCallback(()=>{e.current.computeSizeAndPublishResizeEvent()},[e]),v=f.useCallback(()=>i.current,[]),x=f.useCallback(()=>{const I=e.current.getRootDimensions();if(!I)return 0;const R=_i(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){const O=e.current.getRenderContext(),S=O.lastRowIndex-O.firstRowIndex;return Math.min(S-1,R.rows.length)}const V=Math.floor(I.viewportInnerSize.height/u);return Math.min(V,R.rows.length)},[e,t.pagination,t.paginationMode,t.getRowHeight,u]),b=f.useCallback(()=>{var I,R,V;const O=(I=e.current.mainElementRef)==null?void 0:I.current;if(!O)return;const N=Cy(O).getComputedStyle(O),D=parseFloat(N.height)||0,w=parseFloat(N.width)||0,E=D!==((R=m.current)==null?void 0:R.height),M=w!==((V=m.current)==null?void 0:V.width);if(!m.current||E||M){const $={width:w,height:D};e.current.publishEvent("resize",$),m.current=$}},[e]),C={resize:g,getRootDimensions:v},P={getViewportPageSize:x,updateGridDimensionsRef:d,computeSizeAndPublishResizeEvent:b};Oe(e,C,"public"),Oe(e,P,"private");const F=f.useRef(!0),T=f.useCallback(I=>{s.current=I;const R=/jsdom/.test(window.navigator.userAgent);if(I.height===0&&!o.current&&!t.autoHeight&&!R&&(n.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),I.width===0&&!o.current&&!R&&(n.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),F.current){p(I),F.current=!1;return}y(I)},[t.autoHeight,y,n]);kt(()=>d(),[d]),tt(e,"sortedRowsSet",d),tt(e,"paginationModelChange",d),tt(e,"columnsChange",d),me(e,"resize",T),tt(e,"debouncedResize",t.onResize)}const RA=["style"],DA=["style"];function wo(e,t,n=0,o=t.length){if(t.length<=0)return-1;if(n>=o)return n;const s=n+Math.floor((o-n)/2),i=t[s];return e<=i?wo(e,t,n,s):wo(e,t,s+1,o)}function FA(e,t,n){let o=1;for(;n<t.length&&Math.abs(t[n])<e;)n+=o,o*=2;return wo(e,t,Math.floor(n/2),Math.min(n,t.length))}const nr=({firstIndex:e,lastIndex:t,buffer:n,minFirstIndex:o,maxLastIndex:s})=>[Co(e-n,o,s),Co(t+n,o,s)],Cx=(e,t)=>e===t?!0:e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex,OA={maxSize:3},_A=e=>{const t=pr(),n=pe(),o=ae(t,Pt),s=ae(t,PI),i=ae(t,tx),{ref:a,onRenderZonePositioning:l,renderZoneMinColumnIndex:u=0,renderZoneMaxColumnIndex:c=o.length,getRowProps:d}=e,h=$t(),p=ae(t,vo),y=ae(t,lu),m=ae(t,Qt),g=ae(t,Ai),v=ae(t,cs),x=ae(t,Oi),b=Wr(t,n),C=f.useRef(null),P=f.useRef(null),F=Br(a,P),[T,I]=f.useState(null),R=f.useRef(T),V=f.useRef({top:0,left:0}),[O,S]=f.useState({width:null,height:null}),N=f.useRef(y),[D,w]=f.useState(null),E=f.useRef(Object.create(null)),M=f.useRef(),$=f.useRef(),L=f.useRef(sa((Z,ye,xe,Se,ve,Ae)=>{let We;const Ge=Z.slice(ye,xe);return Ae>-1&&(ye>Ae&&Ae>=Se||xe<Ae&&Ae<ve)&&(We=Ae),{focusedCellColumnIndexNotInRange:We,renderedColumns:Ge}},OA)),_=f.useMemo(()=>m!==null?o.findIndex(Z=>Z.field===m.field):-1,[m,o]),B=f.useCallback(()=>{if(!s)return{firstRowIndex:0,lastRowIndex:b.rows.length,firstColumnIndex:0,lastColumnIndex:o.length};const{top:Z,left:ye}=V.current,xe=Math.min(rf(t,b,v,Z),v.positions.length-1),Se=n.autoHeight?xe+b.rows.length:rf(t,b,v,Z+O.height);let ve=0,Ae=p.length;if(i){let We=!1;const[Ge,xt]=nr({firstIndex:xe,lastIndex:Se,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer});for(let Ie=Ge;Ie<xt&&!We;Ie+=1){const oe=b.rows[Ie];We=t.current.rowHasAutoHeight(oe.id)}We||(ve=wo(Math.abs(ye),p),Ae=wo(Math.abs(ye)+O.width,p))}return{firstRowIndex:xe,lastRowIndex:Se,firstColumnIndex:ve,lastColumnIndex:Ae}},[s,i,v,n.autoHeight,n.rowBuffer,b,p,o.length,t,O]);kt(()=>{s?(P.current.scrollLeft=0,P.current.scrollTop=0):C.current.style.transform="translate3d(0px, 0px, 0px)"},[s]),kt(()=>{S({width:P.current.clientWidth,height:P.current.clientHeight})},[v.currentPageTotalHeight]);const z=f.useCallback(()=>{P.current&&S({width:P.current.clientWidth,height:P.current.clientHeight})},[]);me(t,"debouncedResize",z);const G=f.useCallback(Z=>{const[ye,xe]=nr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer}),[Se]=nr({firstIndex:Z.firstColumnIndex,lastIndex:Z.lastColumnIndex,minFirstIndex:u,maxLastIndex:c,buffer:n.columnBuffer}),ve=nc({firstColumnToRender:Se,apiRef:t,firstRowToRender:ye,lastRowToRender:xe,visibleRows:b.rows}),Ae=h.direction==="ltr"?1:-1,We=cs(t.current.state).positions[ye],Ge=Ae*vo(t)[ve];C.current.style.transform=`translate3d(${Ge}px, ${We}px, 0px)`,typeof l=="function"&&l({top:We,left:Ge})},[t,b.rows,l,u,c,n.columnBuffer,n.rowBuffer,h.direction]),J=f.useCallback(()=>R.current,[]),ee=f.useCallback(Z=>{if(R.current&&Cx(Z,R.current)){G(Z);return}I(Z),G(Z);const[ye,xe]=nr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer});t.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:ye,lastRowToRender:xe}),R.current=Z},[t,I,R,b.rows.length,n.rowBuffer,G]);kt(()=>{if(O.width==null)return;const Z=B();ee(Z);const{top:ye,left:xe}=V.current,Se={top:ye,left:xe,renderContext:Z};t.current.publishEvent("scrollPositionChange",Se)},[t,B,O.width,ee]);const te=pn(Z=>{const{scrollTop:ye,scrollLeft:xe}=Z.currentTarget;if(V.current.top=ye,V.current.left=xe,!R.current||ye<0||h.direction==="ltr"&&xe<0||h.direction==="rtl"&&xe>0)return;const Se=s?B():R.current,ve=Math.abs(Se.firstRowIndex-R.current.firstRowIndex),Ae=Math.abs(Se.lastRowIndex-R.current.lastRowIndex),We=Math.abs(Se.firstColumnIndex-R.current.firstColumnIndex),Ge=Math.abs(Se.lastColumnIndex-R.current.lastColumnIndex),xt=ve>=n.rowThreshold||Ae>=n.rowThreshold||We>=n.columnThreshold||Ge>=n.columnThreshold||N.current!==y;t.current.publishEvent("scrollPositionChange",{top:ye,left:xe,renderContext:xt?Se:R.current},Z),xt&&(kc.flushSync(()=>{ee(Se)}),N.current=y)}),Ce=pn(Z=>{t.current.publishEvent("virtualScrollerWheel",{},Z)}),W=pn(Z=>{t.current.publishEvent("virtualScrollerTouchMove",{},Z)}),Q=f.useMemo(()=>m!==null?b.rows.findIndex(Z=>Z.id===m.id):-1,[m,b.rows]);me(t,"rowMouseOver",(Z,ye)=>{var xe;ye.currentTarget.contains(ye.relatedTarget)||w((xe=Z.id)!=null?xe:null)}),me(t,"rowMouseOut",(Z,ye)=>{ye.currentTarget.contains(ye.relatedTarget)||w(null)});const le=(Z={renderContext:T})=>{var ye;const{onRowRender:xe,renderContext:Se,minFirstColumn:ve=u,maxLastColumn:Ae=c,availableSpace:We=O.width,rowIndexOffset:Ge=0,position:xt="center"}=Z;if(!Se||We==null)return null;const Ie=s?n.rowBuffer:0,oe=s?n.columnBuffer:0,[fe,we]=nr({firstIndex:Se.firstRowIndex,lastIndex:Se.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:Ie}),$e=[];if(Z.rows)Z.rows.forEach(wt=>{$e.push(wt),t.current.calculateColSpan({rowId:wt.id,minFirstColumn:ve,maxLastColumn:Ae,columns:o})});else{if(!b.range)return null;for(let wt=fe;wt<we;wt+=1){const ht=b.rows[wt];$e.push(ht),t.current.calculateColSpan({rowId:ht.id,minFirstColumn:ve,maxLastColumn:Ae,columns:o})}}let st=!1;if(Q>-1){const wt=b.rows[Q];(fe>Q||we<Q)&&(st=!0,Q>fe?$e.push(wt):$e.unshift(wt),t.current.calculateColSpan({rowId:wt.id,minFirstColumn:ve,maxLastColumn:Ae,columns:o}))}const[an,vn]=nr({firstIndex:Se.firstColumnIndex,lastIndex:Se.lastColumnIndex,minFirstIndex:ve,maxLastIndex:Ae,buffer:oe}),qr=nc({firstColumnToRender:an,apiRef:t,firstRowToRender:fe,lastRowToRender:we,visibleRows:b.rows});let Rs=!1;(qr>_||vn<_)&&(Rs=!0);const{focusedCellColumnIndexNotInRange:Tt,renderedColumns:At}=L.current(o,qr,vn,ve,Ae,Rs?_:-1),xr=((ye=n.slotProps)==null?void 0:ye.row)||{},{style:yr}=xr,Ca=ce(xr,RA);(M.current!==d||$.current!==yr)&&(E.current=Object.create(null));const Ds=[];let Mu=!1;for(let wt=0;wt<$e.length;wt+=1){var Ru;const{id:ht,model:Du}=$e[wt],ry=st&&m.id===ht,oy=st?fe+wt===b.rows.length:fe+wt===b.rows.length-1,sy=t.current.rowHasAutoHeight(ht)?"auto":t.current.unstable_getRowHeight(ht);let wa;x[ht]==null?wa=!1:wa=t.current.isRowSelectable(ht),xe&&xe(ht);const Fu=m!==null&&m.id===ht?m.field:null,Ou=Tt!==void 0&&o[Tt],iy=Ou&&Fu?[Ou,...At]:At;let _u=null;g!==null&&g.id===ht&&(_u=t.current.getCellParams(ht,g.field).cellMode==="view"?g.field:null);const Lu=typeof d=="function"&&d(ht,Du)||{},{style:ay}=Lu,ly=ce(Lu,DA);if(!E.current[ht]){const $u=j({},ay,yr);E.current[ht]=$u}let ja=Ge+((b==null||(Ru=b.range)==null?void 0:Ru.firstRowIndex)||0)+fe+wt;st&&m?.id===ht?(ja=Q,Mu=!0):Mu&&(ja-=1),Ds.push(r.jsx(n.slots.row,j({row:Du,rowId:ht,focusedCellColumnIndexNotInRange:Tt,isNotVisible:ry,rowHeight:sy,focusedCell:Fu,tabbableCell:_u,renderedColumns:iy,visibleColumns:o,firstColumnToRender:qr,lastColumnToRender:vn,selected:wa,index:ja,containerWidth:We,isLastVisible:oy,position:xt},ly,Ca,{hovered:D===ht,style:E.current[ht]}),ht))}return M.current=d,$.current=yr,Ds},Y=O.width&&y>=O.width,ne=f.useMemo(()=>{const Z=Math.max(v.currentPageTotalHeight,1);let ye=!1;P!=null&&P.current&&Z<=P?.current.clientHeight&&(ye=!0);const xe={width:Y?y:"auto",height:Z,minHeight:ye?"100%":"auto"};return n.autoHeight&&b.rows.length===0&&(xe.height=Rg(t,n.rowHeight)),xe},[t,P,y,v.currentPageTotalHeight,Y,n.autoHeight,n.rowHeight,b.rows.length]);f.useEffect(()=>{t.current.publishEvent("virtualScrollerContentSizeChange")},[t,ne]);const je=f.useMemo(()=>{const Z={};return Y||(Z.overflowX="hidden"),n.autoHeight&&(Z.overflowY="hidden"),Z},[Y,n.autoHeight]);return t.current.register("private",{getRenderContext:J}),{renderContext:T,updateRenderZonePosition:G,getRows:le,getRootProps:(Z={})=>j({ref:F,onScroll:te,onWheel:Ce,onTouchMove:W},Z,{style:Z.style?j({},Z.style,je):je,role:"presentation"}),getContentProps:({style:Z}={})=>({style:Z?j({},Z,ne):ne,role:"presentation"}),getRenderZoneProps:()=>({ref:C,role:"rowgroup"})}};function rf(e,t,n,o){var s,i;const a=e.current.getLastMeasuredRowIndex();let l=a===1/0;(s=t.range)!=null&&s.lastRowIndex&&!l&&(l=a>=t.range.lastRowIndex);const u=Co(a-(((i=t.range)==null?void 0:i.firstRowIndex)||0),0,n.positions.length);return l||n.positions[u]>=o?wo(o,n.positions):FA(o,n.positions,u)}const LA=e=>{const{classes:t,headerAlign:n,isDragging:o,showColumnBorder:s,groupId:i}=e;return Ee({root:["columnHeader",n==="left"&&"columnHeader--alignLeft",n==="center"&&"columnHeader--alignCenter",n==="right"&&"columnHeader--alignRight",o&&"columnHeader--moving",s&&"columnHeader--showColumnBorder",s&&"columnHeader--withRightBorder","withBorderColor",i===null?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},He,t)};function $A(e){var t;const{groupId:n,width:o,depth:s,maxDepth:i,fields:a,height:l,colIndex:u,hasFocus:c,tabIndex:d,isLastColumn:h}=e,p=pe(),y=f.useRef(null),m=Be(),g=ae(m,Cg),v=n?g[n]:{},{headerName:x=n??"",description:b="",headerAlign:C=void 0}=v;let P;const F=n&&((t=g[n])==null?void 0:t.renderHeaderGroup),T=f.useMemo(()=>({groupId:n,headerName:x,description:b,depth:s,maxDepth:i,fields:a,colIndex:u,isLastColumn:h}),[n,x,b,s,i,a,u,h]);n&&F&&(P=F(T));const I=p.showColumnVerticalBorder,R=j({},e,{classes:p.classes,showColumnBorder:I,headerAlign:C,depth:s,isDragging:!1}),V=x??n,O=pt(),S=n===null?`empty-group-cell-${O}`:n,N=LA(R);f.useLayoutEffect(()=>{if(c){const $=y.current.querySelector('[tabindex="0"]')||y.current;$?.focus()}},[m,c]);const D=f.useCallback(M=>$=>{Ss($)||m.current.publishEvent(M,T,$)},[m,T]),w=f.useMemo(()=>({onKeyDown:D("columnGroupHeaderKeyDown"),onFocus:D("columnGroupHeaderFocus"),onBlur:D("columnGroupHeaderBlur")}),[D]),E=typeof v.headerClassName=="function"?v.headerClassName(T):v.headerClassName;return r.jsx(Hg,j({ref:y,classes:N,columnMenuOpen:!1,colIndex:u,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:d,isDraggable:!1,headerComponent:P,headerClassName:E,description:b,elementId:S,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:V,"aria-colspan":a.length,"data-fields":`|-${a.join("-|-")}-|`},w))}const of=Ye("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})(()=>({display:"flex"}));function VA(e){return!!e.target}const NA=e=>{const{innerRef:t,minColumnIndex:n=0,visibleColumns:o,sortColumnLookup:s,filterColumnLookup:i,columnPositions:a,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:u,columnHeaderFocus:c,columnGroupHeaderFocus:d,densityFactor:h,headerGroupingMaxDepth:p,columnMenuState:y,columnVisibility:m,columnGroupsHeaderStructure:g,hasOtherElementInTabSequence:v}=e,x=$t(),[b,C]=f.useState(""),[P,F]=f.useState(""),T=pr(),I=ae(T,tx),R=pe(),V=f.useRef(null),O=Br(t,V),[S,N]=f.useState(null),D=f.useRef(S),w=f.useRef(0),E=Wr(T,R),M=Pu(T,R.columnHeaderHeight),$=Math.floor(R.columnHeaderHeight*h),L=f.useCallback(Y=>{S&&Y&&Cx(S,Y)||N(Y)},[S]);f.useEffect(()=>{var Y;(Y=T.current.columnHeadersContainerElementRef)!=null&&Y.current&&(T.current.columnHeadersContainerElementRef.current.scrollLeft=0)},[T]);const _=f.useRef(sa(R2,{equalityCheck:(Y,ne)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every(je=>Y[je]===ne[je])})),B=f.useCallback(Y=>{const[ne,je]=nr({firstIndex:Y.firstRowIndex,lastIndex:Y.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:R.rowBuffer}),Z=_.current({firstColumnIndex:Y.firstColumnIndex,minColumnIndex:n,columnBuffer:R.columnBuffer,firstRowToRender:ne,lastRowToRender:je,apiRef:T,visibleRows:E.rows}),ye=x.direction==="ltr"?1:-1,xe=Z>0?w.current-ye*a[Z]:w.current;V.current.style.transform=`translate3d(${-xe}px, 0px, 0px)`},[a,n,R.columnBuffer,T,E.rows,R.rowBuffer,x.direction]);f.useLayoutEffect(()=>{S&&B(S)},[S,B]);const z=f.useCallback(({left:Y,renderContext:ne=null},je)=>{var Z,ye;if(!V.current||w.current===Y&&((Z=D.current)==null?void 0:Z.firstColumnIndex)===ne?.firstColumnIndex&&((ye=D.current)==null?void 0:ye.lastColumnIndex)===ne?.lastColumnIndex)return;w.current=Y;let xe=!1;ne!==D.current||!D.current?(VA(je)?(kc.flushSync(()=>{L(ne)}),xe=!0):L(ne),D.current=ne):xe=!0,ne&&xe&&B(ne)},[B,L]),G=f.useCallback(Y=>F(Y.field),[]),J=f.useCallback(()=>F(""),[]),ee=f.useCallback(Y=>C(Y.field),[]),te=f.useCallback(()=>C(""),[]);me(T,"columnResizeStart",G),me(T,"columnResizeStop",J),me(T,"columnHeaderDragStart",ee),me(T,"columnHeaderDragEnd",te),me(T,"scrollPositionChange",z);const Ce=Y=>{const{renderContext:ne=S,minFirstColumn:je=n,maxLastColumn:Z=o.length}=Y||{};if(!ne)return null;const[ye,xe]=nr({firstIndex:ne.firstRowIndex,lastIndex:ne.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:R.rowBuffer}),Se=I?_.current({firstColumnIndex:ne.firstColumnIndex,minColumnIndex:je,columnBuffer:R.columnBuffer,apiRef:T,firstRowToRender:ye,lastRowToRender:xe,visibleRows:E.rows}):0,ve=I?Math.min(ne.lastColumnIndex+R.columnBuffer,Z):Z;return{renderedColumns:o.slice(Se,ve),firstColumnToRender:Se,lastColumnToRender:ve,minFirstColumn:je,maxLastColumn:Z}},W=(Y,ne={})=>{const je=Ce(Y);if(je==null)return null;const{renderedColumns:Z,firstColumnToRender:ye}=je,xe=[];for(let Se=0;Se<Z.length;Se+=1){const ve=Z[Se],Ae=ye+Se,We=Ae===0,Ge=l!==null&&l.field===ve.field||We&&!v?0:-1,xt=c!==null&&c.field===ve.field,Ie=y.open&&y.field===ve.field;xe.push(r.jsx(Kk,j({},s[ve.field],{columnMenuOpen:Ie,filterItemsCounter:i[ve.field]&&i[ve.field].length,headerHeight:$,isDragging:ve.field===b,colDef:ve,colIndex:Ae,isResizing:P===ve.field,hasFocus:xt,tabIndex:Ge},ne),ve.field))}return r.jsx(of,{role:"row","aria-rowindex":p+1,ownerState:R,children:xe})},Q=Y=>{if(p===0)return null;const ne=Ce(Y);if(ne==null||ne.renderedColumns.length===0)return null;const{firstColumnToRender:je,lastColumnToRender:Z}=ne,ye=[],xe=[];for(let Ae=0;Ae<p;Ae+=1){var Se,ve;const We=g[Ae],Ge=o[je].field,xt=(Se=T.current.unstable_getColumnGroupPath(Ge)[Ae])!=null?Se:null,Ie=We.findIndex(({groupId:Tt,columnFields:At})=>Tt===xt&&At.includes(Ge)),oe=o[Z-1].field,fe=(ve=T.current.unstable_getColumnGroupPath(oe)[Ae])!=null?ve:null,we=We.findIndex(({groupId:Tt,columnFields:At})=>Tt===fe&&At.includes(oe)),$e=We.slice(Ie,we+1).map(Tt=>j({},Tt,{columnFields:Tt.columnFields.filter(At=>m[At]!==!1)})).filter(Tt=>Tt.columnFields.length>0),st=$e[0].columnFields.indexOf(Ge),vn=$e[0].columnFields.slice(0,st).reduce((Tt,At)=>{var xr;const yr=T.current.getColumn(At);return Tt+((xr=yr.computedWidth)!=null?xr:0)},0);let qr=je;const Rs=$e.map(({groupId:Tt,columnFields:At})=>{const xr=d!==null&&d.depth===Ae&&At.includes(d.field),yr=u!==null&&u.depth===Ae&&At.includes(u.field)?0:-1,Ca={groupId:Tt,width:At.reduce((Au,Ds)=>Au+T.current.getColumn(Ds).computedWidth,0),fields:At,colIndex:qr,hasFocus:xr,tabIndex:yr};return qr+=At.length,Ca});xe.push({leftOverflow:vn,elements:Rs})}return xe.forEach((Ae,We)=>{ye.push(r.jsx(of,{style:{height:`${$}px`,transform:`translateX(-${Ae.leftOverflow}px)`},role:"row","aria-rowindex":We+1,ownerState:R,children:Ae.elements.map(({groupId:Ge,width:xt,fields:Ie,colIndex:oe,hasFocus:fe,tabIndex:we},$e)=>r.jsx($A,{groupId:Ge,width:xt,fields:Ie,colIndex:oe,depth:We,isLastColumn:oe===o.length-Ie.length,maxDepth:xe.length,height:$,hasFocus:fe,tabIndex:we},$e))},We))}),ye},le={minHeight:M,maxHeight:M,lineHeight:`${$}px`};return{renderContext:S,getColumnHeaders:W,getColumnsToRender:Ce,getColumnGroupHeaders:Q,isDragging:!!b,getRootProps:(Y={})=>j({style:le},Y),getInnerProps:()=>({ref:O,role:"rowgroup"}),headerHeight:$}},BA=["className"],HA=e=>{const{classes:t}=e;return Ee({root:["columnHeaders","withBorderColor"]},He,t)},zA=It("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})({position:"relative",overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:"1px solid",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),GA=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,BA),i=pe(),a=HA(i);return r.jsx(zA,j({ref:n,className:Ve(o,a.root),ownerState:i},s,{role:"presentation"}))}),UA=["isDragging","className"],WA=e=>{const{isDragging:t,hasScrollX:n,classes:o}=e;return Ee({root:["columnHeadersInner",t&&"columnHeaderDropZone",n&&"columnHeadersInner--scrollable"]},He,o)},qA=It("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,t)=>[{[`&.${H.columnHeaderDropZone}`]:t.columnHeaderDropZone},t.columnHeadersInner]})(()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${H.columnHeaderDropZone} .${H.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${H["columnHeadersInner--scrollable"]} .${H.columnHeader}:last-child`]:{borderRight:"none"}})),KA=f.forwardRef(function(t,n){var o,s;const{isDragging:i,className:a}=t,l=ce(t,UA),u=Be(),c=pe(),d=j({},c,{isDragging:i,hasScrollX:(o=(s=u.current.getRootDimensions())==null?void 0:s.hasScrollX)!=null?o:!1}),h=WA(d);return r.jsx(qA,j({ref:n,className:Ve(a,h.root),ownerState:d},l))}),QA=["innerRef","className","visibleColumns","sortColumnLookup","filterColumnLookup","columnPositions","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","densityFactor","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],YA=f.forwardRef(function(t,n){const{innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:h,densityFactor:p,headerGroupingMaxDepth:y,columnMenuState:m,columnVisibility:g,columnGroupsHeaderStructure:v,hasOtherElementInTabSequence:x}=t,b=ce(t,QA),{isDragging:C,getRootProps:P,getInnerProps:F,getColumnHeaders:T,getColumnGroupHeaders:I}=NA({innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:h,densityFactor:p,headerGroupingMaxDepth:y,columnMenuState:m,columnVisibility:g,columnGroupsHeaderStructure:v,hasOtherElementInTabSequence:x});return r.jsx(GA,j({ref:n},P(b),{children:r.jsxs(KA,j({isDragging:C},F(),{children:[I(),T()]}))}))}),XA=ha(YA),JA=f.forwardRef(function(t,n){const s=Be().current.getLocaleText("noResultsOverlayLabel");return r.jsx(mu,j({ref:n},t,{children:s}))}),ZA=["sortingOrder"],eM=f.memo(function(t){const{sortingOrder:n}=t,o=ce(t,ZA),s=pe(),[i]=n,a=i==="asc"?s.slots.columnSortedAscendingIcon:s.slots.columnSortedDescendingIcon;return a?r.jsx(a,j({},o)):null}),tM=["native"];function nM(e){let{native:t}=e,n=ce(e,tM);return t?r.jsx("option",j({},n)):r.jsx(se,j({},n))}const rM={BooleanCellTrueIcon:WI,BooleanCellFalseIcon:rl,ColumnMenuIcon:HI,OpenFilterButtonIcon:OI,FilterPanelDeleteIcon:rl,ColumnFilteredIcon:_h,ColumnSelectorIcon:LI,ColumnUnsortedIcon:eM,ColumnSortedAscendingIcon:Rh,ColumnSortedDescendingIcon:Dh,ColumnResizeIcon:$I,DensityCompactIcon:VI,DensityStandardIcon:NI,DensityComfortableIcon:BI,ExportIcon:UI,MoreActionsIcon:qI,TreeDataCollapseIcon:Oh,TreeDataExpandIcon:Fh,GroupingCriteriaCollapseIcon:Oh,GroupingCriteriaExpandIcon:Fh,DetailPanelExpandIcon:Lh,DetailPanelCollapseIcon:zI,RowReorderIcon:$h,QuickFilterIcon:_I,QuickFilterClearIcon:rl,ColumnMenuHideIcon:KI,ColumnMenuSortAscendingIcon:Rh,ColumnMenuSortDescendingIcon:Dh,ColumnMenuFilterIcon:_h,ColumnMenuManageColumnsIcon:QI,ColumnMenuClearIcon:YI,LoadIcon:GI,FilterPanelAddIcon:Lh,FilterPanelRemoveAllIcon:XI,ColumnReorderIcon:$h},oM=j({},rM,{BaseCheckbox:Nf,BaseTextField:De,BaseFormControl:ut,BaseSelect:mt,BaseSwitch:Sn,BaseButton:X,BaseIconButton:Pe,BaseInputAdornment:Er,BaseTooltip:yt,BasePopper:gc,BaseInputLabel:vt,BaseSelectOption:nM,BaseChip:be}),sM=j({},oM,{Cell:Ql,SkeletonCell:pk,ColumnHeaderFilterIconButton:II,ColumnMenu:hE,ColumnHeaders:XA,Footer:bT,FooterRowCount:ET,Toolbar:null,PreferencesPanel:VE,LoadingOverlay:CT,NoResultsOverlay:JA,NoRowsOverlay:wT,Pagination:ST,FilterPanel:iT,ColumnsPanel:DE,Panel:$E,Row:KT}),wx=e=>{if(e!==void 0)return Object.keys(e).reduce((t,n)=>j({},t,{[`${n.charAt(0).toLowerCase()}${n.slice(1)}`]:e[n]}),{})};function iM({defaultSlots:e,slots:t,components:n}){const o=t??(n?wx(n):null);if(!o||Object.keys(o).length===0)return e;const s=j({},e);return Object.keys(o).forEach(i=>{const a=i;o[a]!==void 0&&(s[a]=o[a])}),s}const aM=["components","componentsProps"];function lM(e){var t;const n=Object.keys(e);if(!n.some(i=>i.startsWith("aria-")||i.startsWith("data-")))return e;const o={},s=(t=e.forwardedProps)!=null?t:{};for(let i=0;i<n.length;i+=1){const a=n[i];a.startsWith("aria-")||a.startsWith("data-")?s[a]=e[a]:o[a]=e[a]}return o.forwardedProps=s,o}function cM(e){return f.useMemo(()=>{const{components:t,componentsProps:n}=e,o=ce(e,aM);return[t,n,lM(o)]},[e])}const uM={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleRowSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},pa={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,rowSelection:!0,density:"standard",disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleRowSelection:!1,disableMultipleColumnsSorting:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:Dn.Cell,filterMode:"client",filterDebounceMs:150,columnHeaderHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:"client",rowHeight:52,pageSizeOptions:[25,50,100],rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingOrder:["asc","desc",null],sortingMode:"client",throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1,unstable_ignoreValueFormatterDuringExport:!1,clipboardCopyCellDelimiter:"	",rowPositionsDebounceMs:166},dM=wx(sM),hM=e=>{const[t,n,o]=cM(hr({props:e,name:"MuiDataGrid"})),s=f.useMemo(()=>j({},jA,o.localeText),[o.localeText]),i=f.useMemo(()=>iM({defaultSlots:dM,slots:o.slots,components:t}),[t,o.slots]);return f.useMemo(()=>{var a;return j({},pa,o,{localeText:s,slots:i,slotProps:(a=o.slotProps)!=null?a:n},uM)},[o,s,i,n])},fM=e=>j({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),sf=(e,t,n)=>typeof e=="number"&&e>0?e:t,pM=(e,t)=>{const{getRowHeight:n,getRowSpacing:o,getEstimatedRowHeight:s}=t,i=f.useRef(Object.create(null)),a=f.useRef(-1),l=f.useRef(!1),u=ae(e,ko),c=ae(e,bt),d=ae(e,xu),h=ae(e,en),p=Wr(e,t),y=ae(e,Po),m=sf(t.rowHeight,pa.rowHeight),g=Math.floor(m*u),v=f.useCallback(()=>{var N,D;l.current=!1;const w=$=>{i.current[$.id]||(i.current[$.id]={sizes:{baseCenter:g},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:L,needsFirstMeasurement:_,sizes:B}=i.current[$.id];let z=typeof g=="number"&&g>0?g:52;const G=B.baseCenter;if(L)z=G;else if(n){const W=n(j({},$,{densityFactor:u}));if(W==="auto"){if(_){const Q=s?s(j({},$,{densityFactor:u})):g;z=Q??g}else z=G;l.current=!0,i.current[$.id].autoHeight=!0}else z=sf(W,g),i.current[$.id].needsFirstMeasurement=!1,i.current[$.id].autoHeight=!1}else i.current[$.id].needsFirstMeasurement=!1;const J={};for(const W in B)/^base[A-Z]/.test(W)&&(J[W]=B[W]);if(J.baseCenter=z,o){var ee,te;const W=e.current.getRowIndexRelativeToVisibleRows($.id),Q=o(j({},$,{isFirstVisible:W===0,isLastVisible:W===p.rows.length-1,indexRelativeToCurrentPage:W}));J.spacingTop=(ee=Q.top)!=null?ee:0,J.spacingBottom=(te=Q.bottom)!=null?te:0}const Ce=e.current.unstable_applyPipeProcessors("rowHeight",J,$);return i.current[$.id].sizes=Ce,Ce},E=[],M=p.rows.reduce(($,L)=>{E.push($);let _=0,B=0;const z=w(L);for(const G in z){const J=z[G];/^base[A-Z]/.test(G)?_=J>_?J:_:B+=J}return $+_+B},0);y==null||(N=y.top)==null||N.forEach($=>{w($)}),y==null||(D=y.bottom)==null||D.forEach($=>{w($)}),e.current.setState($=>j({},$,{rowsMeta:{currentPageTotalHeight:M,positions:E}})),l.current||(a.current=1/0),e.current.forceUpdate()},[e,p.rows,g,n,o,s,y,u]),x=f.useCallback(N=>{const D=i.current[N];return D?D.sizes.baseCenter:g},[g]),b=N=>{var D;return(D=i.current[N])==null?void 0:D.sizes},C=f.useCallback((N,D)=>{i.current[N].sizes.baseCenter=D,i.current[N].isResized=!0,i.current[N].needsFirstMeasurement=!1,v()},[v]),P=f.useMemo(()=>qf(v,t.rowPositionsDebounceMs),[v,t.rowPositionsDebounceMs]),F=f.useCallback((N,D,w)=>{if(!i.current[N]||!i.current[N].autoHeight)return;const E=i.current[N].sizes[`base${An(w)}`]!==D;i.current[N].needsFirstMeasurement=!1,i.current[N].sizes[`base${An(w)}`]=D,E&&P()},[P]),T=f.useCallback(N=>{var D;return((D=i.current[N])==null?void 0:D.autoHeight)||!1},[]),I=f.useCallback(()=>a.current,[]),R=f.useCallback(N=>{l.current&&N>a.current&&(a.current=N)},[]),V=f.useCallback(()=>{i.current={},v()},[v]);f.useEffect(()=>{v()},[g,c,d,h,v]),Su(e,"rowHeight",v);const O={unstable_setLastMeasuredRowIndex:R,unstable_getRowHeight:x,unstable_getRowInternalSizes:b,unstable_setRowHeight:C,unstable_storeRowHeightMeasurement:F,resetRowHeights:V},S={getLastMeasuredRowIndex:I,rowHasAutoHeight:T};Oe(e,O,"public"),Oe(e,S,"private")},mM=e=>{const t=f.useCallback((s={})=>e.current.unstable_applyPipeProcessors("exportState",{},s),[e]),n=f.useCallback(s=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:s}).callbacks.forEach(a=>{a()}),e.current.forceUpdate()},[e]);Oe(e,{exportState:t,restoreState:n},"public")},gM=e=>{const t=f.useRef({}),n=f.useCallback((c,d,h)=>{const p=t.current;p[c]||(p[c]={}),p[c][d]=h},[]),o=f.useCallback((c,d)=>{var h;return(h=t.current[c])==null?void 0:h[d]},[]),s=f.useCallback(c=>{const{columnIndex:d,rowId:h,minFirstColumnIndex:p,maxLastColumnIndex:y,columns:m}=c,g=m.length,v=m[d],x=typeof v.colSpan=="function"?v.colSpan(e.current.getCellParams(h,v.field)):v.colSpan;if(!x||x===1)return n(h,d,{spannedByColSpan:!1,cellProps:{colSpan:1,width:v.computedWidth}}),{colSpan:1};let b=v.computedWidth;for(let C=1;C<x;C+=1){const P=d+C;if(P>=p&&P<y){const F=m[P];b+=F.computedWidth,n(h,d+C,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(d+x,g-1),leftVisibleCellIndex:d})}n(h,d,{spannedByColSpan:!1,cellProps:{colSpan:x,width:b}})}return{colSpan:x}},[e,n]),i=f.useCallback(({rowId:c,minFirstColumn:d,maxLastColumn:h,columns:p})=>{for(let y=d;y<h;y+=1){const m=s({columnIndex:y,rowId:c,minFirstColumnIndex:d,maxLastColumnIndex:h,columns:p});m.colSpan>1&&(y+=m.colSpan-1)}},[s]),a={unstable_getCellColSpanInfo:o},l={calculateColSpan:i};Oe(e,a,"public"),Oe(e,l,"private");const u=f.useCallback(()=>{t.current={}},[]);me(e,"columnOrderChange",u)},jx=(e,t,n)=>{if(Dg(e)){if(n[e.field]!==void 0)throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${n[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join(`
`));n[e.field]=t;return}const{groupId:o,children:s}=e;s.forEach(i=>{jx(i,[...t,o],n)})},rc=e=>{if(!e)return{};const t={};return e.forEach(n=>{jx(n,[],t)}),t},oc=(e,t,n)=>{const o=u=>{var c;return(c=t[u])!=null?c:[]},s=[],i=Math.max(...e.map(u=>o(u).length)),a=(u,c,d)=>_r(o(u).slice(0,d+1),o(c).slice(0,d+1)),l=(u,c)=>!!(n!=null&&n.left&&n.left.includes(u)&&!n.left.includes(c)||n!=null&&n.right&&!n.right.includes(u)&&n.right.includes(c));for(let u=0;u<i;u+=1){const c=e.reduce((d,h)=>{var p;const y=(p=o(h)[u])!=null?p:null;if(d.length===0)return[{columnFields:[h],groupId:y}];const m=d[d.length-1],g=m.columnFields[m.columnFields.length-1];return m.groupId!==y||!a(g,h,u)||l(g,h)?[...d,{columnFields:[h],groupId:y}]:[...d.slice(0,d.length-1),{columnFields:[...m.columnFields,h],groupId:y}]},[]);s.push(c)}return s},xM=["groupId","children"],ku=e=>{let t={};return e.forEach(n=>{if(Dg(n))return;const{groupId:o,children:s}=n,i=ce(n,xM);if(!o)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");s||console.warn(`MUI: group groupId=${o} has no children.`);const a=j({},i,{groupId:o}),l=ku(s);if(l[o]!==void 0||t[o]!==void 0)throw new Error(`MUI: The groupId ${o} is used multiple times in the columnGroupingModel.`);t=j({},t,l,{[o]:a})}),j({},t)},yM=(e,t,n)=>{var o,s,i,a;if(!((o=t.experimentalFeatures)!=null&&o.columnGrouping))return e;const l=qn(n),u=ia(n),c=ku((s=t.columnGroupingModel)!=null?s:[]),d=rc((i=t.columnGroupingModel)!=null?i:[]),h=oc(l,d,(a=n.current.state.pinnedColumns)!=null?a:{}),p=u.length===0?0:Math.max(...u.map(y=>{var m,g;return(m=(g=d[y])==null?void 0:g.length)!=null?m:0}));return j({},e,{columnGrouping:{lookup:c,unwrappedGroupingModel:d,headerStructure:h,maxDepth:p}})},bM=(e,t)=>{var n;const o=f.useCallback(u=>{var c;return(c=N1(e)[u])!=null?c:[]},[e]),s=f.useCallback(()=>Cg(e),[e]);Oe(e,{unstable_getColumnGroupPath:o,unstable_getAllGroupDetails:s},"public");const a=f.useCallback(()=>{var u;const c=rc((u=t.columnGroupingModel)!=null?u:[]);e.current.setState(d=>{var h,p,y;const m=(h=(p=d.columns)==null?void 0:p.orderedFields)!=null?h:[],g=(y=d.pinnedColumns)!=null?y:{},v=oc(m,c,g);return j({},d,{columnGrouping:j({},d.columnGrouping,{headerStructure:v})})})},[e,t.columnGroupingModel]),l=f.useCallback(u=>{var c,d,h,p;if(!((c=t.experimentalFeatures)!=null&&c.columnGrouping))return;const y=(d=(h=(p=e.current).getPinnedColumns)==null?void 0:h.call(p))!=null?d:{},m=qn(e),g=ia(e),v=ku(u??[]),x=rc(u??[]),b=oc(m,x,y),C=g.length===0?0:Math.max(...g.map(P=>{var F,T;return(F=(T=x[P])==null?void 0:T.length)!=null?F:0}));e.current.setState(P=>j({},P,{columnGrouping:{lookup:v,unwrappedGroupingModel:x,headerStructure:b,maxDepth:C}}))},[e,(n=t.experimentalFeatures)==null?void 0:n.columnGrouping]);me(e,"columnIndexChange",a),me(e,"columnsChange",()=>{l(t.columnGroupingModel)}),me(e,"columnVisibilityModelChange",()=>{l(t.columnGroupingModel)}),f.useEffect(()=>{l(t.columnGroupingModel)},[l,t.columnGroupingModel])},vM=(e,t)=>{const n=l2(e,t);return PA(n,t),vA(n),Nt(CA,n,t),Nt(D2,n,t),Nt(mA,n,t),Nt(fA,n,t),Nt(Y2,n,t),Nt(kA,n,t),Nt(rA,n,t),Nt(W2,n,t),Nt(L2,n,t),Nt(tA,n,t),Nt(fM,n,t),Nt(E2,n,t),Nt(yM,n,t),Nt(jI,n,t),Z2(n,t),wA(n,t),F2(n,t),gA(n,t),CP(n,t),gM(n),bM(n,t),pA(n,t),X2(n,t),oA(n,t),Q2(n,t),IA(n,t),$2(n,t),nA(n,t),pM(n,t),EA(n,t),T2(n),B2(n,t),U2(n,t),I2(n,t),MA(n,t),TA(n,t),mM(n),SI(n,t),n},CM=e=>{const{classes:t}=e;return Ee({root:["virtualScroller"]},He,t)},wM=It("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({overflow:"auto",height:"100%",position:"relative","@media print":{overflow:"hidden"},zIndex:0}),jM=f.forwardRef(function(t,n){const o=pe(),s=CM(o);return r.jsx(wM,j({ref:n},t,{className:Ve(s.root,t.className),ownerState:o}))}),SM=(e,t)=>{const{classes:n}=e;return Ee({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},He,n)},PM=It("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),kM=f.forwardRef(function(t,n){var o;const s=pe(),i=!s.autoHeight&&((o=t.style)==null?void 0:o.minHeight)==="auto",a=SM(s,i);return r.jsx(PM,j({ref:n},t,{ownerState:s,className:Ve(a.root,t.className)}))}),IM=["className"],EM=e=>{const{classes:t}=e;return Ee({root:["virtualScrollerRenderZone"]},He,t)},TM=It("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),AM=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,IM),i=pe(),a=EM(i);return r.jsx(TM,j({ref:n,className:Ve(a.root,o),ownerState:i},s))}),MM=["className"],RM=f.forwardRef(function(t,n){const{className:o}=t,s=ce(t,MM),{getRootProps:i,getContentProps:a,getRenderZoneProps:l,getRows:u}=_A({ref:n});return r.jsxs(jM,j({className:o},i(s),{children:[r.jsx(pP,{}),r.jsx(kM,j({},a(),{children:r.jsx(AM,j({},l(),{children:u()}))}))]}))}),Sx=f.forwardRef(function(t,n){const o=hM(t),s=vM(o.apiRef,o);return r.jsx(QT,{privateApiRef:s,props:o,children:r.jsxs(bk,j({className:o.className,style:o.style,sx:o.sx,ref:n},o.forwardedProps,{children:[r.jsx(vT,{}),r.jsx(sP,{VirtualScrollerComponent:RM}),r.jsx(iP,{})]}))})}),Px=f.memo(Sx);pa.filterDebounceMs;pa.filterDebounceMs;Sx.propTypes={apiRef:U.shape({current:U.object.isRequired}),"aria-label":U.string,"aria-labelledby":U.string,autoHeight:U.bool,autoPageSize:U.bool,cellModesModel:U.object,checkboxSelection:U.bool,classes:U.object,clipboardCopyCellDelimiter:U.string,columnBuffer:U.number,columnGroupingModel:U.arrayOf(U.object),columnHeaderHeight:U.number,columns:wy(U.array.isRequired),columnThreshold:U.number,columnVisibilityModel:U.object,components:U.object,componentsProps:U.object,density:U.oneOf(["comfortable","compact","standard"]),disableColumnFilter:U.bool,disableColumnMenu:U.bool,disableColumnSelector:U.bool,disableDensitySelector:U.bool,disableEval:U.bool,disableRowSelectionOnClick:U.bool,disableVirtualization:U.bool,editMode:U.oneOf(["cell","row"]),experimentalFeatures:U.shape({ariaV7:U.bool,columnGrouping:U.bool,warnIfFocusStateIsNotSynced:U.bool}),filterDebounceMs:U.number,filterMode:U.oneOf(["client","server"]),filterModel:U.shape({items:U.arrayOf(U.shape({field:U.string.isRequired,id:U.oneOfType([U.number,U.string]),operator:U.string.isRequired,value:U.any})).isRequired,logicOperator:U.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:U.bool,quickFilterLogicOperator:U.oneOf(["and","or"]),quickFilterValues:U.array}),forwardedProps:U.object,getCellClassName:U.func,getDetailPanelContent:U.func,getEstimatedRowHeight:U.func,getRowClassName:U.func,getRowHeight:U.func,getRowId:U.func,getRowSpacing:U.func,hideFooter:U.bool,hideFooterPagination:U.bool,hideFooterSelectedRowCount:U.bool,ignoreDiacritics:U.bool,initialState:U.object,isCellEditable:U.func,isRowSelectable:U.func,keepNonExistentRowsSelected:U.bool,loading:U.bool,localeText:U.object,logger:U.shape({debug:U.func.isRequired,error:U.func.isRequired,info:U.func.isRequired,warn:U.func.isRequired}),logLevel:U.oneOf(["debug","error","info","warn",!1]),nonce:U.string,onCellClick:U.func,onCellDoubleClick:U.func,onCellEditStart:U.func,onCellEditStop:U.func,onCellKeyDown:U.func,onCellModesModelChange:U.func,onClipboardCopy:U.func,onColumnHeaderClick:U.func,onColumnHeaderDoubleClick:U.func,onColumnHeaderEnter:U.func,onColumnHeaderLeave:U.func,onColumnHeaderOut:U.func,onColumnHeaderOver:U.func,onColumnOrderChange:U.func,onColumnVisibilityModelChange:U.func,onFilterModelChange:U.func,onMenuClose:U.func,onMenuOpen:U.func,onPaginationModelChange:U.func,onPreferencePanelClose:U.func,onPreferencePanelOpen:U.func,onProcessRowUpdateError:U.func,onResize:U.func,onRowClick:U.func,onRowCountChange:U.func,onRowDoubleClick:U.func,onRowEditStart:U.func,onRowEditStop:U.func,onRowModesModelChange:U.func,onRowSelectionModelChange:U.func,onSortModelChange:U.func,onStateChange:U.func,pageSizeOptions:U.arrayOf(U.oneOfType([U.number,U.shape({label:U.string.isRequired,value:U.number.isRequired})]).isRequired),pagination:e=>e.pagination===!1?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join(`
`)):null,paginationMode:U.oneOf(["client","server"]),paginationModel:U.shape({page:U.number.isRequired,pageSize:U.number.isRequired}),processRowUpdate:U.func,rowBuffer:U.number,rowCount:U.number,rowHeight:U.number,rowModesModel:U.object,rowPositionsDebounceMs:U.number,rows:U.arrayOf(U.object).isRequired,rowSelection:U.bool,rowSelectionModel:U.oneOfType([U.arrayOf(U.oneOfType([U.number,U.string]).isRequired),U.number,U.string]),rowSpacingType:U.oneOf(["border","margin"]),rowThreshold:U.number,scrollbarSize:U.number,showCellVerticalBorder:U.bool,showColumnVerticalBorder:U.bool,slotProps:U.object,slots:U.object,sortingMode:U.oneOf(["client","server"]),sortingOrder:U.arrayOf(U.oneOf(["asc","desc"])),sortModel:U.arrayOf(U.shape({field:U.string.isRequired,sort:U.oneOf(["asc","desc"])})),sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object]),unstable_ignoreValueFormatterDuringExport:U.oneOfType([U.shape({clipboardExport:U.bool,csvExport:U.bool}),U.bool])};function kx(e,t){return function(){return e.apply(t,arguments)}}const{toString:DM}=Object.prototype,{getPrototypeOf:Iu}=Object,{iterator:ma,toStringTag:Ix}=Symbol,ga=(e=>t=>{const n=DM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bn=e=>(e=e.toLowerCase(),t=>ga(t)===e),xa=e=>t=>typeof t===e,{isArray:Eo}=Array,us=xa("undefined");function Es(e){return e!==null&&!us(e)&&e.constructor!==null&&!us(e.constructor)&&Ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ex=bn("ArrayBuffer");function FM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ex(e.buffer),t}const OM=xa("string"),Ut=xa("function"),Tx=xa("number"),Ts=e=>e!==null&&typeof e=="object",_M=e=>e===!0||e===!1,ui=e=>{if(ga(e)!=="object")return!1;const t=Iu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ix in e)&&!(ma in e)},LM=e=>{if(!Ts(e)||Es(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},$M=bn("Date"),VM=bn("File"),NM=bn("Blob"),BM=bn("FileList"),HM=e=>Ts(e)&&Ut(e.pipe),zM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ut(e.append)&&((t=ga(e))==="formdata"||t==="object"&&Ut(e.toString)&&e.toString()==="[object FormData]"))},GM=bn("URLSearchParams"),[UM,WM,qM,KM]=["ReadableStream","Request","Response","Headers"].map(bn),QM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function As(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),Eo(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{if(Es(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(o=0;o<a;o++)l=i[o],t.call(null,e[l],l,e)}}function Ax(e,t){if(Es(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Mx=e=>!us(e)&&e!==Ir;function sc(){const{caseless:e}=Mx(this)&&this||{},t={},n=(o,s)=>{const i=e&&Ax(t,s)||s;ui(t[i])&&ui(o)?t[i]=sc(t[i],o):ui(o)?t[i]=sc({},o):Eo(o)?t[i]=o.slice():t[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&As(arguments[o],n);return t}const YM=(e,t,n,{allOwnKeys:o}={})=>(As(t,(s,i)=>{n&&Ut(s)?e[i]=kx(s,n):e[i]=s},{allOwnKeys:o}),e),XM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),JM=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ZM=(e,t,n,o)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!o||o(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&Iu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},eR=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},tR=e=>{if(!e)return null;if(Eo(e))return e;let t=e.length;if(!Tx(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},nR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Iu(Uint8Array)),rR=(e,t)=>{const o=(e&&e[ma]).call(e);let s;for(;(s=o.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},oR=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},sR=bn("HTMLFormElement"),iR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),af=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),aR=bn("RegExp"),Rx=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};As(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(o[i]=a||s)}),Object.defineProperties(e,o)},lR=e=>{Rx(e,(t,n)=>{if(Ut(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(Ut(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},cR=(e,t)=>{const n={},o=s=>{s.forEach(i=>{n[i]=!0})};return Eo(e)?o(e):o(String(e).split(t)),n},uR=()=>{},dR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function hR(e){return!!(e&&Ut(e.append)&&e[Ix]==="FormData"&&e[ma])}const fR=e=>{const t=new Array(10),n=(o,s)=>{if(Ts(o)){if(t.indexOf(o)>=0)return;if(Es(o))return o;if(!("toJSON"in o)){t[s]=o;const i=Eo(o)?[]:{};return As(o,(a,l)=>{const u=n(a,s+1);!us(u)&&(i[l]=u)}),t[s]=void 0,i}}return o};return n(e,0)},pR=bn("AsyncFunction"),mR=e=>e&&(Ts(e)||Ut(e))&&Ut(e.then)&&Ut(e.catch),Dx=((e,t)=>e?setImmediate:t?((n,o)=>(Ir.addEventListener("message",({source:s,data:i})=>{s===Ir&&i===n&&o.length&&o.shift()()},!1),s=>{o.push(s),Ir.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ut(Ir.postMessage)),gR=typeof queueMicrotask<"u"?queueMicrotask.bind(Ir):typeof process<"u"&&process.nextTick||Dx,xR=e=>e!=null&&Ut(e[ma]),q={isArray:Eo,isArrayBuffer:Ex,isBuffer:Es,isFormData:zM,isArrayBufferView:FM,isString:OM,isNumber:Tx,isBoolean:_M,isObject:Ts,isPlainObject:ui,isEmptyObject:LM,isReadableStream:UM,isRequest:WM,isResponse:qM,isHeaders:KM,isUndefined:us,isDate:$M,isFile:VM,isBlob:NM,isRegExp:aR,isFunction:Ut,isStream:HM,isURLSearchParams:GM,isTypedArray:nR,isFileList:BM,forEach:As,merge:sc,extend:YM,trim:QM,stripBOM:XM,inherits:JM,toFlatObject:ZM,kindOf:ga,kindOfTest:bn,endsWith:eR,toArray:tR,forEachEntry:rR,matchAll:oR,isHTMLForm:sR,hasOwnProperty:af,hasOwnProp:af,reduceDescriptors:Rx,freezeMethods:lR,toObjectSet:cR,toCamelCase:iR,noop:uR,toFiniteNumber:dR,findKey:Ax,global:Ir,isContextDefined:Mx,isSpecCompliantForm:hR,toJSONObject:fR,isAsyncFn:pR,isThenable:mR,setImmediate:Dx,asap:gR,isIterable:xR};function Me(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Fx=Me.prototype,Ox={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ox[e]={value:e}});Object.defineProperties(Me,Ox);Object.defineProperty(Fx,"isAxiosError",{value:!0});Me.from=(e,t,n,o,s,i)=>{const a=Object.create(Fx);return q.toFlatObject(e,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),Me.call(a,e.message,t,n,o,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const yR=null;function ic(e){return q.isPlainObject(e)||q.isArray(e)}function _x(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function lf(e,t,n){return e?e.concat(t).map(function(s,i){return s=_x(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function bR(e){return q.isArray(e)&&!e.some(ic)}const vR=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function ya(e,t,n){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!q.isUndefined(v[g])});const o=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(q.isDate(m))return m.toISOString();if(q.isBoolean(m))return m.toString();if(!u&&q.isBlob(m))throw new Me("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(m)||q.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let x=m;if(m&&!v&&typeof m=="object"){if(q.endsWith(g,"{}"))g=o?g:g.slice(0,-2),m=JSON.stringify(m);else if(q.isArray(m)&&bR(m)||(q.isFileList(m)||q.endsWith(g,"[]"))&&(x=q.toArray(m)))return g=_x(g),x.forEach(function(C,P){!(q.isUndefined(C)||C===null)&&t.append(a===!0?lf([g],P,i):a===null?g:g+"[]",c(C))}),!1}return ic(m)?!0:(t.append(lf(v,g,i),c(m)),!1)}const h=[],p=Object.assign(vR,{defaultVisitor:d,convertValue:c,isVisitable:ic});function y(m,g){if(!q.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),q.forEach(m,function(x,b){(!(q.isUndefined(x)||x===null)&&s.call(t,x,q.isString(b)?b.trim():b,g,p))===!0&&y(x,g?g.concat(b):[b])}),h.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return y(e),t}function cf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Eu(e,t){this._pairs=[],e&&ya(e,this,t)}const Lx=Eu.prototype;Lx.append=function(t,n){this._pairs.push([t,n])};Lx.toString=function(t){const n=t?function(o){return t.call(this,o,cf)}:cf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function CR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $x(e,t,n){if(!t)return e;const o=n&&n.encode||CR;q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=q.isURLSearchParams(t)?t.toString():new Eu(t,n).toString(o),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class uf{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Vx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wR=typeof URLSearchParams<"u"?URLSearchParams:Eu,jR=typeof FormData<"u"?FormData:null,SR=typeof Blob<"u"?Blob:null,PR={isBrowser:!0,classes:{URLSearchParams:wR,FormData:jR,Blob:SR},protocols:["http","https","file","blob","url","data"]},Tu=typeof window<"u"&&typeof document<"u",ac=typeof navigator=="object"&&navigator||void 0,kR=Tu&&(!ac||["ReactNative","NativeScript","NS"].indexOf(ac.product)<0),IR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ER=Tu&&window.location.href||"http://localhost",TR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tu,hasStandardBrowserEnv:kR,hasStandardBrowserWebWorkerEnv:IR,navigator:ac,origin:ER},Symbol.toStringTag,{value:"Module"})),Rt={...TR,...PR};function AR(e,t){return ya(e,new Rt.classes.URLSearchParams,{visitor:function(n,o,s,i){return Rt.isNode&&q.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function MR(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function RR(e){const t={},n=Object.keys(e);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],t[i]=e[i];return t}function Nx(e){function t(n,o,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=i>=n.length;return a=!a&&q.isArray(s)?s.length:a,u?(q.hasOwnProp(s,a)?s[a]=[s[a],o]:s[a]=o,!l):((!s[a]||!q.isObject(s[a]))&&(s[a]=[]),t(n,o,s[a],i)&&q.isArray(s[a])&&(s[a]=RR(s[a])),!l)}if(q.isFormData(e)&&q.isFunction(e.entries)){const n={};return q.forEachEntry(e,(o,s)=>{t(MR(o),s,n,0)}),n}return null}function DR(e,t,n){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Ms={transitional:Vx,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,i=q.isObject(t);if(i&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return s?JSON.stringify(Nx(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return AR(t,this.formSerializer).toString();if((l=q.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ya(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),DR(t)):t}],transformResponse:[function(t){const n=this.transitional||Ms.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(o&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Me.from(l,Me.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rt.classes.FormData,Blob:Rt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{Ms.headers[e]={}});const FR=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OR=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),o=a.substring(s+1).trim(),!(!n||t[n]&&FR[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},df=Symbol("internals");function Vo(e){return e&&String(e).trim().toLowerCase()}function di(e){return e===!1||e==null?e:q.isArray(e)?e.map(di):String(e)}function _R(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const LR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function il(e,t,n,o,s){if(q.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!q.isString(t)){if(q.isString(o))return t.indexOf(o)!==-1;if(q.isRegExp(o))return o.test(t)}}function $R(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function VR(e,t){const n=q.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,i,a){return this[o].call(this,t,s,i,a)},configurable:!0})})}let Wt=class{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function i(l,u,c){const d=Vo(u);if(!d)throw new Error("header name must be a non-empty string");const h=q.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||u]=di(l))}const a=(l,u)=>q.forEach(l,(c,d)=>i(c,d,u));if(q.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(q.isString(t)&&(t=t.trim())&&!LR(t))a(OR(t),n);else if(q.isObject(t)&&q.isIterable(t)){let l={},u,c;for(const d of t){if(!q.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?q.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&i(n,t,o);return this}get(t,n){if(t=Vo(t),t){const o=q.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return _R(s);if(q.isFunction(n))return n.call(this,s,o);if(q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Vo(t),t){const o=q.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||il(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function i(a){if(a=Vo(a),a){const l=q.findKey(o,a);l&&(!n||il(o,o[l],l,n))&&(delete o[l],s=!0)}}return q.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const i=n[o];(!t||il(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,o={};return q.forEach(this,(s,i)=>{const a=q.findKey(o,i);if(a){n[a]=di(s),delete n[i];return}const l=t?$R(i):String(i).trim();l!==i&&delete n[i],n[l]=di(s),o[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return q.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&q.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[df]=this[df]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Vo(a);o[l]||(VR(s,a),o[l]=!0)}return q.isArray(t)?t.forEach(i):i(t),this}};Wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(Wt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});q.freezeMethods(Wt);function al(e,t){const n=this||Ms,o=t||n,s=Wt.from(o.headers);let i=o.data;return q.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Bx(e){return!!(e&&e.__CANCEL__)}function To(e,t,n){Me.call(this,e??"canceled",Me.ERR_CANCELED,t,n),this.name="CanceledError"}q.inherits(To,Me,{__CANCEL__:!0});function Hx(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Me("Request failed with status code "+n.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function NR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function BR(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),d=o[i];a||(a=c),n[s]=u,o[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),c-a<t)return;const y=d&&c-d;return y?Math.round(p*1e3/y):void 0}}function HR(e,t){let n=0,o=1e3/t,s,i;const a=(c,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const d=Date.now(),h=d-n;h>=o?a(c,d):(s=c,i||(i=setTimeout(()=>{i=null,a(s)},o-h)))},()=>s&&a(s)]}const Vi=(e,t,n=3)=>{let o=0;const s=BR(50,250);return HR(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,u=a-o,c=s(u),d=a<=l;o=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-a)/c:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},hf=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},ff=e=>(...t)=>q.asap(()=>e(...t)),zR=Rt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Rt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Rt.origin),Rt.navigator&&/(msie|trident)/i.test(Rt.navigator.userAgent)):()=>!0,GR=Rt.hasStandardBrowserEnv?{write(e,t,n,o,s,i){const a=[e+"="+encodeURIComponent(t)];q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),q.isString(o)&&a.push("path="+o),q.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function UR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function WR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function zx(e,t,n){let o=!UR(t);return e&&(o||n==!1)?WR(e,t):t}const pf=e=>e instanceof Wt?{...e}:e;function Nr(e,t){t=t||{};const n={};function o(c,d,h,p){return q.isPlainObject(c)&&q.isPlainObject(d)?q.merge.call({caseless:p},c,d):q.isPlainObject(d)?q.merge({},d):q.isArray(d)?d.slice():d}function s(c,d,h,p){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c,h,p)}else return o(c,d,h,p)}function i(c,d){if(!q.isUndefined(d))return o(void 0,d)}function a(c,d){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c)}else return o(void 0,d)}function l(c,d,h){if(h in t)return o(c,d);if(h in e)return o(void 0,c)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,d,h)=>s(pf(c),pf(d),h,!0)};return q.forEach(Object.keys({...e,...t}),function(d){const h=u[d]||s,p=h(e[d],t[d],d);q.isUndefined(p)&&h!==l||(n[d]=p)}),n}const Gx=e=>{const t=Nr({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=Wt.from(a),t.url=$x(zx(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(q.isFormData(n)){if(Rt.hasStandardBrowserEnv||Rt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[c,...d]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...d].join("; "))}}if(Rt.hasStandardBrowserEnv&&(o&&q.isFunction(o)&&(o=o(t)),o||o!==!1&&zR(t.url))){const c=s&&i&&GR.read(i);c&&a.set(s,c)}return t},qR=typeof XMLHttpRequest<"u",KR=qR&&function(e){return new Promise(function(n,o){const s=Gx(e);let i=s.data;const a=Wt.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=s,d,h,p,y,m;function g(){y&&y(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function x(){if(!v)return;const C=Wt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:C,config:e,request:v};Hx(function(I){n(I),g()},function(I){o(I),g()},F),v=null}"onloadend"in v?v.onloadend=x:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(x)},v.onabort=function(){v&&(o(new Me("Request aborted",Me.ECONNABORTED,e,v)),v=null)},v.onerror=function(){o(new Me("Network Error",Me.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||Vx;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),o(new Me(P,F.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,e,v)),v=null},i===void 0&&a.setContentType(null),"setRequestHeader"in v&&q.forEach(a.toJSON(),function(P,F){v.setRequestHeader(F,P)}),q.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),l&&l!=="json"&&(v.responseType=s.responseType),c&&([p,m]=Vi(c,!0),v.addEventListener("progress",p)),u&&v.upload&&([h,y]=Vi(u),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(d=C=>{v&&(o(!C||C.type?new To(null,e,v):C),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const b=NR(s.url);if(b&&Rt.protocols.indexOf(b)===-1){o(new Me("Unsupported protocol "+b+":",Me.ERR_BAD_REQUEST,e));return}v.send(i||null)})},QR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,s;const i=function(c){if(!s){s=!0,l();const d=c instanceof Error?c:this.reason;o.abort(d instanceof Me?d:new To(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new Me(`timeout ${t} of ms exceeded`,Me.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:u}=o;return u.unsubscribe=()=>q.asap(l),u}},YR=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,s;for(;o<n;)s=o+t,yield e.slice(o,s),o=s},XR=async function*(e,t){for await(const n of JR(e))yield*YR(n,t)},JR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},mf=(e,t,n,o)=>{const s=XR(e,t);let i=0,a,l=u=>{a||(a=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await s.next();if(c){l(),u.close();return}let h=d.byteLength;if(n){let p=i+=h;n(p)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},ba=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ux=ba&&typeof ReadableStream=="function",ZR=ba&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Wx=(e,...t)=>{try{return!!e(...t)}catch{return!1}},eD=Ux&&Wx(()=>{let e=!1;const t=new Request(Rt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),gf=64*1024,lc=Ux&&Wx(()=>q.isReadableStream(new Response("").body)),Ni={stream:lc&&(e=>e.body)};ba&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ni[t]&&(Ni[t]=q.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Me(`Response type '${t}' is not supported`,Me.ERR_NOT_SUPPORT,o)})})})(new Response);const tD=async e=>{if(e==null)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e))return(await new Request(Rt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(q.isArrayBufferView(e)||q.isArrayBuffer(e))return e.byteLength;if(q.isURLSearchParams(e)&&(e=e+""),q.isString(e))return(await ZR(e)).byteLength},nD=async(e,t)=>{const n=q.toFiniteNumber(e.getContentLength());return n??tD(t)},rD=ba&&(async e=>{let{url:t,method:n,data:o,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Gx(e);c=c?(c+"").toLowerCase():"text";let y=QR([s,i&&i.toAbortSignal()],a),m;const g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let v;try{if(u&&eD&&n!=="get"&&n!=="head"&&(v=await nD(d,o))!==0){let F=new Request(t,{method:"POST",body:o,duplex:"half"}),T;if(q.isFormData(o)&&(T=F.headers.get("content-type"))&&d.setContentType(T),F.body){const[I,R]=hf(v,Vi(ff(u)));o=mf(F.body,gf,I,R)}}q.isString(h)||(h=h?"include":"omit");const x="credentials"in Request.prototype;m=new Request(t,{...p,signal:y,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:x?h:void 0});let b=await fetch(m,p);const C=lc&&(c==="stream"||c==="response");if(lc&&(l||C&&g)){const F={};["status","statusText","headers"].forEach(V=>{F[V]=b[V]});const T=q.toFiniteNumber(b.headers.get("content-length")),[I,R]=l&&hf(T,Vi(ff(l),!0))||[];b=new Response(mf(b.body,gf,I,()=>{R&&R(),g&&g()}),F)}c=c||"text";let P=await Ni[q.findKey(Ni,c)||"text"](b,e);return!C&&g&&g(),await new Promise((F,T)=>{Hx(F,T,{data:P,headers:Wt.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:m})})}catch(x){throw g&&g(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,e,m),{cause:x.cause||x}):Me.from(x,x&&x.code,e,m)}}),cc={http:yR,xhr:KR,fetch:rD};q.forEach(cc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const xf=e=>`- ${e}`,oD=e=>q.isFunction(e)||e===null||e===!1,qx={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let i=0;i<t;i++){n=e[i];let a;if(o=n,!oD(n)&&(o=cc[(a=String(n)).toLowerCase()],o===void 0))throw new Me(`Unknown adapter '${a}'`);if(o)break;s[a||"#"+i]=o}if(!o){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(xf).join(`
`):" "+xf(i[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o},adapters:cc};function ll(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new To(null,e)}function yf(e){return ll(e),e.headers=Wt.from(e.headers),e.data=al.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qx.getAdapter(e.adapter||Ms.adapter)(e).then(function(o){return ll(e),o.data=al.call(e,e.transformResponse,o),o.headers=Wt.from(o.headers),o},function(o){return Bx(o)||(ll(e),o&&o.response&&(o.response.data=al.call(e,e.transformResponse,o.response),o.response.headers=Wt.from(o.response.headers))),Promise.reject(o)})}const Kx="1.11.0",va={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{va[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const bf={};va.transitional=function(t,n,o){function s(i,a){return"[Axios v"+Kx+"] Transitional option '"+i+"'"+a+(o?". "+o:"")}return(i,a,l)=>{if(t===!1)throw new Me(s(a," has been removed"+(n?" in "+n:"")),Me.ERR_DEPRECATED);return n&&!bf[a]&&(bf[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};va.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function sD(e,t,n){if(typeof e!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const i=o[s],a=t[i];if(a){const l=e[i],u=l===void 0||a(l,i,e);if(u!==!0)throw new Me("option "+i+" must be "+u,Me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Me("Unknown option "+i,Me.ERR_BAD_OPTION)}}const hi={assertOptions:sD,validators:va},Cn=hi.validators;let Lr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new uf,response:new uf}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Nr(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:i}=n;o!==void 0&&hi.assertOptions(o,{silentJSONParsing:Cn.transitional(Cn.boolean),forcedJSONParsing:Cn.transitional(Cn.boolean),clarifyTimeoutError:Cn.transitional(Cn.boolean)},!1),s!=null&&(q.isFunction(s)?n.paramsSerializer={serialize:s}:hi.assertOptions(s,{encode:Cn.function,serialize:Cn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),hi.assertOptions(n,{baseUrl:Cn.spelling("baseURL"),withXsrfToken:Cn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&q.merge(i.common,i[n.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Wt.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(u=u&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,p;if(!u){const m=[yf.bind(this),void 0];for(m.unshift(...l),m.push(...c),p=m.length,d=Promise.resolve(n);h<p;)d=d.then(m[h++],m[h++]);return d}p=l.length;let y=n;for(h=0;h<p;){const m=l[h++],g=l[h++];try{y=m(y)}catch(v){g.call(this,v);break}}try{d=yf.call(this,y)}catch(m){return Promise.reject(m)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(t){t=Nr(this.defaults,t);const n=zx(t.baseURL,t.url,t.allowAbsoluteUrls);return $x(n,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){Lr.prototype[t]=function(n,o){return this.request(Nr(o||{},{method:t,url:n,data:(o||{}).data}))}});q.forEach(["post","put","patch"],function(t){function n(o){return function(i,a,l){return this.request(Nr(l||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Lr.prototype[t]=n(),Lr.prototype[t+"Form"]=n(!0)});let iD=class Qx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{o.subscribe(l),i=l}).then(s);return a.cancel=function(){o.unsubscribe(i)},a},t(function(i,a,l){o.reason||(o.reason=new To(i,a,l),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qx(function(s){t=s}),cancel:t}}};function aD(e){return function(n){return e.apply(null,n)}}function lD(e){return q.isObject(e)&&e.isAxiosError===!0}const uc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uc).forEach(([e,t])=>{uc[t]=e});function Yx(e){const t=new Lr(e),n=kx(Lr.prototype.request,t);return q.extend(n,Lr.prototype,t,{allOwnKeys:!0}),q.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Yx(Nr(e,s))},n}const qe=Yx(Ms);qe.Axios=Lr;qe.CanceledError=To;qe.CancelToken=iD;qe.isCancel=Bx;qe.VERSION=Kx;qe.toFormData=ya;qe.AxiosError=Me;qe.Cancel=qe.CanceledError;qe.all=function(t){return Promise.all(t)};qe.spread=aD;qe.isAxiosError=lD;qe.mergeConfig=Nr;qe.AxiosHeaders=Wt;qe.formToJSON=e=>Nx(q.isHTMLForm(e)?new FormData(e):e);qe.getAdapter=qx.getAdapter;qe.HttpStatusCode=uc;qe.default=qe;const{Axios:zF,AxiosError:GF,CanceledError:UF,isCancel:WF,CancelToken:qF,VERSION:KF,all:QF,Cancel:YF,isAxiosError:XF,spread:JF,toFormData:ZF,AxiosHeaders:eO,HttpStatusCode:tO,formToJSON:nO,getAdapter:rO,mergeConfig:oO}=qe,cD=()=>{const{enqueueSnackbar:e}=Kt(),[t,n]=f.useState([]),[o,s]=f.useState(!0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),h=[{field:"name",headerName:"Device Name",flex:1,minWidth:150},{field:"ip",headerName:"IP Address",width:150},{field:"type",headerName:"Type",width:120,renderCell:x=>r.jsx(be,{label:x.value,size:"small",variant:"outlined"})},{field:"status",headerName:"Status",width:120,renderCell:x=>{const b=()=>{switch(x.value){case"active":return r.jsx(Ne,{color:"success",fontSize:"small"});case"inactive":return r.jsx(no,{color:"error",fontSize:"small"});default:return r.jsx(gn,{color:"warning",fontSize:"small"})}};return r.jsxs(A,{display:"flex",alignItems:"center",children:[b(),r.jsx(k,{sx:{ml:1},variant:"body2",children:x.value})]})}},{field:"lastSeen",headerName:"Last Seen",width:180},{field:"emailsSent",headerName:"Emails Sent",width:120,type:"number"},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:x=>r.jsxs(A,{children:[r.jsx(Pe,{size:"small",onClick:()=>m(x.row),color:"primary",children:r.jsx(Kf,{fontSize:"small"})}),r.jsx(Pe,{size:"small",onClick:()=>g(x.row.id),color:"error",children:r.jsx(Yt,{fontSize:"small"})})]})}];f.useEffect(()=>{p()},[]);const p=async()=>{try{const x=await qe.get("/api/devices");n(x.data)}catch{e("Failed to fetch devices",{variant:"error"})}finally{s(!1)}},y=()=>{u(null),d({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),a(!0)},m=x=>{u(x),d({name:x.name,ip:x.ip,type:x.type,auth:x.auth||"none",username:x.username||"",password:""}),a(!0)},g=async x=>{if(window.confirm("Are you sure you want to delete this device?"))try{await qe.delete(`/api/devices/${x}`),e("Device deleted successfully",{variant:"success"}),p()}catch{e("Failed to delete device",{variant:"error"})}},v=async()=>{try{l?(await qe.put(`/api/devices/${l.id}`,c),e("Device updated successfully",{variant:"success"})):(await qe.post("/api/devices",c),e("Device added successfully",{variant:"success"})),a(!1),p()}catch{e("Failed to save device",{variant:"error"})}};return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Device Management"}),r.jsx(X,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:y,children:"Add Device"})]}),r.jsx(de,{elevation:3,children:r.jsx(Px,{rows:t,columns:h,pageSize:10,rowsPerPageOptions:[10,25,50],loading:o,autoHeight:!0,disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-cell:hover":{cursor:"pointer"}}})}),r.jsxs(at,{open:i,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:l?"Edit Device":"Add New Device"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsx(De,{fullWidth:!0,label:"Device Name",value:c.name,onChange:x=>d({...c,name:x.target.value}),margin:"normal",required:!0}),r.jsx(De,{fullWidth:!0,label:"IP Address",value:c.ip,onChange:x=>d({...c,ip:x.target.value}),margin:"normal",required:!0,helperText:"Enter IP address or CIDR range (e.g., 192.168.1.0/24)"}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Device Type"}),r.jsxs(mt,{value:c.type,label:"Device Type",onChange:x=>d({...c,type:x.target.value}),children:[r.jsx(se,{value:"printer",children:"Printer"}),r.jsx(se,{value:"scanner",children:"Scanner"}),r.jsx(se,{value:"nas",children:"NAS System"}),r.jsx(se,{value:"monitoring",children:"Monitoring Tool"}),r.jsx(se,{value:"camera",children:"Security Camera"}),r.jsx(se,{value:"other",children:"Other"})]})]}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication"}),r.jsxs(mt,{value:c.auth,label:"Authentication",onChange:x=>d({...c,auth:x.target.value}),children:[r.jsx(se,{value:"none",children:"None (IP Whitelist)"}),r.jsx(se,{value:"basic",children:"Basic Auth"}),r.jsx(se,{value:"static",children:"Static User"})]})]}),c.auth!=="none"&&r.jsxs(r.Fragment,{children:[r.jsx(De,{fullWidth:!0,label:"Username",value:c.username,onChange:x=>d({...c,username:x.target.value}),margin:"normal"}),r.jsx(De,{fullWidth:!0,label:"Password",type:"password",value:c.password,onChange:x=>d({...c,password:x.target.value}),margin:"normal",helperText:l?"Leave blank to keep existing password":""})]})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>a(!1),children:"Cancel"}),r.jsx(X,{onClick:v,variant:"contained",children:l?"Update":"Add"})]})]})]})},uD=()=>{const{enqueueSnackbar:e}=Kt(),{socket:t,connected:n}=su(),[o,s]=f.useState([]),[i,a]=f.useState(!0),[l,u]=f.useState("running"),[c,d]=f.useState([]),[h,p]=f.useState({pending:0,processing:0,failed:0,completed:0}),y=[{field:"status",headerName:"Status",width:100,renderCell:C=>{const P=()=>{switch(C.value){case"pending":return r.jsx(yc,{color:"info"});case"processing":return r.jsx(Ue,{size:20});case"completed":return r.jsx(Ne,{color:"success"});case"failed":return r.jsx(Py,{color:"error"});default:return null}};return r.jsx(yt,{title:C.value,children:P()})}},{field:"messageId",headerName:"Message ID",width:150},{field:"from",headerName:"From",flex:1,minWidth:200},{field:"to",headerName:"To",flex:1,minWidth:200},{field:"subject",headerName:"Subject",flex:1,minWidth:250},{field:"size",headerName:"Size",width:100,valueFormatter:C=>{const P=C.value;return P<1024?`${P} B`:P<1024*1024?`${(P/1024).toFixed(2)} KB`:`${(P/(1024*1024)).toFixed(2)} MB`}},{field:"attempts",headerName:"Attempts",width:100,renderCell:C=>r.jsx(be,{label:`${C.value}/3`,size:"small",color:C.value>=3?"error":C.value>1?"warning":"default"})},{field:"queuedAt",headerName:"Queued At",width:180},{field:"nextRetry",headerName:"Next Retry",width:180},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:C=>r.jsxs(A,{children:[r.jsx(yt,{title:"Retry Now",children:r.jsx(Pe,{size:"small",onClick:()=>g(C.row.id),color:"primary",disabled:C.row.status==="processing",children:r.jsx(wl,{fontSize:"small"})})}),r.jsx(yt,{title:"Delete",children:r.jsx(Pe,{size:"small",onClick:()=>v(C.row.id),color:"error",children:r.jsx(Yt,{fontSize:"small"})})})]})}];f.useEffect(()=>{if(m(),t&&n)return t.on("queue:update",C=>{s(C.items),p(C.stats)}),()=>{t.off("queue:update")}},[t,n]);const m=async()=>{try{const C=await qe.get("/api/queue");s(C.data.items),p(C.data.stats),u(C.data.status)}catch{e("Failed to fetch queue items",{variant:"error"})}finally{a(!1)}},g=async C=>{try{await qe.post(`/api/queue/${C}/retry`),e("Message queued for retry",{variant:"success"}),m()}catch{e("Failed to retry message",{variant:"error"})}},v=async C=>{if(window.confirm("Are you sure you want to delete this message from the queue?"))try{await qe.delete(`/api/queue/${C}`),e("Message deleted from queue",{variant:"success"}),m()}catch{e("Failed to delete message",{variant:"error"})}},x=async C=>{if(c.length===0){e("No items selected",{variant:"warning"});return}try{await qe.post("/api/queue/bulk",{action:C,ids:c}),e(`Bulk ${C} completed`,{variant:"success"}),d([]),m()}catch{e(`Failed to ${C} items`,{variant:"error"})}},b=async()=>{try{const C=l==="running"?"paused":"running";await qe.post("/api/queue/control",{action:C}),u(C),e(`Queue ${C}`,{variant:"success"})}catch{e("Failed to change queue status",{variant:"error"})}};return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Email Queue"}),r.jsxs(A,{children:[r.jsx(X,{variant:"outlined",startIcon:l==="running"?r.jsx(jy,{}):r.jsx(Sy,{}),onClick:b,sx:{mr:1},children:l==="running"?"Pause Queue":"Resume Queue"}),r.jsx(Pe,{onClick:m,children:r.jsx(xn,{})})]})]}),r.jsxs(A,{display:"flex",gap:2,mb:3,children:[r.jsxs(de,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Pending"}),r.jsx(k,{variant:"h4",color:"info.main",children:h.pending})]}),r.jsxs(de,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Processing"}),r.jsx(k,{variant:"h4",color:"warning.main",children:h.processing})]}),r.jsxs(de,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Failed"}),r.jsx(k,{variant:"h4",color:"error.main",children:h.failed})]}),r.jsxs(de,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Completed (24h)"}),r.jsx(k,{variant:"h4",color:"success.main",children:h.completed})]})]}),l==="paused"&&r.jsx(ge,{severity:"warning",sx:{mb:2},children:"Queue processing is currently paused"}),c.length>0&&r.jsxs(A,{mb:2,children:[r.jsxs(X,{variant:"contained",color:"primary",startIcon:r.jsx(wl,{}),onClick:()=>x("retry"),sx:{mr:1},children:["Retry Selected (",c.length,")"]}),r.jsxs(X,{variant:"contained",color:"error",startIcon:r.jsx(Yt,{}),onClick:()=>x("delete"),children:["Delete Selected (",c.length,")"]})]}),r.jsx(de,{elevation:3,children:r.jsx(Px,{rows:o,columns:y,pageSize:10,rowsPerPageOptions:[10,25,50],loading:i,autoHeight:!0,checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:C=>{d(C)},selectionModel:c,sx:{"& .MuiDataGrid-row":{"&.Mui-selected":{backgroundColor:"action.selected"}}}})})]})},Qs=Gt(_e),dD=Gt(A),vf=Gt(de),hD=({value:e,size:t=120,thickness:n=10,children:o})=>{const s=$t(),i=()=>e>=80?s.palette.success.main:e>=60?s.palette.warning.main:s.palette.error.main;return r.jsxs(A,{position:"relative",display:"inline-flex",children:[r.jsx(Ue,{variant:"determinate",value:e,size:t,thickness:n,sx:{color:i(),"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),r.jsx(A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:o})]})},cl=({status:e,size:t="medium"})=>{const n=$t(),o=()=>{switch(e){case"online":case"running":case"active":case"configured":return n.palette.success.main;case"offline":case"stopped":case"error":return n.palette.error.main;case"warning":case"degraded":return n.palette.warning.main;default:return n.palette.grey[500]}},i={small:8,medium:12,large:16}[t]||12;return r.jsx(A,{position:"relative",display:"inline-flex",alignItems:"center",children:r.jsx(A,{sx:{width:i,height:i,borderRadius:"50%",bgcolor:o(),position:"relative","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",bgcolor:o(),animation:e==="online"||e==="configured"?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),.7)}`},"70%":{transform:"scale(1)",boxShadow:`0 0 0 10px ${re(o(),0)}`},"100%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),0)}`}}}}})})},fD=()=>{const{apiRequest:e}=Vt(),{enqueueSnackbar:t}=Kt(),n=$t(),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),[c,d]=f.useState(!1),[h,p]=f.useState(!1),[y,m]=f.useState("overview");f.useEffect(()=>{g()},[]);const g=async()=>{o||d(!0);try{const[x,b]=await Promise.all([e("/api/security/status"),e("/api/security/recommendations")]);if(x.ok){const C=await x.json();a(C)}if(b.ok){const C=await b.json();u(C)}}catch(x){console.error("Error fetching security data:",x),t("Failed to load security information",{variant:"error"})}finally{s(!1),d(!1)}},v=async()=>{p(!0);try{const x=await e("/api/security/generate-secrets",{method:"POST"});if(x.ok){const b=await x.json();t(b.message,{variant:"success"}),t(b.warning,{variant:"warning",persist:!0})}else throw new Error("Failed to generate secrets")}catch(x){console.error("Error generating secrets:",x),t("Failed to generate security secrets",{variant:"error"})}finally{p(!1)}};return o?r.jsx(A,{sx:{p:3},children:r.jsx(K,{container:!0,spacing:3,children:[1,2,3,4].map(x=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(xc,{variant:"rectangular",height:200,sx:{borderRadius:2}})},x))})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(vf,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.1)} 0%, ${re(n.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(K,{item:!0,xs:12,md:8,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(hs,{badgeContent:r.jsx(cl,{status:i?.overall==="excellent"?"online":"warning",size:"small"}),overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(jn,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.secondary.main} 100%)`},children:r.jsx(zi,{fontSize:"large"})})}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",fontWeight:"bold",children:"Security Center"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Monitor and manage your SMTP Relay security configuration"})]})]})}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(A,{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,children:[r.jsx(X,{variant:"contained",startIcon:r.jsx(ky,{}),onClick:v,disabled:h,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)"}},children:h?"Generating...":"Generate Secrets"}),r.jsx(yt,{title:"Refresh",children:r.jsx(Pe,{onClick:g,disabled:c,sx:{background:re(n.palette.primary.main,.1),"&:hover":{background:re(n.palette.primary.main,.2)}},children:c?r.jsx(Ue,{size:24}):r.jsx(xn,{})})})]})})]})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(vf,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},elevation:2,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.15)} 0%, ${re(n.palette.secondary.dark,.15)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`,border:`1px solid ${re(i.overall==="excellent"?n.palette.success.main:i.overall==="good"?n.palette.info.main:i.overall==="fair"?n.palette.warning.main:n.palette.error.main,.3)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, 
                  ${i.overall==="excellent"?n.palette.success.main:i.overall==="good"?n.palette.info.main:i.overall==="fair"?n.palette.warning.main:n.palette.error.main} 0%, 
                  ${re(n.palette.primary.main,.5)} 100%)`,animation:"shimmer 3s infinite linear","@keyframes shimmer":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(100%)"}}}},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsxs(K,{item:!0,xs:12,md:8,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Security Health Score"}),r.jsxs(A,{display:"flex",alignItems:"baseline",gap:2,children:[r.jsxs(k,{variant:"h1",fontWeight:"900",sx:{background:i.score>=80?"linear-gradient(135deg, #10b981 0%, #34d399 100%)":i.score>=60?"linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)":"linear-gradient(135deg, #ef4444 0%, #f87171 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:`0 2px 10px ${re(i.score>=80?"#10b981":i.score>=60?"#f59e0b":"#ef4444",.3)}`},children:[i.score,"%"]}),r.jsx(A,{children:r.jsx(be,{label:i.overall.replace("_"," ").toUpperCase(),color:i.overall==="excellent"?"success":i.overall==="good"?"info":i.overall==="fair"?"warning":"error",sx:{fontWeight:"bold",fontSize:"1rem"}})})]}),r.jsx(zt,{variant:"determinate",value:i.score,sx:{mt:2,height:8,borderRadius:4,backgroundColor:re(n.palette.grey[500],.2),"& .MuiLinearProgress-bar":{borderRadius:4,background:i.score>=80?"linear-gradient(90deg, #10b981 0%, #34d399 100%)":i.score>=60?"linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%)":"linear-gradient(90deg, #ef4444 0%, #f87171 100%)"}}})]}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsx(hD,{value:i.score,size:150,thickness:12,children:r.jsx(A,{sx:{textAlign:"center"},children:i.score>=80?r.jsx(Iy,{sx:{fontSize:50,color:"#10b981"}}):i.score>=60?r.jsx(Ey,{sx:{fontSize:50,color:"#f59e0b"}}):r.jsx(Ty,{sx:{fontSize:50,color:"#ef4444"}})})})})]})}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Qs,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.error.dark,.05):re(n.palette.error.light,.05),border:`1px solid ${re(n.palette.error.main,.2)}`,transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${re(n.palette.error.main,.15)}`}},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[r.jsx(jn,{sx:{bgcolor:re(n.palette.error.main,.1),color:n.palette.error.main,width:40,height:40},children:r.jsx(mo,{})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Critical Security"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Essential security requirements"})]}),r.jsx(cl,{status:i.critical.secrets.status==="configured"?"configured":"error"})]}),r.jsx(sn,{spacing:1.5,children:[...i.critical.secrets.items,...i.critical.authentication.items].map((x,b)=>r.jsx(de,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{transform:"translateX(4px)",borderColor:x.icon==="check"?n.palette.success.main:n.palette.error.main,background:re(x.icon==="check"?n.palette.success.main:n.palette.error.main,.05)}},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[x.icon==="check"?r.jsx(Nu,{sx:{color:n.palette.success.main,fontSize:20}}):x.icon==="warning"?r.jsx(gn,{sx:{color:n.palette.warning.main,fontSize:20}}):r.jsx(Ay,{sx:{color:n.palette.error.main,fontSize:20}}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:x.name})]}),r.jsx(be,{size:"small",label:x.value||x.status,color:x.icon==="check"?"success":x.icon==="warning"?"warning":"error",variant:"outlined",sx:{fontWeight:"bold"}})]})},b))})]})})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Qs,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.primary.dark,.05):re(n.palette.primary.light,.05),border:`1px solid ${re(n.palette.primary.main,.2)}`,transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${re(n.palette.primary.main,.15)}`}},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[r.jsx(jn,{sx:{bgcolor:re(n.palette.primary.main,.1),color:n.palette.primary.main,width:40,height:40},children:r.jsx(uo,{})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Network Security"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Connection and transport security"})]}),r.jsx(cl,{status:i.network.tls.status==="configured"||i.network.proxy.status==="configured"?"configured":"warning"})]}),r.jsx(sn,{spacing:1.5,children:[...i.network.tls.items,...i.network.proxy.items].map((x,b)=>r.jsx(de,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{transform:"translateX(4px)",borderColor:x.icon==="check"?n.palette.success.main:n.palette.warning.main,background:re(x.icon==="check"?n.palette.success.main:n.palette.warning.main,.05)}},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[x.name==="TLS Certificate"?r.jsx(My,{sx:{color:n.palette.primary.main,fontSize:20}}):x.name==="Reverse Proxy"?r.jsx(Ry,{sx:{color:n.palette.info.main,fontSize:20}}):x.name==="IP Whitelist"?r.jsx(Qf,{sx:{color:n.palette.success.main,fontSize:20}}):r.jsx(Yf,{sx:{color:n.palette.primary.main,fontSize:20}}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:x.name})]}),r.jsx(be,{size:"small",label:x.value||x.status.replace("_"," "),color:x.icon==="check"?"success":"warning",variant:"outlined",sx:{fontWeight:"bold"}})]})},b))})]})})}),(i.optional.mfa.items.length>0||i.optional.webauthn.items.length>0||i.optional.authentication?.items?.length>0)&&r.jsx(K,{item:!0,xs:12,children:r.jsx(Qs,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.info.dark,.05):re(n.palette.info.light,.05),border:`1px solid ${re(n.palette.info.main,.2)}`},children:r.jsxs(Re,{children:[r.jsxs(k,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Xf,{sx:{color:n.palette.info.main}}),"Authentication & Optional Features"]}),r.jsx(K,{container:!0,spacing:2,children:[...i.optional.mfa.items,...i.optional.webauthn.items,...i.optional.authentication?.items||[]].map((x,b)=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsxs(de,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,textAlign:"center",minHeight:140,display:"flex",flexDirection:"column",justifyContent:"center",transition:"all 0.3s","&:hover":{transform:"translateY(-2px)",borderColor:x.icon==="check"?n.palette.success.main:x.icon==="warning"?n.palette.warning.main:n.palette.info.main,background:re(x.icon==="check"?n.palette.success.main:x.icon==="warning"?n.palette.warning.main:n.palette.info.main,.05)}},children:[x.name==="Multi-Factor Auth"?r.jsx(fi,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):x.name==="WebAuthn/FIDO2"?r.jsx(ir,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):x.name==="Session Timeout"?r.jsx(Dy,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):x.name==="Password Policy"?r.jsx(Fy,{sx:{fontSize:40,color:x.icon==="check"?n.palette.success.main:n.palette.warning.main,mb:1}}):x.name==="Account Lockout"?r.jsx(go,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):x.name==="Azure AD SSO"?r.jsx(bc,{sx:{fontSize:40,color:n.palette.success.main,mb:1}}):x.name==="LDAP Integration"?r.jsx(Oy,{sx:{fontSize:40,color:n.palette.success.main,mb:1}}):r.jsx(Fn,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:x.name}),r.jsx(be,{size:"small",label:x.value||x.status.replace("_"," "),color:x.icon==="check"?"success":x.icon==="warning"?"warning":"info",variant:"outlined",sx:{mt:1,fontWeight:"bold"}})]})},b))})]})})}),i.recommendations&&i.recommendations.length>0&&r.jsx(K,{item:!0,xs:12,children:r.jsx(dD,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:r.jsxs(ge,{severity:"info",sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.info.dark,.1):re(n.palette.info.light,.1),border:`1px solid ${re(n.palette.info.main,.3)}`,"& .MuiAlert-icon":{fontSize:28}},icon:r.jsx(_y,{sx:{animation:"pulse 2s infinite"}}),children:[r.jsx(Je,{sx:{fontWeight:"bold",fontSize:"1.1rem"},children:"Security Recommendations"}),r.jsx(sn,{spacing:1,sx:{mt:2},children:i.recommendations.map((x,b)=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,p:1,borderRadius:1,transition:"all 0.3s","&:hover":{background:re(n.palette.info.main,.1),transform:"translateX(8px)"}},children:[r.jsx(Jf,{sx:{color:n.palette.info.main,fontSize:16}}),r.jsx(k,{variant:"body2",children:x})]},b))})]})})}),l&&l.length>0&&r.jsxs(K,{item:!0,xs:12,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{mt:2},children:"Detailed Security Checklist"}),r.jsx(K,{container:!0,spacing:2,children:l.map((x,b)=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Qs,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6+b*.1},sx:{borderRadius:2,border:`1px solid ${x.priority==="high"?re(n.palette.error.main,.3):x.priority==="medium"?re(n.palette.warning.main,.3):re(n.palette.info.main,.3)}`},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,mb:2,children:[r.jsx(be,{label:x.priority.toUpperCase(),size:"small",color:x.priority==="high"?"error":x.priority==="medium"?"warning":"info"}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:x.category})]}),r.jsx(sn,{spacing:1,children:x.items.map((C,P)=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,p:1,borderRadius:1,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`},children:[C.status==="completed"?r.jsx(Nu,{sx:{color:n.palette.success.main,fontSize:20}}):C.status==="pending"?r.jsx(gn,{sx:{color:n.palette.warning.main,fontSize:20}}):r.jsx(Zf,{sx:{color:n.palette.info.main,fontSize:20}}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:C.title}),r.jsx(k,{variant:"caption",color:"text.secondary",children:C.description})]})]},P))})]})})},b))})]})]})]})]})},Cf=({status:e,size:t="medium"})=>{const n=$t(),o=()=>{switch(e){case"online":case"running":case"active":return n.palette.success.main;case"offline":case"stopped":case"error":return n.palette.error.main;case"warning":case"degraded":return n.palette.warning.main;default:return n.palette.grey[500]}},i={small:8,medium:12,large:16}[t]||12;return r.jsx(A,{position:"relative",display:"inline-flex",alignItems:"center",children:r.jsx(A,{sx:{width:i,height:i,borderRadius:"50%",bgcolor:o(),position:"relative","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",bgcolor:o(),animation:e==="online"||e==="running"?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),.7)}`},"70%":{transform:"scale(1)",boxShadow:`0 0 0 10px ${re(o(),0)}`},"100%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),0)}`}}}}})})},pD=()=>{const{apiRequest:e}=Vt(),{enqueueSnackbar:t}=Kt(),n=$t(),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(!1),[c,d]=f.useState({system:!0,resources:!0,network:!0}),[h,p]=f.useState(!1);f.useEffect(()=>{y()},[]),f.useEffect(()=>{if(h){const b=setInterval(y,3e4);return()=>clearInterval(b)}},[h]);const y=async()=>{o||u(!0);try{const b=await e("/api/system/info");if(!b.ok)throw new Error("Failed to fetch system information");const C=await b.json();a(C)}catch(b){console.error("Error fetching system info:",b),t("Failed to load system information",{variant:"error"})}finally{s(!1),u(!1)}},m=b=>{navigator.clipboard.writeText(b),t("Copied to clipboard",{variant:"success"})},g=b=>{if(b===0)return"0 Bytes";const C=1024,P=["Bytes","KB","MB","GB","TB"],F=Math.floor(Math.log(b)/Math.log(C));return parseFloat((b/Math.pow(C,F)).toFixed(2))+" "+P[F]},v=b=>{const C=Math.floor(b/86400),P=Math.floor(b%86400/3600),F=Math.floor(b%3600/60);return`${C}d ${P}h ${F}m`},x=b=>{d(C=>({...C,[b]:!C[b]}))};return o?r.jsx(A,{children:r.jsx(K,{container:!0,spacing:3,children:[1,2,3,4].map(b=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(xc,{variant:"rectangular",height:200,sx:{borderRadius:2}})},b))})}):i?r.jsxs(A,{children:[r.jsx(de,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.1)} 0%, ${re(n.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(K,{item:!0,xs:12,md:8,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(hs,{badgeContent:r.jsx(Cf,{status:"online",size:"small"}),overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(jn,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.secondary.main} 100%)`},children:r.jsx(Tr,{fontSize:"large"})})}),r.jsxs(A,{children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"System Information"}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:[i?.hostname||"Loading..."," • Last updated: ",new Date().toLocaleTimeString()]})]})]})}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(A,{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,children:[r.jsx(yt,{title:h?"Auto-refresh ON (30s)":"Auto-refresh OFF",children:r.jsx(Pe,{onClick:()=>{p(!h),t(h?"Auto-refresh disabled":"Auto-refresh enabled (30s interval)",{variant:"info"})},color:h?"primary":"default",children:r.jsx(Ly,{})})}),r.jsx(yt,{title:"Refresh Now",children:r.jsx(Pe,{onClick:()=>{y(),t("Refreshing system information...",{variant:"info"})},disabled:l,children:l?r.jsx(Ue,{size:24}):r.jsx(xn,{})})})]})})]})}),r.jsx(K,{container:!0,spacing:2,sx:{mb:3},children:[{label:"Uptime",value:i?.uptime?v(i.uptime):"N/A",icon:r.jsx(yc,{}),color:"primary"},{label:"CPU Cores",value:i?.cpu?.cores||"N/A",icon:r.jsx(Bu,{}),color:"secondary"},{label:"Memory",value:i?.memory?`${Math.round(i.memory.used/i.memory.total*100)}%`:"N/A",icon:r.jsx(Hu,{}),color:i?.memory&&i.memory.used/i.memory.total>.8?"error":"success"},{label:"Disk",value:i?.disk?`${Math.round(i.disk.used/i.disk.total*100)}%`:"N/A",icon:r.jsx(vc,{}),color:i?.disk&&i.disk.used/i.disk.total>.8?"error":"success"}].map((b,C)=>r.jsx(K,{item:!0,xs:6,md:3,children:r.jsx(_e,{sx:{p:2,borderRadius:2,background:n.palette.mode==="dark"?re(n.palette.background.paper,.8):"white",border:`1px solid ${re(n.palette[b.color].main,.2)}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:b.label}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:b.value})]}),r.jsx(jn,{sx:{width:40,height:40,bgcolor:re(n.palette[b.color].main,.1),color:n.palette[b.color].main},children:b.icon})]})})},C))}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(_e,{sx:{borderRadius:3},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(jn,{sx:{bgcolor:"primary.main",width:32,height:32},children:r.jsx(Tr,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"System Overview"})]}),r.jsx(Pe,{size:"small",onClick:()=>x("system"),children:r.jsx(Ar,{sx:{transform:c.system?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Hn,{in:c.system,children:r.jsx(sn,{spacing:1.5,children:[{label:"Hostname",value:i?.hostname,icon:r.jsx($y,{})},{label:"Platform",value:i?.platform,icon:r.jsx(Vy,{})},{label:"OS Version",value:i?.osVersion,icon:r.jsx(Ny,{})},{label:"Kernel",value:i?.kernel,icon:r.jsx(By,{})},{label:"Architecture",value:i?.arch,icon:r.jsx(Hy,{})},{label:"Node Version",value:i?.nodeVersion,icon:r.jsx(zy,{})}].map((b,C)=>r.jsx(de,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[b.icon,r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:b.label}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:b.value||"Unknown"})]})]}),b.value&&r.jsx(Pe,{size:"small",onClick:()=>m(b.value),children:r.jsx(Ht,{fontSize:"small"})})]})},C))})})]})})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(_e,{sx:{borderRadius:3},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(jn,{sx:{bgcolor:"secondary.main",width:32,height:32},children:r.jsx(Hu,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Resource Usage"})]}),r.jsx(Pe,{size:"small",onClick:()=>x("resources"),children:r.jsx(Ar,{sx:{transform:c.resources?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsxs(Hn,{in:c.resources,children:[r.jsxs(A,{mb:3,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsx(k,{variant:"subtitle2",children:"Memory Usage"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.memory?`${g(i.memory.used)} / ${g(i.memory.total)}`:"Unknown"})]}),r.jsx(zt,{variant:"determinate",value:i?.memory?i.memory.used/i.memory.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:re(n.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.memory&&i.memory.used/i.memory.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.primary.main} 0%, ${n.palette.primary.dark} 100%)`}}}),i?.memory?.free&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:[g(i.memory.free)," available"]})]}),r.jsxs(A,{mb:3,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsx(k,{variant:"subtitle2",children:"Disk Usage"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.disk?`${g(i.disk.used)} / ${g(i.disk.total)}`:"Unknown"})]}),r.jsx(zt,{variant:"determinate",value:i?.disk?i.disk.used/i.disk.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:re(n.palette.secondary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.disk&&i.disk.used/i.disk.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.secondary.main} 0%, ${n.palette.secondary.dark} 100%)`}}}),i?.disk?.free&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:[g(i.disk.free)," available"]})]}),r.jsx(de,{sx:{p:2,borderRadius:2,bgcolor:re(n.palette.background.default,.5)},children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Bu,{fontSize:"small"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"CPU Cores"}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:i?.cpu?.cores||"N/A"})]})]})}),r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Hf,{fontSize:"small"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Load Average"}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:i?.loadAvg?.map(b=>b.toFixed(2)).join(" ")||"N/A"})]})]})})]})})]})]})})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(_e,{sx:{borderRadius:3},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(jn,{sx:{bgcolor:"success.main",width:32,height:32},children:r.jsx(Gy,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Services & Network"})]}),r.jsx(Pe,{size:"small",onClick:()=>x("network"),children:r.jsx(Ar,{sx:{transform:c.network?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Hn,{in:c.network,children:r.jsxs(K,{container:!0,spacing:3,children:[r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Active Services"}),r.jsx(sn,{spacing:1,children:[{name:"SMTP Server",port:i?.ports?.smtp||"25",status:i?.services?.smtp||"active",icon:r.jsx(po,{})},{name:"API Server",port:i?.ports?.api||"3001",status:i?.services?.api||"active",icon:r.jsx(Uy,{})},{name:"Dashboard",port:i?.ports?.dashboard||"3001",status:i?.services?.dashboard||"active",icon:r.jsx(ep,{})},{name:"PM2 Process",port:"N/A",status:i?.pm2?.status||"unknown",icon:r.jsx(Cc,{})}].map((b,C)=>r.jsx(de,{sx:{p:2,borderRadius:2,border:`1px solid ${n.palette.divider}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[b.icon,r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:b.name}),r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Port: ",b.port]})]})]}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Cf,{status:b.status}),r.jsx(be,{label:b.status,size:"small",color:b.status==="active"||b.status==="running"?"success":b.status==="stopped"||b.status==="error"?"error":"warning",variant:"outlined"})]})]})},C))})]}),r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Network Information"}),r.jsxs(sn,{spacing:2,children:[r.jsxs(de,{sx:{p:2,borderRadius:2,bgcolor:re(n.palette.info.main,.05)},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"IP Addresses"}),r.jsx(A,{mt:1,children:i?.network?.ips?.map((b,C)=>r.jsx(be,{label:b,size:"small",sx:{mr:1,mb:1,fontFamily:"monospace"},icon:r.jsx(Yf,{}),onClick:()=>m(b)},C))||r.jsx(k,{variant:"body2",children:"No IP addresses found"})})]}),r.jsx(de,{sx:{p:2,borderRadius:2},children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Wy,{fontSize:"small",color:"primary"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Uptime"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.pm2?.uptime||"Unknown"})]})]})}),r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(qy,{fontSize:"small",color:"secondary"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Restarts"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.pm2?.restarts||"0"})]})]})})]})})]})]})]})})]})})})]})]}):r.jsxs(ge,{severity:"error",sx:{borderRadius:2},action:r.jsx(X,{color:"inherit",size:"small",onClick:y,children:"Retry"}),children:[r.jsx(Je,{children:"Error"}),"Failed to load system information"]})},ds=f.createContext({});function mD(e){return dr("MuiTimeline",e)}Qn("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function gr(e){return e==="alternate-reverse"?"positionAlternateReverse":`position${An(e)}`}const gD=["position","className"],xD=e=>{const{position:t,classes:n}=e,o={root:["root",t&&gr(t)]};return Ee(o,mD,n)},yD=Ye("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.position&&t[gr(n.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),bD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimeline"}),{position:s="right",className:i}=o,a=ce(o,gD),l=j({},o,{position:s}),u=xD(l),c=f.useMemo(()=>({position:s}),[s]);return r.jsx(ds.Provider,{value:c,children:r.jsx(yD,j({className:Ve(u.root,i),ownerState:l,ref:n},a))})});function vD(e){return dr("MuiTimelineConnector",e)}Qn("MuiTimelineConnector",["root"]);const CD=["className"],wD=e=>{const{classes:t}=e;return Ee({root:["root"]},vD,t)},jD=Ye("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.grey[400],flexGrow:1})),SD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineConnector"}),{className:s}=o,i=ce(o,CD),a=o,l=wD(a);return r.jsx(jD,j({className:Ve(l.root,s),ownerState:a,ref:n},i))});function PD(e){return dr("MuiTimelineContent",e)}const kD=Qn("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),ID=["className"],ED=e=>{const{position:t,classes:n}=e,o={root:["root",gr(t)]};return Ee(o,PD,n)},TD=Ye(k,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[gr(n.position)]]}})(({ownerState:e})=>j({flex:1,padding:"6px 16px",textAlign:"left"},e.position==="left"&&{textAlign:"right"})),AD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineContent"}),{className:s}=o,i=ce(o,ID),{position:a}=f.useContext(ds),l=j({},o,{position:a||"right"}),u=ED(l);return r.jsx(TD,j({component:"div",className:Ve(u.root,s),ownerState:l,ref:n},i))});function MD(e){return dr("MuiTimelineDot",e)}Qn("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const RD=["className","color","variant"],DD=e=>{const{color:t,variant:n,classes:o}=e,s={root:["root",n,t!=="inherit"&&`${n}${An(t)}`]};return Ee(s,MD,o)},FD=Ye("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.color!=="inherit"&&`${n.variant}${An(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>j({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0"},e.variant==="filled"&&j({borderColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main})),e.variant==="outlined"&&j({boxShadow:"none",backgroundColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[e.color].main})))),OD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineDot"}),{className:s,color:i="grey",variant:a="filled"}=o,l=ce(o,RD),u=j({},o,{color:i,variant:a}),c=DD(u);return r.jsx(FD,j({className:Ve(c.root,s),ownerState:u,ref:n},l))});function _D(e){return dr("MuiTimelineOppositeContent",e)}const LD=Qn("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),$D=["className"],VD=e=>{const{position:t,classes:n}=e,o={root:["root",gr(t)]};return Ee(o,_D,n)},ND=Ye(k,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[gr(n.position)]]}})(({ownerState:e})=>j({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1},e.position==="left"&&{textAlign:"left"})),Xx=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineOppositeContent"}),{className:s}=o,i=ce(o,$D),{position:a}=f.useContext(ds),l=j({},o,{position:a||"left"}),u=VD(l);return r.jsx(ND,j({component:"div",className:Ve(u.root,s),ownerState:l,ref:n},i))});Xx.muiName="TimelineOppositeContent";function BD(e){return dr("MuiTimelineItem",e)}Qn("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const HD=["position","className"],zD=e=>{const{position:t,classes:n,hasOppositeContent:o}=e,s={root:["root",gr(t),!o&&"missingOppositeContent"]};return Ee(s,BD,n)},GD=Ye("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[gr(n.position)]]}})(({ownerState:e})=>j({listStyle:"none",display:"flex",position:"relative",minHeight:70},e.position==="left"&&{flexDirection:"row-reverse"},(e.position==="alternate"||e.position==="alternate-reverse")&&{[`&:nth-of-type(${e.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${kD.root}`]:{textAlign:"right"},[`& .${LD.root}`]:{textAlign:"left"}}},!e.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}})),UD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineItem"}),{position:s,className:i}=o,a=ce(o,HD),{position:l}=f.useContext(ds);let u=!1;f.Children.forEach(o.children,p=>{Ky(p,["TimelineOppositeContent"])&&(u=!0)});const c=j({},o,{position:s||l||"right",hasOppositeContent:u}),d=zD(c),h=f.useMemo(()=>({position:c.position}),[c.position]);return r.jsx(ds.Provider,{value:h,children:r.jsx(GD,j({className:Ve(d.root,i),ownerState:c,ref:n},a))})});function WD(e){return dr("MuiTimelineSeparator",e)}Qn("MuiTimelineSeparator",["root"]);const qD=["className"],KD=e=>{const{classes:t}=e;return Ee({root:["root"]},WD,t)},QD=Ye("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),YD=f.forwardRef(function(t,n){const o=hr({props:t,name:"MuiTimelineSeparator"}),{className:s}=o,i=ce(o,qD),a=o,l=KD(a);return r.jsx(QD,j({className:Ve(l.root,s),ownerState:a,ref:n},i))}),wf=Gt(_e),XD=Gt(A),JD=()=>{const e=$t(),{enqueueSnackbar:t}=Kt(),[n,o]=f.useState(!1),[s,i]=f.useState(null),[a,l]=f.useState(!1),[u,c]=f.useState(!1),[d,h]=f.useState(!1),[p,y]=f.useState(!0),[m,g]=f.useState(!1),[v,x]=f.useState(!1),[b,C]=f.useState([]),[P,F]=f.useState(!1),[T,I]=f.useState(0),[R,V]=f.useState(null),[O,S]=f.useState(null),[N,D]=f.useState(null),[w,E]=f.useState({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),[M,$]=f.useState({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"});f.useEffect(()=>{L(),_()},[]);const L=async()=>{o(!0);try{const le=await(await fetch("/api/certificates/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();i(le),x(le.autoRenewEnabled||!1)}catch{t("Failed to fetch certificate status",{variant:"error"})}finally{o(!1)}},_=async()=>{try{const le=await(await fetch("/api/certificates/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();C(le.history||[])}catch{console.error("Failed to fetch certificate history")}},B=async()=>{if(!R||!O){t("Certificate and key files are required",{variant:"warning"});return}const Q=new FormData;Q.append("certificate",R),Q.append("key",O),N&&Q.append("chain",N),o(!0);try{const le=await fetch("/api/certificates/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Q}),Y=await le.json();if(le.ok)t("Certificate uploaded successfully",{variant:"success"}),l(!1),V(null),S(null),D(null),L(),_();else throw new Error(Y.error)}catch(le){t(`Upload failed: ${le.message}`,{variant:"error"})}finally{o(!1)}},z=async()=>{if(!w.commonName){t("Common Name is required",{variant:"warning"});return}o(!0);try{const Q=await fetch("/api/certificates/generate-self-signed",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(w)}),le=await Q.json();if(Q.ok)t("Self-signed certificate generated successfully",{variant:"success"}),c(!1),E({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),L(),_();else throw new Error(le.error)}catch(Q){t(`Generation failed: ${Q.message}`,{variant:"error"})}finally{o(!1)}},G=async()=>{if(!M.domain||!M.email){t("Domain and email are required",{variant:"warning"});return}o(!0);try{const Q=await fetch("/api/certificates/generate-letsencrypt",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(M)}),le=await Q.json();if(Q.ok)t(le.message,{variant:"success"}),le.renewCommand&&t("Auto-renewal configured",{variant:"info"}),h(!1),$({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"}),L(),_();else throw new Error(le.error||"Generation failed")}catch(Q){t(`Let's Encrypt failed: ${Q.message}`,{variant:"error"})}finally{o(!1)}},J=async()=>{try{(await fetch("/api/certificates/auto-renew",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!v})})).ok&&(x(!v),t(`Auto-renewal ${v?"disabled":"enabled"}`,{variant:"success"}))}catch{t("Failed to update auto-renewal",{variant:"error"})}},te=s?.hasCertificate?s.daysUntilExpiry<0?{status:"expired",color:"error",icon:r.jsx(Tn,{})}:s.daysUntilExpiry<7?{status:"critical",color:"error",icon:r.jsx(tb,{})}:s.daysUntilExpiry<30?{status:"warning",color:"warning",icon:r.jsx(gn,{})}:s.daysUntilExpiry<60?{status:"attention",color:"info",icon:r.jsx(Zf,{})}:{status:"healthy",color:"success",icon:r.jsx(Ne,{})}:{status:"missing",color:"default",icon:r.jsx(go,{})},Ce=Q=>{navigator.clipboard.writeText(Q),t("Copied to clipboard",{variant:"success"})},W=Q=>Q?new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return r.jsxs(A,{sx:{width:"100%"},children:[r.jsx(wf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{mb:3,background:e.palette.mode==="dark"?`linear-gradient(135deg, ${re(e.palette.primary.dark,.1)} 0%, ${re(e.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(e.palette.primary.light,.1)} 0%, ${re(e.palette.secondary.light,.1)} 100%)`,borderRadius:3,overflow:"visible"},children:r.jsx(Re,{sx:{p:4},children:r.jsxs(K,{container:!0,spacing:3,children:[r.jsxs(K,{item:!0,xs:12,md:8,children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:3,children:[r.jsx(hs,{badgeContent:te.status==="healthy"?r.jsx(Ne,{fontSize:"small"}):null,color:te.color,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(A,{sx:{width:64,height:64,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.mode==="dark"?`linear-gradient(135deg, ${e.palette.primary.dark} 0%, ${e.palette.secondary.dark} 100%)`:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.secondary.main} 100%)`,color:"white",mr:2},children:te.icon})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"TLS Certificate Status"}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(be,{label:s?.hasCertificate?"Certificate Installed":"No Certificate",color:te.color,size:"small",icon:s?.hasCertificate?r.jsx(mo,{}):r.jsx(go,{})}),s?.isSelfSigned&&r.jsx(be,{label:"Self-Signed",color:"warning",size:"small",variant:"outlined"}),s?.isLetsEncrypt&&r.jsx(be,{label:"Let's Encrypt",color:"success",size:"small",icon:r.jsx(zu,{})})]})]}),r.jsx(yt,{title:"Refresh Status",children:r.jsx(Pe,{onClick:L,disabled:n,sx:{background:re(e.palette.primary.main,.1),"&:hover":{background:re(e.palette.primary.main,.2)}},children:n?r.jsx(Ue,{size:24}):r.jsx(xn,{})})})]}),n&&r.jsx(zt,{sx:{mb:2,borderRadius:1}}),s?.hasCertificate&&r.jsx(Zm,{children:r.jsxs(XD,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(de,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Gu,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Common Name"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:s.subject||"Unknown"})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(de,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(zu,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Issuer"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:s.issuer||"Unknown"})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(de,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Qy,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Valid From"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:W(s.validFrom)})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(de,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8),border:te.status!=="healthy"?`2px solid ${e.palette[te.color].main}`:"none"},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(yc,{sx:{mr:1,color:te.color==="default"?"primary.main":`${te.color}.main`}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Expires"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:W(s.validTo)}),r.jsx(k,{variant:"caption",color:`${te.color}.main`,children:s.daysUntilExpiry>0?`${s.daysUntilExpiry} days remaining`:"Expired"})]})})]}),r.jsxs(Yy,{expanded:p,onChange:()=>y(!p),sx:{mt:2,borderRadius:2,"&:before":{display:"none"}},children:[r.jsx(Xy,{expandIcon:r.jsx(Ar,{}),children:r.jsx(k,{children:"Advanced Certificate Details"})}),r.jsx(Jy,{children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(tp,{})}),r.jsx(ie,{primary:"Serial Number",secondary:s.serialNumber||"N/A"}),r.jsx(un,{children:r.jsx(Pe,{size:"small",onClick:()=>Ce(s.serialNumber),children:r.jsx(Ht,{fontSize:"small"})})})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(ir,{})}),r.jsx(ie,{primary:"Signature Algorithm",secondary:s.signatureAlgorithm||"N/A"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(zi,{})}),r.jsx(ie,{primary:"Key Size",secondary:`${s.keySize||"Unknown"} bits`})]})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Gu,{})}),r.jsx(ie,{primary:"Alternative Names",secondary:s.altNames?.join(", ")||"None"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Fn,{})}),r.jsx(ie,{primary:"Fingerprint (SHA-256)",secondary:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(k,{variant:"caption",sx:{fontFamily:"monospace",display:m?"block":"none"},children:s.fingerprint}),!m&&r.jsx(k,{variant:"caption",children:"••••••••••••••••"}),r.jsx(Pe,{size:"small",onClick:()=>g(!m),sx:{ml:1},children:m?r.jsx(pc,{fontSize:"small"}):r.jsx(mc,{fontSize:"small"})})]})})]})]})})]})})]})]})}),!s?.hasCertificate&&r.jsxs(ge,{severity:"warning",sx:{borderRadius:2},children:[r.jsx(Je,{children:"No Certificate Installed"}),"Your SMTP relay is running without TLS encryption. Upload or generate a certificate to secure email communications."]})]}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(de,{sx:{p:3,borderRadius:2,height:"100%"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),r.jsxs(A,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(X,{fullWidth:!0,variant:"contained",startIcon:r.jsx(Wo,{}),onClick:()=>h(!0),sx:{background:"linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)",color:"black",fontWeight:"bold"},children:"Get Let's Encrypt Cert"}),r.jsx(X,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Mr,{}),onClick:()=>l(!0),children:"Upload Certificate"}),r.jsx(X,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Xs,{}),onClick:()=>c(!0),children:"Generate Self-Signed"}),s?.hasCertificate&&r.jsxs(r.Fragment,{children:[r.jsx(St,{}),r.jsx(X,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Zy,{}),onClick:()=>window.open("/api/certificates/download/certificate","_blank"),children:"Download Certificate"}),r.jsx(hn,{control:r.jsx(Sn,{checked:v,onChange:J,color:"primary"}),label:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(eb,{sx:{mr:1}}),"Auto-Renewal"]})})]})]})]})})]})})}),b.length>0&&r.jsx(wf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},elevation:3,sx:{mb:3,borderRadius:3},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(k,{variant:"h6",children:"Certificate History"}),r.jsx(Pe,{onClick:()=>F(!P),children:r.jsx(np,{})})]}),r.jsx(Hn,{in:P,children:r.jsx(bD,{position:"alternate",children:b.slice(0,5).map((Q,le)=>r.jsxs(UD,{children:[r.jsx(Xx,{color:"textSecondary",children:W(Q.date)}),r.jsxs(YD,{children:[r.jsx(OD,{color:Q.type==="installed"?"success":"warning",children:Q.type==="installed"?r.jsx(Ne,{}):r.jsx(gn,{})}),le<b.length-1&&r.jsx(SD,{})]}),r.jsxs(AD,{children:[r.jsx(k,{variant:"subtitle2",children:Q.action}),r.jsx(k,{variant:"caption",color:"textSecondary",children:Q.details})]})]},le))})})]})}),r.jsxs(at,{open:a,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:Sa,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Mr,{sx:{mr:1}}),"Upload TLS Certificate"]})}),r.jsx(ct,{children:r.jsxs(A,{sx:{mt:2,display:"flex",flexDirection:"column",gap:3},children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Certificate File (.pem, .crt) *"}),r.jsx(Pa,{type:"file",onChange:Q=>V(Q.target.files[0]),inputProps:{accept:".pem,.crt"},fullWidth:!0})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Private Key File (.pem, .key) *"}),r.jsx(Pa,{type:"file",onChange:Q=>S(Q.target.files[0]),inputProps:{accept:".pem,.key"},fullWidth:!0})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Certificate Chain (optional)"}),r.jsx(Pa,{type:"file",onChange:Q=>D(Q.target.files[0]),inputProps:{accept:".pem"},fullWidth:!0})]}),r.jsx(ge,{severity:"info",children:"Files will be validated before installation. Ensure your private key matches the certificate."})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>l(!1),children:"Cancel"}),r.jsx(X,{onClick:B,variant:"contained",disabled:n||!R||!O,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:"Upload & Install"})]})]}),r.jsxs(at,{open:u,onClose:()=>c(!1),maxWidth:"md",fullWidth:!0,TransitionComponent:Sa,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Xs,{sx:{mr:1}}),"Generate Self-Signed Certificate"]})}),r.jsx(ct,{children:r.jsxs(Hr,{activeStep:T,orientation:"vertical",sx:{mt:2},children:[r.jsxs(zn,{children:[r.jsx(Gn,{children:"Basic Information"}),r.jsxs(ka,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,children:r.jsx(De,{label:"Common Name (CN) *",value:w.commonName,onChange:Q=>E({...w,commonName:Q.target.value}),fullWidth:!0,helperText:"e.g., smtp-relay.yourdomain.com"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(De,{label:"Country (C)",value:w.country,onChange:Q=>E({...w,country:Q.target.value}),fullWidth:!0,inputProps:{maxLength:2},helperText:"Two-letter code (US, DE, CH)"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(De,{label:"State/Province (ST)",value:w.state,onChange:Q=>E({...w,state:Q.target.value}),fullWidth:!0})})]}),r.jsx(A,{mt:2,children:r.jsx(X,{onClick:()=>I(1),variant:"contained",children:"Next"})})]})]}),r.jsxs(zn,{children:[r.jsx(Gn,{children:"Organization Details"}),r.jsxs(ka,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(De,{label:"Organization (O)",value:w.organization,onChange:Q=>E({...w,organization:Q.target.value}),fullWidth:!0})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(De,{label:"Organizational Unit (OU)",value:w.organizationalUnit,onChange:Q=>E({...w,organizationalUnit:Q.target.value}),fullWidth:!0})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(De,{label:"Email Address",type:"email",value:w.emailAddress,onChange:Q=>E({...w,emailAddress:Q.target.value}),fullWidth:!0})})]}),r.jsxs(A,{mt:2,display:"flex",gap:1,children:[r.jsx(X,{onClick:()=>I(0),children:"Back"}),r.jsx(X,{onClick:()=>I(2),variant:"contained",children:"Next"})]})]})]}),r.jsxs(zn,{children:[r.jsx(Gn,{children:"Certificate Options"}),r.jsxs(ka,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(De,{label:"Validity (Days)",type:"number",value:w.days,onChange:Q=>E({...w,days:parseInt(Q.target.value)}),fullWidth:!0,helperText:"Recommended: 365 days"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(ut,{fullWidth:!0,children:[r.jsx(vt,{children:"Key Size"}),r.jsxs(mt,{value:w.keySize,onChange:Q=>E({...w,keySize:Q.target.value}),label:"Key Size",children:[r.jsx(se,{value:2048,children:"2048 bits (Recommended)"}),r.jsx(se,{value:4096,children:"4096 bits (More Secure)"})]})]})})]}),r.jsxs(A,{mt:2,display:"flex",gap:1,children:[r.jsx(X,{onClick:()=>I(1),children:"Back"}),r.jsx(X,{onClick:z,variant:"contained",disabled:n||!w.commonName,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Xs,{}),children:"Generate Certificate"})]})]})]})]})})]}),r.jsxs(at,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:Sa,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Wo,{sx:{mr:1,color:"success.main"}}),"Generate Let's Encrypt Certificate"]})}),r.jsxs(ct,{children:[r.jsx(ge,{severity:"info",sx:{mb:2},children:"Free, automated TLS certificate from Let's Encrypt Certificate Authority."}),r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(De,{label:"Domain *",value:M.domain,onChange:Q=>$({...M,domain:Q.target.value}),fullWidth:!0,helperText:"Fully qualified domain name (must be publicly accessible)"}),r.jsx(De,{label:"Email *",type:"email",value:M.email,onChange:Q=>$({...M,email:Q.target.value}),fullWidth:!0,helperText:"For renewal notifications and account recovery"}),r.jsx(hn,{control:r.jsx(Sn,{checked:M.dnsChallenge,onChange:Q=>$({...M,dnsChallenge:Q.target.checked})}),label:"Use DNS Challenge (for wildcard certificates)"}),!M.dnsChallenge&&r.jsx(De,{label:"Webroot Path",value:M.webroot,onChange:Q=>$({...M,webroot:Q.target.value}),fullWidth:!0,helperText:"Path for HTTP-01 challenge files"}),r.jsx(hn,{control:r.jsx(Sn,{checked:M.autoRenew,onChange:Q=>$({...M,autoRenew:Q.target.checked}),color:"primary"}),label:"Enable Auto-Renewal (Recommended)"}),r.jsx(hn,{control:r.jsx(Sn,{checked:M.staging,onChange:Q=>$({...M,staging:Q.target.checked})}),label:"Use Staging Environment (for testing)"}),!M.staging&&r.jsx(ge,{severity:"warning",children:"Production certificates have rate limits. Use staging for testing first."})]})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>h(!1),children:"Cancel"}),r.jsx(X,{onClick:G,variant:"contained",color:"success",disabled:n||!M.domain||!M.email,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Wo,{}),children:"Generate Certificate"})]})]})]})};function jf({children:e,value:t,index:n,...o}){return r.jsx("div",{role:"tabpanel",hidden:t!==n,id:`settings-tabpanel-${n}`,"aria-labelledby":`settings-tab-${n}`,...o,children:t===n&&r.jsx(A,{sx:{p:3},children:e})})}function ZD(){const[e,t]=f.useState(0);return r.jsxs(A,{sx:{p:3},children:[r.jsx(k,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Settings"}),r.jsx(de,{elevation:3,sx:{width:"100%",mb:2},children:r.jsxs(Gi,{value:e,onChange:(n,o)=>t(o),indicatorColor:"primary",textColor:"primary",variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{label:"TLS Certificates",icon:r.jsx(Fn,{})}),r.jsx(Pn,{label:"System Config",icon:r.jsx(Ui,{})})]})}),r.jsx(jf,{value:e,index:0,children:r.jsx(JD,{})}),r.jsx(jf,{value:e,index:1,children:r.jsx(pD,{})})]})}const eF=()=>{const{enqueueSnackbar:e}=Kt(),{socket:t,connected:n}=su(),[o,s]=f.useState([]),[i,a]=f.useState(!0),[l,u]=f.useState({level:"all",search:"",timeRange:"1h"}),[c,d]=f.useState(!0),h={error:"error",warn:"warning",info:"info",debug:"default"};f.useEffect(()=>{if(p(),t&&n&&c)return t.on("logs:new",v=>{s(x=>[v,...x].slice(0,1e3))}),()=>{t.off("logs:new")}},[t,n,c,l]);const p=async()=>{try{const v=await qe.get("/api/logs",{params:l});s(v.data)}catch{e("Failed to fetch logs",{variant:"error"})}finally{a(!1)}},y=()=>{const v=o.map(P=>`[${P.timestamp}] [${P.level.toUpperCase()}] ${P.message} ${P.details||""}`).join(`
`),x=new Blob([v],{type:"text/plain"}),b=window.URL.createObjectURL(x),C=document.createElement("a");C.href=b,C.download=`smtp-relay-logs-${new Date().toISOString()}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(b)},m=v=>new Date(v).toLocaleString(),g=(v,x)=>x?v.split(new RegExp(`(${x})`,"gi")).map((C,P)=>C.toLowerCase()===x.toLowerCase()?r.jsx("mark",{style:{backgroundColor:"yellow"},children:C},P):C):v;return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"System Logs"}),r.jsxs(A,{children:[r.jsx(Pe,{onClick:p,title:"Refresh",children:r.jsx(xn,{})}),r.jsx(Pe,{onClick:y,title:"Download Logs",children:r.jsx(rr,{})})]})]}),r.jsx(de,{elevation:3,sx:{p:2,mb:3},children:r.jsxs(A,{display:"flex",gap:2,alignItems:"center",children:[r.jsxs(ut,{size:"small",sx:{minWidth:120},children:[r.jsx(vt,{children:"Log Level"}),r.jsxs(mt,{value:l.level,label:"Log Level",onChange:v=>u({...l,level:v.target.value}),children:[r.jsx(se,{value:"all",children:"All"}),r.jsx(se,{value:"error",children:"Error"}),r.jsx(se,{value:"warn",children:"Warning"}),r.jsx(se,{value:"info",children:"Info"}),r.jsx(se,{value:"debug",children:"Debug"})]})]}),r.jsxs(ut,{size:"small",sx:{minWidth:120},children:[r.jsx(vt,{children:"Time Range"}),r.jsxs(mt,{value:l.timeRange,label:"Time Range",onChange:v=>u({...l,timeRange:v.target.value}),children:[r.jsx(se,{value:"15m",children:"Last 15 min"}),r.jsx(se,{value:"1h",children:"Last 1 hour"}),r.jsx(se,{value:"6h",children:"Last 6 hours"}),r.jsx(se,{value:"24h",children:"Last 24 hours"}),r.jsx(se,{value:"7d",children:"Last 7 days"})]})]}),r.jsx(De,{size:"small",placeholder:"Search logs...",value:l.search,onChange:v=>u({...l,search:v.target.value}),InputProps:{startAdornment:r.jsx(pi,{sx:{mr:1,color:"text.secondary"}}),endAdornment:l.search&&r.jsx(Pe,{size:"small",onClick:()=>u({...l,search:""}),children:r.jsx(nb,{fontSize:"small"})})},sx:{flex:1}}),r.jsx(ut,{size:"small",children:r.jsxs(mt,{value:c,onChange:v=>d(v.target.value),children:[r.jsx(se,{value:!0,children:"Auto-refresh ON"}),r.jsx(se,{value:!1,children:"Auto-refresh OFF"})]})})]})}),r.jsx(de,{elevation:3,sx:{p:2,maxHeight:"calc(100vh - 300px)",overflow:"auto",backgroundColor:"#1e1e1e"},children:i?r.jsx(k,{color:"text.secondary",align:"center",children:"Loading logs..."}):o.length===0?r.jsx(ge,{severity:"info",children:"No logs found for the selected filters"}):r.jsx(A,{sx:{fontFamily:"monospace",fontSize:"0.9rem"},children:o.map((v,x)=>r.jsxs(A,{sx:{mb:.5,p:1,backgroundColor:x%2===0?"#252525":"#1e1e1e",borderLeft:"3px solid",borderColor:v.level==="error"?"error.main":v.level==="warn"?"warning.main":v.level==="info"?"info.main":"grey.600","&:hover":{backgroundColor:"#333"}},children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(k,{variant:"caption",sx:{color:"grey.500",minWidth:"150px"},children:m(v.timestamp)}),r.jsx(be,{label:v.level.toUpperCase(),size:"small",color:h[v.level],sx:{minWidth:"60px"}}),r.jsx(k,{sx:{color:"grey.100",wordBreak:"break-all"},children:g(v.message,l.search)})]}),v.details&&r.jsx(k,{variant:"body2",sx:{color:"grey.400",ml:"230px",mt:.5,fontFamily:"monospace"},children:g(v.details,l.search)}),v.metadata&&r.jsx(A,{sx:{ml:"230px",mt:.5},children:Object.entries(v.metadata).map(([b,C])=>r.jsx(be,{label:`${b}: ${C}`,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},b))})]},x))})})]})},tF=()=>{const{enqueueSnackbar:e}=Kt(),{apiRequest:t}=Vt(),[n,o]=f.useState(null),[s,i]=f.useState(!0),[a,l]=f.useState(0),[u,c]=f.useState(!1),[d,h]=f.useState(!1),[p,y]=f.useState(!1),[m,g]=f.useState(!1),[v,x]=f.useState(null),[b,C]=f.useState([]),[P,F]=f.useState(""),[T,I]=f.useState(""),[R,V]=f.useState(""),[O,S]=f.useState(""),[N,D]=f.useState(""),[w,E]=f.useState("");f.useEffect(()=>{M()},[]);const M=async()=>{try{const W=await t("/api/ip-whitelist/config");o(W.config),i(!1)}catch(W){e(W.message,{variant:"error"}),i(!1)}},$=async()=>{if(!R||!P||!T){e("Please fill all fields",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/add",{method:"POST",body:JSON.stringify({category:P,subcategory:T,ip:R})});e(`Added ${W.ip} successfully`,{variant:"success"}),c(!1),V(""),M()}catch(W){e(W.message,{variant:"error"})}},L=async(W,Q,le)=>{if(confirm(`Remove ${le} from ${W}/${Q}?`))try{const Y=await t("/api/ip-whitelist/remove",{method:"POST",body:JSON.stringify({category:W,subcategory:Q,ip:le})});e(`Removed ${le} successfully`,{variant:"success"}),M()}catch(Y){e(Y.message,{variant:"error"})}},_=async()=>{if(!O||!P||!T){e("Please fill all fields",{variant:"error"});return}const W=O.split(`
`).map(Q=>Q.trim()).filter(Boolean);try{const Q=await t("/api/ip-whitelist/import",{method:"POST",body:JSON.stringify({category:P,subcategory:T,ips:W})}),{results:le}=Q;e(`Import complete: ${le.success.length} added, ${le.skipped.length} skipped, ${le.failed.length} failed`,{variant:"success"}),h(!1),S(""),M()}catch(Q){e(Q.message,{variant:"error"})}},B=async(W,Q)=>{try{const le=await t(`/api/ip-whitelist/export/${W}/${Q}`),Y=le.ips.join(`
`),ne=new Blob([Y],{type:"text/plain"}),je=URL.createObjectURL(ne),Z=document.createElement("a");Z.href=je,Z.download=`${W}_${Q}_ips.txt`,Z.click(),URL.revokeObjectURL(je),e(`Exported ${le.count} IPs`,{variant:"success"})}catch(le){e(le.message,{variant:"error"})}},z=async()=>{if(!N){e("Please enter an IP to test",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/test",{method:"POST",body:JSON.stringify({ip:N})});x(W)}catch(W){e(W.message,{variant:"error"}),x(null)}},G=async(W,Q)=>{try{const le=await t("/api/ip-whitelist/settings",{method:"POST",body:JSON.stringify({[W]:Q})});e("Settings updated successfully",{variant:"success"}),M()}catch(le){e(le.message,{variant:"error"})}},J=async()=>{try{const W=await t("/api/ip-whitelist/audit?limit=100");C(W.logs),g(!0)}catch(W){e(W.message,{variant:"error"})}},ee=W=>w?W.filter(Q=>Q.toLowerCase().includes(w.toLowerCase())):W,te=W=>{navigator.clipboard.writeText(W),e("Copied to clipboard",{variant:"info"})},Ce=(W,Q)=>{l(Q)};return s?r.jsx(A,{sx:{p:3},children:r.jsx(zt,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Fn,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",component:"h1",children:"IP Whitelist Management"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Control access to SMTP relay and dashboard"})]})]}),r.jsxs(A,{display:"flex",gap:1,children:[r.jsx(X,{variant:"outlined",startIcon:r.jsx(pi,{}),onClick:()=>y(!0),children:"Test IP"}),r.jsx(X,{variant:"outlined",startIcon:r.jsx(np,{}),onClick:J,children:"Audit Log"})]})]}),n&&r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"primary",children:n.smtp_relay.no_auth_required.length+n.smtp_relay.auth_required.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"SMTP Allowed IPs"})]}),r.jsx(jl,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"success.main",children:n.frontend_access.allowed.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Frontend Allowed IPs"})]}),r.jsx(uo,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"error",children:n.blacklist.blocked.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Blacklisted IPs"})]}),r.jsx(Ia,{sx:{fontSize:32,color:"error.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"secondary",children:n.settings.enforce_frontend_whitelist?"Enforced":"Open"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Frontend Access"})]}),n.settings.enforce_frontend_whitelist?r.jsx(mo,{sx:{fontSize:32,color:"secondary.main",opacity:.3}}):r.jsx(go,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(de,{elevation:3,children:[r.jsxs(Gi,{value:a,onChange:Ce,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{icon:r.jsx(jl,{}),label:"SMTP Relay",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(uo,{}),label:"Frontend Access",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(Ia,{}),label:"Blacklist",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(Ui,{}),label:"Settings",iconPosition:"start"})]}),r.jsxs(A,{sx:{p:3},children:[a!==3&&r.jsxs(A,{display:"flex",gap:2,mb:3,children:[r.jsx(De,{fullWidth:!0,variant:"outlined",placeholder:"Search IPs...",value:w,onChange:W=>E(W.target.value),InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(pi,{})})}}),r.jsx(X,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:()=>{F(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),c(!0)},children:"Add IP"}),r.jsx(X,{variant:"outlined",startIcon:r.jsx(rb,{}),onClick:()=>{F(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),h(!0)},children:"Import"})]}),n&&a===0&&r.jsxs(A,{children:[r.jsxs(A,{mb:4,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(go,{color:"success"}),r.jsx(k,{variant:"h6",children:"No Authentication Required"}),r.jsx(be,{label:n.smtp_relay.no_auth_required.length,size:"small",color:"default"})]}),r.jsx(X,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("smtp_relay","no_auth_required"),children:"Export"})]}),r.jsx(de,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.no_auth_required).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.smtp_relay.no_auth_required).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(de,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Ht,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>L("smtp_relay","no_auth_required",W),children:r.jsx(Yt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(mo,{color:"warning"}),r.jsx(k,{variant:"h6",children:"Authentication Required"}),r.jsx(be,{label:n.smtp_relay.auth_required.length,size:"small",color:"default"})]}),r.jsx(X,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("smtp_relay","auth_required"),children:"Export"})]}),r.jsx(de,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.auth_required).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.smtp_relay.auth_required).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(de,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Ht,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>L("smtp_relay","auth_required",W),children:r.jsx(Yt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]})]}),n&&a===1&&r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(uo,{color:"primary"}),r.jsx(k,{variant:"h6",children:"Allowed IPs"}),r.jsx(be,{label:n.frontend_access.allowed.length,size:"small",color:"default"})]}),r.jsx(X,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("frontend_access","allowed"),children:"Export"})]}),!n.settings.enforce_frontend_whitelist&&r.jsx(ge,{severity:"warning",sx:{mb:2},children:"Frontend whitelist is not enforced. All IPs can access the dashboard."}),r.jsx(de,{variant:"outlined",sx:{p:2},children:ee(n.frontend_access.allowed).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.frontend_access.allowed).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(de,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Ht,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>L("frontend_access","allowed",W),children:r.jsx(Yt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),n&&a===2&&r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ia,{color:"error"}),r.jsx(k,{variant:"h6",children:"Blocked IPs"}),r.jsx(be,{label:n.blacklist.blocked.length,size:"small",color:"default"})]}),r.jsx(X,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("blacklist","blocked"),children:"Export"})]}),r.jsx(de,{variant:"outlined",sx:{p:2},children:ee(n.blacklist.blocked).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.blacklist.blocked).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(de,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Ht,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>L("blacklist","blocked",W),children:r.jsx(Yt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs blacklisted"})})]}),n&&a===3&&r.jsxs(A,{children:[r.jsxs(de,{variant:"outlined",sx:{p:3,mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Access Control Settings"}),r.jsxs(ot,{children:[r.jsxs(ue,{children:[r.jsx(ie,{primary:"Enforce Frontend Whitelist",secondary:"Only allow whitelisted IPs to access the dashboard"}),r.jsx(un,{children:r.jsx(Sn,{edge:"end",checked:n.settings.enforce_frontend_whitelist,onChange:W=>G("enforce_frontend_whitelist",W.target.checked),color:"primary"})})]}),r.jsx(St,{}),r.jsxs(ue,{children:[r.jsx(ie,{primary:"Log Denied Attempts",secondary:"Record all denied access attempts in audit log"}),r.jsx(un,{children:r.jsx(Sn,{edge:"end",checked:n.settings.log_denied_attempts,onChange:W=>G("log_denied_attempts",W.target.checked),color:"primary"})})]}),r.jsx(St,{}),r.jsxs(ue,{children:[r.jsx(ie,{primary:"Auto-block After Failures",secondary:"Number of failed attempts before auto-blacklisting"}),r.jsx(un,{children:r.jsx(De,{type:"number",value:n.settings.auto_block_after_failures,onChange:W=>G("auto_block_after_failures",parseInt(W.target.value)),inputProps:{min:0,max:100},size:"small",sx:{width:80}})})]})]})]}),r.jsxs(ge,{severity:"info",icon:r.jsx(ir,{}),children:[r.jsx(Je,{children:"IP Format Examples"}),r.jsxs(A,{component:"ul",sx:{mt:1,pl:2},children:[r.jsxs("li",{children:[r.jsx("code",{children:"192.168.1.1"})," - Single IP"]}),r.jsxs("li",{children:[r.jsx("code",{children:"10.0.0.0/24"})," - CIDR notation (256 IPs)"]}),r.jsxs("li",{children:[r.jsx("code",{children:"172.16.0.0/12"})," - Large subnet"]}),r.jsxs("li",{children:[r.jsx("code",{children:"2001:db8::/32"})," - IPv6 range"]})]})]})]})]})]}),r.jsxs(at,{open:u,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Add IP Address"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Category"}),r.jsxs(mt,{value:P,onChange:W=>{F(W.target.value),I("")},label:"Category",children:[r.jsx(se,{value:"",children:"Select category..."}),r.jsx(se,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(se,{value:"frontend_access",children:"Frontend Access"}),r.jsx(se,{value:"blacklist",children:"Blacklist"})]})]}),P==="smtp_relay"&&r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Subcategory"}),r.jsxs(mt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(se,{value:"",children:"Select subcategory..."}),r.jsx(se,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(se,{value:"auth_required",children:"Auth Required"})]})]}),P==="frontend_access"&&r.jsx("input",{type:"hidden",value:"allowed",onChange:()=>I("allowed")}),P==="blacklist"&&r.jsx("input",{type:"hidden",value:"blocked",onChange:()=>I("blocked")}),r.jsx(De,{fullWidth:!0,margin:"normal",label:"IP Address",value:R,onChange:W=>V(W.target.value),placeholder:"e.g., 192.168.1.1 or 10.0.0.0/24"})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>{c(!1),V(""),F(""),I("")},children:"Cancel"}),r.jsx(X,{onClick:$,variant:"contained",children:"Add IP"})]})]}),r.jsxs(at,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Import IP Addresses"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Category"}),r.jsxs(mt,{value:P,onChange:W=>{F(W.target.value),I("")},label:"Category",children:[r.jsx(se,{value:"",children:"Select category..."}),r.jsx(se,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(se,{value:"frontend_access",children:"Frontend Access"}),r.jsx(se,{value:"blacklist",children:"Blacklist"})]})]}),P==="smtp_relay"&&r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Subcategory"}),r.jsxs(mt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(se,{value:"",children:"Select subcategory..."}),r.jsx(se,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(se,{value:"auth_required",children:"Auth Required"})]})]}),r.jsx(De,{fullWidth:!0,margin:"normal",label:"IP Addresses (one per line)",multiline:!0,rows:6,value:O,onChange:W=>S(W.target.value),placeholder:`192.168.1.1
10.0.0.0/24
172.16.0.0/16`})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>{h(!1),S(""),F(""),I("")},children:"Cancel"}),r.jsx(X,{onClick:_,variant:"contained",children:"Import"})]})]}),r.jsxs(at,{open:p,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Test IP Address"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsx(De,{fullWidth:!0,margin:"normal",label:"IP Address",value:N,onChange:W=>D(W.target.value),placeholder:"e.g., 192.168.1.1"}),v&&r.jsx(de,{variant:"outlined",sx:{p:2,mt:2},children:r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"IP Type",secondary:v.type})}),r.jsx(St,{}),r.jsxs(ue,{children:[r.jsx(ie,{primary:"Blacklisted"}),r.jsx(un,{children:v.blacklisted?r.jsx(be,{icon:r.jsx(no,{}),label:"Yes",color:"error",size:"small"}):r.jsx(be,{icon:r.jsx(Ne,{}),label:"No",color:"success",size:"small"})})]}),r.jsx(St,{}),r.jsxs(ue,{children:[r.jsx(ie,{primary:"SMTP Access"}),r.jsx(un,{children:v.smtp_access.allowed?r.jsx(be,{icon:r.jsx(Ne,{}),label:v.smtp_access.requiresAuth?"Auth Required":"No Auth",color:"success",size:"small"}):r.jsx(be,{icon:r.jsx(no,{}),label:"Denied",color:"error",size:"small"})})]}),r.jsx(St,{}),r.jsxs(ue,{children:[r.jsx(ie,{primary:"Frontend Access"}),r.jsx(un,{children:v.frontend_access?r.jsx(be,{icon:r.jsx(Ne,{}),label:"Allowed",color:"success",size:"small"}):r.jsx(be,{icon:r.jsx(no,{}),label:"Denied",color:"error",size:"small"})})]})]})})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>{y(!1),D(""),x(null)},children:"Close"}),r.jsx(X,{onClick:z,variant:"contained",children:"Test IP"})]})]}),r.jsxs(at,{open:m,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsx(k,{variant:"h6",children:"Audit Log"}),r.jsx(Pe,{onClick:()=>g(!1),children:r.jsx(no,{})})]})}),r.jsx(ct,{children:r.jsx(fs,{children:r.jsxs(ps,{size:"small",children:[r.jsx(ms,{children:r.jsxs(Mn,{children:[r.jsx(he,{children:"Time"}),r.jsx(he,{children:"Action"}),r.jsx(he,{children:"Category"}),r.jsx(he,{children:"Value"}),r.jsx(he,{children:"User"})]})}),r.jsx(gs,{children:b.map(W=>r.jsxs(Mn,{hover:!0,children:[r.jsx(he,{children:new Date(W.timestamp).toLocaleString()}),r.jsx(he,{children:r.jsx(be,{label:W.action,size:"small",color:W.action==="ADD"?"success":W.action==="REMOVE"?"error":W.action==="DENIED_ACCESS"?"warning":"default"})}),r.jsxs(he,{children:[W.category,"/",W.subcategory]}),r.jsx(he,{children:r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W.value})}),r.jsx(he,{children:W.user})]},W.id))})]})})})]})]})},nF=()=>{const{enqueueSnackbar:e}=Kt(),[t,n]=f.useState([]),[o,s]=f.useState([]),[i,a]=f.useState(null),[l,u]=f.useState(!0),[c,d]=f.useState(0),[h,p]=f.useState({open:!1,action:null,message:""}),{apiRequest:y}=Vt();f.useEffect(()=>{m(),g()},[]);const m=async()=>{try{const S=await(await y("/api/sessions/my-sessions")).json();n(S.sessions),u(!1)}catch{e("Failed to load sessions",{variant:"error"}),u(!1)}},g=async()=>{try{const S=await(await y("/api/sessions/security-events")).json();s(S.events)}catch{console.error("Failed to load security events")}},v=()=>{h.action&&h.action(),p({open:!1,action:null,message:""})},x=async O=>{p({open:!0,message:"Are you sure you want to revoke this session?",action:async()=>{try{(await y(`/api/sessions/revoke/${O}`,{method:"DELETE"})).ok&&(n(t.filter(N=>N.id!==O)),e("Session revoked successfully",{variant:"success"}))}catch{e("Failed to revoke session",{variant:"error"})}}})},b=async()=>{p({open:!0,message:"This will log you out from all other devices. Continue?",action:async()=>{try{(await y("/api/sessions/revoke-all",{method:"POST"})).ok&&(m(),e("All other sessions revoked",{variant:"success"}))}catch{e("Failed to revoke sessions",{variant:"error"})}}})},C=async()=>{try{const O=await y("/api/sessions/backup-codes",{method:"POST"}),S=await O.json();O.ok?(a(S.codes),e("Backup codes generated successfully",{variant:"success"})):e(S.error||"Failed to generate backup codes",{variant:"error"})}catch{e("Failed to generate backup codes",{variant:"error"})}},P=O=>O?.toLowerCase().includes("mobile")?r.jsx(fc,{}):r.jsx(Tr,{}),F=O=>{switch(O){case"LOGIN_SUCCESS":return r.jsx(Ne,{color:"success"});case"LOGIN_FAILED":return r.jsx(no,{color:"error"});case"SECURITY_ALERT":return r.jsx(gn,{color:"warning"});default:return r.jsx(qo,{color:"action"})}},T=O=>{const S=Math.floor((new Date-new Date(O))/1e3);return S<60?"Just now":S<3600?`${Math.floor(S/60)} minutes ago`:S<86400?`${Math.floor(S/3600)} hours ago`:`${Math.floor(S/86400)} days ago`},I=(O,S)=>{d(S)},R=()=>{i&&(navigator.clipboard.writeText(i.join(`
`)),e("Codes copied to clipboard",{variant:"info"}))},V=()=>{if(i){const O=new Blob([i.join(`
`)],{type:"text/plain"}),S=URL.createObjectURL(O),N=document.createElement("a");N.href=S,N.download="backup-codes.txt",N.click(),URL.revokeObjectURL(S),e("Codes downloaded",{variant:"info"})}};return l?r.jsx(A,{sx:{p:3},children:r.jsx(zt,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(zi,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",component:"h1",children:"Security & Sessions"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Manage your active sessions and security settings"})]})]}),r.jsx(X,{variant:"contained",color:"error",startIcon:r.jsx(rp,{}),onClick:b,children:"Sign Out Everywhere Else"})]}),r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"primary",children:t.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Active Sessions"})]}),r.jsx(Tr,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"success.main",children:t.filter(O=>O.isCurrent).length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Current Device"})]}),r.jsx(Ne,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(_e,{elevation:3,children:r.jsx(Re,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"secondary",children:o.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Recent Events"})]}),r.jsx(qo,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(de,{elevation:3,children:[r.jsxs(Gi,{value:c,onChange:I,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{icon:r.jsx(Tr,{}),label:"Active Sessions",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(qo,{}),label:"Security Events",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(ir,{}),label:"Backup Codes",iconPosition:"start"})]}),r.jsxs(A,{sx:{p:3},children:[c===0&&r.jsx(ot,{children:t.length>0?t.map((O,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(St,{}),r.jsxs(ue,{sx:{py:2,backgroundColor:O.isCurrent?"primary.light":"transparent",bgcolor:O.isCurrent?N=>N.palette.primary.main+"10":"transparent",borderRadius:1,mb:1},children:[r.jsx(Fe,{children:P(O.deviceInfo?.browser)}),r.jsx(ie,{primary:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(k,{variant:"body1",fontWeight:"medium",children:O.deviceInfo?.browser||"Unknown Browser"}),O.isCurrent&&r.jsx(be,{label:"This Device",size:"small",color:"primary"})]}),secondary:r.jsxs(A,{display:"flex",gap:2,mt:1,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(uo,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:O.deviceInfo?.ip||"Unknown IP"})]}),r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(ob,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:T(O.lastUsed)})]}),O.location&&r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(sb,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:O.location})]})]})}),!O.isCurrent&&r.jsx(un,{children:r.jsx(X,{variant:"outlined",color:"error",size:"small",onClick:()=>x(O.id),children:"Revoke"})})]})]},O.id)):r.jsx(A,{textAlign:"center",py:8,children:r.jsx(k,{color:"text.secondary",children:"No active sessions found"})})}),c===1&&r.jsx(ot,{children:o.length>0?o.map((O,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(St,{}),r.jsxs(ue,{sx:{py:2},children:[r.jsx(Fe,{children:F(O.type)}),r.jsx(ie,{primary:r.jsx(k,{variant:"body1",fontWeight:"medium",children:O.type?.replace(/_/g," ")||"Unknown Event"}),secondary:r.jsxs(A,{display:"flex",gap:2,mt:.5,children:[r.jsx(k,{variant:"caption",children:O.ip||"Unknown IP"}),r.jsx(k,{variant:"caption",children:O.device||"Unknown Device"}),r.jsx(k,{variant:"caption",children:T(O.timestamp)})]})})]})]},S)):r.jsx(A,{textAlign:"center",py:8,children:r.jsx(k,{color:"text.secondary",children:"No security events to display"})})}),c===2&&r.jsx(A,{children:i?r.jsxs(A,{children:[r.jsxs(ge,{severity:"warning",sx:{mb:3},children:[r.jsx(Je,{children:"Important: Save these codes securely!"}),"Each code can only be used once. Store them in a safe place like a password manager."]}),r.jsx(K,{container:!0,spacing:2,mb:3,children:i.map((O,S)=>r.jsx(K,{item:!0,xs:6,sm:4,md:2.4,children:r.jsx(de,{variant:"outlined",sx:{p:2,textAlign:"center",bgcolor:"grey.100",fontFamily:"monospace"},children:O})},S))}),r.jsxs(A,{display:"flex",justifyContent:"center",gap:2,children:[r.jsx(X,{variant:"outlined",startIcon:r.jsx(Ht,{}),onClick:R,children:"Copy All"}),r.jsx(X,{variant:"outlined",startIcon:r.jsx(rr,{}),onClick:V,children:"Download"}),r.jsx(X,{variant:"contained",startIcon:r.jsx(xn,{}),onClick:C,children:"Regenerate"})]})]}):r.jsxs(A,{textAlign:"center",py:8,children:[r.jsx(ir,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(k,{variant:"body2",color:"text.secondary",paragraph:!0,sx:{maxWidth:400,mx:"auto"},children:"Generate one-time use backup codes for emergency access when you can't use your authenticator app."}),r.jsx(X,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:C,sx:{mt:2},children:"Generate Backup Codes"})]})})]})]}),r.jsxs(at,{open:h.open,onClose:()=>p({open:!1,action:null,message:""}),children:[r.jsx(lt,{children:"Confirm Action"}),r.jsx(ct,{children:r.jsx(k,{children:h.message})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>p({open:!1,action:null,message:""}),children:"Cancel"}),r.jsx(X,{onClick:v,variant:"contained",color:"error",children:"Confirm"})]})]})]})},Sf=({data:e,width:t,height:n})=>{if(!e||!e.nodes)return r.jsx(_e,{sx:{height:n||400},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Email Flow Visualization"}),r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:r.jsx(k,{color:"text.secondary",children:"Loading email flow data..."})})]})});const o=e.links?.find(c=>c.source==="devices")?.value||1500,s=e.links?.find(c=>c.target==="relay")?.value||1500,i=e.links?.find(c=>c.target==="exchange")?.value||1400,a=e.links?.find(c=>c.target==="delivered")?.value||1350,l=e.links?.find(c=>c.target==="failed")?.value||150,u=[{name:"Devices",icon:r.jsx(ab,{}),count:o,color:"primary",percentage:100},{name:"SMTP Relay",icon:r.jsx(po,{}),count:s,color:"info",percentage:s/o*100},{name:"Exchange Online",icon:r.jsx(bc,{}),count:i,color:"secondary",percentage:i/o*100},{name:"Delivered",icon:r.jsx(Ne,{}),count:a,color:"success",percentage:a/o*100}];return r.jsx(_e,{sx:{height:n||"auto"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Email Flow Pipeline"}),r.jsx(K,{container:!0,spacing:2,alignItems:"center",children:u.map((c,d)=>r.jsxs(Le.Fragment,{children:[r.jsx(K,{item:!0,xs:12,md:d===u.length-1?3:2.5,children:r.jsxs(de,{elevation:2,sx:{p:2,textAlign:"center",backgroundColor:h=>h.palette.mode==="dark"?`${h.palette[c.color].dark}15`:`${h.palette[c.color].light}15`,border:h=>`2px solid ${h.palette[c.color].main}`,position:"relative"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[r.jsx(A,{sx:{color:`${c.color}.main`,mr:1},children:c.icon}),r.jsx(k,{variant:"subtitle1",fontWeight:"bold",children:c.name})]}),r.jsx(k,{variant:"h4",color:`${c.color}.main`,children:c.count.toLocaleString()}),r.jsx(zt,{variant:"determinate",value:c.percentage,sx:{mt:1,height:6,borderRadius:3,backgroundColor:h=>h.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:`${c.color}.main`}}}),r.jsxs(k,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:[c.percentage.toFixed(1),"% of total"]})]})}),d<u.length-1&&r.jsx(K,{item:!0,xs:12,md:.5,children:r.jsx(A,{sx:{display:"flex",justifyContent:"center"},children:r.jsx(ib,{color:"action",sx:{fontSize:30}})})})]},c.name))}),l>0&&r.jsx(A,{sx:{mt:3,p:2,backgroundColor:"error.light",borderRadius:1},children:r.jsxs(sn,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(Tn,{color:"error"}),r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:l})," emails failed (",(l/o*100).toFixed(1),"%)"]}),r.jsx(be,{label:"View Details",size:"small",variant:"outlined",color:"error",onClick:()=>console.log("View failed emails")})]})}),r.jsxs(K,{container:!0,spacing:2,sx:{mt:2},children:[r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Success Rate"}),r.jsxs(k,{variant:"h6",color:"success.main",children:[(a/o*100).toFixed(1),"%"]})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Failure Rate"}),r.jsxs(k,{variant:"h6",color:"error.main",children:[(l/o*100).toFixed(1),"%"]})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Processing"}),r.jsx(k,{variant:"h6",color:"warning.main",children:(o-a-l).toLocaleString()})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Total Volume"}),r.jsx(k,{variant:"h6",color:"primary.main",children:o.toLocaleString()})]})})]})]})})},rF=({data:e,height:t=500})=>{const[n,o]=f.useState({}),s=e?.locations||e;f.useEffect(()=>{if(s){const a={isArray:Array.isArray(s),count:s?.length||0,hasLatLng:0,hasIP:0,hasSubnet:0,sampleData:s?.slice(0,3)||[]};Array.isArray(s)&&s.forEach(l=>{l.lat&&l.lng&&a.hasLatLng++,l.ip&&a.hasIP++,l.subnet&&a.hasSubnet++}),o(a)}},[s]);const i={hasData:!!s,isValidArray:Array.isArray(s)&&s.length>0,hasGeoData:n.hasLatLng>0,dataType:n.hasSubnet>0?"internal":n.hasLatLng>0?"external":"unknown"};return r.jsx(_e,{sx:{height:"auto"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Geographic Distribution - Debug View"}),r.jsxs(ge,{severity:i.hasData?i.isValidArray?"success":"warning":"error",sx:{mb:2},children:[r.jsx(Je,{children:"Data Status"}),r.jsxs(sn,{spacing:1,children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.hasData?r.jsx(Ne,{}):r.jsx(Tn,{}),r.jsxs(k,{variant:"body2",children:["Data received: ",i.hasData?"Yes":"No"]})]}),i.hasData&&r.jsxs(r.Fragment,{children:[r.jsxs(k,{variant:"body2",children:["Format: ",i.isValidArray?"Valid Array":"Invalid Format"]}),r.jsxs(k,{variant:"body2",children:["Type: ",i.dataType," network"]}),r.jsxs(k,{variant:"body2",children:["Locations: ",n.count]}),r.jsxs(k,{variant:"body2",children:["With Lat/Lng: ",n.hasLatLng," / ",n.count]}),r.jsxs(k,{variant:"body2",children:["With IP: ",n.hasIP," / ",n.count]}),r.jsxs(k,{variant:"body2",children:["With Subnet: ",n.hasSubnet," / ",n.count]})]})]})]}),r.jsxs(de,{sx:{p:2,mb:2,backgroundColor:"grey.100"},children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Raw Data Preview (First 3 items):"}),r.jsx(A,{sx:{fontFamily:"monospace",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:300,overflow:"auto",backgroundColor:"grey.900",color:"grey.100",p:2,borderRadius:1},children:JSON.stringify(n.sampleData,null,2)})]}),s&&s.length>0&&r.jsx(fs,{component:de,children:r.jsxs(ps,{size:"small",children:[r.jsx(ms,{children:r.jsxs(Mn,{children:[r.jsx(he,{children:"Index"}),r.jsx(he,{children:"Country/Name"}),r.jsx(he,{children:"City"}),r.jsx(he,{children:"Lat"}),r.jsx(he,{children:"Lng"}),r.jsx(he,{children:"IP"}),r.jsx(he,{children:"Count"}),r.jsx(he,{children:"Status"})]})}),r.jsx(gs,{children:s.slice(0,10).map((a,l)=>r.jsxs(Mn,{children:[r.jsx(he,{children:l}),r.jsx(he,{children:a.country||a.name||"N/A"}),r.jsx(he,{children:a.city||"N/A"}),r.jsx(he,{children:r.jsx(be,{label:a.lat||"missing",size:"small",color:a.lat?"success":"error",variant:"outlined"})}),r.jsx(he,{children:r.jsx(be,{label:a.lng||"missing",size:"small",color:a.lng?"success":"error",variant:"outlined"})}),r.jsx(he,{children:a.ip||"N/A"}),r.jsx(he,{children:a.count}),r.jsx(he,{children:a.lat&&a.lng?r.jsx(Ne,{color:"success",fontSize:"small"}):r.jsx(gn,{color:"warning",fontSize:"small"})})]},l))})]})}),!i.hasGeoData&&i.hasData&&r.jsxs(ge,{severity:"warning",sx:{mt:2},children:[r.jsx(Je,{children:"Missing Geographic Data"}),r.jsxs(k,{variant:"body2",children:["The data doesn't contain latitude/longitude coordinates needed for map visualization.",n.hasIP>0&&" IP addresses are present but need geolocation lookup."]})]}),r.jsx(A,{sx:{mt:2},children:r.jsx(X,{variant:"contained",onClick:()=>{console.log("Full data:",e),console.log("Locations:",s),console.log("Debug info:",n)},children:"Log Full Data to Console"})})]})})},Pf=({data:e,timeRange:t="24h"})=>{const n=$t(),[o,s]=f.useState("all");if(!e)return r.jsx(_e,{children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",children:"Time Series Analytics"}),r.jsx(A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(k,{color:"text.secondary",children:"Loading metrics..."})})]})});const i=e.sent?.map((u,c)=>({time:new Date(u.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),sent:u.value,received:e.received?.[c]?.value||0,failed:e.failed?.[c]?.value||0,queued:e.queued?.[c]?.value||0}))||[],a=u=>{if(!u||u.length===0)return{current:0,avg:0,trend:"stable"};const c=u.map(x=>x.value),d=c[c.length-1],h=c.reduce((x,b)=>x+b,0)/c.length,p=c.slice(0,Math.floor(c.length/2)),y=c.slice(Math.floor(c.length/2)),m=p.reduce((x,b)=>x+b,0)/p.length,g=y.reduce((x,b)=>x+b,0)/y.length,v=g>m*1.1?"up":g<m*.9?"down":"stable";return{current:d,avg:Math.round(h),trend:v}},l=[{key:"sent",label:"Emails Sent",color:n.palette.primary.main,icon:r.jsx(po,{}),stats:a(e.sent)},{key:"received",label:"Received",color:n.palette.success.main,icon:r.jsx(qo,{}),stats:a(e.received)},{key:"failed",label:"Failed",color:n.palette.error.main,icon:r.jsx(Tn,{}),stats:a(e.failed)},{key:"queued",label:"Queue Size",color:n.palette.warning.main,icon:r.jsx(vc,{}),stats:a(e.queued)}];return r.jsx(_e,{children:r.jsxs(Re,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Time Series Analytics"}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:["Email metrics over the last ",t]})]}),r.jsx(K,{container:!0,spacing:2,sx:{mb:3},children:l.map(u=>r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(de,{sx:{p:2,cursor:"pointer",border:o===u.key?2:0,borderColor:u.color,transition:"all 0.3s","&:hover":{boxShadow:3}},onClick:()=>s(u.key),children:[r.jsxs(sn,{direction:"row",alignItems:"center",spacing:1,children:[r.jsx(A,{sx:{color:u.color},children:u.icon}),r.jsxs(A,{sx:{flexGrow:1},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:u.label}),r.jsx(k,{variant:"h5",children:u.stats.current.toLocaleString()})]}),u.stats.trend==="up"&&r.jsx(op,{color:"success"}),u.stats.trend==="down"&&r.jsx(lb,{color:"error"})]}),r.jsx(zt,{variant:"determinate",value:u.stats.current/u.stats.avg*100,sx:{mt:1,height:4,borderRadius:2,backgroundColor:n.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:u.color}}}),r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Avg: ",u.stats.avg.toLocaleString()]})]})},u.key))}),r.jsx(de,{sx:{p:2,backgroundColor:n.palette.background.default},children:r.jsx(Kb,{width:"100%",height:300,children:r.jsxs(Qb,{data:i,children:[r.jsx(Yb,{strokeDasharray:"3 3",stroke:n.palette.divider}),r.jsx(Xb,{dataKey:"time",stroke:n.palette.text.secondary,fontSize:12}),r.jsx(Jb,{stroke:n.palette.text.secondary,fontSize:12}),r.jsx(Zb,{contentStyle:{backgroundColor:n.palette.background.paper,border:`1px solid ${n.palette.divider}`,borderRadius:4}}),r.jsx(ev,{}),(o==="all"||o==="sent")&&r.jsx(Fs,{type:"monotone",dataKey:"sent",stroke:n.palette.primary.main,fill:n.palette.primary.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="received")&&r.jsx(Fs,{type:"monotone",dataKey:"received",stroke:n.palette.success.main,fill:n.palette.success.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="failed")&&r.jsx(Fs,{type:"monotone",dataKey:"failed",stroke:n.palette.error.main,fill:n.palette.error.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="queued")&&r.jsx(Fs,{type:"monotone",dataKey:"queued",stroke:n.palette.warning.main,fill:n.palette.warning.light,fillOpacity:.3,strokeWidth:2})]})})}),r.jsx(A,{sx:{mt:2,display:"flex",justifyContent:"center"},children:r.jsxs(hc,{value:o,exclusive:!0,onChange:(u,c)=>c&&s(c),size:"small",children:[r.jsx(on,{value:"all",children:"All Metrics"}),r.jsx(on,{value:"sent",children:"Sent"}),r.jsx(on,{value:"received",children:"Received"}),r.jsx(on,{value:"failed",children:"Failed"}),r.jsx(on,{value:"queued",children:"Queue"})]})})]})})},kf=({devices:e,onDeviceSelect:t,autoRefresh:n})=>{const o=$t(),[s,i]=f.useState(""),[a,l]=f.useState("all"),[u,c]=f.useState(null);if(!e)return r.jsx(_e,{children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",children:"Device Health Monitor"}),r.jsx(A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(k,{color:"text.secondary",children:"Loading devices..."})})]})});const d=e.filter(g=>{const v=g.name.toLowerCase().includes(s.toLowerCase())||g.ip?.includes(s),x=a==="all"||g.status===a;return v&&x}),h={total:e.length,healthy:e.filter(g=>g.status==="healthy"||g.status==="online").length,warning:e.filter(g=>g.status==="warning").length,critical:e.filter(g=>g.status==="critical"||g.status==="error").length,offline:e.filter(g=>g.status==="offline").length},p=g=>{const v={printer:r.jsx(hb,{}),scanner:r.jsx(db,{}),camera:r.jsx(ub,{}),nas:r.jsx(vc,{}),application:r.jsx(Cc,{}),default:r.jsx(Tr,{})};return v[g?.toLowerCase()]||v.default},y=g=>{switch(g){case"healthy":case"online":return"success";case"warning":return"warning";case"critical":case"error":return"error";case"offline":return"default";default:return"default"}},m=g=>{switch(g){case"healthy":case"online":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(gn,{color:"warning"});case"critical":case"error":return r.jsx(Tn,{color:"error"});case"offline":return r.jsx(cb,{color:"disabled"});default:return r.jsx(sp,{})}};return r.jsx(_e,{children:r.jsxs(Re,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Device Health Monitor"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Monitor and manage your SMTP-enabled devices"})]}),r.jsxs(K,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(de,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.success.light}20`},children:[r.jsx(k,{variant:"h4",color:"success.main",children:h.healthy}),r.jsx(k,{variant:"caption",children:"Online"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(de,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.warning.light}20`},children:[r.jsx(k,{variant:"h4",color:"warning.main",children:h.warning}),r.jsx(k,{variant:"caption",children:"Warning"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(de,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.error.light}20`},children:[r.jsx(k,{variant:"h4",color:"error.main",children:h.critical}),r.jsx(k,{variant:"caption",children:"Critical"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(de,{sx:{p:2,textAlign:"center",backgroundColor:o.palette.grey[200]},children:[r.jsx(k,{variant:"h4",color:"text.secondary",children:h.offline}),r.jsx(k,{variant:"caption",children:"Offline"})]})})]}),r.jsxs(A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[r.jsx(De,{size:"small",placeholder:"Search devices...",value:s,onChange:g=>i(g.target.value),sx:{flexGrow:1,maxWidth:300},InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(pi,{})})}}),r.jsxs(hc,{value:a,exclusive:!0,onChange:(g,v)=>v&&l(v),size:"small",children:[r.jsxs(on,{value:"all",children:["All (",e.length,")"]}),r.jsxs(on,{value:"online",children:["Online (",h.healthy,")"]}),r.jsxs(on,{value:"warning",children:["Warning (",h.warning,")"]}),r.jsxs(on,{value:"error",children:["Error (",h.critical,")"]}),r.jsxs(on,{value:"offline",children:["Offline (",h.offline,")"]})]}),n&&r.jsx(be,{icon:r.jsx(xn,{}),label:"Auto Refresh",color:"primary",variant:"outlined",size:"small"})]}),r.jsx(fs,{component:de,variant:"outlined",children:r.jsxs(ps,{size:"small",children:[r.jsx(ms,{children:r.jsxs(Mn,{children:[r.jsx(he,{children:"Device"}),r.jsx(he,{children:"Status"}),r.jsx(he,{children:"IP Address"}),r.jsx(he,{align:"right",children:"Emails Sent"}),r.jsx(he,{align:"right",children:"Health"}),r.jsx(he,{children:"Last Seen"})]})}),r.jsx(gs,{children:d.map(g=>{const v=g.health||(g.status==="healthy"||g.status==="online"?100:g.status==="warning"?75:g.status==="error"||g.status==="critical"?25:0);return r.jsxs(Mn,{hover:!0,onClick:()=>{c(g),t?.(g)},sx:{cursor:"pointer",opacity:g.status==="offline"?.6:1},children:[r.jsx(he,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(jn,{sx:{width:32,height:32,backgroundColor:y(g.status)==="default"?o.palette.grey[300]:o.palette[y(g.status)].light},children:p(g.type)}),r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:g.name}),r.jsx(k,{variant:"caption",color:"text.secondary",children:g.type})]})]})}),r.jsx(he,{children:r.jsx(be,{icon:m(g.status),label:g.status,size:"small",color:y(g.status),variant:"outlined"})}),r.jsxs(he,{children:[r.jsx(k,{variant:"body2",children:g.ip||"N/A"}),g.port&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Port ",g.port]})]}),r.jsx(he,{align:"right",children:r.jsx(k,{variant:"body2",children:g.emailsSent?.toLocaleString()||0})}),r.jsx(he,{align:"right",children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(zt,{variant:"determinate",value:v,sx:{width:60,height:6,borderRadius:3,backgroundColor:o.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:v>80?o.palette.success.main:v>50?o.palette.warning.main:o.palette.error.main}}}),r.jsxs(k,{variant:"caption",children:[v,"%"]})]})}),r.jsxs(he,{children:[r.jsx(k,{variant:"caption",children:g.lastSeen?new Date(g.lastSeen).toLocaleString():"Never"}),g.lastError&&r.jsx(yt,{title:g.lastError,children:r.jsx(Tn,{sx:{fontSize:16,color:"error.main",ml:.5,verticalAlign:"middle"}})})]})]},g.id)})})]})}),d.length===0&&r.jsx(A,{sx:{py:4,textAlign:"center"},children:r.jsx(k,{color:"text.secondary",children:"No devices found matching your criteria"})})]})})},oF=()=>{const{apiRequest:e}=Vt(),[t,n]=f.useState(0),[o,s]=f.useState(!0),[i,a]=f.useState({emailFlow:null,geoDistribution:null,timeSeries:null,deviceHealth:null,alerts:[]}),[l,u]=f.useState(!0),[c,d]=f.useState(3e4),[h,p]=f.useState(new Date),[y,m]=f.useState(null),g=async()=>{try{s(!0);const[b,C,P,F,T]=await Promise.all([e("/api/analytics/email-flow"),e("/api/analytics/geo-distribution"),e("/api/analytics/time-series"),e("/api/analytics/device-health"),e("/api/analytics/alerts")]),[I,R,V,O,S]=await Promise.all([b.json(),C.json(),P.json(),F.json(),T.json()]);a({emailFlow:I.data,geoDistribution:R.data,timeSeries:V.data,deviceHealth:O.devices,alerts:S.alerts}),p(new Date),s(!1)}catch(b){console.error("Failed to load analytics data:",b),s(!1)}};f.useEffect(()=>{if(g(),l){const b=setInterval(g,c);return()=>clearInterval(b)}},[l,c]);const v=async(b="json")=>{try{const C=await e("/api/analytics/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:b,dataTypes:["all"],range:"24h"})});if(b==="csv"){const P=await C.blob(),F=window.URL.createObjectURL(P),T=document.createElement("a");T.href=F,T.download=`analytics-${new Date().toISOString()}.csv`,T.click(),window.URL.revokeObjectURL(F)}else{const P=await C.json(),F=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),T=window.URL.createObjectURL(F),I=document.createElement("a");I.href=T,I.download=`analytics-${new Date().toISOString()}.json`,I.click(),window.URL.revokeObjectURL(T)}}catch(C){console.error("Export failed:",C)}m(null)},x=[{label:"Overview",icon:r.jsx(mb,{})},{label:"Email Flow",icon:r.jsx(qo,{})},{label:"Geographic",icon:r.jsx(uo,{})},{label:"Time Series",icon:r.jsx(op,{})},{label:"Device Health",icon:r.jsx(Tr,{})}];return o?r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(Ue,{size:48}),r.jsx(k,{variant:"h6",sx:{mt:2},color:"text.secondary",children:"Loading analytics data..."})]})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(_e,{sx:{mb:3},children:r.jsx(Re,{children:r.jsxs(K,{container:!0,alignItems:"center",spacing:2,children:[r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"h4",gutterBottom:!0,children:"Analytics Dashboard"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Real-time insights and monitoring for your SMTP relay infrastructure"}),r.jsxs(k,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",h.toLocaleTimeString()]})]}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(sn,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[r.jsx(hn,{control:r.jsx(Sn,{checked:l,onChange:b=>u(b.target.checked),color:"primary"}),label:"Auto Refresh"}),l&&r.jsx(ut,{size:"small",sx:{minWidth:80},children:r.jsxs(mt,{value:c,onChange:b=>d(b.target.value),children:[r.jsx(se,{value:1e4,children:"10s"}),r.jsx(se,{value:3e4,children:"30s"}),r.jsx(se,{value:6e4,children:"1m"}),r.jsx(se,{value:3e5,children:"5m"})]})}),r.jsx(yt,{title:"Refresh Data",children:r.jsx(Pe,{onClick:g,color:"primary",children:r.jsx(xn,{})})}),r.jsx(X,{variant:"contained",startIcon:r.jsx(rr,{}),onClick:b=>m(b.currentTarget),children:"Export"}),r.jsxs(fb,{anchorEl:y,open:!!y,onClose:()=>m(null),children:[r.jsx(se,{onClick:()=>v("json"),children:"Export as JSON"}),r.jsx(se,{onClick:()=>v("csv"),children:"Export as CSV"})]})]})})]})})}),i.alerts&&i.alerts.length>0&&r.jsxs(ge,{severity:"warning",sx:{mb:3},action:r.jsx(Pe,{size:"small",color:"inherit",children:r.jsx(pb,{})}),children:[r.jsxs(Je,{children:["Active Alerts (",i.alerts.length,")"]}),r.jsx(sn,{spacing:1,children:i.alerts.slice(0,3).map(b=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(be,{size:"small",label:b.severity,color:b.severity==="critical"?"error":b.severity==="warning"?"warning":"info"}),r.jsx(k,{variant:"body2",children:b.message})]},b.id))})]}),r.jsxs(_e,{children:[r.jsx(Gi,{value:t,onChange:(b,C)=>n(C),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:x.map((b,C)=>r.jsx(Pn,{label:b.label,icon:b.icon,iconPosition:"start"},C))}),r.jsxs(A,{sx:{p:3},children:[t===0&&r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,children:r.jsx(Sf,{data:i.emailFlow})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(Pf,{data:i.timeSeries})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(kf,{devices:i.deviceHealth,onDeviceSelect:b=>console.log("Selected device:",b)})})]}),t===1&&r.jsx(Sf,{data:i.emailFlow,height:600}),t===2&&r.jsx(rF,{data:i.geoDistribution,height:"600px"}),t===3&&r.jsx(Pf,{data:i.timeSeries,timeRange:"24h"}),t===4&&r.jsx(kf,{devices:i.deviceHealth,onDeviceSelect:b=>console.log("Selected device:",b),autoRefresh:l})]})]})]})},sF=()=>{const{enqueueSnackbar:e}=Kt(),[t,n]=f.useState([]),[o,s]=f.useState(!0),[i,a]=f.useState(!1),[l,u]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(null),[y,m]=f.useState(!1),[g,v]=f.useState({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),[x,b]=f.useState({});f.useEffect(()=>{C()},[]);const C=async()=>{try{s(!0);const w=await fetch("/api/users",{credentials:"include"});if(!w.ok)throw new Error("Failed to fetch users");const E=await w.json();n(E.users)}catch(w){console.error("Error fetching users:",w),e("Failed to load users",{variant:"error"})}finally{s(!1)}},P=()=>{const w={};return(!c||g.username)&&(g.username?/^[a-zA-Z0-9_-]{3,50}$/.test(g.username)||(w.username="Username must be 3-50 characters (letters, numbers, _, -)"):w.username="Username is required"),(!c||g.password)&&(!g.password&&!c?w.password="Password is required":g.password&&g.password.length<8&&(w.password="Password must be at least 8 characters"),g.password&&g.password!==g.confirmPassword&&(w.confirmPassword="Passwords do not match")),b(w),Object.keys(w).length===0},F=async()=>{if(P())try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),M=c?`/api/users/${h.id}`:"/api/users",$=c?"PUT":"POST",L={role:g.role,permissions:g.permissions};c?g.password&&(L.resetPassword=!0,L.newPassword=g.password):(L.username=g.username,L.password=g.password);const _=await fetch(M,{method:$,headers:{"Content-Type":"application/json","X-CSRF-Token":E},credentials:"include",body:JSON.stringify(L)});if(!_.ok){const B=await _.json();throw new Error(B.error||"Operation failed")}e(c?"User updated successfully":"User created successfully",{variant:"success"}),O(),C()}catch(w){console.error("Error saving user:",w),e(w.message,{variant:"error"})}},T=async()=>{try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),M=await fetch(`/api/users/${h.id}`,{method:"DELETE",headers:{"X-CSRF-Token":E},credentials:"include"});if(!M.ok){const $=await M.json();throw new Error($.error||"Failed to delete user")}e("User deleted successfully",{variant:"success"}),u(!1),C()}catch(w){console.error("Error deleting user:",w),e(w.message,{variant:"error"})}},I=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:M}=await E.json();if(!(await fetch(`/api/users/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":M},credentials:"include",body:JSON.stringify({unlockAccount:!0})})).ok)throw new Error("Failed to unlock account");e("Account unlocked successfully",{variant:"success"}),C()}catch(E){console.error("Error unlocking account:",E),e("Failed to unlock account",{variant:"error"})}},R=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:M}=await E.json();if(!(await fetch(`/api/users/${w}/reset-2fa`,{method:"POST",headers:{"X-CSRF-Token":M},credentials:"include"})).ok)throw new Error("Failed to reset 2FA");e("2FA reset successfully",{variant:"success"}),C()}catch(E){console.error("Error resetting 2FA:",E),e("Failed to reset 2FA",{variant:"error"})}},V=(w=null)=>{w?(d(!0),p(w),v({username:w.username,password:"",confirmPassword:"",role:w.role,permissions:w.permissions||[]})):(d(!1),p(null),v({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]})),b({}),a(!0)},O=()=>{a(!1),d(!1),p(null),v({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),b({})},S=w=>{switch(w){case"admin":return r.jsx(fi,{color:"error"});case"operator":return r.jsx(yb,{color:"primary"});case"viewer":return r.jsx(xb,{color:"action"});default:return r.jsx(jc,{})}},N=w=>{switch(w){case"admin":return"error";case"operator":return"primary";case"viewer":return"warning";default:return"default"}},D=w=>{switch(w){case"admin":return["read","write","delete","configure","manage_users"];case"operator":return["read","write"];case"viewer":return["read"];default:return[]}};return o?r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(Ue,{})}):r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"User Management"}),r.jsx(X,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:()=>V(),children:"Add User"})]}),r.jsx(fs,{component:de,children:r.jsxs(ps,{children:[r.jsx(ms,{children:r.jsxs(Mn,{children:[r.jsx(he,{children:"Username"}),r.jsx(he,{children:"Role"}),r.jsx(he,{children:"Permissions"}),r.jsx(he,{children:"2FA"}),r.jsx(he,{children:"Status"}),r.jsx(he,{children:"Last Login"}),r.jsx(he,{align:"right",children:"Actions"})]})}),r.jsx(gs,{children:t.map(w=>r.jsxs(Mn,{children:[r.jsx(he,{children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[S(w.role),r.jsx(k,{children:w.username})]})}),r.jsx(he,{children:r.jsx(be,{label:w.role,color:N(w.role),size:"small"})}),r.jsx(he,{children:r.jsx(A,{display:"flex",gap:.5,flexWrap:"wrap",children:w.permissions.map(E=>r.jsx(be,{label:E,size:"small",variant:"outlined"},E))})}),r.jsx(he,{children:w.twoFactorEnabled?r.jsx(be,{label:"Enabled",color:"success",size:"small",icon:r.jsx(gb,{})}):r.jsx(be,{label:"Disabled",variant:"outlined",size:"small"})}),r.jsx(he,{children:w.isLocked?r.jsx(be,{label:"Locked",color:"error",size:"small",icon:r.jsx(mo,{})}):r.jsx(be,{label:"Active",color:"success",size:"small"})}),r.jsx(he,{children:w.lastLogin?new Date(w.lastLogin).toLocaleString():"Never"}),r.jsxs(he,{align:"right",children:[r.jsx(yt,{title:"Edit User",children:r.jsx(Pe,{size:"small",onClick:()=>V(w),children:r.jsx(Kf,{})})}),w.isLocked&&r.jsx(yt,{title:"Unlock Account",children:r.jsx(Pe,{size:"small",onClick:()=>I(w.id),children:r.jsx(go,{})})}),w.twoFactorEnabled&&r.jsx(yt,{title:"Reset 2FA",children:r.jsx(Pe,{size:"small",onClick:()=>R(w.id),children:r.jsx(ir,{})})}),r.jsx(yt,{title:"Delete User",children:r.jsx(Pe,{size:"small",color:"error",onClick:()=>{p(w),u(!0)},children:r.jsx(Yt,{})})})]})]},w.id))})]})}),r.jsxs(at,{open:i,onClose:O,maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:c?"Edit User":"Add New User"}),r.jsx(ct,{children:r.jsxs(A,{display:"flex",flexDirection:"column",gap:2,mt:2,children:[!c&&r.jsx(De,{label:"Username",value:g.username,onChange:w=>v({...g,username:w.target.value}),error:!!x.username,helperText:x.username,fullWidth:!0,required:!0}),r.jsx(De,{label:c?"New Password (leave empty to keep current)":"Password",type:y?"text":"password",value:g.password,onChange:w=>v({...g,password:w.target.value}),error:!!x.password,helperText:x.password,fullWidth:!0,required:!c,InputProps:{endAdornment:r.jsx(Er,{position:"end",children:r.jsx(Pe,{onClick:()=>m(!y),edge:"end",children:y?r.jsx(pc,{}):r.jsx(mc,{})})})}}),r.jsx(De,{label:"Confirm Password",type:"password",value:g.confirmPassword,onChange:w=>v({...g,confirmPassword:w.target.value}),error:!!x.confirmPassword,helperText:x.confirmPassword,fullWidth:!0,required:!c||!!g.password}),r.jsxs(ut,{fullWidth:!0,children:[r.jsx(vt,{children:"Role"}),r.jsxs(mt,{value:g.role,onChange:w=>v({...g,role:w.target.value,permissions:D(w.target.value)}),label:"Role",children:[r.jsx(se,{value:"admin",children:"Admin (Full Access)"}),r.jsx(se,{value:"operator",children:"Engineering (Read/Write)"}),r.jsx(se,{value:"viewer",children:"Helpdesk (Read Only)"})]}),r.jsx(wc,{children:"Admin: Full system control | Engineering: Can modify settings | Helpdesk: View only"})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Permissions:"}),r.jsx(A,{display:"flex",gap:.5,flexWrap:"wrap",children:g.permissions.map(w=>r.jsx(be,{label:w,size:"small",variant:"outlined"},w))})]})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:O,children:"Cancel"}),r.jsx(X,{onClick:F,variant:"contained",children:c?"Update":"Create"})]})]}),r.jsxs(at,{open:l,onClose:()=>u(!1),children:[r.jsx(lt,{children:"Confirm Delete"}),r.jsx(ct,{children:r.jsxs(ge,{severity:"warning",children:['Are you sure you want to delete user "',h?.username,'"? This action cannot be undone.']})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>u(!1),children:"Cancel"}),r.jsx(X,{onClick:T,color:"error",variant:"contained",children:"Delete"})]})]})]})};var eo={},ul,If;function Jx(){return If||(If=1,ul={L:1,M:0,Q:3,H:2}),ul}var dl,Ef;function Zx(){return Ef||(Ef=1,dl={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),dl}var hl,Tf;function iF(){if(Tf)return hl;Tf=1;var e=Zx();function t(n){this.mode=e.MODE_8BIT_BYTE,this.data=n}return t.prototype={getLength:function(n){return this.data.length},write:function(n){for(var o=0;o<this.data.length;o++)n.put(this.data.charCodeAt(o),8)}},hl=t,hl}var fl,Af;function aF(){if(Af)return fl;Af=1;var e=Jx();function t(n,o){this.totalCount=n,this.dataCount=o}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(n,o){var s=t.getRsBlockTable(n,o);if(s==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+o);for(var i=s.length/3,a=new Array,l=0;l<i;l++)for(var u=s[l*3+0],c=s[l*3+1],d=s[l*3+2],h=0;h<u;h++)a.push(new t(c,d));return a},t.getRsBlockTable=function(n,o){switch(o){case e.L:return t.RS_BLOCK_TABLE[(n-1)*4+0];case e.M:return t.RS_BLOCK_TABLE[(n-1)*4+1];case e.Q:return t.RS_BLOCK_TABLE[(n-1)*4+2];case e.H:return t.RS_BLOCK_TABLE[(n-1)*4+3];default:return}},fl=t,fl}var pl,Mf;function lF(){if(Mf)return pl;Mf=1;function e(){this.buffer=new Array,this.length=0}return e.prototype={get:function(t){var n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)==1},put:function(t,n){for(var o=0;o<n;o++)this.putBit((t>>>n-o-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},pl=e,pl}var ml,Rf;function ey(){if(Rf)return ml;Rf=1;for(var e={glog:function(n){if(n<1)throw new Error("glog("+n+")");return e.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return e.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return ml=e,ml}var gl,Df;function ty(){if(Df)return gl;Df=1;var e=ey();function t(n,o){if(n.length==null)throw new Error(n.length+"/"+o);for(var s=0;s<n.length&&n[s]==0;)s++;this.num=new Array(n.length-s+o);for(var i=0;i<n.length-s;i++)this.num[i]=n[i+s]}return t.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var o=new Array(this.getLength()+n.getLength()-1),s=0;s<this.getLength();s++)for(var i=0;i<n.getLength();i++)o[s+i]^=e.gexp(e.glog(this.get(s))+e.glog(n.get(i)));return new t(o,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var o=e.glog(this.get(0))-e.glog(n.get(0)),s=new Array(this.getLength()),i=0;i<this.getLength();i++)s[i]=this.get(i);for(var i=0;i<n.getLength();i++)s[i]^=e.gexp(e.glog(n.get(i))+o);return new t(s,0).mod(n)}},gl=t,gl}var xl,Ff;function cF(){if(Ff)return xl;Ff=1;var e=Zx(),t=ty(),n=ey(),o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var a=i<<10;s.getBCHDigit(a)-s.getBCHDigit(s.G15)>=0;)a^=s.G15<<s.getBCHDigit(a)-s.getBCHDigit(s.G15);return(i<<10|a)^s.G15_MASK},getBCHTypeNumber:function(i){for(var a=i<<12;s.getBCHDigit(a)-s.getBCHDigit(s.G18)>=0;)a^=s.G18<<s.getBCHDigit(a)-s.getBCHDigit(s.G18);return i<<12|a},getBCHDigit:function(i){for(var a=0;i!=0;)a++,i>>>=1;return a},getPatternPosition:function(i){return s.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,a,l){switch(i){case o.PATTERN000:return(a+l)%2==0;case o.PATTERN001:return a%2==0;case o.PATTERN010:return l%3==0;case o.PATTERN011:return(a+l)%3==0;case o.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2==0;case o.PATTERN101:return a*l%2+a*l%3==0;case o.PATTERN110:return(a*l%2+a*l%3)%2==0;case o.PATTERN111:return(a*l%3+(a+l)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var a=new t([1],0),l=0;l<i;l++)a=a.multiply(new t([1,n.gexp(l)],0));return a},getLengthInBits:function(i,a){if(1<=a&&a<10)switch(i){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(a<27)switch(i){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(a<41)switch(i){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+a)},getLostPoint:function(i){for(var a=i.getModuleCount(),l=0,u=0;u<a;u++)for(var c=0;c<a;c++){for(var d=0,h=i.isDark(u,c),p=-1;p<=1;p++)if(!(u+p<0||a<=u+p))for(var y=-1;y<=1;y++)c+y<0||a<=c+y||p==0&&y==0||h==i.isDark(u+p,c+y)&&d++;d>5&&(l+=3+d-5)}for(var u=0;u<a-1;u++)for(var c=0;c<a-1;c++){var m=0;i.isDark(u,c)&&m++,i.isDark(u+1,c)&&m++,i.isDark(u,c+1)&&m++,i.isDark(u+1,c+1)&&m++,(m==0||m==4)&&(l+=3)}for(var u=0;u<a;u++)for(var c=0;c<a-6;c++)i.isDark(u,c)&&!i.isDark(u,c+1)&&i.isDark(u,c+2)&&i.isDark(u,c+3)&&i.isDark(u,c+4)&&!i.isDark(u,c+5)&&i.isDark(u,c+6)&&(l+=40);for(var c=0;c<a;c++)for(var u=0;u<a-6;u++)i.isDark(u,c)&&!i.isDark(u+1,c)&&i.isDark(u+2,c)&&i.isDark(u+3,c)&&i.isDark(u+4,c)&&!i.isDark(u+5,c)&&i.isDark(u+6,c)&&(l+=40);for(var g=0,c=0;c<a;c++)for(var u=0;u<a;u++)i.isDark(u,c)&&g++;var v=Math.abs(100*g/a/a-50)/5;return l+=v*10,l}};return xl=s,xl}var yl,Of;function uF(){if(Of)return yl;Of=1;var e=iF(),t=aF(),n=lF(),o=cF(),s=ty();function i(l,u){this.typeNumber=l,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var a=i.prototype;return a.addData=function(l){var u=new e(l);this.dataList.push(u),this.dataCache=null},a.isDark=function(l,u){if(l<0||this.moduleCount<=l||u<0||this.moduleCount<=u)throw new Error(l+","+u);return this.modules[l][u]},a.getModuleCount=function(){return this.moduleCount},a.make=function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var u=t.getRSBlocks(l,this.errorCorrectLevel),c=new n,d=0,h=0;h<u.length;h++)d+=u[h].dataCount;for(var h=0;h<this.dataList.length;h++){var p=this.dataList[h];c.put(p.mode,4),c.put(p.getLength(),o.getLengthInBits(p.mode,l)),p.write(c)}if(c.getLengthInBits()<=d*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},a.makeImpl=function(l,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,u),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},a.setupPositionProbePattern=function(l,u){for(var c=-1;c<=7;c++)if(!(l+c<=-1||this.moduleCount<=l+c))for(var d=-1;d<=7;d++)u+d<=-1||this.moduleCount<=u+d||(0<=c&&c<=6&&(d==0||d==6)||0<=d&&d<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=d&&d<=4?this.modules[l+c][u+d]=!0:this.modules[l+c][u+d]=!1)},a.getBestMaskPattern=function(){for(var l=0,u=0,c=0;c<8;c++){this.makeImpl(!0,c);var d=o.getLostPoint(this);(c==0||l>d)&&(l=d,u=c)}return u},a.createMovieClip=function(l,u,c){var d=l.createEmptyMovieClip(u,c),h=1;this.make();for(var p=0;p<this.modules.length;p++)for(var y=p*h,m=0;m<this.modules[p].length;m++){var g=m*h,v=this.modules[p][m];v&&(d.beginFill(0,100),d.moveTo(g,y),d.lineTo(g+h,y),d.lineTo(g+h,y+h),d.lineTo(g,y+h),d.endFill())}return d},a.setupTimingPattern=function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},a.setupPositionAdjustPattern=function(){for(var l=o.getPatternPosition(this.typeNumber),u=0;u<l.length;u++)for(var c=0;c<l.length;c++){var d=l[u],h=l[c];if(this.modules[d][h]==null)for(var p=-2;p<=2;p++)for(var y=-2;y<=2;y++)p==-2||p==2||y==-2||y==2||p==0&&y==0?this.modules[d+p][h+y]=!0:this.modules[d+p][h+y]=!1}},a.setupTypeNumber=function(l){for(var u=o.getBCHTypeNumber(this.typeNumber),c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},a.setupTypeInfo=function(l,u){for(var c=this.errorCorrectLevel<<3|u,d=o.getBCHTypeInfo(c),h=0;h<15;h++){var p=!l&&(d>>h&1)==1;h<6?this.modules[h][8]=p:h<8?this.modules[h+1][8]=p:this.modules[this.moduleCount-15+h][8]=p}for(var h=0;h<15;h++){var p=!l&&(d>>h&1)==1;h<8?this.modules[8][this.moduleCount-h-1]=p:h<9?this.modules[8][15-h-1+1]=p:this.modules[8][15-h-1]=p}this.modules[this.moduleCount-8][8]=!l},a.mapData=function(l,u){for(var c=-1,d=this.moduleCount-1,h=7,p=0,y=this.moduleCount-1;y>0;y-=2)for(y==6&&y--;;){for(var m=0;m<2;m++)if(this.modules[d][y-m]==null){var g=!1;p<l.length&&(g=(l[p]>>>h&1)==1);var v=o.getMask(u,d,y-m);v&&(g=!g),this.modules[d][y-m]=g,h--,h==-1&&(p++,h=7)}if(d+=c,d<0||this.moduleCount<=d){d-=c,c=-c;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(l,u,c){for(var d=t.getRSBlocks(l,u),h=new n,p=0;p<c.length;p++){var y=c[p];h.put(y.mode,4),h.put(y.getLength(),o.getLengthInBits(y.mode,l)),y.write(h)}for(var m=0,p=0;p<d.length;p++)m+=d[p].dataCount;if(h.getLengthInBits()>m*8)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+m*8+")");for(h.getLengthInBits()+4<=m*8&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=m*8||(h.put(i.PAD0,8),h.getLengthInBits()>=m*8));)h.put(i.PAD1,8);return i.createBytes(h,d)},i.createBytes=function(l,u){for(var c=0,d=0,h=0,p=new Array(u.length),y=new Array(u.length),m=0;m<u.length;m++){var g=u[m].dataCount,v=u[m].totalCount-g;d=Math.max(d,g),h=Math.max(h,v),p[m]=new Array(g);for(var x=0;x<p[m].length;x++)p[m][x]=255&l.buffer[x+c];c+=g;var b=o.getErrorCorrectPolynomial(v),C=new s(p[m],b.getLength()-1),P=C.mod(b);y[m]=new Array(b.getLength()-1);for(var x=0;x<y[m].length;x++){var F=x+P.getLength()-y[m].length;y[m][x]=F>=0?P.get(F):0}}for(var T=0,x=0;x<u.length;x++)T+=u[x].totalCount;for(var I=new Array(T),R=0,x=0;x<d;x++)for(var m=0;m<u.length;m++)x<p[m].length&&(I[R++]=p[m][x]);for(var x=0;x<h;x++)for(var m=0;m<u.length;m++)x<y[m].length&&(I[R++]=y[m][x]);return I},yl=i,yl}var Ys={},_f;function dF(){if(_f)return Ys;_f=1,Object.defineProperty(Ys,"__esModule",{value:!0});var e=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var h=arguments[d];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(c[p]=h[p])}return c},t=ip(),n=i(t),o=cp(),s=i(o);function i(c){return c&&c.__esModule?c:{default:c}}function a(c,d){var h={};for(var p in c)d.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(c,p)&&(h[p]=c[p]);return h}var l={bgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,bgD:n.default.string.isRequired,fgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,fgD:n.default.string.isRequired,size:n.default.number.isRequired,title:n.default.string,viewBoxSize:n.default.number.isRequired,xmlns:n.default.string},u=(0,o.forwardRef)(function(c,d){var h=c.bgColor,p=c.bgD,y=c.fgD,m=c.fgColor,g=c.size,v=c.title,x=c.viewBoxSize,b=c.xmlns,C=b===void 0?"http://www.w3.org/2000/svg":b,P=a(c,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",e({},P,{height:g,ref:d,viewBox:"0 0 "+x+" "+x,width:g,xmlns:C}),v?s.default.createElement("title",null,v):null,s.default.createElement("path",{d:p,fill:h}),s.default.createElement("path",{d:y,fill:m}))});return u.displayName="QRCodeSvg",u.propTypes=l,Ys.default=u,Ys}var Lf;function hF(){if(Lf)return eo;Lf=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.QRCode=void 0;var e=Object.assign||function(g){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(g[b]=x[b])}return g},t=ip(),n=h(t),o=Jx(),s=h(o),i=uF(),a=h(i),l=cp(),u=h(l),c=dF(),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function p(g,v){var x={};for(var b in g)v.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(g,b)&&(x[b]=g[b]);return x}var y={bgColor:n.default.oneOfType([n.default.object,n.default.string]),fgColor:n.default.oneOfType([n.default.object,n.default.string]),level:n.default.string,size:n.default.number,value:n.default.string.isRequired},m=(0,l.forwardRef)(function(g,v){var x=g.bgColor,b=x===void 0?"#FFFFFF":x,C=g.fgColor,P=C===void 0?"#000000":C,F=g.level,T=F===void 0?"L":F,I=g.size,R=I===void 0?256:I,V=g.value,O=p(g,["bgColor","fgColor","level","size","value"]),S=new a.default(-1,s.default[T]);S.addData(V),S.make();var N=S.modules;return u.default.createElement(d.default,e({},O,{bgColor:b,bgD:N.map(function(D,w){return D.map(function(E,M){return E?"":"M "+M+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:P,fgD:N.map(function(D,w){return D.map(function(E,M){return E?"M "+M+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:v,size:R,viewBoxSize:N.length}))});return eo.QRCode=m,m.displayName="QRCode",m.propTypes=y,eo.default=m,eo}var fF=hF();const pF=Pc(fF),mF=({onComplete:e})=>{const{enqueueSnackbar:t}=Kt(),[n,o]=f.useState(0),[s,i]=f.useState(!1),[a,l]=f.useState(null),[u,c]=f.useState(""),[d,h]=f.useState([]),p=["Generate QR Code","Scan with App","Verify Setup"],y=async()=>{i(!0);try{const x=await fetch("/api/mfa/totp/setup",{method:"POST",credentials:"include"});if(x.ok){const b=await x.json();l(b.data),o(1)}else throw new Error("Failed to generate TOTP")}catch{t("Failed to setup authenticator",{variant:"error"})}finally{i(!1)}},m=async()=>{if(u.length!==6){t("Please enter a 6-digit code",{variant:"warning"});return}i(!0);try{const x=await fetch("/api/mfa/totp/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:u})});if(x.ok){const b=await x.json();b.backupCodes&&h(b.backupCodes),o(2),t("Authenticator app enabled successfully!",{variant:"success"}),setTimeout(()=>{e()},2e3)}else{const b=await x.json();throw new Error(b.error||"Invalid code")}}catch(x){t(x.message,{variant:"error"})}finally{i(!1)}},g=x=>{navigator.clipboard.writeText(x),t("Copied to clipboard",{variant:"success"})},v=()=>{const x=d.join(`
`),b=new Blob([x],{type:"text/plain"}),C=URL.createObjectURL(b),P=document.createElement("a");P.href=C,P.download="backup-codes.txt",P.click(),URL.revokeObjectURL(C)};return r.jsxs(A,{children:[r.jsx(Hr,{activeStep:n,sx:{mb:4},children:p.map(x=>r.jsx(zn,{children:r.jsx(Gn,{children:x})},x))}),n===0&&r.jsxs(A,{textAlign:"center",children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Setup Authenticator App"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Use Microsoft Authenticator, Google Authenticator, or any compatible TOTP app"}),r.jsx(X,{variant:"contained",size:"large",onClick:y,disabled:s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(bb,{}),children:s?"Generating...":"Generate QR Code"})]}),n===1&&a&&r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{elevation:2,sx:{p:3,textAlign:"center"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Scan QR Code"}),r.jsx(A,{sx:{my:3,bgcolor:"white",p:2,borderRadius:1},children:r.jsx(pF,{value:a.uri,size:200})}),r.jsx(k,{variant:"caption",color:"textSecondary",children:"Scan this QR code with your authenticator app"})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{elevation:2,sx:{p:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Manual Entry"}),r.jsx(ge,{severity:"info",sx:{mb:2},children:"Can't scan? Enter this key manually:"}),r.jsxs(A,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,mb:2},children:[r.jsx(k,{variant:"body2",sx:{fontFamily:"monospace",wordBreak:"break-all"},children:a.manualEntryKey}),r.jsx(X,{size:"small",startIcon:r.jsx(Ht,{}),onClick:()=>g(a.secret),sx:{mt:1},children:"Copy"})]}),r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Enter Verification Code"}),r.jsx(De,{fullWidth:!0,placeholder:"000000",value:u,onChange:x=>c(x.target.value.replace(/\D/g,"").slice(0,6)),inputProps:{maxLength:6,style:{fontSize:"1.5rem",letterSpacing:"0.5rem",textAlign:"center"}},sx:{mb:2}}),r.jsx(X,{fullWidth:!0,variant:"contained",onClick:m,disabled:s||u.length!==6,children:s?r.jsx(Ue,{size:24}):"Verify & Enable"})]})})]}),n===2&&r.jsxs(A,{textAlign:"center",children:[r.jsx(Ne,{color:"success",sx:{fontSize:64,mb:2}}),r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Setup Complete!"}),r.jsx(k,{variant:"body1",color:"textSecondary",paragraph:!0,children:"Your authenticator app has been successfully configured."}),d.length>0&&r.jsxs(de,{sx:{p:3,mt:3,bgcolor:"warning.light",color:"warning.contrastText"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(k,{variant:"body2",paragraph:!0,children:"Save these codes in a safe place. Each can be used once if you lose access to your authenticator."}),r.jsx(K,{container:!0,spacing:1,sx:{mb:2},children:d.map((x,b)=>r.jsx(K,{item:!0,xs:6,children:r.jsx(k,{variant:"body2",sx:{fontFamily:"monospace"},children:x})},b))}),r.jsx(X,{variant:"contained",size:"small",onClick:v,sx:{bgcolor:"warning.dark"},children:"Download Codes"})]})]})]})},gF=({onComplete:e,existingDevices:t=[]})=>{const{enqueueSnackbar:n}=Kt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(""),[c,d]=f.useState(t),[h,p]=f.useState(null),y=["Name Your Key","Insert Security Key","Verify Registration"],m=()=>window.PublicKeyCredential!==void 0,g=async()=>{if(!l.trim()){n("Please enter a name for your security key",{variant:"warning"});return}if(!m()){n("WebAuthn is not supported in this browser",{variant:"error"});return}a(!0),s(1);try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await C.json(),F=await fetch("/api/mfa/fido2/register/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":P},credentials:"include"});if(!F.ok)throw new Error("Failed to start registration");const{data:T}=await F.json();console.log("Received options from server:",T);let I;typeof T.user.id=="string"?I=x(T.user.id):T.user.id instanceof Object&&T.user.id.type==="Buffer"?I=new Uint8Array(T.user.id.data).buffer:I=T.user.id;const R={...T,challenge:x(T.challenge),user:{...T.user,id:I},pubKeyCredParams:T.pubKeyCredParams||[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:T.authenticatorSelection||{authenticatorAttachment:"cross-platform",userVerification:"preferred",requireResidentKey:!1},attestation:T.attestation||"direct",timeout:T.timeout||6e4};s(2),n("Please interact with your security key...",{variant:"info"});const V=await navigator.credentials.create({publicKey:R});if(!V)throw new Error("Failed to create credential");const O={id:V.id,rawId:b(V.rawId),type:V.type,response:{clientDataJSON:b(V.response.clientDataJSON),attestationObject:b(V.response.attestationObject)}},S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:N}=await S.json(),D=await fetch("/api/mfa/fido2/register/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":N},credentials:"include",body:JSON.stringify({credential:O,deviceName:l.trim()})});if(!D.ok){const M=await D.json();throw new Error(M.error||"Failed to complete registration")}const E={id:(await D.json()).credentialID,name:l.trim(),registered:new Date().toISOString(),lastUsed:null};d([...c,E]),s(3),n("Security key registered successfully!",{variant:"success"}),setTimeout(()=>{s(0),u(""),e&&e(E)},2e3)}catch(C){console.error("Registration error:",C),C.name==="NotAllowedError"?n("Registration was cancelled or timed out",{variant:"warning"}):C.name==="InvalidStateError"?n("This key may already be registered",{variant:"warning"}):n(C.message||"Failed to register security key",{variant:"error"}),s(0)}finally{a(!1)}},v=async C=>{try{if(!(await fetch(`/api/mfa/fido2/devices/${C}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to remove device");d(c.filter(F=>F.id!==C)),n("Security key removed successfully",{variant:"success"})}catch{n("Failed to remove security key",{variant:"error"})}finally{p(null)}},x=C=>{let P=C.replace(/-/g,"+").replace(/_/g,"/");const F=(4-P.length%4)%4;F&&(P+="=".repeat(F));const T=window.atob(P),I=T.length,R=new Uint8Array(I);for(let V=0;V<I;V++)R[V]=T.charCodeAt(V);return R.buffer},b=C=>{const P=new Uint8Array(C);let F="";for(let T=0;T<P.byteLength;T++)F+=String.fromCharCode(P[T]);return window.btoa(F).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};return m()?r.jsxs(A,{children:[c.length>0&&r.jsxs(A,{mb:3,children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Registered Security Keys"}),r.jsx(ot,{children:c.map(C=>r.jsxs(ue,{children:[r.jsx(es,{sx:{mr:2}}),r.jsx(ie,{primary:C.name,secondary:`Registered: ${new Date(C.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Pe,{edge:"end",onClick:()=>p(C),color:"error",children:r.jsx(Yt,{})})})]},C.id))})]}),r.jsxs(de,{variant:"outlined",sx:{p:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Add New Security Key"}),r.jsx(Hr,{activeStep:o,sx:{mb:3},children:y.map(C=>r.jsx(zn,{children:r.jsx(Gn,{children:C})},C))}),r.jsxs(A,{children:[o===0&&r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Give your security key a name to identify it later."}),r.jsx(De,{fullWidth:!0,label:"Security Key Name",value:l,onChange:C=>u(C.target.value),placeholder:"e.g., YubiKey 5C, Work Key, etc.",disabled:i,sx:{mb:2}}),r.jsx(X,{variant:"contained",startIcon:r.jsx(es,{}),onClick:g,disabled:i||!l.trim(),fullWidth:!0,children:"Start Registration"})]}),o===1&&r.jsxs(A,{textAlign:"center",children:[r.jsx(vb,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Insert Your Security Key"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Please insert your security key into a USB port or hold it near the NFC reader."}),r.jsx(Ue,{})]}),o===2&&r.jsxs(A,{textAlign:"center",children:[r.jsx(tp,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Verify Your Identity"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Touch your security key or use your biometric verification when prompted."}),r.jsx(Ue,{})]}),o===3&&r.jsxs(A,{textAlign:"center",children:[r.jsx(Fn,{sx:{fontSize:64,color:"success.main",mb:2}}),r.jsx(k,{variant:"h6",color:"success.main",gutterBottom:!0,children:"Registration Successful!"}),r.jsx(k,{variant:"body2",color:"textSecondary",children:"Your security key has been registered successfully."})]})]}),r.jsx(ge,{severity:"info",sx:{mt:3},children:r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:"Supported devices:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"YubiKey (all models)"}),r.jsx("li",{children:"Windows Hello (fingerprint, face, PIN)"}),r.jsx("li",{children:"Touch ID / Face ID (macOS, iOS)"}),r.jsx("li",{children:"Android biometrics"}),r.jsx("li",{children:"Other FIDO2-compatible security keys"})]})]})})]}),r.jsxs(at,{open:!!h,onClose:()=>p(null),children:[r.jsx(lt,{children:"Remove Security Key"}),r.jsxs(ct,{children:[r.jsxs(k,{children:['Are you sure you want to remove "',h?.name,'"?']}),r.jsx(k,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"You won't be able to use this key for authentication anymore."})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>p(null),children:"Cancel"}),r.jsx(X,{onClick:()=>v(h.id),color:"error",variant:"contained",children:"Remove"})]})]})]}):r.jsx(ge,{severity:"warning",children:"Your browser doesn't support WebAuthn/Security Keys. Please use a modern browser like Chrome, Firefox, Safari, or Edge."})},xF=()=>{const{enqueueSnackbar:e}=Kt(),[t,n]=f.useState(!0),[o,s]=f.useState(null),[i,a]=f.useState(null),[l,u]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1),[y,m]=f.useState([]),[g,v]=f.useState(!1),[x,b]=f.useState({current:"",new:"",confirm:""});f.useEffect(()=>{C(),P()},[]);const C=async()=>{try{const S=await fetch("/api/auth/me",{credentials:"include"});if(S.ok){const N=await S.json();a(N.user)}}catch(S){console.error("Failed to fetch user info:",S)}},P=async()=>{try{n(!0);const S=await fetch("/api/mfa/status",{credentials:"include"});if(S.ok){const N=await S.json();s(N.data)}else throw new Error("Failed to fetch MFA status")}catch(S){console.error("MFA status error:",S),e("Failed to load MFA status",{variant:"error"})}finally{n(!1)}},F=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:N}=await S.json();if((await fetch("/api/mfa/totp/disable",{method:"POST",headers:{"X-CSRF-Token":N},credentials:"include"})).ok)e("TOTP disabled successfully",{variant:"success"}),P();else throw new Error("Failed to disable TOTP")}catch{e("Failed to disable TOTP",{variant:"error"})}},T=async S=>{try{const N=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:D}=await N.json();if((await fetch(`/api/mfa/fido2/devices/${S}`,{method:"DELETE",headers:{"X-CSRF-Token":D},credentials:"include"})).ok)e("Device removed successfully",{variant:"success"}),P();else throw new Error("Failed to remove device")}catch{e("Failed to remove device",{variant:"error"})}},I=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:N}=await S.json(),D=await fetch("/api/mfa/backup/generate",{method:"POST",headers:{"X-CSRF-Token":N},credentials:"include"});if(D.ok){const w=await D.json();m(w.codes),p(!0),P()}else throw new Error("Failed to generate backup codes")}catch{e("Failed to generate backup codes",{variant:"error"})}},R=async()=>{if(x.new!==x.confirm){e("Passwords do not match",{variant:"error"});return}try{const S=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({currentPassword:x.current,newPassword:x.new})});if(S.ok)e("Password changed successfully",{variant:"success"}),v(!1),b({current:"",new:"",confirm:""});else{const N=await S.json();throw new Error(N.error||"Failed to change password")}}catch(S){e(S.message,{variant:"error"})}},V=()=>{const S=y.join(`
`),N=new Blob([S],{type:"text/plain"}),D=URL.createObjectURL(N),w=document.createElement("a");w.href=D,w.download="backup-codes.txt",w.click(),URL.revokeObjectURL(D)},O=()=>{navigator.clipboard.writeText(y.join(`
`)),e("Backup codes copied to clipboard",{variant:"success"})};return t?r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:r.jsx(Ue,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(k,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Profile & Security"}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(_e,{elevation:3,children:[r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(jc,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"User Information"})]}),r.jsxs(ot,{children:[r.jsx(ue,{children:r.jsx(ie,{primary:"Username",secondary:i?.username||"N/A"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Role",secondary:r.jsx(be,{size:"small",label:i?.role||"N/A",color:i?.role==="admin"?"error":"primary"})})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Account Created",secondary:i?.createdAt?new Date(i.createdAt).toLocaleDateString():"N/A"})})]})]}),r.jsx(Cb,{children:r.jsx(X,{startIcon:r.jsx(ir,{}),onClick:()=>v(!0),fullWidth:!0,children:"Change Password"})})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(_e,{elevation:3,children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(Fn,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Two-Factor Authentication"})]}),r.jsx(A,{mb:2,children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(fc,{sx:{mr:1}}),r.jsx(k,{children:"Authenticator App"})]}),o?.totp?.enabled?r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(be,{size:"small",label:"Enabled",color:"success",icon:r.jsx(Ne,{})}),r.jsx(Pe,{size:"small",onClick:F,color:"error",children:r.jsx(Yt,{})})]}):r.jsx(X,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>u(!0),children:"Setup"})]})}),r.jsx(St,{sx:{my:2}}),r.jsxs(A,{mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(es,{sx:{mr:1}}),r.jsx(k,{children:"Security Keys"})]}),r.jsx(X,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>d(!0),children:"Add Key"})]}),o?.fido2?.devices?.length>0?r.jsx(ot,{dense:!0,children:o.fido2.devices.map(S=>r.jsxs(ue,{children:[r.jsx(ie,{primary:S.name,secondary:`Added: ${new Date(S.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Pe,{edge:"end",size:"small",onClick:()=>T(S.id),color:"error",children:r.jsx(Yt,{})})})]},S.id))}):r.jsx(k,{variant:"body2",color:"textSecondary",children:"No security keys registered"})]}),r.jsx(St,{sx:{my:2}}),r.jsxs(A,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsx(k,{children:"Backup Codes"}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[o?.backup?.remaining>0&&r.jsx(be,{size:"small",label:`${o.backup.remaining} remaining`,color:o.backup.remaining<3?"warning":"default"}),r.jsx(X,{size:"small",onClick:I,startIcon:o?.backup?.remaining>0?r.jsx(xn,{}):r.jsx(sr,{}),children:o?.backup?.remaining>0?"Regenerate":"Generate"})]})]}),o?.backup?.remaining<3&&o?.backup?.remaining>0&&r.jsx(ge,{severity:"warning",sx:{mt:1},children:"Low on backup codes. Generate new ones soon."})]})]})})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(ge,{severity:"info",variant:"outlined",children:r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:"Security Tips:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"Enable two-factor authentication for enhanced security"}),r.jsx("li",{children:"Use a unique, strong password for your account"}),r.jsx("li",{children:"Keep your backup codes in a safe place"}),r.jsx("li",{children:"Regularly review your security settings"})]})]})})})]}),r.jsxs(at,{open:l,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(lt,{children:"Setup Two-Factor Authentication"}),r.jsx(ct,{children:r.jsx(mF,{onComplete:()=>{u(!1),P()}})})]}),r.jsxs(at,{open:h,onClose:()=>p(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(gn,{color:"warning",sx:{mr:1}}),"Backup Codes Generated"]})}),r.jsxs(ct,{children:[r.jsx(ge,{severity:"warning",sx:{mb:2},children:"Save these codes in a secure location. Each code can only be used once."}),r.jsx(de,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:r.jsx(K,{container:!0,spacing:1,children:y.map((S,N)=>r.jsx(K,{item:!0,xs:6,children:r.jsx(k,{variant:"body2",fontFamily:"monospace",children:S})},N))})})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:O,startIcon:r.jsx(Ht,{}),children:"Copy"}),r.jsx(X,{onClick:V,startIcon:r.jsx(rr,{}),children:"Download"}),r.jsx(X,{onClick:()=>p(!1),variant:"contained",children:"Done"})]})]}),r.jsxs(at,{open:g,onClose:()=>v(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Change Password"}),r.jsx(ct,{children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[r.jsx(De,{label:"Current Password",type:"password",value:x.current,onChange:S=>b({...x,current:S.target.value}),fullWidth:!0}),r.jsx(De,{label:"New Password",type:"password",value:x.new,onChange:S=>b({...x,new:S.target.value}),fullWidth:!0,helperText:"At least 8 characters"}),r.jsx(De,{label:"Confirm New Password",type:"password",value:x.confirm,onChange:S=>b({...x,confirm:S.target.value}),fullWidth:!0,error:x.confirm&&x.new!==x.confirm,helperText:x.confirm&&x.new!==x.confirm?"Passwords do not match":""})]})}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>v(!1),children:"Cancel"}),r.jsx(X,{onClick:R,variant:"contained",disabled:!x.current||!x.new||x.new!==x.confirm,children:"Change Password"})]})]}),r.jsxs(at,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(lt,{children:"Setup Security Keys"}),r.jsx(ct,{children:r.jsx(gF,{existingDevices:o?.fido2?.devices||[],onComplete:()=>{d(!1),P()}})}),r.jsx(Ct,{children:r.jsx(X,{onClick:()=>d(!1),children:"Close"})})]})]})},yF=({onComplete:e})=>{const{apiRequest:t}=Vt(),[n,o]=f.useState(0),[s,i]=f.useState(!1),[a,l]=f.useState(null),[u,c]=f.useState(null),[d,h]=f.useState(""),[p,y]=f.useState(null),[m,g]=f.useState(null),[v,x]=f.useState(!1),[b,C]=f.useState(!1),[P,F]=f.useState({displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api",useClientSecret:!1,clientSecretExpiry:365}),[T,I]=f.useState(null),R=["Enter Tenant","Admin Login","Configure App","Create App"];f.useEffect(()=>{let D;return v&&p&&(D=setInterval(async()=>{try{const E=await(await t("/api/azure-setup/setup/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p})})).json();E.success?(x(!1),C(!0),setTimeout(()=>o(2),2e3)):E.error&&(x(!1),l(E.error))}catch(w){x(!1),l(w.message)}},5e3)),()=>clearInterval(D)},[v,p]);const V=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:d})})).json();w.success?(y(w.flowId),g(w),x(!0),o(1)):l(w.error||"Failed to start authentication")}catch(D){l("Failed to start authentication: "+D.message)}finally{i(!1)}},O=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p,appConfig:P})})).json();w.success?(I(w),c("Application created successfully!"),setTimeout(()=>{e({application:w.application,config:P})},3e3)):l(w.error||"Failed to create application")}catch(D){l("Failed to create application: "+D.message)}finally{i(!1)}},S=D=>{navigator.clipboard.writeText(D),c("Copied to clipboard!"),setTimeout(()=>c(null),2e3)},N=()=>{switch(n){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Enter Your Azure Tenant Information"}),r.jsx(De,{fullWidth:!0,label:"Tenant ID or Domain",value:d,onChange:D=>h(D.target.value),placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(ge,{severity:"info",sx:{mt:3},children:[r.jsx(Je,{children:"What you'll need:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"Global Administrator access to your Azure AD tenant"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"Permission to create applications in Azure AD"})]})]})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:V,disabled:!d||s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(Fn,{}),children:s?"Starting...":"Start Admin Authentication"})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Admin Authentication"}),m&&r.jsxs(r.Fragment,{children:[r.jsx(_e,{sx:{mt:3,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h4",align:"center",gutterBottom:!0,children:m.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(X,{variant:"contained",color:"secondary",startIcon:r.jsx(Ht,{}),onClick:()=>S(m.userCode),children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(X,{variant:"outlined",startIcon:r.jsx(Sc,{}),href:m.verificationUrl,target:"_blank",sx:{mt:1},children:m.verificationUrl})]}),v&&r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for authentication..."})]}),r.jsxs(ge,{severity:"info",sx:{mt:3},children:[r.jsx(Je,{children:"Instructions"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"1. Click the link above or go to microsoft.com/devicelogin"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"2. Enter the code shown above"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"3. Sign in with your Global Administrator account"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"4. Approve the permissions requested"})})]})]})]})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),r.jsx(De,{fullWidth:!0,label:"Application Name",value:P.displayName,onChange:D=>F({...P,displayName:D.target.value}),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication Method"}),r.jsxs(mt,{value:P.authMethod,onChange:D=>F({...P,authMethod:D.target.value}),label:"Authentication Method",children:[r.jsx(se,{value:"device_code",children:"Device Code Flow (User Context)"}),r.jsx(se,{value:"client_credentials",children:"Client Credentials (App-Only)"})]}),r.jsx(wc,{children:"Device Code: Send as specific user | Client Credentials: Send as any user"})]}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(mt,{value:P.apiMethod,onChange:D=>F({...P,apiMethod:D.target.value}),label:"API Method",children:[r.jsx(se,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(se,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),P.apiMethod==="smtp_oauth"&&r.jsxs(ge,{severity:"warning",sx:{mt:2},children:[r.jsx(Je,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:D=>D.palette.mode==="dark"?"#90caf9":"#1976d2",border:D=>`1px solid ${D.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),P.authMethod==="client_credentials"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{control:r.jsx(Sn,{checked:P.useClientSecret,onChange:D=>F({...P,useClientSecret:D.target.checked})}),label:"Create Client Secret",sx:{mt:2}}),P.useClientSecret&&r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Secret Expiry"}),r.jsxs(mt,{value:P.clientSecretExpiry,onChange:D=>F({...P,clientSecretExpiry:D.target.value}),label:"Secret Expiry",children:[r.jsx(se,{value:90,children:"3 Months"}),r.jsx(se,{value:180,children:"6 Months"}),r.jsx(se,{value:365,children:"1 Year"}),r.jsx(se,{value:730,children:"2 Years (Maximum)"})]})]})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>o(3),startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(_e,{sx:{mt:2},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"Application Name",secondary:P.displayName})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Authentication Method",secondary:P.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"API Method",secondary:P.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})}),P.useClientSecret&&r.jsx(ue,{children:r.jsx(ie,{primary:"Client Secret",secondary:`Expires in ${P.clientSecretExpiry} days`})})]})]})}),T?r.jsxs(ge,{severity:"success",sx:{mt:3},children:[r.jsx(Je,{children:"Application Created Successfully!"}),r.jsxs(k,{children:[r.jsx("strong",{children:"App ID:"})," ",T.application.appId]}),r.jsxs(k,{children:[r.jsx("strong",{children:"Tenant ID:"})," ",T.application.tenantId]}),T.clientSecret&&r.jsx(k,{variant:"caption",children:"Client secret saved to config.yml"})]}):r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:O,disabled:s,color:"success",startIcon:s?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:s?"Creating Application...":"Create Application in Azure AD"})]});default:return null}};return r.jsxs(de,{sx:{p:4},children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Azure AD Automatic Setup"}),r.jsx(Hr,{activeStep:n,sx:{mb:4},children:R.map(D=>r.jsx(zn,{children:r.jsx(Gn,{children:D})},D))}),N(),a&&r.jsx(ge,{severity:"error",sx:{mt:2},onClose:()=>l(null),children:a}),u&&r.jsx(ge,{severity:"success",sx:{mt:2},onClose:()=>c(null),children:u}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:n>0&&n<3&&!v&&r.jsx(X,{variant:"contained",startIcon:r.jsx(ns,{}),onClick:()=>o(n-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},bF=({onComplete:e,onBack:t})=>{const{apiRequest:n}=Vt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(null),[h,p]=f.useState({tenantId:"",clientId:"",clientSecret:"",authMethod:"device_code",apiMethod:"graph_api"}),y=["Choose Auth Method","Azure Portal Setup","Enter Credentials","Save Configuration"],m=async()=>{a(!0),u(null);try{const x=await(await n("/api/azure-simple/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();x.success?(d("Configuration saved successfully!"),setTimeout(()=>{e(x)},2e3)):u(x.error||"Failed to save configuration")}catch(v){u("Failed to save configuration: "+v.message)}finally{a(!1)}},g=()=>{switch(o){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Choose Authentication Method"}),r.jsx(_e,{sx:{mt:2,cursor:"pointer",border:h.authMethod==="device_code"?"2px solid":"1px solid",borderColor:h.authMethod==="device_code"?"primary.main":"divider"},onClick:()=>p({...h,authMethod:"device_code"}),children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",color:"primary",children:"Device Code Flow (Recommended)"}),r.jsx(k,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"• Users authenticate with their own account • Each user needs to authenticate individually • More secure - no shared credentials • Perfect for multi-user environments"}),r.jsx(be,{label:"User Context",color:"success",size:"small",sx:{mt:1}})]})}),r.jsx(_e,{sx:{mt:2,cursor:"pointer",border:h.authMethod==="client_credentials"?"2px solid":"1px solid",borderColor:h.authMethod==="client_credentials"?"primary.main":"divider"},onClick:()=>p({...h,authMethod:"client_credentials"}),children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h6",color:"primary",children:"Client Credentials Flow"}),r.jsx(k,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"• App authenticates without user interaction • Can send emails as any user in the organization • Requires admin consent • Good for automated services"}),r.jsx(be,{label:"App-Only",color:"warning",size:"small",sx:{mt:1}})]})}),r.jsxs(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>s(1),children:["Continue with ",h.authMethod==="device_code"?"Device Code":"Client Credentials"]})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Create Azure AD Application"}),r.jsxs(ge,{severity:"info",sx:{mb:2},children:[r.jsx(Je,{children:"Manual Setup Required"}),"Due to Microsoft security restrictions, you need to create the app manually in Azure Portal."]}),r.jsx(X,{variant:"contained",startIcon:r.jsx(ap,{}),href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps",target:"_blank",fullWidth:!0,sx:{mb:3},children:"Open Azure Portal - App Registrations"}),r.jsx(k,{variant:"subtitle1",gutterBottom:!0,children:"Follow these steps:"}),r.jsxs(ot,{children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"1."})}),r.jsx(ie,{primary:"Click 'New registration'",secondary:"In the Azure Portal App registrations page"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"2."})}),r.jsx(ie,{primary:"Basic Settings",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"• Name: SMTP Relay for Exchange Online"}),r.jsx(k,{variant:"body2",children:"• Account types: Accounts in this organizational directory only"})]})})]}),h.authMethod==="device_code"?r.jsxs(r.Fragment,{children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"3."})}),r.jsx(ie,{primary:"Redirect URI",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"• Platform: Mobile and desktop applications"}),r.jsx(k,{variant:"body2",children:"• URI: https://login.microsoftonline.com/common/oauth2/nativeclient"})]})})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"4."})}),r.jsx(ie,{primary:"API Permissions",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Add permission → Microsoft Graph → Delegated:"}),r.jsx(k,{variant:"body2",children:"• Mail.Send"}),r.jsx(k,{variant:"body2",children:"• User.Read"}),r.jsx(k,{variant:"body2",children:"• offline_access"})]})})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"5."})}),r.jsx(ie,{primary:"Enable Public Client",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Authentication → Advanced settings"}),r.jsx(k,{variant:"body2",children:"• Allow public client flows: Yes"})]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"3."})}),r.jsx(ie,{primary:"Skip Redirect URI",secondary:"Not needed for client credentials"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"4."})}),r.jsx(ie,{primary:"API Permissions",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Add permission → Microsoft Graph → Application:"}),r.jsx(k,{variant:"body2",children:"• Mail.Send"}),r.jsx(ge,{severity:"warning",sx:{mt:1},children:`Don't forget to click "Grant admin consent"!`})]})})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(k,{children:"5."})}),r.jsx(ie,{primary:"Create Client Secret",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Certificates & secrets → New client secret"}),r.jsx(k,{variant:"body2",children:"• Description: SMTP Relay Secret"}),r.jsx(k,{variant:"body2",children:"• Expires: Max 2 years (Microsoft limit)"}),r.jsx(ge,{severity:"error",sx:{mt:1},children:"Copy the secret immediately - it won't be shown again!"})]})})]})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{color:"success"})}),r.jsx(ie,{primary:"Copy Application ID",secondary:"From the Overview page, copy the Application (client) ID"})]})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:2},onClick:()=>s(2),children:"I've Created the App - Continue"})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Enter Azure AD Application Details"}),r.jsx(De,{fullWidth:!0,label:"Tenant ID",value:h.tenantId,onChange:v=>p({...h,tenantId:v.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"Your Azure AD tenant ID (from Azure Portal → Overview)"}),r.jsx(De,{fullWidth:!0,label:"Application (Client) ID",value:h.clientId,onChange:v=>p({...h,clientId:v.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"The Application ID you copied from Azure Portal"}),h.authMethod==="client_credentials"&&r.jsx(De,{fullWidth:!0,label:"Client Secret",type:"password",value:h.clientSecret,onChange:v=>p({...h,clientSecret:v.target.value}),margin:"normal",required:!0,helperText:"The secret value you copied (not the secret ID)"}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(mt,{value:h.apiMethod,onChange:v=>p({...h,apiMethod:v.target.value}),label:"API Method",children:[r.jsx(se,{value:"graph_api",children:"Microsoft Graph API (Recommended)"}),r.jsx(se,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),h.apiMethod==="smtp_oauth"&&r.jsxs(ge,{severity:"warning",sx:{mt:2},children:[r.jsx(Je,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:v=>v.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:v=>v.palette.mode==="dark"?"#90caf9":"#1976d2",border:v=>`1px solid ${v.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>s(3),disabled:!h.tenantId||!h.clientId||h.authMethod==="client_credentials"&&!h.clientSecret,children:"Review Configuration"})]});case 3:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Save Configuration"}),r.jsx(_e,{sx:{mt:2},children:r.jsx(Re,{children:r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"Authentication Method",secondary:h.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Tenant ID",secondary:h.tenantId})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Client ID",secondary:h.clientId})}),h.clientSecret&&r.jsx(ue,{children:r.jsx(ie,{primary:"Client Secret",secondary:"••••••••••••••••"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"API Method",secondary:h.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})})]})})}),r.jsx(ge,{severity:"info",sx:{mt:2},children:"This configuration will be saved to config.yml and used for Exchange Online authentication."}),r.jsx(X,{variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},onClick:m,disabled:i,children:i?"Saving...":"Save Configuration"})]});default:return null}};return r.jsxs(de,{sx:{p:4},children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Azure AD Manual Setup"}),r.jsx(Hr,{activeStep:o,sx:{mb:4},children:y.map(v=>r.jsx(zn,{children:r.jsx(Gn,{children:v})},v))}),g(),l&&r.jsx(ge,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),c&&r.jsx(ge,{severity:"success",sx:{mt:2},onClose:()=>d(null),children:c}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:(o===0?t:o>0&&o<3)&&r.jsx(X,{variant:"contained",startIcon:r.jsx(ns,{}),onClick:o===0?t:()=>s(o-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},vF={displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api",useClientSecret:!1,clientSecretExpiry:365},bl=["Enter Tenant","Admin Authentication","Configure App","Create App"],CF=5e3,wF=2e3,jF=5,ny=({onComplete:e,onBack:t})=>{const{apiRequest:n}=Vt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(""),[h,p]=f.useState(null),[y,m]=f.useState(null),[g,v]=f.useState(!1),[x,b]=f.useState(!1),[C,P]=f.useState(null),[F,T]=f.useState(vF),[I,R]=f.useState(null),[V,O]=f.useState(null);f.useEffect(()=>{u(null)},[o]),f.useEffect(()=>{if(!g||!h)return;const B=setInterval(async()=>{try{const G=await(await n("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:h})})).json();G.success?(v(!1),b(!0),P(G),s(2)):G.error&&!G.pending&&(v(!1),u(G.error))}catch(z){console.log("Polling in progress...",z.message)}},CF);return()=>clearInterval(B)},[g,h,n]);const S=f.useCallback(async()=>{if(!c.trim()){u("Tenant ID is required");return}a(!0),u(null);try{const B=await(await n("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:c.trim()})})).json();B.success?(p(B.flowId),m(B),v(!0),s(1)):u(B.error||"Failed to start authentication")}catch(_){u(`Failed to start authentication: ${_.message}`)}finally{a(!1)}},[c,n]),N=f.useCallback(async()=>{if(!h||!F.displayName.trim()){u("Invalid configuration");return}a(!0),u(null);try{const _=await n("/api/azure-graph/admin/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:h,appConfig:{...F,displayName:F.displayName.trim()}})});if(!_.ok){const z=await _.json();throw new Error(z.details||z.error||"Failed to create application")}const B=await _.json();R(B),s(3),B.consentUrl&&setTimeout(()=>{window.open(B.consentUrl,"_blank","noopener,noreferrer")},wF),D(B)}catch(_){console.error("App creation error:",_),u(_.message||"Failed to create application")}finally{a(!1)}},[h,F,n,e]),D=f.useCallback(_=>{let B=jF;O(B);const z=setInterval(()=>{B-=1,O(B),B<=0&&(clearInterval(z),e&&e({application:_.application,config:F,success:!0}))},1e3);return()=>clearInterval(z)},[F,e]),w=f.useCallback(async _=>{try{await navigator.clipboard.writeText(_)}catch(B){console.error("Failed to copy to clipboard:",B),u("Failed to copy to clipboard")}},[]);f.useMemo(()=>{switch(o){case 0:return c.trim().length>0;case 1:return x;case 2:return F.displayName.trim().length>0;case 3:return!0;default:return!1}},[o,c,x,F.displayName]);const E=f.useCallback((_,B)=>{T(z=>({...z,[_]:B}))},[]),M=f.useCallback(()=>{s(_=>Math.max(0,_-1))},[]),$=f.useCallback(()=>{s(_=>Math.min(bl.length-1,_+1))},[]),L=f.useMemo(()=>{switch(o){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Azure AD Automatic Setup with Global Admin"}),r.jsxs(ge,{severity:"warning",sx:{mb:2},children:[r.jsx(Je,{children:"Global Administrator Required"}),"This setup requires Global Administrator or Application Administrator privileges. The setup will use Microsoft Graph PowerShell to create the application."]}),r.jsx(_e,{sx:{mb:2,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(wb,{sx:{mr:1}}),r.jsx(k,{variant:"subtitle1",children:"Using Microsoft Graph PowerShell"})]}),r.jsx(k,{variant:"body2",children:"Client ID: 14d82eec-204b-4c2f-b7e8-296a70dab67e"}),r.jsx(k,{variant:"body2",children:"This is Microsoft's official Graph PowerShell application with the necessary permissions."})]})}),r.jsx(De,{fullWidth:!0,label:"Tenant ID or Domain",value:c,onChange:_=>d(_.target.value),error:l&&o===0,placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(ge,{severity:"info",sx:{mt:3},children:[r.jsx(Je,{children:"What will happen:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"You'll authenticate with your Global Admin account"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"A new Azure AD application will be created"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"Permissions will be configured automatically"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{})}),r.jsx(ie,{primary:"Configuration will be saved to config.yml"})]})]})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:S,disabled:!c||i,startIcon:i?r.jsx(Ue,{size:20}):r.jsx(fi,{}),children:i?"Starting...":"Start Global Admin Authentication"})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Global Administrator Authentication"}),y&&r.jsxs(r.Fragment,{children:[r.jsx(_e,{sx:{mt:3,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h3",align:"center",gutterBottom:!0,children:y.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(X,{variant:"contained",color:"secondary",startIcon:r.jsx(Ht,{}),onClick:()=>w(y.userCode),children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(X,{variant:"contained",startIcon:r.jsx(Sc,{}),href:y.verificationUrl,target:"_blank",sx:{mt:1},children:y.verificationUrl})]}),g&&r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for Global Administrator authentication..."})]}),r.jsxs(ge,{severity:"warning",sx:{mt:3},children:[r.jsx(Je,{children:"Important"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"1. Sign in with a Global Administrator account"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"2. You'll see 'Microsoft Graph PowerShell' requesting permissions"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"3. Accept the permissions to continue"})})]})]})]})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),C&&r.jsxs(ge,{severity:"success",sx:{mb:2},children:[r.jsx(Je,{children:"Admin Authenticated"}),r.jsxs(k,{variant:"body2",children:["User: ",C.adminUser]}),C.adminRoles?.length>0&&r.jsxs(k,{variant:"body2",children:["Roles: ",C.adminRoles.join(", ")]})]}),r.jsx(De,{fullWidth:!0,label:"Application Name",value:F.displayName,onChange:_=>E("displayName",_.target.value),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication Method"}),r.jsxs(mt,{value:F.authMethod,onChange:_=>E("authMethod",_.target.value),label:"Authentication Method",children:[r.jsx(se,{value:"device_code",children:"Device Code Flow (User Context)"}),r.jsx(se,{value:"client_credentials",children:"Client Credentials (App-Only)"})]}),r.jsx(wc,{children:"Device Code: Send as specific user | Client Credentials: Send as any user"})]}),r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(mt,{value:F.apiMethod,onChange:_=>E("apiMethod",_.target.value),label:"API Method",children:[r.jsx(se,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(se,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),F.apiMethod==="smtp_oauth"&&r.jsxs(ge,{severity:"warning",sx:{mt:2},children:[r.jsx(Je,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:_=>_.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:_=>_.palette.mode==="dark"?"#90caf9":"#1976d2",border:_=>`1px solid ${_.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),F.authMethod==="client_credentials"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{control:r.jsx(Sn,{checked:F.useClientSecret,onChange:_=>E("useClientSecret",_.target.checked)}),label:"Create Client Secret",sx:{mt:2}}),F.useClientSecret&&r.jsxs(ut,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Secret Expiry"}),r.jsxs(mt,{value:F.clientSecretExpiry,onChange:_=>E("clientSecretExpiry",_.target.value),label:"Secret Expiry",children:[r.jsx(se,{value:90,children:"3 Months"}),r.jsx(se,{value:180,children:"6 Months"}),r.jsx(se,{value:365,children:"1 Year"}),r.jsx(se,{value:730,children:"2 Years (Maximum)"})]})]}),r.jsx(ge,{severity:"info",sx:{mt:2},children:"Client Credentials requires admin consent after creation."})]}),r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:$,startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(_e,{sx:{mt:2},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ue,{children:r.jsx(ie,{primary:"Application Name",secondary:F.displayName})}),r.jsx(ue,{children:r.jsx(ie,{primary:"Authentication Method",secondary:F.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ue,{children:r.jsx(ie,{primary:"API Method",secondary:F.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})}),F.useClientSecret&&r.jsx(ue,{children:r.jsx(ie,{primary:"Client Secret",secondary:`Expires in ${F.clientSecretExpiry} days`})})]})]})}),I?r.jsxs(r.Fragment,{children:[r.jsxs(ge,{severity:"success",sx:{mt:3},children:[r.jsx(Je,{children:"✅ Application Created Successfully!"}),r.jsxs(k,{variant:"body1",sx:{mt:1},children:[r.jsx("strong",{children:"Application Name:"})," ",I.application.displayName]}),r.jsxs(k,{variant:"body1",children:[r.jsx("strong",{children:"Application ID:"})," ",I.application.appId]}),r.jsxs(k,{variant:"body1",children:[r.jsx("strong",{children:"Tenant ID:"})," ",I.application.tenantId]}),I.clientSecret&&r.jsx(k,{variant:"body2",sx:{mt:1},children:"✅ Client secret has been saved to config.yml"}),r.jsx(k,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:I.nextSteps})]}),I.consentUrl&&r.jsxs(ge,{severity:"info",sx:{mt:2},children:[r.jsx(Je,{children:"Admin Consent Required"}),r.jsx(k,{children:"A new window will open for admin consent."}),r.jsx(X,{variant:"outlined",size:"small",href:I.consentUrl,target:"_blank",sx:{mt:1},children:"Grant Admin Consent"})]}),r.jsx(A,{sx:{mt:3,textAlign:"center"},children:r.jsxs(k,{variant:"body2",color:"text.secondary",children:["Setup complete! ",V&&V>0&&`Redirecting in ${V} seconds...`]})})]}):r.jsx(X,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:N,disabled:i,color:"success",startIcon:i?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:i?"Creating Application...":"Create Application in Azure AD"})]});default:return null}},[o,c,y,g,C,F,I,V,i,l,E,S,N,w,$,e]);return r.jsxs(de,{sx:{p:4},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(fi,{sx:{mr:2,fontSize:40,color:"primary.main"}}),r.jsx(k,{variant:"h5",children:"Exchange Online Configuration"})]}),r.jsx(Hr,{activeStep:o,sx:{mb:4},children:bl.map((_,B)=>r.jsx(zn,{completed:B<o,children:r.jsx(Gn,{children:_})},_))}),r.jsx(A,{"aria-label":`Step ${o+1}: ${bl[o]}`,children:L}),l&&r.jsx(ge,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:!I&&r.jsx(X,{variant:"contained",startIcon:r.jsx(ns,{}),onClick:o===0?t:M,disabled:g,sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"},"&:disabled":{opacity:.5,backgroundColor:"#ce93d8"}},children:"Back"})})})]})};ny.propTypes={onComplete:U.func.isRequired,onBack:U.func};const SF=({open:e,onClose:t,tenantId:n,onAuthComplete:o})=>{const{apiRequest:s}=Vt(),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(!1),[h,p]=f.useState(null);f.useEffect(()=>{e&&n&&!l&&y()},[e,n]),f.useEffect(()=>{let v;return c&&l&&(v=setInterval(m,5e3)),()=>clearInterval(v)},[c,l]);const y=async()=>{a(!0),p(null);try{const v=await s("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:n})}),x=await v.json();v.ok&&(x.success||x.userCode)?(u(x),d(!0)):p(x.error||"Failed to initialize admin authentication")}catch{p("Failed to start authentication process")}finally{a(!1)}},m=async()=>{try{const x=await(await s("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:l.flowId})})).json();x.authenticated?(d(!1),o(!0),t()):x.error&&x.error!=="authorization_pending"&&(d(!1),p(x.error))}catch{}},g=()=>{l?.userCode&&navigator.clipboard.writeText(l.userCode)};return r.jsxs(at,{open:e,onClose:c?void 0:t,maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Fn,{sx:{mr:1}}),"Administrator Authentication Required"]})}),r.jsx(ct,{children:i&&!l?r.jsx(A,{display:"flex",justifyContent:"center",p:3,children:r.jsx(Ue,{})}):l?r.jsxs(A,{children:[r.jsxs(ge,{severity:"info",sx:{mb:2},children:[r.jsx(Je,{children:"Sign in as Azure AD Administrator"}),"To delete the application from Azure AD, you need to authenticate with administrator privileges."]}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Please use this code to authenticate:"}),r.jsx(_e,{sx:{my:2,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h3",align:"center",gutterBottom:!0,children:l.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(X,{variant:"contained",color:"secondary",startIcon:r.jsx(Ht,{}),onClick:g,children:"Copy Code"})})]})}),r.jsx(k,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Click the button below to open the authentication page:"}),r.jsx(X,{variant:"contained",fullWidth:!0,startIcon:r.jsx(ap,{}),onClick:()=>window.open(l.verificationUrl,"_blank"),sx:{mb:2},children:"Open Microsoft Login"}),c&&r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"center",mt:2,children:[r.jsx(Ue,{size:20,sx:{mr:1}}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Waiting for authentication..."})]}),r.jsxs(ge,{severity:"warning",sx:{mt:2},children:[r.jsx("strong",{children:"Important:"})," Sign in with an account that has Global Administrator or Application Administrator privileges in your Azure AD tenant."]})]}):h?r.jsx(ge,{severity:"error",children:h}):null}),r.jsx(Ct,{children:r.jsx(X,{onClick:t,disabled:c,children:"Cancel"})})]})},PF=({onSetupStart:e,onEdit:t})=>{const{apiRequest:n}=Vt(),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),[c,d]=f.useState({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),[h,p]=f.useState({open:!1,tenantId:null}),[y,m]=f.useState({applications:!0,tokens:!0,mailboxes:!0}),[g,v]=f.useState(""),[x,b]=f.useState({open:!1,mailbox:null,processing:!1});f.useEffect(()=>{C();const S=setInterval(C,6e4);return()=>clearInterval(S)},[]);const C=async()=>{try{s(!0);const[S,N,D]=await Promise.all([n("/api/exchange-config/status"),n("/api/exchange-config/token-status"),n("/api/exchange-config/mailboxes")]),w=await S.json(),E=N.ok?await N.json():null,M=D.ok?await D.json():null;a({...w,tokens:E,mailboxes:M}),u(null)}catch(S){console.error("Failed to fetch status:",S),u("Failed to load Exchange status")}finally{s(!1)}},P=S=>{m(N=>({...N,[S]:!N[S]}))},F=S=>{switch(S){case"connected":case"valid":case"active":return"success";case"expired":case"error":case"disconnected":return"error";case"warning":case"expiring":return"warning";default:return"default"}},T=S=>{if(!S)return"Unknown";const N=new Date,w=new Date(S)-N;if(w<=0)return"Expired";const E=Math.floor(w/(1e3*60*60*24)),M=Math.floor(w%(1e3*60*60*24)/(1e3*60*60)),$=Math.floor(w%(1e3*60*60)/(1e3*60));return E>0?`${E}d ${M}h`:M>0?`${M}h ${$}m`:`${$}m`},I=S=>{navigator.clipboard.writeText(S)},R=async()=>{if(x.mailbox){b(S=>({...S,processing:!0}));try{const S=await n(`/api/exchange-config/mailboxes/${encodeURIComponent(x.mailbox.email)}`,{method:"DELETE"});if(S.ok)b({open:!1,mailbox:null,processing:!1}),v(`Mailbox ${x.mailbox.email} and all associated tokens have been deleted`),await C();else{const N=await S.json();u(N.error||"Failed to delete mailbox"),b(D=>({...D,processing:!1}))}}catch{u("Failed to delete mailbox"),b(N=>({...N,processing:!1}))}}},V=async()=>{if(c.app){if(c.deleteOption==="everything"&&c.confirmName!==c.app.displayName){u("Application name does not match. Please type the exact name.");return}d(S=>({...S,processing:!0}));try{console.log("Sending delete request for app:",c.app.appId);const S=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})});console.log("Delete response status:",S.status);const N=await S.json();S.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),c.deleteOption==="everything"?(u(null),v("Application and Azure AD registration deleted successfully")):v("Application configuration deleted successfully")):S.status===401&&N.requiresAdminAuth?(console.log("Admin auth required for Azure deletion"),d(D=>({...D,processing:!1})),p({open:!0,tenantId:N.tenantId||c.app.tenantId})):(u(N.error||"Failed to delete application"),d(D=>({...D,processing:!1})))}catch{u("Failed to delete application"),d(N=>({...N,processing:!1}))}}};if(o&&!i)return r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(Ue,{})});const O=i?.configured||i?.applications?.length>0;return r.jsxs(A,{children:[r.jsx(de,{sx:{p:3,mb:3},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[O?r.jsx(jb,{sx:{fontSize:40,color:"success.main",mr:2}}):r.jsx(Sb,{sx:{fontSize:40,color:"error.main",mr:2}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Exchange Online Status"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:O?"Connected and configured":"Not configured - Setup required"})]})]}),r.jsxs(A,{children:[r.jsx(X,{variant:"outlined",startIcon:r.jsx(xn,{}),onClick:C,disabled:o,sx:{mr:1},children:"Refresh"}),!O&&r.jsx(X,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:e,children:"Start Setup"})]})]})}),l&&r.jsx(ge,{severity:"error",sx:{mb:2},children:l}),r.jsx(_e,{sx:{mb:2},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Cc,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Azure AD Applications"}),i?.applications?.length>0&&r.jsx(be,{label:i.applications.length,size:"small",sx:{ml:1}})]}),r.jsx(Pe,{onClick:()=>P("applications"),children:y.applications?r.jsx(Ea,{}):r.jsx(Ar,{})})]}),r.jsxs(Hn,{in:y.applications,children:[r.jsx(St,{sx:{my:2}}),i?.applications?.length>0?r.jsx(fs,{children:r.jsxs(ps,{size:"small",children:[r.jsx(ms,{children:r.jsxs(Mn,{children:[r.jsx(he,{children:"Application Name"}),r.jsx(he,{children:"Application ID"}),r.jsx(he,{children:"Tenant ID"}),r.jsx(he,{children:"Auth Method"}),r.jsx(he,{children:"API Method"}),r.jsx(he,{children:"Status"}),r.jsx(he,{align:"right",children:"Actions"})]})}),r.jsx(gs,{children:i.applications.map((S,N)=>r.jsxs(Mn,{children:[r.jsx(he,{children:r.jsx(k,{variant:"body2",fontWeight:"medium",children:S.displayName||"Unnamed Application"})}),r.jsx(he,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsxs(k,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.appId?.substring(0,8),"..."]}),r.jsx(Pe,{size:"small",onClick:()=>I(S.appId),children:r.jsx(Ht,{fontSize:"small"})})]})}),r.jsx(he,{children:r.jsxs(k,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.tenantId?.substring(0,8),"..."]})}),r.jsx(he,{children:r.jsx(be,{label:S.authMethod||"Unknown",size:"small",variant:"outlined"})}),r.jsx(he,{children:r.jsx(be,{label:S.apiMethod==="smtp_oauth"?"SMTP OAuth2":"Graph API",size:"small",color:S.apiMethod==="smtp_oauth"?"warning":"primary",variant:"outlined"})}),r.jsx(he,{children:r.jsx(be,{label:S.status||"Active",color:F(S.status||"active"),size:"small"})}),r.jsx(he,{align:"right",children:r.jsx(Pe,{size:"small",onClick:()=>d({open:!0,app:S}),children:r.jsx(Yt,{fontSize:"small"})})})]},N))})]})}):r.jsx(ge,{severity:"info",children:'No Azure AD applications configured. Click "Start Setup" to configure.'})]})]})}),r.jsx(_e,{sx:{mb:2},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Fn,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Token Status"})]}),r.jsx(Pe,{onClick:()=>P("tokens"),children:y.tokens?r.jsx(Ea,{}):r.jsx(Ar,{})})]}),r.jsxs(Hn,{in:y.tokens,children:[r.jsx(St,{sx:{my:2}}),i?.tokens||i?.accounts?.length>0?r.jsxs(K,{container:!0,spacing:2,children:[i?.accounts?.length>0&&r.jsx(K,{item:!0,xs:12,children:r.jsxs(de,{variant:"outlined",sx:{p:2,bgcolor:"background.default"},children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Accounts with Active Tokens"}),i.accounts.map((S,N)=>r.jsxs(A,{display:"flex",alignItems:"center",sx:{mt:N>0?2:1},children:[r.jsx(Uu,{sx:{mr:1},color:S.hasValidToken?"primary":"disabled"}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:S.email||S.displayName||"Unknown Account"}),S.displayName&&S.email&&r.jsx(k,{variant:"caption",color:"text.secondary",children:S.displayName})]}),r.jsxs(A,{display:"flex",gap:1,children:[S.isDefault&&r.jsx(be,{label:"Default",size:"small",color:"primary",variant:"outlined"}),r.jsx(be,{label:S.hasValidToken?"Active":"Expired",size:"small",color:S.hasValidToken?"success":"error"})]})]},N))]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{variant:"outlined",sx:{p:2},children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",children:"Access Token"}),r.jsx(k,{variant:"h6",children:i.tokens?.accessToken||i.hasTokens?"Valid":"Not Available"}),(i.tokens?.accessToken||i.hasTokens)&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)]})]}),r.jsx(A,{children:i.tokens?.accessToken||i.hasTokens?r.jsx(Ne,{color:"success"}):r.jsx(Tn,{color:"error"})})]}),(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)&&r.jsx(zt,{variant:"determinate",value:dc(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt),sx:{mt:1},color:$f(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(de,{variant:"outlined",sx:{p:2},children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",children:"Refresh Token"}),r.jsx(k,{variant:"h6",children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?"Valid":"Not Available"}),(i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken)&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))]})]}),r.jsx(A,{children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?r.jsx(Ne,{color:"success"}):r.jsx(Tn,{color:"error"})})]}),(i.tokens?.refreshTokenExpiry||i.accounts?.[0]?.hasRefreshToken)&&r.jsx(zt,{variant:"determinate",value:dc(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null)),sx:{mt:1},color:$f(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))})]})}),i.tokens.lastRefresh&&r.jsx(K,{item:!0,xs:12,children:r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Last token refresh: ",new Date(i.tokens.lastRefresh).toLocaleString()]})})]}):r.jsx(ge,{severity:"warning",children:"No token information available. Please complete the setup process."})]})]})}),r.jsx(_e,{sx:{mb:2},children:r.jsxs(Re,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(jl,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Connected Mailboxes"}),i?.mailboxes?.length>0&&r.jsx(be,{label:i.mailboxes.length,size:"small",sx:{ml:1}})]}),r.jsxs(A,{children:[r.jsx(X,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>t?.({type:"mailbox"}),children:"Add Mailbox"}),r.jsx(Pe,{onClick:()=>P("mailboxes"),children:y.mailboxes?r.jsx(Ea,{}):r.jsx(Ar,{})})]})]}),r.jsxs(Hn,{in:y.mailboxes,children:[r.jsx(St,{sx:{my:2}}),i?.mailboxes?.length>0?r.jsx(ot,{children:i.mailboxes.map((S,N)=>r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Uu,{})}),r.jsx(ie,{primary:S.email,secondary:r.jsxs(A,{children:[r.jsxs(k,{variant:"caption",display:"block",children:["Type: ",S.type||"User Mailbox"]}),r.jsxs(k,{variant:"caption",display:"block",children:["Permissions: ",S.permissions?.join(", ")||"Send As"]})]})}),r.jsxs(un,{children:[r.jsx(be,{label:S.status||"Active",color:F(S.status||"active"),size:"small",sx:{mr:1}}),r.jsx(Pe,{size:"small",onClick:()=>b({open:!0,mailbox:S,processing:!1}),children:r.jsx(Yt,{fontSize:"small"})})]})]},N))}):r.jsx(ge,{severity:"info",children:"No mailboxes configured. The default account will be used for sending."})]})]})}),r.jsxs(at,{open:c.open,onClose:()=>!c.processing&&d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Delete Application"}),r.jsxs(ct,{children:[r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Application:"})," ",c.app?.displayName]}),r.jsxs(k,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[r.jsx("strong",{children:"App ID:"})," ",c.app?.appId]})]}),r.jsxs(A,{mt:3,children:[r.jsx(k,{variant:"subtitle1",gutterBottom:!0,children:"What would you like to delete?"}),r.jsx(ut,{component:"fieldset",children:r.jsxs(Pb,{value:c.deleteOption,onChange:S=>d(N=>({...N,deleteOption:S.target.value,confirmName:""})),children:[r.jsx(hn,{value:"config",control:r.jsx(Wu,{}),label:r.jsxs(A,{children:[r.jsx(k,{variant:"body1",children:"Configuration only"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Remove from SMTP Relay only (Azure AD App remains)"})]})}),r.jsx(hn,{value:"everything",control:r.jsx(Wu,{}),label:r.jsxs(A,{children:[r.jsx(k,{variant:"body1",children:"Configuration + Azure AD App"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Completely remove everything from Azure AD"})]})})]})})]}),c.deleteOption==="everything"&&r.jsxs(A,{mt:3,children:[r.jsxs(ge,{severity:"error",sx:{mb:2},children:[r.jsx(Je,{children:"⚠️ Permanent Deletion Warning"}),"This will permanently delete the application from Azure AD. This action cannot be undone!"]}),r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Please type ",r.jsx("strong",{children:c.app?.displayName})," to confirm:"]}),r.jsx(De,{fullWidth:!0,size:"small",value:c.confirmName,onChange:S=>d(N=>({...N,confirmName:S.target.value})),placeholder:"Type application name here",disabled:c.processing,error:c.confirmName&&c.confirmName!==c.app?.displayName,helperText:c.confirmName&&c.confirmName!==c.app?.displayName?"Name does not match":""}),r.jsxs(ge,{severity:"info",sx:{mt:2},children:[r.jsx("strong",{children:"Note:"})," This operation requires Azure AD administrator authentication."]})]}),c.deleteOption==="config"&&r.jsx(ge,{severity:"info",sx:{mt:2},children:"The Azure AD application will remain in your tenant and can be reused later."})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),disabled:c.processing,children:"Cancel"}),r.jsx(X,{onClick:V,color:"error",variant:"contained",disabled:c.processing||c.deleteOption==="everything"&&c.confirmName!==c.app?.displayName,children:c.processing?r.jsx(Ue,{size:24}):c.deleteOption==="everything"?"Delete Everything":"Delete Configuration"})]})]}),r.jsx(SF,{open:h.open,tenantId:h.tenantId,onClose:()=>p({open:!1,tenantId:null}),onAuthComplete:async S=>{if(p({open:!1,tenantId:null}),S&&c.app){console.log("Admin auth complete, retrying delete for:",c.app.appId);try{const N=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})}),D=await N.json();N.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),v("Application and Azure AD registration deleted successfully")):(u(D.error||"Failed to delete application"),d(w=>({...w,processing:!1})))}catch{u("Failed to delete application"),d(D=>({...D,processing:!1}))}}}}),r.jsxs(at,{open:x.open,onClose:()=>!x.processing&&b({open:!1,mailbox:null,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Delete Mailbox"}),r.jsxs(ct,{children:[r.jsxs(ge,{severity:"warning",sx:{mb:2},children:[r.jsx(Je,{children:"Warning"}),"This will delete the mailbox configuration and all associated tokens. The mailbox will need to be re-authenticated if you want to use it again."]}),x.mailbox&&r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Mailbox:"})," ",x.mailbox.email]}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:[r.jsx("strong",{children:"Type:"})," ",x.mailbox.type||"User Mailbox"]})]}),r.jsx(k,{variant:"body2",sx:{mt:2},children:"Are you sure you want to delete this mailbox and all its tokens?"})]}),r.jsxs(Ct,{children:[r.jsx(X,{onClick:()=>b({open:!1,mailbox:null,processing:!1}),disabled:x.processing,children:"Cancel"}),r.jsx(X,{onClick:R,color:"error",variant:"contained",disabled:x.processing,children:x.processing?r.jsx(Ue,{size:24}):"Delete Mailbox"})]})]}),r.jsx(kb,{open:!!g,autoHideDuration:6e3,onClose:()=>v(""),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(ge,{onClose:()=>v(""),severity:"success",sx:{width:"100%"},children:g})})]})},dc=e=>{if(!e)return 0;const t=new Date,n=new Date(e),o=new Date(n.getTime()-3600*1e3),s=n-o,i=n-t;return Math.max(0,Math.min(100,i/s*100))},$f=e=>{const t=dc(e);return t>50?"success":t>20?"warning":"error"};class kF extends Le.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n),this.setState({error:t,errorInfo:n})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?r.jsx(A,{sx:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:r.jsxs(de,{sx:{p:4,maxWidth:600,textAlign:"center"},children:[r.jsx(Tn,{sx:{fontSize:64,color:"error.main",mb:2}}),r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Something went wrong"}),r.jsx(k,{variant:"body2",color:"text.secondary",paragraph:!0,children:this.state.error?.message||"An unexpected error occurred"}),!1,r.jsx(X,{variant:"contained",color:"primary",onClick:this.handleReset,sx:{mt:3},children:"Try Again"})]})}):this.props.children}}const IF=1e3,EF=2e3,TF=["Choose Method","Configure Azure AD","Authenticate","Test Connection"],vl=Gt(_e),Vf=Gt(A),AF=()=>{const{apiRequest:e}=Vt(),t=$t(),[n,o]=f.useState(0),[s,i]=f.useState(!0),[a,l]=f.useState(null),[u,c]=f.useState([]),[d,h]=f.useState(!1),[p,y]=f.useState({authMethod:"device_code",tenantId:"",clientId:"",clientSecret:"",apiMethod:"graph_api",sendAs:""}),[m,g]=f.useState(null),[v,x]=f.useState(!1),[b,C]=f.useState(!1),[P,F]=f.useState(null),[T,I]=f.useState(null),[R,V]=f.useState(null),[O,S]=f.useState(null),[N,D]=f.useState(!1),[w,E]=f.useState("choose"),[M,$]=f.useState(!1),[L,_]=f.useState(0),B=f.useMemo(()=>TF,[]),z=f.useCallback(async()=>{i(!0);try{const ne=await(await e("/api/exchange-config/status")).json();console.log("Exchange status data:",ne),l(ne),c(ne.accounts||[]);const je=ne.isConfigured||ne.hasConfig,Z=ne.applications?.length>0,ye=ne.hasTokens,xe=ne.clientId||ne.exchangeConfig?.auth?.client_id;console.log("Setup check:",{hasConfig:je,hasApplications:Z,hasTokens:ye,hasClientId:xe}),je||Z||xe&&ye?(console.log("Showing dashboard view"),h(!1)):(console.log("Showing setup wizard"),h(!0))}catch(Y){console.error("Failed to check status:",Y),h(!0)}finally{i(!1)}},[e]),G=f.useCallback(()=>{o(Y=>Y+1)},[]),J=f.useCallback(()=>{o(Y=>{const ne=Math.max(0,Y-1);return Y===1&&ne===0&&E("choose"),ne})},[]);f.useCallback(()=>{o(0),g(null),x(!1),F(null),I(null),V(null)},[]);const ee=f.useCallback(async(Y=!1)=>{i(!0),I(null);try{const ne=a?.applications?.[0];if(!ne){I("No Azure AD application configured. Please complete setup first."),i(!1);return}const Z=await(await e("/api/exchange-config/oauth/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authMethod:"device_code",tenantId:ne.tenantId,clientId:ne.appId,apiMethod:"graph_api"})})).json();g(Z),x(!0),!Y&&d&&G()}catch{I("Failed to start authentication")}finally{i(!1)}},[a,d,e,G]),te=f.useCallback(async()=>{try{(await(await e("/api/exchange-config/oauth/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceCode:m.deviceCode,tenantId:a?.applications?.[0]?.tenantId,clientId:a?.applications?.[0]?.appId})})).json()).success&&(x(!1),V("Authentication successful!"),await z(),M?($(!1),g(null),_(je=>je+1)):d&&G())}catch(Y){Y.message?.includes("authorization_pending")||(I("Authentication failed"),x(!1))}},[m,a,e,M,d,G,z]);f.useCallback(async()=>{i(!0),I(null);try{(await e("/api/exchange-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(V("Configuration saved successfully"),await z(),p.authMethod==="device_code"?await ee():G())}catch{I("Failed to save configuration")}finally{i(!1)}},[p,e,z,ee,G]);const Ce=f.useCallback(async Y=>{i(!0),I(null);try{const je=await(await e("/api/exchange-config/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:Y})})).json();F(je),je.success?V("Connection test successful!"):I(je.error||"Connection test failed")}catch{I("Connection test failed")}finally{i(!1)}},[e]);f.useCallback(async Y=>{i(!0);try{await e(`/api/exchange-config/accounts/${Y}/refresh`,{method:"POST"}),V("Token refreshed successfully"),await z()}catch{I("Failed to refresh token")}finally{i(!1)}},[e,z]),f.useCallback(async Y=>{try{await e(`/api/exchange-config/accounts/${Y}/set-default`,{method:"POST"}),await z()}catch{I("Failed to set default account")}},[e,z]),f.useCallback(async Y=>{try{await e(`/api/exchange-config/accounts/${Y}`,{method:"DELETE"}),await z()}catch{I("Failed to delete account")}},[e,z]);const W=f.useCallback(Y=>{navigator.clipboard.writeText(Y).then(()=>{V("Copied to clipboard!"),setTimeout(()=>V(null),EF)}).catch(ne=>{console.error("Failed to copy:",ne),I("Failed to copy to clipboard")})},[]);f.useCallback(Y=>Y?new Date(Y).toLocaleString():"Never",[]),f.useCallback(Y=>{if(!Y)return"Expired";const ne=new Date,Z=new Date(Y)-ne;if(Z<=0)return"Expired";const ye=Math.floor(Z/(1e3*60*60*24)),xe=Math.floor(Z%(1e3*60*60*24)/(1e3*60*60));return ye>0?`${ye} days ${xe} hours`:`${xe} hours`},[]);const Q=f.useCallback(async Y=>{Y&&Y.success&&(V("Azure AD application created successfully!"),await z(),h(!1),Y.application&&V(`Application "${Y.application.displayName}" created successfully! Application ID: ${Y.application.appId}`))},[z]);if(f.useEffect(()=>{z()},[z]),f.useEffect(()=>{let Y;return v&&m&&(Y=setInterval(()=>{te()},(m.interval||5)*IF)),()=>clearInterval(Y)},[v,m,te]),s&&!a)return r.jsx(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #0f0f23 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsx(Vf,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(de,{sx:{p:4,borderRadius:4,boxShadow:6},children:r.jsxs(A,{display:"flex",flexDirection:"column",alignItems:"center",children:[r.jsx(Ue,{size:60,thickness:4}),r.jsx(k,{variant:"h6",sx:{mt:2},children:"Loading Exchange Configuration..."})]})})})});if((a?.isConfigured||a?.applications?.length>0)&&!d)return r.jsxs(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:[r.jsx(PF,{onSetupStart:()=>h(!0),onEdit:Y=>{console.log("Edit item:",Y),Y?.type==="mailbox"?($(!0),ee(!0)):h(!0)}},L),r.jsxs(at,{open:M,onClose:()=>{$(!1),x(!1),g(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ib,{color:"primary"}),r.jsx(k,{variant:"h6",children:"Add User Mailbox"})]})}),r.jsx(ct,{children:m?r.jsxs(r.Fragment,{children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Authenticate the user account that will send emails:"}),r.jsx(vl,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},sx:{mt:2,background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:r.jsxs(Re,{children:[r.jsx(k,{variant:"h2",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",letterSpacing:3},children:m.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(X,{variant:"contained",color:"secondary",startIcon:r.jsx(Ht,{}),onClick:()=>W(m.userCode),sx:{borderRadius:3,textTransform:"none",fontWeight:"bold"},children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body2",gutterBottom:!0,color:"textSecondary",children:"Go to this URL and enter the code:"}),r.jsx(X,{variant:"outlined",startIcon:r.jsx(Sc,{}),href:m.verificationUrl||"https://microsoft.com/devicelogin",target:"_blank",sx:{mt:1,borderRadius:3,textTransform:"none"},children:"microsoft.com/devicelogin"})]}),v&&r.jsx(Ta,{in:v,children:r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for user authentication..."})]})}),r.jsxs(ge,{severity:"info",sx:{mt:3,borderRadius:2},children:[r.jsx(Je,{children:"Important"}),"The user must:",r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ie,{primary:"Sign in with their Exchange account"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ie,{primary:"Accept the Mail.Send permission"})]}),r.jsxs(ue,{children:[r.jsx(Fe,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ie,{primary:"Grant permission to send emails as this user"})]})]})]})]}):r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",py:4,children:r.jsx(Ue,{})})}),r.jsx(Ct,{sx:{p:3},children:r.jsx(X,{onClick:()=>{$(!1),x(!1),g(null)},sx:{borderRadius:2},children:"Cancel"})})]})]});const le=Y=>{switch(Y){case 0:return r.jsx(Ta,{in:!0,children:r.jsxs(A,{children:[r.jsx(A,{textAlign:"center",mb:4,children:r.jsxs(Gt.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[r.jsx(Wo,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:a?.isConfigured?"Reconfigure Exchange Online":"Welcome to Exchange Online Setup"}),r.jsx(k,{variant:"subtitle1",color:"textSecondary",children:"Connect your Microsoft Exchange to enable email functionality"})]})}),a?.isConfigured&&r.jsx(Cl,{in:!0,children:r.jsxs(ge,{severity:"info",sx:{mb:3,borderRadius:2},children:[r.jsx(Je,{children:"Current Configuration"}),"You have an existing configuration. Creating a new app will replace the current one.",r.jsx(X,{size:"small",startIcon:r.jsx(ns,{}),sx:{mt:1,color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},onClick:()=>h(!1),children:"Back to Dashboard"})]})}),r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mt:3,mb:2,fontWeight:"medium"},children:"Choose Your Setup Method:"}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(vl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="automatic"?"2px solid":"1px solid",borderColor:w==="automatic"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="automatic"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("automatic"),children:r.jsxs(Re,{sx:{p:3},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(A,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(Xf,{sx:{fontSize:32,color:"white"}})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"Automatic Setup"}),r.jsx(be,{label:"Recommended",color:"success",size:"small",sx:{mt:.5},icon:r.jsx(Jf,{})})]})]}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Let the wizard automatically create and configure your Azure AD application with all required permissions."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ie,{primary:"One-click setup",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ie,{primary:"Automatic permissions",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ie,{primary:"Admin consent handling",primaryTypographyProps:{variant:"body2"}})]})]})]})})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(vl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="manual"?"2px solid":"1px solid",borderColor:w==="manual"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="manual"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("manual"),children:r.jsxs(Re,{sx:{p:3},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(A,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(Ui,{sx:{fontSize:32,color:"white"}})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"Manual Setup"}),r.jsx(be,{label:"Advanced",color:"info",size:"small",sx:{mt:.5},icon:r.jsx(Xs,{})})]})]}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Manually enter your existing Azure AD application details for complete control."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ie,{primary:"Use existing app",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ie,{primary:"Custom configuration",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ue,{sx:{pl:0},children:[r.jsx(Fe,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ie,{primary:"Full control",primaryTypographyProps:{variant:"body2"}})]})]})]})})})]}),r.jsx(A,{mt:4,display:"flex",justifyContent:"center",children:r.jsxs(X,{variant:"contained",size:"large",onClick:()=>o(1),disabled:!w,startIcon:r.jsx(Eb,{}),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontSize:"1.1rem",fontWeight:"bold",background:w?t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":void 0},children:["Continue with ",w==="automatic"?"Automatic":w==="manual"?"Manual":""," Setup"]})})]})});case 1:return w==="automatic"?r.jsx(kF,{onReset:()=>o(0),children:r.jsx(ny,{onComplete:Q,onBack:J})}):r.jsx(bF,{onComplete:()=>z(),onBack:J});case 2:return r.jsx(yF,{deviceCodeInfo:m,polling:v,onSuccess:()=>{z(),G()}});case 3:return r.jsx(Ta,{in:!0,children:r.jsxs(A,{textAlign:"center",children:[r.jsx(Gt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(Ne,{sx:{fontSize:80,color:"success.main",mb:2}})}),r.jsx(k,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Configuration Complete!"}),r.jsx(k,{variant:"subtitle1",color:"textSecondary",paragraph:!0,children:"Your Exchange Online integration is ready to use."}),r.jsxs(A,{mt:4,children:[r.jsx(X,{variant:"contained",size:"large",onClick:()=>Ce(a?.defaultAccount),disabled:s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(wl,{}),sx:{borderRadius:3,px:4,py:1.5,mr:2,textTransform:"none",background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:"Test Connection"}),r.jsx(X,{variant:"outlined",size:"large",onClick:()=>h(!1),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none"},children:"Go to Dashboard"})]}),P&&r.jsx(Cl,{in:!0,children:r.jsxs(ge,{severity:P.success?"success":"error",sx:{mt:3,borderRadius:2},children:[r.jsx(Je,{children:P.success?"Test Successful":"Test Failed"}),P.message||P.error]})})]})});default:return null}};return r.jsx(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:r.jsx(Vf,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},sx:{maxWidth:1200,mx:"auto",px:3},children:r.jsxs(de,{sx:{p:{xs:3,md:5},borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Wo,{sx:{fontSize:40,color:"primary.main"}}),r.jsx(k,{variant:"h4",fontWeight:"bold",children:"Exchange Online Setup"})]}),n>0&&!(n===1&&(w==="automatic"||w==="manual"))&&r.jsx(X,{variant:"outlined",startIcon:r.jsx(ns,{}),onClick:J,sx:{borderRadius:2,borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.23)":"rgba(0, 0, 0, 0.23)",color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},children:"Back"})]}),(n===0||w!=="automatic")&&r.jsx(Hr,{activeStep:n,sx:{mb:5},children:B.map((Y,ne)=>r.jsx(zn,{children:r.jsx(Gn,{StepIconProps:{sx:{fontSize:28,"&.Mui-completed":{color:"success.main"},"&.Mui-active":{color:"primary.main"}}},children:r.jsx(k,{variant:"body1",fontWeight:n===ne?"bold":"normal",children:Y})})},Y))}),r.jsx(A,{sx:{minHeight:400},children:le(n)}),w!=="automatic"&&r.jsxs(r.Fragment,{children:[r.jsx(Hn,{in:!!T,children:r.jsx(ge,{severity:"error",sx:{mt:3,borderRadius:2},onClose:()=>I(null),children:T})}),r.jsx(Hn,{in:!!R,children:r.jsx(ge,{severity:"success",sx:{mt:3,borderRadius:2},onClose:()=>V(null),children:R})})]})]})})})},MF=({children:e})=>{const{user:t,loading:n}=Vt();return n?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?e:r.jsx(up,{to:"/login",replace:!0})},No=240,Bo=65,RF=({darkMode:e,toggleDarkMode:t})=>{const[n,o]=f.useState(!0),{user:s}=Vt(),i=Gb(),a=Ic(),l=$t(),u=[{path:"/dashboard",name:"Dashboard",icon:r.jsx(ep,{})},{path:"/analytics",name:"Analytics",icon:r.jsx(Tb,{})},{path:"/devices",name:"Devices",icon:r.jsx(Bf,{})},{path:"/queue",name:"Queue",icon:r.jsx(po,{})},{path:"/logs",name:"Logs",icon:r.jsx(Ab,{})},{path:"/security",name:"Security",icon:r.jsx(zi,{})},{path:"/ip-whitelist",name:"IP Whitelist",icon:r.jsx(Qf,{})},{path:"/sessions",name:"Sessions",icon:r.jsx(mo,{})},...s?.role==="admin"?[{path:"/users",name:"User Management",icon:r.jsx(Mb,{})}]:[],{path:"/exchange-setup",name:"Exchange Setup",icon:r.jsx(bc,{})},{path:"/settings",name:"Settings",icon:r.jsx(Ui,{})}],c=()=>{o(!n)},d=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(h){console.error("Logout error:",h)}sessionStorage.clear(),a("/login")};return r.jsxs(A,{sx:{display:"flex"},children:[r.jsx(lp,{}),r.jsx(Rb,{position:"fixed",sx:{width:`calc(100% - ${n?No:Bo}px)`,ml:`${n?No:Bo}px`,transition:l.transitions.create(["width","margin"],{easing:l.transitions.easing.sharp,duration:l.transitions.duration.leavingScreen})},children:r.jsxs(Db,{children:[r.jsx(Pe,{color:"inherit","aria-label":"toggle drawer",onClick:c,edge:"start",sx:{mr:2},children:n?r.jsx(Fb,{}):r.jsx(Ob,{})}),r.jsx(k,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:u.find(h=>h.path===i.pathname)?.name||"SMTP Relay"}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(be,{icon:r.jsx(sp,{sx:{fontSize:12}}),label:"Connected",color:"success",size:"small",sx:{"& .MuiChip-icon":{animation:"pulse 2s infinite","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.3},"100%":{opacity:1}}}}}),r.jsx(k,{variant:"body2",sx:{display:{xs:"none",md:"block"}},children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),r.jsx(yt,{title:"Toggle theme",children:r.jsx(Pe,{onClick:t,color:"inherit",children:e?r.jsx(_b,{}):r.jsx(Lb,{})})}),r.jsx(jn,{sx:{bgcolor:"secondary.main",width:32,height:32},children:"A"})]})]})}),r.jsxs($b,{sx:{width:n?No:Bo,flexShrink:0,"& .MuiDrawer-paper":{width:n?No:Bo,boxSizing:"border-box",transition:l.transitions.create("width",{easing:l.transitions.easing.sharp,duration:l.transitions.duration.enteringScreen}),overflowX:"hidden"}},variant:"permanent",anchor:"left",children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:n?"flex-start":"center",p:2,minHeight:64},children:[r.jsx(po,{sx:{fontSize:32,color:"primary.main",mr:n?1:0}}),n&&r.jsx(k,{variant:"h6",sx:{fontWeight:"bold"},children:"SMTP Relay"})]}),r.jsx(St,{}),r.jsx(ot,{sx:{flexGrow:1},children:u.map(h=>r.jsx(ue,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Aa,{component:qu,to:h.path,selected:i.pathname===h.path,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected","&:hover":{backgroundColor:"action.hover"}}},children:[r.jsx(yt,{title:n?"":h.name,placement:"right",children:r.jsx(Fe,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:i.pathname===h.path?"primary.main":"inherit"},children:h.icon})}),n&&r.jsx(ie,{primary:h.name,primaryTypographyProps:{fontSize:14,fontWeight:i.pathname===h.path?"medium":"regular"}})]})},h.path))}),r.jsx(St,{}),r.jsxs(ot,{children:[r.jsx(ue,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Aa,{component:qu,to:"/profile",selected:i.pathname==="/profile",sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected"}},children:[r.jsx(yt,{title:n?"":"Profile",placement:"right",children:r.jsx(Fe,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center"},children:r.jsx(jc,{})})}),n&&r.jsx(ie,{primary:"Profile",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})}),r.jsx(ue,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Aa,{onClick:d,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,color:"error.main","&:hover":{backgroundColor:h=>(h.palette.mode==="dark","rgba(244, 67, 54, 0.08)")}},children:[r.jsx(yt,{title:n?"":"Logout",placement:"right",children:r.jsx(Fe,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:"error.main"},children:r.jsx(rp,{})})}),n&&r.jsx(ie,{primary:"Logout",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})})]})]}),r.jsx(A,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",p:3,width:`calc(100% - ${n?No:Bo}px)`,minHeight:"100vh",mt:8},children:r.jsx(Ub,{})})]})},DF=new oC({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});function FF(){const e=f.useRef(),[t,n]=f.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!0}),o=f.useMemo(()=>Vb({palette:{mode:t?"dark":"light",primary:{main:"#667eea",light:"#8b9cff",dark:"#4c63b6"},secondary:{main:"#764ba2",light:"#a374cc",dark:"#542f75"},success:{main:"#84fab0",light:"#b4ffd4",dark:"#52c77e"},error:{main:"#f5576c",light:"#ff8a95",dark:"#c62641"},background:{default:t?"#0f0f23":"#f5f5f5",paper:t?"#1a1a2e":"#ffffff"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700,fontSize:"2.5rem"},h2:{fontWeight:600,fontSize:"2rem"},h3:{fontWeight:600,fontSize:"1.75rem"},h4:{fontWeight:600,fontSize:"1.5rem"},h5:{fontWeight:500,fontSize:"1.25rem"},h6:{fontWeight:500,fontSize:"1rem"},button:{textTransform:"none",fontWeight:500}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 16px",fontSize:"0.875rem"},contained:{boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"}}}},MuiCard:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none",border:t?"1px solid rgba(255,255,255,0.1)":"none",boxShadow:t?"0 8px 32px rgba(0,0,0,0.4)":"0 2px 8px rgba(0,0,0,0.1)"}}},MuiPaper:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none"}}}}}),[t]),s=()=>{n(i=>{const a=!i;return localStorage.setItem("darkMode",JSON.stringify(a)),a})};return r.jsx(cC,{client:DF,children:r.jsxs(Nb,{theme:o,children:[r.jsx(lp,{}),r.jsx($v,{ref:e,maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:4e3,TransitionComponent:Gt.div,action:i=>r.jsx(Pe,{size:"small",color:"inherit",onClick:()=>e.current.closeSnackbar(i),children:r.jsx(lv,{fontSize:"small"})}),children:r.jsx(Wb,{children:r.jsx(IS,{children:r.jsx(S1,{children:r.jsx(Zm,{mode:"wait",children:r.jsxs(qb,{children:[r.jsx(Dt,{path:"/login",element:r.jsx(TS,{})}),r.jsxs(Dt,{path:"/",element:r.jsx(MF,{children:r.jsx(RF,{darkMode:t,toggleDarkMode:s})}),children:[r.jsx(Dt,{index:!0,element:r.jsx(up,{to:"/dashboard",replace:!0})}),r.jsx(Dt,{path:"dashboard",element:r.jsx(P1,{})}),r.jsx(Dt,{path:"devices",element:r.jsx(cD,{})}),r.jsx(Dt,{path:"queue",element:r.jsx(uD,{})}),r.jsx(Dt,{path:"logs",element:r.jsx(eF,{})}),r.jsx(Dt,{path:"security",element:r.jsx(fD,{})}),r.jsx(Dt,{path:"settings",element:r.jsx(ZD,{})}),r.jsx(Dt,{path:"ip-whitelist",element:r.jsx(tF,{})}),r.jsx(Dt,{path:"sessions",element:r.jsx(nF,{})}),r.jsx(Dt,{path:"analytics",element:r.jsx(oF,{})}),r.jsx(Dt,{path:"users",element:r.jsx(sF,{})}),r.jsx(Dt,{path:"profile",element:r.jsx(xF,{})}),r.jsx(Dt,{path:"exchange-setup",element:r.jsx(AF,{})})]})]})})})})})}),!1]})})}document.querySelector(".loader")?.classList.remove("active");rv.createRoot(document.getElementById("root")).render(r.jsx(Le.StrictMode,{children:r.jsx(FF,{})}));
//# sourceMappingURL=index-EKL6sLsa.js.map
