import{u as oy,r as sy,a as iy,_ as j,b as Bi,j as r,D as lt,d as ct,e as ut,B as M,T as A,f as Hi,g as _t,S as pc,F as es,A as xe,h as Re,C as We,i as Ct,k as Y,l as ze,m as ay,I as Tr,E as ly,n as Pe,V as mc,o as gc,L as cy,p as hn,q as Nf,s as St,t as it,R as gn,v as we,W as Tn,G as Q,w as mo,x as Vf,y as Bf,z as Fn,H as fe,J as Qt,K as Oe,M as Ne,N as xn,O as Qn,Q as hr,U as It,X as Ee,Y as kt,c as $e,Z as le,$ as Br,a0 as zi,a1 as An,a2 as mt,a3 as Xe,a4 as Hf,a5 as zf,a6 as Cl,a7 as xc,a8 as Yt,a9 as Uf,aa as Gf,ab as he,ac as uy,ad as dy,ae as Ui,af as pn,ag as Ye,ah as oe,ai as De,aj as se,ak as hy,al as fy,am as Wf,an as py,ao as my,ap as $u,aq as ts,ar as qf,as as gy,at as vt,au as jn,av as gt,aw as dt,ax as fr,P as G,ay as xy,az as ir,aA as Kf,aB as Kt,aC as no,aD as yy,aE as by,aF as wl,aG as vy,aH as yc,aI as Ze,aJ as an,aK as Ar,aL as Nu,aM as Vn,aN as jl,aO as Cy,aP as Vu,aQ as wy,aR as Bu,aS as Hu,aT as fi,aU as rr,aV as Sn,aW as jy,aX as Sy,aY as Py,aZ as ky,a_ as Iy,a$ as Bt,b0 as Ey,b1 as Ty,b2 as Ay,b3 as My,b4 as bc,b5 as uo,b6 as Ry,b7 as Dy,b8 as Fy,b9 as vc,ba as ar,bb as Oy,bc as go,bd as ho,be as Ly,bf as _y,bg as $y,bh as Sa,bi as Ny,bj as Vy,bk as By,bl as Hy,bm as fs,bn as zy,bo as ns,bp as zu,bq as Uu,br as Uy,bs as Gy,bt as Wy,bu as qy,bv as ot,bw as ce,bx as Qf,by as un,bz as Mr,bA as Ys,bB as Ky,bC as Qy,bD as Xf,bE as Pa,bF as ka,bG as Hr,bH as zn,bI as Un,bJ as Ia,bK as Xy,bL as Yy,bM as Gi,bN as Pn,bO as or,bP as Jy,bQ as pi,bR as Sl,bS as Ea,bT as Zy,bU as ps,bV as ms,bW as gs,bX as Mn,bY as ue,bZ as xs,b_ as Yf,b$ as qo,c0 as eb,c1 as tb,c2 as nb,c3 as rb,c4 as Jf,c5 as Zf,c6 as ob,c7 as ep,c8 as sb,c9 as ib,ca as ab,cb as lb,cc as cb,cd as ub,ce as db,cf as hb,cg as Cc,ch as wc,ci as fb,cj as pb,ck as Pl,cl as tp,cm as mb,cn as gb,co as xb,cp as rs,cq as jc,cr as np,cs as yb,ct as bb,cu as vb,cv as Ta,cw as Gu,cx as Cb,cy as Wu,cz as wb,cA as jb,cB as Aa,cC as Sb,cD as Pb,cE as kb,cF as Ib,cG as Eb,cH as Tb,cI as rp,cJ as Ab,cK as Mb,cL as Rb,cM as Db,cN as Fb,cO as Ob,cP as Lb,cQ as Ma,cR as _b,cS as $b}from"./mui-vendor-CcZoiDwo.js";import{h as Nb,g as Sc,b as Vb,c as Le,a as f,e as Pc,d as Bb,u as kc,r as op,N as sp,i as Hb,L as qu,O as zb,B as Ub,j as Gb,k as $t}from"./react-vendor-QNX_tP7X.js";import{R as Wb,A as qb,C as Kb,X as Qb,Y as Xb,T as Yb,L as Jb,a as Os}from"./chart-vendor-CSyUymgs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ls={},Ku;function Zb(){if(Ku)return Ls;Ku=1;var e=Nb();return Ls.createRoot=e.createRoot,Ls.hydrateRoot=e.hydrateRoot,Ls}var ev=Zb();const tv=Sc(ev);var Ao={},Ra={};const nv=Vb(oy);var Qu;function rv(){return Qu||(Qu=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=nv}(Ra)),Ra}var Xu;function ov(){if(Xu)return Ao;Xu=1;var e=sy();Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var t=e(rv()),n=iy();return Ao.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ao}var sv=ov();const iv=Sc(sv);function ip(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ip(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function zr(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=ip(e))&&(o&&(o+=" "),o+=t);return o}let av={data:""},lv=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||av,cv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,uv=/\/\*[^]*?\*\/|  +/g,Yu=/\n+/g,Pr=(e,t)=>{let n="",o="",s="";for(let i in e){let a=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":o+=i[1]=="f"?Pr(a,i):i+"{"+Pr(a,i[1]=="k"?"":t)+"}":typeof a=="object"?o+=Pr(a,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Pr.p?Pr.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+o},Ln={},ap=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+ap(e[n]);return t}return e},dv=(e,t,n,o,s)=>{let i=ap(e),a=Ln[i]||(Ln[i]=(u=>{let c=0,d=11;for(;c<u.length;)d=101*d+u.charCodeAt(c++)>>>0;return"go"+d})(i));if(!Ln[a]){let u=i!==e?e:(c=>{let d,h,p=[{}];for(;d=cv.exec(c.replace(uv,""));)d[4]?p.shift():d[3]?(h=d[3].replace(Yu," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][d[1]]=d[2].replace(Yu," ").trim();return p[0]})(e);Ln[a]=Pr(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let l=n&&Ln.g?Ln.g:null;return n&&(Ln.g=Ln[a]),((u,c,d,h)=>{h?c.data=c.data.replace(h,u):c.data.indexOf(u)===-1&&(c.data=d?u+c.data:c.data+u)})(Ln[a],t,o,l),a},hv=(e,t,n)=>e.reduce((o,s,i)=>{let a=t[i];if(a&&a.call){let l=a(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=u?"."+u:l&&typeof l=="object"?l.props?"":Pr(l,""):l===!1?"":l}return o+s+(a??"")},"");function Ic(e){let t=this||{},n=e.call?e(t.p):e;return dv(n.unshift?n.raw?hv(n,[].slice.call(arguments,1),t.p):n.reduce((o,s)=>Object.assign(o,s&&s.call?s(t.p):s),{}):n,lv(t.target),t.g,t.o,t.k)}Ic.bind({g:1});Ic.bind({k:1});function fv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lp(e,t,n){return t&&fv(e.prototype,t),e}function Qe(){return Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qe.apply(this,arguments)}function cp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ys(e,t){if(e==null)return{};var n={},o=Object.keys(e),s,i;for(i=0;i<o.length;i++)s=o[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ju(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Zu=function(){return""},up=Le.createContext({enqueueSnackbar:Zu,closeSnackbar:Zu}),Cr={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ed=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Ec=function(t){return""+ed(t.vertical)+ed(t.horizontal)},_s=function(t){return!!t||t===0},$s="unmounted",Kr="exited",Qr="entering",Mo="entered",td="exiting",Tc=function(e){cp(t,e);function t(o){var s;s=e.call(this,o)||this;var i=o.appear,a;return s.appearStatus=null,o.in?i?(a=Kr,s.appearStatus=Qr):a=Mo:o.unmountOnExit||o.mountOnEnter?a=$s:a=Kr,s.state={status:a},s.nextCallback=null,s}t.getDerivedStateFromProps=function(s,i){var a=s.in;return a&&i.status===$s?{status:Kr}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Qr&&a!==Mo&&(i=Qr):(a===Qr||a===Mo)&&(i=td)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i=s,a=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(a=s.exit,i=s.enter),{exit:a,enter:i}},n.updateStatus=function(s,i){s===void 0&&(s=!1),i!==null?(this.cancelNextCallback(),i===Qr?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===Kr&&this.setState({status:$s})},n.performEnter=function(s){var i=this,a=this.props.enter,l=s,u=this.getTimeouts();if(!s&&!a){this.safeSetState({status:Mo},function(){i.props.onEntered&&i.props.onEntered(i.node,l)});return}this.props.onEnter&&this.props.onEnter(this.node,l),this.safeSetState({status:Qr},function(){i.props.onEntering&&i.props.onEntering(i.node,l),i.onTransitionEnd(u.enter,function(){i.safeSetState({status:Mo},function(){i.props.onEntered&&i.props.onEntered(i.node,l)})})})},n.performExit=function(){var s=this,i=this.props.exit,a=this.getTimeouts();if(!i){this.safeSetState({status:Kr},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:td},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Kr},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,a=!0;return this.nextCallback=function(){a&&(a=!1,i.nextCallback=null,s())},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var a=s==null&&!this.props.addEndListener;if(!this.node||a){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===$s)return null;var i=this.props,a=i.children,l=ys(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return a(s,l)},lp(t,[{key:"node",get:function(){var s,i=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!i)throw new Error("notistack - Custom snackbar is not refForwarding");return i}}]),t}(Le.Component);function Xr(){}Tc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xr,onEntering:Xr,onEntered:Xr,onExit:Xr,onExiting:Xr,onExited:Xr};function nd(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function kl(e,t){return f.useMemo(function(){return e==null&&t==null?null:function(n){nd(e,n),nd(t,n)}},[e,t])}function mi(e){var t=e.timeout,n=e.style,o=n===void 0?{}:n,s=e.mode;return{duration:typeof t=="object"?t[s]||0:t,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var Il={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dp=function(t){t.scrollTop=t.scrollTop},rd=function(t){return Math.round(t)+"ms"};function ro(e,t){e===void 0&&(e=["all"]);var n=t||{},o=n.duration,s=o===void 0?300:o,i=n.easing,a=i===void 0?Il.easeInOut:i,l=n.delay,u=l===void 0?0:l,c=Array.isArray(e)?e:[e];return c.map(function(d){var h=typeof s=="string"?s:rd(s),p=typeof u=="string"?u:rd(u);return d+" "+h+" "+a+" "+p}).join(",")}function pv(e){return e&&e.ownerDocument||document}function hp(e){var t=pv(e);return t.defaultView||window}function mv(e,t){t===void 0&&(t=166);var n;function o(){for(var s=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=function(){e.apply(s,a)};clearTimeout(n),n=setTimeout(u,t)}return o.clear=function(){clearTimeout(n)},o}function gv(e,t){var n=t.getBoundingClientRect(),o=hp(t),s;if(t.fakeTransform)s=t.fakeTransform;else{var i=o.getComputedStyle(t);s=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var a=0,l=0;if(s&&s!=="none"&&typeof s=="string"){var u=s.split("(")[1].split(")")[0].split(",");a=parseInt(u[4],10),l=parseInt(u[5],10)}switch(e){case"left":return"translateX("+(o.innerWidth+a-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-a)+"px)";case"up":return"translateY("+(o.innerHeight+l-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-l)+"px)"}}function Ns(e,t){if(t){var n=gv(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var fp=f.forwardRef(function(e,t){var n=e.children,o=e.direction,s=o===void 0?"down":o,i=e.in,a=e.style,l=e.timeout,u=l===void 0?0:l,c=e.onEnter,d=e.onEntered,h=e.onExit,p=e.onExited,x=ys(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),m=f.useRef(null),g=kl(n.ref,m),b=kl(g,t),y=function(I,D){Ns(s,I),dp(I),c&&c(I,D)},v=function(I){var D=a?.transitionTimingFunction||Il.easeOut,V=mi({timeout:u,mode:"enter",style:Qe({},a,{transitionTimingFunction:D})});I.style.webkitTransition=ro("-webkit-transform",V),I.style.transition=ro("transform",V),I.style.webkitTransform="none",I.style.transform="none"},C=function(I){var D=a?.transitionTimingFunction||Il.sharp,V=mi({timeout:u,mode:"exit",style:Qe({},a,{transitionTimingFunction:D})});I.style.webkitTransition=ro("-webkit-transform",V),I.style.transition=ro("transform",V),Ns(s,I),h&&h(I)},k=function(I){I.style.webkitTransition="",I.style.transition="",p&&p(I)},F=f.useCallback(function(){m.current&&Ns(s,m.current)},[s]);return f.useEffect(function(){if(!(i||s==="down"||s==="right")){var T=mv(function(){m.current&&Ns(s,m.current)}),I=hp(m.current);return I.addEventListener("resize",T),function(){T.clear(),I.removeEventListener("resize",T)}}},[s,i]),f.useEffect(function(){i||F()},[i,F]),f.createElement(Tc,Object.assign({appear:!0,nodeRef:m,onEnter:y,onEntered:d,onEntering:v,onExit:C,onExited:k,in:i,timeout:u},x),function(T,I){return f.cloneElement(n,Qe({ref:b,style:Qe({visibility:T==="exited"&&!i?"hidden":void 0},a,{},n.props.style)},I))})});fp.displayName="Slide";var Wi=function(t){return Le.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},xv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},yv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},bv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},vv=function(){return Le.createElement(Wi,null,Le.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Cv={default:void 0,success:Le.createElement(xv,null),warning:Le.createElement(yv,null),error:Le.createElement(bv,null),info:Le.createElement(vv,null)},Rr={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Cv,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:fp,transitionDuration:{enter:225,exit:195}},wv=function(t,n){var o=function(i){return typeof i=="number"||i===null};return o(t)?t:o(n)?n:Rr.autoHideDuration},jv=function(t,n){var o=function(i,a){return a.some(function(l){return typeof i===l})};return o(t,["string","number"])?t:o(t,["object"])?Qe({},Rr.transitionDuration,{},o(n,["object"])&&n,{},t):o(n,["string","number"])?n:o(n,["object"])?Qe({},Rr.transitionDuration,{},n):Rr.transitionDuration},Sv=function(t,n){return function(o,s){return s===void 0&&(s=!1),s?Qe({},Rr[o],{},n[o],{},t[o]):o==="autoHideDuration"?wv(t.autoHideDuration,n.autoHideDuration):o==="transitionDuration"?jv(t.transitionDuration,n.transitionDuration):t[o]||n[o]||Rr[o]}};function bs(e){return Object.entries(e).reduce(function(t,n){var o,s=n[0],i=n[1];return Qe({},t,(o={},o[s]=Ic(i),o))},{})}var xo={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},od=bs({root:{height:0},entered:{height:"auto"}}),Da="0px",Fa=175,pp=f.forwardRef(function(e,t){var n=e.children,o=e.in,s=e.onExited,i=f.useRef(null),a=f.useRef(null),l=kl(t,a),u=function(){return i.current?i.current.clientHeight:0},c=function(g){g.style.height=Da},d=function(g){var b=u(),y=mi({timeout:Fa,mode:"enter"}),v=y.duration,C=y.easing;g.style.transitionDuration=typeof v=="string"?v:v+"ms",g.style.height=b+"px",g.style.transitionTimingFunction=C||""},h=function(g){g.style.height="auto"},p=function(g){g.style.height=u()+"px"},x=function(g){dp(g);var b=mi({timeout:Fa,mode:"exit"}),y=b.duration,v=b.easing;g.style.transitionDuration=typeof y=="string"?y:y+"ms",g.style.height=Da,g.style.transitionTimingFunction=v||""};return f.createElement(Tc,{in:o,unmountOnExit:!0,onEnter:c,onEntered:h,onEntering:d,onExit:p,onExited:s,onExiting:x,nodeRef:a,timeout:Fa},function(m,g){return f.createElement("div",Object.assign({ref:l,className:zr(od.root,m==="entered"&&od.entered),style:Qe({pointerEvents:"all",overflow:"hidden",minHeight:Da,transition:ro("height")},m==="entered"&&{overflow:"visible"},{},m==="exited"&&!o&&{visibility:"hidden"})},g),f.createElement("div",{ref:i,className:xo.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});pp.displayName="Collapse";var sd={right:"left",left:"right",bottom:"up",top:"down"},Pv=function(t){return t.horizontal!=="center"?sd[t.horizontal]:sd[t.vertical]},kv=function(t){return"anchorOrigin"+Ec(t)},Iv=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(o){return!n[o]}).reduce(function(o,s){var i;return Qe({},o,(i={},i[s]=t[s],i))},{})},Ev=function(){};function Ko(e,t){return e.reduce(function(n,o){return o==null?n:function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=[].concat(a);t&&u.indexOf(t)===-1&&u.push(t),n.apply(this,u),o.apply(this,u)}},Ev)}var Tv=typeof window<"u"?f.useLayoutEffect:f.useEffect;function id(e){var t=f.useRef(e);return Tv(function(){t.current=e}),f.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var mp=f.forwardRef(function(e,t){var n=e.children,o=e.className,s=e.autoHideDuration,i=e.disableWindowBlurListener,a=i===void 0?!1:i,l=e.onClose,u=e.id,c=e.open,d=e.SnackbarProps,h=d===void 0?{}:d,p=f.useRef(),x=id(function(){l&&l.apply(void 0,arguments)}),m=id(function(C){!l||C==null||(p.current&&clearTimeout(p.current),p.current=setTimeout(function(){x(null,"timeout",u)},C))});f.useEffect(function(){return c&&m(s),function(){p.current&&clearTimeout(p.current)}},[c,s,m]);var g=function(){p.current&&clearTimeout(p.current)},b=f.useCallback(function(){s!=null&&m(s*.5)},[s,m]),y=function(k){h.onMouseEnter&&h.onMouseEnter(k),g()},v=function(k){h.onMouseLeave&&h.onMouseLeave(k),b()};return f.useEffect(function(){if(!a&&c)return window.addEventListener("focus",b),window.addEventListener("blur",g),function(){window.removeEventListener("focus",b),window.removeEventListener("blur",g)}},[a,b,c]),f.createElement("div",Object.assign({ref:t},h,{className:zr(xo.Snackbar,o),onMouseEnter:y,onMouseLeave:v}),n)});mp.displayName="Snackbar";var Oa,Av=bs({root:(Oa={display:"flex",flexWrap:"wrap",flexGrow:1},Oa[Cr.upSm]={flexGrow:"initial",minWidth:"288px"},Oa)}),gp=f.forwardRef(function(e,t){var n=e.className,o=ys(e,["className"]);return Le.createElement("div",Object.assign({ref:t,className:zr(Av.root,n)},o))});gp.displayName="SnackbarContent";var Ro=bs({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ad="notistack-snackbar",xp=f.forwardRef(function(e,t){var n=e.id,o=e.message,s=e.action,i=e.iconVariant,a=e.variant,l=e.hideIconVariant,u=e.style,c=e.className,d=i[a],h=s;return typeof h=="function"&&(h=h(n)),Le.createElement(gp,{ref:t,role:"alert","aria-describedby":ad,style:u,className:zr(xo.MuiContent,xo.MuiContentVariant(a),Ro.root,Ro[a],c,!l&&d&&Ro.lessPadding)},Le.createElement("div",{id:ad,className:Ro.message},l?null:d,o),h&&Le.createElement("div",{className:Ro.action},h))});xp.displayName="MaterialDesignContent";var Mv=f.memo(xp),Rv=bs({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),Dv=function(t){var n=f.useRef(),o=f.useState(!0),s=o[0],i=o[1],a=Ko([t.snack.onClose,t.onClose]),l=function(){t.snack.requestClose&&a(null,"instructed",t.snack.id)},u=f.useCallback(function(){n.current=setTimeout(function(){i(function(V){return!V})},125)},[]);f.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var c=t.snack,d=t.classes,h=t.Component,p=h===void 0?Mv:h,x=f.useMemo(function(){return Iv(d)},[d]),m=c.open,g=c.SnackbarProps,b=c.TransitionComponent,y=c.TransitionProps,v=c.transitionDuration,C=c.disableWindowBlurListener,k=c.content,F=ys(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=Qe({direction:Pv(F.anchorOrigin),timeout:v},y),I=k;typeof I=="function"&&(I=I(F.id,F.message));var D=["onEnter","onEntered","onExit","onExited"].reduce(function(V,O){var S;return Qe({},V,(S={},S[O]=Ko([t.snack[O],t[O]],F.id),S))},{});return Le.createElement(pp,{in:s,onExited:D.onExited},Le.createElement(mp,{open:m,id:F.id,disableWindowBlurListener:C,autoHideDuration:F.autoHideDuration,className:zr(Rv.wrappedRoot,x.root,x[kv(F.anchorOrigin)]),SnackbarProps:g,onClose:a},Le.createElement(b,Object.assign({},T,{appear:!0,in:m,onExit:D.onExit,onExited:u,onEnter:D.onEnter,onEntered:Ko([D.onEntered,l],F.id)}),I||Le.createElement(p,Object.assign({},F)))))},Do,La,Vs,Bs,_a,_n={view:{default:20},snackbar:{default:6,dense:2}},ld="."+xo.CollapseWrapper,$a=16,Hs=bs({root:(Do={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:ro(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Do[ld]={padding:_n.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Do.maxWidth="calc(100% - "+_n.view.default*2+"px)",Do[Cr.downXs]={width:"100%",maxWidth:"calc(100% - "+$a*2+"px)"},Do),rootDense:(La={},La[ld]={padding:_n.snackbar.dense+"px 0px"},La),top:{top:_n.view.default-_n.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:_n.view.default-_n.snackbar.default+"px",flexDirection:"column-reverse"},left:(Vs={left:_n.view.default+"px"},Vs[Cr.upSm]={alignItems:"flex-start"},Vs[Cr.downXs]={left:$a+"px"},Vs),right:(Bs={right:_n.view.default+"px"},Bs[Cr.upSm]={alignItems:"flex-end"},Bs[Cr.downXs]={right:$a+"px"},Bs),center:(_a={left:"50%",transform:"translateX(-50%)"},_a[Cr.upSm]={alignItems:"center"},_a)}),Fv=function(t){var n=t.classes,o=n===void 0?{}:n,s=t.anchorOrigin,i=t.dense,a=t.children,l=zr(xo.SnackbarContainer,Hs[s.vertical],Hs[s.horizontal],Hs.root,o.containerRoot,o["containerAnchorOrigin"+Ec(s)],i&&Hs.rootDense);return Le.createElement("div",{className:l},a)},Ov=f.memo(Fv),cd=function(t){var n=typeof t=="string"||f.isValidElement(t);return!n},Lv=function(e){cp(t,e);function t(o){var s;return s=e.call(this,o)||this,s.enqueueSnackbar=function(i,a){if(a===void 0&&(a={}),i==null)throw new Error("enqueueSnackbar called with invalid argument");var l=cd(i)?i:a,u=cd(i)?i.message:i,c=l.key,d=l.preventDuplicate,h=ys(l,["key","preventDuplicate"]),p=_s(c),x=p?c:new Date().getTime()+Math.random(),m=Sv(h,s.props),g=Qe({id:x},h,{message:u,open:!0,entered:!1,requestClose:!1,persist:m("persist"),action:m("action"),content:m("content"),variant:m("variant"),anchorOrigin:m("anchorOrigin"),disableWindowBlurListener:m("disableWindowBlurListener"),autoHideDuration:m("autoHideDuration"),hideIconVariant:m("hideIconVariant"),TransitionComponent:m("TransitionComponent"),transitionDuration:m("transitionDuration"),TransitionProps:m("TransitionProps",!0),iconVariant:m("iconVariant",!0),style:m("style",!0),SnackbarProps:m("SnackbarProps",!0),className:zr(s.props.className,h.className)});return g.persist&&(g.autoHideDuration=void 0),s.setState(function(b){if(d===void 0&&s.props.preventDuplicate||d){var y=function(F){return p?F.id===x:F.message===u},v=b.queue.findIndex(y)>-1,C=b.snacks.findIndex(y)>-1;if(v||C)return b}return s.handleDisplaySnack(Qe({},b,{queue:[].concat(b.queue,[g])}))}),x},s.handleDisplaySnack=function(i){var a=i.snacks;return a.length>=s.maxSnack?s.handleDismissOldest(i):s.processQueue(i)},s.processQueue=function(i){var a=i.queue,l=i.snacks;return a.length>0?Qe({},i,{snacks:[].concat(l,[a[0]]),queue:a.slice(1,a.length)}):i},s.handleDismissOldest=function(i){if(i.snacks.some(function(d){return!d.open||d.requestClose}))return i;var a=!1,l=!1,u=i.snacks.reduce(function(d,h){return d+(h.open&&h.persist?1:0)},0);u===s.maxSnack&&(l=!0);var c=i.snacks.map(function(d){return!a&&(!d.persist||l)?(a=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),s.props.onClose&&s.props.onClose(null,"maxsnack",d.id),Qe({},d,{open:!1})):Qe({},d,{requestClose:!0})):Qe({},d)});return Qe({},i,{snacks:c})},s.handleEnteredSnack=function(i,a,l){if(!_s(l))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(u){var c=u.snacks;return{snacks:c.map(function(d){return d.id===l?Qe({},d,{entered:!0}):Qe({},d)})}})},s.handleCloseSnack=function(i,a,l){s.props.onClose&&s.props.onClose(i,a,l);var u=l===void 0;s.setState(function(c){var d=c.snacks,h=c.queue;return{snacks:d.map(function(p){return!u&&p.id!==l?Qe({},p):p.entered?Qe({},p,{open:!1}):Qe({},p,{requestClose:!0})}),queue:h.filter(function(p){return p.id!==l})}})},s.closeSnackbar=function(i){var a=s.state.snacks.find(function(l){return l.id===i});_s(i)&&a&&a.onClose&&a.onClose(null,"instructed",i),s.handleCloseSnack(null,"instructed",i)},s.handleExitedSnack=function(i,a){if(!_s(a))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(l){var u=s.processQueue(Qe({},l,{snacks:l.snacks.filter(function(c){return c.id!==a})}));return u.queue.length===0?u:s.handleDismissOldest(u)})},s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(Ju(s)),closeSnackbar:s.closeSnackbar.bind(Ju(s))}},s}var n=t.prototype;return n.render=function(){var s=this,i=this.state.contextValue,a=this.props,l=a.domRoot,u=a.children,c=a.dense,d=c===void 0?!1:c,h=a.Components,p=h===void 0?{}:h,x=a.classes,m=this.state.snacks.reduce(function(b,y){var v,C=Ec(y.anchorOrigin),k=b[C]||[];return Qe({},b,(v={},v[C]=[].concat(k,[y]),v))},{}),g=Object.keys(m).map(function(b){var y=m[b],v=y[0];return Le.createElement(Ov,{key:b,dense:d,anchorOrigin:v.anchorOrigin,classes:x},y.map(function(C){return Le.createElement(Dv,{key:C.id,snack:C,classes:x,Component:p[C.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:Ko([s.handleExitedSnack,s.props.onExited],C.id),onEntered:Ko([s.handleEnteredSnack,s.props.onEntered],C.id)})}))});return Le.createElement(up.Provider,{value:i},u,l?Pc.createPortal(g,l):g)},lp(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||Rr.maxSnack}}]),t}(f.Component),Jt=function(){return f.useContext(up)},qi=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(o){var s=this,i=o||function(){};return this.listeners.push(i),this.onSubscribe(),function(){s.listeners=s.listeners.filter(function(a){return a!==i}),s.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),yp=typeof window>"u";function Dt(){}function _v(e,t){return typeof e=="function"?e(t):e}function $v(e){return typeof e=="number"&&e>=0&&e!==1/0}function gi(e){return Array.isArray(e)?e:[e]}function Nv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Na(e,t,n){return Ki(e)?typeof t=="function"?j({},n,{queryKey:e,queryFn:t}):j({},t,{queryKey:e}):e}function Zn(e,t,n){return Ki(e)?[j({},t,{queryKey:e}),n]:[e||{},t]}function Vv(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function ud(e,t){var n=e.active,o=e.exact,s=e.fetching,i=e.inactive,a=e.predicate,l=e.queryKey,u=e.stale;if(Ki(l)){if(o){if(t.queryHash!==Ac(l,t.options))return!1}else if(!xi(t.queryKey,l))return!1}var c=Vv(n,i);if(c==="none")return!1;if(c!=="all"){var d=t.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||typeof s=="boolean"&&t.isFetching()!==s||a&&!a(t))}function dd(e,t){var n=e.exact,o=e.fetching,s=e.predicate,i=e.mutationKey;if(Ki(i)){if(!t.options.mutationKey)return!1;if(n){if(kr(t.options.mutationKey)!==kr(i))return!1}else if(!xi(t.options.mutationKey,i))return!1}return!(typeof o=="boolean"&&t.state.status==="loading"!==o||s&&!s(t))}function Ac(e,t){var n=t?.queryKeyHashFn||kr;return n(e)}function kr(e){var t=gi(e);return Bv(t)}function Bv(e){return JSON.stringify(e,function(t,n){return El(n)?Object.keys(n).sort().reduce(function(o,s){return o[s]=n[s],o},{}):n})}function xi(e,t){return bp(gi(e),gi(t))}function bp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!bp(e[n],t[n])}):!1}function vp(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||El(e)&&El(t)){for(var o=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{},l=0,u=0;u<i;u++){var c=n?u:s[u];a[c]=vp(e[c],t[c]),a[c]===e[c]&&l++}return o===i&&l===o?e:a}return t}function El(e){if(!hd(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!hd(n)||!n.hasOwnProperty("isPrototypeOf"))}function hd(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ki(e){return typeof e=="string"||Array.isArray(e)}function Hv(e){return new Promise(function(t){setTimeout(t,e)})}function fd(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function Cp(){if(typeof AbortController=="function")return new AbortController}var zv=function(e){Bi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!yp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setFocused(l):a.onFocus()})},n.setFocused=function(s){this.focused=s,s&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(s){s()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(qi),Js=new zv,Uv=function(e){Bi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!yp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setOnline(l):a.onOnline()})},n.setOnline=function(s){this.online=s,s&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(s){s()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(qi),Zs=new Uv;function Gv(e){return Math.min(1e3*Math.pow(2,e),3e4)}function yi(e){return typeof e?.cancel=="function"}var wp=function(t){this.revert=t?.revert,this.silent=t?.silent};function Va(e){return e instanceof wp}var jp=function(t){var n=this,o=!1,s,i,a,l;this.abort=t.abort,this.cancel=function(p){return s?.(p)},this.cancelRetry=function(){o=!0},this.continueRetry=function(){o=!1},this.continue=function(){return i?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(p,x){a=p,l=x});var u=function(x){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(x),i?.(),a(x))},c=function(x){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(x),i?.(),l(x))},d=function(){return new Promise(function(x){i=x,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){i=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},h=function p(){if(!n.isResolved){var x;try{x=t.fn()}catch(m){x=Promise.reject(m)}s=function(g){if(!n.isResolved&&(c(new wp(g)),n.abort==null||n.abort(),yi(x)))try{x.cancel()}catch{}},n.isTransportCancelable=yi(x),Promise.resolve(x).then(u).catch(function(m){var g,b;if(!n.isResolved){var y=(g=t.retry)!=null?g:3,v=(b=t.retryDelay)!=null?b:Gv,C=typeof v=="function"?v(n.failureCount,m):v,k=y===!0||typeof y=="number"&&n.failureCount<y||typeof y=="function"&&y(n.failureCount,m);if(o||!k){c(m);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,m),Hv(C).then(function(){if(!Js.isFocused()||!Zs.isOnline())return d()}).then(function(){o?c(m):p()})}})}};h()},Wv=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(o){var s;this.transactions++;try{s=o()}finally{this.transactions--,this.transactions||this.flush()}return s},t.schedule=function(o){var s=this;this.transactions?this.queue.push(o):fd(function(){s.notifyFn(o)})},t.batchCalls=function(o){var s=this;return function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];s.schedule(function(){o.apply(void 0,a)})}},t.flush=function(){var o=this,s=this.queue;this.queue=[],s.length&&fd(function(){o.batchNotifyFn(function(){s.forEach(function(i){o.notifyFn(i)})})})},t.setNotifyFunction=function(o){this.notifyFn=o},t.setBatchNotifyFunction=function(o){this.batchNotifyFn=o},e}(),jt=new Wv,Sp=console;function Pp(){return Sp}function qv(e){Sp=e}var Kv=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(o){var s;this.options=j({},this.defaultOptions,o),this.meta=o?.meta,this.cacheTime=Math.max(this.cacheTime||0,(s=this.options.cacheTime)!=null?s:300*1e3)},t.setDefaultOptions=function(o){this.defaultOptions=o},t.scheduleGc=function(){var o=this;this.clearGcTimeout(),$v(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){o.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(o,s){var i,a,l=this.state.data,u=_v(o,l);return(i=(a=this.options).isDataEqual)!=null&&i.call(a,l,u)?u=l:this.options.structuralSharing!==!1&&(u=vp(l,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:s?.updatedAt}),u},t.setState=function(o,s){this.dispatch({type:"setState",state:o,setStateOptions:s})},t.cancel=function(o){var s,i=this.promise;return(s=this.retryer)==null||s.cancel(o),i?i.then(Dt).catch(Dt):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(o){return o.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(o){return o.getCurrentResult().isStale})},t.isStaleByTime=function(o){return o===void 0&&(o=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Nv(this.state.dataUpdatedAt,o)},t.onFocus=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.onOnline=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnReconnect()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.addObserver=function(o){this.observers.indexOf(o)===-1&&(this.observers.push(o),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:o}))},t.removeObserver=function(o){this.observers.indexOf(o)!==-1&&(this.observers=this.observers.filter(function(s){return s!==o}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:o}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(o,s){var i=this,a,l,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(o&&this.setOptions(o),!this.options.queryFn){var d=this.observers.find(function(v){return v.options.queryFn});d&&this.setOptions(d.options)}var h=gi(this.queryKey),p=Cp(),x={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(x,"signal",{enumerable:!0,get:function(){if(p)return i.abortSignalConsumed=!0,p.signal}});var m=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(x)):Promise.reject("Missing queryFn")},g={fetchOptions:s,options:this.options,queryKey:h,state:this.state,fetchFn:m,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var b;(b=this.options.behavior)==null||b.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=g.fetchOptions)==null?void 0:l.meta)){var y;this.dispatch({type:"fetch",meta:(y=g.fetchOptions)==null?void 0:y.meta})}return this.retryer=new jp({fn:g.fetchFn,abort:p==null||(u=p.abort)==null?void 0:u.bind(p),onSuccess:function(C){i.setData(C),i.cache.config.onSuccess==null||i.cache.config.onSuccess(C,i),i.cacheTime===0&&i.optionalRemove()},onError:function(C){Va(C)&&C.silent||i.dispatch({type:"error",error:C}),Va(C)||(i.cache.config.onError==null||i.cache.config.onError(C,i),Pp().error(C)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(o){var s=this;this.state=this.reducer(this.state,o),jt.batch(function(){s.observers.forEach(function(i){i.onQueryUpdate(o)}),s.cache.notify({query:s,type:"queryUpdated",action:o})})},t.getDefaultState=function(o){var s=typeof o.initialData=="function"?o.initialData():o.initialData,i=typeof o.initialData<"u",a=i?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0,l=typeof s<"u";return{data:s,dataUpdateCount:0,dataUpdatedAt:l?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},t.reducer=function(o,s){var i,a;switch(s.type){case"failed":return j({},o,{fetchFailureCount:o.fetchFailureCount+1});case"pause":return j({},o,{isPaused:!0});case"continue":return j({},o,{isPaused:!1});case"fetch":return j({},o,{fetchFailureCount:0,fetchMeta:(i=s.meta)!=null?i:null,isFetching:!0,isPaused:!1},!o.dataUpdatedAt&&{error:null,status:"loading"});case"success":return j({},o,{data:s.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:(a=s.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=s.error;return Va(l)&&l.revert&&this.revertState?j({},this.revertState):j({},o,{error:l,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return j({},o,{isInvalidated:!0});case"setState":return j({},o,s.state);default:return o}},e}(),Qv=function(e){Bi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.queries=[],s.queriesMap={},s}var n=t.prototype;return n.build=function(s,i,a){var l,u=i.queryKey,c=(l=i.queryHash)!=null?l:Ac(u,i),d=this.get(c);return d||(d=new Kv({cache:this,queryKey:u,queryHash:c,options:s.defaultQueryOptions(i),state:a,defaultOptions:s.getQueryDefaults(u),meta:i.meta}),this.add(d)),d},n.add=function(s){this.queriesMap[s.queryHash]||(this.queriesMap[s.queryHash]=s,this.queries.push(s),this.notify({type:"queryAdded",query:s}))},n.remove=function(s){var i=this.queriesMap[s.queryHash];i&&(s.destroy(),this.queries=this.queries.filter(function(a){return a!==s}),i===s&&delete this.queriesMap[s.queryHash],this.notify({type:"queryRemoved",query:s}))},n.clear=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){s.remove(i)})})},n.get=function(s){return this.queriesMap[s]},n.getAll=function(){return this.queries},n.find=function(s,i){var a=Zn(s,i),l=a[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(u){return ud(l,u)})},n.findAll=function(s,i){var a=Zn(s,i),l=a[0];return Object.keys(l).length>0?this.queries.filter(function(u){return ud(l,u)}):this.queries},n.notify=function(s){var i=this;jt.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){i.onFocus()})})},n.onOnline=function(){var s=this;jt.batch(function(){s.queries.forEach(function(i){i.onOnline()})})},t}(qi),Xv=function(){function e(n){this.options=j({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||Yv(),this.meta=n.meta}var t=e.prototype;return t.setState=function(o){this.dispatch({type:"setState",state:o})},t.addObserver=function(o){this.observers.indexOf(o)===-1&&this.observers.push(o)},t.removeObserver=function(o){this.observers=this.observers.filter(function(s){return s!==o})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Dt).catch(Dt)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var o=this,s,i=this.state.status==="loading",a=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){o.mutationCache.config.onMutate==null||o.mutationCache.config.onMutate(o.state.variables,o)}).then(function(){return o.options.onMutate==null?void 0:o.options.onMutate(o.state.variables)}).then(function(l){l!==o.state.context&&o.dispatch({type:"loading",context:l,variables:o.state.variables})})),a.then(function(){return o.executeMutation()}).then(function(l){s=l,o.mutationCache.config.onSuccess==null||o.mutationCache.config.onSuccess(s,o.state.variables,o.state.context,o)}).then(function(){return o.options.onSuccess==null?void 0:o.options.onSuccess(s,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(s,null,o.state.variables,o.state.context)}).then(function(){return o.dispatch({type:"success",data:s}),s}).catch(function(l){return o.mutationCache.config.onError==null||o.mutationCache.config.onError(l,o.state.variables,o.state.context,o),Pp().error(l),Promise.resolve().then(function(){return o.options.onError==null?void 0:o.options.onError(l,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(void 0,l,o.state.variables,o.state.context)}).then(function(){throw o.dispatch({type:"error",error:l}),l})})},t.executeMutation=function(){var o=this,s;return this.retryer=new jp({fn:function(){return o.options.mutationFn?o.options.mutationFn(o.state.variables):Promise.reject("No mutationFn found")},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(o){var s=this;this.state=Jv(this.state,o),jt.batch(function(){s.observers.forEach(function(i){i.onMutationUpdate(o)}),s.mutationCache.notify(s)})},e}();function Yv(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Jv(e,t){switch(t.type){case"failed":return j({},e,{failureCount:e.failureCount+1});case"pause":return j({},e,{isPaused:!0});case"continue":return j({},e,{isPaused:!1});case"loading":return j({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return j({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return j({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return j({},e,t.state);default:return e}}var Zv=function(e){Bi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.mutations=[],s.mutationId=0,s}var n=t.prototype;return n.build=function(s,i,a){var l=new Xv({mutationCache:this,mutationId:++this.mutationId,options:s.defaultMutationOptions(i),state:a,defaultOptions:i.mutationKey?s.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(l),l},n.add=function(s){this.mutations.push(s),this.notify(s)},n.remove=function(s){this.mutations=this.mutations.filter(function(i){return i!==s}),s.cancel(),this.notify(s)},n.clear=function(){var s=this;jt.batch(function(){s.mutations.forEach(function(i){s.remove(i)})})},n.getAll=function(){return this.mutations},n.find=function(s){return typeof s.exact>"u"&&(s.exact=!0),this.mutations.find(function(i){return dd(s,i)})},n.findAll=function(s){return this.mutations.filter(function(i){return dd(s,i)})},n.notify=function(s){var i=this;jt.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var s=this.mutations.filter(function(i){return i.state.isPaused});return jt.batch(function(){return s.reduce(function(i,a){return i.then(function(){return a.continue().catch(Dt)})},Promise.resolve())})},t}(qi);function eC(){return{onFetch:function(t){t.fetchFn=function(){var n,o,s,i,a,l,u=(n=t.fetchOptions)==null||(o=n.meta)==null?void 0:o.refetchPage,c=(s=t.fetchOptions)==null||(i=s.meta)==null?void 0:i.fetchMore,d=c?.pageParam,h=c?.direction==="forward",p=c?.direction==="backward",x=((a=t.state.data)==null?void 0:a.pages)||[],m=((l=t.state.data)==null?void 0:l.pageParams)||[],g=Cp(),b=g?.signal,y=m,v=!1,C=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},k=function(w,E,R,N){return y=N?[E].concat(y):[].concat(y,[E]),N?[R].concat(w):[].concat(w,[R])},F=function(w,E,R,N){if(v)return Promise.reject("Cancelled");if(typeof R>"u"&&!E&&w.length)return Promise.resolve(w);var _={queryKey:t.queryKey,signal:b,pageParam:R,meta:t.meta},L=C(_),B=Promise.resolve(L).then(function(U){return k(w,R,U,N)});if(yi(L)){var z=B;z.cancel=L.cancel}return B},T;if(!x.length)T=F([]);else if(h){var I=typeof d<"u",D=I?d:pd(t.options,x);T=F(x,I,D)}else if(p){var V=typeof d<"u",O=V?d:tC(t.options,x);T=F(x,V,O,!0)}else(function(){y=[];var P=typeof t.options.getNextPageParam>"u",w=u&&x[0]?u(x[0],0,x):!0;T=w?F([],P,m[0]):Promise.resolve(k([],m[0],x[0]));for(var E=function(_){T=T.then(function(L){var B=u&&x[_]?u(x[_],_,x):!0;if(B){var z=P?m[_]:pd(t.options,L);return F(L,P,z)}return Promise.resolve(k(L,m[_],x[_]))})},R=1;R<x.length;R++)E(R)})();var S=T.then(function(P){return{pages:P,pageParams:y}}),$=S;return $.cancel=function(){v=!0,g?.abort(),yi(T)&&T.cancel()},S}}}}function pd(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function tC(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var nC=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Qv,this.mutationCache=n.mutationCache||new Zv,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var o=this;this.unsubscribeFocus=Js.subscribe(function(){Js.isFocused()&&Zs.isOnline()&&(o.mutationCache.onFocus(),o.queryCache.onFocus())}),this.unsubscribeOnline=Zs.subscribe(function(){Js.isFocused()&&Zs.isOnline()&&(o.mutationCache.onOnline(),o.queryCache.onOnline())})},t.unmount=function(){var o,s;(o=this.unsubscribeFocus)==null||o.call(this),(s=this.unsubscribeOnline)==null||s.call(this)},t.isFetching=function(o,s){var i=Zn(o,s),a=i[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(o){return this.mutationCache.findAll(j({},o,{fetching:!0})).length},t.getQueryData=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state.data},t.getQueriesData=function(o){return this.getQueryCache().findAll(o).map(function(s){var i=s.queryKey,a=s.state,l=a.data;return[i,l]})},t.setQueryData=function(o,s,i){var a=Na(o),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(s,i)},t.setQueriesData=function(o,s,i){var a=this;return jt.batch(function(){return a.getQueryCache().findAll(o).map(function(l){var u=l.queryKey;return[u,a.setQueryData(u,s,i)]})})},t.getQueryState=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state},t.removeQueries=function(o,s){var i=Zn(o,s),a=i[0],l=this.queryCache;jt.batch(function(){l.findAll(a).forEach(function(u){l.remove(u)})})},t.resetQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=this.queryCache,h=j({},u,{active:!0});return jt.batch(function(){return d.findAll(u).forEach(function(p){p.reset()}),a.refetchQueries(h,c)})},t.cancelQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var h=jt.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.cancel(d)})});return Promise.all(h).then(Dt).catch(Dt)},t.invalidateQueries=function(o,s,i){var a,l,u,c=this,d=Zn(o,s,i),h=d[0],p=d[1],x=j({},h,{active:(a=(l=h.refetchActive)!=null?l:h.active)!=null?a:!0,inactive:(u=h.refetchInactive)!=null?u:!1});return jt.batch(function(){return c.queryCache.findAll(h).forEach(function(m){m.invalidate()}),c.refetchQueries(x,p)})},t.refetchQueries=function(o,s,i){var a=this,l=Zn(o,s,i),u=l[0],c=l[1],d=jt.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.fetch(void 0,j({},c,{meta:{refetchPage:u?.refetchPage}}))})}),h=Promise.all(d).then(Dt);return c?.throwOnError||(h=h.catch(Dt)),h},t.fetchQuery=function(o,s,i){var a=Na(o,s,i),l=this.defaultQueryOptions(a);typeof l.retry>"u"&&(l.retry=!1);var u=this.queryCache.build(this,l);return u.isStaleByTime(l.staleTime)?u.fetch(l):Promise.resolve(u.state.data)},t.prefetchQuery=function(o,s,i){return this.fetchQuery(o,s,i).then(Dt).catch(Dt)},t.fetchInfiniteQuery=function(o,s,i){var a=Na(o,s,i);return a.behavior=eC(),this.fetchQuery(a)},t.prefetchInfiniteQuery=function(o,s,i){return this.fetchInfiniteQuery(o,s,i).then(Dt).catch(Dt)},t.cancelMutations=function(){var o=this,s=jt.batch(function(){return o.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(s).then(Dt).catch(Dt)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(o){return this.mutationCache.build(this,o).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(o){this.defaultOptions=o},t.setQueryDefaults=function(o,s){var i=this.queryDefaults.find(function(a){return kr(o)===kr(a.queryKey)});i?i.defaultOptions=s:this.queryDefaults.push({queryKey:o,defaultOptions:s})},t.getQueryDefaults=function(o){var s;return o?(s=this.queryDefaults.find(function(i){return xi(o,i.queryKey)}))==null?void 0:s.defaultOptions:void 0},t.setMutationDefaults=function(o,s){var i=this.mutationDefaults.find(function(a){return kr(o)===kr(a.mutationKey)});i?i.defaultOptions=s:this.mutationDefaults.push({mutationKey:o,defaultOptions:s})},t.getMutationDefaults=function(o){var s;return o?(s=this.mutationDefaults.find(function(i){return xi(o,i.mutationKey)}))==null?void 0:s.defaultOptions:void 0},t.defaultQueryOptions=function(o){if(o?._defaulted)return o;var s=j({},this.defaultOptions.queries,this.getQueryDefaults(o?.queryKey),o,{_defaulted:!0});return!s.queryHash&&s.queryKey&&(s.queryHash=Ac(s.queryKey,s)),s},t.defaultQueryObserverOptions=function(o){return this.defaultQueryOptions(o)},t.defaultMutationOptions=function(o){return o?._defaulted?o:j({},this.defaultOptions.mutations,this.getMutationDefaults(o?.mutationKey),o,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),rC=Bb.unstable_batchedUpdates;jt.setBatchNotifyFunction(rC);var oC=console;qv(oC);var md=Le.createContext(void 0),sC=Le.createContext(!1);function iC(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=md),window.ReactQueryClientContext):md}var aC=function(t){var n=t.client,o=t.contextSharing,s=o===void 0?!1:o,i=t.children;Le.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var a=iC(s);return Le.createElement(sC.Provider,{value:s},Le.createElement(a.Provider,{value:n},i))};const kp=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Qi=f.createContext({}),Xi=f.createContext(null),Yi=typeof document<"u",Mc=Yi?f.useLayoutEffect:f.useEffect,Ip=f.createContext({strict:!1}),Rc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lC="framerAppearId",Ep="data-"+Rc(lC);function cC(e,t,n,o){const{visualElement:s}=f.useContext(Qi),i=f.useContext(Ip),a=f.useContext(Xi),l=f.useContext(kp).reducedMotion,u=f.useRef();o=o||i.renderer,!u.current&&o&&(u.current=o(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current;f.useInsertionEffect(()=>{c&&c.update(n,a)});const d=f.useRef(!!(n[Ep]&&!window.HandoffComplete));return Mc(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),f.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function oo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function uC(e,t,n){return f.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):oo(n)&&(n.current=o))},[t])}function os(e){return typeof e=="string"||Array.isArray(e)}function Ji(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Dc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fc=["initial",...Dc];function Zi(e){return Ji(e.animate)||Fc.some(t=>os(e[t]))}function Tp(e){return!!(Zi(e)||e.variants)}function dC(e,t){if(Zi(e)){const{initial:n,animate:o}=e;return{initial:n===!1||os(n)?n:void 0,animate:os(o)?o:void 0}}return e.inherit!==!1?t:{}}function hC(e){const{initial:t,animate:n}=dC(e,f.useContext(Qi));return f.useMemo(()=>({initial:t,animate:n}),[gd(t),gd(n)])}function gd(e){return Array.isArray(e)?e.join(" "):e}const xd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ss={};for(const e in xd)ss[e]={isEnabled:t=>xd[e].some(n=>!!t[n])};function fC(e){for(const t in e)ss[t]={...ss[t],...e[t]}}const Oc=f.createContext({}),Ap=f.createContext({}),pC=Symbol.for("motionComponentSymbol");function mC({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:s}){e&&fC(e);function i(l,u){let c;const d={...f.useContext(kp),...l,layoutId:gC(l)},{isStatic:h}=d,p=hC(l),x=o(l,h);if(!h&&Yi){p.visualElement=cC(s,x,d,t);const m=f.useContext(Ap),g=f.useContext(Ip).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,g,e,m))}return f.createElement(Qi.Provider,{value:p},c&&p.visualElement?f.createElement(c,{visualElement:p.visualElement,...d}):null,n(s,l,uC(x,p.visualElement,u),x,h,p.visualElement))}const a=f.forwardRef(i);return a[pC]=s,a}function gC({layoutId:e}){const t=f.useContext(Oc).id;return t&&e!==void 0?t+"-"+e:e}function xC(e){function t(o,s={}){return mC(e(o,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(o,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const yC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lc(e){return typeof e!="string"||e.includes("-")?!1:!!(yC.indexOf(e)>-1||/[A-Z]/.test(e))}const bi={};function bC(e){Object.assign(bi,e)}const vs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set(vs);function Mp(e,{layout:t,layoutId:n}){return Ur.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!bi[e]||e==="opacity")}const Gt=e=>!!(e&&e.getVelocity),vC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CC=vs.length;function wC(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},o,s){let i="";for(let a=0;a<CC;a++){const l=vs[a];if(e[l]!==void 0){const u=vC[l]||l;i+=`${u}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,o?"":i):n&&o&&(i="none"),i}const Rp=e=>t=>typeof t=="string"&&t.startsWith(e),Dp=Rp("--"),Tl=Rp("var(--"),jC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,SC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ur=(e,t,n)=>Math.min(Math.max(n,e),t),Gr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Qo={...Gr,transform:e=>ur(0,1,e)},zs={...Gr,default:1},Xo=e=>Math.round(e*1e5)/1e5,ea=/(-)?([\d]*\.?[\d])+/g,Fp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,PC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Cs(e){return typeof e=="string"}const ws=e=>({test:t=>Cs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xn=ws("deg"),kn=ws("%"),ke=ws("px"),kC=ws("vh"),IC=ws("vw"),yd={...kn,parse:e=>kn.parse(e)/100,transform:e=>kn.transform(e*100)},bd={...Gr,transform:Math.round},Op={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,size:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,rotate:Xn,rotateX:Xn,rotateY:Xn,rotateZ:Xn,scale:zs,scaleX:zs,scaleY:zs,scaleZ:zs,skew:Xn,skewX:Xn,skewY:Xn,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Qo,originX:yd,originY:yd,originZ:ke,zIndex:bd,fillOpacity:Qo,strokeOpacity:Qo,numOctaves:bd};function _c(e,t,n,o){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let u=!1,c=!1,d=!0;for(const h in t){const p=t[h];if(Dp(h)){i[h]=p;continue}const x=Op[h],m=SC(p,x);if(Ur.has(h)){if(u=!0,a[h]=m,!d)continue;p!==(x.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,l[h]=m):s[h]=m}if(t.transform||(u||o?s.transform=wC(e.transform,n,d,o):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:x=0}=l;s.transformOrigin=`${h} ${p} ${x}`}}const $c=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Lp(e,t,n){for(const o in t)!Gt(t[o])&&!Mp(o,n)&&(e[o]=t[o])}function EC({transformTemplate:e},t,n){return f.useMemo(()=>{const o=$c();return _c(o,t,{enableHardwareAcceleration:!n},e),Object.assign({},o.vars,o.style)},[t])}function TC(e,t,n){const o=e.style||{},s={};return Lp(s,o,e),Object.assign(s,EC(e,t,n)),e.transformValues?e.transformValues(s):s}function AC(e,t,n){const o={},s=TC(e,t,n);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=s,o}const MC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||MC.has(e)}let _p=e=>!vi(e);function RC(e){e&&(_p=t=>t.startsWith("on")?!vi(t):e(t))}try{RC(require("@emotion/is-prop-valid").default)}catch{}function DC(e,t,n){const o={};for(const s in e)s==="values"&&typeof e.values=="object"||(_p(s)||n===!0&&vi(s)||!t&&!vi(s)||e.draggable&&s.startsWith("onDrag"))&&(o[s]=e[s]);return o}function vd(e,t,n){return typeof e=="string"?e:ke.transform(t+n*e)}function FC(e,t,n){const o=vd(t,e.x,e.width),s=vd(n,e.y,e.height);return`${o} ${s}`}const OC={offset:"stroke-dashoffset",array:"stroke-dasharray"},LC={offset:"strokeDashoffset",array:"strokeDasharray"};function _C(e,t,n=1,o=0,s=!0){e.pathLength=1;const i=s?OC:LC;e[i.offset]=ke.transform(-o);const a=ke.transform(t),l=ke.transform(n);e[i.array]=`${a} ${l}`}function Nc(e,{attrX:t,attrY:n,attrScale:o,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...c},d,h,p){if(_c(e,c,d,p),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:m,dimensions:g}=e;x.transform&&(g&&(m.transform=x.transform),delete x.transform),g&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=FC(g,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(x.x=t),n!==void 0&&(x.y=n),o!==void 0&&(x.scale=o),a!==void 0&&_C(x,a,l,u,!1)}const $p=()=>({...$c(),attrs:{}}),Vc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $C(e,t,n,o){const s=f.useMemo(()=>{const i=$p();return Nc(i,t,{enableHardwareAcceleration:!1},Vc(o),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Lp(i,e.style,e),s.style={...i,...s.style}}return s}function NC(e=!1){return(n,o,s,{latestValues:i},a)=>{const u=(Lc(n)?$C:AC)(o,i,a,n),d={...DC(o,typeof n=="string",e),...u,ref:s},{children:h}=o,p=f.useMemo(()=>Gt(h)?h.get():h,[h]);return f.createElement(n,{...d,children:p})}}function Np(e,{style:t,vars:n},o,s){Object.assign(e.style,t,s&&s.getProjectionStyles(o));for(const i in n)e.style.setProperty(i,n[i])}const Vp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Bp(e,t,n,o){Np(e,t,void 0,o);for(const s in t.attrs)e.setAttribute(Vp.has(s)?s:Rc(s),t.attrs[s])}function Bc(e,t){const{style:n}=e,o={};for(const s in n)(Gt(n[s])||t.style&&Gt(t.style[s])||Mp(s,e))&&(o[s]=n[s]);return o}function Hp(e,t){const n=Bc(e,t);for(const o in e)if(Gt(e[o])||Gt(t[o])){const s=vs.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;n[s]=e[o]}return n}function Hc(e,t,n,o={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),t}function zp(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ci=e=>Array.isArray(e),VC=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),BC=e=>Ci(e)?e[e.length-1]||0:e;function ei(e){const t=Gt(e)?e.get():e;return VC(t)?t.toValue():t}function HC({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},o,s,i){const a={latestValues:zC(o,s,i,e),renderState:t()};return n&&(a.mount=l=>n(o,l,a)),a}const Up=e=>(t,n)=>{const o=f.useContext(Qi),s=f.useContext(Xi),i=()=>HC(e,t,o,s);return n?i():zp(i)};function zC(e,t,n,o){const s={},i=o(e,{});for(const p in i)s[p]=ei(i[p]);let{initial:a,animate:l}=e;const u=Zi(e),c=Tp(e);t&&c&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Ji(h)&&(Array.isArray(h)?h:[h]).forEach(x=>{const m=Hc(e,x);if(!m)return;const{transitionEnd:g,transition:b,...y}=m;for(const v in y){let C=y[v];if(Array.isArray(C)){const k=d?C.length-1:0;C=C[k]}C!==null&&(s[v]=C)}for(const v in g)s[v]=g[v]}),s}const at=e=>e;let Cd=class{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}};function UC(e){let t=new Cd,n=new Cd,o=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(u,c=!1,d=!1)=>{const h=d&&s,p=h?t:n;return c&&a.add(u),p.add(u)&&h&&s&&(o=t.order.length),u},cancel:u=>{n.remove(u),a.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),o=t.order.length,o)for(let c=0;c<o;c++){const d=t.order[c];d(u),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(u))}};return l}const Us=["prepare","read","update","preRender","render","postRender"],GC=40;function WC(e,t){let n=!1,o=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Us.reduce((h,p)=>(h[p]=UC(()=>n=!0),h),{}),a=h=>i[h].process(s),l=()=>{const h=performance.now();n=!1,s.delta=o?1e3/60:Math.max(Math.min(h-s.timestamp,GC),1),s.timestamp=h,s.isProcessing=!0,Us.forEach(a),s.isProcessing=!1,n&&t&&(o=!1,e(l))},u=()=>{n=!0,o=!0,s.isProcessing||e(l)};return{schedule:Us.reduce((h,p)=>{const x=i[p];return h[p]=(m,g=!1,b=!1)=>(n||u(),x.schedule(m,g,b)),h},{}),cancel:h=>Us.forEach(p=>i[p].cancel(h)),state:s,steps:i}}const{schedule:et,cancel:Kn,state:Mt,steps:Ba}=WC(typeof requestAnimationFrame<"u"?requestAnimationFrame:at,!0),qC={useVisualState:Up({scrapeMotionValuesFromProps:Hp,createRenderState:$p,onMount:(e,t,{renderState:n,latestValues:o})=>{et.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{Nc(n,o,{enableHardwareAcceleration:!1},Vc(t.tagName),e.transformTemplate),Bp(t,n)})}})},KC={useVisualState:Up({scrapeMotionValuesFromProps:Bc,createRenderState:$c})};function QC(e,{forwardMotionProps:t=!1},n,o){return{...Lc(e)?qC:KC,preloadedFeatures:n,useRender:NC(t),createVisualElement:o,Component:e}}function Bn(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}const Gp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ta(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const XC=e=>t=>Gp(t)&&e(t,ta(t));function Gn(e,t,n,o){return Bn(e,t,XC(n),o)}const YC=(e,t)=>n=>t(e(n)),lr=(...e)=>e.reduce(YC);function Wp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const wd=Wp("dragHorizontal"),jd=Wp("dragVertical");function qp(e){let t=!1;if(e==="y")t=jd();else if(e==="x")t=wd();else{const n=wd(),o=jd();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function Kp(){const e=qp(!0);return e?(e(),!1):!0}class pr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Sd(e,t){const n="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||Kp())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&et.update(()=>l[o](i,a))};return Gn(e.current,n,s,{passive:!e.getProps()[o]})}class JC extends pr{mount(){this.unmount=lr(Sd(this.node,!0),Sd(this.node,!1))}unmount(){}}class ZC extends pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lr(Bn(this.node.current,"focus",()=>this.onFocus()),Bn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Qp=(e,t)=>t?e===t?!0:Qp(e,t.parentElement):!1;function Ha(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ta(n))}class ew extends pr{constructor(){super(...arguments),this.removeStartListeners=at,this.removeEndListeners=at,this.removeAccessibleListeners=at,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),i=Gn(window,"pointerup",(l,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();et.update(()=>{!h&&!Qp(this.node.current,l.target)?d&&d(l,u):c&&c(l,u)})},{passive:!(o.onTap||o.onPointerUp)}),a=Gn(window,"pointercancel",(l,u)=>this.cancelPress(l,u),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=lr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ha("up",(u,c)=>{const{onTap:d}=this.node.getProps();d&&et.update(()=>d(u,c))})};this.removeEndListeners(),this.removeEndListeners=Bn(this.node.current,"keyup",a),Ha("down",(l,u)=>{this.startPress(l,u)})},n=Bn(this.node.current,"keydown",t),o=()=>{this.isPressing&&Ha("cancel",(i,a)=>this.cancelPress(i,a))},s=Bn(this.node.current,"blur",o);this.removeAccessibleListeners=lr(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&et.update(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Kp()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&et.update(()=>o(t,n))}mount(){const t=this.node.getProps(),n=Gn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Bn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lr(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Al=new WeakMap,za=new WeakMap,tw=e=>{const t=Al.get(e.target);t&&t(e)},nw=e=>{e.forEach(tw)};function rw({root:e,...t}){const n=e||document;za.has(n)||za.set(n,{});const o=za.get(n),s=JSON.stringify(t);return o[s]||(o[s]=new IntersectionObserver(nw,{root:e,...t})),o[s]}function ow(e,t,n){const o=rw(t);return Al.set(e,n),o.observe(e),()=>{Al.delete(e),o.unobserve(e)}}const sw={some:0,all:1};class iw extends pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:o,threshold:typeof s=="number"?s:sw[s]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(u)};return ow(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(aw(t,n))&&this.startObserver()}unmount(){}}function aw({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const lw={inView:{Feature:iw},tap:{Feature:ew},focus:{Feature:ZC},hover:{Feature:JC}};function Xp(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function cw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.get()),t}function uw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.getVelocity()),t}function na(e,t,n){const o=e.getProps();return Hc(o,t,n!==void 0?n:o.custom,cw(e),uw(e))}let zc=at;const Dr=e=>e*1e3,Wn=e=>e/1e3,dw={current:!1},Yp=e=>Array.isArray(e)&&typeof e[0]=="number";function Jp(e){return!!(!e||typeof e=="string"&&Zp[e]||Yp(e)||Array.isArray(e)&&e.every(Jp))}const zo=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,Zp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zo([0,.65,.55,1]),circOut:zo([.55,0,1,.45]),backIn:zo([.31,.01,.66,-.59]),backOut:zo([.33,1.53,.69,.99])};function em(e){if(e)return Yp(e)?zo(e):Array.isArray(e)?e.map(em):Zp[e]}function hw(e,t,n,{delay:o=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:u}={}){const c={[t]:n};u&&(c.offset=u);const d=em(l);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:o,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function fw(e,{repeat:t,repeatType:n="loop"}){const o=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[o]}const tm=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,pw=1e-7,mw=12;function gw(e,t,n,o,s){let i,a,l=0;do a=t+(n-t)/2,i=tm(a,o,s)-e,i>0?n=a:t=a;while(Math.abs(i)>pw&&++l<mw);return a}function js(e,t,n,o){if(e===t&&n===o)return at;const s=i=>gw(i,0,1,e,n);return i=>i===0||i===1?i:tm(s(i),t,o)}const xw=js(.42,0,1,1),yw=js(0,0,.58,1),nm=js(.42,0,.58,1),bw=e=>Array.isArray(e)&&typeof e[0]!="number",rm=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,om=e=>t=>1-e(1-t),Uc=e=>1-Math.sin(Math.acos(e)),sm=om(Uc),vw=rm(Uc),im=js(.33,1.53,.69,.99),Gc=om(im),Cw=rm(Gc),ww=e=>(e*=2)<1?.5*Gc(e):.5*(2-Math.pow(2,-10*(e-1))),jw={linear:at,easeIn:xw,easeInOut:nm,easeOut:yw,circIn:Uc,circInOut:vw,circOut:sm,backIn:Gc,backInOut:Cw,backOut:im,anticipate:ww},Pd=e=>{if(Array.isArray(e)){zc(e.length===4);const[t,n,o,s]=e;return js(t,n,o,s)}else if(typeof e=="string")return jw[e];return e},Wc=(e,t)=>n=>!!(Cs(n)&&PC.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),am=(e,t,n)=>o=>{if(!Cs(o))return o;const[s,i,a,l]=o.match(ea);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Sw=e=>ur(0,255,e),Ua={...Gr,transform:e=>Math.round(Sw(e))},Ir={test:Wc("rgb","red"),parse:am("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+Ua.transform(e)+", "+Ua.transform(t)+", "+Ua.transform(n)+", "+Xo(Qo.transform(o))+")"};function Pw(e){let t="",n="",o="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,o+=o,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:s?parseInt(s,16)/255:1}}const Ml={test:Wc("#"),parse:Pw,transform:Ir.transform},so={test:Wc("hsl","hue"),parse:am("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+kn.transform(Xo(t))+", "+kn.transform(Xo(n))+", "+Xo(Qo.transform(o))+")"},Ft={test:e=>Ir.test(e)||Ml.test(e)||so.test(e),parse:e=>Ir.test(e)?Ir.parse(e):so.test(e)?so.parse(e):Ml.parse(e),transform:e=>Cs(e)?e:e.hasOwnProperty("red")?Ir.transform(e):so.transform(e)},rt=(e,t,n)=>-n*e+n*t+e;function Ga(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function kw({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;s=Ga(u,l,e+1/3),i=Ga(u,l,e),a=Ga(u,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:o}}const Wa=(e,t,n)=>{const o=e*e;return Math.sqrt(Math.max(0,n*(t*t-o)+o))},Iw=[Ml,Ir,so],Ew=e=>Iw.find(t=>t.test(e));function kd(e){const t=Ew(e);let n=t.parse(e);return t===so&&(n=kw(n)),n}const lm=(e,t)=>{const n=kd(e),o=kd(t),s={...n};return i=>(s.red=Wa(n.red,o.red,i),s.green=Wa(n.green,o.green,i),s.blue=Wa(n.blue,o.blue,i),s.alpha=rt(n.alpha,o.alpha,i),Ir.transform(s))};function Tw(e){var t,n;return isNaN(e)&&Cs(e)&&(((t=e.match(ea))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Fp))===null||n===void 0?void 0:n.length)||0)>0}const cm={regex:jC,countKey:"Vars",token:"${v}",parse:at},um={regex:Fp,countKey:"Colors",token:"${c}",parse:Ft.parse},dm={regex:ea,countKey:"Numbers",token:"${n}",parse:Gr.parse};function qa(e,{regex:t,countKey:n,token:o,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,o),e.values.push(...i.map(s)))}function wi(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&qa(n,cm),qa(n,um),qa(n,dm),n}function hm(e){return wi(e).values}function fm(e){const{values:t,numColors:n,numVars:o,tokenised:s}=wi(e),i=t.length;return a=>{let l=s;for(let u=0;u<i;u++)u<o?l=l.replace(cm.token,a[u]):u<o+n?l=l.replace(um.token,Ft.transform(a[u])):l=l.replace(dm.token,Xo(a[u]));return l}}const Aw=e=>typeof e=="number"?0:e;function Mw(e){const t=hm(e);return fm(e)(t.map(Aw))}const dr={test:Tw,parse:hm,createTransformer:fm,getAnimatableNone:Mw},pm=(e,t)=>n=>`${n>0?t:e}`;function mm(e,t){return typeof e=="number"?n=>rt(e,t,n):Ft.test(e)?lm(e,t):e.startsWith("var(")?pm(e,t):xm(e,t)}const gm=(e,t)=>{const n=[...e],o=n.length,s=e.map((i,a)=>mm(i,t[a]));return i=>{for(let a=0;a<o;a++)n[a]=s[a](i);return n}},Rw=(e,t)=>{const n={...e,...t},o={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(o[s]=mm(e[s],t[s]));return s=>{for(const i in o)n[i]=o[i](s);return n}},xm=(e,t)=>{const n=dr.createTransformer(t),o=wi(e),s=wi(t);return o.numVars===s.numVars&&o.numColors===s.numColors&&o.numNumbers>=s.numNumbers?lr(gm(o.values,s.values),n):pm(e,t)},is=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},Id=(e,t)=>n=>rt(e,t,n);function Dw(e){return typeof e=="number"?Id:typeof e=="string"?Ft.test(e)?lm:xm:Array.isArray(e)?gm:typeof e=="object"?Rw:Id}function Fw(e,t,n){const o=[],s=n||Dw(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||at:t;l=lr(u,l)}o.push(l)}return o}function ym(e,t,{clamp:n=!0,ease:o,mixer:s}={}){const i=e.length;if(zc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Fw(t,o,s),l=a.length,u=c=>{let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=is(e[d],e[d+1],c);return a[d](h)};return n?c=>u(ur(e[0],e[i-1],c)):u}function Ow(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const s=is(0,t,o);e.push(rt(n,1,s))}}function Lw(e){const t=[0];return Ow(t,e.length-1),t}function _w(e,t){return e.map(n=>n*t)}function $w(e,t){return e.map(()=>t||nm).splice(0,e.length-1)}function ji({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const s=bw(o)?o.map(Pd):Pd(o),i={done:!1,value:t[0]},a=_w(n&&n.length===t.length?n:Lw(t),e),l=ym(a,t,{ease:Array.isArray(s)?s:$w(t,s)});return{calculatedDuration:e,next:u=>(i.value=l(u),i.done=u>=e,i)}}function bm(e,t){return t?e*(1e3/t):0}const Nw=5;function vm(e,t,n){const o=Math.max(t-Nw,0);return bm(n-e(o),t-o)}const Ka=.001,Vw=.01,Bw=10,Hw=.05,zw=1;function Uw({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let s,i,a=1-t;a=ur(Hw,zw,a),e=ur(Vw,Bw,Wn(e)),a<1?(s=c=>{const d=c*a,h=d*e,p=d-n,x=Rl(c,a),m=Math.exp(-h);return Ka-p/x*m},i=c=>{const h=c*a*e,p=h*n+n,x=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-h),g=Rl(Math.pow(c,2),a);return(-s(c)+Ka>0?-1:1)*((p-x)*m)/g}):(s=c=>{const d=Math.exp(-c*e),h=(c-n)*e+1;return-Ka+d*h},i=c=>{const d=Math.exp(-c*e),h=(n-c)*(e*e);return d*h});const l=5/e,u=Ww(s,i,l);if(e=Dr(e),isNaN(u))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(u,2)*o;return{stiffness:c,damping:a*2*Math.sqrt(o*c),duration:e}}}const Gw=12;function Ww(e,t,n){let o=n;for(let s=1;s<Gw;s++)o=o-e(o)/t(o);return o}function Rl(e,t){return e*Math.sqrt(1-t*t)}const qw=["duration","bounce"],Kw=["stiffness","damping","mass"];function Ed(e,t){return t.some(n=>e[n]!==void 0)}function Qw(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ed(e,Kw)&&Ed(e,qw)){const n=Uw(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Cm({keyframes:e,restDelta:t,restSpeed:n,...o}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:p}=Qw({...o,velocity:-Wn(o.velocity||0)}),x=h||0,m=u/(2*Math.sqrt(l*c)),g=i-s,b=Wn(Math.sqrt(l/c)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(m<1){const C=Rl(b,m);v=k=>{const F=Math.exp(-m*b*k);return i-F*((x+m*b*g)/C*Math.sin(C*k)+g*Math.cos(C*k))}}else if(m===1)v=C=>i-Math.exp(-b*C)*(g+(x+b*g)*C);else{const C=b*Math.sqrt(m*m-1);v=k=>{const F=Math.exp(-m*b*k),T=Math.min(C*k,300);return i-F*((x+m*b*g)*Math.sinh(T)+C*g*Math.cosh(T))/C}}return{calculatedDuration:p&&d||null,next:C=>{const k=v(C);if(p)a.done=C>=d;else{let F=x;C!==0&&(m<1?F=vm(v,C,k):F=0);const T=Math.abs(F)<=n,I=Math.abs(i-k)<=t;a.done=T&&I}return a.value=a.done?i:k,a}}}function Td({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},x=D=>l!==void 0&&D<l||u!==void 0&&D>u,m=D=>l===void 0?u:u===void 0||Math.abs(l-D)<Math.abs(u-D)?l:u;let g=n*t;const b=h+g,y=a===void 0?b:a(b);y!==b&&(g=y-h);const v=D=>-g*Math.exp(-D/o),C=D=>y+v(D),k=D=>{const V=v(D),O=C(D);p.done=Math.abs(V)<=c,p.value=p.done?y:O};let F,T;const I=D=>{x(p.value)&&(F=D,T=Cm({keyframes:[p.value,m(p.value)],velocity:vm(C,D,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:D=>{let V=!1;return!T&&F===void 0&&(V=!0,k(D),I(D)),F!==void 0&&D>F?T.next(D-F):(!V&&k(D),p)}}}const Xw=e=>{const t=({timestamp:n})=>e(n);return{start:()=>et.update(t,!0),stop:()=>Kn(t),now:()=>Mt.isProcessing?Mt.timestamp:performance.now()}},Ad=2e4;function Md(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<Ad;)t+=n,o=e.next(t);return t>=Ad?1/0:t}const Yw={decay:Td,inertia:Td,tween:ji,keyframes:ji,spring:Cm};function Si({autoplay:e=!0,delay:t=0,driver:n=Xw,keyframes:o,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:u,onStop:c,onComplete:d,onUpdate:h,...p}){let x=1,m=!1,g,b;const y=()=>{b=new Promise(z=>{g=z})};y();let v;const C=Yw[s]||ji;let k;C!==ji&&typeof o[0]!="number"&&(k=ym([0,100],o,{clamp:!1}),o=[0,100]);const F=C({...p,keyframes:o});let T;l==="mirror"&&(T=C({...p,keyframes:[...o].reverse(),velocity:-(p.velocity||0)}));let I="idle",D=null,V=null,O=null;F.calculatedDuration===null&&i&&(F.calculatedDuration=Md(F));const{calculatedDuration:S}=F;let $=1/0,P=1/0;S!==null&&($=S+a,P=$*(i+1)-a);let w=0;const E=z=>{if(V===null)return;x>0&&(V=Math.min(V,z)),x<0&&(V=Math.min(z-P/x,V)),D!==null?w=D:w=Math.round(z-V)*x;const U=w-t*(x>=0?1:-1),J=x>=0?U<0:U>P;w=Math.max(U,0),I==="finished"&&D===null&&(w=P);let ee=w,te=F;if(i){const ae=Math.min(w,P)/$;let X=Math.floor(ae),ne=ae%1;!ne&&ae>=1&&(ne=1),ne===1&&X--,X=Math.min(X,i+1),!!(X%2)&&(l==="reverse"?(ne=1-ne,a&&(ne-=a/$)):l==="mirror"&&(te=T)),ee=ur(0,1,ne)*$}const ve=J?{done:!1,value:o[0]}:te.next(ee);k&&(ve.value=k(ve.value));let{done:W}=ve;!J&&S!==null&&(W=x>=0?w>=P:w<=0);const K=D===null&&(I==="finished"||I==="running"&&W);return h&&h(ve.value),K&&_(),ve},R=()=>{v&&v.stop(),v=void 0},N=()=>{I="idle",R(),g(),y(),V=O=null},_=()=>{I="finished",d&&d(),R(),g()},L=()=>{if(m)return;v||(v=n(E));const z=v.now();u&&u(),D!==null?V=z-D:(!V||I==="finished")&&(V=z),I==="finished"&&y(),O=V,D=null,I="running",v.start()};e&&L();const B={then(z,U){return b.then(z,U)},get time(){return Wn(w)},set time(z){z=Dr(z),w=z,D!==null||!v||x===0?D=z:V=v.now()-z/x},get duration(){const z=F.calculatedDuration===null?Md(F):F.calculatedDuration;return Wn(z)},get speed(){return x},set speed(z){z===x||!v||(x=z,B.time=Wn(w))},get state(){return I},play:L,pause:()=>{I="paused",D=w},stop:()=>{m=!0,I!=="idle"&&(I="idle",c&&c(),N())},cancel:()=>{O!==null&&E(O),N()},complete:()=>{I="finished"},sample:z=>(V=0,E(z))};return B}function Jw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Zw=Jw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),e0=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gs=10,t0=2e4,n0=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Jp(t.ease);function r0(e,t,{onUpdate:n,onComplete:o,...s}){if(!(Zw()&&e0.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,u,c=!1;const d=()=>{u=new Promise(C=>{l=C})};d();let{keyframes:h,duration:p=300,ease:x,times:m}=s;if(n0(t,s)){const C=Si({...s,repeat:0,delay:0});let k={done:!1,value:h[0]};const F=[];let T=0;for(;!k.done&&T<t0;)k=C.sample(T),F.push(k.value),T+=Gs;m=void 0,h=F,p=T-Gs,x="linear"}const g=hw(e.owner.current,t,h,{...s,duration:p,ease:x,times:m}),b=()=>{c=!1,g.cancel()},y=()=>{c=!0,et.update(b),l(),d()};return g.onfinish=()=>{c||(e.set(fw(h,s)),o&&o(),y())},{then(C,k){return u.then(C,k)},attachTimeline(C){return g.timeline=C,g.onfinish=null,at},get time(){return Wn(g.currentTime||0)},set time(C){g.currentTime=Dr(C)},get speed(){return g.playbackRate},set speed(C){g.playbackRate=C},get duration(){return Wn(p)},play:()=>{a||(g.play(),Kn(b))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:C}=g;if(C){const k=Si({...s,autoplay:!1});e.setWithVelocity(k.sample(C-Gs).value,k.sample(C).value,Gs)}y()},complete:()=>{c||g.finish()},cancel:y}}function o0({keyframes:e,delay:t,onUpdate:n,onComplete:o}){const s=()=>(n&&n(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:at,pause:at,stop:at,then:i=>(i(),Promise.resolve()),cancel:at,complete:at});return t?Si({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const s0={type:"spring",stiffness:500,damping:25,restSpeed:10},i0=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),a0={type:"keyframes",duration:.8},l0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c0=(e,{keyframes:t})=>t.length>2?a0:Ur.has(e)?e.startsWith("scale")?i0(t[1]):s0:l0,Dl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dr.test(t)||t==="0")&&!t.startsWith("url(")),u0=new Set(["brightness","contrast","saturate","opacity"]);function d0(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(ea)||[];if(!o)return e;const s=n.replace(o,"");let i=u0.has(t)?1:0;return o!==n&&(i*=100),t+"("+i+s+")"}const h0=/([a-z-]*)\(.*?\)/g,Fl={...dr,getAnimatableNone:e=>{const t=e.match(h0);return t?t.map(d0).join(" "):e}},f0={...Op,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Fl,WebkitFilter:Fl},qc=e=>f0[e];function wm(e,t){let n=qc(e);return n!==Fl&&(n=dr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jm=e=>/^0[^.\s]+$/.test(e);function p0(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||jm(e)}function m0(e,t,n,o){const s=Dl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=o.from!==void 0?o.from:e.get();let l;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?a:i[c-1]),p0(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(s&&u.length&&l)for(let c=0;c<u.length;c++){const d=u[c];i[d]=wm(t,l)}return i}function g0({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:u,elapsed:c,...d}){return!!Object.keys(d).length}function Kc(e,t){return e[t]||e.default||e}const x0={skipAnimations:!1},Qc=(e,t,n,o={})=>s=>{const i=Kc(o,e)||{},a=i.delay||o.delay||0;let{elapsed:l=0}=o;l=l-Dr(a);const u=m0(t,e,n,i),c=u[0],d=u[u.length-1],h=Dl(e,c),p=Dl(e,d);let x={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:m=>{t.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(g0(i)||(x={...x,...c0(e,x)}),x.duration&&(x.duration=Dr(x.duration)),x.repeatDelay&&(x.repeatDelay=Dr(x.repeatDelay)),!h||!p||dw.current||i.type===!1||x0.skipAnimations)return o0(x);if(!o.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const m=r0(t,e,x);if(m)return m}return Si(x)};function Pi(e){return!!(Gt(e)&&e.add)}const Sm=e=>/^\-?\d*\.?\d+$/.test(e);function Xc(e,t){e.indexOf(t)===-1&&e.push(t)}function Yc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Jc{constructor(){this.subscriptions=[]}add(t){return Xc(this.subscriptions,t),()=>Yc(this.subscriptions,t)}notify(t,n,o){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,o);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const y0=e=>!isNaN(parseFloat(e));class b0{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,s=!0)=>{this.prev=this.current,this.current=o;const{delta:i,timestamp:a}=Mt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=y0(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Jc);const o=this.events[t].add(n);return t==="change"?()=>{o(),et.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=t,this.timeDelta=o}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?bm(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yo(e,t){return new b0(e,t)}const Pm=e=>t=>t.test(e),v0={test:e=>e==="auto",parse:e=>e},km=[Gr,ke,kn,Xn,IC,kC,v0],Fo=e=>km.find(Pm(e)),C0=[...km,Ft,dr],w0=e=>C0.find(Pm(e));function j0(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,yo(n))}function S0(e,t){const n=na(e,t);let{transitionEnd:o={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...o};for(const a in i){const l=BC(i[a]);j0(e,a,l)}}function P0(e,t,n){var o,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const u=i[l],c=t[u];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(o=n[u])!==null&&o!==void 0?o:e.readValue(u))!==null&&s!==void 0?s:t[u]),d!=null&&(typeof d=="string"&&(Sm(d)||jm(d))?d=parseFloat(d):!w0(d)&&dr.test(c)&&(d=wm(u,c)),e.addValue(u,yo(d,{owner:e})),n[u]===void 0&&(n[u]=d),d!==null&&e.setBaseTarget(u,d))}}function k0(e,t){return t?(t[e]||t.default||t).from:void 0}function I0(e,t,n){const o={};for(const s in e){const i=k0(s,t);if(i!==void 0)o[s]=i;else{const a=n.getValue(s);a&&(o[s]=a.get())}}return o}function E0({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function T0(e,t){const n=e.get();if(Array.isArray(t)){for(let o=0;o<t.length;o++)if(t[o]!==n)return!0}else return n!==t}function Im(e,t,{delay:n=0,transitionOverride:o,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const u=e.getValue("willChange");o&&(i=o);const c=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const p=e.getValue(h),x=l[h];if(!p||x===void 0||d&&E0(d,h))continue;const m={delay:n,elapsed:0,...Kc(i||{},h)};if(window.HandoffAppearAnimations){const y=e.getProps()[Ep];if(y){const v=window.HandoffAppearAnimations(y,h,p,et);v!==null&&(m.elapsed=v,m.isHandoff=!0)}}let g=!m.isHandoff&&!T0(p,x);if(m.type==="spring"&&(p.getVelocity()||m.velocity)&&(g=!1),p.animation&&(g=!1),g)continue;p.start(Qc(h,p,x,e.shouldReduceMotion&&Ur.has(h)?{type:!1}:m));const b=p.animation;Pi(u)&&(u.add(h),b.then(()=>u.remove(h))),c.push(b)}return a&&Promise.all(c).then(()=>{a&&S0(e,a)}),c}function Ol(e,t,n={}){const o=na(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(Im(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return A0(e,t,c+u,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>c())}else return Promise.all([i(),a(n.delay)])}function A0(e,t,n=0,o=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*o,u=s===1?(c=0)=>c*o:(c=0)=>l-c*o;return Array.from(e.variantChildren).sort(M0).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(Ol(c,t,{...i,delay:n+u(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function M0(e,t){return e.sortNodePosition(t)}function R0(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const s=t.map(i=>Ol(e,i,n));o=Promise.all(s)}else if(typeof t=="string")o=Ol(e,t,n);else{const s=typeof t=="function"?na(e,t,n.custom):t;o=Promise.all(Im(e,s,n))}return o.then(()=>e.notify("AnimationComplete",t))}const D0=[...Dc].reverse(),F0=Dc.length;function O0(e){return t=>Promise.all(t.map(({animation:n,options:o})=>R0(e,n,o)))}function L0(e){let t=O0(e);const n=$0();let o=!0;const s=(u,c)=>{const d=na(e,c);if(d){const{transition:h,transitionEnd:p,...x}=d;u={...u,...x,...p}}return u};function i(u){t=u(e)}function a(u,c){const d=e.getProps(),h=e.getVariantContext(!0)||{},p=[],x=new Set;let m={},g=1/0;for(let y=0;y<F0;y++){const v=D0[y],C=n[v],k=d[v]!==void 0?d[v]:h[v],F=os(k),T=v===c?C.isActive:null;T===!1&&(g=y);let I=k===h[v]&&k!==d[v]&&F;if(I&&o&&e.manuallyAnimateOnMount&&(I=!1),C.protectedKeys={...m},!C.isActive&&T===null||!k&&!C.prevProp||Ji(k)||typeof k=="boolean")continue;let V=_0(C.prevProp,k)||v===c&&C.isActive&&!I&&F||y>g&&F,O=!1;const S=Array.isArray(k)?k:[k];let $=S.reduce(s,{});T===!1&&($={});const{prevResolvedValues:P={}}=C,w={...P,...$},E=R=>{V=!0,x.has(R)&&(O=!0,x.delete(R)),C.needsAnimating[R]=!0};for(const R in w){const N=$[R],_=P[R];if(m.hasOwnProperty(R))continue;let L=!1;Ci(N)&&Ci(_)?L=!Xp(N,_):L=N!==_,L?N!==void 0?E(R):x.add(R):N!==void 0&&x.has(R)?E(R):C.protectedKeys[R]=!0}C.prevProp=k,C.prevResolvedValues=$,C.isActive&&(m={...m,...$}),o&&e.blockInitialAnimation&&(V=!1),V&&(!I||O)&&p.push(...S.map(R=>({animation:R,options:{type:v,...u}})))}if(x.size){const y={};x.forEach(v=>{const C=e.getBaseTarget(v);C!==void 0&&(y[v]=C)}),p.push({animation:y})}let b=!!p.length;return o&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),o=!1,b?t(p):Promise.resolve()}function l(u,c,d){var h;if(n[u].isActive===c)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(x=>{var m;return(m=x.animationState)===null||m===void 0?void 0:m.setActive(u,c)}),n[u].isActive=c;const p=a(d,u);for(const x in n)n[x].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function _0(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Xp(t,e):!1}function vr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $0(){return{animate:vr(!0),whileInView:vr(),whileHover:vr(),whileTap:vr(),whileDrag:vr(),whileFocus:vr(),exit:vr()}}class N0 extends pr{constructor(t){super(t),t.animationState||(t.animationState=L0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Ji(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let V0=0;class B0 extends pr{constructor(){super(...arguments),this.id=V0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:o}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:o??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const H0={animation:{Feature:N0},exit:{Feature:B0}},Rd=(e,t)=>Math.abs(e-t);function z0(e,t){const n=Rd(e.x,t.x),o=Rd(e.y,t.y);return Math.sqrt(n**2+o**2)}class Em{constructor(t,n,{transformPagePoint:o,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Xa(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=z0(h.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:m}=h,{timestamp:g}=Mt;this.history.push({...m,timestamp:g});const{onStart:b,onMove:y}=this.handlers;p||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Qa(p,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:x,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Xa(h.type==="pointercancel"?this.lastMoveEventInfo:Qa(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,b),m&&m(h,b)},!Gp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=o,this.contextWindow=s||window;const a=ta(t),l=Qa(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Mt;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,Xa(l,this.history)),this.removeListeners=lr(Gn(this.contextWindow,"pointermove",this.handlePointerMove),Gn(this.contextWindow,"pointerup",this.handlePointerUp),Gn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kn(this.updatePoint)}}function Qa(e,t){return t?{point:t(e.point)}:e}function Dd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xa({point:e},t){return{point:e,delta:Dd(e,Tm(t)),offset:Dd(e,U0(t)),velocity:G0(t,.1)}}function U0(e){return e[0]}function Tm(e){return e[e.length-1]}function G0(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const s=Tm(e);for(;n>=0&&(o=e[n],!(s.timestamp-o.timestamp>Dr(t)));)n--;if(!o)return{x:0,y:0};const i=Wn(s.timestamp-o.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-o.x)/i,y:(s.y-o.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Xt(e){return e.max-e.min}function Ll(e,t=0,n=.01){return Math.abs(e-t)<=n}function Fd(e,t,n,o=.5){e.origin=o,e.originPoint=rt(t.min,t.max,e.origin),e.scale=Xt(n)/Xt(t),(Ll(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=rt(n.min,n.max,e.origin)-e.originPoint,(Ll(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Yo(e,t,n,o){Fd(e.x,t.x,n.x,o?o.originX:void 0),Fd(e.y,t.y,n.y,o?o.originY:void 0)}function Od(e,t,n){e.min=n.min+t.min,e.max=e.min+Xt(t)}function W0(e,t,n){Od(e.x,t.x,n.x),Od(e.y,t.y,n.y)}function Ld(e,t,n){e.min=t.min-n.min,e.max=e.min+Xt(t)}function Jo(e,t,n){Ld(e.x,t.x,n.x),Ld(e.y,t.y,n.y)}function q0(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?rt(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?rt(n,e,o.max):Math.min(e,n)),e}function _d(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function K0(e,{top:t,left:n,bottom:o,right:s}){return{x:_d(e.x,n,s),y:_d(e.y,t,o)}}function $d(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function Q0(e,t){return{x:$d(e.x,t.x),y:$d(e.y,t.y)}}function X0(e,t){let n=.5;const o=Xt(e),s=Xt(t);return s>o?n=is(t.min,t.max-o,e.min):o>s&&(n=is(e.min,e.max-s,t.min)),ur(0,1,n)}function Y0(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _l=.35;function J0(e=_l){return e===!1?e=0:e===!0&&(e=_l),{x:Nd(e,"left","right"),y:Nd(e,"top","bottom")}}function Nd(e,t,n){return{min:Vd(e,t),max:Vd(e,n)}}function Vd(e,t){return typeof e=="number"?e:e[t]||0}const Bd=()=>({translate:0,scale:1,origin:0,originPoint:0}),io=()=>({x:Bd(),y:Bd()}),Hd=()=>({min:0,max:0}),pt=()=>({x:Hd(),y:Hd()});function en(e){return[e("x"),e("y")]}function Am({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function Z0({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ej(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function Ya(e){return e===void 0||e===1}function $l({scale:e,scaleX:t,scaleY:n}){return!Ya(e)||!Ya(t)||!Ya(n)}function wr(e){return $l(e)||Mm(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Mm(e){return zd(e.x)||zd(e.y)}function zd(e){return e&&e!=="0%"}function ki(e,t,n){const o=e-n,s=t*o;return n+s}function Ud(e,t,n,o,s){return s!==void 0&&(e=ki(e,s,o)),ki(e,n,o)+t}function Nl(e,t=0,n=1,o,s){e.min=Ud(e.min,t,n,o,s),e.max=Ud(e.max,t,n,o,s)}function Rm(e,{x:t,y:n}){Nl(e.x,t.translate,t.scale,t.originPoint),Nl(e.y,n.translate,n.scale,n.originPoint)}function tj(e,t,n,o=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ao(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Rm(e,a)),o&&wr(i.latestValues)&&ao(e,i.latestValues))}t.x=Gd(t.x),t.y=Gd(t.y)}function Gd(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function er(e,t){e.min=e.min+t,e.max=e.max+t}function Wd(e,t,[n,o,s]){const i=t[s]!==void 0?t[s]:.5,a=rt(e.min,e.max,i);Nl(e,t[n],t[o],a,t.scale)}const nj=["x","scaleX","originX"],rj=["y","scaleY","originY"];function ao(e,t){Wd(e.x,t,nj),Wd(e.y,t,rj)}function Dm(e,t){return Am(ej(e.getBoundingClientRect(),t))}function oj(e,t,n){const o=Dm(e,n),{scroll:s}=t;return s&&(er(o.x,s.offset.x),er(o.y,s.offset.y)),o}const Fm=({current:e})=>e?e.ownerDocument.defaultView:null,sj=new WeakMap;class ij{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ta(d,"page").point)},i=(d,h)=>{const{drag:p,dragPropagation:x,onDragStart:m}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qp(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),en(b=>{let y=this.getAxisMotionValue(b).get()||0;if(kn.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const C=v.layout.layoutBox[b];C&&(y=Xt(C)*(parseFloat(y)/100))}}this.originPoint[b]=y}),m&&et.update(()=>m(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:m,onDrag:g}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:b}=h;if(x&&this.currentDirection===null){this.currentDirection=aj(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),u=()=>en(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Em(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Fm(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&et.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:s}=this.getProps();if(!o||!Ws(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(a=q0(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&oo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=K0(s.layoutBox,n):this.constraints=!1,this.elastic=J0(o),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&en(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Y0(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!oo(t))return!1;const o=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=oj(o,s.root,this.visualElement.getTransformPagePoint());let a=Q0(s.layout.layoutBox,i);if(n){const l=n(Z0(a));this.hasMutatedConstraints=!!l,l&&(a=Am(l))}return a}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=en(d=>{if(!Ws(d,n,this.currentDirection))return;let h=u&&u[d]||{};a&&(h={min:0,max:0});const p=s?200:1e6,x=s?40:1e7,m={type:"inertia",velocity:o?t[d]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(l)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return o.start(Qc(t,o,0,n))}stopAnimation(){en(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){en(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),s=o[n];return s||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){en(n=>{const{drag:o}=this.getProps();if(!Ws(n,o,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-rt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!oo(n)||!o||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};en(a=>{const l=this.getAxisMotionValue(a);if(l){const u=l.get();s[a]=X0({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),en(a=>{if(!Ws(a,t,null))return;const l=this.getAxisMotionValue(a),{min:u,max:c}=this.constraints[a];l.set(rt(u,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;sj.set(this.visualElement,this);const t=this.visualElement.current,n=Gn(t,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(u)}),o=()=>{const{dragConstraints:u}=this.getProps();oo(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",o);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),o();const a=Bn(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(en(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=u[d].translate,h.set(h.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=_l,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Ws(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function aj(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class lj extends pr{constructor(t){super(t),this.removeGroupControls=at,this.removeListeners=at,this.controls=new ij(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||at}unmount(){this.removeGroupControls(),this.removeListeners()}}const qd=e=>(t,n)=>{e&&et.update(()=>e(t,n))};class cj extends pr{constructor(){super(...arguments),this.removePointerDownListener=at}onPointerDown(t){this.session=new Em(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Fm(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:s}=this.node.getProps();return{onSessionStart:qd(t),onStart:qd(n),onMove:o,onEnd:(i,a)=>{delete this.session,s&&et.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=Gn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function uj(){const e=f.useContext(Xi);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,s=f.useId();return f.useEffect(()=>o(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ti={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ke.test(e))e=parseFloat(e);else return e;const n=Kd(e,t.target.x),o=Kd(e,t.target.y);return`${n}% ${o}%`}},dj={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,s=dr.parse(e);if(s.length>5)return o;const i=dr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=u;const c=rt(l,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};class hj extends Le.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:s}=this.props,{projection:i}=t;bC(fj),i&&(n.group&&n.group.add(i),o&&o.register&&s&&o.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ti.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:s,isPresent:i}=this.props,a=o.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||et.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),o&&o.deregister&&o.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Om(e){const[t,n]=uj(),o=f.useContext(Oc);return Le.createElement(hj,{...e,layoutGroup:o,switchLayoutGroup:f.useContext(Ap),isPresent:t,safeToRemove:n})}const fj={borderRadius:{...Oo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oo,borderTopRightRadius:Oo,borderBottomLeftRadius:Oo,borderBottomRightRadius:Oo,boxShadow:dj},Lm=["TopLeft","TopRight","BottomLeft","BottomRight"],pj=Lm.length,Qd=e=>typeof e=="string"?parseFloat(e):e,Xd=e=>typeof e=="number"||ke.test(e);function mj(e,t,n,o,s,i){s?(e.opacity=rt(0,n.opacity!==void 0?n.opacity:1,gj(o)),e.opacityExit=rt(t.opacity!==void 0?t.opacity:1,0,xj(o))):i&&(e.opacity=rt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let a=0;a<pj;a++){const l=`border${Lm[a]}Radius`;let u=Yd(t,l),c=Yd(n,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Xd(u)===Xd(c)?(e[l]=Math.max(rt(Qd(u),Qd(c),o),0),(kn.test(c)||kn.test(u))&&(e[l]+="%")):e[l]=c}(t.rotate||n.rotate)&&(e.rotate=rt(t.rotate||0,n.rotate||0,o))}function Yd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gj=_m(0,.5,sm),xj=_m(.5,.95,at);function _m(e,t,n){return o=>o<e?0:o>t?1:n(is(e,t,o))}function Jd(e,t){e.min=t.min,e.max=t.max}function Zt(e,t){Jd(e.x,t.x),Jd(e.y,t.y)}function Zd(e,t,n,o,s){return e-=t,e=ki(e,1/n,o),s!==void 0&&(e=ki(e,1/s,o)),e}function yj(e,t=0,n=1,o=.5,s,i=e,a=e){if(kn.test(t)&&(t=parseFloat(t),t=rt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=rt(i.min,i.max,o);e===i&&(l-=t),e.min=Zd(e.min,t,n,l,s),e.max=Zd(e.max,t,n,l,s)}function eh(e,t,[n,o,s],i,a){yj(e,t[n],t[o],t[s],t.scale,i,a)}const bj=["x","scaleX","originX"],vj=["y","scaleY","originY"];function th(e,t,n,o){eh(e.x,t,bj,n?n.x:void 0,o?o.x:void 0),eh(e.y,t,vj,n?n.y:void 0,o?o.y:void 0)}function nh(e){return e.translate===0&&e.scale===1}function $m(e){return nh(e.x)&&nh(e.y)}function Cj(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Nm(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function rh(e){return Xt(e.x)/Xt(e.y)}class wj{constructor(){this.members=[]}add(t){Xc(this.members,t),t.scheduleRender()}remove(t){if(Yc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let o;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){o=i;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oh(e,t,n){let o="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(o=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:u,rotateX:c,rotateY:d}=n;u&&(o+=`rotate(${u}deg) `),c&&(o+=`rotateX(${c}deg) `),d&&(o+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(o+=`scale(${a}, ${l})`),o||"none"}const jj=(e,t)=>e.depth-t.depth;class Sj{constructor(){this.children=[],this.isDirty=!1}add(t){Xc(this.children,t),this.isDirty=!0}remove(t){Yc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jj),this.isDirty=!1,this.children.forEach(t)}}function Pj(e,t){const n=performance.now(),o=({timestamp:s})=>{const i=s-n;i>=t&&(Kn(o),e(i-t))};return et.read(o,!0),()=>Kn(o)}function kj(e){window.MotionDebug&&window.MotionDebug.record(e)}function Ij(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Ej(e,t,n){const o=Gt(e)?e:yo(e);return o.start(Qc("",o,t,n)),o.animation}const sh=["","X","Y","Z"],Tj={visibility:"hidden"},ih=1e3;let Aj=0;const jr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Vm({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:s}){return class{constructor(a={},l=t?.()){this.id=Aj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jr.totalNodes=jr.resolvedTargetDeltas=jr.recalculatedProjection=0,this.nodes.forEach(Dj),this.nodes.forEach($j),this.nodes.forEach(Nj),this.nodes.forEach(Fj),kj(jr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sj)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Jc),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ij(a),this.instance=a;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||u)&&(this.isLayoutDirty=!0),e){let h;const p=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Pj(p,250),ti.hasAnimatedSinceResize&&(ti.hasAnimatedSinceResize=!1,this.nodes.forEach(lh))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Uj,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=d.getProps(),v=!this.targetLayout||!Nm(this.targetLayout,m)||x,C=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,C);const k={...Kc(g,"layout"),onPlay:b,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||lh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vj),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ah);return}this.isUpdating||this.nodes.forEach(Lj),this.isUpdating=!1,this.nodes.forEach(_j),this.nodes.forEach(Mj),this.nodes.forEach(Rj),this.clearAllSnapshots();const l=performance.now();Mt.delta=ur(0,1e3/60,l-Mt.timestamp),Mt.timestamp=l,Mt.isProcessing=!0,Ba.update.process(Mt),Ba.preRender.process(Mt),Ba.render.process(Mt),Mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Oj),this.sharedNodes.forEach(Bj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:o(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!$m(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&(l||wr(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),Gj(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return pt();const l=a.measureViewportBox(),{scroll:u}=this.root;return u&&(er(l.x,u.offset.x),er(l.y,u.offset.y)),l}removeElementScroll(a){const l=pt();Zt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){Zt(l,a);const{scroll:p}=this.root;p&&(er(l.x,-p.offset.x),er(l.y,-p.offset.y))}er(l.x,d.offset.x),er(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const u=pt();Zt(u,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ao(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),wr(d.latestValues)&&ao(u,d.latestValues)}return wr(this.latestValues)&&ao(u,this.latestValues),u}removeTransform(a){const l=pt();Zt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!wr(c.latestValues))continue;$l(c.latestValues)&&c.updateSnapshot();const d=pt(),h=c.measurePageBox();Zt(d,h),th(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return wr(this.latestValues)&&th(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Mt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Jo(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pt(),this.targetWithTransforms=pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),W0(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),Rm(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Jo(this.relativeTargetOrigin,this.target,x.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$l(this.parent.latestValues)||Mm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Mt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Zt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;tj(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:m}=l;if(!m){this.projectionTransform&&(this.projectionDelta=io(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=io(),this.projectionDeltaWithTransform=io());const g=this.projectionTransform;Yo(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=oh(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),jr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const u=this.snapshot,c=u?u.latestValues:{},d={...this.latestValues},h=io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=pt(),x=u?u.source:void 0,m=this.layout?this.layout.source:void 0,g=x!==m,b=this.getStack(),y=!b||b.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(zj));this.animationProgress=0;let C;this.mixTargetDelta=k=>{const F=k/1e3;ch(h.x,a.x,F),ch(h.y,a.y,F),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hj(this.relativeTarget,this.relativeTargetOrigin,p,F),C&&Cj(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=pt()),Zt(C,this.relativeTarget)),g&&(this.animationValues=d,mj(d,c,this.latestValues,F,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{ti.hasAnimatedSinceResize=!0,this.currentAnimation=Ej(0,ih,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ih),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:d}=a;if(!(!l||!u||!c)){if(this!==a&&this.layout&&c&&Bm(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||pt();const h=Xt(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+h;const p=Xt(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+p}Zt(l,u),ao(l,d),Yo(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new wj),this.sharedNodes.get(a).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(l=!0),!l)return;const c={};for(let d=0;d<sh.length;d++){const h="rotate"+sh[d];u[h]&&(c[h]=u[h],a.setStaticValue(h,0))}a.render();for(const d in c)a.setStaticValue(d,c[d]);a.scheduleRender()}getProjectionStyles(a){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Tj;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ei(a?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=ei(a?.pointerEvents)||""),this.hasProjected&&!wr(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=oh(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x,y:m}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(u=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in bi){if(p[g]===void 0)continue;const{correct:b,applyTo:y}=bi[g],v=c.transform==="none"?p[g]:b(p[g],h);if(y){const C=y.length;for(let k=0;k<C;k++)c[y[k]]=v}else c[g]=v}return this.options.layoutId&&(c.pointerEvents=h===this?ei(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(ah),this.root.sharedNodes.clear()}}}function Mj(e){e.updateLayout()}function Rj(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:s}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?en(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],x=Xt(p);p.min=o[h].min,p.max=p.min+x}):Bm(i,n.layoutBox,o)&&en(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],x=Xt(o[h]);p.max=p.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const l=io();Yo(l,o,n.layoutBox);const u=io();a?Yo(u,e.applyTransform(s,!0),n.measuredBox):Yo(u,o,n.layoutBox);const c=!$m(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:x}=h;if(p&&x){const m=pt();Jo(m,n.layoutBox,p.layoutBox);const g=pt();Jo(g,o,x.layoutBox),Nm(m,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function Dj(e){jr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fj(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Oj(e){e.clearSnapshot()}function ah(e){e.clearMeasurements()}function Lj(e){e.isLayoutDirty=!1}function _j(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function lh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $j(e){e.resolveTargetDelta()}function Nj(e){e.calcProjection()}function Vj(e){e.resetRotation()}function Bj(e){e.removeLeadSnapshot()}function ch(e,t,n){e.translate=rt(t.translate,0,n),e.scale=rt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function uh(e,t,n,o){e.min=rt(t.min,n.min,o),e.max=rt(t.max,n.max,o)}function Hj(e,t,n,o){uh(e.x,t.x,n.x,o),uh(e.y,t.y,n.y,o)}function zj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Uj={duration:.45,ease:[.4,0,.1,1]},dh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),hh=dh("applewebkit/")&&!dh("chrome/")?Math.round:at;function fh(e){e.min=hh(e.min),e.max=hh(e.max)}function Gj(e){fh(e.x),fh(e.y)}function Bm(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ll(rh(t),rh(n),.2)}const Wj=Vm({attachResizeListener:(e,t)=>Bn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ja={current:void 0},Hm=Vm({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ja.current){const e=new Wj({});e.mount(window),e.setOptions({layoutScroll:!0}),Ja.current=e}return Ja.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),qj={pan:{Feature:cj},drag:{Feature:lj,ProjectionNode:Hm,MeasureLayout:Om}},Kj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Qj(e){const t=Kj.exec(e);if(!t)return[,];const[,n,o]=t;return[n,o]}function Vl(e,t,n=1){const[o,s]=Qj(e);if(!o)return;const i=window.getComputedStyle(t).getPropertyValue(o);if(i){const a=i.trim();return Sm(a)?parseFloat(a):a}else return Tl(s)?Vl(s,t,n+1):s}function Xj(e,{...t},n){const o=e.current;if(!(o instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Tl(i))return;const a=Vl(i,o);a&&s.set(a)});for(const s in t){const i=t[s];if(!Tl(i))continue;const a=Vl(i,o);a&&(t[s]=a,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const Yj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zm=e=>Yj.has(e),Jj=e=>Object.keys(e).some(zm),ph=e=>e===Gr||e===ke,mh=(e,t)=>parseFloat(e.split(", ")[t]),gh=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const s=o.match(/^matrix3d\((.+)\)$/);if(s)return mh(s[1],t);{const i=o.match(/^matrix\((.+)\)$/);return i?mh(i[1],e):0}},Zj=new Set(["x","y","z"]),eS=vs.filter(e=>!Zj.has(e));function tS(e){const t=[];return eS.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:gh(4,13),y:gh(5,14)};bo.translateX=bo.x;bo.translateY=bo.y;const nS=(e,t,n)=>{const o=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{l[c]=bo[c](o,i)}),t.render();const u=t.measureViewportBox();return n.forEach(c=>{const d=t.getValue(c);d&&d.jump(l[c]),e[c]=bo[c](u,i)}),e},rS=(e,t,n={},o={})=>{t={...t},o={...o};const s=Object.keys(t).filter(zm);let i=[],a=!1;const l=[];if(s.forEach(u=>{const c=e.getValue(u);if(!e.hasValue(u))return;let d=n[u],h=Fo(d);const p=t[u];let x;if(Ci(p)){const m=p.length,g=p[0]===null?1:0;d=p[g],h=Fo(d);for(let b=g;b<m&&p[b]!==null;b++)x?zc(Fo(p[b])===x):x=Fo(p[b])}else x=Fo(p);if(h!==x)if(ph(h)&&ph(x)){const m=c.get();typeof m=="string"&&c.set(parseFloat(m)),typeof p=="string"?t[u]=parseFloat(p):Array.isArray(p)&&x===ke&&(t[u]=p.map(parseFloat))}else h?.transform&&x?.transform&&(d===0||p===0)?d===0?c.set(x.transform(d)):t[u]=h.transform(p):(a||(i=tS(e),a=!0),l.push(u),o[u]=o[u]!==void 0?o[u]:t[u],c.jump(p))}),l.length){const u=l.indexOf("height")>=0?window.pageYOffset:null,c=nS(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Yi&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:o}}else return{target:t,transitionEnd:o}};function oS(e,t,n,o){return Jj(t)?rS(e,t,n,o):{target:t,transitionEnd:o}}const sS=(e,t,n,o)=>{const s=Xj(e,t,o);return t=s.target,o=s.transitionEnd,oS(e,t,n,o)},Bl={current:null},Um={current:!1};function iS(){if(Um.current=!0,!!Yi)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bl.current=e.matches;e.addListener(t),t()}else Bl.current=!1}function aS(e,t,n){const{willChange:o}=t;for(const s in t){const i=t[s],a=n[s];if(Gt(i))e.addValue(s,i),Pi(o)&&o.add(s);else if(Gt(a))e.addValue(s,yo(i,{owner:e})),Pi(o)&&o.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,yo(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const xh=new WeakMap,Gm=Object.keys(ss),lS=Gm.length,yh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cS=Fc.length;class uS{constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=Zi(n),this.isVariantNode=Tp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const p=d[h];l[h]!==void 0&&Gt(p)&&(p.set(l[h],!1),Pi(c)&&c.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,xh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),Um.current||iS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){xh.delete(this.current),this.projection&&this.projection.unmount(),Kn(this.notifyUpdate),Kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const o=Ur.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},o,s,i){let a,l;for(let u=0;u<lS;u++){const c=Gm[u],{isEnabled:d,Feature:h,ProjectionNode:p,MeasureLayout:x}=ss[c];p&&(a=p),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:d,dragConstraints:h,layoutScroll:p,layoutRoot:x}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!d||h&&oo(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<yh.length;o++){const s=yh[o];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=aS(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const n={};for(let o=0;o<cS;o++){const s=Fc[o],i=this.props[s];(os(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=yo(n,{owner:this}),this.addValue(t,o)),o}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props,s=typeof o=="string"||typeof o=="object"?(n=Hc(this.props,o))===null||n===void 0?void 0:n[t]:void 0;if(o&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Gt(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Jc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Wm extends uS{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...o},{transformValues:s},i){let a=I0(o,t||{},this);if(s&&(n&&(n=s(n)),o&&(o=s(o)),a&&(a=s(a))),i){P0(this,o,a);const l=sS(this,o,a,n);n=l.transitionEnd,o=l.target}return{transition:t,transitionEnd:n,...o}}}function dS(e){return window.getComputedStyle(e)}class hS extends Wm{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ur.has(n)){const o=qc(n);return o&&o.default||0}else{const o=dS(t),s=(Dp(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Dm(t,n)}build(t,n,o,s){_c(t,n,o,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Bc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,o,s){Np(t,n,o,s)}}class fS extends Wm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ur.has(n)){const o=qc(n);return o&&o.default||0}return n=Vp.has(n)?n:Rc(n),t.getAttribute(n)}measureInstanceViewportBox(){return pt()}scrapeMotionValuesFromProps(t,n){return Hp(t,n)}build(t,n,o,s){Nc(t,n,o,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,o,s){Bp(t,n,o,s)}mount(t){this.isSVGTag=Vc(t.tagName),super.mount(t)}}const pS=(e,t)=>Lc(e)?new fS(t,{enableHardwareAcceleration:!1}):new hS(t,{enableHardwareAcceleration:!0}),mS={layout:{ProjectionNode:Hm,MeasureLayout:Om}},gS={...H0,...lw,...qj,...mS},Ht=xC((e,t)=>QC(e,t,gS,pS));function qm(){const e=f.useRef(!1);return Mc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function xS(){const e=qm(),[t,n]=f.useState(0),o=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>et.postRender(o),[o]),t]}class yS extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bS({children:e,isPresent:t}){const n=f.useId(),o=f.useRef(null),s=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:u}=s.current;if(t||!o.current||!i||!a)return;o.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),f.createElement(yS,{isPresent:t,childRef:o,sizeRef:s},f.cloneElement(e,{ref:o}))}const Za=({children:e,initial:t,isPresent:n,onExitComplete:o,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=zp(vS),u=f.useId(),c=f.useMemo(()=>({id:u,initial:t,isPresent:n,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;o&&o()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return f.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),f.useEffect(()=>{!n&&!l.size&&o&&o()},[n]),a==="popLayout"&&(e=f.createElement(bS,{isPresent:n},e)),f.createElement(Xi.Provider,{value:c},e)};function vS(){return new Map}function CS(e){return f.useEffect(()=>()=>e(),[])}const Sr=e=>e.key||"";function wS(e,t){e.forEach(n=>{const o=Sr(n);t.set(o,n)})}function jS(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const Km=({children:e,custom:t,initial:n=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=f.useContext(Oc).forceRender||xS()[0],u=qm(),c=jS(e);let d=c;const h=f.useRef(new Map).current,p=f.useRef(d),x=f.useRef(new Map).current,m=f.useRef(!0);if(Mc(()=>{m.current=!1,wS(c,x),p.current=d}),CS(()=>{m.current=!0,x.clear(),h.clear()}),m.current)return f.createElement(f.Fragment,null,d.map(v=>f.createElement(Za,{key:Sr(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},v)));d=[...d];const g=p.current.map(Sr),b=c.map(Sr),y=g.length;for(let v=0;v<y;v++){const C=g[v];b.indexOf(C)===-1&&!h.has(C)&&h.set(C,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((v,C)=>{if(b.indexOf(C)!==-1)return;const k=x.get(C);if(!k)return;const F=g.indexOf(C);let T=v;if(!T){const I=()=>{h.delete(C);const D=Array.from(x.keys()).filter(V=>!b.includes(V));if(D.forEach(V=>x.delete(V)),p.current=c.filter(V=>{const O=Sr(V);return O===C||D.includes(O)}),!h.size){if(u.current===!1)return;l(),o&&o()}};T=f.createElement(Za,{key:Sr(k),isPresent:!1,onExitComplete:I,custom:t,presenceAffectsLayout:i,mode:a},k),h.set(C,T)}d.splice(F,0,T)}),d=d.map(v=>{const C=v.key;return h.has(C)?v:f.createElement(Za,{key:Sr(v),isPresent:!0,presenceAffectsLayout:i,mode:a},v)}),f.createElement(f.Fragment,null,h.size?d:d.map(v=>f.cloneElement(v)))};var SS={};const Qm=f.createContext(null),Wt=()=>{const e=f.useContext(Qm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},PS=({children:e})=>{const[t,n]=f.useState(null),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),c=kc(),d=SS.REACT_APP_API_URL||window.location.origin;f.useEffect(()=>{console.log("[AuthContext] Checking session on mount..."),p(),h()},[]);const h=async()=>{try{const y=await fetch(`${d}/api/auth/csrf-token`,{credentials:"include"});if(y.ok){const v=await y.json();return u(v.csrfToken),console.log("[AuthContext] CSRF token fetched:",v.csrfToken),v.csrfToken}}catch(y){console.error("[AuthContext] Failed to fetch CSRF token:",y)}return null};f.useEffect(()=>{console.log("[AuthContext] User state changed:",t)},[t]);const p=async()=>{console.log("[AuthContext] checkSession called");try{console.log("[AuthContext] Checking API /api/auth/me...");const y=await fetch(`${d}/api/auth/me`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("[AuthContext] API response status:",y.status),y.ok){const v=await y.json();console.log("[AuthContext] Got user from API:",v),n(v)}else console.log("[AuthContext] API returned non-OK status"),n(null)}catch(y){console.error("[AuthContext] Session check failed:",y),n(null)}finally{s(!1)}},b={user:t,loading:o,error:i,login:async(y,v,C=null,k=null)=>{console.log("[AuthContext] Login attempt for:",y);try{a(null);const F=await fetch(`${d}/api/auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:v,...C&&{totpToken:C},...k&&{fido2Response:k}})}),T=await F.json();if(console.log("[AuthContext] Login response:",T),!F.ok)throw new Error(T.error||"Login failed");return T.requiresTwoFactor?{requiresTwoFactor:!0,mfaMethods:T.mfaMethods||[],hasFIDO2:T.hasFIDO2,hasTOTP:T.hasTOTP}:(n(T.user),console.log("[AuthContext] Login successful, user set:",T.user),console.log("[AuthContext] Authentication uses httpOnly cookies (secure)"),await h(),c("/dashboard"),{success:!0})}catch(F){throw console.error("[AuthContext] Login error:",F),a(F.message),F}},logout:async()=>{console.log("[AuthContext] Logout called");try{await fetch(`${d}/api/auth/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(y){console.error("[AuthContext] Logout error:",y)}finally{n(null),sessionStorage.clear(),c("/login")}},checkSession:p,apiRequest:async(y,v={})=>{console.log("[AuthContext] API Request to:",y);let C=l;v.method&&v.method!=="GET"&&(C||(console.log("[AuthContext] CSRF token not found, fetching..."),C=await h()),console.log("[AuthContext] CSRF token to use:",C?`${C.substring(0,10)}...`:"none"));const k={...v,credentials:"include",headers:{"Content-Type":"application/json",...v.method&&v.method!=="GET"&&C?{"X-CSRF-Token":C}:{},...v.headers}};console.log("[AuthContext] Request headers:",k.headers);try{const F=await fetch(`${d}${y}`,k);if(F.status===401){const T=F.headers.get("content-type");if(T&&T.includes("application/json"))try{if((await F.clone().json()).requiresAdminAuth)return console.log("[AuthContext] Admin authentication required, not a login issue"),F}catch{}console.log("[AuthContext] 401 Unauthorized, redirecting to login"),sessionStorage.clear(),n(null),c("/login")}return F}catch(F){throw console.error("[AuthContext] API Request error:",F),F}}};return r.jsx(Qm.Provider,{value:b,children:e})},kS=({open:e,onClose:t,mfaMethods:n,onVerify:o,username:s})=>{const{enqueueSnackbar:i}=Jt(),[a,l]=f.useState(""),[u,c]=f.useState(""),[d,h]=f.useState(!1),[p,x]=f.useState("");f.useEffect(()=>{n&&n.length===1?l(n[0]):n&&n.includes("fido2")?l("fido2"):n&&n.includes("totp")&&l("totp")},[n]);const m=(C,k)=>{k!==null&&(l(k),x(""),c(""))},g=async()=>{if(!u||u.length!==6){x("Please enter a 6-digit code");return}h(!0),x("");try{await o("totp",u)}catch(C){x(C.message||"Invalid code"),c("")}finally{h(!1)}},b=async()=>{h(!0),x("");try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:k}=await C.json(),F=await fetch("/api/mfa/fido2/authenticate/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":k},credentials:"include",body:JSON.stringify({username:s})});if(!F.ok)throw new Error("Failed to start authentication");const{data:T}=await F.json(),I=R=>{let N=R.replace(/-/g,"+").replace(/_/g,"/");const _=(4-N.length%4)%4;_&&(N+="=".repeat(_));const L=window.atob(N),B=L.length,z=new Uint8Array(B);for(let U=0;U<B;U++)z[U]=L.charCodeAt(U);return z.buffer},D=R=>{const N=new Uint8Array(R);let _="";for(let L=0;L<N.byteLength;L++)_+=String.fromCharCode(N[L]);return window.btoa(_).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},V={...T,challenge:I(T.challenge),allowCredentials:T.allowCredentials?.map(R=>({...R,id:I(R.id)})),timeout:T.timeout||6e4,userVerification:T.userVerification||"preferred"};i("Please interact with your security key...",{variant:"info"});const O=await navigator.credentials.get({publicKey:V});if(!O)throw new Error("Authentication cancelled");const S={id:O.id,rawId:D(O.rawId),type:O.type,response:{clientDataJSON:D(O.response.clientDataJSON),authenticatorData:D(O.response.authenticatorData),signature:D(O.response.signature),userHandle:O.response.userHandle?D(O.response.userHandle):null}},$=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await $.json(),w=await fetch("/api/mfa/fido2/authenticate/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":P},credentials:"include",body:JSON.stringify({credential:S})});if(!w.ok){const R=await w.json();throw new Error(R.error||"Authentication failed")}const E=await w.json();await o("fido2",E.mfaToken||"verified"),i("Security key verified successfully!",{variant:"success"})}catch(C){console.error("FIDO2 authentication error:",C),C.name==="NotAllowedError"?x("Authentication was cancelled or timed out"):C.name==="InvalidStateError"?x("No security key registered for this account"):x(C.message||"Failed to authenticate with security key")}finally{h(!1)}},y=()=>{a==="totp"?g():a==="fido2"&&b()},v=C=>{C.key==="Enter"&&a==="totp"&&g()};return r.jsxs(lt,{open:e,onClose:()=>!d&&t(),maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:d,children:[r.jsx(ct,{children:"Two-Factor Authentication Required"}),r.jsxs(ut,{children:[r.jsxs(M,{sx:{mb:3},children:[r.jsx(A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Select your preferred authentication method:"}),n&&n.length>1&&r.jsxs(Hi,{value:a,exclusive:!0,onChange:m,fullWidth:!0,sx:{mt:2},children:[n.includes("totp")&&r.jsxs(_t,{value:"totp",children:[r.jsx(pc,{sx:{mr:1}}),"Authenticator App"]}),n.includes("fido2")&&r.jsxs(_t,{value:"fido2",children:[r.jsx(es,{sx:{mr:1}}),"Security Key"]})]})]}),p&&r.jsx(xe,{severity:"error",sx:{mb:2},children:p}),a==="totp"&&r.jsxs(M,{children:[r.jsx(A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Enter the 6-digit code from your authenticator app:"}),r.jsx(Re,{fullWidth:!0,label:"6-Digit Code",value:u,onChange:C=>{const k=C.target.value.replace(/\D/g,"");k.length<=6&&c(k)},onKeyPress:v,placeholder:"000000",autoFocus:!0,disabled:d,inputProps:{maxLength:6,pattern:"[0-9]*",inputMode:"numeric",style:{letterSpacing:"0.5em",fontSize:"1.5rem",textAlign:"center"}},sx:{mt:2}})]}),a==="fido2"&&r.jsxs(M,{textAlign:"center",sx:{py:2},children:[r.jsx(es,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(A,{variant:"body1",gutterBottom:!0,children:d?"Waiting for security key...":"Click verify to authenticate with your security key"}),r.jsx(A,{variant:"body2",color:"textSecondary",children:"Insert your security key and follow the browser prompts"}),d&&r.jsx(We,{sx:{mt:2}})]})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:t,disabled:d,children:"Cancel"}),r.jsx(Y,{onClick:y,variant:"contained",disabled:d||!a||a==="totp"&&(!u||u.length!==6),children:d?"Verifying...":"Verify"})]})]})},IS=()=>{const e=kc(),{enqueueSnackbar:t}=Jt(),{login:n}=Wt(),[o,s]=f.useState({username:"",password:"",rememberMe:!1}),[i,a]=f.useState(!1),[l,u]=f.useState(!1),[c,d]=f.useState(""),[h,p]=f.useState(!1),[x,m]=f.useState([]),g=v=>{const{name:C,value:k,checked:F}=v.target;s(T=>({...T,[C]:C==="rememberMe"?F:k})),d("")},b=async v=>{v.preventDefault(),u(!0),d("");try{const C=await n(o.username,o.password);C.requiresTwoFactor?(m(C.mfaMethods||[]),p(!0),u(!1)):C.success&&(t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(C){d(C.message||"Login failed. Please try again."),t(C.message||"Login failed",{variant:"error"})}finally{u(!1)}},y=async(v,C)=>{u(!0);try{(await n(o.username,o.password,v==="totp"?C:void 0,v==="fido2"?{fido2Verified:!0}:void 0)).success&&(p(!1),t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(k){throw u(!1),k}};return r.jsxs(M,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:v=>v.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:2},children:[r.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:r.jsxs(ze,{sx:{width:{xs:"100%",sm:400},p:4,WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)",backgroundColor:"background.paper",boxShadow:3},children:[r.jsxs(M,{sx:{textAlign:"center",mb:3},children:[r.jsx(Ht.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:r.jsx(ay,{sx:{fontSize:48,color:"primary.main",mb:2}})}),r.jsx(A,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"SMTP Relay"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Control Center Login"})]}),r.jsxs("form",{onSubmit:b,noValidate:!0,children:[r.jsx(Re,{fullWidth:!0,id:"username",name:"username",label:"Username",value:o.username,onChange:g,margin:"normal",required:!0,autoFocus:!0,autoComplete:"username","aria-label":"Username",InputProps:{startAdornment:r.jsx(Tr,{position:"start",children:r.jsx(ly,{color:"action"})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx(Re,{fullWidth:!0,id:"password",name:"password",label:"Password",type:i?"text":"password",value:o.password,onChange:g,margin:"normal",required:!0,autoComplete:"current-password","aria-label":"Password",InputProps:{startAdornment:r.jsx(Tr,{position:"start",children:r.jsx(cy,{color:"action"})}),endAdornment:r.jsx(Tr,{position:"end",children:r.jsx(Pe,{onClick:()=>a(!i),edge:"end",size:"small","aria-label":i?"Hide password":"Show password",title:i?"Hide password":"Show password",children:i?r.jsx(mc,{}):r.jsx(gc,{})})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx(hn,{control:r.jsx(Nf,{name:"rememberMe",checked:o.rememberMe,onChange:g,color:"primary"}),label:"Remember me",sx:{mt:1,mb:2}}),c&&r.jsx(Ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:r.jsx(xe,{severity:"error",sx:{mb:2},children:c})}),r.jsx(Y,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:l,sx:{mt:2,mb:2,height:48,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)"}},children:l?r.jsx(We,{size:24,color:"inherit"}):"Sign In"}),r.jsx(St,{sx:{my:2},children:r.jsx(A,{variant:"caption",color:"text.secondary",children:"SECURITY INFO"})}),r.jsx(M,{sx:{textAlign:"center"},children:r.jsx(A,{variant:"caption",color:"text.secondary",children:"This is a secure system. Unauthorized access is prohibited. All activities are monitored and logged."})})]})]})}),r.jsx(kS,{open:h,onClose:()=>p(!1),mfaMethods:x,onVerify:y,username:o.username})]})},Rn=Object.create(null);Rn.open="0";Rn.close="1";Rn.ping="2";Rn.pong="3";Rn.message="4";Rn.upgrade="5";Rn.noop="6";const ni=Object.create(null);Object.keys(Rn).forEach(e=>{ni[Rn[e]]=e});const Hl={type:"error",data:"parser error"},Xm=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ym=typeof ArrayBuffer=="function",Jm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Zc=({type:e,data:t},n,o)=>Xm&&t instanceof Blob?n?o(t):bh(t,o):Ym&&(t instanceof ArrayBuffer||Jm(t))?n?o(t):bh(new Blob([t]),o):o(Rn[e]+(t||"")),bh=(e,t)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];t("b"+(o||""))},n.readAsDataURL(e)};function vh(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let el;function ES(e,t){if(Xm&&e.data instanceof Blob)return e.data.arrayBuffer().then(vh).then(t);if(Ym&&(e.data instanceof ArrayBuffer||Jm(e.data)))return t(vh(e.data));Zc(e,!1,n=>{el||(el=new TextEncoder),t(el.encode(n))})}const Ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ch.length;e++)Uo[Ch.charCodeAt(e)]=e;const TS=e=>{let t=e.length*.75,n=e.length,o,s=0,i,a,l,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),d=new Uint8Array(c);for(o=0;o<n;o+=4)i=Uo[e.charCodeAt(o)],a=Uo[e.charCodeAt(o+1)],l=Uo[e.charCodeAt(o+2)],u=Uo[e.charCodeAt(o+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|u&63;return c},AS=typeof ArrayBuffer=="function",eu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Zm(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:MS(e.substring(1),t)}:ni[n]?e.length>1?{type:ni[n],data:e.substring(1)}:{type:ni[n]}:Hl},MS=(e,t)=>{if(AS){const n=TS(e);return Zm(n,t)}else return{base64:!0,data:e}},Zm=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},eg="",RS=(e,t)=>{const n=e.length,o=new Array(n);let s=0;e.forEach((i,a)=>{Zc(i,!1,l=>{o[a]=l,++s===n&&t(o.join(eg))})})},DS=(e,t)=>{const n=e.split(eg),o=[];for(let s=0;s<n.length;s++){const i=eu(n[s],t);if(o.push(i),i.type==="error")break}return o};function FS(){return new TransformStream({transform(e,t){ES(e,n=>{const o=n.length;let s;if(o<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,o);else if(o<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,o)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(o))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let tl;function qs(e){return e.reduce((t,n)=>t+n.length,0)}function Ks(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let s=0;s<t;s++)n[s]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function OS(e,t){tl||(tl=new TextDecoder);const n=[];let o=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(o===0){if(qs(n)<1)break;const u=Ks(n,1);i=(u[0]&128)===128,s=u[0]&127,s<126?o=3:s===126?o=1:o=2}else if(o===1){if(qs(n)<2)break;const u=Ks(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),o=3}else if(o===2){if(qs(n)<8)break;const u=Ks(n,8),c=new DataView(u.buffer,u.byteOffset,u.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Hl);break}s=d*Math.pow(2,32)+c.getUint32(4),o=3}else{if(qs(n)<s)break;const u=Ks(n,s);l.enqueue(eu(i?u:tl.decode(u),t)),o=0}if(s===0||s>e){l.enqueue(Hl);break}}}})}const tg=4;function xt(e){if(e)return LS(e)}function LS(e){for(var t in xt.prototype)e[t]=xt.prototype[t];return e}xt.prototype.on=xt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};xt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};xt.prototype.off=xt.prototype.removeListener=xt.prototype.removeAllListeners=xt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===t||o.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};xt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,t)}return this};xt.prototype.emitReserved=xt.prototype.emit;xt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};xt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ra=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),_S="arraybuffer";function ng(e,...t){return t.reduce((n,o)=>(e.hasOwnProperty(o)&&(n[o]=e[o]),n),{})}const $S=on.setTimeout,NS=on.clearTimeout;function oa(e,t){t.useNativeTimers?(e.setTimeoutFn=$S.bind(on),e.clearTimeoutFn=NS.bind(on)):(e.setTimeoutFn=on.setTimeout.bind(on),e.clearTimeoutFn=on.clearTimeout.bind(on))}const VS=1.33;function BS(e){return typeof e=="string"?HS(e):Math.ceil((e.byteLength||e.size)*VS)}function HS(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function rg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zS(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function US(e){let t={},n=e.split("&");for(let o=0,s=n.length;o<s;o++){let i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class GS extends Error{constructor(t,n,o){super(t),this.description=n,this.context=o,this.type="TransportError"}}class tu extends xt{constructor(t){super(),this.writable=!1,oa(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,o){return super.emitReserved("error",new GS(t,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=eu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=zS(t);return n.length?"?"+n:""}}class WS extends tu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};DS(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,RS(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=rg()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let og=!1;try{og=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qS=og;function KS(){}class QS extends WS{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}}doWrite(t,n){const o=this.request({method:"POST",data:t});o.on("success",n),o.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=t}}let fo=class ri extends xt{constructor(t,n,o){super(),this.createRequest=t,oa(this,o),this._opts=o,this._method=o.method||"GET",this._uri=n,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var t;const n=ng(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(n);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&o.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var s;o.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=ri.requestsCount++,ri.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=KS,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ri.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};fo.requestsCount=0;fo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wh);else if(typeof addEventListener=="function"){const e="onpagehide"in on?"pagehide":"unload";addEventListener(e,wh,!1)}}function wh(){for(let e in fo.requests)fo.requests.hasOwnProperty(e)&&fo.requests[e].abort()}const XS=function(){const e=sg({xdomain:!1});return e&&e.responseType!==null}();class YS extends QS{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=XS&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fo(sg,this.uri(),t)}}function sg(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||qS))return new XMLHttpRequest}catch{}if(!t)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ig=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class JS extends tu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,o=ig?{}:ng(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,o)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;Zc(o,this.supportsBinary,i=>{try{this.doWrite(o,i)}catch{}s&&ra(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=rg()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const nl=on.WebSocket||on.MozWebSocket;class ZS extends JS{createSocket(t,n,o){return ig?new nl(t,n,o):n?new nl(t,n):new nl(t)}doWrite(t,n){this.ws.send(n)}}class e1 extends tu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=OS(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=t.readable.pipeThrough(n).getReader(),s=FS();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{o.read().then(({done:l,value:u})=>{l||(this.onPacket(u),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;this._writer.write(o).then(()=>{s&&ra(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const t1={websocket:ZS,webtransport:e1,polling:YS},n1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function zl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");n!=-1&&o!=-1&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let s=n1.exec(e||""),i={},a=14;for(;a--;)i[r1[a]]=s[a]||"";return n!=-1&&o!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=o1(i,i.path),i.queryKey=s1(i,i.query),i}function o1(e,t){const n=/\/{2,9}/g,o=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&o.splice(0,1),t.slice(-1)=="/"&&o.splice(o.length-1,1),o}function s1(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,s,i){s&&(n[s]=i)}),n}const Ul=typeof addEventListener=="function"&&typeof removeEventListener=="function",oi=[];Ul&&addEventListener("offline",()=>{oi.forEach(e=>e())},!1);class cr extends xt{constructor(t,n){if(super(),this.binaryType=_S,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const o=zl(t);n.hostname=o.host,n.secure=o.protocol==="https"||o.protocol==="wss",n.port=o.port,o.query&&(n.query=o.query)}else n.host&&(n.hostname=zl(n.host).host);oa(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(o=>{const s=o.prototype.name;this.transports.push(s),this._transportsByName[s]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=US(this.opts.query)),Ul&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},oi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=tg,n.transport=t,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&cr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",cr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const s=this.writeBuffer[o].data;if(s&&(n+=BS(s)),o>0&&n>this._maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ra(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,o){return this._sendPacket("message",t,n,o),this}send(t,n,o){return this._sendPacket("message",t,n,o),this}_sendPacket(t,n,o,s){if(typeof n=="function"&&(s=n,n=void 0),typeof o=="function"&&(s=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const i={type:t,data:n,options:o};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}_onError(t){if(cr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ul&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=oi.indexOf(this._offlineEventListener);o!==-1&&oi.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}cr.protocol=tg;class i1 extends cr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),o=!1;cr.priorWebsocketSuccess=!1;const s=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!o)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;cr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){o||(o=!0,d(),n.close(),n=null)}const a=h=>{const p=new Error("probe error: "+h);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function u(){a("socket closed")}function c(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",l),this.off("close",u),this.off("upgrading",c)};n.once("open",s),n.once("error",a),n.once("close",l),this.once("close",u),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let o=0;o<t.length;o++)~this.transports.indexOf(t[o])&&n.push(t[o]);return n}}let a1=class extends i1{constructor(t,n={}){const o=typeof t=="object"?t:n;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(s=>t1[s]).filter(s=>!!s)),super(t,o)}};function l1(e,t="",n){let o=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),o=zl(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const i=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port+t,o.href=o.protocol+"://"+i+(n&&n.port===o.port?"":":"+o.port),o}const c1=typeof ArrayBuffer=="function",u1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ag=Object.prototype.toString,d1=typeof Blob=="function"||typeof Blob<"u"&&ag.call(Blob)==="[object BlobConstructor]",h1=typeof File=="function"||typeof File<"u"&&ag.call(File)==="[object FileConstructor]";function nu(e){return c1&&(e instanceof ArrayBuffer||u1(e))||d1&&e instanceof Blob||h1&&e instanceof File}function si(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,o=e.length;n<o;n++)if(si(e[n]))return!0;return!1}if(nu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return si(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&si(e[n]))return!0;return!1}function f1(e){const t=[],n=e.data,o=e;return o.data=Gl(n,t),o.attachments=t.length,{packet:o,buffers:t}}function Gl(e,t){if(!e)return e;if(nu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=Gl(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=Gl(e[o],t));return n}return e}function p1(e,t){return e.data=Wl(e.data,t),delete e.attachments,e}function Wl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Wl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Wl(e[n],t));return e}const m1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],g1=5;var He;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(He||(He={}));class x1{constructor(t){this.replacer=t}encode(t){return(t.type===He.EVENT||t.type===He.ACK)&&si(t)?this.encodeAsBinary({type:t.type===He.EVENT?He.BINARY_EVENT:He.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===He.BINARY_EVENT||t.type===He.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=f1(t),o=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(o),s}}function jh(e){return Object.prototype.toString.call(e)==="[object Object]"}class ru extends xt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const o=n.type===He.BINARY_EVENT;o||n.type===He.BINARY_ACK?(n.type=o?He.EVENT:He.ACK,this.reconstructor=new y1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(nu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const o={type:Number(t.charAt(0))};if(He[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===He.BINARY_EVENT||o.type===He.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(i,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(a)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););o.nsp=t.substring(i,n)}else o.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}o.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(ru.isPayloadValid(o.type,i))o.data=i;else throw new Error("invalid payload")}return o}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case He.CONNECT:return jh(n);case He.DISCONNECT:return n===void 0;case He.CONNECT_ERROR:return typeof n=="string"||jh(n);case He.EVENT:case He.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&m1.indexOf(n[0])===-1);case He.ACK:case He.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class y1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=p1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const b1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ru,Encoder:x1,get PacketType(){return He},protocol:g1},Symbol.toStringTag,{value:"Module"}));function cn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const v1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class lg extends xt{constructor(t,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[cn(t,"open",this.onopen.bind(this)),cn(t,"packet",this.onpacket.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var o,s,i;if(v1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:He.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),a.id=d}const l=(s=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var o;const s=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((o,s)=>{const i=(a,l)=>a?s(a):o(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>o!==this._queue[0]?void 0:(s!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:He.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(o=>String(o.id)===t)){const o=this.acks[t];delete this.acks[t],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case He.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case He.EVENT:case He.BINARY_EVENT:this.onevent(t);break;case He.ACK:case He.BINARY_ACK:this.onack(t);break;case He.DISCONNECT:this.ondisconnect();break;case He.CONNECT_ERROR:this.destroy();const o=new Error(t.data.message);o.data=t.data.data,this.emitReserved("connect_error",o);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let o=!1;return function(...s){o||(o=!0,n.packet({type:He.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:He.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,t.data)}}}function jo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}jo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};jo.prototype.reset=function(){this.attempts=0};jo.prototype.setMin=function(e){this.ms=e};jo.prototype.setMax=function(e){this.max=e};jo.prototype.setJitter=function(e){this.jitter=e};class ql extends xt{constructor(t,n){var o;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,oa(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new jo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||b1;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new a1(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const s=cn(n,"open",function(){o.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=cn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(cn(t,"ping",this.onping.bind(this)),cn(t,"data",this.ondata.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this)),cn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ra(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let o=this.nsps[t];return o?this._autoConnect&&!o.active&&o.connect():(o=new lg(this,t,n),this.nsps[t]=o),o}_destroy(t){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let o=0;o<n.length;o++)this.engine.write(n[o],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Lo={};function ii(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=l1(e,t.path||"/socket.io"),o=n.source,s=n.id,i=n.path,a=Lo[s]&&i in Lo[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let u;return l?u=new ql(o,t):(Lo[s]||(Lo[s]=new ql(o,t)),u=Lo[s]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(ii,{Manager:ql,Socket:lg,io:ii,connect:ii});var C1={};const cg=f.createContext(null),ou=()=>{const e=f.useContext(cg);if(!e)throw new Error("useWebSocket must be used within WebSocketProvider");return e},w1=({children:e})=>{const[t,n]=f.useState(null),[o,s]=f.useState(!1),[i,a]=f.useState(null),[l,u]=f.useState([]),[c,d]=f.useState(null),{user:h}=Wt(),p=C1.REACT_APP_API_URL||"http://localhost:3001";f.useEffect(()=>{if(!h){t&&(t.disconnect(),n(null));return}const v=ii(p,{withCredentials:!0,transports:["websocket","polling"]});return v.on("connect",()=>{console.log("WebSocket connected"),s(!0),v.emit("request:stats"),v.emit("request:devices")}),v.on("disconnect",()=>{console.log("WebSocket disconnected"),s(!1)}),v.on("connect_error",C=>{console.error("WebSocket connection error:",C.message),s(!1)}),v.on("stats:update",C=>{a(C)}),v.on("devices:update",C=>{u(C)}),v.on("queue:update",C=>{d(C)}),v.on("email:sent",C=>{console.log("Email sent:",C)}),v.on("email:failed",C=>{console.error("Email failed:",C)}),n(v),()=>{v.disconnect()}},[h,p]);const y={socket:t,connected:o,stats:i,devices:l,queueStatus:c,requestStats:()=>{t&&o&&t.emit("request:stats")},requestDevices:()=>{t&&o&&t.emit("request:devices")},requestQueueStatus:()=>{t&&o&&t.emit("request:queue")},sendCommand:(v,C)=>{t&&o&&t.emit(v,C)}};return r.jsx(cg.Provider,{value:y,children:e})},Qs=({title:e,value:t,icon:n,color:o,trend:s})=>r.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:e}),r.jsx(A,{variant:"h4",component:"div",children:t}),s&&r.jsxs(A,{variant:"body2",color:s>0?"success.main":"error.main",children:[s>0?"+":"",s,"%"]})]}),r.jsx(M,{sx:{color:o},children:n})]})})})}),j1=()=>{const{socket:e,connected:t}=ou(),[n,o]=f.useState({totalEmails:0,emailsToday:0,activeDevices:0,queueSize:0,successRate:0,avgProcessingTime:0}),[s,i]=f.useState([]),[a,l]=f.useState({smtp:"healthy",exchange:"healthy",redis:"healthy",disk:85,memory:65,cpu:45});f.useEffect(()=>{if(e&&t)return e.emit("request:stats"),e.on("stats:update",d=>{o(h=>({...h,totalEmails:d.totalEmails??h.totalEmails,emailsToday:d.emailsToday??h.emailsToday,activeDevices:d.activeDevices??h.activeDevices,queueSize:d.queueSize??h.queueSize,successRate:d.successRate??h.successRate,avgProcessingTime:d.avgProcessingTime??h.avgProcessingTime}))}),e.on("activity:update",d=>{i(d)}),e.on("health:update",d=>{l(d)}),()=>{e.off("stats:update"),e.off("activity:update"),e.off("health:update")}},[e,t]);const u=()=>{e&&t&&e.emit("request:stats")},c=d=>{switch(d){case"healthy":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(Tn,{color:"warning"});case"error":return r.jsx(xn,{color:"error"});default:return r.jsx(Ne,{})}};return r.jsxs(M,{sx:{flexGrow:1,p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(A,{variant:"h4",component:"h1",children:"Dashboard"}),r.jsx(it,{title:"Refresh",children:r.jsx(Pe,{onClick:u,children:r.jsx(gn,{})})})]}),!t&&r.jsx(M,{mb:2,children:r.jsx(we,{label:"Connecting to server...",color:"warning",icon:r.jsx(Tn,{})})}),r.jsxs(Q,{container:!0,spacing:3,mb:3,children:[r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Qs,{title:"Total Emails",value:n.totalEmails.toLocaleString(),icon:r.jsx(mo,{fontSize:"large"}),color:"primary.main",trend:12})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Qs,{title:"Active Devices",value:n.activeDevices,icon:r.jsx(Vf,{fontSize:"large"}),color:"success.main"})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Qs,{title:"Queue Size",value:n.queueSize,icon:r.jsx(Bf,{fontSize:"large"}),color:"warning.main"})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Qs,{title:"Success Rate",value:`${n.successRate}%`,icon:r.jsx(Fn,{fontSize:"large"}),color:"info.main"})})]}),r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{elevation:3,sx:{p:2},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"System Health"}),r.jsxs(M,{sx:{mt:2},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[c(a.smtp),r.jsx(A,{sx:{ml:1},children:"SMTP Server"})]}),r.jsx(we,{label:a.smtp,color:a.smtp==="healthy"?"success":"error",size:"small"})]}),r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[c(a.exchange),r.jsx(A,{sx:{ml:1},children:"Exchange Online"})]}),r.jsx(we,{label:a.exchange,color:a.exchange==="healthy"?"success":"error",size:"small"})]}),r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[c(a.redis),r.jsx(A,{sx:{ml:1},children:"Redis Cache"})]}),r.jsx(we,{label:a.redis,color:a.redis==="healthy"?"success":"error",size:"small"})]}),r.jsxs(M,{mt:3,children:[r.jsxs(A,{variant:"body2",gutterBottom:!0,children:["CPU Usage (",a.cpu,"%)"]}),r.jsx(Qt,{variant:"determinate",value:a.cpu,color:a.cpu>80?"error":"primary"})]}),r.jsxs(M,{mt:2,children:[r.jsxs(A,{variant:"body2",gutterBottom:!0,children:["Memory Usage (",a.memory,"%)"]}),r.jsx(Qt,{variant:"determinate",value:a.memory,color:a.memory>80?"error":"primary"})]}),r.jsxs(M,{mt:2,children:[r.jsxs(A,{variant:"body2",gutterBottom:!0,children:["Disk Usage (",a.disk,"%)"]}),r.jsx(Qt,{variant:"determinate",value:a.disk,color:a.disk>90?"error":a.disk>80?"warning":"primary"})]})]})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{elevation:3,sx:{p:2},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),r.jsx(M,{sx:{mt:2},children:s.length===0?r.jsx(A,{color:"textSecondary",align:"center",children:"No recent activity"}):s.map((d,h)=>r.jsxs(M,{sx:{mb:1,pb:1,borderBottom:"1px solid #e0e0e0"},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",children:[r.jsxs(A,{variant:"body2",children:[d.device," - ",d.action]}),r.jsx(A,{variant:"caption",color:"textSecondary",children:d.time})]}),d.details&&r.jsx(A,{variant:"caption",color:"textSecondary",children:d.details})]},h))})]})})]})]})},ug=f.createContext(void 0);function Ve(){const e=f.useContext(ug);if(e===void 0)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const dg=f.createContext(void 0),pe=()=>{const e=f.useContext(dg);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},hg=f.createContext(void 0);function mr(){const e=f.useContext(hg);if(e===void 0)throw new Error(["MUI: Could not find the data grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const Sh={};function su(e,t){const n=f.useRef(Sh);return n.current===Sh&&(n.current=e(t)),n}const S1=[];function fg(e){f.useEffect(e,S1)}const On=(e,t="warning")=>{let n=!1;const o=Array.isArray(e)?e.join(`
`):e;return()=>{n||(n=!0,t==="error"?console.error(o):console.warn(o))}},P1=Object.is;function pg(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,o=0;for(const s in e)if(n+=1,!P1(e[s],t[s])||!(s in t))return!1;for(const s in t)o+=1;return n===o}On(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);function k1(e){return e.acceptsApiRef}function Ph(e,t){return k1(t)?t(e):t(e.current.state)}const I1=Object.is,iu=pg,E1=()=>({state:null,equals:null,selector:null}),ie=(e,t,n=I1)=>{const o=su(E1),s=o.current.selector!==null,[i,a]=f.useState(s?null:Ph(e,t));return o.current.state=i,o.current.equals=n,o.current.selector=t,fg(()=>e.current.store.subscribe(()=>{const l=Ph(e,o.current.selector);o.current.equals(o.current.state,l)||(o.current.state=l,a(l))})),i};function Be(e){return hr("MuiDataGrid",e)}const H=Qn("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","autoHeight","autosizing","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--selectionMode","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorderColor","cell--withRightBorder","columnHeader--withRightBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]);var Ii="NOT_FOUND";function T1(e){var t;return{get:function(o){return t&&e(t.key,o)?t.value:Ii},put:function(o,s){t={key:o,value:s}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function A1(e,t){var n=[];function o(l){var u=n.findIndex(function(d){return t(l,d.key)});if(u>-1){var c=n[u];return u>0&&(n.splice(u,1),n.unshift(c)),c.value}return Ii}function s(l,u){o(l)===Ii&&(n.unshift({key:l,value:u}),n.length>e&&n.pop())}function i(){return n}function a(){n=[]}return{get:o,put:s,getEntries:i,clear:a}}var M1=function(t,n){return t===n};function R1(e){return function(n,o){if(n===null||o===null||n.length!==o.length)return!1;for(var s=n.length,i=0;i<s;i++)if(!e(n[i],o[i]))return!1;return!0}}function sa(e,t){var n=typeof t=="object"?t:{equalityCheck:t},o=n.equalityCheck,s=o===void 0?M1:o,i=n.maxSize,a=i===void 0?1:i,l=n.resultEqualityCheck,u=R1(s),c=a===1?T1(u):A1(a,u);function d(){var h=c.get(arguments);if(h===Ii){if(h=e.apply(null,arguments),l){var p=c.getEntries(),x=p.find(function(m){return l(m.value,h)});x&&(h=x.value)}c.put(arguments,h)}return h}return d.clearCache=function(){return c.clear()},d}function D1(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(o){return typeof o=="function"})){var n=t.map(function(o){return typeof o=="function"?"function "+(o.name||"unnamed")+"()":typeof o}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function F1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=0,d,h={memoizeOptions:void 0},p=l.pop();if(typeof p=="object"&&(h=p,p=l.pop()),typeof p!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof p+"]");var x=h,m=x.memoizeOptions,g=m===void 0?n:m,b=Array.isArray(g)?g:[g],y=D1(l),v=e.apply(void 0,[function(){return c++,p.apply(null,arguments)}].concat(b)),C=e(function(){for(var F=[],T=y.length,I=0;I<T;I++)F.push(y[I].apply(null,arguments));return d=v.apply(null,F),d});return Object.assign(C,{resultFunc:p,memoizedResultFunc:v,dependencies:y,lastResult:function(){return d},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),C};return s}var O1=F1(sa);const L1={cache:new WeakMap};On(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g. `mySelector(state, apiRef.current.instanceId)`."]);function Kl(e){return"current"in e&&"instanceId"in e.current}const Ql={id:"default"},Te=(e,t,n,o,s,i,...a)=>{if(a.length>0)throw new Error("Unsupported number of selectors");let l;if(e&&t&&n)l=(u,c)=>{const d=Kl(u),h=c??(d?u.current.instanceId:Ql),p=d?u.current.state:u,x=e(p,h),m=t(p,h);return n(x,m)};else if(e&&t)l=(u,c)=>{const d=Kl(u),h=c??(d?u.current.instanceId:Ql),p=d?u.current.state:u,x=e(p,h);return t(x)};else throw new Error("Missing arguments");return l.acceptsApiRef=!0,l},nt=(...e)=>{const t=(...n)=>{var o,s;const[i,a]=n,l=Kl(i),u=l?i.current.instanceId:a??Ql,c=l?i.current.state:i,{cache:d}=L1;if(d.get(u)&&(o=d.get(u))!=null&&o.get(e)){var h;return(h=d.get(u))==null?void 0:h.get(e)(c,u)}const p=O1(...e);return d.get(u)||d.set(u,new Map),(s=d.get(u))==null||s.set(e,p),p(c,u)};return t.acceptsApiRef=!0,t},Fr=e=>e.columns,qn=Te(Fr,e=>e.orderedFields),So=Te(Fr,e=>e.lookup),In=nt(qn,So,(e,t)=>e.map(n=>t[n])),fn=Te(Fr,e=>e.columnVisibilityModel),Pt=nt(In,fn,(e,t)=>e.filter(n=>t[n.field]!==!1)),ia=nt(Pt,e=>e.map(t=>t.field)),vo=nt(Pt,e=>{const t=[];let n=0;for(let o=0;o<e.length;o+=1)t.push(n),n+=e[o].computedWidth;return t}),au=Te(Pt,vo,(e,t)=>{const n=e.length;return n===0?0:t[n-1]+e[n-1].computedWidth}),mg=nt(In,e=>e.filter(t=>t.filterable)),_1=nt(In,e=>e.reduce((t,n)=>(n.filterable&&(t[n.field]=n),t),{})),aa=e=>e.columnGrouping,$1=nt(aa,e=>{var t;return(t=e?.unwrappedGroupingModel)!=null?t:{}}),gg=nt(aa,e=>{var t;return(t=e?.lookup)!=null?t:{}}),N1=nt(aa,e=>{var t;return(t=e?.headerStructure)!=null?t:[]}),Ss=Te(aa,e=>{var t;return(t=e?.maxDepth)!=null?t:0}),yn=e=>e.rows,la=Te(yn,e=>e.totalRowCount),V1=Te(yn,e=>e.loading),B1=Te(yn,e=>e.totalTopLevelRowCount),Hn=Te(yn,e=>e.dataRowIdToModelLookup),Ei=Te(yn,e=>e.dataRowIdToIdLookup),dn=Te(yn,e=>e.tree),H1=Te(yn,e=>e.groupingName),kh=Te(yn,e=>e.treeDepths),ca=nt(yn,e=>{const t=Object.entries(e.treeDepths);return t.length===0?1:t.filter(([,n])=>n>0).map(([n])=>Number(n)).sort((n,o)=>o-n)[0]+1}),Go=Te(yn,e=>e.dataRowIds),z1=Te(yn,e=>e?.additionalRowGroups),Po=nt(z1,e=>{var t,n;const o=e?.pinnedRows;return{bottom:o==null||(t=o.bottom)==null?void 0:t.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}}),top:o==null||(n=o.top)==null?void 0:n.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}})}}),U1=Te(Po,e=>{var t,n;return((e==null||(t=e.top)==null?void 0:t.length)||0)+((e==null||(n=e.bottom)==null?void 0:n.length)||0)}),xg=()=>{var e;const t=mr(),n=pe(),o=ie(t,Pt),s=ie(t,la),i=ie(t,Ss),a=ie(t,U1);let l="grid";return(e=n.experimentalFeatures)!=null&&e.ariaV7&&n.treeData&&(l="treegrid"),{role:l,"aria-colcount":o.length,"aria-rowcount":i+1+a+s,"aria-multiselectable":!n.disableMultipleRowSelection}},G1=e=>{const{classes:t}=e;return Ee({root:["main"]},Be,t)},W1=It("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})(()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"})),q1=f.forwardRef((e,t)=>{var n;const o=pe(),s=G1(o),i=(n=o.experimentalFeatures)!=null&&n.ariaV7?xg:null,a=typeof i=="function"?i():null;return r.jsx(W1,j({ref:t,className:s.root,ownerState:o},a,{children:e.children}))}),yg=e=>e.sorting,lu=Te(yg,e=>e.sortedRows),cu=nt(lu,Hn,(e,t)=>e.map(n=>{var o;return{id:n,model:(o=t[n])!=null?o:{}}})),tn=Te(yg,e=>e.sortModel),K1=nt(tn,e=>e.reduce((n,o,s)=>(n[o.field]={sortDirection:o.sort,sortIndex:e.length>1?s+1:void 0},n),{})),uu=e=>e.filter,bt=Te(uu,e=>e.filterModel);Te(bt,e=>e.quickFilterValues);const Q1=e=>e.visibleRowsLookup,bg=Te(uu,e=>e.filteredRowsLookup);Te(uu,e=>e.filteredDescendantCountLookup);const gr=nt(Q1,cu,(e,t)=>t.filter(n=>e[n.id]!==!1)),Zo=nt(gr,e=>e.map(t=>t.id)),X1=nt(bg,cu,(e,t)=>t.filter(n=>e[n.id]!==!1)),Y1=nt(X1,e=>e.map(t=>t.id)),vg=nt(gr,dn,ca,(e,t,n)=>n<2?e:e.filter(o=>{var s;return((s=t[o.id])==null?void 0:s.depth)===0})),Cg=Te(gr,e=>e.length),wg=Te(vg,e=>e.length),J1=nt(bt,So,(e,t)=>{var n;return(n=e.items)==null?void 0:n.filter(o=>{var s,i;if(!o.field)return!1;const a=t[o.field];if(!(a!=null&&a.filterOperators)||(a==null||(s=a.filterOperators)==null?void 0:s.length)===0)return!1;const l=a.filterOperators.find(u=>u.value===o.operator);return l?!l.InputComponent||o.value!=null&&((i=o.value)==null?void 0:i.toString())!=="":!1})}),Z1=nt(J1,e=>e.reduce((n,o)=>(n[o.field]?n[o.field].push(o):n[o.field]=[o],n),{})),ua=e=>e.focus,qt=Te(ua,e=>e.cell),eP=Te(ua,e=>e.columnHeader);Te(ua,e=>e.columnHeaderFilter);const Ti=Te(ua,e=>e.columnGroupHeader),da=e=>e.tabIndex,Ai=Te(da,e=>e.cell),jg=Te(da,e=>e.columnHeader);Te(da,e=>e.columnHeaderFilter);const tP=Te(da,e=>e.columnGroupHeader),du=e=>e.density,nP=Te(du,e=>e.value),ko=Te(du,e=>e.factor),Xl=e=>e.columnMenu;function rP(e){const{VirtualScrollerComponent:t,ColumnHeadersProps:n,children:o}=e,s=mr(),i=pe(),a=f.useRef(null),l=ie(s,Pt),u=ie(s,Z1),c=ie(s,K1),d=ie(s,vo),h=ie(s,jg),p=ie(s,Ai),x=ie(s,tP),m=ie(s,eP),g=ie(s,Ti),b=ie(s,ko),y=ie(s,Ss),v=ie(s,Xl),C=ie(s,fn),k=ie(s,N1),F=!(x===null&&h===null&&p===null);kt(()=>{s.current.computeSizeAndPublishResizeEvent();const O=a.current;if(typeof ResizeObserver>"u")return()=>{};let S;const $=new ResizeObserver(()=>{S=requestAnimationFrame(()=>{s.current.computeSizeAndPublishResizeEvent()})});return O&&$.observe(O),()=>{S&&window.cancelAnimationFrame(S),O&&$.unobserve(O)}},[s]);const T=f.useRef(null),I=f.useRef(null),D=f.useRef(null);s.current.register("private",{columnHeadersContainerElementRef:I,columnHeadersElementRef:T,virtualScrollerRef:D,mainElementRef:a});const V=!!s.current.getRootDimensions();return r.jsxs(q1,{ref:a,children:[r.jsx(i.slots.columnHeaders,j({ref:I,innerRef:T,visibleColumns:l,filterColumnLookup:u,sortColumnLookup:c,columnPositions:d,columnHeaderTabIndexState:h,columnGroupHeaderTabIndexState:x,columnHeaderFocus:m,columnGroupHeaderFocus:g,densityFactor:b,headerGroupingMaxDepth:y,columnMenuState:v,columnVisibility:C,columnGroupsHeaderStructure:k,hasOtherElementInTabSequence:F},n)),V&&r.jsx(t,{ref:D}),o]})}function oP(){var e;const t=pe();return t.hideFooter?null:r.jsx(t.slots.footer,j({},(e=t.slotProps)==null?void 0:e.footer))}const Lt="auto-generated-group-node-root",po=Symbol("mui.id_autogenerated"),sP=()=>({type:"group",id:Lt,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null});function iP(e,t,n="A row was provided without id in the rows prop:"){if(e==null)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join(`
`))}const Mi=(e,t,n)=>{const o=t?t(e):e.id;return iP(o,e,n),o},ai=({rows:e,getRowId:t,loading:n,rowCount:o})=>{const s={type:"full",rows:[]},i={},a={};for(let l=0;l<e.length;l+=1){const u=e[l],c=Mi(u,t);i[c]=u,a[c]=c,s.rows.push(c)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:n,rowCountPropBeforePartialUpdates:o,updates:s,dataRowIdToIdLookup:a,dataRowIdToModelLookup:i}},Sg=({tree:e,rowCountProp:t=0})=>{const n=e[Lt];return Math.max(t,n.children.length+(n.footerId==null?0:1))},Pg=({apiRef:e,rowCountProp:t=0,loadingProp:n,previousTree:o,previousTreeDepths:s})=>{const i=e.current.caches.rows,{tree:a,treeDepths:l,dataRowIds:u,groupingName:c}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:o,previousTreeDepths:s,updates:i.updates,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIdToModelLookup:i.dataRowIdToModelLookup}),d=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:a,treeDepths:l,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIds:u,dataRowIdToModelLookup:i.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},j({},d,{totalRowCount:Math.max(t,d.dataRowIds.length),totalTopLevelRowCount:Sg({tree:d.tree,rowCountProp:t}),groupingName:c,loading:n})},as=e=>e.type==="skeletonRow"||e.type==="footer"||e.type==="group"&&e.isAutoGenerated||e.type==="pinnedRow"&&e.isAutoGenerated,hu=(e,t,n)=>{const o=e[t];if(o.type!=="group")return[];const s=[];for(let i=0;i<o.children.length;i+=1){const a=o.children[i];(!n||!as(e[a]))&&s.push(a);const l=hu(e,a,n);for(let u=0;u<l.length;u+=1)s.push(l[u])}return!n&&o.footerId!=null&&s.push(o.footerId),s},aP=({previousCache:e,getRowId:t,updates:n})=>{var o,s,i;if(e.updates.type==="full")throw new Error("MUI: Unable to prepare a partial update if a full update is not applied yet");const a=new Map;n.forEach(p=>{const x=Mi(p,t,"A row was provided without id when calling updateRows():");a.has(x)?a.set(x,j({},a.get(x),p)):a.set(x,p)});const l={type:"partial",actions:{insert:[...(o=e.updates.actions.insert)!=null?o:[]],modify:[...(s=e.updates.actions.modify)!=null?s:[]],remove:[...(i=e.updates.actions.remove)!=null?i:[]]},idToActionLookup:j({},e.updates.idToActionLookup)},u=j({},e.dataRowIdToModelLookup),c=j({},e.dataRowIdToIdLookup),d={insert:{},modify:{},remove:{}};a.forEach((p,x)=>{const m=l.idToActionLookup[x];if(p._action==="delete"){if(m==="remove"||!u[x])return;m!=null&&(d[m][x]=!0),l.actions.remove.push(x),delete u[x],delete c[x];return}const g=u[x];if(g){m==="remove"?(d.remove[x]=!0,l.actions.modify.push(x)):m==null&&l.actions.modify.push(x),u[x]=j({},g,p);return}m==="remove"?(d.remove[x]=!0,l.actions.insert.push(x)):m==null&&l.actions.insert.push(x),u[x]=p,c[x]=x});const h=Object.keys(d);for(let p=0;p<h.length;p+=1){const x=h[p],m=d[x];Object.keys(m).length>0&&(l.actions[x]=l.actions[x].filter(g=>!m[g]))}return{dataRowIdToModelLookup:u,dataRowIdToIdLookup:c,updates:l,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}};function kg(e){var t,n;const o=Po(e),s=(o==null||(t=o.top)==null?void 0:t.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0,i=(o==null||(n=o.bottom)==null?void 0:n.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0;return{top:s,bottom:i}}function Ig(e,t){const n=ko(e);return`var(--DataGrid-overlayHeight, ${2*Math.floor(t*n)}px)`}const lP=It("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapper})(({overlayType:e})=>({position:"sticky",top:0,left:0,width:0,height:0,zIndex:e==="loadingOverlay"?5:4})),cP=It("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapperInner})({}),uP=e=>{const{classes:t}=e;return Ee({root:["overlayWrapper"],inner:["overlayWrapperInner"]},Be,t)};function dP(e){var t,n;const o=Ve(),s=pe(),[i,a]=f.useState(()=>{var d,h;return(d=(h=o.current.getRootDimensions())==null?void 0:h.viewportInnerSize)!=null?d:null}),l=f.useCallback(()=>{var d,h;a((d=(h=o.current.getRootDimensions())==null?void 0:h.viewportInnerSize)!=null?d:null)},[o]);kt(()=>o.current.subscribeEvent("viewportInnerSizeChange",l),[o,l]);let u=(t=i?.height)!=null?t:0;s.autoHeight&&u===0&&(u=Ig(o,s.rowHeight));const c=uP(j({},e,{classes:s.classes}));return i?r.jsx(lP,{className:$e(c.root),overlayType:e.overlayType,children:r.jsx(cP,j({className:$e(c.inner),style:{height:u,width:(n=i?.width)!=null?n:0}},e))}):null}function hP(){const e=Ve(),t=pe(),n=ie(e,la),o=ie(e,Cg),s=ie(e,V1),i=!s&&n===0,a=!s&&n>0&&o===0;let l=null,u="";if(i){var c;l=r.jsx(t.slots.noRowsOverlay,j({},(c=t.slotProps)==null?void 0:c.noRowsOverlay)),u="noRowsOverlay"}if(a){var d;l=r.jsx(t.slots.noResultsOverlay,j({},(d=t.slotProps)==null?void 0:d.noResultsOverlay)),u="noResultsOverlay"}if(s){var h;l=r.jsx(t.slots.loadingOverlay,j({},(h=t.slotProps)==null?void 0:h.loadingOverlay)),u="loadingOverlay"}return l===null?null:r.jsx(dP,{overlayType:u,children:l})}function ha(e){return f.memo(e,pg)}let rl;function fP(){return rl===void 0&&document.createElement("div").focus({get preventScroll(){return rl=!0,!1}}),rl}var Dn=function(e){return e.Cell="cell",e.Row="row",e}(Dn||{}),Ke=function(e){return e.Edit="edit",e.View="view",e}(Ke||{}),Je=function(e){return e.Edit="edit",e.View="view",e}(Je||{}),Vt=function(e){return e.And="and",e.Or="or",e}(Vt||{}),$n=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}($n||{}),ln=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(ln||{}),Yn=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(Yn||{}),Nn=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(Nn||{});function Eg(e){return e.field!==void 0}function pP(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function mP(e,t){return e.closest(`.${t}`)}function fu(e){return e.replace(/["\\]/g,"\\$&")}function gP(e,t){return e.querySelector(`[role="columnheader"][data-field="${fu(t)}"]`)}function Tg(e){return`.${H.row}[data-id="${fu(String(e))}"]`}function xP(e,t){return e.querySelector(Tg(t))}function yP(e,{id:t,field:n}){const o=Tg(t),s=`.${H.cell}[data-field="${fu(n)}"]`,i=`${o} ${s}`;return e.querySelector(i)}function Ps(e){return e.target.nodeType===1&&!e.currentTarget.contains(e.target)}function Fe(e,t,n){const o=f.useRef(!0);f.useEffect(()=>{o.current=!1,e.current.register(n,t)},[e,n,t]),o.current&&e.current.register(n,t)}class lo extends Error{}function bP(e,t){const{getRowId:n}=t,o=f.useCallback(m=>({field:m,colDef:e.current.getColumn(m)}),[e]),s=f.useCallback(m=>{const g=e.current.getRow(m);if(!g)throw new lo(`No row with id #${m} found`);return{id:m,columns:e.current.getAllColumns(),row:g}},[e]),i=f.useCallback((m,g)=>{const b=e.current.getRow(m),y=e.current.getRowNode(m);if(!b||!y)throw new lo(`No row with id #${m} found`);const v=qt(e),C=Ai(e);return{id:m,field:g,row:b,rowNode:y,value:b[g],colDef:e.current.getColumn(g),cellMode:e.current.getCellMode(m,g),api:e.current,hasFocus:v!==null&&v.field===g&&v.id===m,tabIndex:C&&C.field===g&&C.id===m?0:-1}},[e]),a=f.useCallback((m,g)=>{const b=e.current.getColumn(g),y=e.current.getCellValue(m,g),v=e.current.getRow(m),C=e.current.getRowNode(m);if(!v||!C)throw new lo(`No row with id #${m} found`);const k=qt(e),F=Ai(e),T={id:m,field:g,row:v,rowNode:C,colDef:b,cellMode:e.current.getCellMode(m,g),hasFocus:k!==null&&k.field===g&&k.id===m,tabIndex:F&&F.field===g&&F.id===m?0:-1,value:y,formattedValue:y,isEditable:!1};return b&&b.valueFormatter&&(T.formattedValue=b.valueFormatter({id:m,field:T.field,value:T.value,api:e.current})),T.isEditable=b&&e.current.isCellEditable(T),T},[e]),l=f.useCallback((m,g)=>{const b=e.current.getColumn(g);if(!b||!b.valueGetter){const y=e.current.getRow(m);if(!y)throw new lo(`No row with id #${m} found`);return y[g]}return b.valueGetter(i(m,g))},[e,i]),u=f.useCallback((m,g)=>{var b;const y=po in m?m[po]:(b=n?.(m))!=null?b:m.id,v=g.field;return!g||!g.valueGetter?m[v]:g.valueGetter(i(y,v))},[i,n]),c=f.useCallback((m,g)=>{var b;const y=u(m,g);if(!g||!g.valueFormatter)return y;const v=(b=n?n(m):m.id)!=null?b:m[po],C=g.field;return g.valueFormatter({id:v,field:C,value:y,api:e.current})},[e,n,u]),d=f.useCallback(m=>e.current.rootElementRef.current?gP(e.current.rootElementRef.current,m):null,[e]),h=f.useCallback(m=>e.current.rootElementRef.current?xP(e.current.rootElementRef.current,m):null,[e]),p=f.useCallback((m,g)=>e.current.rootElementRef.current?yP(e.current.rootElementRef.current,{id:m,field:g}):null,[e]);Fe(e,{getCellValue:l,getCellParams:a,getCellElement:p,getRowValue:u,getRowFormattedValue:c,getRowParams:s,getRowElement:h,getColumnHeaderParams:o,getColumnHeaderElement:d},"public")}const vP=["changeReason","unstable_updateValueOnRender"],CP=["column","rowId","editCellState","align","children","colIndex","height","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","isNotVisible","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver","style"],wP=["changeReason","unstable_updateValueOnRender"],Ri={id:-1,field:"__unset__",row:{},rowNode:{id:-1,depth:0,type:"leaf",parent:-1,groupingKey:null},colDef:{type:"string",field:"__unset__",computedWidth:0},cellMode:Ke.View,hasFocus:!1,tabIndex:-1,value:null,formattedValue:"__unset__",isEditable:!1,api:{}},jP=e=>{const{align:t,showRightBorder:n,isEditable:o,isSelected:s,isSelectionMode:i,classes:a}=e,l={root:["cell",`cell--text${An(t)}`,o&&"cell--editable",s&&"selected",n&&"cell--withRightBorder",i&&!o&&"cell--selectionMode","withBorderColor"],content:["cellContent"]};return Ee(l,Be,a)},SP=f.forwardRef((e,t)=>{const{column:n,rowId:o,editCellState:s}=e,i=Ve(),a=pe(),l=n.field,u=ie(i,()=>{try{const V=i.current.getCellParams(o,l);return V.api=i.current,V}catch(D){if(D instanceof lo)return Ri;throw D}},iu),c=ie(i,()=>i.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:o,field:l}));if(u===Ri)return null;const{cellMode:d,hasFocus:h,isEditable:p,value:x,formattedValue:m}=u,g=n.type==="actions",b=(d==="view"||!p)&&!g?u.tabIndex:-1,{classes:y,getCellClassName:v}=a,C=i.current.unstable_applyPipeProcessors("cellClassName",[],{id:o,field:l});n.cellClassName&&C.push(typeof n.cellClassName=="function"?n.cellClassName(u):n.cellClassName),v&&C.push(v(u));let k;if(s==null&&n.renderCell&&(k=n.renderCell(u),C.push(H["cell--withRenderer"]),C.push(y?.["cell--withRenderer"])),s!=null&&n.renderEditCell){const D=i.current.getRowWithUpdatedValues(o,n.field),V=le(s,vP),O=j({},u,{row:D},V);k=n.renderEditCell(O),C.push(H["cell--editing"]),C.push(y?.["cell--editing"])}const{slots:F}=a,T=F.cell,I=j({},e,{ref:t,field:l,formattedValue:m,hasFocus:h,isEditable:p,isSelected:c,value:x,cellMode:d,children:k,tabIndex:b,className:$e(C)});return f.createElement(T,I)}),PP=ha(SP),kP=f.forwardRef((e,t)=>{var n,o,s,i;const{column:a,rowId:l,editCellState:u,align:c,colIndex:d,height:h,width:p,className:x,showRightBorder:m,colSpan:g,disableDragEvents:b,isNotVisible:y,onClick:v,onDoubleClick:C,onMouseDown:k,onMouseUp:F,onMouseOver:T,onKeyDown:I,onKeyUp:D,onDragEnter:V,onDragOver:O,style:S}=e,$=le(e,CP),P=Ve(),w=pe(),E=a.field,R=ie(P,()=>{try{const de=P.current.getCellParams(l,E);return de.api=P.current,de}catch(re){if(re instanceof lo)return Ri;throw re}},iu),N=ie(P,()=>P.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:l,field:E})),{cellMode:_,hasFocus:L,isEditable:B,value:z,formattedValue:U}=R,J=a.type==="actions"&&((n=(o=a).getActions)==null?void 0:n.call(o,P.current.getRowParams(l)).some(re=>!re.props.disabled)),ee=(_==="view"||!B)&&!J?R.tabIndex:-1,{classes:te,getCellClassName:ve}=w,W=P.current.unstable_applyPipeProcessors("cellClassName",[],{id:l,field:E});a.cellClassName&&W.push(typeof a.cellClassName=="function"?a.cellClassName(R):a.cellClassName),ve&&W.push(ve(R));const K=U??z,ae=f.useRef(null),X=Br(t,ae),ne=f.useRef(null),je=(s=w.unstable_cellSelection)!=null?s:!1,Z={align:c,showRightBorder:m,isEditable:B,classes:w.classes,isSelected:N,isSelectionMode:je},ye=jP(Z),ge=f.useCallback(re=>de=>{const Ce=P.current.getCellParams(l,E||"");P.current.publishEvent(re,Ce,de),F&&F(de)},[P,E,F,l]),Se=f.useCallback(re=>de=>{const Ce=P.current.getCellParams(l,E||"");P.current.publishEvent(re,Ce,de),k&&k(de)},[P,E,k,l]),be=f.useCallback((re,de)=>Ce=>{if(!P.current.getRow(l))return;const _e=P.current.getCellParams(l,E||"");P.current.publishEvent(re,_e,Ce),de&&de(Ce)},[P,E,l]),Ae=f.useMemo(()=>y?j({padding:0,opacity:0,width:0,border:0},S):j({minWidth:p,maxWidth:p,minHeight:h,maxHeight:h==="auto"?"none":h},S),[p,h,y,S]);if(f.useEffect(()=>{if(!L||_===Ke.Edit)return;const re=zi(P.current.rootElementRef.current);if(ae.current&&!ae.current.contains(re.activeElement)){const de=ae.current.querySelector('[tabindex="0"]'),Ce=ne.current||de||ae.current;if(fP())Ce.focus({preventScroll:!0});else{const _e=P.current.getScrollPosition();Ce.focus(),P.current.scroll(_e)}}},[L,_,P]),R===Ri)return null;let Ge=$.onFocus,Ue;if(u==null&&a.renderCell&&(Ue=a.renderCell(R),W.push(H["cell--withRenderer"]),W.push(te?.["cell--withRenderer"])),u!=null&&a.renderEditCell){const re=P.current.getRowWithUpdatedValues(l,a.field),de=le(u,wP),Ce=j({},R,{row:re},de);Ue=a.renderEditCell(Ce),W.push(H["cell--editing"]),W.push(te?.["cell--editing"])}if(Ue===void 0){const re=K?.toString();Ue=r.jsx("div",{className:ye.content,title:re,role:"presentation",children:re})}f.isValidElement(Ue)&&J&&(Ue=f.cloneElement(Ue,{focusElementRef:ne}));const yt=b?null:{onDragEnter:be("cellDragEnter",V),onDragOver:be("cellDragOver",O)},Ie=(i=w.experimentalFeatures)==null?void 0:i.ariaV7;return r.jsx("div",j({ref:X,className:$e(x,W,ye.root),role:Ie?"gridcell":"cell","data-field":E,"data-colindex":d,"aria-colindex":d+1,"aria-colspan":g,style:Ae,tabIndex:ee,onClick:be("cellClick",v),onDoubleClick:be("cellDoubleClick",C),onMouseOver:be("cellMouseOver",T),onMouseDown:Se("cellMouseDown"),onMouseUp:ge("cellMouseUp"),onKeyDown:be("cellKeyDown",I),onKeyUp:be("cellKeyUp",D)},yt,$,{onFocus:Ge,children:Ue}))}),Yl=ha(kP),IP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex"],EP=e=>{const{classes:t}=e;return Ee({root:["booleanCell"]},Be,t)};function TP(e){const{value:t}=e,n=le(e,IP),o=Ve(),s=pe(),i={classes:s.classes},a=EP(i),l=f.useMemo(()=>t?s.slots.booleanCellTrueIcon:s.slots.booleanCellFalseIcon,[s.slots.booleanCellFalseIcon,s.slots.booleanCellTrueIcon,t]);return r.jsx(l,j({fontSize:"small",className:a.root,titleAccess:o.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":!!t},n))}const AP=f.memo(TP),MP=e=>as(e.rowNode)?"":r.jsx(AP,j({},e)),RP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"],DP=e=>{const{classes:t}=e;return Ee({root:["editBooleanCell"]},Be,t)};function FP(e){var t;const{id:n,value:o,field:s,className:i,hasFocus:a,onValueChange:l}=e,u=le(e,RP),c=Ve(),d=f.useRef(null),h=mt(),[p,x]=f.useState(o),m=pe(),g={classes:m.classes},b=DP(g),y=f.useCallback(async v=>{const C=v.target.checked;l&&await l(v,C),x(C),await c.current.setEditCellValue({id:n,field:s,value:C},v)},[c,s,n,l]);return f.useEffect(()=>{x(o)},[o]),kt(()=>{a&&d.current.focus()},[a]),r.jsx("label",j({htmlFor:h,className:$e(b.root,i)},u,{children:r.jsx(m.slots.baseCheckbox,j({id:h,inputRef:d,checked:!!p,onChange:y,size:"small"},(t=m.slotProps)==null?void 0:t.baseCheckbox))}))}const OP=e=>r.jsx(FP,j({},e)),LP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],_P=Xe(Hf)({fontSize:"inherit"}),$P=e=>{const{classes:t}=e;return Ee({root:["editInputCell"]},Be,t)};function NP(e){const{id:t,value:n,field:o,colDef:s,hasFocus:i,inputProps:a,onValueChange:l}=e,u=le(e,LP),c=s.type==="dateTime",d=Ve(),h=f.useRef(),p=f.useMemo(()=>{let k;n==null?k=null:n instanceof Date?k=n:k=new Date((n??"").toString());let F;return k==null||Number.isNaN(k.getTime())?F="":F=new Date(k.getTime()-k.getTimezoneOffset()*60*1e3).toISOString().substr(0,c?16:10),{parsed:k,formatted:F}},[n,c]),[x,m]=f.useState(p),b={classes:pe().classes},y=$P(b),v=f.useCallback(k=>{if(k==="")return null;const[F,T]=k.split("T"),[I,D,V]=F.split("-"),O=new Date;if(O.setFullYear(Number(I),Number(D)-1,Number(V)),O.setHours(0,0,0,0),T){const[S,$]=T.split(":");O.setHours(Number(S),Number($),0,0)}return O},[]),C=f.useCallback(async k=>{const F=k.target.value,T=v(F);l&&await l(k,T),m({parsed:T,formatted:F}),d.current.setEditCellValue({id:t,field:o,value:T},k)},[d,o,t,l,v]);return f.useEffect(()=>{m(k=>{var F,T;return p.parsed!==k.parsed&&((F=p.parsed)==null?void 0:F.getTime())!==((T=k.parsed)==null?void 0:T.getTime())?p:k})},[p]),kt(()=>{i&&h.current.focus()},[i]),r.jsx(_P,j({inputRef:h,fullWidth:!0,className:y.root,type:c?"datetime-local":"date",inputProps:j({max:c?"9999-12-31T23:59":"9999-12-31"},a),value:x.formatted,onChange:C},u))}const Ag=e=>r.jsx(NP,j({},e)),VP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],BP=e=>{const{classes:t}=e;return Ee({root:["editInputCell"]},Be,t)},HP=Xe(Hf,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})(({theme:e})=>j({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),zP=f.forwardRef((e,t)=>{const n=pe(),{id:o,value:s,field:i,colDef:a,hasFocus:l,debounceMs:u=200,isProcessingProps:c,onValueChange:d}=e,h=le(e,VP),p=Ve(),x=f.useRef(),[m,g]=f.useState(s),b=BP(n),y=f.useCallback(async C=>{const k=C.target.value;d&&await d(C,k);const F=p.current.getColumn(i);let T=k;F.valueParser&&(T=F.valueParser(k,p.current.getCellParams(o,i))),g(T),p.current.setEditCellValue({id:o,field:i,value:T,debounceMs:u,unstable_skipValueParser:!0},C)},[p,u,i,o,d]),v=p.current.unstable_getEditCellMeta(o,i);return f.useEffect(()=>{v?.changeReason!=="debouncedSetEditCellValue"&&g(s)},[v,s]),kt(()=>{l&&x.current.focus()},[l]),r.jsx(HP,j({ref:t,inputRef:x,className:b.root,ownerState:n,fullWidth:!0,type:a.type==="number"?a.type:"text",value:m??"",onChange:y,endAdornment:c?r.jsx(n.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},h))}),UP=e=>r.jsx(zP,j({},e)),Di=e=>e==="Escape",GP=e=>e==="Enter",Mg=e=>e==="Tab",Rg=e=>e===" ",WP=e=>e.indexOf("Arrow")===0,qP=e=>e==="Home"||e==="End",KP=e=>e.indexOf("Page")===0;function Dg(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}const Fi=e=>qP(e)||WP(e)||KP(e)||Rg(e),QP=e=>!!e.key,XP=e=>Mg(e)||Di(e);function Or(e){return e?.type==="singleSelect"}function Jl(e,t,n){if(t===void 0)return;const o=t.find(s=>{const i=n(s);return String(i)===String(e)});return n(o)}const YP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","getOptionLabel","getOptionValue"],JP=["MenuProps"];function ZP(e){return!!e.key}function ek(e){var t,n,o;const s=pe(),{id:i,value:a,field:l,row:u,colDef:c,hasFocus:d,error:h,onValueChange:p,initialOpen:x=s.editMode===Dn.Cell,getOptionLabel:m,getOptionValue:g}=e,b=le(e,YP),y=Ve(),v=f.useRef(),C=f.useRef(),[k,F]=f.useState(x),I=(n=(((t=s.slotProps)==null?void 0:t.baseSelect)||{}).native)!=null?n:!1,D=((o=s.slotProps)==null?void 0:o.baseSelect)||{},{MenuProps:V}=D,O=le(D,JP);if(kt(()=>{if(d){var N;(N=C.current)==null||N.focus()}},[d]),!Or(c))return null;let S;if(typeof c?.valueOptions=="function"?S=c?.valueOptions({id:i,row:u,field:l}):S=c?.valueOptions,!S)return null;const $=g||c.getOptionValue,P=m||c.getOptionLabel,w=async N=>{if(!Or(c)||!S)return;F(!1);const _=N.target,L=Jl(_.value,S,$);p&&await p(N,L),await y.current.setEditCellValue({id:i,field:l,value:L},N)},E=(N,_)=>{if(s.editMode===Dn.Row){F(!1);return}if(_==="backdropClick"||Di(N.key)){const L=y.current.getCellParams(i,l);y.current.publishEvent("cellEditStop",j({},L,{reason:Di(N.key)?ln.escapeKeyDown:ln.cellFocusOut}))}},R=N=>{ZP(N)&&N.key==="Enter"||F(!0)};return!S||!c?null:r.jsx(s.slots.baseSelect,j({ref:v,inputRef:C,value:a,onChange:w,open:k,onOpen:R,MenuProps:j({onClose:E},V),error:h,native:I,fullWidth:!0},b,O,{children:S.map(N=>{var _;const L=$(N);return f.createElement(s.slots.baseSelectOption,j({},((_=s.slotProps)==null?void 0:_.baseSelectOption)||{},{native:I,key:L,value:L}),P(N))})}))}const tk=e=>r.jsx(ek,j({},e)),nk=["open","target","onClose","children","position","className","onExited"],rk=e=>{const{classes:t}=e;return Ee({root:["menu"]},Be,t)},ok=Xe(xc,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})(({theme:e})=>({zIndex:e.zIndex.modal,[`& .${H.menuList}`]:{outline:0}})),sk={"bottom-start":"top left","bottom-end":"top right"};function Fg(e){var t;const{open:n,target:o,onClose:s,children:i,position:a,className:l,onExited:u}=e,c=le(e,nk),d=Ve(),h=pe(),p=rk(h),x=f.useRef(null);kt(()=>{if(n)x.current=document.activeElement instanceof HTMLElement?document.activeElement:null;else{var b,y;(b=x.current)==null||(y=b.focus)==null||y.call(b),x.current=null}},[n]),f.useEffect(()=>{const b=n?"menuOpen":"menuClose";d.current.publishEvent(b,{target:o})},[d,n,o]);const m=b=>y=>{b&&b(),u&&u(y)},g=b=>{b.target&&(o===b.target||o!=null&&o.contains(b.target))||s(b)};return r.jsx(ok,j({as:h.slots.basePopper,className:$e(l,p.root),ownerState:h,open:n,anchorEl:o,transition:!0,placement:a},c,(t=h.slotProps)==null?void 0:t.basePopper,{children:({TransitionProps:b,placement:y})=>r.jsx(zf,{onClickAway:g,mouseEvent:"onMouseDown",children:r.jsx(Cl,j({},b,{style:{transformOrigin:sk[y]},onExited:m(b?.onExited),children:r.jsx(fe,{children:i})}))})}))}const ik=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"],ak=e=>typeof e.getActions=="function";function lk(e){var t;const{colDef:n,id:o,hasFocus:s,tabIndex:i,position:a="bottom-end",focusElementRef:l}=e,u=le(e,ik),[c,d]=f.useState(-1),[h,p]=f.useState(!1),x=Ve(),m=f.useRef(null),g=f.useRef(null),b=f.useRef(!1),y=f.useRef({}),v=Yt(),C=mt(),k=mt(),F=pe();if(!ak(n))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const T=n.getActions(x.current.getRowParams(o)),I=T.filter(R=>!R.props.showInMenu),D=T.filter(R=>R.props.showInMenu),V=I.length+(D.length?1:0);f.useLayoutEffect(()=>{s||Object.entries(y.current).forEach(([R,N])=>{N?.stop({},()=>{delete y.current[R]})})},[s]),f.useEffect(()=>{if(c<0||!m.current||c>=m.current.children.length)return;m.current.children[c].focus({preventScroll:!0})},[c]),f.useEffect(()=>{s||(d(-1),b.current=!1)},[s]),f.useImperativeHandle(l,()=>({focus(){if(!b.current){const R=T.findIndex(N=>!N.props.disabled);d(R)}}}),[T]),f.useEffect(()=>{c>=V&&d(V-1)},[c,V]);const O=()=>{p(!0),d(V-1),b.current=!0},S=()=>{p(!1)},$=R=>N=>{y.current[R]=N},P=(R,N)=>_=>{d(R),b.current=!0,N&&N(_)},w=R=>{if(V<=1)return;const N=(L,B)=>{var z;if(L<0||L>T.length)return L;const U=v.direction==="rtl"?-1:1,J=(B==="left"?-1:1)*U;return(z=T[L+J])!=null&&z.props.disabled?N(L+J,B):L+J};let _=c;R.key==="ArrowRight"?_=N(c,"right"):R.key==="ArrowLeft"&&(_=N(c,"left")),!(_<0||_>=V)&&_!==c&&(R.preventDefault(),R.stopPropagation(),d(_))},E=R=>{R.key==="Tab"&&R.preventDefault(),["Tab","Escape"].includes(R.key)&&S()};return r.jsxs("div",j({role:"menu",ref:m,tabIndex:-1,className:H.actionsCell,onKeyDown:w},u,{children:[I.map((R,N)=>f.cloneElement(R,{key:N,touchRippleRef:$(N),onClick:P(N,R.props.onClick),tabIndex:c===N?i:-1})),D.length>0&&k&&r.jsx(F.slots.baseIconButton,j({ref:g,id:k,"aria-label":x.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?C:void 0,role:"menuitem",size:"small",onClick:O,touchRippleRef:$(k),tabIndex:c===I.length?i:-1},(t=F.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(F.slots.moreActionsIcon,{fontSize:"small"})})),D.length>0&&r.jsx(Fg,{open:h,target:g.current,position:a,onClose:S,children:r.jsx(Uf,{id:C,className:H.menuList,onKeyDown:E,"aria-labelledby":k,variant:"menu",autoFocusItem:!0,children:D.map((R,N)=>f.cloneElement(R,{key:N,closeMenu:S}))})})]}))}const ck=e=>r.jsx(lk,j({},e)),uk=["field","align","width","contentWidth"],dk=e=>{const{align:t,classes:n}=e,o={root:["cell","cellSkeleton",`cell--text${An(t)}`,"withBorderColor"]};return Ee(o,Be,n)};function hk(e){const{align:t,width:n,contentWidth:o}=e,s=le(e,uk),a={classes:pe().classes,align:t},l=dk(a);return r.jsx("div",j({className:l.root,style:{width:n}},s,{children:r.jsx(Gf,{width:`${o}%`})}))}function fk(e){return e.vars?e.vars.palette.TableCell.border:e.palette.mode==="light"?uy(he(e.palette.divider,1),.88):dy(he(e.palette.divider,1),.68)}const Ih={[`.${H.columnSeparator}, .${H["columnSeparator--resizing"]}`]:{visibility:"visible",width:"auto"}},Eh={[`& .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.menuIcon}`]:{width:"auto",visibility:"visible"}},pk=Xe("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${H.autoHeight}`]:t.autoHeight},{[`&.${H.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${H["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${H["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${H["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${H.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`&.${H["root--disableUserSelection"]} .${H.cell}`]:t["root--disableUserSelection"]},{[`&.${H.autosizing}`]:t.autosizing},{[`& .${H.editBooleanCell}`]:t.editBooleanCell},{[`& .${H["cell--editing"]}`]:t["cell--editing"]},{[`& .${H["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${H["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${H["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${H["cell--withRenderer"]}`]:t["cell--withRenderer"]},{[`& .${H.cell}`]:t.cell},{[`& .${H["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${H["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${H["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${H["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${H["cell--withRightBorder"]}`]:t["cell--withRightBorder"]},{[`& .${H.cellContent}`]:t.cellContent},{[`& .${H.cellCheckbox}`]:t.cellCheckbox},{[`& .${H.cellSkeleton}`]:t.cellSkeleton},{[`& .${H.checkboxInput}`]:t.checkboxInput},{[`& .${H["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${H["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${H["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${H["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${H["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${H["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${H["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${H["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${H["columnHeader--withRightBorder"]}`]:t["columnHeader--withRightBorder"]},{[`& .${H.columnHeader}`]:t.columnHeader},{[`& .${H.headerFilterRow}`]:t.headerFilterRow},{[`& .${H.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${H.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${H.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${H["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${H["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${H.columnSeparator}`]:t.columnSeparator},{[`& .${H.filterIcon}`]:t.filterIcon},{[`& .${H.iconSeparator}`]:t.iconSeparator},{[`& .${H.menuIcon}`]:t.menuIcon},{[`& .${H.menuIconButton}`]:t.menuIconButton},{[`& .${H.menuOpen}`]:t.menuOpen},{[`& .${H.menuList}`]:t.menuList},{[`& .${H["row--editable"]}`]:t["row--editable"]},{[`& .${H["row--editing"]}`]:t["row--editing"]},{[`& .${H["row--dragging"]}`]:t["row--dragging"]},{[`& .${H.row}`]:t.row},{[`& .${H.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${H.rowReorderCell}`]:t.rowReorderCell},{[`& .${H["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${H.sortIcon}`]:t.sortIcon},{[`& .${H.withBorderColor}`]:t.withBorderColor},{[`& .${H.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${H.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${H.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${H["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})(({theme:e})=>{const t=fk(e),n=e.shape.borderRadius;return j({"--unstable_DataGrid-radius":typeof n=="number"?`${n}px`:n,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:he(e.palette.background.default,e.palette.action.disabledOpacity),"--DataGrid-cellOffsetMultiplier":2,flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:t,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflowAnchor:"none",[`&.${H.autoHeight}`]:{height:"auto",[`& .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"}},[`&.${H.autosizing}`]:{[`& .${H.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},[`& .${H.cell} > *`]:{overflow:"visible !important",whiteSpace:"nowrap"},[`& .${H.groupingCriteriaCell}`]:{width:"unset"},[`& .${H.treeDataGroupingCell}`]:{width:"unset"}},[`& .${H["virtualScrollerContent--overflowed"]} .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"},[`& .${H.columnHeader}, & .${H.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${H.columnHeader}:focus-within, & .${H.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:he(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${H.columnHeader}:focus, & .${H.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${H.columnHeaderCheckbox}, & .${H.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${H.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${H["columnHeader--sorted"]} .${H.iconButtonContainer}, & .${H["columnHeader--filtered"]} .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}) .${H.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${H.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden",position:"relative"},[`& .${H.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${H["columnHeader--filledGroup"]} .${H.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]} .${H.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H.headerFilterRow}`]:{borderTop:`1px solid ${t}`},[`& .${H.sortIcon}, & .${H.filterIcon}`]:{fontSize:"inherit"},[`& .${H["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${H["columnHeader--alignCenter"]} .${H.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${H["columnHeader--alignRight"]} .${H.columnHeaderDraggableContainer}, & .${H["columnHeader--alignRight"]} .${H.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${H["columnHeader--alignCenter"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${H["columnHeader--alignRight"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${H["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${H.columnSeparator}`]:{visibility:"hidden",position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:t},"@media (hover: hover)":{[`& .${H.columnHeaders}:hover`]:Ih,[`& .${H.columnHeader}:hover`]:Eh,[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}):hover .${H.sortIcon}`]:{opacity:.5}},"@media (hover: none)":{[`& .${H.columnHeaders}`]:Ih,[`& .${H.columnHeader}`]:Eh},[`& .${H["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${H["columnSeparator--sideRight"]}`]:{right:-12},[`& .${H["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:(e.vars||e).palette.text.primary,"@media (hover: none)":{color:t}},[`&.${H["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${H.iconSeparator}`]:{color:"inherit"},[`& .${H.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`.${H.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${H.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:he(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(
                ${e.vars.palette.action.selectedOpacity} + 
                ${e.vars.palette.action.hoverOpacity}
              ))`:he(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:he(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${H.cell}`]:{display:"flex",alignItems:"center",borderBottom:"1px solid","&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:he(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:he(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:he(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`&.${H["root--disableUserSelection"]} .${H.cell}`]:{userSelect:"none"},[`& .${H.row}:not(.${H["row--dynamicHeight"]}) > .${H.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${H.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${H.cell}.${H["cell--selectionMode"]}`]:{cursor:"default"},[`& .${H.cell}.${H["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`solid ${(e.vars||e).palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${H["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${H["row--editing"]} .${H.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${H.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${H.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${H.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${H.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${H.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${H.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`.${H.withBorderColor}`]:{borderColor:t},[`& .${H["cell--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["columnHeader--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${H["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${H["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${H.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${H.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${H["columnHeader--dragging"]}, & .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${H.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${H.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${H.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})}),mk=["children","className"],gk=e=>{const{autoHeight:t,density:n,classes:o}=e,s={root:["root",t&&"autoHeight",`root--density${An(n)}`,"withBorderColor"]};return Ee(s,Be,o)},xk=f.forwardRef(function(t,n){var o;const s=pe(),{children:i,className:a}=t,l=le(t,mk),u=mr(),c=ie(u,nP),d=f.useRef(null),h=Br(d,n),p=(o=s.experimentalFeatures)!=null&&o.ariaV7?null:xg,x=typeof p=="function"?p():null,m=j({},s,{density:c}),g=gk(m);u.current.register("public",{rootElementRef:d});const[b,y]=f.useState(!1);return kt(()=>{y(!0)},[]),b?r.jsx(pk,j({ref:h,className:$e(a,g.root),ownerState:m},x,l,{children:i})):null}),yk=["className"],bk=e=>{const{classes:t}=e;return Ee({root:["footerContainer","withBorderColor"]},Be,t)},vk=It("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),Ck=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,yk),i=pe(),a=bk(i);return r.jsx(vk,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),wk=["className"],jk=e=>{const{classes:t}=e;return Ee({root:["overlay"]},Be,t)},Sk=It("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),pu=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,wk),i=pe(),a=jk(i);return r.jsx(Sk,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),Pk=["className"],kk=e=>{const{classes:t}=e;return Ee({root:["iconButtonContainer"]},Be,t)},Ik=It("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),Og=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,Pk),i=pe(),a=kk(i);return r.jsx(Ik,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),Ek=e=>{const{classes:t}=e;return Ee({icon:["sortIcon"]},Be,t)};function Tk(e,t,n,o){let s;const i={};return t==="asc"?s=e.columnSortedAscendingIcon:t==="desc"?s=e.columnSortedDescendingIcon:(s=e.columnUnsortedIcon,i.sortingOrder=o),s?r.jsx(s,j({fontSize:"small",className:n},i)):null}function Ak(e){var t;const{direction:n,index:o,sortingOrder:s}=e,i=Ve(),a=pe(),l=j({},e,{classes:a.classes}),u=Ek(l),c=Tk(a.slots,n,u.icon,s);if(!c)return null;const d=r.jsx(a.slots.baseIconButton,j({tabIndex:-1,"aria-label":i.current.getLocaleText("columnHeaderSortIconLabel"),title:i.current.getLocaleText("columnHeaderSortIconLabel"),size:"small"},(t=a.slotProps)==null?void 0:t.baseIconButton,{children:c}));return r.jsxs(Og,{children:[o!=null&&r.jsx(Ui,{badgeContent:o,color:"default",children:d}),o==null&&d]})}const Mk=f.memo(Ak),Rk=e=>{const{classes:t,open:n}=e;return Ee({root:["menuIcon",n&&"menuOpen"],button:["menuIconButton"]},Be,t)},Dk=f.memo(e=>{var t,n;const{colDef:o,open:s,columnMenuId:i,columnMenuButtonId:a,iconButtonRef:l}=e,u=Ve(),c=pe(),d=j({},e,{classes:c.classes}),h=Rk(d),p=f.useCallback(x=>{x.preventDefault(),x.stopPropagation(),u.current.toggleColumnMenu(o.field)},[u,o.field]);return r.jsx("div",{className:h.root,children:r.jsx(c.slots.baseTooltip,j({title:u.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},(t=c.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx(c.slots.baseIconButton,j({ref:l,tabIndex:-1,className:h.button,"aria-label":u.current.getLocaleText("columnMenuLabel"),size:"small",onClick:p,"aria-haspopup":"menu","aria-expanded":s,"aria-controls":s?i:void 0,id:a},(n=c.slotProps)==null?void 0:n.baseIconButton,{children:r.jsx(c.slots.columnMenuIcon,{fontSize:"small"})}))}))})});function Fk({columnMenuId:e,columnMenuButtonId:t,ContentComponent:n,contentComponentProps:o,field:s,open:i,target:a,onExited:l}){const u=Ve(),c=u.current.getColumn(s),d=pn(h=>{h&&(h.stopPropagation(),a!=null&&a.contains(h.target))||u.current.hideColumnMenu()});return!a||!c?null:r.jsx(Fg,{placement:`bottom-${c.align==="right"?"start":"end"}`,open:i,target:a,onClose:d,onExited:l,children:r.jsx(n,j({colDef:c,hideMenu:d,open:i,id:e,labelledby:t},o))})}const Ok=["className"],Lk=e=>{const{classes:t}=e;return Ee({root:["columnHeaderTitle"]},Be,t)},_k=It("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)"}),$k=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,Ok),i=pe(),a=Lk(i);return r.jsx(_k,j({ref:n,className:$e(a.root,o),ownerState:i},s))});function Nk(e){var t;const{label:n,description:o}=e,s=pe(),i=f.useRef(null),[a,l]=f.useState(""),u=f.useCallback(()=>{if(!o&&i!=null&&i.current){const c=pP(i.current);l(c?n:"")}},[o,n]);return r.jsx(s.slots.baseTooltip,j({title:o||a},(t=s.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx($k,{onMouseOver:u,ref:i,children:n})}))}const Vk=["resizable","resizing","height","side"];var Lg=function(e){return e.Left="left",e.Right="right",e}(Lg||{});const Bk=e=>{const{resizable:t,resizing:n,classes:o,side:s}=e,i={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",s&&`columnSeparator--side${An(s)}`],icon:["iconSeparator"]};return Ee(i,Be,o)};function Hk(e){const{height:t,side:n=Lg.Right}=e,o=le(e,Vk),s=pe(),i=j({},e,{side:n,classes:s.classes}),a=Bk(i),l=f.useCallback(u=>{u.preventDefault(),u.stopPropagation()},[]);return r.jsx("div",j({className:a.root,style:{minHeight:t,opacity:s.showColumnVerticalBorder?0:1}},o,{onClick:l,children:r.jsx(s.slots.columnResizeIcon,{className:a.icon})}))}const zk=f.memo(Hk),Uk=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps"],_g=f.forwardRef(function(t,n){const{classes:o,columnMenuOpen:s,colIndex:i,height:a,isResizing:l,sortDirection:u,hasFocus:c,tabIndex:d,separatorSide:h,isDraggable:p,headerComponent:x,description:m,width:g,columnMenuIconButton:b=null,columnMenu:y=null,columnTitleIconButtons:v=null,headerClassName:C,label:k,resizable:F,draggableContainerProps:T,columnHeaderSeparatorProps:I}=t,D=le(t,Uk),V=mr(),O=pe(),S=f.useRef(null),[$,P]=f.useState(s),w=Br(S,n);let E="none";return u!=null&&(E=u==="asc"?"ascending":"descending"),f.useEffect(()=>{$||P(s)},[$,s]),f.useLayoutEffect(()=>{const R=V.current.state.columnMenu;if(c&&!R.open){const _=S.current.querySelector('[tabindex="0"]')||S.current;_?.focus(),V.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[V,c]),r.jsxs("div",j({ref:w,className:$e(o.root,C),style:{height:a,width:g,minWidth:g,maxWidth:g},role:"columnheader",tabIndex:d,"aria-colindex":i+1,"aria-sort":E,"aria-label":x==null?k:void 0},D,{children:[r.jsxs("div",j({className:o.draggableContainer,draggable:p,role:"presentation"},T,{children:[r.jsxs("div",{className:o.titleContainer,role:"presentation",children:[r.jsx("div",{className:o.titleContainerContent,children:x!==void 0?x:r.jsx(Nk,{label:k,description:m,columnWidth:g})}),v]}),b]})),r.jsx(zk,j({resizable:!O.disableColumnResize&&!!F,resizing:l,height:a,side:h},I)),y]}))}),Gk=e=>{const{colDef:t,classes:n,isDragging:o,sortDirection:s,showRightBorder:i,filterItemsCounter:a}=e,l=s!=null,u=a!=null&&a>0,c=t.type==="number",d={root:["columnHeader",t.headerAlign==="left"&&"columnHeader--alignLeft",t.headerAlign==="center"&&"columnHeader--alignCenter",t.headerAlign==="right"&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",o&&"columnHeader--moving",l&&"columnHeader--sorted",u&&"columnHeader--filtered",c&&"columnHeader--numeric","withBorderColor",i&&"columnHeader--withRightBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return Ee(d,Be,n)};function Wk(e){var t,n,o,s;const{colDef:i,columnMenuOpen:a,colIndex:l,headerHeight:u,isResizing:c,sortDirection:d,sortIndex:h,filterItemsCounter:p,hasFocus:x,tabIndex:m,disableReorder:g,separatorSide:b}=e,y=mr(),v=pe(),C=f.useRef(null),k=mt(),F=mt(),T=f.useRef(null),[I,D]=f.useState(a),V=f.useMemo(()=>!v.disableColumnReorder&&!g&&!i.disableReorder,[v.disableColumnReorder,g,i.disableReorder]);let O;i.renderHeader&&(O=i.renderHeader(y.current.getColumnHeaderParams(i.field)));const S=j({},e,{classes:v.classes,showRightBorder:v.showColumnVerticalBorder}),$=Gk(S),P=f.useCallback(ee=>te=>{Ps(te)||y.current.publishEvent(ee,y.current.getColumnHeaderParams(i.field),te)},[y,i.field]),w=f.useMemo(()=>({onClick:P("columnHeaderClick"),onDoubleClick:P("columnHeaderDoubleClick"),onMouseOver:P("columnHeaderOver"),onMouseOut:P("columnHeaderOut"),onMouseEnter:P("columnHeaderEnter"),onMouseLeave:P("columnHeaderLeave"),onKeyDown:P("columnHeaderKeyDown"),onFocus:P("columnHeaderFocus"),onBlur:P("columnHeaderBlur")}),[P]),E=f.useMemo(()=>V?{onDragStart:P("columnHeaderDragStart"),onDragEnter:P("columnHeaderDragEnter"),onDragOver:P("columnHeaderDragOver"),onDragEnd:P("columnHeaderDragEnd")}:{},[V,P]),R=f.useMemo(()=>({onMouseDown:P("columnSeparatorMouseDown"),onDoubleClick:P("columnSeparatorDoubleClick")}),[P]);f.useEffect(()=>{I||D(a)},[I,a]);const N=f.useCallback(()=>{D(!1)},[]),_=!v.disableColumnMenu&&!i.disableColumnMenu&&r.jsx(Dk,{colDef:i,columnMenuId:k,columnMenuButtonId:F,open:I,iconButtonRef:T}),L=r.jsx(Fk,{columnMenuId:k,columnMenuButtonId:F,field:i.field,open:a,target:T.current,ContentComponent:v.slots.columnMenu,contentComponentProps:(t=v.slotProps)==null?void 0:t.columnMenu,onExited:N}),B=(n=i.sortingOrder)!=null?n:v.sortingOrder,z=r.jsxs(f.Fragment,{children:[!v.disableColumnFilter&&r.jsx(v.slots.columnHeaderFilterIconButton,j({field:i.field,counter:p},(o=v.slotProps)==null?void 0:o.columnHeaderFilterIconButton)),i.sortable&&!i.hideSortIcons&&r.jsx(Mk,{direction:d,index:h,sortingOrder:B})]});f.useLayoutEffect(()=>{const ee=y.current.state.columnMenu;if(x&&!ee.open){var te;const W=C.current.querySelector('[tabindex="0"]')||C.current;W?.focus(),(te=y.current.columnHeadersContainerElementRef)!=null&&te.current&&(y.current.columnHeadersContainerElementRef.current.scrollLeft=0)}},[y,x]);const U=typeof i.headerClassName=="function"?i.headerClassName({field:i.field,colDef:i}):i.headerClassName,J=(s=i.headerName)!=null?s:i.field;return r.jsx(_g,j({ref:C,classes:$,columnMenuOpen:a,colIndex:l,height:u,isResizing:c,sortDirection:d,hasFocus:x,tabIndex:m,separatorSide:b,isDraggable:V,headerComponent:O,description:i.description,elementId:i.field,width:i.computedWidth,columnMenuIconButton:_,columnTitleIconButtons:z,headerClassName:U,label:J,resizable:!v.disableColumnResize&&!!i.resizable,"data-field":i.field,columnMenu:L,draggableContainerProps:E,columnHeaderSeparatorProps:R},w))}const ls=()=>({items:[],logicOperator:Vt.And,quickFilterValues:[],quickFilterLogicOperator:Vt.And}),Th=1e3;class qk{constructor(t=Th){this.timeouts=new Map,this.cleanupTimeout=Th,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const s=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,s)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Kk{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}var En=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e}(En||{});class Qk{}function Xk(e){let t=0;return function(o,s,i,a){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Kk:new qk);const[l]=f.useState(new Qk),u=f.useRef(null),c=f.useRef();c.current=i;const d=f.useRef(null);if(!u.current&&c.current){const h=(p,x,m)=>{if(!x.defaultMuiPrevented){var g;(g=c.current)==null||g.call(c,p,x,m)}};u.current=o.current.subscribeEvent(s,h,a),t+=1,d.current={cleanupToken:t},e.registry.register(l,()=>{var p;(p=u.current)==null||p.call(u),u.current=null,d.current=null},d.current)}else!c.current&&u.current&&(u.current(),u.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));f.useEffect(()=>{if(!u.current&&c.current){const h=(p,x,m)=>{if(!x.defaultMuiPrevented){var g;(g=c.current)==null||g.call(c,p,x,m)}};u.current=o.current.subscribeEvent(s,h,a)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var h;(h=u.current)==null||h.call(u),u.current=null}},[o,s,a])}}const Yk={registry:null},me=Xk(Yk),Jk={isFirst:!0};function tt(e,t,n){me(e,t,n,Jk)}function Et(e,t){const n=f.useRef(null);if(n.current)return n.current;const o=e.current.getLogger(t);return n.current=o,o}function Zk(e){return typeof e=="number"&&!Number.isNaN(e)}function $g(e){return typeof e=="function"}function mu(e){return typeof e=="object"&&e!==null}function eI(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}function li(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const Co=(e,t,n)=>Math.max(t,Math.min(n,e));function Lr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(!Lr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;for(let i=0;i<s.length;i+=1){const a=s[i];if(!Lr(a[1],t.get(a[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),o=n.length;if(o!==Object.keys(t).length)return!1;for(let s=0;s<o;s+=1)if(!Object.prototype.hasOwnProperty.call(t,n[s]))return!1;for(let s=0;s<o;s+=1){const i=n[s];if(!Lr(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function tI(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function nI(e,t,n){const o=tI(e);return()=>t+(n-t)*o()}function Ng(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const rI=(e,t,n,o,s)=>{const i=Et(e,"useNativeEventListener"),[a,l]=f.useState(!1),u=f.useRef(o),c=f.useCallback(d=>u.current&&u.current(d),[]);f.useEffect(()=>{u.current=o},[o]),f.useEffect(()=>{let d;if($g(t)?d=t():d=t&&t.current?t.current:null,d&&n&&!a){i.debug(`Binding native ${n} event`),d.addEventListener(n,c,s);const h=d;l(!0);const p=()=>{i.debug(`Clearing native ${n} event`),h.removeEventListener(n,c,s)};e.current.subscribeEvent("unmount",p)}},[t,c,n,a,i,s,e])},ks=e=>{const t=f.useRef(!0);t.current&&(t.current=!1,e())},oI=100,sI=e=>e?0:100,Vg=(e,t)=>t>0&&e>0?Math.ceil(e/t):0;On(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error");const Bg=e=>({page:0,pageSize:e?0:100}),iI=(e,t=0)=>t===0?e:Math.max(Math.min(e,t-1),0),Hg=(e,t)=>{if(t===En.DataGrid&&e>oI)throw new Error(["MUI: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`))},gu=e=>e.pagination,nn=Te(gu,e=>e.paginationModel),co=Te(gu,e=>e.rowCount),aI=Te(nn,e=>e.page),zg=Te(nn,e=>e.pageSize),lI=Te(zg,co,(e,t)=>Vg(t,e)),xu=nt(nn,dn,ca,gr,vg,(e,t,n,o,s)=>{const i=s.length,a=Math.min(e.pageSize*e.page,i-1),l=Math.min(a+e.pageSize-1,i-1);if(a===-1||l===-1)return null;if(n<2)return{firstRowIndex:a,lastRowIndex:l};const u=s[a],c=l-a+1,d=o.findIndex(m=>m.id===u.id);let h=d,p=0;for(;h<o.length&&p<=c;){var x;const m=o[h],g=(x=t[m.id])==null?void 0:x.depth;g===void 0?h+=1:((p<c||g>0)&&(h+=1),g===0&&(p+=1))}return{firstRowIndex:d,lastRowIndex:h-1}}),cI=nt(gr,xu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Ug=nt(Zo,xu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),cs=e=>e.preferencePanel;var $r=function(e){return e.filters="filters",e.columns="columns",e}($r||{});const us=e=>e.rowsMeta,rn=e=>e.rowSelection,uI=Te(rn,e=>e.length),dI=nt(rn,Hn,(e,t)=>new Map(e.map(n=>[n,t[n]]))),Oi=nt(rn,e=>e.reduce((t,n)=>(t[n]=n,t),{})),hI=On(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Gg=(e,t)=>t&&e.length>1?(hI(),[e[0]]):e,Ah=(e,t)=>n=>j({},n,{sorting:j({},n.sorting,{sortModel:Gg(e,t)})}),fI=e=>e==="desc",pI=(e,t)=>{const n=t.current.getColumn(e.field);if(!n)return null;const o=fI(e.sort)?(...i)=>-1*n.sortComparator(...i):n.sortComparator;return{getSortCellParams:i=>({id:i,field:n.field,rowNode:t.current.getRowNode(i),value:t.current.getCellValue(i,n.field),api:t.current}),comparator:o}},mI=(e,t,n)=>e.reduce((o,s,i)=>{if(o!==0)return o;const a=t.params[i],l=n.params[i];return o=s.comparator(a.value,l.value,a,l),o},0),gI=(e,t)=>{const n=e.map(o=>pI(o,t)).filter(o=>!!o);return n.length===0?null:o=>o.map(s=>({node:s,params:n.map(i=>i.getSortCellParams(s.id))})).sort((s,i)=>mI(n,s,i)).map(s=>s.node.id)},Mh=(e,t)=>{const n=e.indexOf(t);return!t||n===-1||n+1===e.length?e[0]:e[n+1]},yu=(e,t)=>e==null&&t!=null?-1:t==null&&e!=null?1:e==null&&t==null?0:null,xI=new Intl.Collator,yI=(e,t)=>{const n=yu(e,t);return n!==null?n:typeof e=="string"?xI.compare(e.toString(),t.toString()):e-t},Wg=(e,t)=>{const n=yu(e,t);return n!==null?n:Number(e)-Number(t)},qg=(e,t)=>{const n=yu(e,t);return n!==null?n:e>t?1:e<t?-1:0},Kg=e=>e.headerFiltering,bI=Te(Kg,e=>e.editing),vI=Te(Kg,e=>e.menuOpen),CI=(e,t)=>{const n={enabled:!t.disableVirtualization,enabledForColumns:!0};return j({},e,{virtualization:n})};function wI(e,t){const n=i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabled:i})}))};Fe(e,{unstable_setVirtualization:n,unstable_setColumnVirtualization:i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabledForColumns:i})}))}},"public"),f.useEffect(()=>{n(!t.disableVirtualization)},[t.disableVirtualization])}const Qg=e=>e.virtualization,jI=Te(Qg,e=>e.enabled),Xg=Te(Qg,e=>e.enabledForColumns),SI=e=>{const{classes:t}=e;return Ee({icon:["filterIcon"]},Be,t)};function PI(e){var t,n;const{counter:o,field:s,onClick:i}=e,a=Ve(),l=pe(),u=j({},e,{classes:l.classes}),c=SI(u),d=ie(a,cs),h=mt(),p=mt(),x=f.useCallback(b=>{b.preventDefault(),b.stopPropagation();const{open:y,openedPanelValue:v}=cs(a.current.state);y&&v===$r.filters?a.current.hideFilterPanel():a.current.showFilterPanel(void 0,p,h),i&&i(a.current.getColumnHeaderParams(s),b)},[a,s,i,p,h]);if(!o)return null;const m=d.open&&d.labelId===h,g=r.jsx(l.slots.baseIconButton,j({id:h,onClick:x,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?p:void 0},(t=l.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(l.slots.columnFilteredIcon,{className:c.icon,fontSize:"small"})}));return r.jsx(l.slots.baseTooltip,j({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(o),enterDelay:1e3},(n=l.slotProps)==null?void 0:n.baseTooltip,{children:r.jsxs(Og,{children:[o>1&&r.jsx(Ui,{badgeContent:o,color:"default",children:g}),o===1&&g]})}))}const kI=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],II=e=>{const{classes:t}=e;return Ee({root:["checkboxInput"]},Be,t)},EI=f.forwardRef(function(t,n){var o;const{field:s,id:i,value:a,rowNode:l,hasFocus:u,tabIndex:c}=t,d=le(t,kI),h=Ve(),p=pe(),x={classes:p.classes},m=II(x),g=f.useRef(null),b=f.useRef(null),y=Br(g,n),v=h.current.getCellElement(i,s),C=I=>{const D={value:I.target.checked,id:i};h.current.publishEvent("rowSelectionCheckboxChange",D,I)};f.useLayoutEffect(()=>{c===0&&v&&(v.tabIndex=-1)},[v,c]),f.useEffect(()=>{if(u){var I;const D=(I=g.current)==null?void 0:I.querySelector("input");D?.focus({preventScroll:!0})}else b.current&&b.current.stop({})},[u]);const k=f.useCallback(I=>{Rg(I.key)&&I.stopPropagation()},[]);if(l.type==="footer"||l.type==="pinnedRow")return null;const F=h.current.isRowSelectable(i),T=h.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return r.jsx(p.slots.baseCheckbox,j({ref:y,tabIndex:c,checked:a,onChange:C,className:m.root,inputProps:{"aria-label":T},onKeyDown:k,disabled:!F,touchRippleRef:b},(o=p.slotProps)==null?void 0:o.baseCheckbox,d))}),TI=EI,AI=["field","colDef"],MI=e=>{const{classes:t}=e;return Ee({root:["checkboxInput"]},Be,t)},RI=f.forwardRef(function(t,n){var o;const s=le(t,AI),[,i]=f.useState(!1),a=Ve(),l=pe(),u={classes:l.classes},c=MI(u),d=ie(a,jg),h=ie(a,rn),p=ie(a,Zo),x=ie(a,Ug),m=f.useMemo(()=>typeof l.isRowSelectable!="function"?h:h.filter(D=>a.current.getRow(D)?l.isRowSelectable(a.current.getRowParams(D)):!1),[a,l.isRowSelectable,h]),g=f.useMemo(()=>(!l.pagination||!l.checkboxSelectionVisibleOnly?p:x).reduce((V,O)=>(V[O]=!0,V),{}),[l.pagination,l.checkboxSelectionVisibleOnly,x,p]),b=f.useMemo(()=>m.filter(D=>g[D]).length,[m,g]),y=b>0&&b<Object.keys(g).length,v=b>0,C=D=>{const V={value:D.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",V)},k=d!==null&&d.field===t.field?0:-1;f.useLayoutEffect(()=>{const D=a.current.getColumnHeaderElement(t.field);k===0&&D&&(D.tabIndex=-1)},[k,a,t.field]);const F=f.useCallback(D=>{D.key===" "&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!v})},[a,v]),T=f.useCallback(()=>{i(D=>!D)},[]);f.useEffect(()=>a.current.subscribeEvent("rowSelectionChange",T),[a,T]);const I=a.current.getLocaleText(v?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return r.jsx(l.slots.baseCheckbox,j({ref:n,indeterminate:y,checked:v,onChange:C,className:c.root,inputProps:{"aria-label":I},tabIndex:k,onKeyDown:F},(o=l.slotProps)==null?void 0:o.baseCheckbox,s))}),Rh=Ye(r.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),Dh=Ye(r.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),Fh=Ye(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),Oh=Ye(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),DI=Ye(r.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),Lh=Ye(r.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),FI=Ye(r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");Ye(r.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");Ye(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const OI=Ye(r.jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),LI=Ye(r.jsx("path",{d:"M11 19V5h2v14z"}),"Separator"),_I=Ye(r.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),$I=Ye(r.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),NI=Ye(r.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),VI=Ye(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),ol=Ye(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_h=Ye(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),BI=Ye(r.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),HI=Ye(r.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),$h=Ye(r.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),zI=Ye(r.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),UI=Ye(r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),GI=Ye(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),WI=Ye(r.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),qI=Ye(r.jsx("g",{children:r.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),KI=Ye(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");Ye(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const QI=Ye(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),XI=["hideMenu","colDef","id","labelledby","className","children","open"],YI=Xe(Uf)(()=>({minWidth:248})),JI=f.forwardRef(function(t,n){const{hideMenu:o,id:s,labelledby:i,className:a,children:l,open:u}=t,c=le(t,XI),d=f.useCallback(h=>{Mg(h.key)&&h.preventDefault(),XP(h.key)&&o(h)},[o]);return r.jsx(YI,j({id:s,ref:n,className:$e(H.menuList,a),"aria-labelledby":i,onKeyDown:d,autoFocus:u},c,{children:l}))}),ZI=["displayOrder"],eE=e=>{const t=mr(),{defaultSlots:n,defaultSlotProps:o,slots:s={},slotProps:i={},hideMenu:a,colDef:l,addDividers:u=!0}=e,c=f.useMemo(()=>j({},n,s),[n,s]),d=f.useMemo(()=>{if(!i||Object.keys(i).length===0)return o;const x=j({},i);return Object.entries(o).forEach(([m,g])=>{x[m]=j({},g,i[m]||{})}),x},[o,i]),h=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),p=f.useMemo(()=>{const x=Object.keys(n);return Object.keys(s).filter(m=>!x.includes(m))},[s,n]);return f.useMemo(()=>{const g=Array.from(new Set([...h,...p])).filter(b=>c[b]!=null).sort((b,y)=>{const v=d[b],C=d[y],k=Number.isFinite(v?.displayOrder)?v.displayOrder:100,F=Number.isFinite(C?.displayOrder)?C.displayOrder:100;return k-F});return g.reduce((b,y,v)=>{let C={colDef:l,onClick:a};const k=d[y];if(k){const F=le(k,ZI);C=j({},C,F)}return u&&v!==g.length-1?[...b,[c[y],C],[St,{}]]:[...b,[c[y],C]]},[])},[u,l,h,a,c,d,p])};function tE(e){const{colDef:t,onClick:n}=e,o=Ve(),s=pe(),l=Pt(o).filter(c=>c.disableColumnMenu!==!0).length===1,u=f.useCallback(c=>{l||(o.current.setColumnVisibility(t.field,!1),n(c))},[o,t.field,n,l]);return s.disableColumnSelector||t.hideable===!1?null:r.jsxs(oe,{onClick:u,disabled:l,children:[r.jsx(De,{children:r.jsx(s.slots.columnMenuHideIcon,{fontSize:"small"})}),r.jsx(se,{children:o.current.getLocaleText("columnMenuHideColumn")})]})}function nE(e){const{onClick:t}=e,n=Ve(),o=pe(),s=f.useCallback(i=>{t(i),n.current.showPreferences($r.columns)},[n,t]);return o.disableColumnSelector?null:r.jsxs(oe,{onClick:s,children:[r.jsx(De,{children:r.jsx(o.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),r.jsx(se,{children:n.current.getLocaleText("columnMenuManageColumns")})]})}function rE(e){return r.jsxs(f.Fragment,{children:[r.jsx(tE,j({},e)),r.jsx(nE,j({},e))]})}function oE(e){const{colDef:t,onClick:n}=e,o=Ve(),s=pe(),i=f.useCallback(a=>{n(a),o.current.showFilterPanel(t.field)},[o,t.field,n]);return s.disableColumnFilter||!t.filterable?null:r.jsxs(oe,{onClick:i,children:[r.jsx(De,{children:r.jsx(s.slots.columnMenuFilterIcon,{fontSize:"small"})}),r.jsx(se,{children:o.current.getLocaleText("columnMenuFilter")})]})}function sE(e){var t;const{colDef:n,onClick:o}=e,s=Ve(),i=ie(s,tn),a=pe(),l=f.useMemo(()=>{if(!n)return null;const h=i.find(p=>p.field===n.field);return h?.sort},[n,i]),u=(t=n.sortingOrder)!=null?t:a.sortingOrder,c=f.useCallback(h=>{o(h);const p=h.currentTarget.getAttribute("data-value")||null;s.current.sortColumn(n,p===l?null:p)},[s,n,o,l]);if(!n||!n.sortable||!u.some(h=>!!h))return null;const d=h=>{const p=s.current.getLocaleText(h);return typeof p=="function"?p(n):p};return r.jsxs(f.Fragment,{children:[u.includes("asc")&&l!=="asc"?r.jsxs(oe,{onClick:c,"data-value":"asc",children:[r.jsx(De,{children:r.jsx(a.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),r.jsx(se,{children:d("columnMenuSortAsc")})]}):null,u.includes("desc")&&l!=="desc"?r.jsxs(oe,{onClick:c,"data-value":"desc",children:[r.jsx(De,{children:r.jsx(a.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),r.jsx(se,{children:d("columnMenuSortDesc")})]}):null,u.includes(null)&&l!=null?r.jsxs(oe,{onClick:c,children:[r.jsx(De,{}),r.jsx(se,{children:s.current.getLocaleText("columnMenuUnsort")})]}):null]})}const iE=["defaultSlots","defaultSlotProps","slots","slotProps"],aE={columnMenuSortItem:sE,columnMenuFilterItem:oE,columnMenuColumnsItem:rE},lE={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},cE=f.forwardRef(function(t,n){const{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}=t,l=le(t,iE),u=eE(j({},l,{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}));return r.jsx(JI,j({ref:n},l,{children:u.map(([c,d],h)=>r.jsx(c,j({},d),h))}))}),uE=f.forwardRef(function(t,n){return r.jsx(cE,j({},t,{ref:n,defaultSlots:aE,defaultSlotProps:lE}))}),dE=["className"],hE=e=>{const{classes:t}=e;return Ee({root:["panelContent"]},Be,t)},fE=It("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function Yg(e){const{className:t}=e,n=le(e,dE),o=pe(),s=hE(o);return r.jsx(fE,j({className:$e(t,s.root),ownerState:o},n))}const pE=["className"],mE=e=>{const{classes:t}=e;return Ee({root:["panelFooter"]},Be,t)},gE=It("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})(({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"}));function Jg(e){const{className:t}=e,n=le(e,pE),o=pe(),s=mE(o);return r.jsx(gE,j({className:$e(t,s.root),ownerState:o},n))}const xE=["className"],yE=e=>{const{classes:t}=e;return Ee({root:["panelHeader"]},Be,t)},bE=It("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,t)=>t.panelHeader})(({theme:e})=>({padding:e.spacing(1)}));function vE(e){const{className:t}=e,n=le(e,xE),o=pe(),s=yE(o);return r.jsx(bE,j({className:$e(t,s.root),ownerState:o},n))}const CE=["className","slotProps"],wE=e=>{const{classes:t}=e;return Ee({root:["panelWrapper"]},Be,t)},jE=Xe("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),SE=()=>!0,Zg=f.forwardRef(function(t,n){const{className:o,slotProps:s={}}=t,i=le(t,CE),a=pe(),l=wE(a);return r.jsx(hy,j({open:!0,disableEnforceFocus:!0,isEnabled:SE},s.TrapFocus,{children:r.jsx(jE,j({ref:n,tabIndex:-1,className:$e(o,l.root),ownerState:a},i))}))}),PE=!1,kE=["sort","searchPredicate","autoFocusSearchField","disableHideAllButton","disableShowAllButton","getTogglableColumns"],IE=e=>{const{classes:t}=e;return Ee({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Be,t)},EE=Xe("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,t)=>t.columnsPanel})({padding:"8px 0px 8px 8px"}),TE=Xe("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,t)=>t.columnsPanelRow})(({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${fy.root}`]:{marginRight:e.spacing(.5)}}));Xe(Pe)({justifyContent:"flex-end"});const Nh=new Intl.Collator,AE=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1;function ME(e){var t,n,o;const s=Ve(),i=f.useRef(null),a=ie(s,In),l=ie(s,fn),u=pe(),[c,d]=f.useState(""),h=IE(u),{sort:p,searchPredicate:x=AE,autoFocusSearchField:m=!0,disableHideAllButton:g=!1,disableShowAllButton:b=!1,getTogglableColumns:y}=e,v=le(e,kE),C=f.useMemo(()=>{switch(p){case"asc":return[...a].sort((S,$)=>Nh.compare(S.headerName||S.field,$.headerName||$.field));case"desc":return[...a].sort((S,$)=>-Nh.compare(S.headerName||S.field,$.headerName||$.field));default:return a}},[a,p]),k=S=>{const{name:$}=S.target;s.current.setColumnVisibility($,l[$]===!1)},F=f.useCallback(S=>{const $=fn(s),P=j({},$),w=y?y(a):null;return a.forEach(E=>{E.hideable&&(w==null||w.includes(E.field))&&(S?delete P[E.field]:P[E.field]=!1)}),s.current.setColumnVisibilityModel(P)},[s,a,y]),T=f.useCallback(S=>{d(S.target.value)},[]),I=f.useMemo(()=>{const S=y?y(C):null,$=S?C.filter(({field:P})=>S.includes(P)):C;return c?$.filter(P=>x(P,c.toLowerCase())):$},[C,c,x,y]),D=f.useRef(null);f.useEffect(()=>{m?i.current.focus():D.current&&typeof D.current.focus=="function"&&D.current.focus()},[m]);let V=!1;const O=S=>V===!1&&S.hideable!==!1?(V=!0,!0):!1;return r.jsxs(Zg,j({},v,{children:[r.jsx(vE,{children:r.jsx(u.slots.baseTextField,j({label:s.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:s.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:i,value:c,onChange:T,variant:"standard",fullWidth:!0},(t=u.slotProps)==null?void 0:t.baseTextField))}),r.jsx(Yg,{children:r.jsx(EE,{className:h.root,ownerState:u,children:I.map(S=>{var $;return r.jsxs(TE,{className:h.columnsPanelRow,ownerState:u,children:[r.jsx(hn,{control:r.jsx(u.slots.baseSwitch,j({disabled:S.hideable===!1,checked:l[S.field]!==!1,onClick:k,name:S.field,size:"small",inputRef:O(S)?D:void 0},($=u.slotProps)==null?void 0:$.baseSwitch)),label:S.headerName||S.field}),!u.disableColumnReorder&&PE]},S.field)})})}),b&&g?null:r.jsxs(Jg,{children:[g?r.jsx("span",{}):r.jsx(u.slots.baseButton,j({onClick:()=>F(!1)},(n=u.slotProps)==null?void 0:n.baseButton,{disabled:g,children:s.current.getLocaleText("columnsPanelHideAllButton")})),b?null:r.jsx(u.slots.baseButton,j({onClick:()=>F(!0)},(o=u.slotProps)==null?void 0:o.baseButton,{disabled:b,children:s.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))}const RE=["children","className","classes"],DE=Qn("MuiDataGrid",["panel","paper"]),FE=Xe(xc,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})(({theme:e})=>({zIndex:e.zIndex.modal})),OE=Xe(fe,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex"})),LE=f.forwardRef((e,t)=>{const{children:n,className:o}=e,s=le(e,RE),i=Ve(),a=pe(),l=DE,[u,c]=f.useState(!1),d=f.useCallback(()=>{i.current.hidePreferences()},[i]),h=f.useCallback(g=>{Di(g.key)&&i.current.hidePreferences()},[i]),p=f.useMemo(()=>[{name:"flip",enabled:!0,options:{rootBoundary:"document"}},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{c(!0)},effect:()=>()=>{c(!1)}}],[]),[x,m]=f.useState(null);return f.useEffect(()=>{var g;const b=(g=i.current.rootElementRef)==null||(g=g.current)==null?void 0:g.querySelector(`.${H.columnHeaders}`);b&&m(b)},[i]),x?r.jsx(FE,j({ref:t,placement:"bottom-start",className:$e(o,l.panel),ownerState:a,anchorEl:x,modifiers:p},s,{children:r.jsx(zf,{mouseEvent:"onMouseUp",onClickAway:d,children:r.jsx(OE,{className:l.paper,ownerState:a,elevation:8,onKeyDown:h,children:u&&n})})})):null}),_E=f.forwardRef(function(t,n){var o,s,i;const a=Ve(),l=ie(a,In),u=pe(),c=ie(a,cs),d=a.current.unstable_applyPipeProcessors("preferencePanel",null,(o=c.openedPanelValue)!=null?o:$r.filters);return r.jsx(u.slots.panel,j({ref:n,as:u.slots.basePopper,open:l.length>0&&c.open,id:c.panelId,"aria-labelledby":c.labelId},(s=u.slotProps)==null?void 0:s.panel,t,(i=u.slotProps)==null?void 0:i.basePopper,{children:d}))}),$E=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],NE=["InputComponentProps"],VE=e=>{const{classes:t}=e;return Ee({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Be,t)},BE=Xe("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})(({theme:e})=>({display:"flex",padding:e.spacing(1)})),HE=Xe("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})(({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)})),zE=Xe("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,t)=>t.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),UE=Xe("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),GE=Xe("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:120}),WE=Xe("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),qE=e=>{switch(e){case Vt.And:return"filterPanelOperatorAnd";case Vt.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `logicOperator` property in the `GridFilterPanel`.")}},_o=e=>e.headerName||e.field,Vh=new Intl.Collator,KE=f.forwardRef(function(t,n){var o,s,i,a,l,u,c,d,h,p;const{item:x,hasMultipleFilters:m,deleteFilter:g,applyFilterChanges:b,multiFilterOperator:y,showMultiFilterOperators:v,disableMultiFilterOperator:C,applyMultiFilterOperatorChanges:k,focusElementRef:F,logicOperators:T=[Vt.And,Vt.Or],columnsSort:I,filterColumns:D,deleteIconProps:V={},logicOperatorInputProps:O={},operatorInputProps:S={},columnInputProps:$={},valueInputProps:P={}}=t,w=le(t,$E),E=Ve(),R=ie(E,mg),N=ie(E,bt),_=mt(),L=mt(),B=mt(),z=mt(),U=pe(),J=VE(U),ee=f.useRef(null),te=f.useRef(null),ve=m&&T.length>0,W=((o=U.slotProps)==null?void 0:o.baseFormControl)||{},ae=(i=(((s=U.slotProps)==null?void 0:s.baseSelect)||{}).native)!=null?i:!0,X=((a=U.slotProps)==null?void 0:a.baseInputLabel)||{},ne=((l=U.slotProps)==null?void 0:l.baseSelectOption)||{},{InputComponentProps:je}=P,Z=le(P,NE),ye=f.useMemo(()=>{if(D===void 0||typeof D!="function")return R;const Ie=D({field:x.field,columns:R,currentFilters:N?.items||[]});return R.filter(re=>Ie.includes(re.field))},[D,N?.items,R,x.field]),ge=f.useMemo(()=>{switch(I){case"asc":return ye.sort((Ie,re)=>Vh.compare(_o(Ie),_o(re)));case"desc":return ye.sort((Ie,re)=>-Vh.compare(_o(Ie),_o(re)));default:return ye}},[ye,I]),Se=x.field?E.current.getColumn(x.field):null,be=f.useMemo(()=>{var Ie;return!x.operator||!Se?null:(Ie=Se.filterOperators)==null?void 0:Ie.find(re=>re.value===x.operator)},[x,Se]),Ae=f.useCallback(Ie=>{const re=Ie.target.value,de=E.current.getColumn(re);if(de.field===Se.field)return;const Ce=de.filterOperators.find(st=>st.value===x.operator)||de.filterOperators[0],_e=!Ce.InputComponent||Ce.InputComponent!==be?.InputComponent||de.type!==Se.type;b(j({},x,{field:re,operator:Ce.value,value:_e?void 0:x.value}))},[E,b,x,Se,be]),Ge=f.useCallback(Ie=>{const re=Ie.target.value,de=Se?.filterOperators.find(_e=>_e.value===re),Ce=!(de!=null&&de.InputComponent)||de?.InputComponent!==be?.InputComponent;b(j({},x,{operator:re,value:Ce?void 0:x.value}))},[b,x,Se,be]),Ue=f.useCallback(Ie=>{const re=Ie.target.value===Vt.And.toString()?Vt.And:Vt.Or;k(re)},[k]),yt=()=>{U.disableMultipleColumnsFiltering?x.value===void 0?g(x):b(j({},x,{value:void 0})):g(x)};return f.useImperativeHandle(F,()=>({focus:()=>{if(be!=null&&be.InputComponent){var Ie;ee==null||(Ie=ee.current)==null||Ie.focus()}else te.current.focus()}}),[be]),r.jsxs(BE,j({ref:n,className:J.root,"data-id":x.id,ownerState:U},w,{children:[r.jsx(HE,j({variant:"standard",as:U.slots.baseFormControl},W,V,{className:$e(J.deleteIcon,W.className,V.className),ownerState:U,children:r.jsx(U.slots.baseIconButton,j({"aria-label":E.current.getLocaleText("filterPanelDeleteIconLabel"),title:E.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:yt,size:"small"},(u=U.slotProps)==null?void 0:u.baseIconButton,{children:r.jsx(U.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),r.jsx(zE,j({variant:"standard",as:U.slots.baseFormControl},W,O,{sx:j({display:ve?"flex":"none",visibility:v?"visible":"hidden"},W.sx||{},O.sx||{}),className:$e(J.logicOperatorInput,W.className,O.className),ownerState:U,children:r.jsx(U.slots.baseSelect,j({inputProps:{"aria-label":E.current.getLocaleText("filterPanelLogicOperator")},value:y,onChange:Ue,disabled:!!C||T.length===1,native:ae},(c=U.slotProps)==null?void 0:c.baseSelect,{children:T.map(Ie=>f.createElement(U.slots.baseSelectOption,j({},ne,{native:ae,key:Ie.toString(),value:Ie.toString()}),E.current.getLocaleText(qE(Ie))))}))})),r.jsxs(UE,j({variant:"standard",as:U.slots.baseFormControl},W,$,{className:$e(J.columnInput,W.className,$.className),ownerState:U,children:[r.jsx(U.slots.baseInputLabel,j({},X,{htmlFor:_,id:L,children:E.current.getLocaleText("filterPanelColumns")})),r.jsx(U.slots.baseSelect,j({labelId:L,id:_,label:E.current.getLocaleText("filterPanelColumns"),value:x.field||"",onChange:Ae,native:ae},(d=U.slotProps)==null?void 0:d.baseSelect,{children:ge.map(Ie=>f.createElement(U.slots.baseSelectOption,j({},ne,{native:ae,key:Ie.field,value:Ie.field}),_o(Ie)))}))]})),r.jsxs(GE,j({variant:"standard",as:U.slots.baseFormControl},W,S,{className:$e(J.operatorInput,W.className,S.className),ownerState:U,children:[r.jsx(U.slots.baseInputLabel,j({},X,{htmlFor:B,id:z,children:E.current.getLocaleText("filterPanelOperator")})),r.jsx(U.slots.baseSelect,j({labelId:z,label:E.current.getLocaleText("filterPanelOperator"),id:B,value:x.operator,onChange:Ge,native:ae,inputRef:te},(h=U.slotProps)==null?void 0:h.baseSelect,{children:Se==null||(p=Se.filterOperators)==null?void 0:p.map(Ie=>f.createElement(U.slots.baseSelectOption,j({},ne,{native:ae,key:Ie.value,value:Ie.value}),Ie.label||E.current.getLocaleText(`filterOperator${An(Ie.value)}`)))}))]})),r.jsx(WE,j({variant:"standard",as:U.slots.baseFormControl},W,Z,{className:$e(J.valueInput,W.className,Z.className),ownerState:U,children:be!=null&&be.InputComponent?r.jsx(be.InputComponent,j({apiRef:E,item:x,applyValue:b,focusElementRef:ee},be.InputComponentProps,je)):null}))]}))});class bu{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new bu}start(t,n){this.clear(),this.currentId=setTimeout(n,t)}}function vu(){const e=su(bu.create).current;return fg(e.disposeEffect),e}const QE=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","clearButton","InputProps","variant"];function wn(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,tabIndex:u,disabled:c,clearButton:d,InputProps:h,variant:p="standard"}=e,x=le(e,QE),m=vu(),[g,b]=f.useState((t=o.value)!=null?t:""),[y,v]=f.useState(!1),C=mt(),k=pe(),F=f.useCallback(T=>{const{value:I}=T.target;b(String(I)),v(!0),m.start(k.filterDebounceMs,()=>{const D=j({},o,{value:I,fromInput:C});s(D),v(!1)})},[C,s,o,k.filterDebounceMs,m]);return f.useEffect(()=>{if(o.fromInput!==C||o.value===void 0){var I;b(String((I=o.value)!=null?I:""))}},[C,o]),r.jsx(k.slots.baseTextField,j({id:C,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:g,onChange:F,variant:p,type:i||"text",InputProps:j({},y||d?{endAdornment:y?r.jsx(k.slots.loadIcon,{fontSize:"small",color:"action"}):d}:{},{disabled:c},h,{inputProps:j({tabIndex:u},h?.inputProps)}),InputLabelProps:{shrink:!0},inputRef:l},x,(n=k.slotProps)==null?void 0:n.baseTextField))}const XE=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function Yr(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,InputProps:u,clearButton:c,tabIndex:d,disabled:h}=e,p=le(e,XE),x=vu(),[m,g]=f.useState((t=o.value)!=null?t:""),[b,y]=f.useState(!1),v=mt(),C=pe(),k=f.useCallback(F=>{const T=F.target.value;g(String(T)),y(!0),x.start(C.filterDebounceMs,()=>{s(j({},o,{value:T})),y(!1)})},[s,o,C.filterDebounceMs,x]);return f.useEffect(()=>{var F;const T=(F=o.value)!=null?F:"";g(String(T))},[o.value]),r.jsx(C.slots.baseTextField,j({fullWidth:!0,id:v,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:m,onChange:k,variant:"standard",type:i||"text",InputLabelProps:{shrink:!0},inputRef:l,InputProps:j({},b||c?{endAdornment:b?r.jsx(C.slots.loadIcon,{fontSize:"small",color:"action"}):c}:{},{disabled:h},u,{inputProps:j({max:i==="datetime-local"?"9999-12-31T23:59":"9999-12-31",tabIndex:d},u?.inputProps)})},p,(n=C.slotProps)==null?void 0:n.baseTextField))}const YE=["item","applyValue","type","apiRef","focusElementRef","getOptionLabel","getOptionValue","placeholder","tabIndex","label","variant","isFilterActive","clearButton","InputLabelProps"],JE=({column:{valueOptions:e,field:t},OptionComponent:n,getOptionLabel:o,getOptionValue:s,isSelectNative:i,baseSelectOptionProps:a})=>(typeof e=="function"?["",...e({field:t})]:["",...e||[]]).map(u=>{const c=s(u),d=o(u);return f.createElement(n,j({},a,{native:i,key:c,value:c}),d)}),ZE=Xe("div")({display:"flex",alignItems:"flex-end",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Bh(e){var t,n,o,s,i,a,l,u;const{item:c,applyValue:d,type:h,apiRef:p,focusElementRef:x,getOptionLabel:m,getOptionValue:g,placeholder:b,tabIndex:y,label:v,variant:C="standard",clearButton:k}=e,F=le(e,YE),[T,I]=f.useState((t=c.value)!=null?t:""),D=mt(),V=mt(),O=pe(),S=(n=(o=O.slotProps)==null||(o=o.baseSelect)==null?void 0:o.native)!=null?n:!0;let $=null;if(c.field){const _=p.current.getColumn(c.field);Or(_)&&($=_)}const P=g||((s=$)==null?void 0:s.getOptionValue),w=m||((i=$)==null?void 0:i.getOptionLabel),E=f.useMemo(()=>{if($)return typeof $.valueOptions=="function"?$.valueOptions({field:$.field}):$.valueOptions},[$]),R=f.useCallback(_=>{let L=_.target.value;L=Jl(L,E,P),I(String(L)),d(j({},c,{value:L}))},[E,P,d,c]);if(f.useEffect(()=>{var _;let L;if(E!==void 0){if(L=Jl(c.value,E,P),L!==c.value){d(j({},c,{value:L}));return}}else L=c.value;L=(_=L)!=null?_:"",I(String(L))},[c,E,d,P]),!Or($)||!Or($))return null;const N=v??p.current.getLocaleText("filterPanelInputLabel");return r.jsxs(ZE,{children:[r.jsxs(O.slots.baseFormControl,{children:[r.jsx(O.slots.baseInputLabel,j({},(a=O.slotProps)==null?void 0:a.baseInputLabel,{id:V,htmlFor:D,shrink:!0,variant:C,children:N})),r.jsx(O.slots.baseSelect,j({id:D,label:N,labelId:V,value:T,onChange:R,variant:C,type:h||"text",inputProps:{tabIndex:y,ref:x,placeholder:b??p.current.getLocaleText("filterPanelInputPlaceholder")},native:S,notched:C==="outlined"?!0:void 0},F,(l=O.slotProps)==null?void 0:l.baseSelect,{children:JE({column:$,OptionComponent:O.slots.baseSelectOption,getOptionLabel:w,getOptionValue:P,isSelectNative:S,baseSelectOptionProps:(u=O.slotProps)==null?void 0:u.baseSelectOption})}))]}),k]})}const eT=["item","applyValue","apiRef","focusElementRef","isFilterActive","clearButton","tabIndex","label","variant","InputLabelProps"],tT=Xe("div")({display:"flex",alignItems:"center",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function nT(e){var t,n,o,s;const{item:i,applyValue:a,apiRef:l,focusElementRef:u,clearButton:c,tabIndex:d,label:h,variant:p="standard"}=e,x=le(e,eT),[m,g]=f.useState(i.value||""),b=pe(),y=mt(),v=mt(),C=((t=b.slotProps)==null?void 0:t.baseSelect)||{},k=(n=C.native)!=null?n:!0,F=((o=b.slotProps)==null?void 0:o.baseSelectOption)||{},T=f.useCallback(D=>{const V=D.target.value;g(V),a(j({},i,{value:V}))},[a,i]);f.useEffect(()=>{g(i.value||"")},[i.value]);const I=h??l.current.getLocaleText("filterPanelInputLabel");return r.jsxs(tT,{children:[r.jsxs(b.slots.baseFormControl,{fullWidth:!0,children:[r.jsx(b.slots.baseInputLabel,j({},(s=b.slotProps)==null?void 0:s.baseInputLabel,{id:y,shrink:!0,variant:p,children:I})),r.jsxs(b.slots.baseSelect,j({labelId:y,id:v,label:I,value:m,onChange:T,variant:p,notched:p==="outlined"?!0:void 0,native:k,displayEmpty:!0,inputProps:{ref:u,tabIndex:d}},x,C,{children:[r.jsx(b.slots.baseSelectOption,j({},F,{native:k,value:"",children:l.current.getLocaleText("filterValueAny")})),r.jsx(b.slots.baseSelectOption,j({},F,{native:k,value:"true",children:l.current.getLocaleText("filterValueTrue")})),r.jsx(b.slots.baseSelectOption,j({},F,{native:k,value:"false",children:l.current.getLocaleText("filterValueFalse")}))]}))]}),c]})}const rT=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],Hh=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(Math.random()*1e5)}),oT=f.forwardRef(function(t,n){var o,s;const i=Ve(),a=pe(),l=ie(i,bt),u=ie(i,mg),c=f.useRef(null),d=f.useRef(null),{logicOperators:h=[Vt.And,Vt.Or],columnsSort:p,filterFormProps:x,getColumnForNewFilter:m,disableAddFilterButton:g=!1,disableRemoveAllButton:b=!1}=t,y=le(t,rT),v=i.current.upsertFilterItem,C=f.useCallback(S=>{i.current.setFilterLogicOperator(S)},[i]),k=f.useCallback(()=>{let S;if(m&&typeof m=="function"){const $=m({currentFilters:l?.items||[],columns:u});if($===null)return null;S=u.find(({field:P})=>P===$)}else S=u.find($=>{var P;return(P=$.filterOperators)==null?void 0:P.length});return S?Hh(S):null},[l?.items,u,m]),F=f.useCallback(()=>{if(m===void 0||typeof m!="function")return k();const S=l.items.length?l.items:[k()].filter(Boolean),$=m({currentFilters:S,columns:u});if($===null)return null;const P=u.find(({field:w})=>w===$);return P?Hh(P):null},[l.items,u,m,k]),T=f.useMemo(()=>l.items.length?l.items:(d.current||(d.current=k()),d.current?[d.current]:[]),[l.items,k]),I=T.length>1,D=()=>{const S=F();S&&i.current.upsertFilterItems([...T,S])},V=f.useCallback(S=>{const $=T.length===1;i.current.deleteFilterItem(S),$&&i.current.hideFilterPanel()},[i,T.length]),O=()=>{T.length===1&&T[0].value===void 0&&(i.current.deleteFilterItem(T[0]),i.current.hideFilterPanel()),i.current.setFilterModel(j({},l,{items:[]}))};return f.useEffect(()=>{h.length>0&&l.logicOperator&&!h.includes(l.logicOperator)&&C(h[0])},[h,C,l.logicOperator]),f.useEffect(()=>{T.length>0&&c.current.focus()},[T.length]),r.jsxs(Zg,j({ref:n},y,{children:[r.jsx(Yg,{children:T.map((S,$)=>r.jsx(KE,j({item:S,applyFilterChanges:v,deleteFilter:V,hasMultipleFilters:I,showMultiFilterOperators:$>0,multiFilterOperator:l.logicOperator,disableMultiFilterOperator:$!==1,applyMultiFilterOperatorChanges:C,focusElementRef:$===T.length-1?c:null,logicOperators:h,columnsSort:p},x),S.id==null?$:S.id))}),!a.disableMultipleColumnsFiltering&&!(g&&b)?r.jsxs(Jg,{children:[g?r.jsx("span",{}):r.jsx(a.slots.baseButton,j({onClick:D,startIcon:r.jsx(a.slots.filterPanelAddIcon,{})},(o=a.slotProps)==null?void 0:o.baseButton,{children:i.current.getLocaleText("filterPanelAddFilter")})),b?null:r.jsx(a.slots.baseButton,j({onClick:O,startIcon:r.jsx(a.slots.filterPanelRemoveAllIcon,{})},(s=a.slotProps)==null?void 0:s.baseButton,{children:i.current.getLocaleText("filterPanelRemoveAll")}))]}):null]}))}),sT=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function ex(e){const{item:t,applyValue:n,type:o,apiRef:s,focusElementRef:i,color:a,error:l,helperText:u,size:c,variant:d}=e,h=le(e,sT),p={color:a,error:l,helperText:u,size:c,variant:d},[x,m]=f.useState(t.value||[]),g=mt(),b=pe();f.useEffect(()=>{var v;const C=(v=t.value)!=null?v:[];m(C.map(String))},[t.value]);const y=f.useCallback((v,C)=>{m(C.map(String)),n(j({},t,{value:[...C]}))},[n,t]);return r.jsx(Wf,j({multiple:!0,freeSolo:!0,options:[],filterOptions:(v,C)=>{const{inputValue:k}=C;return k==null||k===""?[]:[k]},id:g,value:x,onChange:y,renderTags:(v,C)=>v.map((k,F)=>r.jsx(b.slots.baseChip,j({variant:"outlined",size:"small",label:k},C({index:F})))),renderInput:v=>{var C;return r.jsx(b.slots.baseTextField,j({},v,{label:s.current.getLocaleText("filterPanelInputLabel"),placeholder:s.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},v.InputLabelProps,{shrink:!0}),inputRef:i,type:o||"text"},p,(C=b.slotProps)==null?void 0:C.baseTextField))}},h))}const iT=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant","getOptionLabel","getOptionValue"],aT=py();function lT(e){var t,n;const{item:o,applyValue:s,apiRef:i,focusElementRef:a,color:l,error:u,helperText:c,size:d,variant:h="standard",getOptionLabel:p,getOptionValue:x}=e,m=le(e,iT),g={color:l,error:u,helperText:c,size:d,variant:h},b=mt(),y=pe();let v=null;if(o.field){const O=i.current.getColumn(o.field);Or(O)&&(v=O)}const C=x||((t=v)==null?void 0:t.getOptionValue),k=p||((n=v)==null?void 0:n.getOptionLabel),F=f.useCallback((O,S)=>C(O)===C(S),[C]),T=f.useMemo(()=>{var O;return(O=v)!=null&&O.valueOptions?typeof v.valueOptions=="function"?v.valueOptions({field:v.field}):v.valueOptions:[]},[v]),I=f.useMemo(()=>T?.map(C),[T,C]),D=f.useMemo(()=>Array.isArray(o.value)?T!==void 0?o.value.map(S=>I?.findIndex($=>$===S)).filter(S=>S>=0).map(S=>T[S]):o.value:[],[o.value,T,I]);f.useEffect(()=>{(!Array.isArray(o.value)||D.length!==o.value.length)&&s(j({},o,{value:D.map(C)}))},[o,D,s,C]);const V=f.useCallback((O,S)=>{s(j({},o,{value:S.map(C)}))},[s,o,C]);return r.jsx(Wf,j({multiple:!0,options:T,isOptionEqualToValue:F,filterOptions:aT,id:b,value:D,onChange:V,getOptionLabel:k,renderTags:(O,S)=>O.map(($,P)=>r.jsx(y.slots.baseChip,j({variant:"outlined",size:"small",label:k($)},S({index:P})))),renderInput:O=>{var S;return r.jsx(y.slots.baseTextField,j({},O,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},O.InputLabelProps,{shrink:!0}),inputRef:a,type:"singleSelect"},g,(S=y.slotProps)==null?void 0:S.baseTextField))}},m))}const cT=["hideMenu","options"],uT=["hideMenu","options"];function dT(e){const t=Ve(),{hideMenu:n,options:o}=e,s=le(e,cT);return r.jsx(oe,j({onClick:()=>{t.current.exportDataAsCsv(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportCSV")}))}function hT(e){const t=Ve(),{hideMenu:n,options:o}=e,s=le(e,uT);return r.jsx(oe,j({onClick:()=>{t.current.exportDataAsPrint(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportPrint")}))}const fT=["className","selectedRowCount"],pT=e=>{const{classes:t}=e;return Ee({root:["selectedRowCount"]},Be,t)},mT=It("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),gT=f.forwardRef(function(t,n){const{className:o,selectedRowCount:s}=t,i=le(t,fT),a=Ve(),l=pe(),u=pT(l),c=a.current.getLocaleText("footerRowSelected")(s);return r.jsx(mT,j({ref:n,className:$e(u.root,o),ownerState:l},i,{children:c}))}),xT=f.forwardRef(function(t,n){var o,s;const i=Ve(),a=pe(),l=ie(i,B1),u=ie(i,uI),c=ie(i,wg),d=!a.hideFooterSelectedRowCount&&u>0?r.jsx(gT,{selectedRowCount:u}):r.jsx("div",{}),h=!a.hideFooterRowCount&&!a.pagination?r.jsx(a.slots.footerRowCount,j({},(o=a.slotProps)==null?void 0:o.footerRowCount,{rowCount:l,visibleRowCount:c})):null,p=a.pagination&&!a.hideFooterPagination&&a.slots.pagination&&r.jsx(a.slots.pagination,j({},(s=a.slotProps)==null?void 0:s.pagination));return r.jsxs(Ck,j({ref:n},t,{children:[d,h,p]}))});function yT(){var e,t;const n=pe();return r.jsxs(f.Fragment,{children:[r.jsx(n.slots.preferencesPanel,j({},(e=n.slotProps)==null?void 0:e.preferencesPanel)),n.slots.toolbar&&r.jsx(n.slots.toolbar,j({},(t=n.slotProps)==null?void 0:t.toolbar))]})}const bT=f.forwardRef(function(t,n){return r.jsx(pu,j({ref:n},t,{children:r.jsx(We,{})}))}),vT=f.forwardRef(function(t,n){const s=Ve().current.getLocaleText("noRowsLabel");return r.jsx(pu,j({ref:n},t,{children:s}))}),CT=Xe(my)(({theme:e})=>({[`& .${$u.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${$u.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),wT=f.forwardRef(function(t,n){const o=Ve(),s=pe(),i=ie(o,nn),a=ie(o,co),l=f.useMemo(()=>Math.floor(a/(i.pageSize||1)),[a,i.pageSize]),u=f.useCallback(p=>{const x=Number(p.target.value);o.current.setPageSize(x)},[o]),c=f.useCallback((p,x)=>{o.current.setPage(x)},[o]),h=(p=>{for(let x=0;x<s.pageSizeOptions.length;x+=1){const m=s.pageSizeOptions[x];if(typeof m=="number"){if(m===p)return!0}else if(m.value===p)return!0}return!1})(i.pageSize)?s.pageSizeOptions:[];return r.jsx(CT,j({ref:n,component:"div",count:a,page:i.page<=l?i.page:l,rowsPerPageOptions:h,rowsPerPage:i.pageSize,onPageChange:c,onRowsPerPageChange:u},o.current.getLocaleText("MuiTablePagination"),t))}),jT=["className","rowCount","visibleRowCount"],ST=e=>{const{classes:t}=e;return Ee({root:["rowCount"]},Be,t)},PT=It("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)})),kT=f.forwardRef(function(t,n){const{className:o,rowCount:s,visibleRowCount:i}=t,a=le(t,jT),l=Ve(),u=pe(),c=ST(u);if(s===0)return null;const d=i<s?l.current.getLocaleText("footerTotalVisibleRows")(i,s):s.toLocaleString();return r.jsxs(PT,j({ref:n,className:$e(c.root,o),ownerState:u},a,{children:[l.current.getLocaleText("footerTotalRows")," ",d]}))}),Li=(e,t)=>{let n,o;return t.pagination&&t.paginationMode==="client"?(o=xu(e),n=cI(e)):(n=gr(e),n.length===0?o=null:o={firstRowIndex:0,lastRowIndex:n.length-1}),{rows:n,range:o}},Wr=(e,t)=>{const n=Li(e,t);return f.useMemo(()=>({rows:n.rows,range:n.range}),[n.rows,n.range])},Zl={current:null};function Is(e){return e.isInternal=!0,e}function _i(e){return e!==void 0&&e.isInternal===!0}function IT(e){return Is((t,n)=>{const o=e(t,n);return o&&(s=>o(s.value,s.row,n,Zl.current))})}function Es(e){return e.map(t=>j({},t,{getApplyFilterFn:IT(t.getApplyFilterFnV7),getApplyFilterFnV7:Is(t.getApplyFilterFnV7)}))}function tx(e){return Is((t,n,o)=>{const s=e(t,n,o);return s&&(i=>s(i.value,i.row,n,o))})}function nx(e){return{current:e.current.getPublicApi()}}let $o;function ET(){if($o!==void 0)return $o;try{$o=new Function("return true")()}catch{$o=!1}return $o}const ec=(e,t)=>{const n=j({},e);if(n.id==null&&(n.id=Math.round(Math.random()*1e5)),n.operator==null){const o=So(t)[n.field];n.operator=o&&o.filterOperators[0].value}return n},TT=On(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),AT=On("MUI: The `id` field is required on `filterModel.items` when you use multiple filters.","error"),MT=On("MUI: The `operator` field is required on `filterModel.items`, one or more of your filtering item has no `operator` provided.","error"),rx=(e,t,n)=>{const o=e.items.length>1;let s;o&&t?(TT(),s=[e.items[0]]):s=e.items;const i=o&&s.some(l=>l.id==null),a=s.some(l=>l.operator==null);return i&&AT(),a&&MT(),a||i?j({},e,{items:s.map(l=>ec(l,n))}):e.items!==s?j({},e,{items:s}):e},zh=(e,t,n)=>o=>j({},o,{filterModel:rx(e,t,n)}),sr=e=>typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,ox=(e,t)=>{if(!e.field||!e.operator)return null;const n=t.current.getColumn(e.field);if(!n)return null;let o;if(n.valueParser){var s;const x=n.valueParser;o=Array.isArray(e.value)?(s=e.value)==null?void 0:s.map(m=>x(m)):x(e.value)}else o=e.value;const{ignoreDiacritics:i}=t.current.rootProps;i&&(o=sr(o));const a=j({},e,{value:o}),l=n.filterOperators;if(!(l!=null&&l.length))throw new Error(`MUI: No filter operators found for column '${n.field}'.`);const u=l.find(x=>x.value===a.operator);if(!u)throw new Error(`MUI: No filter operator found for column '${n.field}' and operator value '${a.operator}'.`);const c=!_i(u.getApplyFilterFn),d=!_i(u.getApplyFilterFnV7),h=nx(t);if(u.getApplyFilterFnV7&&!(c&&!d)){const x=u.getApplyFilterFnV7(a,n);return typeof x!="function"?null:{v7:!0,item:a,fn:m=>{let g=t.current.getRowValue(m,n);return i&&(g=sr(g)),x(g,m,n,h)}}}const p=u.getApplyFilterFn(a,n);return typeof p!="function"?null:{v7:!1,item:a,fn:x=>{const m=t.current.getCellParams(x,a.field);Zl.current=h,i&&(m.value=sr(m.value));const g=p(m);return Zl.current=null,g}}};let Uh=1;const RT=(e,t,n)=>{const{items:o}=e,s=o.map(l=>ox(l,t)).filter(l=>!!l);if(s.length===0)return null;if(n||!ET())return(l,u)=>{const c={};for(let d=0;d<s.length;d+=1){const h=s[d];(!u||u(h.item.field))&&(c[h.item.id]=h.v7?h.fn(l):h.fn(t.current.getRowId(l)))}return c};const i=new Function("getRowId","appliers","row","shouldApplyFilter",`"use strict";
${s.map((l,u)=>`const shouldApply${u} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(l.item.field)});`).join(`
`)}

const result$$ = {
${s.map((l,u)=>`  ${JSON.stringify(String(l.item.id))}: !shouldApply${u}
    ? false
    : ${l.v7?`appliers[${u}].fn(row)`:`appliers[${u}].fn(getRowId(row))`},`).join(`
`)}
};

return result$$;`.replaceAll("$$",String(Uh)));return Uh+=1,(l,u)=>i(t.current.getRowId,s,l,u)},DT=(e,t)=>{var n,o,s;const i=(n=(o=e.quickFilterValues)==null?void 0:o.filter(Boolean))!=null?n:[];if(i.length===0)return null;const l=((s=e.quickFilterExcludeHiddenColumns)!=null?s:!1)?ia(t):qn(t),u=[],{ignoreDiacritics:c}=t.current.rootProps,d=nx(t);return l.forEach(h=>{const p=t.current.getColumn(h),x=p?.getApplyQuickFilterFn,m=p?.getApplyQuickFilterFnV7,g=!_i(x),b=!_i(m);m&&!(g&&!b)?u.push({column:p,appliers:i.map(y=>{const v=c?sr(y):y;return{v7:!0,fn:m(v,p,d)}})}):x&&u.push({column:p,appliers:i.map(y=>{const v=c?sr(y):y;return{v7:!1,fn:x(v,p,d)}})})}),function(p,x){const m={},g={};e:for(let y=0;y<i.length;y+=1){const v=i[y];for(let C=0;C<u.length;C+=1){const{column:k,appliers:F}=u[C],{field:T}=k;if(x&&!x(T))continue;const I=F[y];let D=t.current.getRowValue(p,k);if(I.fn!==null)if(I.v7){if(c&&(D=sr(D)),I.fn(D,p,k,d)){m[v]=!0;continue e}}else{var b;const V=(b=g[T])!=null?b:t.current.getCellParams(t.current.getRowId(p),T);if(c&&(V.value=sr(V.value)),g[T]=V,I.fn(V)){m[v]=!0;continue e}}}m[v]=!1}return m}},FT=(e,t,n)=>{const o=RT(e,t,n),s=DT(e,t);return function(a,l,u){var c,d;u.passingFilterItems=(c=o?.(a,l))!=null?c:null,u.passingQuickFilterValues=(d=s?.(a,l))!=null?d:null}},Gh=e=>e!=null,OT=(e,t,n)=>(e.cleanedFilterItems||(e.cleanedFilterItems=n.filter(o=>ox(o,t)!==null)),e.cleanedFilterItems),LT=(e,t,n,o,s)=>{const i=OT(s,o,n.items),a=e.filter(Gh),l=t.filter(Gh);if(a.length>0){var u;const d=p=>a.some(x=>x[p.id]);if(((u=n.logicOperator)!=null?u:ls().logicOperator)===Vt.And){if(!i.every(d))return!1}else if(!i.some(d))return!1}if(l.length>0&&n.quickFilterValues!=null){var c;const d=p=>l.some(x=>x[p]);if(((c=n.quickFilterLogicOperator)!=null?c:ls().quickFilterLogicOperator)===Vt.And){if(!n.quickFilterValues.every(d))return!1}else if(!n.quickFilterValues.some(d))return!1}return!0},Wh=Is(e=>{if(!e)return null;const t=new RegExp(li(e),"i");return(n,o,s,i)=>{let a=i.current.getRowFormattedValue(o,s);return i.current.ignoreDiacritics&&(a=sr(a)),a!=null?t.test(a.toString()):!1}}),_T=(e=!1)=>Es([{value:"contains",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(li(n),"i");return s=>s!=null?o.test(String(s)):!1},InputComponent:wn},{value:"equals",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?o.compare(n,s.toString())===0:!1},InputComponent:wn},{value:"startsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`^${li(n)}.*$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:wn},{value:"endsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`.*${li(n)}$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:wn},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t===""||t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!==""&&t!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:t=>{if(!Array.isArray(t.value)||t.value.length===0)return null;const n=e?t.value:t.value.map(s=>s.trim()),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?n.some(i=>o.compare(i,s.toString()||"")===0):!1},InputComponent:ex}]),mn={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:yI,type:"string",align:"left",filterOperators:_T(),renderEditCell:UP,getApplyQuickFilterFn:tx(Wh),getApplyQuickFilterFnV7:Wh},$T=()=>Es([{value:"is",getApplyFilterFnV7:e=>{if(!e.value)return null;const t=e.value==="true";return n=>!!n===t},InputComponent:nT}]);function NT({value:e,api:t}){return e?t.getLocaleText("booleanCellTrueLabel"):t.getLocaleText("booleanCellFalseLabel")}const VT=e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}},sx=j({},mn,{type:"boolean",align:"center",headerAlign:"center",renderCell:MP,renderEditCell:OP,sortComparator:Wg,valueFormatter:NT,filterOperators:$T(),getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,aggregable:!1,pastedValueParser:e=>VT(e)}),Jn="__check__",Io=j({},sx,{field:Jn,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,valueGetter:e=>Oi(e.api.state,e.api.instanceId)[e.id]!==void 0,renderHeader:e=>r.jsx(RI,j({},e)),renderCell:e=>r.jsx(TI,j({},e))}),fa="actions",BT=j({},mn,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:ck,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0}),Cu="__detail_panel_toggle__",Ot=e=>e.editRows,HT=["selected","hovered","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","isLastVisible","focusedCellColumnIndexNotInRange","isNotVisible","focusedCell","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"],zT=e=>{const{editable:t,editing:n,selected:o,isLastVisible:s,rowHeight:i,classes:a}=e;return Ee({root:["row",o&&"selected",t&&"row--editable",n&&"row--editing",s&&"row--lastVisible",i==="auto"&&"row--dynamicHeight"]},Be,a)};function UT({width:e}){if(!e)return null;const t={width:e};return r.jsx("div",{className:`${H.cell} ${H.withBorderColor}`,style:t})}const GT=f.forwardRef(function(t,n){const{selected:o,hovered:s,rowId:i,row:a,index:l,style:u,position:c,rowHeight:d,className:h,visibleColumns:p,renderedColumns:x,containerWidth:m,firstColumnToRender:g,isLastVisible:b=!1,focusedCellColumnIndexNotInRange:y,isNotVisible:v,focusedCell:C,onClick:k,onDoubleClick:F,onMouseEnter:T,onMouseLeave:I,onMouseOut:D,onMouseOver:V}=t,O=le(t,HT),S=Ve(),$=f.useRef(null),P=pe(),w=Wr(S,P),E=ie(S,au),R=ie(S,tn),N=ie(S,ca),_=ie(S,Ss),L=ie(S,Ot),B=Br($,n),z=l+_+2,U={selected:o,isLastVisible:b,classes:P.classes,editing:S.current.getRowMode(i)===Je.Edit,editable:P.editMode===Dn.Row,rowHeight:d},J=zT(U);f.useLayoutEffect(()=>{d==="auto"&&$.current&&typeof ResizeObserver>"u"&&S.current.unstable_storeRowHeightMeasurement(i,$.current.clientHeight,c)},[S,d,i,c]),f.useLayoutEffect(()=>{if(w.range){const _e=S.current.getRowIndexRelativeToVisibleRows(i);_e!=null&&S.current.unstable_setLastMeasuredRowIndex(_e)}const re=$.current;if(!re||d!=="auto"||typeof ResizeObserver>"u")return;const Ce=new ResizeObserver(_e=>{const[st]=_e,sn=st.borderBoxSize&&st.borderBoxSize.length>0?st.borderBoxSize[0].blockSize:st.contentRect.height;S.current.unstable_storeRowHeightMeasurement(i,sn,c)});return Ce.observe(re),()=>Ce.disconnect()},[S,w.range,l,d,i,c]);const ee=f.useCallback((re,de)=>Ce=>{Ps(Ce)||S.current.getRow(i)&&(S.current.publishEvent(re,S.current.getRowParams(i),Ce),de&&de(Ce))},[S,i]),te=f.useCallback(re=>{const de=mP(re.target,H.cell),Ce=de?.getAttribute("data-field");if(Ce){if(Ce===Io.field||Ce===Cu||Ce==="__reorder__"||S.current.getCellMode(i,Ce)===Ke.Edit)return;const _e=S.current.getColumn(Ce);if(_e?.type===fa)return}ee("rowClick",k)(re)},[S,k,ee,i]),{slots:ve,slotProps:W,disableColumnReorder:K}=P,ae=ve.cell===Yl?Yl:PP,X=P.rowReordering,ne=(re,de)=>{var Ce,_e;const st=K&&re.disableReorder||!X&&!!R.length&&N>1&&Object.keys(L).length>0,sn=(Ce=(_e=L[i])==null?void 0:_e[re.field])!=null?Ce:null;let vn=!1;return y!==void 0&&p[y].field===re.field&&(vn=!0),r.jsx(ae,j({column:re,width:de.width,rowId:i,height:d,showRightBorder:de.showRightBorder,align:re.align||"left",colIndex:de.indexRelativeToAllColumns,colSpan:de.colSpan,disableDragEvents:st,editCellState:sn,isNotVisible:vn},W?.cell),re.field)},je=ie(S,()=>j({},S.current.unstable_getRowInternalSizes(i)),iu);let Z=d;if(Z==="auto"&&je){let re=0;const de=Object.entries(je).reduce((Ce,[_e,st])=>/^base[A-Z]/.test(_e)?(re+=1,st>Ce?st:Ce):Ce,0);de>0&&re>1&&(Z=de)}const ye=f.useMemo(()=>{if(v)return{opacity:0,width:0,height:0};const re=j({},u,{maxHeight:d==="auto"?"none":d,minHeight:Z});if(je!=null&&je.spacingTop){const de=P.rowSpacingType==="border"?"borderTopWidth":"marginTop";re[de]=je.spacingTop}if(je!=null&&je.spacingBottom){const de=P.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let Ce=re[de];typeof Ce!="number"&&(Ce=parseInt(Ce||"0",10)),Ce+=je.spacingBottom,re[de]=Ce}return re},[v,d,u,Z,je,P.rowSpacingType]),ge=S.current.unstable_applyPipeProcessors("rowClassName",[],i);if(typeof P.getRowClassName=="function"){var Se;const re=l-(((Se=w.range)==null?void 0:Se.firstRowIndex)||0),de=j({},S.current.getRowParams(i),{isFirstVisible:re===0,isLastVisible:re===w.rows.length-1,indexRelativeToCurrentPage:re});ge.push(P.getRowClassName(de))}const be=nI(1e4,20,80),Ae=S.current.getRowNode(i);if(!Ae)return null;const Ge=Ae.type,Ue=[];for(let re=0;re<x.length;re+=1){const de=x[re];let Ce=g+re;y!==void 0&&C&&(p[y].field===de.field?Ce=y:Ce-=1);const _e=S.current.unstable_getCellColSpanInfo(i,Ce);if(_e&&!_e.spannedByColSpan)if(Ge!=="skeletonRow"){const{colSpan:st,width:sn}=_e.cellProps,vn={width:sn,colSpan:st,showRightBorder:P.showCellVerticalBorder,indexRelativeToAllColumns:Ce};Ue.push(ne(de,vn))}else{const{width:st}=_e.cellProps,sn=Math.round(be());Ue.push(r.jsx(ve.skeletonCell,{width:st,contentWidth:sn,field:de.field,align:de.align},de.field))}}const yt=m-E,Ie=a?{onClick:te,onDoubleClick:ee("rowDoubleClick",F),onMouseEnter:ee("rowMouseEnter",T),onMouseLeave:ee("rowMouseLeave",I),onMouseOut:ee("rowMouseOut",D),onMouseOver:ee("rowMouseOver",V)}:null;return r.jsxs("div",j({ref:B,"data-id":i,"data-rowindex":l,role:"row",className:$e(...ge,J.root,h,s&&"Mui-hovered"),"aria-rowindex":z,"aria-selected":o,style:ye},Ie,O,{children:[Ue,yt>0&&r.jsx(UT,{width:yt})]}))}),WT=ha(GT);function qT({privateApiRef:e,props:t,children:n}){const o=f.useRef(e.current.getPublicApi());return r.jsx(dg.Provider,{value:t,children:r.jsx(hg.Provider,{value:e,children:r.jsx(ug.Provider,{value:o,children:n})})})}const KT=eI()&&window.localStorage.getItem("DEBUG")!=null,Wo=()=>{},QT={debug:Wo,info:Wo,warn:Wo,error:Wo},qh=["debug","info","warn","error"];function Kh(e,t,n=console){const o=qh.indexOf(t);if(o===-1)throw new Error(`MUI: Log level ${t} not recognized.`);return qh.reduce((i,a,l)=>(l>=o?i[a]=(...u)=>{const[c,...d]=u;n[a](`MUI: ${e} - ${c}`,...d)}:i[a]=Wo,i),{})}const XT=(e,t)=>{const n=f.useCallback(o=>KT?Kh(o,"debug",t.logger):t.logLevel?Kh(o,t.logLevel.toString(),t.logger):QT,[t.logLevel,t.logger]);Fe(e,{getLogger:n},"private")};class wu{static create(t){return new wu(t)}constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{this.value=n,this.listeners.forEach(o=>o(n))},this.value=t,this.listeners=new Set}}class YT{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let s=this.events[t];s||(s={highPriority:new Map,regular:new Map},this.events[t]=s),o.isFirst?s.highPriority.set(n,!0):s.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const s=Array.from(o.highPriority.keys()),i=Array.from(o.regular.keys());for(let a=s.length-1;a>=0;a-=1){const l=s[a];o.highPriority.has(l)&&l.apply(this,n)}for(let a=0;a<i.length;a+=1){const l=i[a];o.regular.has(l)&&l.apply(this,n)}}once(t,n){const o=this;this.on(t,function s(...i){o.removeListener(t,s),n.apply(o,i)})}}const ix=Symbol("mui.api_private"),JT=e=>e.isPropagationStopped!==void 0;let Qh=0;function ZT(e){var t;const n=(t=e.current)==null?void 0:t[ix];if(n)return n;const o={},s={state:o,store:wu.create(o),instanceId:{id:Qh}};return Qh+=1,s.getPublicApi=()=>e.current,s.register=(i,a)=>{Object.keys(a).forEach(l=>{const u=a[l],c=s[l];if(c?.spying===!0?c.target=u:s[l]=u,i==="public"){const d=e.current,h=d[l];h?.spying===!0?h.target=u:d[l]=u}})},s.register("private",{caches:{},eventManager:new YT}),s}function e2(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[ix]:e.current}}function t2(e,t){const n=f.useRef(),o=f.useRef();o.current||(o.current=ZT(n)),n.current||(n.current=e2(o));const s=f.useCallback((...a)=>{const[l,u,c={}]=a;if(c.defaultMuiPrevented=!1,JT(c)&&c.isPropagationStopped())return;const d=t.signature===En.DataGridPro?{api:o.current.getPublicApi()}:{};o.current.eventManager.emit(l,u,c,d)},[o,t.signature]),i=f.useCallback((a,l,u)=>{o.current.eventManager.on(a,l,u);const c=o.current;return()=>{c.eventManager.removeListener(a,l)}},[o]);return Fe(o,{subscribeEvent:i,publishEvent:s},"public"),f.useImperativeHandle(e,()=>n.current,[n]),f.useEffect(()=>{const a=o.current;return()=>{a.publishEvent("unmount")}},[o]),o}const n2=(e,t)=>{const n=f.useCallback(o=>{if(t.localeText[o]==null)throw new Error(`Missing translation for key ${o}.`);return t.localeText[o]},[t.localeText]);e.current.register("public",{getLocaleText:n})},r2=e=>{const t=f.useRef({}),n=f.useRef(!1),o=f.useCallback(d=>{n.current||!d||(n.current=!0,Object.values(d.appliers).forEach(h=>{h()}),n.current=!1)},[]),s=f.useCallback((d,h,p)=>{t.current[d]||(t.current[d]={processors:new Map,appliers:{}});const x=t.current[d];return x.processors.get(h)!==p&&(x.processors.set(h,p),o(x)),()=>{t.current[d].processors.set(h,null)}},[o]),i=f.useCallback((d,h,p)=>(t.current[d]||(t.current[d]={processors:new Map,appliers:{}}),t.current[d].appliers[h]=p,()=>{const x=t.current[d].appliers,m=le(x,[h].map(ts));t.current[d].appliers=m}),[]),a=f.useCallback(d=>{const h=t.current[d];o(h)},[o]),l=f.useCallback((...d)=>{const[h,p,x]=d;return t.current[h]?Array.from(t.current[h].processors.values()).reduce((g,b)=>b?b(g,x):g,p):p},[]),u={registerPipeProcessor:s,registerPipeApplier:i,requestPipeProcessorsApplication:a},c={unstable_applyPipeProcessors:l};Fe(e,u,"private"),Fe(e,c,"public")},ht=(e,t,n)=>{const o=f.useRef(),s=f.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=f.useCallback(()=>{o.current=e.current.registerPipeProcessor(t,s.current,n)},[e,n,t]);ks(()=>{i()});const a=f.useRef(!0);f.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},ju=(e,t,n)=>{const o=f.useRef(),s=f.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=f.useCallback(()=>{o.current=e.current.registerPipeApplier(t,s.current,n)},[e,n,t]);ks(()=>{i()});const a=f.useRef(!0);f.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},$i=(e,t,n,o)=>{const s=f.useCallback(()=>{e.current.registerStrategyProcessor(t,n,o)},[e,o,n,t]);ks(()=>{s()});const i=f.useRef(!0);f.useEffect(()=>{i.current?i.current=!1:s()},[s])},Nr="none",Xh={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree",visibleRowsLookupCreation:"rowTree"},o2=e=>{const t=f.useRef(new Map),n=f.useRef({}),o=f.useCallback((u,c,d)=>{const h=()=>{const m=n.current[c],g=le(m,[u].map(ts));n.current[c]=g};n.current[c]||(n.current[c]={});const p=n.current[c],x=p[u];return p[u]=d,!x||x===d||u===e.current.getActiveStrategy(Xh[c])&&e.current.publishEvent("activeStrategyProcessorChange",c),h},[e]),s=f.useCallback((u,c)=>{const d=e.current.getActiveStrategy(Xh[u]);if(d==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const h=n.current[u];if(!h||!h[d])throw new Error(`No processor found for processor "${u}" on strategy "${d}"`);const p=h[d];return p(c)},[e]),i=f.useCallback(u=>{var c;const h=Array.from(t.current.entries()).find(([,p])=>p.group!==u?!1:p.isAvailable());return(c=h?.[0])!=null?c:Nr},[]),a=f.useCallback((u,c,d)=>{t.current.set(c,{group:u,isAvailable:d}),e.current.publishEvent("strategyAvailabilityChange")},[e]);Fe(e,{registerStrategyProcessor:o,applyStrategyProcessor:s,getActiveStrategy:i,setStrategyAvailability:a},"private")},s2=(e,t)=>{const n=f.useRef({}),[,o]=f.useState(),s=f.useCallback(d=>{n.current[d.stateId]=d},[]),i=f.useCallback((d,h)=>{let p;if($g(d)?p=d(e.current.state):p=d,e.current.state===p)return!1;let x=!1;const m=[];if(Object.keys(n.current).forEach(g=>{const b=n.current[g],y=b.stateSelector(e.current.state,e.current.instanceId),v=b.stateSelector(p,e.current.instanceId);v!==y&&(m.push({stateId:b.stateId,hasPropChanged:v!==b.propModel}),b.propModel!==void 0&&v!==b.propModel&&(x=!0))}),m.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${m[0].stateId}, therefore, you're not allowed to update ${m.map(g=>g.stateId).join(", ")} in the same transaction.`);if(x||(e.current.state=p,e.current.publishEvent&&e.current.publishEvent("stateChange",p),e.current.store.update(p)),m.length===1){const{stateId:g,hasPropChanged:b}=m[0],y=n.current[g],v=y.stateSelector(p,e.current.instanceId);if(y.propOnChange&&b){const C=t.signature===En.DataGridPro?{api:e.current,reason:h}:{reason:h};y.propOnChange(v,C)}x||e.current.publishEvent(y.changeEvent,v,{reason:h})}return!x},[e,t.signature]),a=f.useCallback((d,h,p)=>e.current.setState(x=>j({},x,{[d]:h(x[d])}),p),[e]),l=f.useCallback(()=>o(()=>e.current.state),[e]),u={setState:i,forceUpdate:l},c={updateControlState:a,registerControlState:s};Fe(e,u,"public"),Fe(e,c,"private")},i2=(e,t)=>{const n=t2(e,t);return XT(n,t),s2(n,t),r2(n),o2(n),n2(n,t),n.current.register("private",{rootProps:t}),n},Nt=(e,t,n)=>{const o=f.useRef(!1);o.current||(t.current.state=e(t.current.state,n,t),o.current=!0)},a2=/(\d+)-(\d+)-(\d+)/,l2=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Jr(e,t,n,o){if(!e.value)return null;const[s,i,a,l,u]=e.value.match(n?l2:a2).slice(1).map(Number),c=new Date(s,i-1,a,l||0,u||0).getTime();return d=>{if(!d)return!1;if(o)return t(d.getTime(),c);const p=new Date(d).setHours(n?d.getHours():0,n?d.getMinutes():0,0,0);return t(p,c)}}const ax=e=>Es([{value:"is",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n===o,e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n!==o,e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n>o,e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n>=o,e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n<o,e,!e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFnV7:t=>Jr(t,(n,o)=>n<=o,e),InputComponent:Yr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!=null,requiresFilterValue:!1}]);function lx({value:e,columnType:t,rowId:n,field:o}){if(!(e instanceof Date))throw new Error([`MUI: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${n}, field: "${o}".`].join(`
`))}function c2({value:e,field:t,id:n}){return e?(lx({value:e,columnType:"date",rowId:n,field:t}),e.toLocaleDateString()):""}function u2({value:e,field:t,id:n}){return e?(lx({value:e,columnType:"dateTime",rowId:n,field:t}),e.toLocaleString()):""}const d2=j({},mn,{type:"date",sortComparator:qg,valueFormatter:c2,filterOperators:ax(),renderEditCell:Ag,pastedValueParser:e=>new Date(e)}),h2=j({},mn,{type:"dateTime",sortComparator:qg,valueFormatter:u2,filterOperators:ax(!0),renderEditCell:Ag,pastedValueParser:e=>new Date(e)}),tr=e=>e==null?null:Number(e),Yh=Is(e=>e==null||Number.isNaN(e)||e===""?null:t=>tr(t)===tr(e)),f2=()=>Es([{value:"=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>tr(t)===e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>tr(t)!==e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)>e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)>=e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)<e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:tr(t)<=e.value,InputComponent:wn,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFnV7:()=>e=>e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:e=>!Array.isArray(e.value)||e.value.length===0?null:t=>t!=null&&e.value.includes(Number(t)),InputComponent:ex,InputComponentProps:{type:"number"}}]),p2=j({},mn,{type:"number",align:"right",headerAlign:"right",sortComparator:Wg,valueParser:e=>e===""?null:Number(e),valueFormatter:({value:e})=>Zk(e)?e.toLocaleString():e||"",filterOperators:f2(),getApplyQuickFilterFn:tx(Yh),getApplyQuickFilterFnV7:Yh}),Zr=e=>e==null||!mu(e)?e:e.value,m2=()=>Es([{value:"is",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>Zr(t)===Zr(e.value),InputComponent:Bh},{value:"not",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>Zr(t)!==Zr(e.value),InputComponent:Bh},{value:"isAnyOf",getApplyFilterFnV7:e=>{if(!Array.isArray(e.value)||e.value.length===0)return null;const t=e.value.map(Zr);return n=>t.includes(Zr(n))},InputComponent:lT}]),g2=e=>typeof e[0]=="object",x2=e=>mu(e)?e.value:e,y2=e=>mu(e)?e.label:String(e),b2=j({},mn,{type:"singleSelect",getOptionLabel:y2,getOptionValue:x2,valueFormatter(e){const{id:t,field:n,value:o,api:s}=e,i=e.api.getColumn(n);if(!Or(i))return"";let a;if(typeof i.valueOptions=="function"?a=i.valueOptions({id:t,row:t?s.getRow(t):null,field:n}):a=i.valueOptions,o==null)return"";if(!a)return o;if(!g2(a))return i.getOptionLabel(o);const l=a.find(u=>i.getOptionValue(u)===o);return l?i.getOptionLabel(l):""},renderEditCell:tk,filterOperators:m2(),pastedValueParser:(e,t)=>{const n=t.colDef,o=n.valueOptions,s=typeof o=="function"?o({field:n.field}):o||[],i=n.getOptionValue;if(s.find(l=>i(l)===e))return e}}),cx="__default__",v2=()=>({string:mn,number:p2,date:d2,dateTime:h2,boolean:sx,singleSelect:b2,[fa]:BT,[cx]:mn});function tc(e,t){if(typeof e=="string"){if(t.shouldAppendQuotes||t.escapeFormulas){const n=e.replace(/"/g,'""');return[t.delimiter,`
`,"\r",'"'].some(o=>e.includes(o))?`"${n}"`:t.escapeFormulas&&["=","+","-","@","	","\r"].includes(n[0])?`'${n}`:n}return e}return e}const ux=(e,t)=>{const{csvOptions:n,ignoreValueFormatter:o}=t;let s;if(o){var i;const l=e.colDef.type;if(l==="number")s=String(e.value);else if(l==="date"||l==="dateTime"){var a;s=(a=e.value)==null?void 0:a.toISOString()}else typeof((i=e.value)==null?void 0:i.toString)=="function"?s=e.value.toString():s=e.value}else s=e.formattedValue;return tc(s,n)};On(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);class nc{constructor(t){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=t}addValue(t){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),t==null?this.rowString+="":typeof this.options.sanitizeCellValue=="function"?this.rowString+=this.options.sanitizeCellValue(t,this.options.csvOptions):this.rowString+=t,this.isEmpty=!1}getRowString(){return this.rowString}}const C2=({id:e,columns:t,getCellParams:n,csvOptions:o,ignoreValueFormatter:s})=>{const i=new nc({csvOptions:o});return t.forEach(a=>{const l=n(e,a.field);i.addValue(ux(l,{ignoreValueFormatter:s,csvOptions:o}))}),i.getRowString()};function w2(e){const{columns:t,rowIds:n,csvOptions:o,ignoreValueFormatter:s,apiRef:i}=e,a=n.reduce((h,p)=>`${h}${C2({id:p,columns:t,getCellParams:i.current.getCellParams,ignoreValueFormatter:s,csvOptions:o})}\r
`,"").trim();if(!o.includeHeaders)return a;const l=t.filter(h=>h.field!==Io.field),u=[];if(o.includeColumnGroupsHeaders){const h=i.current.unstable_getAllGroupDetails();let p=0;const x=l.reduce((m,g)=>{const b=i.current.unstable_getColumnGroupPath(g.field);return m[g.field]=b,p=Math.max(p,b.length),m},{});for(let m=0;m<p;m+=1){const g=new nc({csvOptions:o,sanitizeCellValue:tc});u.push(g),l.forEach(b=>{const y=(x[b.field]||[])[m],v=h[y];g.addValue(v?v.headerName||v.groupId:"")})}}const c=new nc({csvOptions:o,sanitizeCellValue:tc});return l.forEach(h=>{c.addValue(h.headerName||h.field)}),u.push(c),`${`${u.map(h=>h.getRowString()).join(`\r
`)}\r
`}${a}`.trim()}function Jh(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const n=document.createRange();n.selectNode(t);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function j2(e){navigator.clipboard?navigator.clipboard.writeText(e).catch(()=>{Jh(e)}):Jh(e)}function S2(e){var t;return!!((t=window.getSelection())!=null&&t.toString()||e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}const P2=(e,t)=>{const n=t.unstable_ignoreValueFormatterDuringExport,o=(typeof n=="object"?n?.clipboardExport:n)||!1,s=t.clipboardCopyCellDelimiter,i=f.useCallback(a=>{if(!((a.ctrlKey||a.metaKey)&&a.key==="c")||S2(a.target))return;let l="";if(e.current.getSelectedRows().size>0)l=e.current.getDataAsCsv({includeHeaders:!1,delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1});else{const c=qt(e);if(c){const d=e.current.getCellParams(c.id,c.field);l=ux(d,{csvOptions:{delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:o})}}l=e.current.unstable_applyPipeProcessors("clipboardCopy",l),l&&(j2(l),e.current.publishEvent("clipboardCopy",l))},[e,o,s]);rI(e,e.current.rootElementRef,"keydown",i),tt(e,"clipboardCopy",t.onClipboardCopy)},k2=e=>j({},e,{columnMenu:{open:!1}}),I2=e=>{const t=Et(e,"useGridColumnMenu"),n=f.useCallback(a=>{e.current.setState(u=>u.columnMenu.open&&u.columnMenu.field===a?u:(t.debug("Opening Column Menu"),j({},u,{columnMenu:{open:!0,field:a}})))&&(e.current.hidePreferences(),e.current.forceUpdate())},[e,t]),o=f.useCallback(()=>{const a=Xl(e.current.state);if(a.field){const u=So(e),c=fn(e),d=qn(e);let h=a.field;if(u[h]||(h=d[0]),c[h]===!1){const p=d.filter(m=>m===h?!0:c[m]!==!1),x=p.indexOf(h);h=p[x+1]||p[x-1]}e.current.setColumnHeaderFocus(h)}e.current.setState(u=>!u.columnMenu.open&&u.columnMenu.field===void 0?u:(t.debug("Hiding Column Menu"),j({},u,{columnMenu:j({},u.columnMenu,{open:!1,field:void 0})})))&&e.current.forceUpdate()},[e,t]),s=f.useCallback(a=>{t.debug("Toggle Column Menu");const l=Xl(e.current.state);!l.open||l.field!==a?n(a):o()},[e,t,n,o]);Fe(e,{showColumnMenu:n,hideColumnMenu:o,toggleColumnMenu:s},"public"),me(e,"columnResizeStart",o),me(e,"virtualScrollerWheel",e.current.hideColumnMenu),me(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)},dx=["maxWidth","minWidth","width","flex"];function E2({initialFreeSpace:e,totalFlexUnits:t,flexColumns:n}){const o=new Set(n.map(a=>a.field)),s={all:{},frozenFields:[],freeze:a=>{const l=s.all[a];l&&l.frozen!==!0&&(s.all[a].frozen=!0,s.frozenFields.push(a))}};function i(){if(s.frozenFields.length===o.size)return;const a={min:{},max:{}};let l=e,u=t,c=0;s.frozenFields.forEach(d=>{l-=s.all[d].computedWidth,u-=s.all[d].flex});for(let d=0;d<n.length;d+=1){const h=n[d];if(s.all[h.field]&&s.all[h.field].frozen===!0)continue;let x=l/u*h.flex;x<h.minWidth?(c+=h.minWidth-x,x=h.minWidth,a.min[h.field]=!0):x>h.maxWidth&&(c+=h.maxWidth-x,x=h.maxWidth,a.max[h.field]=!0),s.all[h.field]={frozen:!1,computedWidth:x,flex:h.flex}}c<0?Object.keys(a.max).forEach(d=>{s.freeze(d)}):c>0?Object.keys(a.min).forEach(d=>{s.freeze(d)}):n.forEach(({field:d})=>{s.freeze(d)}),i()}return i(),s.all}const rc=(e,t)=>{const n={};let o=0,s=0;const i=[];e.orderedFields.forEach(l=>{const u=j({},e.lookup[l]);if(e.columnVisibilityModel[l]===!1)u.computedWidth=0;else{let c;u.flex&&u.flex>0?(o+=u.flex,c=0,i.push(u)):c=Co(u.width||mn.width,u.minWidth||mn.minWidth,u.maxWidth||mn.maxWidth),s+=c,u.computedWidth=c}n[l]=u});const a=Math.max(t-s,0);if(o>0&&t>0){const l=E2({initialFreeSpace:a,totalFlexUnits:o,flexColumns:i});Object.keys(l).forEach(u=>{n[u].computedWidth=l[u].computedWidth})}return j({},e,{lookup:n})},T2=(e,t)=>{if(!t)return e;const{orderedFields:n=[],dimensions:o={}}=t,s=Object.keys(o);if(s.length===0&&n.length===0)return e;const i={},a=[];for(let d=0;d<n.length;d+=1){const h=n[d];e.lookup[h]&&(i[h]=!0,a.push(h))}const l=a.length===0?e.orderedFields:[...a,...e.orderedFields.filter(d=>!i[d])],u=j({},e.lookup);for(let d=0;d<s.length;d+=1){const h=s[d],p=j({},u[h],{hasBeenResized:!0});Object.entries(o[h]).forEach(([x,m])=>{p[x]=m===-1?1/0:m}),u[h]=p}return j({},e,{orderedFields:l,lookup:u})};function Zh(e,t){let n=e[cx];return t&&e[t]&&(n=e[t]),n}const to=({apiRef:e,columnsToUpsert:t,initialState:n,columnTypes:o,columnVisibilityModel:s=fn(e),keepOnlyColumnsToUpsert:i=!1})=>{var a,l,u;const c=!e.current.state.columns;let d;if(c)d={orderedFields:[],lookup:{},columnVisibilityModel:s};else{const m=Fr(e.current.state);d={orderedFields:i?[]:[...m.orderedFields],lookup:j({},m.lookup),columnVisibilityModel:s}}let h={};i&&!c&&(h=Object.keys(d.lookup).reduce((m,g)=>j({},m,{[g]:!1}),{})),t.forEach(m=>{const{field:g}=m;h[g]=!0;let b=d.lookup[g];b==null?(b=j({},Zh(o,m.type),{field:g,hasBeenResized:!1}),d.orderedFields.push(g)):i&&d.orderedFields.push(g),b&&b.type!==m.type&&(b=j({},Zh(o,m.type),{field:g}));let y=b.hasBeenResized;dx.forEach(v=>{m[v]!==void 0&&(y=!0,m[v]===-1&&(m[v]=1/0))}),d.lookup[g]=j({},b,m,{hasBeenResized:y})}),i&&!c&&Object.keys(d.lookup).forEach(m=>{h[m]||delete d.lookup[m]});const p=e.current.unstable_applyPipeProcessors("hydrateColumns",d),x=T2(p,n);return rc(x,(a=(l=(u=e.current).getRootDimensions)==null||(l=l.call(u))==null?void 0:l.viewportInnerSize.width)!=null?a:0)},ef=e=>t=>j({},t,{columns:e});function oc({firstColumnToRender:e,apiRef:t,firstRowToRender:n,lastRowToRender:o,visibleRows:s}){let i=e;for(let a=n;a<o;a+=1)if(s[a]){const u=s[a].id,c=t.current.unstable_getCellColSpanInfo(u,e);c&&c.spannedByColSpan&&(i=c.leftVisibleCellIndex)}return i}function A2({firstColumnIndex:e,minColumnIndex:t,columnBuffer:n,firstRowToRender:o,lastRowToRender:s,apiRef:i,visibleRows:a}){const l=Math.max(e-n,t);return oc({firstColumnToRender:l,apiRef:i,firstRowToRender:o,lastRowToRender:s,visibleRows:a})}function Su(e,t){const n=ko(e),o=Ss(e);return Math.floor(t*n)*((o??0)+1)}const hx=v2(),M2=(e,t,n)=>{var o,s,i,a;const l=to({apiRef:n,columnTypes:hx,columnsToUpsert:t.columns,initialState:(o=t.initialState)==null?void 0:o.columns,columnVisibilityModel:(s=(i=t.columnVisibilityModel)!=null?i:(a=t.initialState)==null||(a=a.columns)==null?void 0:a.columnVisibilityModel)!=null?s:{},keepOnlyColumnsToUpsert:!0});return j({},e,{columns:l})};function R2(e,t){var n,o;const s=Et(e,"useGridColumns"),i=hx,a=f.useRef(t.columns),l=f.useRef(i);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:fn,changeEvent:"columnVisibilityModelChange"});const u=f.useCallback(w=>{s.debug("Updating columns state."),e.current.setState(ef(w)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",w.orderedFields)},[s,e]),c=f.useCallback(w=>So(e)[w],[e]),d=f.useCallback(()=>In(e),[e]),h=f.useCallback(()=>Pt(e),[e]),p=f.useCallback((w,E=!0)=>(E?Pt(e):In(e)).findIndex(N=>N.field===w),[e]),x=f.useCallback(w=>{const E=p(w);return vo(e)[E]},[e,p]),m=f.useCallback(w=>{fn(e)!==w&&(e.current.setState(R=>j({},R,{columns:to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:w,keepOnlyColumnsToUpsert:!1})})),e.current.forceUpdate())},[e,i]),g=f.useCallback(w=>{const E=to({apiRef:e,columnTypes:i,columnsToUpsert:w,initialState:void 0,keepOnlyColumnsToUpsert:!1});u(E)},[e,u,i]),b=f.useCallback((w,E)=>{var R;const N=fn(e),_=(R=N[w])!=null?R:!0;if(E!==_){const L=j({},N,{[w]:E});e.current.setColumnVisibilityModel(L)}},[e]),y=f.useCallback(w=>qn(e).findIndex(R=>R===w),[e]),v=f.useCallback((w,E)=>{const R=qn(e),N=y(w);if(N===E)return;s.debug(`Moving column ${w} to index ${E}`);const _=[...R],L=_.splice(N,1)[0];_.splice(E,0,L),u(j({},Fr(e.current.state),{orderedFields:_}));const B={column:e.current.getColumn(w),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(w),oldIndex:N};e.current.publishEvent("columnIndexChange",B)},[e,s,u,y]),C=f.useCallback((w,E)=>{var R,N;s.debug(`Updating column ${w} width to ${E}`);const _=Fr(e.current.state),L=_.lookup[w],B=j({},L,{width:E,hasBeenResized:!0});u(rc(j({},_,{lookup:j({},_.lookup,{[w]:B})}),(R=(N=e.current.getRootDimensions())==null?void 0:N.viewportInnerSize.width)!=null?R:0)),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(w),colDef:B,width:E})},[e,s,u]),k={getColumn:c,getAllColumns:d,getColumnIndex:p,getColumnPosition:x,getVisibleColumns:h,getColumnIndexRelativeToVisibleColumns:y,updateColumns:g,setColumnVisibilityModel:m,setColumnVisibility:b,setColumnWidth:C},F={setColumnIndex:v};Fe(e,k,"public"),Fe(e,F,t.signature===En.DataGrid?"private":"public");const T=f.useCallback((w,E)=>{var R,N;const _={},L=fn(e);(!E.exportOnlyDirtyModels||t.columnVisibilityModel!=null||Object.keys((R=(N=t.initialState)==null||(N=N.columns)==null?void 0:N.columnVisibilityModel)!=null?R:{}).length>0||Object.keys(L).length>0)&&(_.columnVisibilityModel=L),_.orderedFields=qn(e);const z=In(e),U={};return z.forEach(J=>{if(J.hasBeenResized){const ee={};dx.forEach(te=>{let ve=J[te];ve===1/0&&(ve=-1),ee[te]=ve}),U[J.field]=ee}}),Object.keys(U).length>0&&(_.dimensions=U),j({},w,{columns:_})},[e,t.columnVisibilityModel,(n=t.initialState)==null?void 0:n.columns]),I=f.useCallback((w,E)=>{var R;const N=(R=E.stateToRestore.columns)==null?void 0:R.columnVisibilityModel,_=E.stateToRestore.columns;if(N==null&&_==null)return w;const L=to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:_,columnVisibilityModel:N,keepOnlyColumnsToUpsert:!1});return e.current.setState(ef(L)),_!=null&&e.current.publishEvent("columnsChange",L.orderedFields),w},[e,i]),D=f.useCallback((w,E)=>{if(E===$r.columns){var R;const N=t.slots.columnsPanel;return r.jsx(N,j({},(R=t.slotProps)==null?void 0:R.columnsPanel))}return w},[t.slots.columnsPanel,(o=t.slotProps)==null?void 0:o.columnsPanel]),V=f.useCallback(w=>t.disableColumnSelector?w:[...w,"columnMenuColumnsItem"],[t.disableColumnSelector]);ht(e,"columnMenu",V),ht(e,"exportState",T),ht(e,"restoreState",I),ht(e,"preferencePanel",D);const O=f.useRef(null);me(e,"viewportInnerSizeChange",w=>{O.current!==w.width&&(O.current=w.width,u(rc(Fr(e.current.state),w.width)))});const $=f.useCallback(()=>{s.info("Columns pipe processing have changed, regenerating the columns");const w=to({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});u(w)},[e,s,u,i]);ju(e,"hydrateColumns",$);const P=f.useRef(!0);f.useEffect(()=>{if(P.current){P.current=!1;return}if(s.info(`GridColumns have changed, new length ${t.columns.length}`),a.current===t.columns&&l.current===i)return;const w=to({apiRef:e,columnTypes:i,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});a.current=t.columns,l.current=i,u(w)},[s,e,u,t.columns,i]),f.useEffect(()=>{t.columnVisibilityModel!==void 0&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)},[e,s,t.columnVisibilityModel])}const D2=.7,F2=1.3,fx={compact:D2,comfortable:F2,standard:1},O2=(e,t)=>j({},e,{density:{value:t.density,factor:fx[t.density]}}),L2=(e,t)=>{const n=Et(e,"useDensity"),o=f.useCallback(i=>{n.debug(`Set grid density to ${i}`),e.current.setState(a=>{const l=du(a),u={value:i,factor:fx[i]};return Lr(l,u)?a:j({},a,{density:u})}),e.current.forceUpdate()},[n,e]);f.useEffect(()=>{e.current.setDensity(t.density)},[e,t.density]),Fe(e,{setDensity:o},"public")};function _2(e,t="csv",n=document.title||"untitled"){const o=`${n}.${t}`;if("download"in HTMLAnchorElement.prototype){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=o,i.click(),setTimeout(()=>{URL.revokeObjectURL(s)});return}throw new Error("MUI: exportAs not supported")}const px=({apiRef:e,options:t})=>{const n=In(e);return t.fields?t.fields.reduce((s,i)=>{const a=n.find(l=>l.field===i);return a&&s.push(a),s},[]):(t.allColumns?n:Pt(e)).filter(s=>!s.disableExport)},$2=({apiRef:e})=>{var t,n;const o=Y1(e),s=dn(e),i=e.current.getSelectedRows(),a=o.filter(d=>s[d].type!=="footer"),l=Po(e),u=(l==null||(t=l.top)==null?void 0:t.map(d=>d.id))||[],c=(l==null||(n=l.bottom)==null?void 0:n.map(d=>d.id))||[];return a.unshift(...u),a.push(...c),i.size>0?a.filter(d=>i.has(d)):a},N2=(e,t)=>{const n=Et(e,"useGridCsvExport"),o=t.unstable_ignoreValueFormatterDuringExport,s=(typeof o=="object"?o?.csvExport:o)||!1,i=f.useCallback((c={})=>{var d,h,p,x,m;n.debug("Get data as CSV");const g=px({apiRef:e,options:c}),y=((d=c.getRowsToExport)!=null?d:$2)({apiRef:e});return w2({columns:g,rowIds:y,csvOptions:{delimiter:c.delimiter||",",shouldAppendQuotes:(h=c.shouldAppendQuotes)!=null?h:!0,includeHeaders:(p=c.includeHeaders)!=null?p:!0,includeColumnGroupsHeaders:(x=c.includeColumnGroupsHeaders)!=null?x:!0,escapeFormulas:(m=c.escapeFormulas)!=null?m:!0},ignoreValueFormatter:s,apiRef:e})},[n,e,s]),a=f.useCallback(c=>{n.debug("Export data as CSV");const d=i(c),h=new Blob([c!=null&&c.utf8WithBom?new Uint8Array([239,187,191]):"",d],{type:"text/csv"});_2(h,"csv",c?.fileName)},[n,i]);Fe(e,{getDataAsCsv:i,exportDataAsCsv:a},"public");const u=f.useCallback((c,d)=>{var h;return(h=d.csvOptions)!=null&&h.disableToolbarButton?c:[...c,{component:r.jsx(dT,{options:d.csvOptions}),componentName:"csvExport"}]},[]);ht(e,"exportMenu",u)},ci=(e,t,n)=>{var o;let s=e.paginationModel;const i=e.rowCount,a=(o=n?.pageSize)!=null?o:s.pageSize,l=Vg(i,a);n&&(n?.page!==s.page||n?.pageSize!==s.pageSize)&&(s=n);const u=iI(s.page,l);return u!==s.page&&(s=j({},s,{page:u})),Hg(s.pageSize,t),s},V2=(e,t)=>{var n;const o=Et(e,"useGridPaginationModel"),s=ie(e,ko),i=Math.floor(t.rowHeight*s);e.current.registerControlState({stateId:"paginationModel",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:nn,changeEvent:"paginationModelChange"});const a=f.useCallback(g=>{const b=nn(e);g!==b.page&&(o.debug(`Setting page to ${g}`),e.current.setPaginationModel({page:g,pageSize:b.pageSize}))},[e,o]),l=f.useCallback(g=>{const b=nn(e);g!==b.pageSize&&(o.debug(`Setting page size to ${g}`),e.current.setPaginationModel({pageSize:g,page:b.page}))},[e,o]),u=f.useCallback(g=>{const b=nn(e);g!==b&&(o.debug("Setting 'paginationModel' to",g),e.current.setState(y=>j({},y,{pagination:j({},y.pagination,{paginationModel:ci(y.pagination,t.signature,g)})})))},[e,o,t.signature]);Fe(e,{setPage:a,setPageSize:l,setPaginationModel:u},"public");const d=f.useCallback((g,b)=>{var y;const v=nn(e);return!b.exportOnlyDirtyModels||t.paginationModel!=null||((y=t.initialState)==null||(y=y.pagination)==null?void 0:y.paginationModel)!=null||v.page!==0&&v.pageSize!==sI(t.autoPageSize)?j({},g,{pagination:j({},g.pagination,{paginationModel:v})}):g},[e,t.paginationModel,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.paginationModel,t.autoPageSize]),h=f.useCallback((g,b)=>{var y,v;const C=(y=b.stateToRestore.pagination)!=null&&y.paginationModel?j({},Bg(t.autoPageSize),(v=b.stateToRestore.pagination)==null?void 0:v.paginationModel):nn(e);return e.current.setState(k=>j({},k,{pagination:j({},k.pagination,{paginationModel:ci(k.pagination,t.signature,C)})})),g},[e,t.autoPageSize,t.signature]);ht(e,"exportState",d),ht(e,"restoreState",h);const p=()=>{var g;const b=nn(e);(g=e.current.virtualScrollerRef)!=null&&g.current&&e.current.scrollToIndexes({rowIndex:b.page*b.pageSize})},x=f.useCallback(()=>{if(!t.autoPageSize)return;const g=e.current.getRootDimensions()||{viewportInnerSize:{height:0}},b=kg(e),y=Math.floor((g.viewportInnerSize.height-b.top-b.bottom)/i);e.current.setPageSize(y)},[e,t.autoPageSize,i]),m=f.useCallback(g=>{if(g==null)return;const b=nn(e),y=lI(e);b.page>y-1&&e.current.setPage(Math.max(0,y-1))},[e]);me(e,"viewportInnerSizeChange",x),me(e,"paginationModelChange",p),me(e,"rowCountChange",m),f.useEffect(()=>{e.current.setState(g=>j({},g,{pagination:j({},g.pagination,{paginationModel:ci(g.pagination,t.signature,t.paginationModel)})}))},[e,t.paginationModel,t.paginationMode,t.signature]),f.useEffect(x,[x])};function B2(){return new Promise(e=>{requestAnimationFrame(()=>{e()})})}function H2(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}const z2=(e,t)=>{const n=Et(e,"useGridPrintExport"),o=f.useRef(null),s=f.useRef(null),i=f.useRef({}),a=f.useRef([]);f.useEffect(()=>{o.current=zi(e.current.rootElementRef.current)},[e]);const l=f.useCallback((m,g,b)=>new Promise(y=>{const v=px({apiRef:e,options:{fields:m,allColumns:g}}).map(F=>F.field),C=In(e),k={};C.forEach(F=>{k[F.field]=v.includes(F.field)}),b&&(k[Io.field]=!0),e.current.setColumnVisibilityModel(k),y()}),[e]),u=f.useCallback(m=>{const b=m({apiRef:e}).map(y=>e.current.getRow(y));e.current.setRows(b)},[e]),c=f.useCallback((m,g)=>{var b,y;const v=j({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},g),C=m.contentDocument;if(!C)return;const k=us(e.current.state),F=e.current.rootElementRef.current,T=F.cloneNode(!0),I=T.querySelector(`.${H.main}`);I.style.overflow="visible",T.style.contain="size";const V=T.querySelector(`.${H.columnHeaders}`).querySelector(`.${H.columnHeadersInner}`);V.style.width="100%";let O=((b=F.querySelector(`.${H.toolbarContainer}`))==null?void 0:b.offsetHeight)||0,S=((y=F.querySelector(`.${H.footerContainer}`))==null?void 0:y.offsetHeight)||0;if(v.hideToolbar){var $;($=T.querySelector(`.${H.toolbarContainer}`))==null||$.remove(),O=0}if(v.hideFooter){var P;(P=T.querySelector(`.${H.footerContainer}`))==null||P.remove(),S=0}const w=k.currentPageTotalHeight+Su(e,t.columnHeaderHeight)+O+S;if(T.style.height=`${w}px`,T.style.boxSizing="content-box",g!=null&&g.getRowsToExport){const _=T.querySelector(`.${H.footerContainer}`);_.style.position="absolute",_.style.width="100%",_.style.top=`${w-S}px`}const E=document.createElement("div");E.appendChild(T),C.body.innerHTML=E.innerHTML;const R=typeof v.pageStyle=="function"?v.pageStyle():v.pageStyle;if(typeof R=="string"){const _=C.createElement("style");_.appendChild(C.createTextNode(R)),C.head.appendChild(_)}v.bodyClassName&&C.body.classList.add(...v.bodyClassName.split(" "));const N=[];if(v.copyStyles){const _=F.getRootNode(),B=(_.constructor.name==="ShadowRoot"?_:o.current).querySelectorAll("style, link[rel='stylesheet']");for(let z=0;z<B.length;z+=1){const U=B[z];if(U.tagName==="STYLE"){const J=C.createElement(U.tagName),ee=U.sheet;if(ee){let te="";for(let ve=0;ve<ee.cssRules.length;ve+=1)typeof ee.cssRules[ve].cssText=="string"&&(te+=`${ee.cssRules[ve].cssText}\r
`);J.appendChild(C.createTextNode(te)),C.head.appendChild(J)}}else if(U.getAttribute("href")){const J=C.createElement(U.tagName);for(let ee=0;ee<U.attributes.length;ee+=1){const te=U.attributes[ee];te&&J.setAttribute(te.nodeName,te.nodeValue||"")}N.push(new Promise(ee=>{J.addEventListener("load",()=>ee())})),C.head.appendChild(J)}}}Promise.all(N).then(()=>{m.contentWindow.print()})},[e,o,t.columnHeaderHeight]),d=f.useCallback(m=>{var g;o.current.body.removeChild(m),e.current.restoreState(s.current||{}),(g=s.current)!=null&&(g=g.columns)!=null&&g.columnVisibilityModel||e.current.setColumnVisibilityModel(i.current),e.current.unstable_setVirtualization(!0),e.current.setRows(a.current),s.current=null,i.current={},a.current=[]},[e]),p={exportDataAsPrint:f.useCallback(async m=>{if(n.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");s.current=e.current.exportState(),i.current=fn(e);const g=Hn(e);if(a.current=Go(e).map(y=>g[y]),t.pagination){const v={page:0,pageSize:Cg(e)};e.current.setState(C=>j({},C,{pagination:j({},C.pagination,{paginationModel:ci(C.pagination,"DataGridPro",v)})})),e.current.forceUpdate()}await l(m?.fields,m?.allColumns,m?.includeCheckboxes),m!=null&&m.getRowsToExport&&u(m.getRowsToExport),e.current.unstable_setVirtualization(!1),await B2();const b=H2(m?.fileName);b.onload=()=>{c(b,m),b.contentWindow.matchMedia("print").addEventListener("change",v=>{v.matches===!1&&d(b)})},o.current.body.appendChild(b)},[t,n,e,c,d,l,u])};Fe(e,p,"public");const x=f.useCallback((m,g)=>{var b;return(b=g.printOptions)!=null&&b.disableToolbarButton?m:[...m,{component:r.jsx(hT,{options:g.printOptions}),componentName:"printExport"}]},[]);ht(e,"exportMenu",x)},U2=(e,t,n)=>{var o,s,i;const a=(o=(s=t.filterModel)!=null?s:(i=t.initialState)==null||(i=i.filter)==null?void 0:i.filterModel)!=null?o:ls();return j({},e,{filter:{filterModel:rx(a,t.disableMultipleColumnsFiltering,n),filteredRowsLookup:{},filteredDescendantCountLookup:{}},visibleRowsLookup:{}})},G2=e=>e.filteredRowsLookup;function tf(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function W2(){return sa(Object.values)}const q2=(e,t)=>{var n,o;const s=Et(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:bt,changeEvent:"filterModelChange"});const i=f.useCallback(()=>{e.current.setState(O=>{const S=bt(O,e.current.instanceId),$=t.filterMode==="client"?FT(S,e,t.disableEval):null,P=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:$,filterModel:S??ls()}),w=j({},O,{filter:j({},O.filter,P)}),E=tf(e,w);return j({},w,{visibleRowsLookup:E})}),e.current.publishEvent("filteredRowsSet")},[e,t.filterMode,t.disableEval]),a=f.useCallback((O,S)=>S==null||S.filterable===!1||t.disableColumnFilter?O:[...O,"columnMenuFilterItem"],[t.disableColumnFilter]),l=f.useCallback(()=>{i(),e.current.forceUpdate()},[e,i]),u=f.useCallback(O=>{const S=bt(e),$=[...S.items],P=$.findIndex(w=>w.id===O.id);P===-1?$.push(O):$[P]=O,e.current.setFilterModel(j({},S,{items:$}),"upsertFilterItem")},[e]),c=f.useCallback(O=>{const S=bt(e),$=[...S.items];O.forEach(P=>{const w=O.findIndex(E=>E.id===P.id);w===-1?$.push(P):$[w]=P}),e.current.setFilterModel(j({},S,{items:O}),"upsertFilterItems")},[e]),d=f.useCallback(O=>{const S=bt(e),$=S.items.filter(P=>P.id!==O.id);$.length!==S.items.length&&e.current.setFilterModel(j({},S,{items:$}),"deleteFilterItem")},[e]),h=f.useCallback((O,S,$)=>{if(s.debug("Displaying filter panel"),O){const P=bt(e),w=P.items.filter(_=>{var L;if(_.value!==void 0)return!(Array.isArray(_.value)&&_.value.length===0);const z=(L=e.current.getColumn(_.field).filterOperators)==null?void 0:L.find(J=>J.value===_.operator);return!(typeof z?.requiresFilterValue>"u"?!0:z?.requiresFilterValue)});let E;const R=w.find(_=>_.field===O),N=e.current.getColumn(O);R?E=w:t.disableMultipleColumnsFiltering?E=[ec({field:O,operator:N.filterOperators[0].value},e)]:E=[...w,ec({field:O,operator:N.filterOperators[0].value},e)],e.current.setFilterModel(j({},P,{items:E}))}e.current.showPreferences($r.filters,S,$)},[e,s,t.disableMultipleColumnsFiltering]),p=f.useCallback(()=>{s.debug("Hiding filter panel"),e.current.hidePreferences()},[e,s]),x=f.useCallback(O=>{const S=bt(e);S.logicOperator!==O&&e.current.setFilterModel(j({},S,{logicOperator:O}),"changeLogicOperator")},[e]),m=f.useCallback(O=>{const S=bt(e);Lr(S.quickFilterValues,O)||e.current.setFilterModel(j({},S,{quickFilterValues:[...O]}))},[e]),g=f.useCallback((O,S)=>{bt(e)!==O&&(s.debug("Setting filter model"),e.current.updateControlState("filter",zh(O,t.disableMultipleColumnsFiltering,e),S),e.current.unstable_applyFilters())},[e,s,t.disableMultipleColumnsFiltering]),b={setFilterLogicOperator:x,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:u,upsertFilterItems:c,setFilterModel:g,showFilterPanel:h,hideFilterPanel:p,setQuickFilterValues:m,ignoreDiacritics:t.ignoreDiacritics};Fe(e,b,"public");const y=f.useCallback((O,S)=>{var $;const P=bt(e);return!S.exportOnlyDirtyModels||t.filterModel!=null||(($=t.initialState)==null||($=$.filter)==null?void 0:$.filterModel)!=null||!Lr(P,ls())?j({},O,{filter:{filterModel:P}}):O},[e,t.filterModel,(n=t.initialState)==null||(n=n.filter)==null?void 0:n.filterModel]),v=f.useCallback((O,S)=>{var $;const P=($=S.stateToRestore.filter)==null?void 0:$.filterModel;return P==null?O:(e.current.updateControlState("filter",zh(P,t.disableMultipleColumnsFiltering,e),"restoreState"),j({},O,{callbacks:[...O.callbacks,e.current.unstable_applyFilters]}))},[e,t.disableMultipleColumnsFiltering]),C=f.useCallback((O,S)=>{if(S===$r.filters){var $;const P=t.slots.filterPanel;return r.jsx(P,j({},($=t.slotProps)==null?void 0:$.filterPanel))}return O},[t.slots.filterPanel,(o=t.slotProps)==null?void 0:o.filterPanel]),{getRowId:k}=t,F=su(W2),T=f.useCallback(O=>{if(t.filterMode!=="client"||!O.isRowMatchingFilters)return{filteredRowsLookup:{},filteredDescendantCountLookup:{}};const S=Hn(e),$={},{isRowMatchingFilters:P}=O,w={},E={passingFilterItems:null,passingQuickFilterValues:null},R=F.current(e.current.state.rows.dataRowIdToModelLookup);for(let L=0;L<R.length;L+=1){const B=R[L],z=k?k(B):B.id;P(B,void 0,E);const U=LT([E.passingFilterItems],[E.passingQuickFilterValues],O.filterModel,e,w);$[z]=U}const N="auto-generated-group-footer-root";return S[N]&&($[N]=!0),{filteredRowsLookup:$,filteredDescendantCountLookup:{}}},[e,t.filterMode,k,F]);ht(e,"columnMenu",a),ht(e,"exportState",y),ht(e,"restoreState",v),ht(e,"preferencePanel",C),$i(e,Nr,"filtering",T),$i(e,Nr,"visibleRowsLookupCreation",G2);const I=f.useCallback(()=>{s.debug("onColUpdated - GridColumns changed, applying filters");const O=bt(e),S=_1(e),$=O.items.filter(P=>P.field&&S[P.field]);$.length<O.items.length&&e.current.setFilterModel(j({},O,{items:$}))},[e,s]),D=f.useCallback(O=>{O==="filtering"&&e.current.unstable_applyFilters()},[e]),V=f.useCallback(()=>{e.current.setState(O=>j({},O,{visibleRowsLookup:tf(e,O)})),e.current.forceUpdate()},[e]);me(e,"rowsSet",i),me(e,"columnsChange",I),me(e,"activeStrategyProcessorChange",D),me(e,"rowExpansionChange",V),me(e,"columnVisibilityModelChange",()=>{const O=bt(e);O.quickFilterValues&&O.quickFilterExcludeHiddenColumns&&e.current.unstable_applyFilters()}),ks(()=>{e.current.unstable_applyFilters()}),kt(()=>{t.filterModel!==void 0&&e.current.setFilterModel(t.filterModel)},[e,s,t.filterModel])},K2=e=>j({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),Q2=(e,t)=>{const n=Et(e,"useGridFocus"),o=f.useRef(null),s=f.useCallback((I,D)=>{I&&e.current.getRow(I.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(I.id,I.field),D)},[e]),i=f.useCallback((I,D)=>{const V=qt(e);V?.id===I&&V?.field===D||(e.current.setState(O=>(n.debug(`Focusing on cell with id=${I} and field=${D}`),j({},O,{tabIndex:{cell:{id:I,field:D},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:I,field:D},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),e.current.forceUpdate(),e.current.getRow(I)&&(V&&s(V,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(I,D))))},[e,n,s]),a=f.useCallback((I,D={})=>{const V=qt(e);s(V,D),e.current.setState(O=>(n.debug(`Focusing on column header with colIndex=${I}`),j({},O,{tabIndex:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),l=f.useCallback((I,D={})=>{const V=qt(e);s(V,D),e.current.setState(O=>(n.debug(`Focusing on column header filter with colIndex=${I}`),j({},O,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),u=f.useCallback((I,D,V={})=>{const O=qt(e);O&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(O.id,O.field),V),e.current.setState(S=>j({},S,{tabIndex:{columnGroupHeader:{field:I,depth:D},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:I,depth:D},columnHeader:null,columnHeaderFilter:null,cell:null}})),e.current.forceUpdate()},[e]),c=f.useCallback(()=>Ti(e),[e]),d=f.useCallback((I,D,V)=>{let O=e.current.getColumnIndex(D);const S=Pt(e),$=Li(e,{pagination:t.pagination,paginationMode:t.paginationMode}),P=Po(e),w=[].concat(P.top||[],$.rows,P.bottom||[]);let E=w.findIndex(L=>L.id===I);V==="right"?O+=1:V==="left"?O-=1:E+=1,O>=S.length?(E+=1,E<w.length&&(O=0)):O<0&&(E-=1,E>=0&&(O=S.length-1)),E=Co(E,0,w.length-1);const R=w[E];if(!R)return;const N=e.current.unstable_getCellColSpanInfo(R.id,O);N&&N.spannedByColSpan&&(V==="left"||V==="below"?O=N.leftVisibleCellIndex:V==="right"&&(O=N.rightVisibleCellIndex)),O=Co(O,0,S.length-1);const _=S[O];e.current.setCellFocus(R.id,_.field)},[e,t.pagination,t.paginationMode]),h=f.useCallback(({id:I,field:D})=>{e.current.setCellFocus(I,D)},[e]),p=f.useCallback((I,D)=>{D.key==="Enter"||D.key==="Tab"||D.key==="Shift"||Fi(D.key)||e.current.setCellFocus(I.id,I.field)},[e]),x=f.useCallback(({field:I},D)=>{D.target===D.currentTarget&&e.current.setColumnHeaderFocus(I,D)},[e]),m=f.useCallback(({fields:I,depth:D},V)=>{if(V.target!==V.currentTarget)return;const O=Ti(e);O!==null&&O.depth===D&&I.includes(O.field)||e.current.setColumnGroupHeaderFocus(I[0],D,V)},[e]),g=f.useCallback((I,D)=>{var V;(V=D.relatedTarget)!=null&&V.className.includes(H.columnHeader)||(n.debug("Clearing focus"),e.current.setState(O=>j({},O,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))},[n,e]),b=f.useCallback(I=>{o.current=I},[]),y=f.useCallback(I=>{const D=o.current;o.current=null;const V=qt(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:I,cell:D}))return;if(!V){D&&e.current.setCellFocus(D.id,D.field);return}if(D?.id===V.id&&D?.field===V.field)return;const S=e.current.getCellElement(V.id,V.field);S!=null&&S.contains(I.target)||(D?e.current.setCellFocus(D.id,D.field):(e.current.setState($=>j({},$,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})),e.current.forceUpdate(),s(V,I)))},[e,s]),v=f.useCallback(I=>{if(I.cellMode==="view")return;const D=qt(e);(D?.id!==I.id||D?.field!==I.field)&&e.current.setCellFocus(I.id,I.field)},[e]),C=f.useCallback(()=>{const I=qt(e);I&&!e.current.getRow(I.id)&&e.current.setState(D=>j({},D,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))},[e]),k=pn(()=>{const I=qt(e);if(!I)return;const D=Li(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(D.rows.find(S=>S.id===I.id))return;const O=Pt(e);e.current.setState(S=>j({},S,{tabIndex:{cell:{id:D.rows[0].id,field:O[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}}))}),F={setCellFocus:i,setColumnHeaderFocus:a,setColumnHeaderFilterFocus:l},T={moveFocusToRelativeCell:d,setColumnGroupHeaderFocus:u,getColumnGroupHeaderFocus:c};Fe(e,F,"public"),Fe(e,T,"private"),f.useEffect(()=>{const I=zi(e.current.rootElementRef.current);return I.addEventListener("mouseup",y),()=>{I.removeEventListener("mouseup",y)}},[e,y]),me(e,"columnHeaderBlur",g),me(e,"cellDoubleClick",h),me(e,"cellMouseDown",b),me(e,"cellKeyDown",p),me(e,"cellModeChange",v),me(e,"columnHeaderFocus",x),me(e,"columnGroupHeaderFocus",m),me(e,"rowsSet",C),me(e,"paginationModelChange",k)};function X2(e,t){const n=Po(e)||{};return[...n.top||[],...t,...n.bottom||[]]}const sl=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e<n)return e+1}else if(o==="ltr"&&e>t)return e-1;return null},il=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e>t)return e-1}else if(o==="ltr"&&e<n)return e+1;return null},Y2=(e,t)=>{const n=Et(e,"useGridKeyboardNavigation"),o=Wr(e,t).rows,s=Yt(),i=f.useMemo(()=>X2(e,o),[e,o]),a=t.signature!=="DataGrid"&&t.unstable_headerFilters,l=f.useCallback((y,v,C="left")=>{const k=gr(e),F=e.current.unstable_getCellColSpanInfo(v,y);F&&F.spannedByColSpan&&(C==="left"?y=F.leftVisibleCellIndex:C==="right"&&(y=F.rightVisibleCellIndex));const T=k.findIndex(D=>D.id===v);n.debug(`Navigating to cell row ${T}, col ${y}`),e.current.scrollToIndexes({colIndex:y,rowIndex:T});const I=e.current.getVisibleColumns()[y].field;e.current.setCellFocus(v,I)},[e,n]),u=f.useCallback((y,v)=>{n.debug(`Navigating to header col ${y}`),e.current.scrollToIndexes({colIndex:y});const C=e.current.getVisibleColumns()[y].field;e.current.setColumnHeaderFocus(C,v)},[e,n]),c=f.useCallback((y,v)=>{n.debug(`Navigating to header filter col ${y}`),e.current.scrollToIndexes({colIndex:y});const C=e.current.getVisibleColumns()[y].field;e.current.setColumnHeaderFilterFocus(C,v)},[e,n]),d=f.useCallback((y,v,C)=>{n.debug(`Navigating to header col ${y}`),e.current.scrollToIndexes({colIndex:y});const{field:k}=e.current.getVisibleColumns()[y];e.current.setColumnGroupHeaderFocus(k,v,C)},[e,n]),h=f.useCallback(y=>{var v;return(v=i[y])==null?void 0:v.id},[i]),p=f.useCallback((y,v)=>{const C=v.currentTarget.querySelector(`.${H.columnHeaderTitleContainerContent}`);if(!!C&&C.contains(v.target)&&y.field!==Io.field||!e.current.getRootDimensions())return;const T=e.current.getViewportPageSize(),I=y.field?e.current.getColumnIndex(y.field):0,D=i.length>0?0:null,V=i.length-1,O=0,S=Pt(e).length-1,$=Ss(e);let P=!0;switch(v.key){case"ArrowDown":{D!==null&&(a?c(I,v):l(I,h(D)));break}case"ArrowRight":{const w=il({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});w!==null&&u(w,v);break}case"ArrowLeft":{const w=sl({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});w!==null&&u(w,v);break}case"ArrowUp":{$>0&&d(I,$-1,v);break}case"PageDown":{D!==null&&V!==null&&l(I,h(Math.min(D+T,V)));break}case"Home":{u(O,v);break}case"End":{u(S,v);break}case"Enter":{(v.ctrlKey||v.metaKey)&&e.current.toggleColumnMenu(y.field);break}case" ":break;default:P=!1}P&&v.preventDefault()},[e,i.length,a,c,l,h,s.direction,u,d]),x=f.useCallback((y,v)=>{if(!e.current.getRootDimensions())return;const k=bI(e)===y.field,F=vI(e)===y.field;if(k||F||!Fi(v.key))return;const T=e.current.getViewportPageSize(),I=y.field?e.current.getColumnIndex(y.field):0,D=0,V=i.length-1,O=0,S=Pt(e).length-1;let $=!0;switch(v.key){case"ArrowDown":{const P=h(D);P!=null&&l(I,P);break}case"ArrowRight":{const P=il({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});P!==null&&c(P,v);break}case"ArrowLeft":{const P=sl({currentColIndex:I,firstColIndex:O,lastColIndex:S,direction:s.direction});P!==null?c(P,v):e.current.setColumnHeaderFilterFocus(y.field,v);break}case"ArrowUp":{u(I,v);break}case"PageDown":{V!==null&&l(I,h(Math.min(D+T,V)));break}case"Home":{c(O,v);break}case"End":{c(S,v);break}case" ":break;default:$=!1}$&&v.preventDefault()},[e,i.length,c,s.direction,u,l,h]),m=f.useCallback((y,v)=>{if(!e.current.getRootDimensions())return;const k=Ti(e);if(k===null)return;const{field:F,depth:T}=k,{fields:I,depth:D,maxDepth:V}=y,O=e.current.getViewportPageSize(),S=e.current.getColumnIndex(F),$=F?e.current.getColumnIndex(F):0,P=0,w=i.length-1,E=0,R=Pt(e).length-1;let N=!0;switch(v.key){case"ArrowDown":{D===V-1?u(S,v):d(S,T+1,v);break}case"ArrowUp":{D>0&&d(S,T-1,v);break}case"ArrowRight":{const _=I.length-I.indexOf(F)-1;S+_+1<=R&&d(S+_+1,T,v);break}case"ArrowLeft":{const _=I.indexOf(F);S-_-1>=E&&d(S-_-1,T,v);break}case"PageDown":{w!==null&&l($,h(Math.min(P+O,w)));break}case"Home":{d(E,T,v);break}case"End":{d(R,T,v);break}case" ":break;default:N=!1}N&&v.preventDefault()},[e,i.length,u,d,l,h]),g=f.useCallback((y,v)=>{if(Ps(v))return;const C=e.current.getCellParams(y.id,y.field);if(C.cellMode===Ke.Edit||!Fi(v.key)||!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:v,cell:C}))return;const F=e.current.getRootDimensions();if(i.length===0||!F)return;const T=s.direction,I=e.current.getViewportPageSize(),D=y.field?e.current.getColumnIndex(y.field):0,V=i.findIndex(E=>E.id===y.id),O=0,S=i.length-1,$=0,P=Pt(e).length-1;let w=!0;switch(v.key){case"ArrowDown":{V<S&&l(D,h(V+1));break}case"ArrowUp":{V>O?l(D,h(V-1)):a?c(D,v):u(D,v);break}case"ArrowRight":{const E=il({currentColIndex:D,firstColIndex:$,lastColIndex:P,direction:T});E!==null&&l(E,h(V),T==="rtl"?"left":"right");break}case"ArrowLeft":{const E=sl({currentColIndex:D,firstColIndex:$,lastColIndex:P,direction:T});E!==null&&l(E,h(V),T==="rtl"?"right":"left");break}case"Tab":{v.shiftKey&&D>$?l(D-1,h(V),"left"):!v.shiftKey&&D<P&&l(D+1,h(V),"right");break}case" ":{if(y.field===Cu)break;const R=y.colDef;if(R&&R.type==="treeDataGroup")break;!v.shiftKey&&V<S&&l(D,h(Math.min(V+I,S)));break}case"PageDown":{V<S&&l(D,h(Math.min(V+I,S)));break}case"PageUp":{const E=Math.max(V-I,O);E!==V&&E>=O?l(D,h(E)):u(D,v);break}case"Home":{v.ctrlKey||v.metaKey||v.shiftKey?l($,h(O)):l($,h(V));break}case"End":{v.ctrlKey||v.metaKey||v.shiftKey?l(P,h(S)):l(P,h(V));break}default:w=!1}w&&v.preventDefault()},[e,i,s.direction,l,h,a,c,u]),b=f.useCallback((y,{event:v})=>v.key===" "?!1:y,[]);ht(e,"canStartEditing",b),me(e,"columnHeaderKeyDown",p),me(e,"headerFilterKeyDown",x),me(e,"columnGroupHeaderKeyDown",m),me(e,"cellKeyDown",g)},J2=(e,t)=>{var n;const o=Et(e,"useGridRowCount"),s=ie(e,wg),i=ie(e,co);e.current.registerControlState({stateId:"paginationRowCount",propModel:t.rowCount,propOnChange:t.onRowCountChange,stateSelector:co,changeEvent:"rowCountChange"});const l={setRowCount:f.useCallback(d=>{i!==d&&(o.debug("Setting 'rowCount' to",d),e.current.setState(h=>j({},h,{pagination:j({},h.pagination,{rowCount:d})})))},[e,o,i])};Fe(e,l,"public");const u=f.useCallback((d,h)=>{var p;const x=co(e);return!h.exportOnlyDirtyModels||t.rowCount!=null||((p=t.initialState)==null||(p=p.pagination)==null?void 0:p.rowCount)!=null?j({},d,{pagination:j({},d.pagination,{rowCount:x})}):d},[e,t.rowCount,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.rowCount]),c=f.useCallback((d,h)=>{var p;const x=(p=h.stateToRestore.pagination)!=null&&p.rowCount?h.stateToRestore.pagination.rowCount:co(e);return e.current.setState(m=>j({},m,{pagination:j({},m.pagination,{rowCount:x})})),d},[e]);ht(e,"exportState",u),ht(e,"restoreState",c),f.useEffect(()=>{},[t.rowCount,t.paginationMode]),f.useEffect(()=>{t.paginationMode==="client"?e.current.setRowCount(s):t.rowCount!=null&&e.current.setRowCount(t.rowCount)},[e,s,t.paginationMode,t.rowCount])},Z2=(e,t)=>{var n,o,s,i,a;const l=j({},Bg(t.autoPageSize),(n=t.paginationModel)!=null?n:(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.paginationModel);Hg(l.pageSize,t.signature);const u=(s=(i=t.rowCount)!=null?i:(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.rowCount)!=null?s:0;return j({},e,{pagination:{paginationModel:l,rowCount:u}})},eA=(e,t)=>{V2(e,t),J2(e,t)},tA=(e,t)=>{var n,o;return j({},e,{preferencePanel:(n=(o=t.initialState)==null?void 0:o.preferencePanel)!=null?n:{open:!1}})},nA=(e,t)=>{var n;const o=Et(e,"useGridPreferencesPanel"),s=f.useRef(),i=f.useRef(),a=f.useCallback(()=>{o.debug("Hiding Preferences Panel");const p=cs(e.current.state);p.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:p.openedPanelValue}),e.current.setState(x=>j({},x,{preferencePanel:{open:!1}})),e.current.forceUpdate()},[e,o]),l=f.useCallback(()=>{i.current=setTimeout(()=>clearTimeout(s.current),0)},[]),u=f.useCallback(()=>{s.current=setTimeout(a,100)},[a]),c=f.useCallback((p,x,m)=>{o.debug("Opening Preferences Panel"),l(),e.current.setState(g=>j({},g,{preferencePanel:j({},g.preferencePanel,{open:!0,openedPanelValue:p,panelId:x,labelId:m})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:p}),e.current.forceUpdate()},[o,l,e]);Fe(e,{showPreferences:c,hidePreferences:u},"public");const d=f.useCallback((p,x)=>{var m;const g=cs(e.current.state);return!x.exportOnlyDirtyModels||((m=t.initialState)==null?void 0:m.preferencePanel)!=null||g.open?j({},p,{preferencePanel:g}):p},[e,(n=t.initialState)==null?void 0:n.preferencePanel]),h=f.useCallback((p,x)=>{const m=x.stateToRestore.preferencePanel;return m!=null&&e.current.setState(g=>j({},g,{preferencePanel:m})),p},[e]);ht(e,"exportState",d),ht(e,"restoreState",h),f.useEffect(()=>()=>{clearTimeout(s.current),clearTimeout(i.current)},[])},rA=["id","field"],oA=["id","field"],sA=On(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),iA=(e,t)=>{const[n,o]=f.useState({}),s=f.useRef(n),i=f.useRef({}),{processRowUpdate:a,onProcessRowUpdateError:l,cellModesModel:u,onCellModesModelChange:c}=t,d=w=>(...E)=>{t.editMode===Dn.Cell&&w(...E)},h=f.useCallback((w,E)=>{const R=e.current.getCellParams(w,E);if(!e.current.isCellEditable(R))throw new Error(`MUI: The cell with id=${w} and field=${E} is not editable.`)},[e]),p=f.useCallback((w,E,R)=>{if(e.current.getCellMode(w,E)!==R)throw new Error(`MUI: The cell with id=${w} and field=${E} is not in ${R} mode.`)},[e]),x=f.useCallback((w,E)=>{if(!w.isEditable||w.cellMode===Ke.Edit)return;const R=j({},w,{reason:$n.cellDoubleClick});e.current.publishEvent("cellEditStart",R,E)},[e]),m=f.useCallback((w,E)=>{if(w.cellMode===Ke.View||e.current.getCellMode(w.id,w.field)===Ke.View)return;const R=j({},w,{reason:ln.cellFocusOut});e.current.publishEvent("cellEditStop",R,E)},[e]),g=f.useCallback((w,E)=>{if(w.cellMode===Ke.Edit){if(E.which===229)return;let R;if(E.key==="Escape"?R=ln.escapeKeyDown:E.key==="Enter"?R=ln.enterKeyDown:E.key==="Tab"&&(R=E.shiftKey?ln.shiftTabKeyDown:ln.tabKeyDown,E.preventDefault()),R){const N=j({},w,{reason:R});e.current.publishEvent("cellEditStop",N,E)}}else if(w.isEditable){let R;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:E,cellParams:w,editMode:"cell"}))return;if(Dg(E)?R=$n.printableKeyDown:(E.ctrlKey||E.metaKey)&&E.key==="v"?R=$n.pasteKeyDown:E.key==="Enter"?R=$n.enterKeyDown:(E.key==="Delete"||E.key==="Backspace")&&(R=$n.deleteKeyDown),R){const _=j({},w,{reason:R,key:E.key});e.current.publishEvent("cellEditStart",_,E)}}},[e]),b=f.useCallback(w=>{const{id:E,field:R,reason:N}=w,_={id:E,field:R};(N===$n.printableKeyDown||N===$n.deleteKeyDown||N===$n.pasteKeyDown)&&(_.deleteValue=!0),e.current.startCellEditMode(_)},[e]),y=f.useCallback(w=>{const{id:E,field:R,reason:N}=w;e.current.runPendingEditCellValueMutation(E,R);let _;N===ln.enterKeyDown?_="below":N===ln.tabKeyDown?_="right":N===ln.shiftTabKeyDown&&(_="left");const L=N==="escapeKeyDown";e.current.stopCellEditMode({id:E,field:R,ignoreModifications:L,cellToFocusAfter:_})},[e]);me(e,"cellDoubleClick",d(x)),me(e,"cellFocusOut",d(m)),me(e,"cellKeyDown",d(g)),me(e,"cellEditStart",d(b)),me(e,"cellEditStop",d(y)),tt(e,"cellEditStart",t.onCellEditStart),tt(e,"cellEditStop",t.onCellEditStop);const v=f.useCallback((w,E)=>{const R=Ot(e.current.state);return R[w]&&R[w][E]?Ke.Edit:Ke.View},[e]),C=pn(w=>{const E=w!==t.cellModesModel;c&&E&&c(w,{}),!(t.cellModesModel&&E)&&(o(w),s.current=w,e.current.publishEvent("cellModesModelChange",w))}),k=f.useCallback((w,E,R)=>{const N=j({},s.current);if(R!==null)N[w]=j({},N[w],{[E]:j({},R)});else{const _=N[w],L=le(_,[E].map(ts));N[w]=L,Object.keys(N[w]).length===0&&delete N[w]}C(N)},[C]),F=f.useCallback((w,E,R)=>{e.current.setState(N=>{const _=j({},N.editRows);return R!==null?_[w]=j({},_[w],{[E]:j({},R)}):(delete _[w][E],Object.keys(_[w]).length===0&&delete _[w]),j({},N,{editRows:_})}),e.current.forceUpdate()},[e]),T=f.useCallback(w=>{const{id:E,field:R}=w,N=le(w,rA);h(E,R),p(E,R,Ke.View),k(E,R,j({mode:Ke.Edit},N))},[h,p,k]),I=pn(w=>{const{id:E,field:R,deleteValue:N,initialValue:_}=w;let L=e.current.getCellValue(E,R);(N||_)&&(L=N?"":_),F(E,R,{value:L,error:!1,isProcessingProps:!1}),e.current.setCellFocus(E,R)}),D=f.useCallback(w=>{const{id:E,field:R}=w,N=le(w,oA);p(E,R,Ke.Edit),k(E,R,j({mode:Ke.View},N))},[p,k]),V=pn(async w=>{const{id:E,field:R,ignoreModifications:N,cellToFocusAfter:_="none"}=w;p(E,R,Ke.Edit),e.current.runPendingEditCellValueMutation(E,R);const L=()=>{F(E,R,null),k(E,R,null),_!=="none"&&e.current.moveFocusToRelativeCell(E,R,_)};if(N){L();return}const B=Ot(e.current.state),{error:z,isProcessingProps:U}=B[E][R];if(z||U){i.current[E][R].mode=Ke.Edit,k(E,R,{mode:Ke.Edit});return}const J=e.current.getRowWithUpdatedValuesFromCellEditing(E,R);if(a){const ee=te=>{i.current[E][R].mode=Ke.Edit,k(E,R,{mode:Ke.Edit}),l?l(te):sA()};try{const te=e.current.getRow(E);Promise.resolve(a(J,te)).then(ve=>{e.current.updateRows([ve]),L()}).catch(ee)}catch(te){ee(te)}}else e.current.updateRows([J]),L()}),O=f.useCallback(async w=>{var E;const{id:R,field:N,value:_,debounceMs:L,unstable_skipValueParser:B}=w;h(R,N),p(R,N,Ke.Edit);const z=e.current.getColumn(N),U=e.current.getRow(R);let J=_;z.valueParser&&!B&&(J=z.valueParser(_,e.current.getCellParams(R,N)));let ee=Ot(e.current.state),te=j({},ee[R][N],{value:J,changeReason:L?"debouncedSetEditCellValue":"setEditCellValue"});if(z.preProcessEditCellProps){const ve=_!==ee[R][N].value;te=j({},te,{isProcessingProps:!0}),F(R,N,te),te=await Promise.resolve(z.preProcessEditCellProps({id:R,row:U,props:te,hasChanged:ve}))}return e.current.getCellMode(R,N)===Ke.View?!1:(ee=Ot(e.current.state),te=j({},te,{isProcessingProps:!1}),te.value=z.preProcessEditCellProps?ee[R][N].value:J,F(R,N,te),ee=Ot(e.current.state),!((E=ee[R])!=null&&(E=E[N])!=null&&E.error))},[e,h,p,F]),S=f.useCallback((w,E)=>{const R=e.current.getColumn(E),N=Ot(e.current.state),_=e.current.getRow(w);if(!N[w]||!N[w][E])return e.current.getRow(w);const{value:L}=N[w][E];return R.valueSetter?R.valueSetter({value:L,row:_}):j({},_,{[E]:L})},[e]),$={getCellMode:v,startCellEditMode:T,stopCellEditMode:D},P={setCellEditingEditCellValue:O,getRowWithUpdatedValuesFromCellEditing:S};Fe(e,$,"public"),Fe(e,P,"private"),f.useEffect(()=>{u&&C(u)},[u,C]),kt(()=>{const w=Ei(e),E=i.current;i.current=Ng(n),Object.entries(n).forEach(([R,N])=>{Object.entries(N).forEach(([_,L])=>{var B,z;const U=((B=E[R])==null||(B=B[_])==null?void 0:B.mode)||Ke.View,J=(z=w[R])!=null?z:R;L.mode===Ke.Edit&&U===Ke.View?I(j({id:J,field:_},L)):L.mode===Ke.View&&U===Ke.Edit&&V(j({id:J,field:_},L))})})},[e,n,I,V])},aA=["id"],lA=["id"],cA=On(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),uA=(e,t)=>{const[n,o]=f.useState({}),s=f.useRef(n),i=f.useRef({}),a=f.useRef(null),l=f.useRef(null),{processRowUpdate:u,onProcessRowUpdateError:c,rowModesModel:d,onRowModesModelChange:h}=t,p=_=>(...L)=>{t.editMode===Dn.Row&&_(...L)},x=f.useCallback((_,L)=>{const B=e.current.getCellParams(_,L);if(!e.current.isCellEditable(B))throw new Error(`MUI: The cell with id=${_} and field=${L} is not editable.`)},[e]),m=f.useCallback((_,L)=>{if(e.current.getRowMode(_)!==L)throw new Error(`MUI: The row with id=${_} is not in ${L} mode.`)},[e]),g=f.useCallback((_,L)=>{if(!_.isEditable||e.current.getRowMode(_.id)===Je.Edit)return;const B=e.current.getRowParams(_.id),z=j({},B,{field:_.field,reason:Yn.cellDoubleClick});e.current.publishEvent("rowEditStart",z,L)},[e]),b=f.useCallback(_=>{l.current=_},[]),y=f.useCallback((_,L)=>{_.isEditable&&e.current.getRowMode(_.id)!==Je.View&&(l.current=null,a.current=setTimeout(()=>{var B;if(a.current=null,((B=l.current)==null?void 0:B.id)!==_.id){if(!e.current.getRow(_.id)||e.current.getRowMode(_.id)===Je.View)return;const z=e.current.getRowParams(_.id),U=j({},z,{field:_.field,reason:Nn.rowFocusOut});e.current.publishEvent("rowEditStop",U,L)}}))},[e]);f.useEffect(()=>()=>{clearTimeout(a.current)},[]);const v=f.useCallback((_,L)=>{if(_.cellMode===Je.Edit){if(L.which===229)return;let B;if(L.key==="Escape")B=Nn.escapeKeyDown;else if(L.key==="Enter")B=Nn.enterKeyDown;else if(L.key==="Tab"){const z=ia(e).filter(U=>e.current.getColumn(U).type===fa?!0:e.current.isCellEditable(e.current.getCellParams(_.id,U)));if(L.shiftKey?_.field===z[0]&&(B=Nn.shiftTabKeyDown):_.field===z[z.length-1]&&(B=Nn.tabKeyDown),L.preventDefault(),!B){const U=z.findIndex(ee=>ee===_.field),J=z[L.shiftKey?U-1:U+1];e.current.setCellFocus(_.id,J)}}if(B){const z=j({},e.current.getRowParams(_.id),{reason:B,field:_.field});e.current.publishEvent("rowEditStop",z,L)}}else if(_.isEditable){let B;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:L,cellParams:_,editMode:"row"}))return;if(Dg(L)||(L.ctrlKey||L.metaKey)&&L.key==="v"?B=Yn.printableKeyDown:L.key==="Enter"?B=Yn.enterKeyDown:(L.key==="Delete"||L.key==="Backspace")&&(B=Yn.deleteKeyDown),B){const U=e.current.getRowParams(_.id),J=j({},U,{field:_.field,reason:B});e.current.publishEvent("rowEditStart",J,L)}}},[e]),C=f.useCallback(_=>{const{id:L,field:B,reason:z}=_,U={id:L,fieldToFocus:B};(z===Yn.printableKeyDown||z===Yn.deleteKeyDown)&&(U.deleteValue=!!B),e.current.startRowEditMode(U)},[e]),k=f.useCallback(_=>{const{id:L,reason:B,field:z}=_;e.current.runPendingEditCellValueMutation(L);let U;B===Nn.enterKeyDown?U="below":B===Nn.tabKeyDown?U="right":B===Nn.shiftTabKeyDown&&(U="left");const J=B==="escapeKeyDown";e.current.stopRowEditMode({id:L,ignoreModifications:J,field:z,cellToFocusAfter:U})},[e]);me(e,"cellDoubleClick",p(g)),me(e,"cellFocusIn",p(b)),me(e,"cellFocusOut",p(y)),me(e,"cellKeyDown",p(v)),me(e,"rowEditStart",p(C)),me(e,"rowEditStop",p(k)),tt(e,"rowEditStart",t.onRowEditStart),tt(e,"rowEditStop",t.onRowEditStop);const F=f.useCallback(_=>{if(t.editMode===Dn.Cell)return Je.View;const L=Ot(e.current.state);return L[_]&&Object.keys(L[_]).length>0?Je.Edit:Je.View},[e,t.editMode]),T=pn(_=>{const L=_!==t.rowModesModel;h&&L&&h(_,{}),!(t.rowModesModel&&L)&&(o(_),s.current=_,e.current.publishEvent("rowModesModelChange",_))}),I=f.useCallback((_,L)=>{const B=j({},s.current);L!==null?B[_]=j({},L):delete B[_],T(B)},[T]),D=f.useCallback((_,L)=>{e.current.setState(B=>{const z=j({},B.editRows);return L!==null?z[_]=L:delete z[_],j({},B,{editRows:z})}),e.current.forceUpdate()},[e]),V=f.useCallback((_,L,B)=>{e.current.setState(z=>{const U=j({},z.editRows);return B!==null?U[_]=j({},U[_],{[L]:j({},B)}):(delete U[_][L],Object.keys(U[_]).length===0&&delete U[_]),j({},z,{editRows:U})}),e.current.forceUpdate()},[e]),O=f.useCallback(_=>{const{id:L}=_,B=le(_,aA);m(L,Je.View),I(L,j({mode:Je.Edit},B))},[m,I]),S=pn(_=>{const{id:L,fieldToFocus:B,deleteValue:z,initialValue:U}=_,ee=qn(e).reduce((te,ve)=>{if(!e.current.getCellParams(L,ve).isEditable)return te;let K=e.current.getCellValue(L,ve);return B===ve&&(z||U)&&(K=z?"":U),te[ve]={value:K,error:!1,isProcessingProps:!1},te},{});D(L,ee),B&&e.current.setCellFocus(L,B)}),$=f.useCallback(_=>{const{id:L}=_,B=le(_,lA);m(L,Je.Edit),I(L,j({mode:Je.View},B))},[m,I]),P=pn(_=>{const{id:L,ignoreModifications:B,field:z,cellToFocusAfter:U="none"}=_;e.current.runPendingEditCellValueMutation(L);const J=()=>{U!=="none"&&z&&e.current.moveFocusToRelativeCell(L,z,U),D(L,null),I(L,null)};if(B){J();return}const ee=Ot(e.current.state),te=e.current.getRow(L);if(Object.values(ee[L]).some(ae=>ae.isProcessingProps)){i.current[L].mode=Je.Edit;return}if(Object.values(ee[L]).some(ae=>ae.error)){i.current[L].mode=Je.Edit,I(L,{mode:Je.Edit});return}const K=e.current.getRowWithUpdatedValuesFromRowEditing(L);if(u){const ae=X=>{i.current[L].mode=Je.Edit,I(L,{mode:Je.Edit}),c?c(X):cA()};try{Promise.resolve(u(K,te)).then(X=>{e.current.updateRows([X]),J()}).catch(ae)}catch(X){ae(X)}}else e.current.updateRows([K]),J()}),w=f.useCallback(_=>{const{id:L,field:B,value:z,debounceMs:U,unstable_skipValueParser:J}=_;x(L,B);const ee=e.current.getColumn(B),te=e.current.getRow(L);let ve=z;ee.valueParser&&!J&&(ve=ee.valueParser(z,e.current.getCellParams(L,B)));let W=Ot(e.current.state),K=j({},W[L][B],{value:ve,changeReason:U?"debouncedSetEditCellValue":"setEditCellValue"});return ee.preProcessEditCellProps||V(L,B,K),new Promise(ae=>{const X=[];if(ee.preProcessEditCellProps){const ne=K.value!==W[L][B].value;K=j({},K,{isProcessingProps:!0}),V(L,B,K);const je=W[L],Z=le(je,[B].map(ts)),ye=Promise.resolve(ee.preProcessEditCellProps({id:L,row:te,props:K,hasChanged:ne,otherFieldsProps:Z})).then(ge=>{if(e.current.getRowMode(L)===Je.View){ae(!1);return}W=Ot(e.current.state),ge=j({},ge,{isProcessingProps:!1}),ge.value=ee.preProcessEditCellProps?W[L][B].value:ve,V(L,B,ge)});X.push(ye)}Object.entries(W[L]).forEach(([ne,je])=>{if(ne===B)return;const Z=e.current.getColumn(ne);if(!Z.preProcessEditCellProps)return;je=j({},je,{isProcessingProps:!0}),V(L,ne,je),W=Ot(e.current.state);const ye=W[L],ge=le(ye,[ne].map(ts)),Se=Promise.resolve(Z.preProcessEditCellProps({id:L,row:te,props:je,hasChanged:!1,otherFieldsProps:ge})).then(be=>{if(e.current.getRowMode(L)===Je.View){ae(!1);return}be=j({},be,{isProcessingProps:!1}),V(L,ne,be)});X.push(Se)}),Promise.all(X).then(()=>{e.current.getRowMode(L)===Je.Edit?(W=Ot(e.current.state),ae(!W[L][B].error)):ae(!1)})})},[e,x,V]),E=f.useCallback(_=>{const L=Ot(e.current.state),B=e.current.getRow(_);if(!L[_])return e.current.getRow(_);let z=j({},B);return Object.entries(L[_]).forEach(([U,J])=>{const ee=e.current.getColumn(U);ee.valueSetter?z=ee.valueSetter({value:J.value,row:z}):z[U]=J.value}),z},[e]),R={getRowMode:F,startRowEditMode:O,stopRowEditMode:$},N={setRowEditingEditCellValue:w,getRowWithUpdatedValuesFromRowEditing:E};Fe(e,R,"public"),Fe(e,N,"private"),f.useEffect(()=>{d&&T(d)},[d,T]),kt(()=>{const _=Ei(e),L=i.current;i.current=Ng(n),Object.entries(n).forEach(([B,z])=>{var U,J;const ee=((U=L[B])==null?void 0:U.mode)||Je.View,te=(J=_[B])!=null?J:B;z.mode===Je.Edit&&ee===Je.View?S(j({id:te},z)):z.mode===Je.View&&ee===Je.Edit&&P(j({id:te},z))})},[e,n,S,P])},dA=e=>j({},e,{editRows:{}}),hA=(e,t)=>{iA(e,t),uA(e,t);const n=f.useRef({}),{isCellEditable:o}=t,s=f.useCallback(p=>as(p.rowNode)||!p.colDef.editable||!p.colDef.renderEditCell?!1:o?o(p):!0,[o]),i=(p,x,m,g)=>{if(!m){g();return}if(n.current[p]||(n.current[p]={}),n.current[p][x]){const[v]=n.current[p][x];clearTimeout(v)}const b=()=>{const[v]=n.current[p][x];clearTimeout(v),g(),delete n.current[p][x]},y=setTimeout(()=>{g(),delete n.current[p][x]},m);n.current[p][x]=[y,b]};f.useEffect(()=>{const p=n.current;return()=>{Object.entries(p).forEach(([x,m])=>{Object.keys(m).forEach(g=>{const[b]=p[x][g];clearTimeout(b),delete p[x][g]})})}},[]);const a=f.useCallback((p,x)=>{if(n.current[p]){if(!x)Object.keys(n.current[p]).forEach(m=>{const[,g]=n.current[p][m];g()});else if(n.current[p][x]){const[,m]=n.current[p][x];m()}}},[]),l=f.useCallback(p=>{const{id:x,field:m,debounceMs:g}=p;return new Promise(b=>{i(x,m,g,async()=>{const y=t.editMode===Dn.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(x,m)===Ke.Edit){const v=await y(p);b(v)}})})},[e,t.editMode]),u=f.useCallback((p,x)=>t.editMode===Dn.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(p,x):e.current.getRowWithUpdatedValuesFromRowEditing(p),[e,t.editMode]),c=f.useCallback((p,x)=>{var m,g;return(m=(g=Ot(e.current.state)[p])==null?void 0:g[x])!=null?m:null},[e]),d={isCellEditable:s,setEditCellValue:l,getRowWithUpdatedValues:u,unstable_getEditCellMeta:c},h={runPendingEditCellValueMutation:a};Fe(e,d,"public"),Fe(e,h,"private")},fA=(e,t,n)=>(n.current.caches.rows=ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),j({},e,{rows:Pg({apiRef:n,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:null,previousTreeDepths:null})})),pA=(e,t)=>{const n=Et(e,"useGridRows"),o=Wr(e,t),s=f.useRef(Date.now()),i=vu(),a=f.useCallback(P=>{const w=Hn(e)[P];if(w)return w;const E=e.current.getRowNode(P);return E&&as(E)?{[po]:P}:null},[e]),l=t.getRowId,u=f.useCallback(P=>po in P?P[po]:l?l(P):P.id,[l]),c=f.useMemo(()=>o.rows.reduce((P,{id:w},E)=>(P[w]=E,P),{}),[o.rows]),d=f.useCallback(({cache:P,throttle:w})=>{const E=()=>{s.current=Date.now(),e.current.setState(N=>j({},N,{rows:Pg({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:dn(e),previousTreeDepths:kh(e)})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(i.clear(),e.current.caches.rows=P,!w){E();return}const R=t.throttleRowsMs-(Date.now()-s.current);if(R>0){i.start(R,E);return}E()},[t.throttleRowsMs,t.rowCount,t.loading,e,i]),h=f.useCallback(P=>{n.debug(`Updating all rows, new length ${P.length}`);const w=ai({rows:P,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),E=e.current.caches.rows;w.rowsBeforePartialUpdates=E.rowsBeforePartialUpdates,d({cache:w,throttle:!0})},[n,t.getRowId,t.loading,t.rowCount,d,e]),p=f.useCallback(P=>{if(t.signature===En.DataGrid&&P.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const w=[];P.forEach(R=>{const N=Mi(R,t.getRowId,"A row was provided without id when calling updateRows():"),_=e.current.getRowNode(N);if(_?.type==="pinnedRow"){const L=e.current.caches.pinnedRows,B=L.idLookup[N];B&&(L.idLookup[N]=j({},B,R))}else w.push(R)});const E=aP({updates:w,getRowId:t.getRowId,previousCache:e.current.caches.rows});d({cache:E,throttle:!0})},[t.signature,t.getRowId,d,e]),x=f.useCallback(()=>{const P=Go(e),w=Hn(e);return new Map(P.map(E=>{var R;return[E,(R=w[E])!=null?R:{}]}))},[e]),m=f.useCallback(()=>la(e),[e]),g=f.useCallback(()=>Go(e),[e]),b=f.useCallback(P=>c[P],[c]),y=f.useCallback((P,w)=>{const E=e.current.getRowNode(P);if(!E)throw new Error(`MUI: No row with id #${P} found`);if(E.type!=="group")throw new Error("MUI: Only group nodes can be expanded or collapsed");const R=j({},E,{childrenExpanded:w});e.current.setState(N=>j({},N,{rows:j({},N.rows,{tree:j({},N.rows.tree,{[P]:R})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",R)},[e]),v=f.useCallback(P=>{var w;return(w=dn(e)[P])!=null?w:null},[e]),C=f.useCallback(({skipAutoGeneratedRows:P=!0,groupId:w,applySorting:E,applyFiltering:R})=>{const N=dn(e);let _;if(E){const L=N[w];if(!L)return[];const B=lu(e);_=[];const z=B.findIndex(U=>U===w)+1;for(let U=z;U<B.length&&N[B[U]].depth>L.depth;U+=1){const J=B[U];(!P||!as(N[J]))&&_.push(J)}}else _=hu(N,w,P);if(R){const L=bg(e);_=_.filter(B=>L[B]!==!1)}return _},[e]),k=f.useCallback((P,w)=>{const E=e.current.getRowNode(P);if(!E)throw new Error(`MUI: No row with id #${P} found`);if(E.parent!==Lt)throw new Error("MUI: The row reordering do not support reordering of grouped rows yet");if(E.type!=="leaf")throw new Error("MUI: The row reordering do not support reordering of footer or grouping rows");e.current.setState(R=>{const N=dn(R,e.current.instanceId)[Lt],_=N.children,L=_.findIndex(z=>z===P);if(L===-1||L===w)return R;n.debug(`Moving row ${P} to index ${w}`);const B=[..._];return B.splice(w,0,B.splice(L,1)[0]),j({},R,{rows:j({},R.rows,{tree:j({},R.rows.tree,{[Lt]:j({},N,{children:B})})})})}),e.current.publishEvent("rowsSet")},[e,n]),F=f.useCallback((P,w)=>{if(t.signature===En.DataGrid&&w.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(w.length===0)return;if(ca(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const R=j({},dn(e)),N=j({},Hn(e)),_=j({},Ei(e)),L=R[Lt],B=[...L.children],z=new Set;for(let J=0;J<w.length;J+=1){const ee=w[J],te=Mi(ee,t.getRowId,"A row was provided without id when calling replaceRows()."),[ve]=B.splice(P+J,1,te);z.has(ve)||(delete N[ve],delete _[ve],delete R[ve]);const W={id:te,depth:0,parent:Lt,type:"leaf",groupingKey:null};N[te]=ee,_[te]=te,R[te]=W,z.add(te)}R[Lt]=j({},L,{children:B});const U=B.filter(J=>R[J].type==="leaf");e.current.caches.rows.dataRowIdToModelLookup=N,e.current.caches.rows.dataRowIdToIdLookup=_,e.current.setState(J=>j({},J,{rows:j({},J.rows,{dataRowIdToModelLookup:N,dataRowIdToIdLookup:_,dataRowIds:U,tree:R})})),e.current.publishEvent("rowsSet")},[e,t.signature,t.getRowId]),T={getRow:a,getRowId:u,getRowModels:x,getRowsCount:m,getAllRowIds:g,setRows:h,updateRows:p,getRowNode:v,getRowIndexRelativeToVisibleRows:b,unstable_replaceRows:F},I={setRowIndex:k,setRowChildrenExpansion:y,getRowGroupChildren:C},D=f.useCallback(()=>{n.info("Row grouping pre-processing have changed, regenerating the row tree");let P;e.current.caches.rows.rowsBeforePartialUpdates===t.rows?P=j({},e.current.caches.rows,{updates:{type:"full",rows:Go(e)}}):P=ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),d({cache:P,throttle:!1})},[n,e,t.rows,t.getRowId,t.loading,t.rowCount,d]),V=f.useCallback(P=>{P==="rowTreeCreation"&&D()},[D]),O=f.useCallback(()=>{e.current.getActiveStrategy("rowTree")!==H1(e)&&D()},[e,D]);me(e,"activeStrategyProcessorChange",V),me(e,"strategyAvailabilityChange",O);const S=f.useCallback(()=>{e.current.setState(P=>{const w=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:dn(P,e.current.instanceId),treeDepths:kh(P,e.current.instanceId),dataRowIds:Go(P,e.current.instanceId),dataRowIdToModelLookup:Hn(P,e.current.instanceId),dataRowIdToIdLookup:Ei(P,e.current.instanceId)});return j({},P,{rows:j({},P.rows,w,{totalTopLevelRowCount:Sg({tree:w.tree,rowCountProp:t.rowCount})})})}),e.current.publishEvent("rowsSet"),e.current.forceUpdate()},[e,t.rowCount]);ju(e,"hydrateRows",S),Fe(e,T,"public"),Fe(e,I,t.signature===En.DataGrid?"private":"public");const $=f.useRef(!0);f.useEffect(()=>{if($.current){$.current=!1;return}const P=e.current.caches.rows.rowsBeforePartialUpdates===t.rows,w=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,E=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;if(P){w||(e.current.setState(R=>j({},R,{rows:j({},R.rows,{loading:t.loading})})),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),E||(e.current.setState(R=>j({},R,{rows:j({},R.rows,{totalRowCount:Math.max(t.rowCount||0,R.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,R.rows.totalTopLevelRowCount)})})),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate());return}n.debug(`Updating all rows, new length ${t.rows.length}`),d({cache:ai({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1})},[t.rows,t.rowCount,t.getRowId,t.loading,n,d,e])},mA=e=>{const t={[Lt]:j({},sP(),{children:e})};for(let n=0;n<e.length;n+=1){const o=e[n];t[o]={id:o,depth:0,parent:Lt,type:"leaf",groupingKey:null}}return{groupingName:Nr,tree:t,treeDepths:{0:e.length},dataRowIds:e}},gA=({previousTree:e,actions:t})=>{const n=j({},e),o={};for(let a=0;a<t.remove.length;a+=1){const l=t.remove[a];o[l]=!0,delete n[l]}for(let a=0;a<t.insert.length;a+=1){const l=t.insert[a];n[l]={id:l,depth:0,parent:Lt,type:"leaf",groupingKey:null}}const s=n[Lt];let i=[...s.children,...t.insert];return Object.values(o).length&&(i=i.filter(a=>!o[a])),n[Lt]=j({},s,{children:i}),{groupingName:Nr,tree:n,treeDepths:{0:i.length},dataRowIds:i}},xA=e=>e.updates.type==="full"?mA(e.updates.rows):gA({previousTree:e.previousTree,actions:e.updates.actions}),yA=e=>{$i(e,Nr,"rowTreeCreation",xA)},mx=(e,t)=>e==null||Array.isArray(e)?e:t&&t[0]===e?t:[e],bA=(e,t)=>{var n;return j({},e,{rowSelection:t.rowSelection?(n=mx(t.rowSelectionModel))!=null?n:[]:[]})},vA=(e,t)=>{const n=Et(e,"useGridSelection"),o=w=>(...E)=>{t.rowSelection&&w(...E)},s=f.useMemo(()=>mx(t.rowSelectionModel,rn(e.current.state)),[e,t.rowSelectionModel]),i=f.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:s,propOnChange:t.onRowSelectionModelChange,stateSelector:rn,changeEvent:"rowSelectionChange"});const{checkboxSelection:a,disableMultipleRowSelection:l,disableRowSelectionOnClick:u,isRowSelectable:c}=t,d=!l||a,h=Wr(e,t),p=f.useCallback(w=>{var E;let R=w;const N=(E=i.current)!=null?E:w,_=e.current.isRowSelected(w);if(_){const L=Zo(e),B=L.findIndex(U=>U===N),z=L.findIndex(U=>U===R);if(B===z)return;B>z?R=L[z+1]:R=L[z-1]}i.current=w,e.current.selectRowRange({startId:N,endId:R},!_)},[e]),x=f.useCallback(w=>{if(t.signature===En.DataGrid&&!t.checkboxSelection&&Array.isArray(w)&&w.length>1)throw new Error(["MUI: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join(`
`));rn(e.current.state)!==w&&(n.debug("Setting selection model"),e.current.setState(R=>j({},R,{rowSelection:t.rowSelection?w:[]})),e.current.forceUpdate())},[e,n,t.rowSelection,t.signature,t.checkboxSelection]),m=f.useCallback(w=>rn(e.current.state).includes(w),[e]),g=f.useCallback(w=>{if(c&&!c(e.current.getRowParams(w)))return!1;const E=e.current.getRowNode(w);return!(E?.type==="footer"||E?.type==="pinnedRow")},[e,c]),b=f.useCallback(()=>dI(e),[e]),y=f.useCallback((w,E=!0,R=!1)=>{if(e.current.isRowSelectable(w))if(i.current=w,R)n.debug(`Setting selection for row ${w}`),e.current.setRowSelectionModel(E?[w]:[]);else{n.debug(`Toggling selection for row ${w}`);const _=rn(e.current.state).filter(B=>B!==w);E&&_.push(w),(_.length<2||d)&&e.current.setRowSelectionModel(_)}},[e,n,d]),v=f.useCallback((w,E=!0,R=!1)=>{n.debug("Setting selection for several rows");const N=w.filter(B=>e.current.isRowSelectable(B));let _;if(R)_=E?N:[];else{const B=j({},Oi(e));N.forEach(z=>{E?B[z]=z:delete B[z]}),_=Object.values(B)}(_.length<2||d)&&e.current.setRowSelectionModel(_)},[e,n,d]),C=f.useCallback(({startId:w,endId:E},R=!0,N=!1)=>{if(!e.current.getRow(w)||!e.current.getRow(E))return;n.debug(`Expanding selection from row ${w} to row ${E}`);const _=Zo(e),L=_.indexOf(w),B=_.indexOf(E),[z,U]=L>B?[B,L]:[L,B],J=_.slice(z,U+1);e.current.selectRows(J,R,N)},[e,n]),k={selectRow:y,setRowSelectionModel:x,getSelectedRows:b,isRowSelected:m,isRowSelectable:g},F={selectRows:v,selectRowRange:C};Fe(e,k,"public"),Fe(e,F,t.signature===En.DataGrid?"private":"public");const T=f.useCallback(()=>{if(t.keepNonExistentRowsSelected)return;const w=rn(e.current.state),E=Hn(e),R=j({},Oi(e));let N=!1;w.forEach(_=>{E[_]||(delete R[_],N=!0)}),N&&e.current.setRowSelectionModel(Object.values(R))},[e,t.keepNonExistentRowsSelected]),I=f.useCallback((w,E)=>{const R=E.metaKey||E.ctrlKey,N=!a&&!R&&!QP(E),_=!d||N,L=e.current.isRowSelected(w);_?e.current.selectRow(w,N?!0:!L,!0):e.current.selectRow(w,!L,!1)},[e,d,a]),D=f.useCallback((w,E)=>{var R;if(u)return;const N=(R=E.target.closest(`.${H.cell}`))==null?void 0:R.getAttribute("data-field");if(N===Io.field||N===Cu)return;if(N){const L=e.current.getColumn(N);if(L?.type===fa)return}e.current.getRowNode(w.id).type!=="pinnedRow"&&(E.shiftKey&&(d||a)?p(w.id):I(w.id,E))},[u,d,a,e,p,I]),V=f.useCallback((w,E)=>{if(d&&E.shiftKey){var R;(R=window.getSelection())==null||R.removeAllRanges()}},[d]),O=f.useCallback((w,E)=>{E.nativeEvent.shiftKey?p(w.id):e.current.selectRow(w.id,w.value)},[e,p]),S=f.useCallback(w=>{const R=t.checkboxSelectionVisibleOnly&&t.pagination?Ug(e):Zo(e),N=bt(e);e.current.selectRows(R,w.value,N?.items.length>0)},[e,t.checkboxSelectionVisibleOnly,t.pagination]),$=f.useCallback((w,E)=>{if(e.current.getCellMode(w.id,w.field)!==Ke.Edit&&!Ps(E)){if(Fi(E.key)&&E.shiftKey){const R=qt(e);if(R&&R.id!==w.id){E.preventDefault();const N=e.current.isRowSelected(R.id);if(!d){e.current.selectRow(R.id,!N,!0);return}const _=e.current.getRowIndexRelativeToVisibleRows(R.id),L=e.current.getRowIndexRelativeToVisibleRows(w.id);let B,z;_>L?N?(B=L,z=_-1):(B=L,z=_):N?(B=_+1,z=L):(B=_,z=L);const U=h.rows.slice(B,z+1).map(J=>J.id);e.current.selectRows(U,!N);return}}if(E.key===" "&&E.shiftKey){E.preventDefault(),I(w.id,E);return}E.key==="a"&&(E.ctrlKey||E.metaKey)&&(E.preventDefault(),v(e.current.getAllRowIds(),!0))}},[e,I,v,h.rows,d]);me(e,"sortedRowsSet",o(T)),me(e,"rowClick",o(D)),me(e,"rowSelectionCheckboxChange",o(O)),me(e,"headerSelectionCheckboxChange",S),me(e,"cellMouseDown",o(V)),me(e,"cellKeyDown",o($)),f.useEffect(()=>{s!==void 0&&e.current.setRowSelectionModel(s)},[e,s,t.rowSelection]),f.useEffect(()=>{t.rowSelection||e.current.setRowSelectionModel([])},[e,t.rowSelection]);const P=s!=null;f.useEffect(()=>{if(P||!t.rowSelection)return;const w=rn(e.current.state);if(g){const E=w.filter(R=>g(R));E.length<w.length&&e.current.setRowSelectionModel(E)}},[e,g,P,t.rowSelection]),f.useEffect(()=>{if(!t.rowSelection||P)return;const w=rn(e.current.state);!d&&w.length>1&&e.current.setRowSelectionModel([])},[e,d,a,P,t.rowSelection])},CA={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorEquals:"Equals",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>e!==1?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},wA=e=>{const{classes:t}=e;return f.useMemo(()=>Ee({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Be,t),[t])},jA=(e,t)=>{const n={classes:t.classes},o=wA(n),s=f.useCallback(i=>{const a=j({},Io,{cellClassName:o.cellCheckbox,headerClassName:o.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),l=t.checkboxSelection,u=i.lookup[Jn]!=null;return l&&!u?(i.lookup[Jn]=a,i.orderedFields=[Jn,...i.orderedFields]):!l&&u?(delete i.lookup[Jn],i.orderedFields=i.orderedFields.filter(c=>c!==Jn)):l&&u&&(i.lookup[Jn]=j({},a,i.lookup[Jn])),i},[e,o,t.checkboxSelection]);ht(e,"hydrateColumns",s)},SA=(e,t)=>{var n,o,s;const i=(n=(o=t.sortModel)!=null?o:(s=t.initialState)==null||(s=s.sorting)==null?void 0:s.sortModel)!=null?n:[];return j({},e,{sorting:{sortModel:Gg(i,t.disableMultipleColumnsSorting),sortedRows:[]}})},PA=(e,t)=>{var n;const o=Et(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:tn,changeEvent:"sortModelChange"});const s=f.useCallback((T,I)=>{const D=tn(e),V=D.findIndex(S=>S.field===T);let O=[...D];return V>-1?I?O.splice(V,1,I):O.splice(V,1):O=[...D,I],O},[e]),i=f.useCallback((T,I)=>{var D;const O=tn(e).find($=>$.field===T.field);if(O){var S;const $=I===void 0?Mh((S=T.sortingOrder)!=null?S:t.sortingOrder,O.sort):I;return $==null?void 0:j({},O,{sort:$})}return{field:T.field,sort:I===void 0?Mh((D=T.sortingOrder)!=null?D:t.sortingOrder):I}},[e,t.sortingOrder]),a=f.useCallback((T,I)=>I==null||I.sortable===!1?T:(I.sortingOrder||t.sortingOrder).some(V=>!!V)?[...T,"columnMenuSortItem"]:T,[t.sortingOrder]),l=f.useCallback(()=>{e.current.setState(T=>{if(t.sortingMode==="server")return o.debug("Skipping sorting rows as sortingMode = server"),j({},T,{sorting:j({},T.sorting,{sortedRows:hu(dn(e),Lt,!1)})});const I=tn(T,e.current.instanceId),D=gI(I,e),V=e.current.applyStrategyProcessor("sorting",{sortRowList:D});return j({},T,{sorting:j({},T.sorting,{sortedRows:V})})}),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()},[e,o,t.sortingMode]),u=f.useCallback(T=>{tn(e)!==T&&(o.debug("Setting sort model"),e.current.setState(Ah(T,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())},[e,o,t.disableMultipleColumnsSorting]),c=f.useCallback((T,I,D)=>{if(!T.sortable)return;const V=i(T,I);let O;!D||t.disableMultipleColumnsSorting?O=V?[V]:[]:O=s(T.field,V),e.current.setSortModel(O)},[e,s,i,t.disableMultipleColumnsSorting]),d=f.useCallback(()=>tn(e),[e]),h=f.useCallback(()=>cu(e).map(I=>I.model),[e]),p=f.useCallback(()=>lu(e),[e]),x=f.useCallback(T=>e.current.getSortedRowIds()[T],[e]);Fe(e,{getSortModel:d,getSortedRows:h,getSortedRowIds:p,getRowIdFromRowIndex:x,setSortModel:u,sortColumn:c,applySorting:l},"public");const g=f.useCallback((T,I)=>{var D;const V=tn(e);return!I.exportOnlyDirtyModels||t.sortModel!=null||((D=t.initialState)==null||(D=D.sorting)==null?void 0:D.sortModel)!=null||V.length>0?j({},T,{sorting:{sortModel:V}}):T},[e,t.sortModel,(n=t.initialState)==null||(n=n.sorting)==null?void 0:n.sortModel]),b=f.useCallback((T,I)=>{var D;const V=(D=I.stateToRestore.sorting)==null?void 0:D.sortModel;return V==null?T:(e.current.setState(Ah(V,t.disableMultipleColumnsSorting)),j({},T,{callbacks:[...T.callbacks,e.current.applySorting]}))},[e,t.disableMultipleColumnsSorting]),y=f.useCallback(T=>{const I=dn(e),D=I[Lt],V=T.sortRowList?T.sortRowList(D.children.map(O=>I[O])):[...D.children];return D.footerId!=null&&V.push(D.footerId),V},[e]);ht(e,"exportState",g),ht(e,"restoreState",b),$i(e,Nr,"sorting",y);const v=f.useCallback(({colDef:T},I)=>{const D=I.shiftKey||I.metaKey||I.ctrlKey;c(T,void 0,D)},[c]),C=f.useCallback(({colDef:T},I)=>{GP(I.key)&&!I.ctrlKey&&!I.metaKey&&c(T,void 0,I.shiftKey)},[c]),k=f.useCallback(()=>{const T=tn(e),I=So(e);if(T.length>0){const D=T.filter(V=>I[V.field]);D.length<T.length&&e.current.setSortModel(D)}},[e]),F=f.useCallback(T=>{T==="sorting"&&e.current.applySorting()},[e]);ht(e,"columnMenu",a),me(e,"columnHeaderClick",v),me(e,"columnHeaderKeyDown",C),me(e,"rowsSet",e.current.applySorting),me(e,"columnsChange",k),me(e,"activeStrategyProcessorChange",F),ks(()=>{e.current.applySorting()}),kt(()=>{t.sortModel!==void 0&&e.current.setSortModel(t.sortModel)},[e,t.sortModel])};function nf(e){const{clientHeight:t,scrollTop:n,offsetHeight:o,offsetTop:s}=e,i=s+o;if(o>t)return s;if(i-t>n)return i-t;if(s<n)return s}const kA=(e,t)=>{const n=Yt(),o=Et(e,"useGridScroll"),s=e.current.columnHeadersElementRef,i=e.current.virtualScrollerRef,a=ie(e,gr),l=f.useCallback(h=>{const p=la(e),x=Pt(e);if(!(h.rowIndex==null)&&p===0||x.length===0)return!1;o.debug(`Scrolling to cell at row ${h.rowIndex}, col: ${h.colIndex} `);let g={};if(h.colIndex!=null){const C=vo(e);let k;if(typeof h.rowIndex<"u"){var b;const F=(b=a[h.rowIndex])==null?void 0:b.id,T=e.current.unstable_getCellColSpanInfo(F,h.colIndex);T&&!T.spannedByColSpan&&(k=T.cellProps.width)}typeof k>"u"&&(k=x[h.colIndex].computedWidth),g.left=nf({clientHeight:i.current.clientWidth,scrollTop:Math.abs(i.current.scrollLeft),offsetHeight:k,offsetTop:C[h.colIndex]})}if(h.rowIndex!=null){var y,v;const C=us(e.current.state),k=aI(e),F=zg(e),T=t.pagination?h.rowIndex-k*F:h.rowIndex,I=C.positions[T+1]?C.positions[T+1]-C.positions[T]:C.currentPageTotalHeight-C.positions[T],D=((y=i.current.querySelector(`.${H["pinnedRows--top"]}`))==null?void 0:y.clientHeight)||0,V=((v=i.current.querySelector(`.${H["pinnedRows--bottom"]}`))==null?void 0:v.clientHeight)||0;g.top=nf({clientHeight:i.current.clientHeight-D-V,scrollTop:i.current.scrollTop,offsetHeight:I,offsetTop:C.positions[T]})}return g=e.current.unstable_applyPipeProcessors("scrollToIndexes",g,h),typeof g.left!==void 0||typeof g.top!==void 0?(e.current.scroll(g),!0):!1},[o,e,i,t.pagination,a]),u=f.useCallback(h=>{if(i.current&&h.left!=null&&s.current){const p=n.direction==="rtl"?-1:1;s.current.scrollLeft=h.left,i.current.scrollLeft=p*h.left,o.debug(`Scrolling left: ${h.left}`)}i.current&&h.top!=null&&(i.current.scrollTop=h.top,o.debug(`Scrolling top: ${h.top}`)),o.debug("Scrolling, updating container, and viewport")},[i,n.direction,s,o]),c=f.useCallback(()=>i!=null&&i.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0},[i]);Fe(e,{scroll:u,scrollToIndexes:l,getScrollPosition:c},"public")};function IA(e,t){tt(e,"columnHeaderClick",t.onColumnHeaderClick),tt(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),tt(e,"columnHeaderOver",t.onColumnHeaderOver),tt(e,"columnHeaderOut",t.onColumnHeaderOut),tt(e,"columnHeaderEnter",t.onColumnHeaderEnter),tt(e,"columnHeaderLeave",t.onColumnHeaderLeave),tt(e,"cellClick",t.onCellClick),tt(e,"cellDoubleClick",t.onCellDoubleClick),tt(e,"cellKeyDown",t.onCellKeyDown),tt(e,"preferencePanelClose",t.onPreferencePanelClose),tt(e,"preferencePanelOpen",t.onPreferencePanelOpen),tt(e,"menuOpen",t.onMenuOpen),tt(e,"menuClose",t.onMenuClose),tt(e,"rowDoubleClick",t.onRowDoubleClick),tt(e,"rowClick",t.onRowClick),tt(e,"stateChange",t.onStateChange)}const EA=({content:e,container:t,scrollBarSize:n})=>{const o=e.width>t.width,s=e.height>t.height;let i=!1,a=!1;return(o||s)&&(i=o,a=e.height+(i?n:0)>t.height,a&&(i=e.width+n>t.width)),{hasScrollX:i,hasScrollY:a}};function TA(e,t){const n=Et(e,"useResizeContainer"),o=f.useRef(!1),s=f.useRef(null),i=f.useRef(null),a=ie(e,us),l=ie(e,ko),u=Math.floor(t.rowHeight*l),c=Su(e,t.columnHeaderHeight),d=f.useCallback(()=>{var I;const D=(I=e.current.rootElementRef)==null?void 0:I.current,V=au(e),O=kg(e);if(!s.current)return;let S;if(t.scrollbarSize!=null)S=t.scrollbarSize;else if(!V||!D)S=0;else{const L=zi(D).createElement("div");L.style.width="99px",L.style.height="99px",L.style.position="absolute",L.style.overflow="scroll",L.className="scrollDiv",D.appendChild(L),S=L.offsetWidth-L.clientWidth,D.removeChild(L)}let $,P,w;if(t.autoHeight)w=!1,P=Math.round(V)>Math.round(s.current.width),$={width:s.current.width,height:a.currentPageTotalHeight+(P?S:0)};else{$={width:s.current.width,height:Math.max(s.current.height-c,0)};const _=EA({content:{width:Math.round(V),height:a.currentPageTotalHeight},container:{width:Math.round($.width),height:$.height-O.top-O.bottom},scrollBarSize:S});w=_.hasScrollY,P=_.hasScrollX}const E={width:$.width-(w?S:0),height:$.height-(P?S:0)},R={viewportOuterSize:$,viewportInnerSize:E,hasScrollX:P,hasScrollY:w,scrollBarSize:S},N=i.current;i.current=R,(R.viewportInnerSize.width!==N?.viewportInnerSize.width||R.viewportInnerSize.height!==N?.viewportInnerSize.height)&&e.current.publishEvent("viewportInnerSizeChange",R.viewportInnerSize)},[e,t.scrollbarSize,t.autoHeight,a.currentPageTotalHeight,c]),[h,p]=f.useState(),x=f.useMemo(()=>qf(p,60),[]),m=f.useRef();kt(()=>{h&&(d(),e.current.publishEvent("debouncedResize",s.current))},[e,h,d]);const g=f.useCallback(()=>{e.current.computeSizeAndPublishResizeEvent()},[e]),b=f.useCallback(()=>i.current,[]),y=f.useCallback(()=>{const I=e.current.getRootDimensions();if(!I)return 0;const D=Li(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){const O=e.current.getRenderContext(),S=O.lastRowIndex-O.firstRowIndex;return Math.min(S-1,D.rows.length)}const V=Math.floor(I.viewportInnerSize.height/u);return Math.min(V,D.rows.length)},[e,t.pagination,t.paginationMode,t.getRowHeight,u]),v=f.useCallback(()=>{var I,D,V;const O=(I=e.current.mainElementRef)==null?void 0:I.current;if(!O)return;const $=gy(O).getComputedStyle(O),P=parseFloat($.height)||0,w=parseFloat($.width)||0,E=P!==((D=m.current)==null?void 0:D.height),R=w!==((V=m.current)==null?void 0:V.width);if(!m.current||E||R){const N={width:w,height:P};e.current.publishEvent("resize",N),m.current=N}},[e]),C={resize:g,getRootDimensions:b},k={getViewportPageSize:y,updateGridDimensionsRef:d,computeSizeAndPublishResizeEvent:v};Fe(e,C,"public"),Fe(e,k,"private");const F=f.useRef(!0),T=f.useCallback(I=>{s.current=I;const D=/jsdom/.test(window.navigator.userAgent);if(I.height===0&&!o.current&&!t.autoHeight&&!D&&(n.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),I.width===0&&!o.current&&!D&&(n.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),F.current){p(I),F.current=!1;return}x(I)},[t.autoHeight,x,n]);kt(()=>d(),[d]),tt(e,"sortedRowsSet",d),tt(e,"paginationModelChange",d),tt(e,"columnsChange",d),me(e,"resize",T),tt(e,"debouncedResize",t.onResize)}const AA=["style"],MA=["style"];function wo(e,t,n=0,o=t.length){if(t.length<=0)return-1;if(n>=o)return n;const s=n+Math.floor((o-n)/2),i=t[s];return e<=i?wo(e,t,n,s):wo(e,t,s+1,o)}function RA(e,t,n){let o=1;for(;n<t.length&&Math.abs(t[n])<e;)n+=o,o*=2;return wo(e,t,Math.floor(n/2),Math.min(n,t.length))}const nr=({firstIndex:e,lastIndex:t,buffer:n,minFirstIndex:o,maxLastIndex:s})=>[Co(e-n,o,s),Co(t+n,o,s)],gx=(e,t)=>e===t?!0:e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex,DA={maxSize:3},FA=e=>{const t=mr(),n=pe(),o=ie(t,Pt),s=ie(t,jI),i=ie(t,Xg),{ref:a,onRenderZonePositioning:l,renderZoneMinColumnIndex:u=0,renderZoneMaxColumnIndex:c=o.length,getRowProps:d}=e,h=Yt(),p=ie(t,vo),x=ie(t,au),m=ie(t,qt),g=ie(t,Ai),b=ie(t,us),y=ie(t,Oi),v=Wr(t,n),C=f.useRef(null),k=f.useRef(null),F=Br(a,k),[T,I]=f.useState(null),D=f.useRef(T),V=f.useRef({top:0,left:0}),[O,S]=f.useState({width:null,height:null}),$=f.useRef(x),[P,w]=f.useState(null),E=f.useRef(Object.create(null)),R=f.useRef(),N=f.useRef(),_=f.useRef(sa((Z,ye,ge,Se,be,Ae)=>{let Ge;const Ue=Z.slice(ye,ge);return Ae>-1&&(ye>Ae&&Ae>=Se||ge<Ae&&Ae<be)&&(Ge=Ae),{focusedCellColumnIndexNotInRange:Ge,renderedColumns:Ue}},DA)),L=f.useMemo(()=>m!==null?o.findIndex(Z=>Z.field===m.field):-1,[m,o]),B=f.useCallback(()=>{if(!s)return{firstRowIndex:0,lastRowIndex:v.rows.length,firstColumnIndex:0,lastColumnIndex:o.length};const{top:Z,left:ye}=V.current,ge=Math.min(rf(t,v,b,Z),b.positions.length-1),Se=n.autoHeight?ge+v.rows.length:rf(t,v,b,Z+O.height);let be=0,Ae=p.length;if(i){let Ge=!1;const[Ue,yt]=nr({firstIndex:ge,lastIndex:Se,minFirstIndex:0,maxLastIndex:v.rows.length,buffer:n.rowBuffer});for(let Ie=Ue;Ie<yt&&!Ge;Ie+=1){const re=v.rows[Ie];Ge=t.current.rowHasAutoHeight(re.id)}Ge||(be=wo(Math.abs(ye),p),Ae=wo(Math.abs(ye)+O.width,p))}return{firstRowIndex:ge,lastRowIndex:Se,firstColumnIndex:be,lastColumnIndex:Ae}},[s,i,b,n.autoHeight,n.rowBuffer,v,p,o.length,t,O]);kt(()=>{s?(k.current.scrollLeft=0,k.current.scrollTop=0):C.current.style.transform="translate3d(0px, 0px, 0px)"},[s]),kt(()=>{S({width:k.current.clientWidth,height:k.current.clientHeight})},[b.currentPageTotalHeight]);const z=f.useCallback(()=>{k.current&&S({width:k.current.clientWidth,height:k.current.clientHeight})},[]);me(t,"debouncedResize",z);const U=f.useCallback(Z=>{const[ye,ge]=nr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:v.rows.length,buffer:n.rowBuffer}),[Se]=nr({firstIndex:Z.firstColumnIndex,lastIndex:Z.lastColumnIndex,minFirstIndex:u,maxLastIndex:c,buffer:n.columnBuffer}),be=oc({firstColumnToRender:Se,apiRef:t,firstRowToRender:ye,lastRowToRender:ge,visibleRows:v.rows}),Ae=h.direction==="ltr"?1:-1,Ge=us(t.current.state).positions[ye],Ue=Ae*vo(t)[be];C.current.style.transform=`translate3d(${Ue}px, ${Ge}px, 0px)`,typeof l=="function"&&l({top:Ge,left:Ue})},[t,v.rows,l,u,c,n.columnBuffer,n.rowBuffer,h.direction]),J=f.useCallback(()=>D.current,[]),ee=f.useCallback(Z=>{if(D.current&&gx(Z,D.current)){U(Z);return}I(Z),U(Z);const[ye,ge]=nr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:v.rows.length,buffer:n.rowBuffer});t.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:ye,lastRowToRender:ge}),D.current=Z},[t,I,D,v.rows.length,n.rowBuffer,U]);kt(()=>{if(O.width==null)return;const Z=B();ee(Z);const{top:ye,left:ge}=V.current,Se={top:ye,left:ge,renderContext:Z};t.current.publishEvent("scrollPositionChange",Se)},[t,B,O.width,ee]);const te=pn(Z=>{const{scrollTop:ye,scrollLeft:ge}=Z.currentTarget;if(V.current.top=ye,V.current.left=ge,!D.current||ye<0||h.direction==="ltr"&&ge<0||h.direction==="rtl"&&ge>0)return;const Se=s?B():D.current,be=Math.abs(Se.firstRowIndex-D.current.firstRowIndex),Ae=Math.abs(Se.lastRowIndex-D.current.lastRowIndex),Ge=Math.abs(Se.firstColumnIndex-D.current.firstColumnIndex),Ue=Math.abs(Se.lastColumnIndex-D.current.lastColumnIndex),yt=be>=n.rowThreshold||Ae>=n.rowThreshold||Ge>=n.columnThreshold||Ue>=n.columnThreshold||$.current!==x;t.current.publishEvent("scrollPositionChange",{top:ye,left:ge,renderContext:yt?Se:D.current},Z),yt&&(Pc.flushSync(()=>{ee(Se)}),$.current=x)}),ve=pn(Z=>{t.current.publishEvent("virtualScrollerWheel",{},Z)}),W=pn(Z=>{t.current.publishEvent("virtualScrollerTouchMove",{},Z)}),K=f.useMemo(()=>m!==null?v.rows.findIndex(Z=>Z.id===m.id):-1,[m,v.rows]);me(t,"rowMouseOver",(Z,ye)=>{var ge;ye.currentTarget.contains(ye.relatedTarget)||w((ge=Z.id)!=null?ge:null)}),me(t,"rowMouseOut",(Z,ye)=>{ye.currentTarget.contains(ye.relatedTarget)||w(null)});const ae=(Z={renderContext:T})=>{var ye;const{onRowRender:ge,renderContext:Se,minFirstColumn:be=u,maxLastColumn:Ae=c,availableSpace:Ge=O.width,rowIndexOffset:Ue=0,position:yt="center"}=Z;if(!Se||Ge==null)return null;const Ie=s?n.rowBuffer:0,re=s?n.columnBuffer:0,[de,Ce]=nr({firstIndex:Se.firstRowIndex,lastIndex:Se.lastRowIndex,minFirstIndex:0,maxLastIndex:v.rows.length,buffer:Ie}),_e=[];if(Z.rows)Z.rows.forEach(wt=>{_e.push(wt),t.current.calculateColSpan({rowId:wt.id,minFirstColumn:be,maxLastColumn:Ae,columns:o})});else{if(!v.range)return null;for(let wt=de;wt<Ce;wt+=1){const ft=v.rows[wt];_e.push(ft),t.current.calculateColSpan({rowId:ft.id,minFirstColumn:be,maxLastColumn:Ae,columns:o})}}let st=!1;if(K>-1){const wt=v.rows[K];(de>K||Ce<K)&&(st=!0,K>de?_e.push(wt):_e.unshift(wt),t.current.calculateColSpan({rowId:wt.id,minFirstColumn:be,maxLastColumn:Ae,columns:o}))}const[sn,vn]=nr({firstIndex:Se.firstColumnIndex,lastIndex:Se.lastColumnIndex,minFirstIndex:be,maxLastIndex:Ae,buffer:re}),qr=oc({firstColumnToRender:sn,apiRef:t,firstRowToRender:de,lastRowToRender:Ce,visibleRows:v.rows});let Ds=!1;(qr>L||vn<L)&&(Ds=!0);const{focusedCellColumnIndexNotInRange:Tt,renderedColumns:At}=_.current(o,qr,vn,be,Ae,Ds?L:-1),yr=((ye=n.slotProps)==null?void 0:ye.row)||{},{style:br}=yr,Ca=le(yr,AA);(R.current!==d||N.current!==br)&&(E.current=Object.create(null));const Fs=[];let Au=!1;for(let wt=0;wt<_e.length;wt+=1){var Mu;const{id:ft,model:Ru}=_e[wt],Jx=st&&m.id===ft,Zx=st?de+wt===v.rows.length:de+wt===v.rows.length-1,ey=t.current.rowHasAutoHeight(ft)?"auto":t.current.unstable_getRowHeight(ft);let wa;y[ft]==null?wa=!1:wa=t.current.isRowSelectable(ft),ge&&ge(ft);const Du=m!==null&&m.id===ft?m.field:null,Fu=Tt!==void 0&&o[Tt],ty=Fu&&Du?[Fu,...At]:At;let Ou=null;g!==null&&g.id===ft&&(Ou=t.current.getCellParams(ft,g.field).cellMode==="view"?g.field:null);const Lu=typeof d=="function"&&d(ft,Ru)||{},{style:ny}=Lu,ry=le(Lu,MA);if(!E.current[ft]){const _u=j({},ny,br);E.current[ft]=_u}let ja=Ue+((v==null||(Mu=v.range)==null?void 0:Mu.firstRowIndex)||0)+de+wt;st&&m?.id===ft?(ja=K,Au=!0):Au&&(ja-=1),Fs.push(r.jsx(n.slots.row,j({row:Ru,rowId:ft,focusedCellColumnIndexNotInRange:Tt,isNotVisible:Jx,rowHeight:ey,focusedCell:Du,tabbableCell:Ou,renderedColumns:ty,visibleColumns:o,firstColumnToRender:qr,lastColumnToRender:vn,selected:wa,index:ja,containerWidth:Ge,isLastVisible:Zx,position:yt},ry,Ca,{hovered:P===ft,style:E.current[ft]}),ft))}return R.current=d,N.current=br,Fs},X=O.width&&x>=O.width,ne=f.useMemo(()=>{const Z=Math.max(b.currentPageTotalHeight,1);let ye=!1;k!=null&&k.current&&Z<=k?.current.clientHeight&&(ye=!0);const ge={width:X?x:"auto",height:Z,minHeight:ye?"100%":"auto"};return n.autoHeight&&v.rows.length===0&&(ge.height=Ig(t,n.rowHeight)),ge},[t,k,x,b.currentPageTotalHeight,X,n.autoHeight,n.rowHeight,v.rows.length]);f.useEffect(()=>{t.current.publishEvent("virtualScrollerContentSizeChange")},[t,ne]);const je=f.useMemo(()=>{const Z={};return X||(Z.overflowX="hidden"),n.autoHeight&&(Z.overflowY="hidden"),Z},[X,n.autoHeight]);return t.current.register("private",{getRenderContext:J}),{renderContext:T,updateRenderZonePosition:U,getRows:ae,getRootProps:(Z={})=>j({ref:F,onScroll:te,onWheel:ve,onTouchMove:W},Z,{style:Z.style?j({},Z.style,je):je,role:"presentation"}),getContentProps:({style:Z}={})=>({style:Z?j({},Z,ne):ne,role:"presentation"}),getRenderZoneProps:()=>({ref:C,role:"rowgroup"})}};function rf(e,t,n,o){var s,i;const a=e.current.getLastMeasuredRowIndex();let l=a===1/0;(s=t.range)!=null&&s.lastRowIndex&&!l&&(l=a>=t.range.lastRowIndex);const u=Co(a-(((i=t.range)==null?void 0:i.firstRowIndex)||0),0,n.positions.length);return l||n.positions[u]>=o?wo(o,n.positions):RA(o,n.positions,u)}const OA=e=>{const{classes:t,headerAlign:n,isDragging:o,showColumnBorder:s,groupId:i}=e;return Ee({root:["columnHeader",n==="left"&&"columnHeader--alignLeft",n==="center"&&"columnHeader--alignCenter",n==="right"&&"columnHeader--alignRight",o&&"columnHeader--moving",s&&"columnHeader--showColumnBorder",s&&"columnHeader--withRightBorder","withBorderColor",i===null?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},Be,t)};function LA(e){var t;const{groupId:n,width:o,depth:s,maxDepth:i,fields:a,height:l,colIndex:u,hasFocus:c,tabIndex:d,isLastColumn:h}=e,p=pe(),x=f.useRef(null),m=Ve(),g=ie(m,gg),b=n?g[n]:{},{headerName:y=n??"",description:v="",headerAlign:C=void 0}=b;let k;const F=n&&((t=g[n])==null?void 0:t.renderHeaderGroup),T=f.useMemo(()=>({groupId:n,headerName:y,description:v,depth:s,maxDepth:i,fields:a,colIndex:u,isLastColumn:h}),[n,y,v,s,i,a,u,h]);n&&F&&(k=F(T));const I=p.showColumnVerticalBorder,D=j({},e,{classes:p.classes,showColumnBorder:I,headerAlign:C,depth:s,isDragging:!1}),V=y??n,O=mt(),S=n===null?`empty-group-cell-${O}`:n,$=OA(D);f.useLayoutEffect(()=>{if(c){const N=x.current.querySelector('[tabindex="0"]')||x.current;N?.focus()}},[m,c]);const P=f.useCallback(R=>N=>{Ps(N)||m.current.publishEvent(R,T,N)},[m,T]),w=f.useMemo(()=>({onKeyDown:P("columnGroupHeaderKeyDown"),onFocus:P("columnGroupHeaderFocus"),onBlur:P("columnGroupHeaderBlur")}),[P]),E=typeof b.headerClassName=="function"?b.headerClassName(T):b.headerClassName;return r.jsx(_g,j({ref:x,classes:$,columnMenuOpen:!1,colIndex:u,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:d,isDraggable:!1,headerComponent:k,headerClassName:E,description:v,elementId:S,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:V,"aria-colspan":a.length,"data-fields":`|-${a.join("-|-")}-|`},w))}const of=Xe("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})(()=>({display:"flex"}));function _A(e){return!!e.target}const $A=e=>{const{innerRef:t,minColumnIndex:n=0,visibleColumns:o,sortColumnLookup:s,filterColumnLookup:i,columnPositions:a,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:u,columnHeaderFocus:c,columnGroupHeaderFocus:d,densityFactor:h,headerGroupingMaxDepth:p,columnMenuState:x,columnVisibility:m,columnGroupsHeaderStructure:g,hasOtherElementInTabSequence:b}=e,y=Yt(),[v,C]=f.useState(""),[k,F]=f.useState(""),T=mr(),I=ie(T,Xg),D=pe(),V=f.useRef(null),O=Br(t,V),[S,$]=f.useState(null),P=f.useRef(S),w=f.useRef(0),E=Wr(T,D),R=Su(T,D.columnHeaderHeight),N=Math.floor(D.columnHeaderHeight*h),_=f.useCallback(X=>{S&&X&&gx(S,X)||$(X)},[S]);f.useEffect(()=>{var X;(X=T.current.columnHeadersContainerElementRef)!=null&&X.current&&(T.current.columnHeadersContainerElementRef.current.scrollLeft=0)},[T]);const L=f.useRef(sa(A2,{equalityCheck:(X,ne)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every(je=>X[je]===ne[je])})),B=f.useCallback(X=>{const[ne,je]=nr({firstIndex:X.firstRowIndex,lastIndex:X.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:D.rowBuffer}),Z=L.current({firstColumnIndex:X.firstColumnIndex,minColumnIndex:n,columnBuffer:D.columnBuffer,firstRowToRender:ne,lastRowToRender:je,apiRef:T,visibleRows:E.rows}),ye=y.direction==="ltr"?1:-1,ge=Z>0?w.current-ye*a[Z]:w.current;V.current.style.transform=`translate3d(${-ge}px, 0px, 0px)`},[a,n,D.columnBuffer,T,E.rows,D.rowBuffer,y.direction]);f.useLayoutEffect(()=>{S&&B(S)},[S,B]);const z=f.useCallback(({left:X,renderContext:ne=null},je)=>{var Z,ye;if(!V.current||w.current===X&&((Z=P.current)==null?void 0:Z.firstColumnIndex)===ne?.firstColumnIndex&&((ye=P.current)==null?void 0:ye.lastColumnIndex)===ne?.lastColumnIndex)return;w.current=X;let ge=!1;ne!==P.current||!P.current?(_A(je)?(Pc.flushSync(()=>{_(ne)}),ge=!0):_(ne),P.current=ne):ge=!0,ne&&ge&&B(ne)},[B,_]),U=f.useCallback(X=>F(X.field),[]),J=f.useCallback(()=>F(""),[]),ee=f.useCallback(X=>C(X.field),[]),te=f.useCallback(()=>C(""),[]);me(T,"columnResizeStart",U),me(T,"columnResizeStop",J),me(T,"columnHeaderDragStart",ee),me(T,"columnHeaderDragEnd",te),me(T,"scrollPositionChange",z);const ve=X=>{const{renderContext:ne=S,minFirstColumn:je=n,maxLastColumn:Z=o.length}=X||{};if(!ne)return null;const[ye,ge]=nr({firstIndex:ne.firstRowIndex,lastIndex:ne.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:D.rowBuffer}),Se=I?L.current({firstColumnIndex:ne.firstColumnIndex,minColumnIndex:je,columnBuffer:D.columnBuffer,apiRef:T,firstRowToRender:ye,lastRowToRender:ge,visibleRows:E.rows}):0,be=I?Math.min(ne.lastColumnIndex+D.columnBuffer,Z):Z;return{renderedColumns:o.slice(Se,be),firstColumnToRender:Se,lastColumnToRender:be,minFirstColumn:je,maxLastColumn:Z}},W=(X,ne={})=>{const je=ve(X);if(je==null)return null;const{renderedColumns:Z,firstColumnToRender:ye}=je,ge=[];for(let Se=0;Se<Z.length;Se+=1){const be=Z[Se],Ae=ye+Se,Ge=Ae===0,Ue=l!==null&&l.field===be.field||Ge&&!b?0:-1,yt=c!==null&&c.field===be.field,Ie=x.open&&x.field===be.field;ge.push(r.jsx(Wk,j({},s[be.field],{columnMenuOpen:Ie,filterItemsCounter:i[be.field]&&i[be.field].length,headerHeight:N,isDragging:be.field===v,colDef:be,colIndex:Ae,isResizing:k===be.field,hasFocus:yt,tabIndex:Ue},ne),be.field))}return r.jsx(of,{role:"row","aria-rowindex":p+1,ownerState:D,children:ge})},K=X=>{if(p===0)return null;const ne=ve(X);if(ne==null||ne.renderedColumns.length===0)return null;const{firstColumnToRender:je,lastColumnToRender:Z}=ne,ye=[],ge=[];for(let Ae=0;Ae<p;Ae+=1){var Se,be;const Ge=g[Ae],Ue=o[je].field,yt=(Se=T.current.unstable_getColumnGroupPath(Ue)[Ae])!=null?Se:null,Ie=Ge.findIndex(({groupId:Tt,columnFields:At})=>Tt===yt&&At.includes(Ue)),re=o[Z-1].field,de=(be=T.current.unstable_getColumnGroupPath(re)[Ae])!=null?be:null,Ce=Ge.findIndex(({groupId:Tt,columnFields:At})=>Tt===de&&At.includes(re)),_e=Ge.slice(Ie,Ce+1).map(Tt=>j({},Tt,{columnFields:Tt.columnFields.filter(At=>m[At]!==!1)})).filter(Tt=>Tt.columnFields.length>0),st=_e[0].columnFields.indexOf(Ue),vn=_e[0].columnFields.slice(0,st).reduce((Tt,At)=>{var yr;const br=T.current.getColumn(At);return Tt+((yr=br.computedWidth)!=null?yr:0)},0);let qr=je;const Ds=_e.map(({groupId:Tt,columnFields:At})=>{const yr=d!==null&&d.depth===Ae&&At.includes(d.field),br=u!==null&&u.depth===Ae&&At.includes(u.field)?0:-1,Ca={groupId:Tt,width:At.reduce((Tu,Fs)=>Tu+T.current.getColumn(Fs).computedWidth,0),fields:At,colIndex:qr,hasFocus:yr,tabIndex:br};return qr+=At.length,Ca});ge.push({leftOverflow:vn,elements:Ds})}return ge.forEach((Ae,Ge)=>{ye.push(r.jsx(of,{style:{height:`${N}px`,transform:`translateX(-${Ae.leftOverflow}px)`},role:"row","aria-rowindex":Ge+1,ownerState:D,children:Ae.elements.map(({groupId:Ue,width:yt,fields:Ie,colIndex:re,hasFocus:de,tabIndex:Ce},_e)=>r.jsx(LA,{groupId:Ue,width:yt,fields:Ie,colIndex:re,depth:Ge,isLastColumn:re===o.length-Ie.length,maxDepth:ge.length,height:N,hasFocus:de,tabIndex:Ce},_e))},Ge))}),ye},ae={minHeight:R,maxHeight:R,lineHeight:`${N}px`};return{renderContext:S,getColumnHeaders:W,getColumnsToRender:ve,getColumnGroupHeaders:K,isDragging:!!v,getRootProps:(X={})=>j({style:ae},X),getInnerProps:()=>({ref:O,role:"rowgroup"}),headerHeight:N}},NA=["className"],VA=e=>{const{classes:t}=e;return Ee({root:["columnHeaders","withBorderColor"]},Be,t)},BA=It("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})({position:"relative",overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:"1px solid",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),HA=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,NA),i=pe(),a=VA(i);return r.jsx(BA,j({ref:n,className:$e(o,a.root),ownerState:i},s,{role:"presentation"}))}),zA=["isDragging","className"],UA=e=>{const{isDragging:t,hasScrollX:n,classes:o}=e;return Ee({root:["columnHeadersInner",t&&"columnHeaderDropZone",n&&"columnHeadersInner--scrollable"]},Be,o)},GA=It("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,t)=>[{[`&.${H.columnHeaderDropZone}`]:t.columnHeaderDropZone},t.columnHeadersInner]})(()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${H.columnHeaderDropZone} .${H.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${H["columnHeadersInner--scrollable"]} .${H.columnHeader}:last-child`]:{borderRight:"none"}})),WA=f.forwardRef(function(t,n){var o,s;const{isDragging:i,className:a}=t,l=le(t,zA),u=Ve(),c=pe(),d=j({},c,{isDragging:i,hasScrollX:(o=(s=u.current.getRootDimensions())==null?void 0:s.hasScrollX)!=null?o:!1}),h=UA(d);return r.jsx(GA,j({ref:n,className:$e(a,h.root),ownerState:d},l))}),qA=["innerRef","className","visibleColumns","sortColumnLookup","filterColumnLookup","columnPositions","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","densityFactor","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],KA=f.forwardRef(function(t,n){const{innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:h,densityFactor:p,headerGroupingMaxDepth:x,columnMenuState:m,columnVisibility:g,columnGroupsHeaderStructure:b,hasOtherElementInTabSequence:y}=t,v=le(t,qA),{isDragging:C,getRootProps:k,getInnerProps:F,getColumnHeaders:T,getColumnGroupHeaders:I}=$A({innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:h,densityFactor:p,headerGroupingMaxDepth:x,columnMenuState:m,columnVisibility:g,columnGroupsHeaderStructure:b,hasOtherElementInTabSequence:y});return r.jsx(HA,j({ref:n},k(v),{children:r.jsxs(WA,j({isDragging:C},F(),{children:[I(),T()]}))}))}),QA=ha(KA),XA=f.forwardRef(function(t,n){const s=Ve().current.getLocaleText("noResultsOverlayLabel");return r.jsx(pu,j({ref:n},t,{children:s}))}),YA=["sortingOrder"],JA=f.memo(function(t){const{sortingOrder:n}=t,o=le(t,YA),s=pe(),[i]=n,a=i==="asc"?s.slots.columnSortedAscendingIcon:s.slots.columnSortedDescendingIcon;return a?r.jsx(a,j({},o)):null}),ZA=["native"];function eM(e){let{native:t}=e,n=le(e,ZA);return t?r.jsx("option",j({},n)):r.jsx(oe,j({},n))}const tM={BooleanCellTrueIcon:UI,BooleanCellFalseIcon:ol,ColumnMenuIcon:VI,OpenFilterButtonIcon:DI,FilterPanelDeleteIcon:ol,ColumnFilteredIcon:Lh,ColumnSelectorIcon:OI,ColumnUnsortedIcon:JA,ColumnSortedAscendingIcon:Rh,ColumnSortedDescendingIcon:Dh,ColumnResizeIcon:LI,DensityCompactIcon:_I,DensityStandardIcon:$I,DensityComfortableIcon:NI,ExportIcon:zI,MoreActionsIcon:GI,TreeDataCollapseIcon:Oh,TreeDataExpandIcon:Fh,GroupingCriteriaCollapseIcon:Oh,GroupingCriteriaExpandIcon:Fh,DetailPanelExpandIcon:_h,DetailPanelCollapseIcon:BI,RowReorderIcon:$h,QuickFilterIcon:FI,QuickFilterClearIcon:ol,ColumnMenuHideIcon:WI,ColumnMenuSortAscendingIcon:Rh,ColumnMenuSortDescendingIcon:Dh,ColumnMenuFilterIcon:Lh,ColumnMenuManageColumnsIcon:qI,ColumnMenuClearIcon:KI,LoadIcon:HI,FilterPanelAddIcon:_h,FilterPanelRemoveAllIcon:QI,ColumnReorderIcon:$h},nM=j({},tM,{BaseCheckbox:Nf,BaseTextField:Re,BaseFormControl:dt,BaseSelect:gt,BaseSwitch:jn,BaseButton:Y,BaseIconButton:Pe,BaseInputAdornment:Tr,BaseTooltip:it,BasePopper:xc,BaseInputLabel:vt,BaseSelectOption:eM,BaseChip:we}),rM=j({},nM,{Cell:Yl,SkeletonCell:hk,ColumnHeaderFilterIconButton:PI,ColumnMenu:uE,ColumnHeaders:QA,Footer:xT,FooterRowCount:kT,Toolbar:null,PreferencesPanel:_E,LoadingOverlay:bT,NoResultsOverlay:XA,NoRowsOverlay:vT,Pagination:wT,FilterPanel:oT,ColumnsPanel:ME,Panel:LE,Row:WT}),xx=e=>{if(e!==void 0)return Object.keys(e).reduce((t,n)=>j({},t,{[`${n.charAt(0).toLowerCase()}${n.slice(1)}`]:e[n]}),{})};function oM({defaultSlots:e,slots:t,components:n}){const o=t??(n?xx(n):null);if(!o||Object.keys(o).length===0)return e;const s=j({},e);return Object.keys(o).forEach(i=>{const a=i;o[a]!==void 0&&(s[a]=o[a])}),s}const sM=["components","componentsProps"];function iM(e){var t;const n=Object.keys(e);if(!n.some(i=>i.startsWith("aria-")||i.startsWith("data-")))return e;const o={},s=(t=e.forwardedProps)!=null?t:{};for(let i=0;i<n.length;i+=1){const a=n[i];a.startsWith("aria-")||a.startsWith("data-")?s[a]=e[a]:o[a]=e[a]}return o.forwardedProps=s,o}function aM(e){return f.useMemo(()=>{const{components:t,componentsProps:n}=e,o=le(e,sM);return[t,n,iM(o)]},[e])}const lM={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleRowSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},pa={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,rowSelection:!0,density:"standard",disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleRowSelection:!1,disableMultipleColumnsSorting:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:Dn.Cell,filterMode:"client",filterDebounceMs:150,columnHeaderHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:"client",rowHeight:52,pageSizeOptions:[25,50,100],rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingOrder:["asc","desc",null],sortingMode:"client",throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1,unstable_ignoreValueFormatterDuringExport:!1,clipboardCopyCellDelimiter:"	",rowPositionsDebounceMs:166},cM=xx(rM),uM=e=>{const[t,n,o]=aM(fr({props:e,name:"MuiDataGrid"})),s=f.useMemo(()=>j({},CA,o.localeText),[o.localeText]),i=f.useMemo(()=>oM({defaultSlots:cM,slots:o.slots,components:t}),[t,o.slots]);return f.useMemo(()=>{var a;return j({},pa,o,{localeText:s,slots:i,slotProps:(a=o.slotProps)!=null?a:n},lM)},[o,s,i,n])},dM=e=>j({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),sf=(e,t,n)=>typeof e=="number"&&e>0?e:t,hM=(e,t)=>{const{getRowHeight:n,getRowSpacing:o,getEstimatedRowHeight:s}=t,i=f.useRef(Object.create(null)),a=f.useRef(-1),l=f.useRef(!1),u=ie(e,ko),c=ie(e,bt),d=ie(e,gu),h=ie(e,tn),p=Wr(e,t),x=ie(e,Po),m=sf(t.rowHeight,pa.rowHeight),g=Math.floor(m*u),b=f.useCallback(()=>{var $,P;l.current=!1;const w=N=>{i.current[N.id]||(i.current[N.id]={sizes:{baseCenter:g},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:_,needsFirstMeasurement:L,sizes:B}=i.current[N.id];let z=typeof g=="number"&&g>0?g:52;const U=B.baseCenter;if(_)z=U;else if(n){const W=n(j({},N,{densityFactor:u}));if(W==="auto"){if(L){const K=s?s(j({},N,{densityFactor:u})):g;z=K??g}else z=U;l.current=!0,i.current[N.id].autoHeight=!0}else z=sf(W,g),i.current[N.id].needsFirstMeasurement=!1,i.current[N.id].autoHeight=!1}else i.current[N.id].needsFirstMeasurement=!1;const J={};for(const W in B)/^base[A-Z]/.test(W)&&(J[W]=B[W]);if(J.baseCenter=z,o){var ee,te;const W=e.current.getRowIndexRelativeToVisibleRows(N.id),K=o(j({},N,{isFirstVisible:W===0,isLastVisible:W===p.rows.length-1,indexRelativeToCurrentPage:W}));J.spacingTop=(ee=K.top)!=null?ee:0,J.spacingBottom=(te=K.bottom)!=null?te:0}const ve=e.current.unstable_applyPipeProcessors("rowHeight",J,N);return i.current[N.id].sizes=ve,ve},E=[],R=p.rows.reduce((N,_)=>{E.push(N);let L=0,B=0;const z=w(_);for(const U in z){const J=z[U];/^base[A-Z]/.test(U)?L=J>L?J:L:B+=J}return N+L+B},0);x==null||($=x.top)==null||$.forEach(N=>{w(N)}),x==null||(P=x.bottom)==null||P.forEach(N=>{w(N)}),e.current.setState(N=>j({},N,{rowsMeta:{currentPageTotalHeight:R,positions:E}})),l.current||(a.current=1/0),e.current.forceUpdate()},[e,p.rows,g,n,o,s,x,u]),y=f.useCallback($=>{const P=i.current[$];return P?P.sizes.baseCenter:g},[g]),v=$=>{var P;return(P=i.current[$])==null?void 0:P.sizes},C=f.useCallback(($,P)=>{i.current[$].sizes.baseCenter=P,i.current[$].isResized=!0,i.current[$].needsFirstMeasurement=!1,b()},[b]),k=f.useMemo(()=>qf(b,t.rowPositionsDebounceMs),[b,t.rowPositionsDebounceMs]),F=f.useCallback(($,P,w)=>{if(!i.current[$]||!i.current[$].autoHeight)return;const E=i.current[$].sizes[`base${An(w)}`]!==P;i.current[$].needsFirstMeasurement=!1,i.current[$].sizes[`base${An(w)}`]=P,E&&k()},[k]),T=f.useCallback($=>{var P;return((P=i.current[$])==null?void 0:P.autoHeight)||!1},[]),I=f.useCallback(()=>a.current,[]),D=f.useCallback($=>{l.current&&$>a.current&&(a.current=$)},[]),V=f.useCallback(()=>{i.current={},b()},[b]);f.useEffect(()=>{b()},[g,c,d,h,b]),ju(e,"rowHeight",b);const O={unstable_setLastMeasuredRowIndex:D,unstable_getRowHeight:y,unstable_getRowInternalSizes:v,unstable_setRowHeight:C,unstable_storeRowHeightMeasurement:F,resetRowHeights:V},S={getLastMeasuredRowIndex:I,rowHasAutoHeight:T};Fe(e,O,"public"),Fe(e,S,"private")},fM=e=>{const t=f.useCallback((s={})=>e.current.unstable_applyPipeProcessors("exportState",{},s),[e]),n=f.useCallback(s=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:s}).callbacks.forEach(a=>{a()}),e.current.forceUpdate()},[e]);Fe(e,{exportState:t,restoreState:n},"public")},pM=e=>{const t=f.useRef({}),n=f.useCallback((c,d,h)=>{const p=t.current;p[c]||(p[c]={}),p[c][d]=h},[]),o=f.useCallback((c,d)=>{var h;return(h=t.current[c])==null?void 0:h[d]},[]),s=f.useCallback(c=>{const{columnIndex:d,rowId:h,minFirstColumnIndex:p,maxLastColumnIndex:x,columns:m}=c,g=m.length,b=m[d],y=typeof b.colSpan=="function"?b.colSpan(e.current.getCellParams(h,b.field)):b.colSpan;if(!y||y===1)return n(h,d,{spannedByColSpan:!1,cellProps:{colSpan:1,width:b.computedWidth}}),{colSpan:1};let v=b.computedWidth;for(let C=1;C<y;C+=1){const k=d+C;if(k>=p&&k<x){const F=m[k];v+=F.computedWidth,n(h,d+C,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(d+y,g-1),leftVisibleCellIndex:d})}n(h,d,{spannedByColSpan:!1,cellProps:{colSpan:y,width:v}})}return{colSpan:y}},[e,n]),i=f.useCallback(({rowId:c,minFirstColumn:d,maxLastColumn:h,columns:p})=>{for(let x=d;x<h;x+=1){const m=s({columnIndex:x,rowId:c,minFirstColumnIndex:d,maxLastColumnIndex:h,columns:p});m.colSpan>1&&(x+=m.colSpan-1)}},[s]),a={unstable_getCellColSpanInfo:o},l={calculateColSpan:i};Fe(e,a,"public"),Fe(e,l,"private");const u=f.useCallback(()=>{t.current={}},[]);me(e,"columnOrderChange",u)},yx=(e,t,n)=>{if(Eg(e)){if(n[e.field]!==void 0)throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${n[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join(`
`));n[e.field]=t;return}const{groupId:o,children:s}=e;s.forEach(i=>{yx(i,[...t,o],n)})},sc=e=>{if(!e)return{};const t={};return e.forEach(n=>{yx(n,[],t)}),t},ic=(e,t,n)=>{const o=u=>{var c;return(c=t[u])!=null?c:[]},s=[],i=Math.max(...e.map(u=>o(u).length)),a=(u,c,d)=>Lr(o(u).slice(0,d+1),o(c).slice(0,d+1)),l=(u,c)=>!!(n!=null&&n.left&&n.left.includes(u)&&!n.left.includes(c)||n!=null&&n.right&&!n.right.includes(u)&&n.right.includes(c));for(let u=0;u<i;u+=1){const c=e.reduce((d,h)=>{var p;const x=(p=o(h)[u])!=null?p:null;if(d.length===0)return[{columnFields:[h],groupId:x}];const m=d[d.length-1],g=m.columnFields[m.columnFields.length-1];return m.groupId!==x||!a(g,h,u)||l(g,h)?[...d,{columnFields:[h],groupId:x}]:[...d.slice(0,d.length-1),{columnFields:[...m.columnFields,h],groupId:x}]},[]);s.push(c)}return s},mM=["groupId","children"],Pu=e=>{let t={};return e.forEach(n=>{if(Eg(n))return;const{groupId:o,children:s}=n,i=le(n,mM);if(!o)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");s||console.warn(`MUI: group groupId=${o} has no children.`);const a=j({},i,{groupId:o}),l=Pu(s);if(l[o]!==void 0||t[o]!==void 0)throw new Error(`MUI: The groupId ${o} is used multiple times in the columnGroupingModel.`);t=j({},t,l,{[o]:a})}),j({},t)},gM=(e,t,n)=>{var o,s,i,a;if(!((o=t.experimentalFeatures)!=null&&o.columnGrouping))return e;const l=qn(n),u=ia(n),c=Pu((s=t.columnGroupingModel)!=null?s:[]),d=sc((i=t.columnGroupingModel)!=null?i:[]),h=ic(l,d,(a=n.current.state.pinnedColumns)!=null?a:{}),p=u.length===0?0:Math.max(...u.map(x=>{var m,g;return(m=(g=d[x])==null?void 0:g.length)!=null?m:0}));return j({},e,{columnGrouping:{lookup:c,unwrappedGroupingModel:d,headerStructure:h,maxDepth:p}})},xM=(e,t)=>{var n;const o=f.useCallback(u=>{var c;return(c=$1(e)[u])!=null?c:[]},[e]),s=f.useCallback(()=>gg(e),[e]);Fe(e,{unstable_getColumnGroupPath:o,unstable_getAllGroupDetails:s},"public");const a=f.useCallback(()=>{var u;const c=sc((u=t.columnGroupingModel)!=null?u:[]);e.current.setState(d=>{var h,p,x;const m=(h=(p=d.columns)==null?void 0:p.orderedFields)!=null?h:[],g=(x=d.pinnedColumns)!=null?x:{},b=ic(m,c,g);return j({},d,{columnGrouping:j({},d.columnGrouping,{headerStructure:b})})})},[e,t.columnGroupingModel]),l=f.useCallback(u=>{var c,d,h,p;if(!((c=t.experimentalFeatures)!=null&&c.columnGrouping))return;const x=(d=(h=(p=e.current).getPinnedColumns)==null?void 0:h.call(p))!=null?d:{},m=qn(e),g=ia(e),b=Pu(u??[]),y=sc(u??[]),v=ic(m,y,x),C=g.length===0?0:Math.max(...g.map(k=>{var F,T;return(F=(T=y[k])==null?void 0:T.length)!=null?F:0}));e.current.setState(k=>j({},k,{columnGrouping:{lookup:b,unwrappedGroupingModel:y,headerStructure:v,maxDepth:C}}))},[e,(n=t.experimentalFeatures)==null?void 0:n.columnGrouping]);me(e,"columnIndexChange",a),me(e,"columnsChange",()=>{l(t.columnGroupingModel)}),me(e,"columnVisibilityModelChange",()=>{l(t.columnGroupingModel)}),f.useEffect(()=>{l(t.columnGroupingModel)},[l,t.columnGroupingModel])},yM=(e,t)=>{const n=i2(e,t);return jA(n,t),yA(n),Nt(bA,n,t),Nt(M2,n,t),Nt(fA,n,t),Nt(dA,n,t),Nt(K2,n,t),Nt(SA,n,t),Nt(tA,n,t),Nt(U2,n,t),Nt(O2,n,t),Nt(Z2,n,t),Nt(dM,n,t),Nt(k2,n,t),Nt(gM,n,t),Nt(CI,n,t),Y2(n,t),vA(n,t),R2(n,t),pA(n,t),bP(n,t),pM(n),xM(n,t),hA(n,t),Q2(n,t),nA(n,t),q2(n,t),PA(n,t),L2(n,t),eA(n,t),hM(n,t),kA(n,t),I2(n),N2(n,t),z2(n,t),P2(n,t),TA(n,t),IA(n,t),fM(n),wI(n,t),n},bM=e=>{const{classes:t}=e;return Ee({root:["virtualScroller"]},Be,t)},vM=It("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({overflow:"auto",height:"100%",position:"relative","@media print":{overflow:"hidden"},zIndex:0}),CM=f.forwardRef(function(t,n){const o=pe(),s=bM(o);return r.jsx(vM,j({ref:n},t,{className:$e(s.root,t.className),ownerState:o}))}),wM=(e,t)=>{const{classes:n}=e;return Ee({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},Be,n)},jM=It("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),SM=f.forwardRef(function(t,n){var o;const s=pe(),i=!s.autoHeight&&((o=t.style)==null?void 0:o.minHeight)==="auto",a=wM(s,i);return r.jsx(jM,j({ref:n},t,{ownerState:s,className:$e(a.root,t.className)}))}),PM=["className"],kM=e=>{const{classes:t}=e;return Ee({root:["virtualScrollerRenderZone"]},Be,t)},IM=It("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),EM=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,PM),i=pe(),a=kM(i);return r.jsx(IM,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),TM=["className"],AM=f.forwardRef(function(t,n){const{className:o}=t,s=le(t,TM),{getRootProps:i,getContentProps:a,getRenderZoneProps:l,getRows:u}=FA({ref:n});return r.jsxs(CM,j({className:o},i(s),{children:[r.jsx(hP,{}),r.jsx(SM,j({},a(),{children:r.jsx(EM,j({},l(),{children:u()}))}))]}))}),bx=f.forwardRef(function(t,n){const o=uM(t),s=yM(o.apiRef,o);return r.jsx(qT,{privateApiRef:s,props:o,children:r.jsxs(xk,j({className:o.className,style:o.style,sx:o.sx,ref:n},o.forwardedProps,{children:[r.jsx(yT,{}),r.jsx(rP,{VirtualScrollerComponent:AM}),r.jsx(oP,{})]}))})}),vx=f.memo(bx);pa.filterDebounceMs;pa.filterDebounceMs;bx.propTypes={apiRef:G.shape({current:G.object.isRequired}),"aria-label":G.string,"aria-labelledby":G.string,autoHeight:G.bool,autoPageSize:G.bool,cellModesModel:G.object,checkboxSelection:G.bool,classes:G.object,clipboardCopyCellDelimiter:G.string,columnBuffer:G.number,columnGroupingModel:G.arrayOf(G.object),columnHeaderHeight:G.number,columns:xy(G.array.isRequired),columnThreshold:G.number,columnVisibilityModel:G.object,components:G.object,componentsProps:G.object,density:G.oneOf(["comfortable","compact","standard"]),disableColumnFilter:G.bool,disableColumnMenu:G.bool,disableColumnSelector:G.bool,disableDensitySelector:G.bool,disableEval:G.bool,disableRowSelectionOnClick:G.bool,disableVirtualization:G.bool,editMode:G.oneOf(["cell","row"]),experimentalFeatures:G.shape({ariaV7:G.bool,columnGrouping:G.bool,warnIfFocusStateIsNotSynced:G.bool}),filterDebounceMs:G.number,filterMode:G.oneOf(["client","server"]),filterModel:G.shape({items:G.arrayOf(G.shape({field:G.string.isRequired,id:G.oneOfType([G.number,G.string]),operator:G.string.isRequired,value:G.any})).isRequired,logicOperator:G.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:G.bool,quickFilterLogicOperator:G.oneOf(["and","or"]),quickFilterValues:G.array}),forwardedProps:G.object,getCellClassName:G.func,getDetailPanelContent:G.func,getEstimatedRowHeight:G.func,getRowClassName:G.func,getRowHeight:G.func,getRowId:G.func,getRowSpacing:G.func,hideFooter:G.bool,hideFooterPagination:G.bool,hideFooterSelectedRowCount:G.bool,ignoreDiacritics:G.bool,initialState:G.object,isCellEditable:G.func,isRowSelectable:G.func,keepNonExistentRowsSelected:G.bool,loading:G.bool,localeText:G.object,logger:G.shape({debug:G.func.isRequired,error:G.func.isRequired,info:G.func.isRequired,warn:G.func.isRequired}),logLevel:G.oneOf(["debug","error","info","warn",!1]),nonce:G.string,onCellClick:G.func,onCellDoubleClick:G.func,onCellEditStart:G.func,onCellEditStop:G.func,onCellKeyDown:G.func,onCellModesModelChange:G.func,onClipboardCopy:G.func,onColumnHeaderClick:G.func,onColumnHeaderDoubleClick:G.func,onColumnHeaderEnter:G.func,onColumnHeaderLeave:G.func,onColumnHeaderOut:G.func,onColumnHeaderOver:G.func,onColumnOrderChange:G.func,onColumnVisibilityModelChange:G.func,onFilterModelChange:G.func,onMenuClose:G.func,onMenuOpen:G.func,onPaginationModelChange:G.func,onPreferencePanelClose:G.func,onPreferencePanelOpen:G.func,onProcessRowUpdateError:G.func,onResize:G.func,onRowClick:G.func,onRowCountChange:G.func,onRowDoubleClick:G.func,onRowEditStart:G.func,onRowEditStop:G.func,onRowModesModelChange:G.func,onRowSelectionModelChange:G.func,onSortModelChange:G.func,onStateChange:G.func,pageSizeOptions:G.arrayOf(G.oneOfType([G.number,G.shape({label:G.string.isRequired,value:G.number.isRequired})]).isRequired),pagination:e=>e.pagination===!1?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join(`
`)):null,paginationMode:G.oneOf(["client","server"]),paginationModel:G.shape({page:G.number.isRequired,pageSize:G.number.isRequired}),processRowUpdate:G.func,rowBuffer:G.number,rowCount:G.number,rowHeight:G.number,rowModesModel:G.object,rowPositionsDebounceMs:G.number,rows:G.arrayOf(G.object).isRequired,rowSelection:G.bool,rowSelectionModel:G.oneOfType([G.arrayOf(G.oneOfType([G.number,G.string]).isRequired),G.number,G.string]),rowSpacingType:G.oneOf(["border","margin"]),rowThreshold:G.number,scrollbarSize:G.number,showCellVerticalBorder:G.bool,showColumnVerticalBorder:G.bool,slotProps:G.object,slots:G.object,sortingMode:G.oneOf(["client","server"]),sortingOrder:G.arrayOf(G.oneOf(["asc","desc"])),sortModel:G.arrayOf(G.shape({field:G.string.isRequired,sort:G.oneOf(["asc","desc"])})),sx:G.oneOfType([G.arrayOf(G.oneOfType([G.func,G.object,G.bool])),G.func,G.object]),unstable_ignoreValueFormatterDuringExport:G.oneOfType([G.shape({clipboardExport:G.bool,csvExport:G.bool}),G.bool])};function Cx(e,t){return function(){return e.apply(t,arguments)}}const{toString:MM}=Object.prototype,{getPrototypeOf:ku}=Object,{iterator:ma,toStringTag:wx}=Symbol,ga=(e=>t=>{const n=MM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bn=e=>(e=e.toLowerCase(),t=>ga(t)===e),xa=e=>t=>typeof t===e,{isArray:Eo}=Array,ds=xa("undefined");function Ts(e){return e!==null&&!ds(e)&&e.constructor!==null&&!ds(e.constructor)&&zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jx=bn("ArrayBuffer");function RM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jx(e.buffer),t}const DM=xa("string"),zt=xa("function"),Sx=xa("number"),As=e=>e!==null&&typeof e=="object",FM=e=>e===!0||e===!1,ui=e=>{if(ga(e)!=="object")return!1;const t=ku(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wx in e)&&!(ma in e)},OM=e=>{if(!As(e)||Ts(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},LM=bn("Date"),_M=bn("File"),$M=bn("Blob"),NM=bn("FileList"),VM=e=>As(e)&&zt(e.pipe),BM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zt(e.append)&&((t=ga(e))==="formdata"||t==="object"&&zt(e.toString)&&e.toString()==="[object FormData]"))},HM=bn("URLSearchParams"),[zM,UM,GM,WM]=["ReadableStream","Request","Response","Headers"].map(bn),qM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ms(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),Eo(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{if(Ts(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(o=0;o<a;o++)l=i[o],t.call(null,e[l],l,e)}}function Px(e,t){if(Ts(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const Er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kx=e=>!ds(e)&&e!==Er;function ac(){const{caseless:e}=kx(this)&&this||{},t={},n=(o,s)=>{const i=e&&Px(t,s)||s;ui(t[i])&&ui(o)?t[i]=ac(t[i],o):ui(o)?t[i]=ac({},o):Eo(o)?t[i]=o.slice():t[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Ms(arguments[o],n);return t}const KM=(e,t,n,{allOwnKeys:o}={})=>(Ms(t,(s,i)=>{n&&zt(s)?e[i]=Cx(s,n):e[i]=s},{allOwnKeys:o}),e),QM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),XM=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},YM=(e,t,n,o)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!o||o(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&ku(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},JM=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},ZM=e=>{if(!e)return null;if(Eo(e))return e;let t=e.length;if(!Sx(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},eR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ku(Uint8Array)),tR=(e,t)=>{const o=(e&&e[ma]).call(e);let s;for(;(s=o.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},nR=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},rR=bn("HTMLFormElement"),oR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),af=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),sR=bn("RegExp"),Ix=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Ms(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(o[i]=a||s)}),Object.defineProperties(e,o)},iR=e=>{Ix(e,(t,n)=>{if(zt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(zt(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},aR=(e,t)=>{const n={},o=s=>{s.forEach(i=>{n[i]=!0})};return Eo(e)?o(e):o(String(e).split(t)),n},lR=()=>{},cR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function uR(e){return!!(e&&zt(e.append)&&e[wx]==="FormData"&&e[ma])}const dR=e=>{const t=new Array(10),n=(o,s)=>{if(As(o)){if(t.indexOf(o)>=0)return;if(Ts(o))return o;if(!("toJSON"in o)){t[s]=o;const i=Eo(o)?[]:{};return Ms(o,(a,l)=>{const u=n(a,s+1);!ds(u)&&(i[l]=u)}),t[s]=void 0,i}}return o};return n(e,0)},hR=bn("AsyncFunction"),fR=e=>e&&(As(e)||zt(e))&&zt(e.then)&&zt(e.catch),Ex=((e,t)=>e?setImmediate:t?((n,o)=>(Er.addEventListener("message",({source:s,data:i})=>{s===Er&&i===n&&o.length&&o.shift()()},!1),s=>{o.push(s),Er.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",zt(Er.postMessage)),pR=typeof queueMicrotask<"u"?queueMicrotask.bind(Er):typeof process<"u"&&process.nextTick||Ex,mR=e=>e!=null&&zt(e[ma]),q={isArray:Eo,isArrayBuffer:jx,isBuffer:Ts,isFormData:BM,isArrayBufferView:RM,isString:DM,isNumber:Sx,isBoolean:FM,isObject:As,isPlainObject:ui,isEmptyObject:OM,isReadableStream:zM,isRequest:UM,isResponse:GM,isHeaders:WM,isUndefined:ds,isDate:LM,isFile:_M,isBlob:$M,isRegExp:sR,isFunction:zt,isStream:VM,isURLSearchParams:HM,isTypedArray:eR,isFileList:NM,forEach:Ms,merge:ac,extend:KM,trim:qM,stripBOM:QM,inherits:XM,toFlatObject:YM,kindOf:ga,kindOfTest:bn,endsWith:JM,toArray:ZM,forEachEntry:tR,matchAll:nR,isHTMLForm:rR,hasOwnProperty:af,hasOwnProp:af,reduceDescriptors:Ix,freezeMethods:iR,toObjectSet:aR,toCamelCase:oR,noop:lR,toFiniteNumber:cR,findKey:Px,global:Er,isContextDefined:kx,isSpecCompliantForm:uR,toJSONObject:dR,isAsyncFn:hR,isThenable:fR,setImmediate:Ex,asap:pR,isIterable:mR};function Me(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Tx=Me.prototype,Ax={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ax[e]={value:e}});Object.defineProperties(Me,Ax);Object.defineProperty(Tx,"isAxiosError",{value:!0});Me.from=(e,t,n,o,s,i)=>{const a=Object.create(Tx);return q.toFlatObject(e,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),Me.call(a,e.message,t,n,o,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const gR=null;function lc(e){return q.isPlainObject(e)||q.isArray(e)}function Mx(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function lf(e,t,n){return e?e.concat(t).map(function(s,i){return s=Mx(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function xR(e){return q.isArray(e)&&!e.some(lc)}const yR=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function ya(e,t,n){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!q.isUndefined(b[g])});const o=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(q.isDate(m))return m.toISOString();if(q.isBoolean(m))return m.toString();if(!u&&q.isBlob(m))throw new Me("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(m)||q.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,b){let y=m;if(m&&!b&&typeof m=="object"){if(q.endsWith(g,"{}"))g=o?g:g.slice(0,-2),m=JSON.stringify(m);else if(q.isArray(m)&&xR(m)||(q.isFileList(m)||q.endsWith(g,"[]"))&&(y=q.toArray(m)))return g=Mx(g),y.forEach(function(C,k){!(q.isUndefined(C)||C===null)&&t.append(a===!0?lf([g],k,i):a===null?g:g+"[]",c(C))}),!1}return lc(m)?!0:(t.append(lf(b,g,i),c(m)),!1)}const h=[],p=Object.assign(yR,{defaultVisitor:d,convertValue:c,isVisitable:lc});function x(m,g){if(!q.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),q.forEach(m,function(y,v){(!(q.isUndefined(y)||y===null)&&s.call(t,y,q.isString(v)?v.trim():v,g,p))===!0&&x(y,g?g.concat(v):[v])}),h.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return x(e),t}function cf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Iu(e,t){this._pairs=[],e&&ya(e,this,t)}const Rx=Iu.prototype;Rx.append=function(t,n){this._pairs.push([t,n])};Rx.toString=function(t){const n=t?function(o){return t.call(this,o,cf)}:cf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dx(e,t,n){if(!t)return e;const o=n&&n.encode||bR;q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=q.isURLSearchParams(t)?t.toString():new Iu(t,n).toString(o),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class uf{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Fx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vR=typeof URLSearchParams<"u"?URLSearchParams:Iu,CR=typeof FormData<"u"?FormData:null,wR=typeof Blob<"u"?Blob:null,jR={isBrowser:!0,classes:{URLSearchParams:vR,FormData:CR,Blob:wR},protocols:["http","https","file","blob","url","data"]},Eu=typeof window<"u"&&typeof document<"u",cc=typeof navigator=="object"&&navigator||void 0,SR=Eu&&(!cc||["ReactNative","NativeScript","NS"].indexOf(cc.product)<0),PR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kR=Eu&&window.location.href||"http://localhost",IR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Eu,hasStandardBrowserEnv:SR,hasStandardBrowserWebWorkerEnv:PR,navigator:cc,origin:kR},Symbol.toStringTag,{value:"Module"})),Rt={...IR,...jR};function ER(e,t){return ya(e,new Rt.classes.URLSearchParams,{visitor:function(n,o,s,i){return Rt.isNode&&q.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function TR(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function AR(e){const t={},n=Object.keys(e);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],t[i]=e[i];return t}function Ox(e){function t(n,o,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=i>=n.length;return a=!a&&q.isArray(s)?s.length:a,u?(q.hasOwnProp(s,a)?s[a]=[s[a],o]:s[a]=o,!l):((!s[a]||!q.isObject(s[a]))&&(s[a]=[]),t(n,o,s[a],i)&&q.isArray(s[a])&&(s[a]=AR(s[a])),!l)}if(q.isFormData(e)&&q.isFunction(e.entries)){const n={};return q.forEachEntry(e,(o,s)=>{t(TR(o),s,n,0)}),n}return null}function MR(e,t,n){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Rs={transitional:Fx,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,i=q.isObject(t);if(i&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return s?JSON.stringify(Ox(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return ER(t,this.formSerializer).toString();if((l=q.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ya(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),MR(t)):t}],transformResponse:[function(t){const n=this.transitional||Rs.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(o&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Me.from(l,Me.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rt.classes.FormData,Blob:Rt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{Rs.headers[e]={}});const RR=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),DR=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),o=a.substring(s+1).trim(),!(!n||t[n]&&RR[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},df=Symbol("internals");function No(e){return e&&String(e).trim().toLowerCase()}function di(e){return e===!1||e==null?e:q.isArray(e)?e.map(di):String(e)}function FR(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const OR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function al(e,t,n,o,s){if(q.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!q.isString(t)){if(q.isString(o))return t.indexOf(o)!==-1;if(q.isRegExp(o))return o.test(t)}}function LR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function _R(e,t){const n=q.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,i,a){return this[o].call(this,t,s,i,a)},configurable:!0})})}let Ut=class{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function i(l,u,c){const d=No(u);if(!d)throw new Error("header name must be a non-empty string");const h=q.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||u]=di(l))}const a=(l,u)=>q.forEach(l,(c,d)=>i(c,d,u));if(q.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(q.isString(t)&&(t=t.trim())&&!OR(t))a(DR(t),n);else if(q.isObject(t)&&q.isIterable(t)){let l={},u,c;for(const d of t){if(!q.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?q.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&i(n,t,o);return this}get(t,n){if(t=No(t),t){const o=q.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return FR(s);if(q.isFunction(n))return n.call(this,s,o);if(q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=No(t),t){const o=q.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||al(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function i(a){if(a=No(a),a){const l=q.findKey(o,a);l&&(!n||al(o,o[l],l,n))&&(delete o[l],s=!0)}}return q.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const i=n[o];(!t||al(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,o={};return q.forEach(this,(s,i)=>{const a=q.findKey(o,i);if(a){n[a]=di(s),delete n[i];return}const l=t?LR(i):String(i).trim();l!==i&&delete n[i],n[l]=di(s),o[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return q.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&q.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[df]=this[df]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=No(a);o[l]||(_R(s,a),o[l]=!0)}return q.isArray(t)?t.forEach(i):i(t),this}};Ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(Ut.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});q.freezeMethods(Ut);function ll(e,t){const n=this||Rs,o=t||n,s=Ut.from(o.headers);let i=o.data;return q.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Lx(e){return!!(e&&e.__CANCEL__)}function To(e,t,n){Me.call(this,e??"canceled",Me.ERR_CANCELED,t,n),this.name="CanceledError"}q.inherits(To,Me,{__CANCEL__:!0});function _x(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Me("Request failed with status code "+n.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function $R(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function NR(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),d=o[i];a||(a=c),n[s]=u,o[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),c-a<t)return;const x=d&&c-d;return x?Math.round(p*1e3/x):void 0}}function VR(e,t){let n=0,o=1e3/t,s,i;const a=(c,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const d=Date.now(),h=d-n;h>=o?a(c,d):(s=c,i||(i=setTimeout(()=>{i=null,a(s)},o-h)))},()=>s&&a(s)]}const Ni=(e,t,n=3)=>{let o=0;const s=NR(50,250);return VR(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,u=a-o,c=s(u),d=a<=l;o=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-a)/c:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},hf=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},ff=e=>(...t)=>q.asap(()=>e(...t)),BR=Rt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Rt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Rt.origin),Rt.navigator&&/(msie|trident)/i.test(Rt.navigator.userAgent)):()=>!0,HR=Rt.hasStandardBrowserEnv?{write(e,t,n,o,s,i){const a=[e+"="+encodeURIComponent(t)];q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),q.isString(o)&&a.push("path="+o),q.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function UR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $x(e,t,n){let o=!zR(t);return e&&(o||n==!1)?UR(e,t):t}const pf=e=>e instanceof Ut?{...e}:e;function Vr(e,t){t=t||{};const n={};function o(c,d,h,p){return q.isPlainObject(c)&&q.isPlainObject(d)?q.merge.call({caseless:p},c,d):q.isPlainObject(d)?q.merge({},d):q.isArray(d)?d.slice():d}function s(c,d,h,p){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c,h,p)}else return o(c,d,h,p)}function i(c,d){if(!q.isUndefined(d))return o(void 0,d)}function a(c,d){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c)}else return o(void 0,d)}function l(c,d,h){if(h in t)return o(c,d);if(h in e)return o(void 0,c)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,d,h)=>s(pf(c),pf(d),h,!0)};return q.forEach(Object.keys({...e,...t}),function(d){const h=u[d]||s,p=h(e[d],t[d],d);q.isUndefined(p)&&h!==l||(n[d]=p)}),n}const Nx=e=>{const t=Vr({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=Ut.from(a),t.url=Dx($x(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(q.isFormData(n)){if(Rt.hasStandardBrowserEnv||Rt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[c,...d]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...d].join("; "))}}if(Rt.hasStandardBrowserEnv&&(o&&q.isFunction(o)&&(o=o(t)),o||o!==!1&&BR(t.url))){const c=s&&i&&HR.read(i);c&&a.set(s,c)}return t},GR=typeof XMLHttpRequest<"u",WR=GR&&function(e){return new Promise(function(n,o){const s=Nx(e);let i=s.data;const a=Ut.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=s,d,h,p,x,m;function g(){x&&x(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const C=Ut.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:C,config:e,request:b};_x(function(I){n(I),g()},function(I){o(I),g()},F),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(o(new Me("Request aborted",Me.ECONNABORTED,e,b)),b=null)},b.onerror=function(){o(new Me("Network Error",Me.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||Fx;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),o(new Me(k,F.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,e,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&q.forEach(a.toJSON(),function(k,F){b.setRequestHeader(F,k)}),q.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),c&&([p,m]=Ni(c,!0),b.addEventListener("progress",p)),u&&b.upload&&([h,x]=Ni(u),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(d=C=>{b&&(o(!C||C.type?new To(null,e,b):C),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const v=$R(s.url);if(v&&Rt.protocols.indexOf(v)===-1){o(new Me("Unsupported protocol "+v+":",Me.ERR_BAD_REQUEST,e));return}b.send(i||null)})},qR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,s;const i=function(c){if(!s){s=!0,l();const d=c instanceof Error?c:this.reason;o.abort(d instanceof Me?d:new To(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new Me(`timeout ${t} of ms exceeded`,Me.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:u}=o;return u.unsubscribe=()=>q.asap(l),u}},KR=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,s;for(;o<n;)s=o+t,yield e.slice(o,s),o=s},QR=async function*(e,t){for await(const n of XR(e))yield*KR(n,t)},XR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},mf=(e,t,n,o)=>{const s=QR(e,t);let i=0,a,l=u=>{a||(a=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await s.next();if(c){l(),u.close();return}let h=d.byteLength;if(n){let p=i+=h;n(p)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},ba=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Vx=ba&&typeof ReadableStream=="function",YR=ba&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Bx=(e,...t)=>{try{return!!e(...t)}catch{return!1}},JR=Vx&&Bx(()=>{let e=!1;const t=new Request(Rt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),gf=64*1024,uc=Vx&&Bx(()=>q.isReadableStream(new Response("").body)),Vi={stream:uc&&(e=>e.body)};ba&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Vi[t]&&(Vi[t]=q.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Me(`Response type '${t}' is not supported`,Me.ERR_NOT_SUPPORT,o)})})})(new Response);const ZR=async e=>{if(e==null)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e))return(await new Request(Rt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(q.isArrayBufferView(e)||q.isArrayBuffer(e))return e.byteLength;if(q.isURLSearchParams(e)&&(e=e+""),q.isString(e))return(await YR(e)).byteLength},eD=async(e,t)=>{const n=q.toFiniteNumber(e.getContentLength());return n??ZR(t)},tD=ba&&(async e=>{let{url:t,method:n,data:o,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Nx(e);c=c?(c+"").toLowerCase():"text";let x=qR([s,i&&i.toAbortSignal()],a),m;const g=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let b;try{if(u&&JR&&n!=="get"&&n!=="head"&&(b=await eD(d,o))!==0){let F=new Request(t,{method:"POST",body:o,duplex:"half"}),T;if(q.isFormData(o)&&(T=F.headers.get("content-type"))&&d.setContentType(T),F.body){const[I,D]=hf(b,Ni(ff(u)));o=mf(F.body,gf,I,D)}}q.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;m=new Request(t,{...p,signal:x,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:y?h:void 0});let v=await fetch(m,p);const C=uc&&(c==="stream"||c==="response");if(uc&&(l||C&&g)){const F={};["status","statusText","headers"].forEach(V=>{F[V]=v[V]});const T=q.toFiniteNumber(v.headers.get("content-length")),[I,D]=l&&hf(T,Ni(ff(l),!0))||[];v=new Response(mf(v.body,gf,I,()=>{D&&D(),g&&g()}),F)}c=c||"text";let k=await Vi[q.findKey(Vi,c)||"text"](v,e);return!C&&g&&g(),await new Promise((F,T)=>{_x(F,T,{data:k,headers:Ut.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:m})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,e,m),{cause:y.cause||y}):Me.from(y,y&&y.code,e,m)}}),dc={http:gR,xhr:WR,fetch:tD};q.forEach(dc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const xf=e=>`- ${e}`,nD=e=>q.isFunction(e)||e===null||e===!1,Hx={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let i=0;i<t;i++){n=e[i];let a;if(o=n,!nD(n)&&(o=dc[(a=String(n)).toLowerCase()],o===void 0))throw new Me(`Unknown adapter '${a}'`);if(o)break;s[a||"#"+i]=o}if(!o){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(xf).join(`
`):" "+xf(i[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o},adapters:dc};function cl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new To(null,e)}function yf(e){return cl(e),e.headers=Ut.from(e.headers),e.data=ll.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Hx.getAdapter(e.adapter||Rs.adapter)(e).then(function(o){return cl(e),o.data=ll.call(e,e.transformResponse,o),o.headers=Ut.from(o.headers),o},function(o){return Lx(o)||(cl(e),o&&o.response&&(o.response.data=ll.call(e,e.transformResponse,o.response),o.response.headers=Ut.from(o.response.headers))),Promise.reject(o)})}const zx="1.11.0",va={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{va[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const bf={};va.transitional=function(t,n,o){function s(i,a){return"[Axios v"+zx+"] Transitional option '"+i+"'"+a+(o?". "+o:"")}return(i,a,l)=>{if(t===!1)throw new Me(s(a," has been removed"+(n?" in "+n:"")),Me.ERR_DEPRECATED);return n&&!bf[a]&&(bf[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};va.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function rD(e,t,n){if(typeof e!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const i=o[s],a=t[i];if(a){const l=e[i],u=l===void 0||a(l,i,e);if(u!==!0)throw new Me("option "+i+" must be "+u,Me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Me("Unknown option "+i,Me.ERR_BAD_OPTION)}}const hi={assertOptions:rD,validators:va},Cn=hi.validators;let _r=class{constructor(t){this.defaults=t||{},this.interceptors={request:new uf,response:new uf}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vr(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:i}=n;o!==void 0&&hi.assertOptions(o,{silentJSONParsing:Cn.transitional(Cn.boolean),forcedJSONParsing:Cn.transitional(Cn.boolean),clarifyTimeoutError:Cn.transitional(Cn.boolean)},!1),s!=null&&(q.isFunction(s)?n.paramsSerializer={serialize:s}:hi.assertOptions(s,{encode:Cn.function,serialize:Cn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),hi.assertOptions(n,{baseUrl:Cn.spelling("baseURL"),withXsrfToken:Cn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&q.merge(i.common,i[n.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Ut.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(u=u&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,p;if(!u){const m=[yf.bind(this),void 0];for(m.unshift(...l),m.push(...c),p=m.length,d=Promise.resolve(n);h<p;)d=d.then(m[h++],m[h++]);return d}p=l.length;let x=n;for(h=0;h<p;){const m=l[h++],g=l[h++];try{x=m(x)}catch(b){g.call(this,b);break}}try{d=yf.call(this,x)}catch(m){return Promise.reject(m)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(t){t=Vr(this.defaults,t);const n=$x(t.baseURL,t.url,t.allowAbsoluteUrls);return Dx(n,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){_r.prototype[t]=function(n,o){return this.request(Vr(o||{},{method:t,url:n,data:(o||{}).data}))}});q.forEach(["post","put","patch"],function(t){function n(o){return function(i,a,l){return this.request(Vr(l||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}_r.prototype[t]=n(),_r.prototype[t+"Form"]=n(!0)});let oD=class Ux{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{o.subscribe(l),i=l}).then(s);return a.cancel=function(){o.unsubscribe(i)},a},t(function(i,a,l){o.reason||(o.reason=new To(i,a,l),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ux(function(s){t=s}),cancel:t}}};function sD(e){return function(n){return e.apply(null,n)}}function iD(e){return q.isObject(e)&&e.isAxiosError===!0}const hc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hc).forEach(([e,t])=>{hc[t]=e});function Gx(e){const t=new _r(e),n=Cx(_r.prototype.request,t);return q.extend(n,_r.prototype,t,{allOwnKeys:!0}),q.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Gx(Vr(e,s))},n}const qe=Gx(Rs);qe.Axios=_r;qe.CanceledError=To;qe.CancelToken=oD;qe.isCancel=Lx;qe.VERSION=zx;qe.toFormData=ya;qe.AxiosError=Me;qe.Cancel=qe.CanceledError;qe.all=function(t){return Promise.all(t)};qe.spread=sD;qe.isAxiosError=iD;qe.mergeConfig=Vr;qe.AxiosHeaders=Ut;qe.formToJSON=e=>Ox(q.isHTMLForm(e)?new FormData(e):e);qe.getAdapter=Hx.getAdapter;qe.HttpStatusCode=hc;qe.default=qe;const{Axios:VF,AxiosError:BF,CanceledError:HF,isCancel:zF,CancelToken:UF,VERSION:GF,all:WF,Cancel:qF,isAxiosError:KF,spread:QF,toFormData:XF,AxiosHeaders:YF,HttpStatusCode:JF,formToJSON:ZF,getAdapter:eO,mergeConfig:tO}=qe,aD=()=>{const{enqueueSnackbar:e}=Jt(),[t,n]=f.useState([]),[o,s]=f.useState(!0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),h=[{field:"name",headerName:"Device Name",flex:1,minWidth:150},{field:"ip",headerName:"IP Address",width:150},{field:"type",headerName:"Type",width:120,renderCell:y=>r.jsx(we,{label:y.value,size:"small",variant:"outlined"})},{field:"status",headerName:"Status",width:120,renderCell:y=>{const v=()=>{switch(y.value){case"active":return r.jsx(Ne,{color:"success",fontSize:"small"});case"inactive":return r.jsx(no,{color:"error",fontSize:"small"});default:return r.jsx(Tn,{color:"warning",fontSize:"small"})}};return r.jsxs(M,{display:"flex",alignItems:"center",children:[v(),r.jsx(A,{sx:{ml:1},variant:"body2",children:y.value})]})}},{field:"lastSeen",headerName:"Last Seen",width:180},{field:"emailsSent",headerName:"Emails Sent",width:120,type:"number"},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:y=>r.jsxs(M,{children:[r.jsx(Pe,{size:"small",onClick:()=>m(y.row),color:"primary",children:r.jsx(Kf,{fontSize:"small"})}),r.jsx(Pe,{size:"small",onClick:()=>g(y.row.id),color:"error",children:r.jsx(Kt,{fontSize:"small"})})]})}];f.useEffect(()=>{p()},[]);const p=async()=>{try{const y=await qe.get("/api/devices");n(y.data)}catch{e("Failed to fetch devices",{variant:"error"})}finally{s(!1)}},x=()=>{u(null),d({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),a(!0)},m=y=>{u(y),d({name:y.name,ip:y.ip,type:y.type,auth:y.auth||"none",username:y.username||"",password:""}),a(!0)},g=async y=>{if(window.confirm("Are you sure you want to delete this device?"))try{await qe.delete(`/api/devices/${y}`),e("Device deleted successfully",{variant:"success"}),p()}catch{e("Failed to delete device",{variant:"error"})}},b=async()=>{try{l?(await qe.put(`/api/devices/${l.id}`,c),e("Device updated successfully",{variant:"success"})):(await qe.post("/api/devices",c),e("Device added successfully",{variant:"success"})),a(!1),p()}catch{e("Failed to save device",{variant:"error"})}};return r.jsxs(M,{sx:{p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(A,{variant:"h4",component:"h1",children:"Device Management"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:x,children:"Add Device"})]}),r.jsx(fe,{elevation:3,children:r.jsx(vx,{rows:t,columns:h,pageSize:10,rowsPerPageOptions:[10,25,50],loading:o,autoHeight:!0,disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-cell:hover":{cursor:"pointer"}}})}),r.jsxs(lt,{open:i,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:l?"Edit Device":"Add New Device"}),r.jsx(ut,{children:r.jsxs(M,{sx:{pt:2},children:[r.jsx(Re,{fullWidth:!0,label:"Device Name",value:c.name,onChange:y=>d({...c,name:y.target.value}),margin:"normal",required:!0}),r.jsx(Re,{fullWidth:!0,label:"IP Address",value:c.ip,onChange:y=>d({...c,ip:y.target.value}),margin:"normal",required:!0,helperText:"Enter IP address or CIDR range (e.g., 192.168.1.0/24)"}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Device Type"}),r.jsxs(gt,{value:c.type,label:"Device Type",onChange:y=>d({...c,type:y.target.value}),children:[r.jsx(oe,{value:"printer",children:"Printer"}),r.jsx(oe,{value:"scanner",children:"Scanner"}),r.jsx(oe,{value:"nas",children:"NAS System"}),r.jsx(oe,{value:"monitoring",children:"Monitoring Tool"}),r.jsx(oe,{value:"camera",children:"Security Camera"}),r.jsx(oe,{value:"other",children:"Other"})]})]}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication"}),r.jsxs(gt,{value:c.auth,label:"Authentication",onChange:y=>d({...c,auth:y.target.value}),children:[r.jsx(oe,{value:"none",children:"None (IP Whitelist)"}),r.jsx(oe,{value:"basic",children:"Basic Auth"}),r.jsx(oe,{value:"static",children:"Static User"})]})]}),c.auth!=="none"&&r.jsxs(r.Fragment,{children:[r.jsx(Re,{fullWidth:!0,label:"Username",value:c.username,onChange:y=>d({...c,username:y.target.value}),margin:"normal"}),r.jsx(Re,{fullWidth:!0,label:"Password",type:"password",value:c.password,onChange:y=>d({...c,password:y.target.value}),margin:"normal",helperText:l?"Leave blank to keep existing password":""})]})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>a(!1),children:"Cancel"}),r.jsx(Y,{onClick:b,variant:"contained",children:l?"Update":"Add"})]})]})]})},lD=()=>{const{enqueueSnackbar:e}=Jt(),{socket:t,connected:n}=ou(),[o,s]=f.useState([]),[i,a]=f.useState(!0),[l,u]=f.useState("running"),[c,d]=f.useState([]),[h,p]=f.useState({pending:0,processing:0,failed:0,completed:0}),x=[{field:"status",headerName:"Status",width:100,renderCell:C=>{const k=()=>{switch(C.value){case"pending":return r.jsx(yc,{color:"info"});case"processing":return r.jsx(We,{size:20});case"completed":return r.jsx(Ne,{color:"success"});case"failed":return r.jsx(vy,{color:"error"});default:return null}};return r.jsx(it,{title:C.value,children:k()})}},{field:"messageId",headerName:"Message ID",width:150},{field:"from",headerName:"From",flex:1,minWidth:200},{field:"to",headerName:"To",flex:1,minWidth:200},{field:"subject",headerName:"Subject",flex:1,minWidth:250},{field:"size",headerName:"Size",width:100,valueFormatter:C=>{const k=C.value;return k<1024?`${k} B`:k<1024*1024?`${(k/1024).toFixed(2)} KB`:`${(k/(1024*1024)).toFixed(2)} MB`}},{field:"attempts",headerName:"Attempts",width:100,renderCell:C=>r.jsx(we,{label:`${C.value}/3`,size:"small",color:C.value>=3?"error":C.value>1?"warning":"default"})},{field:"queuedAt",headerName:"Queued At",width:180},{field:"nextRetry",headerName:"Next Retry",width:180},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:C=>r.jsxs(M,{children:[r.jsx(it,{title:"Retry Now",children:r.jsx(Pe,{size:"small",onClick:()=>g(C.row.id),color:"primary",disabled:C.row.status==="processing",children:r.jsx(wl,{fontSize:"small"})})}),r.jsx(it,{title:"Delete",children:r.jsx(Pe,{size:"small",onClick:()=>b(C.row.id),color:"error",children:r.jsx(Kt,{fontSize:"small"})})})]})}];f.useEffect(()=>{if(m(),t&&n)return t.on("queue:update",C=>{s(C.items),p(C.stats)}),()=>{t.off("queue:update")}},[t,n]);const m=async()=>{try{const C=await qe.get("/api/queue");s(C.data.items),p(C.data.stats),u(C.data.status)}catch{e("Failed to fetch queue items",{variant:"error"})}finally{a(!1)}},g=async C=>{try{await qe.post(`/api/queue/${C}/retry`),e("Message queued for retry",{variant:"success"}),m()}catch{e("Failed to retry message",{variant:"error"})}},b=async C=>{if(window.confirm("Are you sure you want to delete this message from the queue?"))try{await qe.delete(`/api/queue/${C}`),e("Message deleted from queue",{variant:"success"}),m()}catch{e("Failed to delete message",{variant:"error"})}},y=async C=>{if(c.length===0){e("No items selected",{variant:"warning"});return}try{await qe.post("/api/queue/bulk",{action:C,ids:c}),e(`Bulk ${C} completed`,{variant:"success"}),d([]),m()}catch{e(`Failed to ${C} items`,{variant:"error"})}},v=async()=>{try{const C=l==="running"?"paused":"running";await qe.post("/api/queue/control",{action:C}),u(C),e(`Queue ${C}`,{variant:"success"})}catch{e("Failed to change queue status",{variant:"error"})}};return r.jsxs(M,{sx:{p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(A,{variant:"h4",component:"h1",children:"Email Queue"}),r.jsxs(M,{children:[r.jsx(Y,{variant:"outlined",startIcon:l==="running"?r.jsx(yy,{}):r.jsx(by,{}),onClick:v,sx:{mr:1},children:l==="running"?"Pause Queue":"Resume Queue"}),r.jsx(Pe,{onClick:m,children:r.jsx(gn,{})})]})]}),r.jsxs(M,{display:"flex",gap:2,mb:3,children:[r.jsxs(fe,{sx:{p:2,flex:1},children:[r.jsx(A,{variant:"body2",color:"textSecondary",children:"Pending"}),r.jsx(A,{variant:"h4",color:"info.main",children:h.pending})]}),r.jsxs(fe,{sx:{p:2,flex:1},children:[r.jsx(A,{variant:"body2",color:"textSecondary",children:"Processing"}),r.jsx(A,{variant:"h4",color:"warning.main",children:h.processing})]}),r.jsxs(fe,{sx:{p:2,flex:1},children:[r.jsx(A,{variant:"body2",color:"textSecondary",children:"Failed"}),r.jsx(A,{variant:"h4",color:"error.main",children:h.failed})]}),r.jsxs(fe,{sx:{p:2,flex:1},children:[r.jsx(A,{variant:"body2",color:"textSecondary",children:"Completed (24h)"}),r.jsx(A,{variant:"h4",color:"success.main",children:h.completed})]})]}),l==="paused"&&r.jsx(xe,{severity:"warning",sx:{mb:2},children:"Queue processing is currently paused"}),c.length>0&&r.jsxs(M,{mb:2,children:[r.jsxs(Y,{variant:"contained",color:"primary",startIcon:r.jsx(wl,{}),onClick:()=>y("retry"),sx:{mr:1},children:["Retry Selected (",c.length,")"]}),r.jsxs(Y,{variant:"contained",color:"error",startIcon:r.jsx(Kt,{}),onClick:()=>y("delete"),children:["Delete Selected (",c.length,")"]})]}),r.jsx(fe,{elevation:3,children:r.jsx(vx,{rows:o,columns:x,pageSize:10,rowsPerPageOptions:[10,25,50],loading:i,autoHeight:!0,checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:C=>{d(C)},selectionModel:c,sx:{"& .MuiDataGrid-row":{"&.Mui-selected":{backgroundColor:"action.selected"}}}})})]})},Vo=Ht(ze);Ht(M);const cD=Ht(fe),uD=({value:e,size:t=120,thickness:n=8,color:o="primary",children:s})=>{const i=Yt(),[a,l]=f.useState(!0);f.useEffect(()=>{const g=setTimeout(()=>l(!1),2e3);return()=>clearTimeout(g)},[]);const c=e>=80?{primary:["#10b981","#34d399","#6ee7b7"],secondary:["#22c55e","#4ade80","#86efac"],glow:"rgba(52, 211, 153, 0.6)",background:"rgba(16, 185, 129, 0.08)",particles:"#10b981"}:e>=60?{primary:["#f59e0b","#fbbf24","#fcd34d"],secondary:["#f97316","#fb923c","#fdba74"],glow:"rgba(251, 191, 36, 0.6)",background:"rgba(245, 158, 11, 0.08)",particles:"#f59e0b"}:{primary:["#ef4444","#f87171","#fca5a5"],secondary:["#dc2626","#f87171","#fbbf24"],glow:"rgba(239, 68, 68, 0.6)",background:"rgba(220, 38, 38, 0.08)",particles:"#ef4444"},d=`health-gradient-${Math.random().toString(36).substr(2,9)}`,h=`health-glow-${Math.random().toString(36).substr(2,9)}`,p=`health-pattern-${Math.random().toString(36).substr(2,9)}`,x=(t-n)/2,m=x-n;return r.jsxs(M,{position:"relative",display:"inline-flex",sx:{transform:a?"scale(0.9)":"scale(1)",transition:"transform 1s cubic-bezier(0.4, 0, 0.2, 1)"},children:[r.jsx(M,{sx:{position:"absolute",width:t+40,height:t+40,left:-20,top:-20,borderRadius:"50%",overflow:"hidden","&::before, &::after":{content:'""',position:"absolute",width:"4px",height:"4px",borderRadius:"50%",background:c.particles,animation:"float 6s infinite ease-in-out"},"&::before":{left:"20%",animationDelay:"0s"},"&::after":{right:"20%",animationDelay:"3s"},"@keyframes float":{"0%, 100%":{transform:"translateY(0) translateX(0)",opacity:0},"10%":{opacity:1},"90%":{opacity:1},"50%":{transform:"translateY(-20px) translateX(10px)"}}}}),r.jsxs("svg",{width:t,height:t,style:{transform:"rotate(-90deg)"},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:c.primary[0],children:r.jsx("animate",{attributeName:"stop-color",values:`${c.primary[0]};${c.primary[1]};${c.primary[0]}`,dur:"3s",repeatCount:"indefinite"})}),r.jsx("stop",{offset:"50%",stopColor:c.primary[1],children:r.jsx("animate",{attributeName:"stop-color",values:`${c.primary[1]};${c.primary[2]};${c.primary[1]}`,dur:"3s",repeatCount:"indefinite"})}),r.jsx("stop",{offset:"100%",stopColor:c.primary[2],children:r.jsx("animate",{attributeName:"stop-color",values:`${c.primary[2]};${c.primary[0]};${c.primary[2]}`,dur:"3s",repeatCount:"indefinite"})})]}),r.jsxs("filter",{id:h,children:[r.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),r.jsx("pattern",{id:p,x:"0",y:"0",width:"4",height:"4",patternUnits:"userSpaceOnUse",children:r.jsx("circle",{cx:"2",cy:"2",r:"0.5",fill:he(c.primary[1],.3)})})]}),r.jsx("circle",{cx:t/2,cy:t/2,r:x+4,fill:"none",stroke:he(c.primary[1],.1),strokeWidth:"1",strokeDasharray:"2 4",opacity:"0.5",children:r.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:`0 ${t/2} ${t/2}`,to:`360 ${t/2} ${t/2}`,dur:"60s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:t/2,cy:t/2,r:x,fill:"none",stroke:i.palette.mode==="dark"?he(i.palette.grey[800],.3):he(i.palette.grey[200],.5),strokeWidth:n}),r.jsx("circle",{cx:t/2,cy:t/2,r:x,fill:"none",stroke:`url(#${p})`,strokeWidth:n,opacity:"0.3"}),r.jsx("circle",{cx:t/2,cy:t/2,r:x,fill:"none",stroke:he(c.secondary[1],.2),strokeWidth:n+2,strokeLinecap:"round",strokeDasharray:`${2*Math.PI*x}`,strokeDashoffset:`${2*Math.PI*x*(1-e/100)}`,style:{transition:"stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1)",filter:"blur(4px)"}}),r.jsx("circle",{cx:t/2,cy:t/2,r:x,fill:"none",stroke:`url(#${d})`,strokeWidth:n,strokeLinecap:"round",strokeDasharray:`${2*Math.PI*x}`,strokeDashoffset:`${2*Math.PI*x*(1-e/100)}`,filter:`url(#${h})`,style:{transition:"stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1)",filter:`drop-shadow(0 0 ${n}px ${c.glow})`}}),r.jsxs("circle",{cx:t/2+x*Math.cos(e/100*2*Math.PI-Math.PI/2),cy:t/2+x*Math.sin(e/100*2*Math.PI-Math.PI/2),r:"4",fill:c.primary[0],style:{filter:`drop-shadow(0 0 8px ${c.glow})`,transition:"all 1.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:[r.jsx("animate",{attributeName:"r",values:"4;6;4",dur:"2s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"2s",repeatCount:"indefinite"})]}),r.jsx("circle",{cx:t/2,cy:t/2,r:m-4,fill:"none",stroke:he(c.primary[1],.1),strokeWidth:"0.5",strokeDasharray:"1 3",children:r.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:`360 ${t/2} ${t/2}`,to:`0 ${t/2} ${t/2}`,dur:"45s",repeatCount:"indefinite"})})]}),r.jsx(M,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:r.jsx(M,{sx:{width:m*2-8,height:m*2-8,borderRadius:"50%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:i.palette.mode==="dark"?`radial-gradient(circle at 30% 30%, ${he(c.primary[0],.15)}, transparent 50%),
                 radial-gradient(circle at 70% 70%, ${he(c.secondary[0],.1)}, transparent 50%),
                 radial-gradient(circle, ${c.background}, transparent)`:`radial-gradient(circle at 30% 30%, ${he(c.primary[0],.08)}, transparent 50%),
                 radial-gradient(circle at 70% 70%, ${he(c.secondary[0],.05)}, transparent 50%),
                 ${c.background}`,backdropFilter:"blur(10px)",boxShadow:`inset 0 0 20px ${he(c.primary[1],.1)}`,"&::before":{content:'""',position:"absolute",inset:-1,borderRadius:"50%",padding:1,background:`linear-gradient(135deg, ${he(c.primary[0],.3)}, transparent)`,mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor"}},children:s})}),[0,120,240].map((g,b)=>r.jsx(M,{sx:{position:"absolute",width:"100%",height:"100%",animation:`orbit ${10+b*2}s linear infinite`,"@keyframes orbit":{from:{transform:`rotate(${g}deg)`},to:{transform:`rotate(${g+360}deg)`}}},children:r.jsx(M,{sx:{position:"absolute",width:3,height:3,borderRadius:"50%",background:c.particles,top:0,left:"50%",transform:"translateX(-50%)",boxShadow:`0 0 6px ${c.glow}`,opacity:.6+b*.2}})},b))]})},vf=({status:e,size:t="medium"})=>{const n=Yt(),o=()=>{switch(e){case"online":case"running":case"active":return n.palette.success.main;case"offline":case"stopped":case"error":return n.palette.error.main;case"warning":case"degraded":return n.palette.warning.main;default:return n.palette.grey[500]}},i={small:8,medium:12,large:16}[t]||12;return r.jsx(M,{position:"relative",display:"inline-flex",alignItems:"center",children:r.jsx(M,{sx:{width:i,height:i,borderRadius:"50%",bgcolor:o(),position:"relative","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",bgcolor:o(),animation:e==="online"||e==="running"?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${he(o(),.7)}`},"70%":{transform:"scale(1)",boxShadow:`0 0 0 10px ${he(o(),0)}`},"100%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${he(o(),0)}`}}}}})})},dD=()=>{const{apiRequest:e}=Wt(),{enqueueSnackbar:t}=Jt(),n=Yt(),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),[c,d]=f.useState(!1),[h,p]=f.useState("cards"),[x,m]=f.useState({system:!0,resources:!0,network:!0,security:!0}),[g,b]=f.useState(!1),[y,v]=f.useState(3e4),[C,k]=f.useState("overview");f.useEffect(()=>{F()},[]),f.useEffect(()=>{if(g){const P=setInterval(F,y);return()=>clearInterval(P)}},[g,y]);const F=async()=>{o||d(!0);try{const P=await e("/api/system/info");if(!P.ok)throw new Error("Failed to fetch system information");const w=await P.json();a(w),u(null)}catch(P){console.error("Error fetching system info:",P),u("Failed to load system information"),t("Failed to load system information",{variant:"error"})}finally{s(!1),d(!1)}},T=P=>{navigator.clipboard.writeText(P),t("Copied to clipboard",{variant:"success"})},I=P=>{if(P===0)return"0 Bytes";const w=1024,E=["Bytes","KB","MB","GB","TB"],R=Math.floor(Math.log(P)/Math.log(w));return parseFloat((P/Math.pow(w,R)).toFixed(2))+" "+E[R]},D=P=>{const w=Math.floor(P/86400),E=Math.floor(P%86400/3600),R=Math.floor(P%3600/60);return`${w}d ${E}h ${R}m`},V=()=>{if(!i)return 0;let P=100;if(i.memory){const w=i.memory.used/i.memory.total*100;w>80?P-=20:w>60&&(P-=10)}if(i.disk){const w=i.disk.used/i.disk.total*100;w>80?P-=20:w>60&&(P-=10)}return i.services&&Object.values(i.services).forEach(w=>{w!=="active"&&w!=="running"&&(P-=15)}),Math.max(0,P)},O=P=>P>=80?"success":P>=60?"warning":"error",S=P=>{m(w=>({...w,[P]:!w[P]}))};if(o)return r.jsx(M,{children:r.jsx(Q,{container:!0,spacing:3,children:[1,2,3,4].map(P=>r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(Gf,{variant:"rectangular",height:200,sx:{borderRadius:2}})},P))})});if(l&&!i)return r.jsxs(xe,{severity:"error",sx:{borderRadius:2},action:r.jsx(Y,{color:"inherit",size:"small",onClick:F,children:"Retry"}),children:[r.jsx(Ze,{children:"Error"}),l]});const $=V();return r.jsxs(M,{children:[r.jsx(cD,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${he(n.palette.primary.dark,.1)} 0%, ${he(n.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${he(n.palette.primary.light,.1)} 0%, ${he(n.palette.secondary.light,.1)} 100%)`},children:r.jsxs(Q,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Ui,{badgeContent:r.jsx(vf,{status:"online",size:"small"}),overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(an,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.secondary.main} 100%)`},children:r.jsx(Ar,{fontSize:"large"})})}),r.jsxs(M,{children:[r.jsx(A,{variant:"h5",fontWeight:"bold",children:"System Configuration"}),r.jsxs(A,{variant:"body2",color:"text.secondary",children:[i?.hostname||"Loading...","  Last updated: ",new Date().toLocaleTimeString()]})]})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(M,{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,children:[r.jsx(uD,{value:$,size:180,thickness:14,color:O($),children:r.jsxs(M,{sx:{textAlign:"center",position:"relative"},children:[r.jsx(M,{sx:{mb:0,position:"relative",height:32},children:$>=80?r.jsxs(M,{sx:{position:"relative"},children:[r.jsx(Nu,{sx:{fontSize:32,color:"#10b981",position:"absolute",left:"50%",transform:"translateX(-50%)",filter:"drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3))",animation:"bounceIcon 3s ease-in-out infinite","@keyframes bounceIcon":{"0%, 100%":{transform:"translateX(-50%) translateY(0) scale(1)"},"50%":{transform:"translateX(-50%) translateY(-2px) scale(1.1)"}}}}),r.jsx(Nu,{sx:{fontSize:32,color:"#10b981",opacity:.3,position:"absolute",left:"50%",transform:"translateX(-50%)",filter:"blur(3px)",animation:"pulseIcon 3s ease-in-out infinite","@keyframes pulseIcon":{"0%, 100%":{transform:"translateX(-50%) scale(1)",opacity:0},"50%":{transform:"translateX(-50%) scale(1.3)",opacity:.3}}}})]}):$>=60?r.jsx(M,{sx:{position:"relative"},children:r.jsx(Tn,{sx:{fontSize:32,color:"#f59e0b",position:"absolute",left:"50%",transform:"translateX(-50%)",filter:"drop-shadow(0 2px 4px rgba(245, 158, 11, 0.3))",animation:"pulseWarn 2s ease-in-out infinite","@keyframes pulseWarn":{"0%, 100%":{transform:"translateX(-50%) scale(1)",opacity:1},"50%":{transform:"translateX(-50%) scale(1.05)",opacity:.8}}}})}):r.jsx(M,{sx:{position:"relative"},children:r.jsx(xn,{sx:{fontSize:32,color:"#ef4444",position:"absolute",left:"50%",transform:"translateX(-50%)",filter:"drop-shadow(0 2px 4px rgba(239, 68, 68, 0.3))",animation:"shakeIcon 2s ease-in-out infinite","@keyframes shakeIcon":{"0%, 100%":{transform:"translateX(-50%) rotate(0deg)"},"10%":{transform:"translateX(-52%) rotate(-5deg)"},"20%":{transform:"translateX(-48%) rotate(5deg)"},"30%":{transform:"translateX(-52%) rotate(-5deg)"},"40%":{transform:"translateX(-48%) rotate(5deg)"},"50%":{transform:"translateX(-50%) rotate(0deg)"}}}})})}),r.jsx(M,{sx:{position:"relative",mt:1},children:r.jsxs(A,{variant:"h2",fontWeight:"900",sx:{background:$>=80?"linear-gradient(135deg, #10b981 0%, #34d399 50%, #6ee7b7 100%)":$>=60?"linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #fcd34d 100%)":"linear-gradient(135deg, #ef4444 0%, #f87171 50%, #fca5a5 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",lineHeight:1,letterSpacing:"-2px",fontSize:"3.5rem",fontFamily:'"Inter", "Roboto", sans-serif',position:"relative","&::after":{content:'""',position:"absolute",inset:0,background:"inherit",backgroundClip:"text",WebkitBackgroundClip:"text",filter:"blur(10px)",opacity:.3,zIndex:-1}},children:[$,r.jsx(A,{component:"span",sx:{fontSize:"0.5em",background:"inherit",backgroundClip:"text",WebkitBackgroundClip:"text",fontWeight:700,ml:.2},children:"%"})]})}),r.jsx(M,{sx:{position:"relative",mt:.5},children:r.jsx(A,{variant:"caption",sx:{color:$>=80?"#10b981":$>=60?"#f59e0b":"#ef4444",fontSize:"0.75rem",letterSpacing:1,textTransform:"uppercase",display:"inline-block",fontWeight:600,position:"relative","&::after":{content:'""',position:"absolute",bottom:-2,left:0,right:0,height:1,background:$>=80?"linear-gradient(90deg, transparent, #10b981, transparent)":$>=60?"linear-gradient(90deg, transparent, #f59e0b, transparent)":"linear-gradient(90deg, transparent, #ef4444, transparent)",animation:"slideUnderline 3s ease-in-out infinite","@keyframes slideUnderline":{"0%, 100%":{transform:"translateX(-100%)",opacity:0},"50%":{transform:"translateX(0)",opacity:1}}}},children:$>=80?"Excellent":$>=60?"Good":"Needs Attention"})})]})}),r.jsxs(Vn,{direction:"row",spacing:1,sx:{position:"relative",zIndex:10},children:[r.jsxs(Hi,{value:h,exclusive:!0,onChange:(P,w)=>{w!==null&&(p(w),t(`Switched to ${w} view`,{variant:"info"}))},size:"small",sx:{"& .MuiToggleButton-root":{border:`1px solid ${he(n.palette.primary.main,.3)}`,"&:hover":{background:he(n.palette.primary.main,.1)},"&.Mui-selected":{background:he(n.palette.primary.main,.2),borderColor:n.palette.primary.main,"&:hover":{background:he(n.palette.primary.main,.3)}}}},children:[r.jsx(_t,{value:"cards","aria-label":"Cards view",children:r.jsx(it,{title:"Cards View",children:r.jsx(jl,{})})}),r.jsx(_t,{value:"list","aria-label":"List view",children:r.jsx(it,{title:"List View",children:r.jsx(Cy,{})})}),r.jsx(_t,{value:"compact","aria-label":"Compact view",children:r.jsx(it,{title:"Compact View",children:r.jsx(Vu,{})})})]}),r.jsx(it,{title:g?"Auto-refresh ON (30s)":"Auto-refresh OFF",children:r.jsx(Pe,{onClick:()=>{b(!g),t(g?"Auto-refresh disabled":"Auto-refresh enabled (30s interval)",{variant:"info"})},color:g?"primary":"default",sx:{background:g?he(n.palette.primary.main,.2):he(n.palette.primary.main,.05),border:`1px solid ${he(n.palette.primary.main,g?.5:.2)}`,"&:hover":{background:he(n.palette.primary.main,g?.3:.1),borderColor:n.palette.primary.main}},children:r.jsx(wy,{})})}),r.jsx(it,{title:"Refresh Now",children:r.jsx(Pe,{onClick:()=>{F(),t("Refreshing system information...",{variant:"info"})},disabled:c,sx:{background:he(n.palette.primary.main,.05),border:`1px solid ${he(n.palette.primary.main,.2)}`,"&:hover":{background:he(n.palette.primary.main,.1),borderColor:n.palette.primary.main,transform:"rotate(180deg)",transition:"all 0.3s ease"},"&:disabled":{opacity:.5}},children:c?r.jsx(We,{size:24}):r.jsx(gn,{})})})]})]})})]})}),r.jsx(Q,{container:!0,spacing:2,sx:{mb:3},children:[{label:"Uptime",value:i?.uptime?D(i.uptime):"N/A",icon:r.jsx(yc,{}),color:"primary"},{label:"CPU Cores",value:i?.cpu?.cores||"N/A",icon:r.jsx(Bu,{}),color:"secondary"},{label:"Memory",value:i?.memory?`${Math.round(i.memory.used/i.memory.total*100)}%`:"N/A",icon:r.jsx(Hu,{}),color:i?.memory&&i.memory.used/i.memory.total>.8?"error":"success"},{label:"Disk",value:i?.disk?`${Math.round(i.disk.used/i.disk.total*100)}%`:"N/A",icon:r.jsx(fi,{}),color:i?.disk&&i.disk.used/i.disk.total>.8?"error":"success"}].map((P,w)=>r.jsx(Q,{item:!0,xs:6,md:3,children:r.jsx(Vo,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:w*.1},whileHover:{scale:1.02},sx:{p:2,borderRadius:2,background:n.palette.mode==="dark"?he(n.palette.background.paper,.8):"white",border:`1px solid ${he(n.palette[P.color].main,.2)}`},children:r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:P.label}),r.jsx(A,{variant:"h6",fontWeight:"bold",children:P.value})]}),r.jsx(an,{sx:{width:40,height:40,bgcolor:he(n.palette[P.color].main,.1),color:n.palette[P.color].main},children:P.icon})]})})},w))}),r.jsxs(Q,{container:!0,spacing:h==="compact"?1:h==="list"?2:3,children:[r.jsx(Q,{item:!0,xs:12,lg:h==="list"?12:6,children:r.jsx(Vo,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},elevation:3,sx:{borderRadius:3,overflow:"visible"},children:r.jsxs(Oe,{sx:{p:h==="compact"?2:3},children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:h==="compact"?1:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(an,{sx:{bgcolor:"primary.main",width:h==="compact"?28:32,height:h==="compact"?28:32},children:r.jsx(Ar,{fontSize:h==="compact"?"extra-small":"small"})}),r.jsx(A,{variant:h==="compact"?"subtitle1":"h6",fontWeight:"bold",children:"System Overview"})]}),r.jsx(Pe,{size:"small",onClick:()=>S("system"),children:r.jsx(rr,{sx:{transform:x.system?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Sn,{in:x.system,children:r.jsx(Vn,{spacing:2,children:[{label:"Hostname",value:i?.hostname,icon:r.jsx(jy,{})},{label:"Platform",value:i?.platform,icon:r.jsx(Sy,{})},{label:"OS Version",value:i?.osVersion,icon:r.jsx(Vu,{})},{label:"Kernel",value:i?.kernel,icon:r.jsx(Py,{})},{label:"Architecture",value:i?.arch,icon:r.jsx(ky,{})},{label:"Node Version",value:i?.nodeVersion,icon:r.jsx(Iy,{})}].map((P,w)=>r.jsx(fe,{sx:{p:2,borderRadius:2,background:he(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{background:he(n.palette.primary.main,.05),borderColor:n.palette.primary.main}},children:r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(an,{sx:{width:28,height:28,bgcolor:"primary.light"},children:P.icon}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:P.label}),r.jsx(A,{variant:"body1",fontWeight:"medium",children:P.value||"Unknown"})]})]}),P.value&&r.jsx(Pe,{size:"small",onClick:()=>T(P.value),children:r.jsx(Bt,{fontSize:"small"})})]})},w))})})]})})}),r.jsx(Q,{item:!0,xs:12,lg:h==="list"?12:6,children:r.jsx(Vo,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},elevation:3,sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(an,{sx:{bgcolor:"secondary.main",width:32,height:32},children:r.jsx(Ey,{fontSize:"small"})}),r.jsx(A,{variant:"h6",fontWeight:"bold",children:"Resource Usage"})]}),r.jsx(Pe,{size:"small",onClick:()=>S("resources"),children:r.jsx(rr,{sx:{transform:x.resources?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsxs(Sn,{in:x.resources,children:[r.jsxs(M,{mb:3,children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Hu,{fontSize:"small",color:"primary"}),r.jsx(A,{variant:"subtitle2",children:"Memory Usage"})]}),r.jsx(A,{variant:"body2",fontWeight:"bold",children:i?.memory?`${I(i.memory.used)} / ${I(i.memory.total)}`:"Unknown"})]}),r.jsxs(M,{sx:{position:"relative"},children:[r.jsx(Qt,{variant:"determinate",value:i?.memory?i.memory.used/i.memory.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:he(n.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.memory&&i.memory.used/i.memory.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.primary.main} 0%, ${n.palette.primary.dark} 100%)`}}}),r.jsx(M,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"0.7rem",fontWeight:"bold"},children:i?.memory?`${Math.round(i.memory.used/i.memory.total*100)}%`:""})]}),i?.memory?.free&&r.jsxs(A,{variant:"caption",color:"text.secondary",children:[I(i.memory.free)," available"]})]}),r.jsxs(M,{mb:3,children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(fi,{fontSize:"small",color:"secondary"}),r.jsx(A,{variant:"subtitle2",children:"Disk Usage"})]}),r.jsx(A,{variant:"body2",fontWeight:"bold",children:i?.disk?`${I(i.disk.used)} / ${I(i.disk.total)}`:"Unknown"})]}),r.jsxs(M,{sx:{position:"relative"},children:[r.jsx(Qt,{variant:"determinate",value:i?.disk?i.disk.used/i.disk.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:he(n.palette.secondary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.disk&&i.disk.used/i.disk.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.secondary.main} 0%, ${n.palette.secondary.dark} 100%)`}}}),r.jsx(M,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"0.7rem",fontWeight:"bold"},children:i?.disk?`${Math.round(i.disk.used/i.disk.total*100)}%`:""})]}),i?.disk?.free&&r.jsxs(A,{variant:"caption",color:"text.secondary",children:[I(i.disk.free)," available"]})]}),r.jsx(fe,{sx:{p:2,borderRadius:2,bgcolor:he(n.palette.background.default,.5)},children:r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:6,children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Bu,{fontSize:"small"}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"CPU Cores"}),r.jsx(A,{variant:"h6",fontWeight:"bold",children:i?.cpu?.cores||"N/A"})]})]})}),r.jsx(Q,{item:!0,xs:6,children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Bf,{fontSize:"small"}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Load Average"}),r.jsx(A,{variant:"body2",fontWeight:"medium",children:i?.loadAvg?.map(P=>P.toFixed(2)).join(" ")||"N/A"})]})]})})]})})]})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Vo,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},elevation:3,sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(an,{sx:{bgcolor:"success.main",width:32,height:32},children:r.jsx(Ty,{fontSize:"small"})}),r.jsx(A,{variant:"h6",fontWeight:"bold",children:"Services & Network"})]}),r.jsx(Pe,{size:"small",onClick:()=>S("network"),children:r.jsx(rr,{sx:{transform:x.network?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Sn,{in:x.network,children:r.jsxs(Q,{container:!0,spacing:3,children:[r.jsxs(Q,{item:!0,xs:12,md:6,children:[r.jsxs(A,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ay,{fontSize:"small"}),"Active Services"]}),r.jsx(Vn,{spacing:1,children:[{name:"SMTP Server",port:i?.ports?.smtp||"25",status:i?.services?.smtp||"active",icon:r.jsx(mo,{})},{name:"API Server",port:i?.ports?.api||"3001",status:i?.services?.api||"active",icon:r.jsx(My,{})},{name:"Dashboard",port:i?.ports?.dashboard||"3001",status:i?.services?.dashboard||"active",icon:r.jsx(jl,{})},{name:"PM2 Process",port:"N/A",status:i?.pm2?.status||"unknown",icon:r.jsx(bc,{})}].map((P,w)=>r.jsx(fe,{sx:{p:2,borderRadius:2,border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{transform:"translateX(4px)",borderColor:n.palette.primary.main}},children:r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(an,{sx:{width:32,height:32,bgcolor:he(n.palette.primary.main,.1)},children:P.icon}),r.jsxs(M,{children:[r.jsx(A,{variant:"body2",fontWeight:"medium",children:P.name}),r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Port: ",P.port]})]})]}),r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(vf,{status:P.status}),r.jsx(we,{label:P.status,size:"small",color:P.status==="active"||P.status==="running"?"success":P.status==="stopped"||P.status==="error"?"error":"warning",variant:"outlined"})]})]})},w))})]}),r.jsxs(Q,{item:!0,xs:12,md:6,children:[r.jsxs(A,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(uo,{fontSize:"small"}),"Network Information"]}),r.jsxs(Vn,{spacing:2,children:[r.jsxs(fe,{sx:{p:2,borderRadius:2,bgcolor:he(n.palette.info.main,.05)},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"IP Addresses"}),r.jsx(M,{mt:1,children:i?.network?.ips?.map((P,w)=>r.jsx(we,{label:P,size:"small",sx:{mr:1,mb:1,fontFamily:"monospace"},icon:r.jsx(Ry,{}),onClick:()=>T(P)},w))||r.jsx(A,{variant:"body2",children:"No IP addresses found"})})]}),r.jsx(fe,{sx:{p:2,borderRadius:2},children:r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:6,children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Dy,{fontSize:"small",color:"primary"}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Uptime"}),r.jsx(A,{variant:"body2",fontWeight:"bold",children:i?.pm2?.uptime||"Unknown"})]})]})}),r.jsx(Q,{item:!0,xs:6,children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Fy,{fontSize:"small",color:"secondary"}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Restarts"}),r.jsx(A,{variant:"body2",fontWeight:"bold",children:i?.pm2?.restarts||"0"})]})]})})]})})]})]})]})})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Vo,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},elevation:3,sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(an,{sx:{bgcolor:"warning.main",width:32,height:32},children:r.jsx(vc,{fontSize:"small"})}),r.jsx(A,{variant:"h6",fontWeight:"bold",children:"Security & Configuration"})]}),r.jsx(Pe,{size:"small",onClick:()=>S("security"),children:r.jsx(rr,{sx:{transform:x.security?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Sn,{in:x.security,children:r.jsx(Q,{container:!0,spacing:3,children:[{title:"TLS Certificate",value:i?.tls?.status||"Not configured",icon:r.jsx(ar,{}),status:i?.tls?.valid?"success":"warning",badge:i?.tls?.daysUntilExpiry?`${i.tls.daysUntilExpiry} days`:null},{title:"IP Whitelisting",value:i?.security?.ipWhitelist?"Enabled":"Disabled",icon:r.jsx(Oy,{}),status:i?.security?.ipWhitelist?"success":"info",badge:i?.security?.ipWhitelistCount||"0"},{title:"MFA Status",value:i?.security?.mfa?"Enabled":"Disabled",icon:r.jsx(go,{}),status:i?.security?.mfa?"success":"warning",badge:null},{title:"Exchange Online",value:i?.exchange?.configured?"Configured":"Not configured",icon:r.jsx(ho,{}),status:i?.exchange?.configured?"success":"info",badge:i?.exchange?.accounts?`${i.exchange.accounts} accounts`:null},{title:"Queue Status",value:`${i?.queue?.count||0} items`,icon:r.jsx(Ly,{}),status:i?.queue?.count>100?"warning":"success",badge:i?.queue?.size?I(i.queue.size):null},{title:"Log Files",value:i?.logs?.size?I(i.logs.size):"Unknown",icon:r.jsx(_y,{}),status:i?.logs?.size>1e9?"warning":"success",badge:i?.logs?.count?`${i.logs.count} files`:null}].map((P,w)=>r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsx(fe,{sx:{p:2,borderRadius:2,border:`1px solid ${he(n.palette[P.status].main,.3)}`,background:he(n.palette[P.status].main,.05),transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${he(n.palette[P.status].main,.2)}`}},children:r.jsxs(M,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(an,{sx:{width:40,height:40,bgcolor:he(n.palette[P.status].main,.1),color:n.palette[P.status].main},children:P.icon}),r.jsxs(M,{children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:P.title}),r.jsx(A,{variant:"body2",fontWeight:"bold",children:P.value})]})]}),P.badge&&r.jsx(we,{label:P.badge,size:"small",color:P.status,variant:"outlined"})]})})},w))})})]})})})]}),r.jsxs($y,{ariaLabel:"Quick Actions",sx:{position:"fixed",bottom:16,right:16},icon:r.jsx(By,{icon:r.jsx(fs,{}),openIcon:r.jsx(Hy,{})}),children:[r.jsx(Sa,{icon:r.jsx(gn,{}),tooltipTitle:"Refresh",onClick:F}),r.jsx(Sa,{icon:r.jsx(Ny,{}),tooltipTitle:"System Logs",onClick:()=>t("Opening system logs...",{variant:"info"})}),r.jsx(Sa,{icon:r.jsx(Vy,{}),tooltipTitle:"Debug Info",onClick:()=>t("Debug mode activated",{variant:"info"})})]})]})},hs=f.createContext({});function hD(e){return hr("MuiTimeline",e)}Qn("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function xr(e){return e==="alternate-reverse"?"positionAlternateReverse":`position${An(e)}`}const fD=["position","className"],pD=e=>{const{position:t,classes:n}=e,o={root:["root",t&&xr(t)]};return Ee(o,hD,n)},mD=Xe("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.position&&t[xr(n.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),gD=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimeline"}),{position:s="right",className:i}=o,a=le(o,fD),l=j({},o,{position:s}),u=pD(l),c=f.useMemo(()=>({position:s}),[s]);return r.jsx(hs.Provider,{value:c,children:r.jsx(mD,j({className:$e(u.root,i),ownerState:l,ref:n},a))})});function xD(e){return hr("MuiTimelineConnector",e)}Qn("MuiTimelineConnector",["root"]);const yD=["className"],bD=e=>{const{classes:t}=e;return Ee({root:["root"]},xD,t)},vD=Xe("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.grey[400],flexGrow:1})),CD=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineConnector"}),{className:s}=o,i=le(o,yD),a=o,l=bD(a);return r.jsx(vD,j({className:$e(l.root,s),ownerState:a,ref:n},i))});function wD(e){return hr("MuiTimelineContent",e)}const jD=Qn("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),SD=["className"],PD=e=>{const{position:t,classes:n}=e,o={root:["root",xr(t)]};return Ee(o,wD,n)},kD=Xe(A,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({flex:1,padding:"6px 16px",textAlign:"left"},e.position==="left"&&{textAlign:"right"})),ID=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineContent"}),{className:s}=o,i=le(o,SD),{position:a}=f.useContext(hs),l=j({},o,{position:a||"right"}),u=PD(l);return r.jsx(kD,j({component:"div",className:$e(u.root,s),ownerState:l,ref:n},i))});function ED(e){return hr("MuiTimelineDot",e)}Qn("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const TD=["className","color","variant"],AD=e=>{const{color:t,variant:n,classes:o}=e,s={root:["root",n,t!=="inherit"&&`${n}${An(t)}`]};return Ee(s,ED,o)},MD=Xe("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.color!=="inherit"&&`${n.variant}${An(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>j({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0"},e.variant==="filled"&&j({borderColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main})),e.variant==="outlined"&&j({boxShadow:"none",backgroundColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[e.color].main})))),RD=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineDot"}),{className:s,color:i="grey",variant:a="filled"}=o,l=le(o,TD),u=j({},o,{color:i,variant:a}),c=AD(u);return r.jsx(MD,j({className:$e(c.root,s),ownerState:u,ref:n},l))});function DD(e){return hr("MuiTimelineOppositeContent",e)}const FD=Qn("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),OD=["className"],LD=e=>{const{position:t,classes:n}=e,o={root:["root",xr(t)]};return Ee(o,DD,n)},_D=Xe(A,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1},e.position==="left"&&{textAlign:"left"})),Wx=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineOppositeContent"}),{className:s}=o,i=le(o,OD),{position:a}=f.useContext(hs),l=j({},o,{position:a||"left"}),u=LD(l);return r.jsx(_D,j({component:"div",className:$e(u.root,s),ownerState:l,ref:n},i))});Wx.muiName="TimelineOppositeContent";function $D(e){return hr("MuiTimelineItem",e)}Qn("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const ND=["position","className"],VD=e=>{const{position:t,classes:n,hasOppositeContent:o}=e,s={root:["root",xr(t),!o&&"missingOppositeContent"]};return Ee(s,$D,n)},BD=Xe("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({listStyle:"none",display:"flex",position:"relative",minHeight:70},e.position==="left"&&{flexDirection:"row-reverse"},(e.position==="alternate"||e.position==="alternate-reverse")&&{[`&:nth-of-type(${e.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${jD.root}`]:{textAlign:"right"},[`& .${FD.root}`]:{textAlign:"left"}}},!e.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}})),HD=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineItem"}),{position:s,className:i}=o,a=le(o,ND),{position:l}=f.useContext(hs);let u=!1;f.Children.forEach(o.children,p=>{zy(p,["TimelineOppositeContent"])&&(u=!0)});const c=j({},o,{position:s||l||"right",hasOppositeContent:u}),d=VD(c),h=f.useMemo(()=>({position:c.position}),[c.position]);return r.jsx(hs.Provider,{value:h,children:r.jsx(BD,j({className:$e(d.root,i),ownerState:c,ref:n},a))})});function zD(e){return hr("MuiTimelineSeparator",e)}Qn("MuiTimelineSeparator",["root"]);const UD=["className"],GD=e=>{const{classes:t}=e;return Ee({root:["root"]},zD,t)},WD=Xe("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),qD=f.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineSeparator"}),{className:s}=o,i=le(o,UD),a=o,l=GD(a);return r.jsx(WD,j({className:$e(l.root,s),ownerState:a,ref:n},i))}),Cf=Ht(ze),KD=Ht(M),QD=()=>{const e=Yt(),{enqueueSnackbar:t}=Jt(),[n,o]=f.useState(!1),[s,i]=f.useState(null),[a,l]=f.useState(!1),[u,c]=f.useState(!1),[d,h]=f.useState(!1),[p,x]=f.useState(!0),[m,g]=f.useState(!1),[b,y]=f.useState(!1),[v,C]=f.useState([]),[k,F]=f.useState(!1),[T,I]=f.useState(0),[D,V]=f.useState(null),[O,S]=f.useState(null),[$,P]=f.useState(null),[w,E]=f.useState({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),[R,N]=f.useState({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"});f.useEffect(()=>{_(),L()},[]);const _=async()=>{o(!0);try{const ae=await(await fetch("/api/certificates/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();i(ae),y(ae.autoRenewEnabled||!1)}catch{t("Failed to fetch certificate status",{variant:"error"})}finally{o(!1)}},L=async()=>{try{const ae=await(await fetch("/api/certificates/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();C(ae.history||[])}catch{console.error("Failed to fetch certificate history")}},B=async()=>{if(!D||!O){t("Certificate and key files are required",{variant:"warning"});return}const K=new FormData;K.append("certificate",D),K.append("key",O),$&&K.append("chain",$),o(!0);try{const ae=await fetch("/api/certificates/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:K}),X=await ae.json();if(ae.ok)t("Certificate uploaded successfully",{variant:"success"}),l(!1),V(null),S(null),P(null),_(),L();else throw new Error(X.error)}catch(ae){t(`Upload failed: ${ae.message}`,{variant:"error"})}finally{o(!1)}},z=async()=>{if(!w.commonName){t("Common Name is required",{variant:"warning"});return}o(!0);try{const K=await fetch("/api/certificates/generate-self-signed",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(w)}),ae=await K.json();if(K.ok)t("Self-signed certificate generated successfully",{variant:"success"}),c(!1),E({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),_(),L();else throw new Error(ae.error)}catch(K){t(`Generation failed: ${K.message}`,{variant:"error"})}finally{o(!1)}},U=async()=>{if(!R.domain||!R.email){t("Domain and email are required",{variant:"warning"});return}o(!0);try{const K=await fetch("/api/certificates/generate-letsencrypt",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(R)}),ae=await K.json();if(K.ok)t(ae.message,{variant:"success"}),ae.renewCommand&&t("Auto-renewal configured",{variant:"info"}),h(!1),N({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"}),_(),L();else throw new Error(ae.error||"Generation failed")}catch(K){t(`Let's Encrypt failed: ${K.message}`,{variant:"error"})}finally{o(!1)}},J=async()=>{try{(await fetch("/api/certificates/auto-renew",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!b})})).ok&&(y(!b),t(`Auto-renewal ${b?"disabled":"enabled"}`,{variant:"success"}))}catch{t("Failed to update auto-renewal",{variant:"error"})}},te=s?.hasCertificate?s.daysUntilExpiry<0?{status:"expired",color:"error",icon:r.jsx(xn,{})}:s.daysUntilExpiry<7?{status:"critical",color:"error",icon:r.jsx(Xy,{})}:s.daysUntilExpiry<30?{status:"warning",color:"warning",icon:r.jsx(Tn,{})}:s.daysUntilExpiry<60?{status:"attention",color:"info",icon:r.jsx(Yy,{})}:{status:"healthy",color:"success",icon:r.jsx(Ne,{})}:{status:"missing",color:"default",icon:r.jsx(ns,{})},ve=K=>{navigator.clipboard.writeText(K),t("Copied to clipboard",{variant:"success"})},W=K=>K?new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return r.jsxs(M,{sx:{width:"100%"},children:[r.jsx(Cf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{mb:3,background:e.palette.mode==="dark"?`linear-gradient(135deg, ${he(e.palette.primary.dark,.1)} 0%, ${he(e.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${he(e.palette.primary.light,.1)} 0%, ${he(e.palette.secondary.light,.1)} 100%)`,borderRadius:3,overflow:"visible"},children:r.jsx(Oe,{sx:{p:4},children:r.jsxs(Q,{container:!0,spacing:3,children:[r.jsxs(Q,{item:!0,xs:12,md:8,children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:3,children:[r.jsx(Ui,{badgeContent:te.status==="healthy"?r.jsx(Ne,{fontSize:"small"}):null,color:te.color,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(M,{sx:{width:64,height:64,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.mode==="dark"?`linear-gradient(135deg, ${e.palette.primary.dark} 0%, ${e.palette.secondary.dark} 100%)`:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.secondary.main} 100%)`,color:"white",mr:2},children:te.icon})}),r.jsxs(M,{flex:1,children:[r.jsx(A,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"TLS Certificate Status"}),r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(we,{label:s?.hasCertificate?"Certificate Installed":"No Certificate",color:te.color,size:"small",icon:s?.hasCertificate?r.jsx(go,{}):r.jsx(ns,{})}),s?.isSelfSigned&&r.jsx(we,{label:"Self-Signed",color:"warning",size:"small",variant:"outlined"}),s?.isLetsEncrypt&&r.jsx(we,{label:"Let's Encrypt",color:"success",size:"small",icon:r.jsx(zu,{})})]})]}),r.jsx(it,{title:"Refresh Status",children:r.jsx(Pe,{onClick:_,disabled:n,sx:{background:he(e.palette.primary.main,.1),"&:hover":{background:he(e.palette.primary.main,.2)}},children:n?r.jsx(We,{size:24}):r.jsx(gn,{})})})]}),n&&r.jsx(Qt,{sx:{mb:2,borderRadius:1}}),s?.hasCertificate&&r.jsx(Km,{children:r.jsxs(KD,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsxs(fe,{sx:{p:2,borderRadius:2,bgcolor:he(e.palette.background.paper,.8)},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Uu,{sx:{mr:1,color:"primary.main"}}),r.jsx(A,{variant:"subtitle2",color:"textSecondary",children:"Common Name"})]}),r.jsx(A,{variant:"body1",fontWeight:"medium",children:s.subject||"Unknown"})]})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsxs(fe,{sx:{p:2,borderRadius:2,bgcolor:he(e.palette.background.paper,.8)},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(zu,{sx:{mr:1,color:"primary.main"}}),r.jsx(A,{variant:"subtitle2",color:"textSecondary",children:"Issuer"})]}),r.jsx(A,{variant:"body1",fontWeight:"medium",children:s.issuer||"Unknown"})]})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsxs(fe,{sx:{p:2,borderRadius:2,bgcolor:he(e.palette.background.paper,.8)},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Uy,{sx:{mr:1,color:"primary.main"}}),r.jsx(A,{variant:"subtitle2",color:"textSecondary",children:"Valid From"})]}),r.jsx(A,{variant:"body1",fontWeight:"medium",children:W(s.validFrom)})]})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsxs(fe,{sx:{p:2,borderRadius:2,bgcolor:he(e.palette.background.paper,.8),border:te.status!=="healthy"?`2px solid ${e.palette[te.color].main}`:"none"},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(yc,{sx:{mr:1,color:te.color==="default"?"primary.main":`${te.color}.main`}}),r.jsx(A,{variant:"subtitle2",color:"textSecondary",children:"Expires"})]}),r.jsx(A,{variant:"body1",fontWeight:"medium",children:W(s.validTo)}),r.jsx(A,{variant:"caption",color:`${te.color}.main`,children:s.daysUntilExpiry>0?`${s.daysUntilExpiry} days remaining`:"Expired"})]})})]}),r.jsxs(Gy,{expanded:p,onChange:()=>x(!p),sx:{mt:2,borderRadius:2,"&:before":{display:"none"}},children:[r.jsx(Wy,{expandIcon:r.jsx(rr,{}),children:r.jsx(A,{children:"Advanced Certificate Details"})}),r.jsx(qy,{children:r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Qf,{})}),r.jsx(se,{primary:"Serial Number",secondary:s.serialNumber||"N/A"}),r.jsx(un,{children:r.jsx(Pe,{size:"small",onClick:()=>ve(s.serialNumber),children:r.jsx(Bt,{fontSize:"small"})})})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(ar,{})}),r.jsx(se,{primary:"Signature Algorithm",secondary:s.signatureAlgorithm||"N/A"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(vc,{})}),r.jsx(se,{primary:"Key Size",secondary:`${s.keySize||"Unknown"} bits`})]})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Uu,{})}),r.jsx(se,{primary:"Alternative Names",secondary:s.altNames?.join(", ")||"None"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Fn,{})}),r.jsx(se,{primary:"Fingerprint (SHA-256)",secondary:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(A,{variant:"caption",sx:{fontFamily:"monospace",display:m?"block":"none"},children:s.fingerprint}),!m&&r.jsx(A,{variant:"caption",children:""}),r.jsx(Pe,{size:"small",onClick:()=>g(!m),sx:{ml:1},children:m?r.jsx(mc,{fontSize:"small"}):r.jsx(gc,{fontSize:"small"})})]})})]})]})})]})})]})]})}),!s?.hasCertificate&&r.jsxs(xe,{severity:"warning",sx:{borderRadius:2},children:[r.jsx(Ze,{children:"No Certificate Installed"}),"Your SMTP relay is running without TLS encryption. Upload or generate a certificate to secure email communications."]})]}),r.jsx(Q,{item:!0,xs:12,md:4,children:r.jsxs(fe,{sx:{p:3,borderRadius:2,height:"100%"},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),r.jsxs(M,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(Y,{fullWidth:!0,variant:"contained",startIcon:r.jsx(ho,{}),onClick:()=>h(!0),sx:{background:"linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)",color:"black",fontWeight:"bold"},children:"Get Let's Encrypt Cert"}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Mr,{}),onClick:()=>l(!0),children:"Upload Certificate"}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Ys,{}),onClick:()=>c(!0),children:"Generate Self-Signed"}),s?.hasCertificate&&r.jsxs(r.Fragment,{children:[r.jsx(St,{}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Ky,{}),onClick:()=>window.open("/api/certificates/download/certificate","_blank"),children:"Download Certificate"}),r.jsx(hn,{control:r.jsx(jn,{checked:b,onChange:J,color:"primary"}),label:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Qy,{sx:{mr:1}}),"Auto-Renewal"]})})]})]})]})})]})})}),v.length>0&&r.jsx(Cf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},elevation:3,sx:{mb:3,borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(A,{variant:"h6",children:"Certificate History"}),r.jsx(Pe,{onClick:()=>F(!k),children:r.jsx(Xf,{})})]}),r.jsx(Sn,{in:k,children:r.jsx(gD,{position:"alternate",children:v.slice(0,5).map((K,ae)=>r.jsxs(HD,{children:[r.jsx(Wx,{color:"textSecondary",children:W(K.date)}),r.jsxs(qD,{children:[r.jsx(RD,{color:K.type==="installed"?"success":"warning",children:K.type==="installed"?r.jsx(Ne,{}):r.jsx(Tn,{})}),ae<v.length-1&&r.jsx(CD,{})]}),r.jsxs(ID,{children:[r.jsx(A,{variant:"subtitle2",children:K.action}),r.jsx(A,{variant:"caption",color:"textSecondary",children:K.details})]})]},ae))})})]})}),r.jsxs(lt,{open:a,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:Pa,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Mr,{sx:{mr:1}}),"Upload TLS Certificate"]})}),r.jsx(ut,{children:r.jsxs(M,{sx:{mt:2,display:"flex",flexDirection:"column",gap:3},children:[r.jsxs(M,{children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Certificate File (.pem, .crt) *"}),r.jsx(ka,{type:"file",onChange:K=>V(K.target.files[0]),inputProps:{accept:".pem,.crt"},fullWidth:!0})]}),r.jsxs(M,{children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Private Key File (.pem, .key) *"}),r.jsx(ka,{type:"file",onChange:K=>S(K.target.files[0]),inputProps:{accept:".pem,.key"},fullWidth:!0})]}),r.jsxs(M,{children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Certificate Chain (optional)"}),r.jsx(ka,{type:"file",onChange:K=>P(K.target.files[0]),inputProps:{accept:".pem"},fullWidth:!0})]}),r.jsx(xe,{severity:"info",children:"Files will be validated before installation. Ensure your private key matches the certificate."})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>l(!1),children:"Cancel"}),r.jsx(Y,{onClick:B,variant:"contained",disabled:n||!D||!O,startIcon:n?r.jsx(We,{size:20}):r.jsx(Mr,{}),children:"Upload & Install"})]})]}),r.jsxs(lt,{open:u,onClose:()=>c(!1),maxWidth:"md",fullWidth:!0,TransitionComponent:Pa,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Ys,{sx:{mr:1}}),"Generate Self-Signed Certificate"]})}),r.jsx(ut,{children:r.jsxs(Hr,{activeStep:T,orientation:"vertical",sx:{mt:2},children:[r.jsxs(zn,{children:[r.jsx(Un,{children:"Basic Information"}),r.jsxs(Ia,{children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,children:r.jsx(Re,{label:"Common Name (CN) *",value:w.commonName,onChange:K=>E({...w,commonName:K.target.value}),fullWidth:!0,helperText:"e.g., smtp-relay.yourdomain.com"})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Re,{label:"Country (C)",value:w.country,onChange:K=>E({...w,country:K.target.value}),fullWidth:!0,inputProps:{maxLength:2},helperText:"Two-letter code (US, DE, CH)"})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Re,{label:"State/Province (ST)",value:w.state,onChange:K=>E({...w,state:K.target.value}),fullWidth:!0})})]}),r.jsx(M,{mt:2,children:r.jsx(Y,{onClick:()=>I(1),variant:"contained",children:"Next"})})]})]}),r.jsxs(zn,{children:[r.jsx(Un,{children:"Organization Details"}),r.jsxs(Ia,{children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Re,{label:"Organization (O)",value:w.organization,onChange:K=>E({...w,organization:K.target.value}),fullWidth:!0})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Re,{label:"Organizational Unit (OU)",value:w.organizationalUnit,onChange:K=>E({...w,organizationalUnit:K.target.value}),fullWidth:!0})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Re,{label:"Email Address",type:"email",value:w.emailAddress,onChange:K=>E({...w,emailAddress:K.target.value}),fullWidth:!0})})]}),r.jsxs(M,{mt:2,display:"flex",gap:1,children:[r.jsx(Y,{onClick:()=>I(0),children:"Back"}),r.jsx(Y,{onClick:()=>I(2),variant:"contained",children:"Next"})]})]})]}),r.jsxs(zn,{children:[r.jsx(Un,{children:"Certificate Options"}),r.jsxs(Ia,{children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Re,{label:"Validity (Days)",type:"number",value:w.days,onChange:K=>E({...w,days:parseInt(K.target.value)}),fullWidth:!0,helperText:"Recommended: 365 days"})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsxs(dt,{fullWidth:!0,children:[r.jsx(vt,{children:"Key Size"}),r.jsxs(gt,{value:w.keySize,onChange:K=>E({...w,keySize:K.target.value}),label:"Key Size",children:[r.jsx(oe,{value:2048,children:"2048 bits (Recommended)"}),r.jsx(oe,{value:4096,children:"4096 bits (More Secure)"})]})]})})]}),r.jsxs(M,{mt:2,display:"flex",gap:1,children:[r.jsx(Y,{onClick:()=>I(1),children:"Back"}),r.jsx(Y,{onClick:z,variant:"contained",disabled:n||!w.commonName,startIcon:n?r.jsx(We,{size:20}):r.jsx(Ys,{}),children:"Generate Certificate"})]})]})]})]})})]}),r.jsxs(lt,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:Pa,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(ho,{sx:{mr:1,color:"success.main"}}),"Generate Let's Encrypt Certificate"]})}),r.jsxs(ut,{children:[r.jsx(xe,{severity:"info",sx:{mb:2},children:"Free, automated TLS certificate from Let's Encrypt Certificate Authority."}),r.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(Re,{label:"Domain *",value:R.domain,onChange:K=>N({...R,domain:K.target.value}),fullWidth:!0,helperText:"Fully qualified domain name (must be publicly accessible)"}),r.jsx(Re,{label:"Email *",type:"email",value:R.email,onChange:K=>N({...R,email:K.target.value}),fullWidth:!0,helperText:"For renewal notifications and account recovery"}),r.jsx(hn,{control:r.jsx(jn,{checked:R.dnsChallenge,onChange:K=>N({...R,dnsChallenge:K.target.checked})}),label:"Use DNS Challenge (for wildcard certificates)"}),!R.dnsChallenge&&r.jsx(Re,{label:"Webroot Path",value:R.webroot,onChange:K=>N({...R,webroot:K.target.value}),fullWidth:!0,helperText:"Path for HTTP-01 challenge files"}),r.jsx(hn,{control:r.jsx(jn,{checked:R.autoRenew,onChange:K=>N({...R,autoRenew:K.target.checked}),color:"primary"}),label:"Enable Auto-Renewal (Recommended)"}),r.jsx(hn,{control:r.jsx(jn,{checked:R.staging,onChange:K=>N({...R,staging:K.target.checked})}),label:"Use Staging Environment (for testing)"}),!R.staging&&r.jsx(xe,{severity:"warning",children:"Production certificates have rate limits. Use staging for testing first."})]})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>h(!1),children:"Cancel"}),r.jsx(Y,{onClick:U,variant:"contained",color:"success",disabled:n||!R.domain||!R.email,startIcon:n?r.jsx(We,{size:20}):r.jsx(ho,{}),children:"Generate Certificate"})]})]})]})};function wf({children:e,value:t,index:n,...o}){return r.jsx("div",{role:"tabpanel",hidden:t!==n,id:`settings-tabpanel-${n}`,"aria-labelledby":`settings-tab-${n}`,...o,children:t===n&&r.jsx(M,{sx:{p:3},children:e})})}function XD(){const[e,t]=f.useState(0);return r.jsxs(M,{sx:{p:3},children:[r.jsx(A,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Settings"}),r.jsx(fe,{elevation:3,sx:{width:"100%",mb:2},children:r.jsxs(Gi,{value:e,onChange:(n,o)=>t(o),indicatorColor:"primary",textColor:"primary",variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{label:"TLS Certificates",icon:r.jsx(Fn,{})}),r.jsx(Pn,{label:"System Config",icon:r.jsx(fs,{})})]})}),r.jsx(wf,{value:e,index:0,children:r.jsx(QD,{})}),r.jsx(wf,{value:e,index:1,children:r.jsx(dD,{})})]})}const YD=()=>{const{enqueueSnackbar:e}=Jt(),{socket:t,connected:n}=ou(),[o,s]=f.useState([]),[i,a]=f.useState(!0),[l,u]=f.useState({level:"all",search:"",timeRange:"1h"}),[c,d]=f.useState(!0),h={error:"error",warn:"warning",info:"info",debug:"default"};f.useEffect(()=>{if(p(),t&&n&&c)return t.on("logs:new",b=>{s(y=>[b,...y].slice(0,1e3))}),()=>{t.off("logs:new")}},[t,n,c,l]);const p=async()=>{try{const b=await qe.get("/api/logs",{params:l});s(b.data)}catch{e("Failed to fetch logs",{variant:"error"})}finally{a(!1)}},x=()=>{const b=o.map(k=>`[${k.timestamp}] [${k.level.toUpperCase()}] ${k.message} ${k.details||""}`).join(`
`),y=new Blob([b],{type:"text/plain"}),v=window.URL.createObjectURL(y),C=document.createElement("a");C.href=v,C.download=`smtp-relay-logs-${new Date().toISOString()}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(v)},m=b=>new Date(b).toLocaleString(),g=(b,y)=>y?b.split(new RegExp(`(${y})`,"gi")).map((C,k)=>C.toLowerCase()===y.toLowerCase()?r.jsx("mark",{style:{backgroundColor:"yellow"},children:C},k):C):b;return r.jsxs(M,{sx:{p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(A,{variant:"h4",component:"h1",children:"System Logs"}),r.jsxs(M,{children:[r.jsx(Pe,{onClick:p,title:"Refresh",children:r.jsx(gn,{})}),r.jsx(Pe,{onClick:x,title:"Download Logs",children:r.jsx(or,{})})]})]}),r.jsx(fe,{elevation:3,sx:{p:2,mb:3},children:r.jsxs(M,{display:"flex",gap:2,alignItems:"center",children:[r.jsxs(dt,{size:"small",sx:{minWidth:120},children:[r.jsx(vt,{children:"Log Level"}),r.jsxs(gt,{value:l.level,label:"Log Level",onChange:b=>u({...l,level:b.target.value}),children:[r.jsx(oe,{value:"all",children:"All"}),r.jsx(oe,{value:"error",children:"Error"}),r.jsx(oe,{value:"warn",children:"Warning"}),r.jsx(oe,{value:"info",children:"Info"}),r.jsx(oe,{value:"debug",children:"Debug"})]})]}),r.jsxs(dt,{size:"small",sx:{minWidth:120},children:[r.jsx(vt,{children:"Time Range"}),r.jsxs(gt,{value:l.timeRange,label:"Time Range",onChange:b=>u({...l,timeRange:b.target.value}),children:[r.jsx(oe,{value:"15m",children:"Last 15 min"}),r.jsx(oe,{value:"1h",children:"Last 1 hour"}),r.jsx(oe,{value:"6h",children:"Last 6 hours"}),r.jsx(oe,{value:"24h",children:"Last 24 hours"}),r.jsx(oe,{value:"7d",children:"Last 7 days"})]})]}),r.jsx(Re,{size:"small",placeholder:"Search logs...",value:l.search,onChange:b=>u({...l,search:b.target.value}),InputProps:{startAdornment:r.jsx(pi,{sx:{mr:1,color:"text.secondary"}}),endAdornment:l.search&&r.jsx(Pe,{size:"small",onClick:()=>u({...l,search:""}),children:r.jsx(Jy,{fontSize:"small"})})},sx:{flex:1}}),r.jsx(dt,{size:"small",children:r.jsxs(gt,{value:c,onChange:b=>d(b.target.value),children:[r.jsx(oe,{value:!0,children:"Auto-refresh ON"}),r.jsx(oe,{value:!1,children:"Auto-refresh OFF"})]})})]})}),r.jsx(fe,{elevation:3,sx:{p:2,maxHeight:"calc(100vh - 300px)",overflow:"auto",backgroundColor:"#1e1e1e"},children:i?r.jsx(A,{color:"text.secondary",align:"center",children:"Loading logs..."}):o.length===0?r.jsx(xe,{severity:"info",children:"No logs found for the selected filters"}):r.jsx(M,{sx:{fontFamily:"monospace",fontSize:"0.9rem"},children:o.map((b,y)=>r.jsxs(M,{sx:{mb:.5,p:1,backgroundColor:y%2===0?"#252525":"#1e1e1e",borderLeft:"3px solid",borderColor:b.level==="error"?"error.main":b.level==="warn"?"warning.main":b.level==="info"?"info.main":"grey.600","&:hover":{backgroundColor:"#333"}},children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(A,{variant:"caption",sx:{color:"grey.500",minWidth:"150px"},children:m(b.timestamp)}),r.jsx(we,{label:b.level.toUpperCase(),size:"small",color:h[b.level],sx:{minWidth:"60px"}}),r.jsx(A,{sx:{color:"grey.100",wordBreak:"break-all"},children:g(b.message,l.search)})]}),b.details&&r.jsx(A,{variant:"body2",sx:{color:"grey.400",ml:"230px",mt:.5,fontFamily:"monospace"},children:g(b.details,l.search)}),b.metadata&&r.jsx(M,{sx:{ml:"230px",mt:.5},children:Object.entries(b.metadata).map(([v,C])=>r.jsx(we,{label:`${v}: ${C}`,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},v))})]},y))})})]})},JD=()=>{const{enqueueSnackbar:e}=Jt(),{apiRequest:t}=Wt(),[n,o]=f.useState(null),[s,i]=f.useState(!0),[a,l]=f.useState(0),[u,c]=f.useState(!1),[d,h]=f.useState(!1),[p,x]=f.useState(!1),[m,g]=f.useState(!1),[b,y]=f.useState(null),[v,C]=f.useState([]),[k,F]=f.useState(""),[T,I]=f.useState(""),[D,V]=f.useState(""),[O,S]=f.useState(""),[$,P]=f.useState(""),[w,E]=f.useState("");f.useEffect(()=>{R()},[]);const R=async()=>{try{const W=await t("/api/ip-whitelist/config");o(W.config),i(!1)}catch(W){e(W.message,{variant:"error"}),i(!1)}},N=async()=>{if(!D||!k||!T){e("Please fill all fields",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/add",{method:"POST",body:JSON.stringify({category:k,subcategory:T,ip:D})});e(`Added ${W.ip} successfully`,{variant:"success"}),c(!1),V(""),R()}catch(W){e(W.message,{variant:"error"})}},_=async(W,K,ae)=>{if(confirm(`Remove ${ae} from ${W}/${K}?`))try{const X=await t("/api/ip-whitelist/remove",{method:"POST",body:JSON.stringify({category:W,subcategory:K,ip:ae})});e(`Removed ${ae} successfully`,{variant:"success"}),R()}catch(X){e(X.message,{variant:"error"})}},L=async()=>{if(!O||!k||!T){e("Please fill all fields",{variant:"error"});return}const W=O.split(`
`).map(K=>K.trim()).filter(Boolean);try{const K=await t("/api/ip-whitelist/import",{method:"POST",body:JSON.stringify({category:k,subcategory:T,ips:W})}),{results:ae}=K;e(`Import complete: ${ae.success.length} added, ${ae.skipped.length} skipped, ${ae.failed.length} failed`,{variant:"success"}),h(!1),S(""),R()}catch(K){e(K.message,{variant:"error"})}},B=async(W,K)=>{try{const ae=await t(`/api/ip-whitelist/export/${W}/${K}`),X=ae.ips.join(`
`),ne=new Blob([X],{type:"text/plain"}),je=URL.createObjectURL(ne),Z=document.createElement("a");Z.href=je,Z.download=`${W}_${K}_ips.txt`,Z.click(),URL.revokeObjectURL(je),e(`Exported ${ae.count} IPs`,{variant:"success"})}catch(ae){e(ae.message,{variant:"error"})}},z=async()=>{if(!$){e("Please enter an IP to test",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/test",{method:"POST",body:JSON.stringify({ip:$})});y(W)}catch(W){e(W.message,{variant:"error"}),y(null)}},U=async(W,K)=>{try{const ae=await t("/api/ip-whitelist/settings",{method:"POST",body:JSON.stringify({[W]:K})});e("Settings updated successfully",{variant:"success"}),R()}catch(ae){e(ae.message,{variant:"error"})}},J=async()=>{try{const W=await t("/api/ip-whitelist/audit?limit=100");C(W.logs),g(!0)}catch(W){e(W.message,{variant:"error"})}},ee=W=>w?W.filter(K=>K.toLowerCase().includes(w.toLowerCase())):W,te=W=>{navigator.clipboard.writeText(W),e("Copied to clipboard",{variant:"info"})},ve=(W,K)=>{l(K)};return s?r.jsx(M,{sx:{p:3},children:r.jsx(Qt,{})}):r.jsxs(M,{sx:{p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Fn,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(M,{children:[r.jsx(A,{variant:"h4",component:"h1",children:"IP Whitelist Management"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Control access to SMTP relay and dashboard"})]})]}),r.jsxs(M,{display:"flex",gap:1,children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(pi,{}),onClick:()=>x(!0),children:"Test IP"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(Xf,{}),onClick:J,children:"Audit Log"})]})]}),n&&r.jsxs(Q,{container:!0,spacing:3,mb:3,children:[r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"primary",children:n.smtp_relay.no_auth_required.length+n.smtp_relay.auth_required.length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"SMTP Allowed IPs"})]}),r.jsx(Sl,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"success.main",children:n.frontend_access.allowed.length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Frontend Allowed IPs"})]}),r.jsx(uo,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"error",children:n.blacklist.blocked.length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Blacklisted IPs"})]}),r.jsx(Ea,{sx:{fontSize:32,color:"error.main",opacity:.3}})]})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"secondary",children:n.settings.enforce_frontend_whitelist?"Enforced":"Open"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Frontend Access"})]}),n.settings.enforce_frontend_whitelist?r.jsx(go,{sx:{fontSize:32,color:"secondary.main",opacity:.3}}):r.jsx(ns,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(fe,{elevation:3,children:[r.jsxs(Gi,{value:a,onChange:ve,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{icon:r.jsx(Sl,{}),label:"SMTP Relay",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(uo,{}),label:"Frontend Access",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(Ea,{}),label:"Blacklist",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(fs,{}),label:"Settings",iconPosition:"start"})]}),r.jsxs(M,{sx:{p:3},children:[a!==3&&r.jsxs(M,{display:"flex",gap:2,mb:3,children:[r.jsx(Re,{fullWidth:!0,variant:"outlined",placeholder:"Search IPs...",value:w,onChange:W=>E(W.target.value),InputProps:{startAdornment:r.jsx(Tr,{position:"start",children:r.jsx(pi,{})})}}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:()=>{F(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),c(!0)},children:"Add IP"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(Zy,{}),onClick:()=>{F(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),h(!0)},children:"Import"})]}),n&&a===0&&r.jsxs(M,{children:[r.jsxs(M,{mb:4,children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(ns,{color:"success"}),r.jsx(A,{variant:"h6",children:"No Authentication Required"}),r.jsx(we,{label:n.smtp_relay.no_auth_required.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(or,{}),onClick:()=>B("smtp_relay","no_auth_required"),children:"Export"})]}),r.jsx(fe,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.no_auth_required).length>0?r.jsx(Q,{container:!0,spacing:2,children:ee(n.smtp_relay.no_auth_required).map(W=>r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(fe,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(A,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(M,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Bt,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>_("smtp_relay","no_auth_required",W),children:r.jsx(Kt,{fontSize:"small"})})]})]})},W))}):r.jsx(A,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),r.jsxs(M,{children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(go,{color:"warning"}),r.jsx(A,{variant:"h6",children:"Authentication Required"}),r.jsx(we,{label:n.smtp_relay.auth_required.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(or,{}),onClick:()=>B("smtp_relay","auth_required"),children:"Export"})]}),r.jsx(fe,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.auth_required).length>0?r.jsx(Q,{container:!0,spacing:2,children:ee(n.smtp_relay.auth_required).map(W=>r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(fe,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(A,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(M,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Bt,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>_("smtp_relay","auth_required",W),children:r.jsx(Kt,{fontSize:"small"})})]})]})},W))}):r.jsx(A,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]})]}),n&&a===1&&r.jsxs(M,{children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(uo,{color:"primary"}),r.jsx(A,{variant:"h6",children:"Allowed IPs"}),r.jsx(we,{label:n.frontend_access.allowed.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(or,{}),onClick:()=>B("frontend_access","allowed"),children:"Export"})]}),!n.settings.enforce_frontend_whitelist&&r.jsx(xe,{severity:"warning",sx:{mb:2},children:"Frontend whitelist is not enforced. All IPs can access the dashboard."}),r.jsx(fe,{variant:"outlined",sx:{p:2},children:ee(n.frontend_access.allowed).length>0?r.jsx(Q,{container:!0,spacing:2,children:ee(n.frontend_access.allowed).map(W=>r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(fe,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(A,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(M,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Bt,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>_("frontend_access","allowed",W),children:r.jsx(Kt,{fontSize:"small"})})]})]})},W))}):r.jsx(A,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),n&&a===2&&r.jsxs(M,{children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ea,{color:"error"}),r.jsx(A,{variant:"h6",children:"Blocked IPs"}),r.jsx(we,{label:n.blacklist.blocked.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(or,{}),onClick:()=>B("blacklist","blocked"),children:"Export"})]}),r.jsx(fe,{variant:"outlined",sx:{p:2},children:ee(n.blacklist.blocked).length>0?r.jsx(Q,{container:!0,spacing:2,children:ee(n.blacklist.blocked).map(W=>r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(fe,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(A,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(M,{display:"flex",gap:.5,children:[r.jsx(Pe,{size:"small",onClick:()=>te(W),children:r.jsx(Bt,{fontSize:"small"})}),r.jsx(Pe,{size:"small",color:"error",onClick:()=>_("blacklist","blocked",W),children:r.jsx(Kt,{fontSize:"small"})})]})]})},W))}):r.jsx(A,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs blacklisted"})})]}),n&&a===3&&r.jsxs(M,{children:[r.jsxs(fe,{variant:"outlined",sx:{p:3,mb:3},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Access Control Settings"}),r.jsxs(ot,{children:[r.jsxs(ce,{children:[r.jsx(se,{primary:"Enforce Frontend Whitelist",secondary:"Only allow whitelisted IPs to access the dashboard"}),r.jsx(un,{children:r.jsx(jn,{edge:"end",checked:n.settings.enforce_frontend_whitelist,onChange:W=>U("enforce_frontend_whitelist",W.target.checked),color:"primary"})})]}),r.jsx(St,{}),r.jsxs(ce,{children:[r.jsx(se,{primary:"Log Denied Attempts",secondary:"Record all denied access attempts in audit log"}),r.jsx(un,{children:r.jsx(jn,{edge:"end",checked:n.settings.log_denied_attempts,onChange:W=>U("log_denied_attempts",W.target.checked),color:"primary"})})]}),r.jsx(St,{}),r.jsxs(ce,{children:[r.jsx(se,{primary:"Auto-block After Failures",secondary:"Number of failed attempts before auto-blacklisting"}),r.jsx(un,{children:r.jsx(Re,{type:"number",value:n.settings.auto_block_after_failures,onChange:W=>U("auto_block_after_failures",parseInt(W.target.value)),inputProps:{min:0,max:100},size:"small",sx:{width:80}})})]})]})]}),r.jsxs(xe,{severity:"info",icon:r.jsx(ar,{}),children:[r.jsx(Ze,{children:"IP Format Examples"}),r.jsxs(M,{component:"ul",sx:{mt:1,pl:2},children:[r.jsxs("li",{children:[r.jsx("code",{children:"192.168.1.1"})," - Single IP"]}),r.jsxs("li",{children:[r.jsx("code",{children:"10.0.0.0/24"})," - CIDR notation (256 IPs)"]}),r.jsxs("li",{children:[r.jsx("code",{children:"172.16.0.0/12"})," - Large subnet"]}),r.jsxs("li",{children:[r.jsx("code",{children:"2001:db8::/32"})," - IPv6 range"]})]})]})]})]})]}),r.jsxs(lt,{open:u,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Add IP Address"}),r.jsx(ut,{children:r.jsxs(M,{sx:{pt:2},children:[r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Category"}),r.jsxs(gt,{value:k,onChange:W=>{F(W.target.value),I("")},label:"Category",children:[r.jsx(oe,{value:"",children:"Select category..."}),r.jsx(oe,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(oe,{value:"frontend_access",children:"Frontend Access"}),r.jsx(oe,{value:"blacklist",children:"Blacklist"})]})]}),k==="smtp_relay"&&r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Subcategory"}),r.jsxs(gt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(oe,{value:"",children:"Select subcategory..."}),r.jsx(oe,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(oe,{value:"auth_required",children:"Auth Required"})]})]}),k==="frontend_access"&&r.jsx("input",{type:"hidden",value:"allowed",onChange:()=>I("allowed")}),k==="blacklist"&&r.jsx("input",{type:"hidden",value:"blocked",onChange:()=>I("blocked")}),r.jsx(Re,{fullWidth:!0,margin:"normal",label:"IP Address",value:D,onChange:W=>V(W.target.value),placeholder:"e.g., 192.168.1.1 or 10.0.0.0/24"})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>{c(!1),V(""),F(""),I("")},children:"Cancel"}),r.jsx(Y,{onClick:N,variant:"contained",children:"Add IP"})]})]}),r.jsxs(lt,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Import IP Addresses"}),r.jsx(ut,{children:r.jsxs(M,{sx:{pt:2},children:[r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Category"}),r.jsxs(gt,{value:k,onChange:W=>{F(W.target.value),I("")},label:"Category",children:[r.jsx(oe,{value:"",children:"Select category..."}),r.jsx(oe,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(oe,{value:"frontend_access",children:"Frontend Access"}),r.jsx(oe,{value:"blacklist",children:"Blacklist"})]})]}),k==="smtp_relay"&&r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Subcategory"}),r.jsxs(gt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(oe,{value:"",children:"Select subcategory..."}),r.jsx(oe,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(oe,{value:"auth_required",children:"Auth Required"})]})]}),r.jsx(Re,{fullWidth:!0,margin:"normal",label:"IP Addresses (one per line)",multiline:!0,rows:6,value:O,onChange:W=>S(W.target.value),placeholder:`192.168.1.1
10.0.0.0/24
172.16.0.0/16`})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>{h(!1),S(""),F(""),I("")},children:"Cancel"}),r.jsx(Y,{onClick:L,variant:"contained",children:"Import"})]})]}),r.jsxs(lt,{open:p,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Test IP Address"}),r.jsx(ut,{children:r.jsxs(M,{sx:{pt:2},children:[r.jsx(Re,{fullWidth:!0,margin:"normal",label:"IP Address",value:$,onChange:W=>P(W.target.value),placeholder:"e.g., 192.168.1.1"}),b&&r.jsx(fe,{variant:"outlined",sx:{p:2,mt:2},children:r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"IP Type",secondary:b.type})}),r.jsx(St,{}),r.jsxs(ce,{children:[r.jsx(se,{primary:"Blacklisted"}),r.jsx(un,{children:b.blacklisted?r.jsx(we,{icon:r.jsx(no,{}),label:"Yes",color:"error",size:"small"}):r.jsx(we,{icon:r.jsx(Ne,{}),label:"No",color:"success",size:"small"})})]}),r.jsx(St,{}),r.jsxs(ce,{children:[r.jsx(se,{primary:"SMTP Access"}),r.jsx(un,{children:b.smtp_access.allowed?r.jsx(we,{icon:r.jsx(Ne,{}),label:b.smtp_access.requiresAuth?"Auth Required":"No Auth",color:"success",size:"small"}):r.jsx(we,{icon:r.jsx(no,{}),label:"Denied",color:"error",size:"small"})})]}),r.jsx(St,{}),r.jsxs(ce,{children:[r.jsx(se,{primary:"Frontend Access"}),r.jsx(un,{children:b.frontend_access?r.jsx(we,{icon:r.jsx(Ne,{}),label:"Allowed",color:"success",size:"small"}):r.jsx(we,{icon:r.jsx(no,{}),label:"Denied",color:"error",size:"small"})})]})]})})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>{x(!1),P(""),y(null)},children:"Close"}),r.jsx(Y,{onClick:z,variant:"contained",children:"Test IP"})]})]}),r.jsxs(lt,{open:m,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsx(A,{variant:"h6",children:"Audit Log"}),r.jsx(Pe,{onClick:()=>g(!1),children:r.jsx(no,{})})]})}),r.jsx(ut,{children:r.jsx(ps,{children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(Mn,{children:[r.jsx(ue,{children:"Time"}),r.jsx(ue,{children:"Action"}),r.jsx(ue,{children:"Category"}),r.jsx(ue,{children:"Value"}),r.jsx(ue,{children:"User"})]})}),r.jsx(xs,{children:v.map(W=>r.jsxs(Mn,{hover:!0,children:[r.jsx(ue,{children:new Date(W.timestamp).toLocaleString()}),r.jsx(ue,{children:r.jsx(we,{label:W.action,size:"small",color:W.action==="ADD"?"success":W.action==="REMOVE"?"error":W.action==="DENIED_ACCESS"?"warning":"default"})}),r.jsxs(ue,{children:[W.category,"/",W.subcategory]}),r.jsx(ue,{children:r.jsx(A,{variant:"body2",fontFamily:"monospace",children:W.value})}),r.jsx(ue,{children:W.user})]},W.id))})]})})})]})]})},ZD=()=>{const{enqueueSnackbar:e}=Jt(),[t,n]=f.useState([]),[o,s]=f.useState([]),[i,a]=f.useState(null),[l,u]=f.useState(!0),[c,d]=f.useState(0),[h,p]=f.useState({open:!1,action:null,message:""}),{apiRequest:x}=Wt();f.useEffect(()=>{m(),g()},[]);const m=async()=>{try{const S=await(await x("/api/sessions/my-sessions")).json();n(S.sessions),u(!1)}catch{e("Failed to load sessions",{variant:"error"}),u(!1)}},g=async()=>{try{const S=await(await x("/api/sessions/security-events")).json();s(S.events)}catch{console.error("Failed to load security events")}},b=()=>{h.action&&h.action(),p({open:!1,action:null,message:""})},y=async O=>{p({open:!0,message:"Are you sure you want to revoke this session?",action:async()=>{try{(await x(`/api/sessions/revoke/${O}`,{method:"DELETE"})).ok&&(n(t.filter($=>$.id!==O)),e("Session revoked successfully",{variant:"success"}))}catch{e("Failed to revoke session",{variant:"error"})}}})},v=async()=>{p({open:!0,message:"This will log you out from all other devices. Continue?",action:async()=>{try{(await x("/api/sessions/revoke-all",{method:"POST"})).ok&&(m(),e("All other sessions revoked",{variant:"success"}))}catch{e("Failed to revoke sessions",{variant:"error"})}}})},C=async()=>{try{const O=await x("/api/sessions/backup-codes",{method:"POST"}),S=await O.json();O.ok?(a(S.codes),e("Backup codes generated successfully",{variant:"success"})):e(S.error||"Failed to generate backup codes",{variant:"error"})}catch{e("Failed to generate backup codes",{variant:"error"})}},k=O=>O?.toLowerCase().includes("mobile")?r.jsx(pc,{}):r.jsx(Ar,{}),F=O=>{switch(O){case"LOGIN_SUCCESS":return r.jsx(Ne,{color:"success"});case"LOGIN_FAILED":return r.jsx(no,{color:"error"});case"SECURITY_ALERT":return r.jsx(Tn,{color:"warning"});default:return r.jsx(qo,{color:"action"})}},T=O=>{const S=Math.floor((new Date-new Date(O))/1e3);return S<60?"Just now":S<3600?`${Math.floor(S/60)} minutes ago`:S<86400?`${Math.floor(S/3600)} hours ago`:`${Math.floor(S/86400)} days ago`},I=(O,S)=>{d(S)},D=()=>{i&&(navigator.clipboard.writeText(i.join(`
`)),e("Codes copied to clipboard",{variant:"info"}))},V=()=>{if(i){const O=new Blob([i.join(`
`)],{type:"text/plain"}),S=URL.createObjectURL(O),$=document.createElement("a");$.href=S,$.download="backup-codes.txt",$.click(),URL.revokeObjectURL(S),e("Codes downloaded",{variant:"info"})}};return l?r.jsx(M,{sx:{p:3},children:r.jsx(Qt,{})}):r.jsxs(M,{sx:{p:3},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(vc,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(M,{children:[r.jsx(A,{variant:"h4",component:"h1",children:"Security & Sessions"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Manage your active sessions and security settings"})]})]}),r.jsx(Y,{variant:"contained",color:"error",startIcon:r.jsx(Yf,{}),onClick:v,children:"Sign Out Everywhere Else"})]}),r.jsxs(Q,{container:!0,spacing:3,mb:3,children:[r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"primary",children:t.length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Active Sessions"})]}),r.jsx(Ar,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"success.main",children:t.filter(O=>O.isCurrent).length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Current Device"})]}),r.jsx(Ne,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:r.jsx(ze,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"h4",color:"secondary",children:o.length}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Recent Events"})]}),r.jsx(qo,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(fe,{elevation:3,children:[r.jsxs(Gi,{value:c,onChange:I,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(Pn,{icon:r.jsx(Ar,{}),label:"Active Sessions",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(qo,{}),label:"Security Events",iconPosition:"start"}),r.jsx(Pn,{icon:r.jsx(ar,{}),label:"Backup Codes",iconPosition:"start"})]}),r.jsxs(M,{sx:{p:3},children:[c===0&&r.jsx(ot,{children:t.length>0?t.map((O,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(St,{}),r.jsxs(ce,{sx:{py:2,backgroundColor:O.isCurrent?"primary.light":"transparent",bgcolor:O.isCurrent?$=>$.palette.primary.main+"10":"transparent",borderRadius:1,mb:1},children:[r.jsx(De,{children:k(O.deviceInfo?.browser)}),r.jsx(se,{primary:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(A,{variant:"body1",fontWeight:"medium",children:O.deviceInfo?.browser||"Unknown Browser"}),O.isCurrent&&r.jsx(we,{label:"This Device",size:"small",color:"primary"})]}),secondary:r.jsxs(M,{display:"flex",gap:2,mt:1,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(uo,{sx:{fontSize:16}}),r.jsx(A,{variant:"caption",children:O.deviceInfo?.ip||"Unknown IP"})]}),r.jsxs(M,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(eb,{sx:{fontSize:16}}),r.jsx(A,{variant:"caption",children:T(O.lastUsed)})]}),O.location&&r.jsxs(M,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(tb,{sx:{fontSize:16}}),r.jsx(A,{variant:"caption",children:O.location})]})]})}),!O.isCurrent&&r.jsx(un,{children:r.jsx(Y,{variant:"outlined",color:"error",size:"small",onClick:()=>y(O.id),children:"Revoke"})})]})]},O.id)):r.jsx(M,{textAlign:"center",py:8,children:r.jsx(A,{color:"text.secondary",children:"No active sessions found"})})}),c===1&&r.jsx(ot,{children:o.length>0?o.map((O,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(St,{}),r.jsxs(ce,{sx:{py:2},children:[r.jsx(De,{children:F(O.type)}),r.jsx(se,{primary:r.jsx(A,{variant:"body1",fontWeight:"medium",children:O.type?.replace(/_/g," ")||"Unknown Event"}),secondary:r.jsxs(M,{display:"flex",gap:2,mt:.5,children:[r.jsx(A,{variant:"caption",children:O.ip||"Unknown IP"}),r.jsx(A,{variant:"caption",children:O.device||"Unknown Device"}),r.jsx(A,{variant:"caption",children:T(O.timestamp)})]})})]})]},S)):r.jsx(M,{textAlign:"center",py:8,children:r.jsx(A,{color:"text.secondary",children:"No security events to display"})})}),c===2&&r.jsx(M,{children:i?r.jsxs(M,{children:[r.jsxs(xe,{severity:"warning",sx:{mb:3},children:[r.jsx(Ze,{children:"Important: Save these codes securely!"}),"Each code can only be used once. Store them in a safe place like a password manager."]}),r.jsx(Q,{container:!0,spacing:2,mb:3,children:i.map((O,S)=>r.jsx(Q,{item:!0,xs:6,sm:4,md:2.4,children:r.jsx(fe,{variant:"outlined",sx:{p:2,textAlign:"center",bgcolor:"grey.100",fontFamily:"monospace"},children:O})},S))}),r.jsxs(M,{display:"flex",justifyContent:"center",gap:2,children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(Bt,{}),onClick:D,children:"Copy All"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(or,{}),onClick:V,children:"Download"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(gn,{}),onClick:C,children:"Regenerate"})]})]}):r.jsxs(M,{textAlign:"center",py:8,children:[r.jsx(ar,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(A,{variant:"body2",color:"text.secondary",paragraph:!0,sx:{maxWidth:400,mx:"auto"},children:"Generate one-time use backup codes for emergency access when you can't use your authenticator app."}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(ar,{}),onClick:C,sx:{mt:2},children:"Generate Backup Codes"})]})})]})]}),r.jsxs(lt,{open:h.open,onClose:()=>p({open:!1,action:null,message:""}),children:[r.jsx(ct,{children:"Confirm Action"}),r.jsx(ut,{children:r.jsx(A,{children:h.message})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>p({open:!1,action:null,message:""}),children:"Cancel"}),r.jsx(Y,{onClick:b,variant:"contained",color:"error",children:"Confirm"})]})]})]})},jf=({data:e,width:t,height:n})=>{if(!e||!e.nodes)return r.jsx(ze,{sx:{height:n||400},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Email Flow Visualization"}),r.jsx(M,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:r.jsx(A,{color:"text.secondary",children:"Loading email flow data..."})})]})});const o=e.links?.find(c=>c.source==="devices")?.value||1500,s=e.links?.find(c=>c.target==="relay")?.value||1500,i=e.links?.find(c=>c.target==="exchange")?.value||1400,a=e.links?.find(c=>c.target==="delivered")?.value||1350,l=e.links?.find(c=>c.target==="failed")?.value||150,u=[{name:"Devices",icon:r.jsx(rb,{}),count:o,color:"primary",percentage:100},{name:"SMTP Relay",icon:r.jsx(mo,{}),count:s,color:"info",percentage:s/o*100},{name:"Exchange Online",icon:r.jsx(Jf,{}),count:i,color:"secondary",percentage:i/o*100},{name:"Delivered",icon:r.jsx(Ne,{}),count:a,color:"success",percentage:a/o*100}];return r.jsx(ze,{sx:{height:n||"auto"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Email Flow Pipeline"}),r.jsx(Q,{container:!0,spacing:2,alignItems:"center",children:u.map((c,d)=>r.jsxs(Le.Fragment,{children:[r.jsx(Q,{item:!0,xs:12,md:d===u.length-1?3:2.5,children:r.jsxs(fe,{elevation:2,sx:{p:2,textAlign:"center",backgroundColor:h=>h.palette.mode==="dark"?`${h.palette[c.color].dark}15`:`${h.palette[c.color].light}15`,border:h=>`2px solid ${h.palette[c.color].main}`,position:"relative"},children:[r.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[r.jsx(M,{sx:{color:`${c.color}.main`,mr:1},children:c.icon}),r.jsx(A,{variant:"subtitle1",fontWeight:"bold",children:c.name})]}),r.jsx(A,{variant:"h4",color:`${c.color}.main`,children:c.count.toLocaleString()}),r.jsx(Qt,{variant:"determinate",value:c.percentage,sx:{mt:1,height:6,borderRadius:3,backgroundColor:h=>h.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:`${c.color}.main`}}}),r.jsxs(A,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:[c.percentage.toFixed(1),"% of total"]})]})}),d<u.length-1&&r.jsx(Q,{item:!0,xs:12,md:.5,children:r.jsx(M,{sx:{display:"flex",justifyContent:"center"},children:r.jsx(nb,{color:"action",sx:{fontSize:30}})})})]},c.name))}),l>0&&r.jsx(M,{sx:{mt:3,p:2,backgroundColor:"error.light",borderRadius:1},children:r.jsxs(Vn,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(xn,{color:"error"}),r.jsxs(A,{variant:"body2",children:[r.jsx("strong",{children:l})," emails failed (",(l/o*100).toFixed(1),"%)"]}),r.jsx(we,{label:"View Details",size:"small",variant:"outlined",color:"error",onClick:()=>console.log("View failed emails")})]})}),r.jsxs(Q,{container:!0,spacing:2,sx:{mt:2},children:[r.jsx(Q,{item:!0,xs:6,md:3,children:r.jsxs(M,{sx:{textAlign:"center"},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Success Rate"}),r.jsxs(A,{variant:"h6",color:"success.main",children:[(a/o*100).toFixed(1),"%"]})]})}),r.jsx(Q,{item:!0,xs:6,md:3,children:r.jsxs(M,{sx:{textAlign:"center"},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Failure Rate"}),r.jsxs(A,{variant:"h6",color:"error.main",children:[(l/o*100).toFixed(1),"%"]})]})}),r.jsx(Q,{item:!0,xs:6,md:3,children:r.jsxs(M,{sx:{textAlign:"center"},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Processing"}),r.jsx(A,{variant:"h6",color:"warning.main",children:(o-a-l).toLocaleString()})]})}),r.jsx(Q,{item:!0,xs:6,md:3,children:r.jsxs(M,{sx:{textAlign:"center"},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:"Total Volume"}),r.jsx(A,{variant:"h6",color:"primary.main",children:o.toLocaleString()})]})})]})]})})},eF=({data:e,height:t=500})=>{const[n,o]=f.useState({}),s=e?.locations||e;f.useEffect(()=>{if(s){const a={isArray:Array.isArray(s),count:s?.length||0,hasLatLng:0,hasIP:0,hasSubnet:0,sampleData:s?.slice(0,3)||[]};Array.isArray(s)&&s.forEach(l=>{l.lat&&l.lng&&a.hasLatLng++,l.ip&&a.hasIP++,l.subnet&&a.hasSubnet++}),o(a)}},[s]);const i={hasData:!!s,isValidArray:Array.isArray(s)&&s.length>0,hasGeoData:n.hasLatLng>0,dataType:n.hasSubnet>0?"internal":n.hasLatLng>0?"external":"unknown"};return r.jsx(ze,{sx:{height:"auto"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Geographic Distribution - Debug View"}),r.jsxs(xe,{severity:i.hasData?i.isValidArray?"success":"warning":"error",sx:{mb:2},children:[r.jsx(Ze,{children:"Data Status"}),r.jsxs(Vn,{spacing:1,children:[r.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.hasData?r.jsx(Ne,{}):r.jsx(xn,{}),r.jsxs(A,{variant:"body2",children:["Data received: ",i.hasData?"Yes":"No"]})]}),i.hasData&&r.jsxs(r.Fragment,{children:[r.jsxs(A,{variant:"body2",children:["Format: ",i.isValidArray?"Valid Array":"Invalid Format"]}),r.jsxs(A,{variant:"body2",children:["Type: ",i.dataType," network"]}),r.jsxs(A,{variant:"body2",children:["Locations: ",n.count]}),r.jsxs(A,{variant:"body2",children:["With Lat/Lng: ",n.hasLatLng," / ",n.count]}),r.jsxs(A,{variant:"body2",children:["With IP: ",n.hasIP," / ",n.count]}),r.jsxs(A,{variant:"body2",children:["With Subnet: ",n.hasSubnet," / ",n.count]})]})]})]}),r.jsxs(fe,{sx:{p:2,mb:2,backgroundColor:"grey.100"},children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Raw Data Preview (First 3 items):"}),r.jsx(M,{sx:{fontFamily:"monospace",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:300,overflow:"auto",backgroundColor:"grey.900",color:"grey.100",p:2,borderRadius:1},children:JSON.stringify(n.sampleData,null,2)})]}),s&&s.length>0&&r.jsx(ps,{component:fe,children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(Mn,{children:[r.jsx(ue,{children:"Index"}),r.jsx(ue,{children:"Country/Name"}),r.jsx(ue,{children:"City"}),r.jsx(ue,{children:"Lat"}),r.jsx(ue,{children:"Lng"}),r.jsx(ue,{children:"IP"}),r.jsx(ue,{children:"Count"}),r.jsx(ue,{children:"Status"})]})}),r.jsx(xs,{children:s.slice(0,10).map((a,l)=>r.jsxs(Mn,{children:[r.jsx(ue,{children:l}),r.jsx(ue,{children:a.country||a.name||"N/A"}),r.jsx(ue,{children:a.city||"N/A"}),r.jsx(ue,{children:r.jsx(we,{label:a.lat||"missing",size:"small",color:a.lat?"success":"error",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:a.lng||"missing",size:"small",color:a.lng?"success":"error",variant:"outlined"})}),r.jsx(ue,{children:a.ip||"N/A"}),r.jsx(ue,{children:a.count}),r.jsx(ue,{children:a.lat&&a.lng?r.jsx(Ne,{color:"success",fontSize:"small"}):r.jsx(Tn,{color:"warning",fontSize:"small"})})]},l))})]})}),!i.hasGeoData&&i.hasData&&r.jsxs(xe,{severity:"warning",sx:{mt:2},children:[r.jsx(Ze,{children:"Missing Geographic Data"}),r.jsxs(A,{variant:"body2",children:["The data doesn't contain latitude/longitude coordinates needed for map visualization.",n.hasIP>0&&" IP addresses are present but need geolocation lookup."]})]}),r.jsx(M,{sx:{mt:2},children:r.jsx(Y,{variant:"contained",onClick:()=>{console.log("Full data:",e),console.log("Locations:",s),console.log("Debug info:",n)},children:"Log Full Data to Console"})})]})})},Sf=({data:e,timeRange:t="24h"})=>{const n=Yt(),[o,s]=f.useState("all");if(!e)return r.jsx(ze,{children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",children:"Time Series Analytics"}),r.jsx(M,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(A,{color:"text.secondary",children:"Loading metrics..."})})]})});const i=e.sent?.map((u,c)=>({time:new Date(u.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),sent:u.value,received:e.received?.[c]?.value||0,failed:e.failed?.[c]?.value||0,queued:e.queued?.[c]?.value||0}))||[],a=u=>{if(!u||u.length===0)return{current:0,avg:0,trend:"stable"};const c=u.map(y=>y.value),d=c[c.length-1],h=c.reduce((y,v)=>y+v,0)/c.length,p=c.slice(0,Math.floor(c.length/2)),x=c.slice(Math.floor(c.length/2)),m=p.reduce((y,v)=>y+v,0)/p.length,g=x.reduce((y,v)=>y+v,0)/x.length,b=g>m*1.1?"up":g<m*.9?"down":"stable";return{current:d,avg:Math.round(h),trend:b}},l=[{key:"sent",label:"Emails Sent",color:n.palette.primary.main,icon:r.jsx(mo,{}),stats:a(e.sent)},{key:"received",label:"Received",color:n.palette.success.main,icon:r.jsx(qo,{}),stats:a(e.received)},{key:"failed",label:"Failed",color:n.palette.error.main,icon:r.jsx(xn,{}),stats:a(e.failed)},{key:"queued",label:"Queue Size",color:n.palette.warning.main,icon:r.jsx(fi,{}),stats:a(e.queued)}];return r.jsx(ze,{children:r.jsxs(Oe,{children:[r.jsxs(M,{sx:{mb:3},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Time Series Analytics"}),r.jsxs(A,{variant:"body2",color:"text.secondary",children:["Email metrics over the last ",t]})]}),r.jsx(Q,{container:!0,spacing:2,sx:{mb:3},children:l.map(u=>r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(fe,{sx:{p:2,cursor:"pointer",border:o===u.key?2:0,borderColor:u.color,transition:"all 0.3s","&:hover":{boxShadow:3}},onClick:()=>s(u.key),children:[r.jsxs(Vn,{direction:"row",alignItems:"center",spacing:1,children:[r.jsx(M,{sx:{color:u.color},children:u.icon}),r.jsxs(M,{sx:{flexGrow:1},children:[r.jsx(A,{variant:"caption",color:"text.secondary",children:u.label}),r.jsx(A,{variant:"h5",children:u.stats.current.toLocaleString()})]}),u.stats.trend==="up"&&r.jsx(Zf,{color:"success"}),u.stats.trend==="down"&&r.jsx(ob,{color:"error"})]}),r.jsx(Qt,{variant:"determinate",value:u.stats.current/u.stats.avg*100,sx:{mt:1,height:4,borderRadius:2,backgroundColor:n.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:u.color}}}),r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Avg: ",u.stats.avg.toLocaleString()]})]})},u.key))}),r.jsx(fe,{sx:{p:2,backgroundColor:n.palette.background.default},children:r.jsx(Wb,{width:"100%",height:300,children:r.jsxs(qb,{data:i,children:[r.jsx(Kb,{strokeDasharray:"3 3",stroke:n.palette.divider}),r.jsx(Qb,{dataKey:"time",stroke:n.palette.text.secondary,fontSize:12}),r.jsx(Xb,{stroke:n.palette.text.secondary,fontSize:12}),r.jsx(Yb,{contentStyle:{backgroundColor:n.palette.background.paper,border:`1px solid ${n.palette.divider}`,borderRadius:4}}),r.jsx(Jb,{}),(o==="all"||o==="sent")&&r.jsx(Os,{type:"monotone",dataKey:"sent",stroke:n.palette.primary.main,fill:n.palette.primary.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="received")&&r.jsx(Os,{type:"monotone",dataKey:"received",stroke:n.palette.success.main,fill:n.palette.success.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="failed")&&r.jsx(Os,{type:"monotone",dataKey:"failed",stroke:n.palette.error.main,fill:n.palette.error.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="queued")&&r.jsx(Os,{type:"monotone",dataKey:"queued",stroke:n.palette.warning.main,fill:n.palette.warning.light,fillOpacity:.3,strokeWidth:2})]})})}),r.jsx(M,{sx:{mt:2,display:"flex",justifyContent:"center"},children:r.jsxs(Hi,{value:o,exclusive:!0,onChange:(u,c)=>c&&s(c),size:"small",children:[r.jsx(_t,{value:"all",children:"All Metrics"}),r.jsx(_t,{value:"sent",children:"Sent"}),r.jsx(_t,{value:"received",children:"Received"}),r.jsx(_t,{value:"failed",children:"Failed"}),r.jsx(_t,{value:"queued",children:"Queue"})]})})]})})},Pf=({devices:e,onDeviceSelect:t,autoRefresh:n})=>{const o=Yt(),[s,i]=f.useState(""),[a,l]=f.useState("all"),[u,c]=f.useState(null);if(!e)return r.jsx(ze,{children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",children:"Device Health Monitor"}),r.jsx(M,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(A,{color:"text.secondary",children:"Loading devices..."})})]})});const d=e.filter(g=>{const b=g.name.toLowerCase().includes(s.toLowerCase())||g.ip?.includes(s),y=a==="all"||g.status===a;return b&&y}),h={total:e.length,healthy:e.filter(g=>g.status==="healthy"||g.status==="online").length,warning:e.filter(g=>g.status==="warning").length,critical:e.filter(g=>g.status==="critical"||g.status==="error").length,offline:e.filter(g=>g.status==="offline").length},p=g=>{const b={printer:r.jsx(lb,{}),scanner:r.jsx(ab,{}),camera:r.jsx(ib,{}),nas:r.jsx(fi,{}),application:r.jsx(bc,{}),default:r.jsx(Ar,{})};return b[g?.toLowerCase()]||b.default},x=g=>{switch(g){case"healthy":case"online":return"success";case"warning":return"warning";case"critical":case"error":return"error";case"offline":return"default";default:return"default"}},m=g=>{switch(g){case"healthy":case"online":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(Tn,{color:"warning"});case"critical":case"error":return r.jsx(xn,{color:"error"});case"offline":return r.jsx(sb,{color:"disabled"});default:return r.jsx(ep,{})}};return r.jsx(ze,{children:r.jsxs(Oe,{children:[r.jsxs(M,{sx:{mb:3},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Device Health Monitor"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Monitor and manage your SMTP-enabled devices"})]}),r.jsxs(Q,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(Q,{item:!0,xs:6,sm:3,children:r.jsxs(fe,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.success.light}20`},children:[r.jsx(A,{variant:"h4",color:"success.main",children:h.healthy}),r.jsx(A,{variant:"caption",children:"Online"})]})}),r.jsx(Q,{item:!0,xs:6,sm:3,children:r.jsxs(fe,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.warning.light}20`},children:[r.jsx(A,{variant:"h4",color:"warning.main",children:h.warning}),r.jsx(A,{variant:"caption",children:"Warning"})]})}),r.jsx(Q,{item:!0,xs:6,sm:3,children:r.jsxs(fe,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.error.light}20`},children:[r.jsx(A,{variant:"h4",color:"error.main",children:h.critical}),r.jsx(A,{variant:"caption",children:"Critical"})]})}),r.jsx(Q,{item:!0,xs:6,sm:3,children:r.jsxs(fe,{sx:{p:2,textAlign:"center",backgroundColor:o.palette.grey[200]},children:[r.jsx(A,{variant:"h4",color:"text.secondary",children:h.offline}),r.jsx(A,{variant:"caption",children:"Offline"})]})})]}),r.jsxs(M,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[r.jsx(Re,{size:"small",placeholder:"Search devices...",value:s,onChange:g=>i(g.target.value),sx:{flexGrow:1,maxWidth:300},InputProps:{startAdornment:r.jsx(Tr,{position:"start",children:r.jsx(pi,{})})}}),r.jsxs(Hi,{value:a,exclusive:!0,onChange:(g,b)=>b&&l(b),size:"small",children:[r.jsxs(_t,{value:"all",children:["All (",e.length,")"]}),r.jsxs(_t,{value:"online",children:["Online (",h.healthy,")"]}),r.jsxs(_t,{value:"warning",children:["Warning (",h.warning,")"]}),r.jsxs(_t,{value:"error",children:["Error (",h.critical,")"]}),r.jsxs(_t,{value:"offline",children:["Offline (",h.offline,")"]})]}),n&&r.jsx(we,{icon:r.jsx(gn,{}),label:"Auto Refresh",color:"primary",variant:"outlined",size:"small"})]}),r.jsx(ps,{component:fe,variant:"outlined",children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(Mn,{children:[r.jsx(ue,{children:"Device"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{children:"IP Address"}),r.jsx(ue,{align:"right",children:"Emails Sent"}),r.jsx(ue,{align:"right",children:"Health"}),r.jsx(ue,{children:"Last Seen"})]})}),r.jsx(xs,{children:d.map(g=>{const b=g.health||(g.status==="healthy"||g.status==="online"?100:g.status==="warning"?75:g.status==="error"||g.status==="critical"?25:0);return r.jsxs(Mn,{hover:!0,onClick:()=>{c(g),t?.(g)},sx:{cursor:"pointer",opacity:g.status==="offline"?.6:1},children:[r.jsx(ue,{children:r.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(an,{sx:{width:32,height:32,backgroundColor:x(g.status)==="default"?o.palette.grey[300]:o.palette[x(g.status)].light},children:p(g.type)}),r.jsxs(M,{children:[r.jsx(A,{variant:"body2",fontWeight:"medium",children:g.name}),r.jsx(A,{variant:"caption",color:"text.secondary",children:g.type})]})]})}),r.jsx(ue,{children:r.jsx(we,{icon:m(g.status),label:g.status,size:"small",color:x(g.status),variant:"outlined"})}),r.jsxs(ue,{children:[r.jsx(A,{variant:"body2",children:g.ip||"N/A"}),g.port&&r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Port ",g.port]})]}),r.jsx(ue,{align:"right",children:r.jsx(A,{variant:"body2",children:g.emailsSent?.toLocaleString()||0})}),r.jsx(ue,{align:"right",children:r.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Qt,{variant:"determinate",value:b,sx:{width:60,height:6,borderRadius:3,backgroundColor:o.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:b>80?o.palette.success.main:b>50?o.palette.warning.main:o.palette.error.main}}}),r.jsxs(A,{variant:"caption",children:[b,"%"]})]})}),r.jsxs(ue,{children:[r.jsx(A,{variant:"caption",children:g.lastSeen?new Date(g.lastSeen).toLocaleString():"Never"}),g.lastError&&r.jsx(it,{title:g.lastError,children:r.jsx(xn,{sx:{fontSize:16,color:"error.main",ml:.5,verticalAlign:"middle"}})})]})]},g.id)})})]})}),d.length===0&&r.jsx(M,{sx:{py:4,textAlign:"center"},children:r.jsx(A,{color:"text.secondary",children:"No devices found matching your criteria"})})]})})},tF=()=>{const{apiRequest:e}=Wt(),[t,n]=f.useState(0),[o,s]=f.useState(!0),[i,a]=f.useState({emailFlow:null,geoDistribution:null,timeSeries:null,deviceHealth:null,alerts:[]}),[l,u]=f.useState(!0),[c,d]=f.useState(3e4),[h,p]=f.useState(new Date),[x,m]=f.useState(null),g=async()=>{try{s(!0);const[v,C,k,F,T]=await Promise.all([e("/api/analytics/email-flow"),e("/api/analytics/geo-distribution"),e("/api/analytics/time-series"),e("/api/analytics/device-health"),e("/api/analytics/alerts")]),[I,D,V,O,S]=await Promise.all([v.json(),C.json(),k.json(),F.json(),T.json()]);a({emailFlow:I.data,geoDistribution:D.data,timeSeries:V.data,deviceHealth:O.devices,alerts:S.alerts}),p(new Date),s(!1)}catch(v){console.error("Failed to load analytics data:",v),s(!1)}};f.useEffect(()=>{if(g(),l){const v=setInterval(g,c);return()=>clearInterval(v)}},[l,c]);const b=async(v="json")=>{try{const C=await e("/api/analytics/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:v,dataTypes:["all"],range:"24h"})});if(v==="csv"){const k=await C.blob(),F=window.URL.createObjectURL(k),T=document.createElement("a");T.href=F,T.download=`analytics-${new Date().toISOString()}.csv`,T.click(),window.URL.revokeObjectURL(F)}else{const k=await C.json(),F=new Blob([JSON.stringify(k.data,null,2)],{type:"application/json"}),T=window.URL.createObjectURL(F),I=document.createElement("a");I.href=T,I.download=`analytics-${new Date().toISOString()}.json`,I.click(),window.URL.revokeObjectURL(T)}}catch(C){console.error("Export failed:",C)}m(null)},y=[{label:"Overview",icon:r.jsx(db,{})},{label:"Email Flow",icon:r.jsx(qo,{})},{label:"Geographic",icon:r.jsx(uo,{})},{label:"Time Series",icon:r.jsx(Zf,{})},{label:"Device Health",icon:r.jsx(Ar,{})}];return o?r.jsx(M,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:r.jsxs(M,{sx:{textAlign:"center"},children:[r.jsx(We,{size:48}),r.jsx(A,{variant:"h6",sx:{mt:2},color:"text.secondary",children:"Loading analytics data..."})]})}):r.jsxs(M,{sx:{p:3},children:[r.jsx(ze,{sx:{mb:3},children:r.jsx(Oe,{children:r.jsxs(Q,{container:!0,alignItems:"center",spacing:2,children:[r.jsxs(Q,{item:!0,xs:12,md:6,children:[r.jsx(A,{variant:"h4",gutterBottom:!0,children:"Analytics Dashboard"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Real-time insights and monitoring for your SMTP relay infrastructure"}),r.jsxs(A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",h.toLocaleTimeString()]})]}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(Vn,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[r.jsx(hn,{control:r.jsx(jn,{checked:l,onChange:v=>u(v.target.checked),color:"primary"}),label:"Auto Refresh"}),l&&r.jsx(dt,{size:"small",sx:{minWidth:80},children:r.jsxs(gt,{value:c,onChange:v=>d(v.target.value),children:[r.jsx(oe,{value:1e4,children:"10s"}),r.jsx(oe,{value:3e4,children:"30s"}),r.jsx(oe,{value:6e4,children:"1m"}),r.jsx(oe,{value:3e5,children:"5m"})]})}),r.jsx(it,{title:"Refresh Data",children:r.jsx(Pe,{onClick:g,color:"primary",children:r.jsx(gn,{})})}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(or,{}),onClick:v=>m(v.currentTarget),children:"Export"}),r.jsxs(cb,{anchorEl:x,open:!!x,onClose:()=>m(null),children:[r.jsx(oe,{onClick:()=>b("json"),children:"Export as JSON"}),r.jsx(oe,{onClick:()=>b("csv"),children:"Export as CSV"})]})]})})]})})}),i.alerts&&i.alerts.length>0&&r.jsxs(xe,{severity:"warning",sx:{mb:3},action:r.jsx(Pe,{size:"small",color:"inherit",children:r.jsx(ub,{})}),children:[r.jsxs(Ze,{children:["Active Alerts (",i.alerts.length,")"]}),r.jsx(Vn,{spacing:1,children:i.alerts.slice(0,3).map(v=>r.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(we,{size:"small",label:v.severity,color:v.severity==="critical"?"error":v.severity==="warning"?"warning":"info"}),r.jsx(A,{variant:"body2",children:v.message})]},v.id))})]}),r.jsxs(ze,{children:[r.jsx(Gi,{value:t,onChange:(v,C)=>n(C),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:y.map((v,C)=>r.jsx(Pn,{label:v.label,icon:v.icon,iconPosition:"start"},C))}),r.jsxs(M,{sx:{p:3},children:[t===0&&r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,children:r.jsx(jf,{data:i.emailFlow})}),r.jsx(Q,{item:!0,xs:12,lg:6,children:r.jsx(Sf,{data:i.timeSeries})}),r.jsx(Q,{item:!0,xs:12,lg:6,children:r.jsx(Pf,{devices:i.deviceHealth,onDeviceSelect:v=>console.log("Selected device:",v)})})]}),t===1&&r.jsx(jf,{data:i.emailFlow,height:600}),t===2&&r.jsx(eF,{data:i.geoDistribution,height:"600px"}),t===3&&r.jsx(Sf,{data:i.timeSeries,timeRange:"24h"}),t===4&&r.jsx(Pf,{devices:i.deviceHealth,onDeviceSelect:v=>console.log("Selected device:",v),autoRefresh:l})]})]})]})},nF=()=>{const{enqueueSnackbar:e}=Jt(),[t,n]=f.useState([]),[o,s]=f.useState(!0),[i,a]=f.useState(!1),[l,u]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(null),[x,m]=f.useState(!1),[g,b]=f.useState({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),[y,v]=f.useState({});f.useEffect(()=>{C()},[]);const C=async()=>{try{s(!0);const w=await fetch("/api/users",{credentials:"include"});if(!w.ok)throw new Error("Failed to fetch users");const E=await w.json();n(E.users)}catch(w){console.error("Error fetching users:",w),e("Failed to load users",{variant:"error"})}finally{s(!1)}},k=()=>{const w={};return(!c||g.username)&&(g.username?/^[a-zA-Z0-9_-]{3,50}$/.test(g.username)||(w.username="Username must be 3-50 characters (letters, numbers, _, -)"):w.username="Username is required"),(!c||g.password)&&(!g.password&&!c?w.password="Password is required":g.password&&g.password.length<8&&(w.password="Password must be at least 8 characters"),g.password&&g.password!==g.confirmPassword&&(w.confirmPassword="Passwords do not match")),v(w),Object.keys(w).length===0},F=async()=>{if(k())try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),R=c?`/api/users/${h.id}`:"/api/users",N=c?"PUT":"POST",_={role:g.role,permissions:g.permissions};c?g.password&&(_.resetPassword=!0,_.newPassword=g.password):(_.username=g.username,_.password=g.password);const L=await fetch(R,{method:N,headers:{"Content-Type":"application/json","X-CSRF-Token":E},credentials:"include",body:JSON.stringify(_)});if(!L.ok){const B=await L.json();throw new Error(B.error||"Operation failed")}e(c?"User updated successfully":"User created successfully",{variant:"success"}),O(),C()}catch(w){console.error("Error saving user:",w),e(w.message,{variant:"error"})}},T=async()=>{try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),R=await fetch(`/api/users/${h.id}`,{method:"DELETE",headers:{"X-CSRF-Token":E},credentials:"include"});if(!R.ok){const N=await R.json();throw new Error(N.error||"Failed to delete user")}e("User deleted successfully",{variant:"success"}),u(!1),C()}catch(w){console.error("Error deleting user:",w),e(w.message,{variant:"error"})}},I=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:R}=await E.json();if(!(await fetch(`/api/users/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":R},credentials:"include",body:JSON.stringify({unlockAccount:!0})})).ok)throw new Error("Failed to unlock account");e("Account unlocked successfully",{variant:"success"}),C()}catch(E){console.error("Error unlocking account:",E),e("Failed to unlock account",{variant:"error"})}},D=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:R}=await E.json();if(!(await fetch(`/api/users/${w}/reset-2fa`,{method:"POST",headers:{"X-CSRF-Token":R},credentials:"include"})).ok)throw new Error("Failed to reset 2FA");e("2FA reset successfully",{variant:"success"}),C()}catch(E){console.error("Error resetting 2FA:",E),e("Failed to reset 2FA",{variant:"error"})}},V=(w=null)=>{w?(d(!0),p(w),b({username:w.username,password:"",confirmPassword:"",role:w.role,permissions:w.permissions||[]})):(d(!1),p(null),b({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]})),v({}),a(!0)},O=()=>{a(!1),d(!1),p(null),b({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),v({})},S=w=>{switch(w){case"admin":return r.jsx(Pl,{color:"error"});case"operator":return r.jsx(pb,{color:"primary"});case"viewer":return r.jsx(fb,{color:"action"});default:return r.jsx(wc,{})}},$=w=>{switch(w){case"admin":return"error";case"operator":return"primary";case"viewer":return"warning";default:return"default"}},P=w=>{switch(w){case"admin":return["read","write","delete","configure","manage_users"];case"operator":return["read","write"];case"viewer":return["read"];default:return[]}};return o?r.jsx(M,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(We,{})}):r.jsxs(M,{children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(A,{variant:"h4",component:"h1",children:"User Management"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:()=>V(),children:"Add User"})]}),r.jsx(ps,{component:fe,children:r.jsxs(ms,{children:[r.jsx(gs,{children:r.jsxs(Mn,{children:[r.jsx(ue,{children:"Username"}),r.jsx(ue,{children:"Role"}),r.jsx(ue,{children:"Permissions"}),r.jsx(ue,{children:"2FA"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{children:"Last Login"}),r.jsx(ue,{align:"right",children:"Actions"})]})}),r.jsx(xs,{children:t.map(w=>r.jsxs(Mn,{children:[r.jsx(ue,{children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[S(w.role),r.jsx(A,{children:w.username})]})}),r.jsx(ue,{children:r.jsx(we,{label:w.role,color:$(w.role),size:"small"})}),r.jsx(ue,{children:r.jsx(M,{display:"flex",gap:.5,flexWrap:"wrap",children:w.permissions.map(E=>r.jsx(we,{label:E,size:"small",variant:"outlined"},E))})}),r.jsx(ue,{children:w.twoFactorEnabled?r.jsx(we,{label:"Enabled",color:"success",size:"small",icon:r.jsx(hb,{})}):r.jsx(we,{label:"Disabled",variant:"outlined",size:"small"})}),r.jsx(ue,{children:w.isLocked?r.jsx(we,{label:"Locked",color:"error",size:"small",icon:r.jsx(go,{})}):r.jsx(we,{label:"Active",color:"success",size:"small"})}),r.jsx(ue,{children:w.lastLogin?new Date(w.lastLogin).toLocaleString():"Never"}),r.jsxs(ue,{align:"right",children:[r.jsx(it,{title:"Edit User",children:r.jsx(Pe,{size:"small",onClick:()=>V(w),children:r.jsx(Kf,{})})}),w.isLocked&&r.jsx(it,{title:"Unlock Account",children:r.jsx(Pe,{size:"small",onClick:()=>I(w.id),children:r.jsx(ns,{})})}),w.twoFactorEnabled&&r.jsx(it,{title:"Reset 2FA",children:r.jsx(Pe,{size:"small",onClick:()=>D(w.id),children:r.jsx(ar,{})})}),r.jsx(it,{title:"Delete User",children:r.jsx(Pe,{size:"small",color:"error",onClick:()=>{p(w),u(!0)},children:r.jsx(Kt,{})})})]})]},w.id))})]})}),r.jsxs(lt,{open:i,onClose:O,maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:c?"Edit User":"Add New User"}),r.jsx(ut,{children:r.jsxs(M,{display:"flex",flexDirection:"column",gap:2,mt:2,children:[!c&&r.jsx(Re,{label:"Username",value:g.username,onChange:w=>b({...g,username:w.target.value}),error:!!y.username,helperText:y.username,fullWidth:!0,required:!0}),r.jsx(Re,{label:c?"New Password (leave empty to keep current)":"Password",type:x?"text":"password",value:g.password,onChange:w=>b({...g,password:w.target.value}),error:!!y.password,helperText:y.password,fullWidth:!0,required:!c,InputProps:{endAdornment:r.jsx(Tr,{position:"end",children:r.jsx(Pe,{onClick:()=>m(!x),edge:"end",children:x?r.jsx(mc,{}):r.jsx(gc,{})})})}}),r.jsx(Re,{label:"Confirm Password",type:"password",value:g.confirmPassword,onChange:w=>b({...g,confirmPassword:w.target.value}),error:!!y.confirmPassword,helperText:y.confirmPassword,fullWidth:!0,required:!c||!!g.password}),r.jsxs(dt,{fullWidth:!0,children:[r.jsx(vt,{children:"Role"}),r.jsxs(gt,{value:g.role,onChange:w=>b({...g,role:w.target.value,permissions:P(w.target.value)}),label:"Role",children:[r.jsx(oe,{value:"admin",children:"Admin (Full Access)"}),r.jsx(oe,{value:"operator",children:"Engineering (Read/Write)"}),r.jsx(oe,{value:"viewer",children:"Helpdesk (Read Only)"})]}),r.jsx(Cc,{children:"Admin: Full system control | Engineering: Can modify settings | Helpdesk: View only"})]}),r.jsxs(M,{children:[r.jsx(A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Permissions:"}),r.jsx(M,{display:"flex",gap:.5,flexWrap:"wrap",children:g.permissions.map(w=>r.jsx(we,{label:w,size:"small",variant:"outlined"},w))})]})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:O,children:"Cancel"}),r.jsx(Y,{onClick:F,variant:"contained",children:c?"Update":"Create"})]})]}),r.jsxs(lt,{open:l,onClose:()=>u(!1),children:[r.jsx(ct,{children:"Confirm Delete"}),r.jsx(ut,{children:r.jsxs(xe,{severity:"warning",children:['Are you sure you want to delete user "',h?.username,'"? This action cannot be undone.']})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>u(!1),children:"Cancel"}),r.jsx(Y,{onClick:T,color:"error",variant:"contained",children:"Delete"})]})]})]})};var eo={},ul,kf;function qx(){return kf||(kf=1,ul={L:1,M:0,Q:3,H:2}),ul}var dl,If;function Kx(){return If||(If=1,dl={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),dl}var hl,Ef;function rF(){if(Ef)return hl;Ef=1;var e=Kx();function t(n){this.mode=e.MODE_8BIT_BYTE,this.data=n}return t.prototype={getLength:function(n){return this.data.length},write:function(n){for(var o=0;o<this.data.length;o++)n.put(this.data.charCodeAt(o),8)}},hl=t,hl}var fl,Tf;function oF(){if(Tf)return fl;Tf=1;var e=qx();function t(n,o){this.totalCount=n,this.dataCount=o}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(n,o){var s=t.getRsBlockTable(n,o);if(s==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+o);for(var i=s.length/3,a=new Array,l=0;l<i;l++)for(var u=s[l*3+0],c=s[l*3+1],d=s[l*3+2],h=0;h<u;h++)a.push(new t(c,d));return a},t.getRsBlockTable=function(n,o){switch(o){case e.L:return t.RS_BLOCK_TABLE[(n-1)*4+0];case e.M:return t.RS_BLOCK_TABLE[(n-1)*4+1];case e.Q:return t.RS_BLOCK_TABLE[(n-1)*4+2];case e.H:return t.RS_BLOCK_TABLE[(n-1)*4+3];default:return}},fl=t,fl}var pl,Af;function sF(){if(Af)return pl;Af=1;function e(){this.buffer=new Array,this.length=0}return e.prototype={get:function(t){var n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)==1},put:function(t,n){for(var o=0;o<n;o++)this.putBit((t>>>n-o-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},pl=e,pl}var ml,Mf;function Qx(){if(Mf)return ml;Mf=1;for(var e={glog:function(n){if(n<1)throw new Error("glog("+n+")");return e.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return e.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return ml=e,ml}var gl,Rf;function Xx(){if(Rf)return gl;Rf=1;var e=Qx();function t(n,o){if(n.length==null)throw new Error(n.length+"/"+o);for(var s=0;s<n.length&&n[s]==0;)s++;this.num=new Array(n.length-s+o);for(var i=0;i<n.length-s;i++)this.num[i]=n[i+s]}return t.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var o=new Array(this.getLength()+n.getLength()-1),s=0;s<this.getLength();s++)for(var i=0;i<n.getLength();i++)o[s+i]^=e.gexp(e.glog(this.get(s))+e.glog(n.get(i)));return new t(o,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var o=e.glog(this.get(0))-e.glog(n.get(0)),s=new Array(this.getLength()),i=0;i<this.getLength();i++)s[i]=this.get(i);for(var i=0;i<n.getLength();i++)s[i]^=e.gexp(e.glog(n.get(i))+o);return new t(s,0).mod(n)}},gl=t,gl}var xl,Df;function iF(){if(Df)return xl;Df=1;var e=Kx(),t=Xx(),n=Qx(),o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var a=i<<10;s.getBCHDigit(a)-s.getBCHDigit(s.G15)>=0;)a^=s.G15<<s.getBCHDigit(a)-s.getBCHDigit(s.G15);return(i<<10|a)^s.G15_MASK},getBCHTypeNumber:function(i){for(var a=i<<12;s.getBCHDigit(a)-s.getBCHDigit(s.G18)>=0;)a^=s.G18<<s.getBCHDigit(a)-s.getBCHDigit(s.G18);return i<<12|a},getBCHDigit:function(i){for(var a=0;i!=0;)a++,i>>>=1;return a},getPatternPosition:function(i){return s.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,a,l){switch(i){case o.PATTERN000:return(a+l)%2==0;case o.PATTERN001:return a%2==0;case o.PATTERN010:return l%3==0;case o.PATTERN011:return(a+l)%3==0;case o.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2==0;case o.PATTERN101:return a*l%2+a*l%3==0;case o.PATTERN110:return(a*l%2+a*l%3)%2==0;case o.PATTERN111:return(a*l%3+(a+l)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var a=new t([1],0),l=0;l<i;l++)a=a.multiply(new t([1,n.gexp(l)],0));return a},getLengthInBits:function(i,a){if(1<=a&&a<10)switch(i){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(a<27)switch(i){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(a<41)switch(i){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+a)},getLostPoint:function(i){for(var a=i.getModuleCount(),l=0,u=0;u<a;u++)for(var c=0;c<a;c++){for(var d=0,h=i.isDark(u,c),p=-1;p<=1;p++)if(!(u+p<0||a<=u+p))for(var x=-1;x<=1;x++)c+x<0||a<=c+x||p==0&&x==0||h==i.isDark(u+p,c+x)&&d++;d>5&&(l+=3+d-5)}for(var u=0;u<a-1;u++)for(var c=0;c<a-1;c++){var m=0;i.isDark(u,c)&&m++,i.isDark(u+1,c)&&m++,i.isDark(u,c+1)&&m++,i.isDark(u+1,c+1)&&m++,(m==0||m==4)&&(l+=3)}for(var u=0;u<a;u++)for(var c=0;c<a-6;c++)i.isDark(u,c)&&!i.isDark(u,c+1)&&i.isDark(u,c+2)&&i.isDark(u,c+3)&&i.isDark(u,c+4)&&!i.isDark(u,c+5)&&i.isDark(u,c+6)&&(l+=40);for(var c=0;c<a;c++)for(var u=0;u<a-6;u++)i.isDark(u,c)&&!i.isDark(u+1,c)&&i.isDark(u+2,c)&&i.isDark(u+3,c)&&i.isDark(u+4,c)&&!i.isDark(u+5,c)&&i.isDark(u+6,c)&&(l+=40);for(var g=0,c=0;c<a;c++)for(var u=0;u<a;u++)i.isDark(u,c)&&g++;var b=Math.abs(100*g/a/a-50)/5;return l+=b*10,l}};return xl=s,xl}var yl,Ff;function aF(){if(Ff)return yl;Ff=1;var e=rF(),t=oF(),n=sF(),o=iF(),s=Xx();function i(l,u){this.typeNumber=l,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var a=i.prototype;return a.addData=function(l){var u=new e(l);this.dataList.push(u),this.dataCache=null},a.isDark=function(l,u){if(l<0||this.moduleCount<=l||u<0||this.moduleCount<=u)throw new Error(l+","+u);return this.modules[l][u]},a.getModuleCount=function(){return this.moduleCount},a.make=function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var u=t.getRSBlocks(l,this.errorCorrectLevel),c=new n,d=0,h=0;h<u.length;h++)d+=u[h].dataCount;for(var h=0;h<this.dataList.length;h++){var p=this.dataList[h];c.put(p.mode,4),c.put(p.getLength(),o.getLengthInBits(p.mode,l)),p.write(c)}if(c.getLengthInBits()<=d*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},a.makeImpl=function(l,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,u),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},a.setupPositionProbePattern=function(l,u){for(var c=-1;c<=7;c++)if(!(l+c<=-1||this.moduleCount<=l+c))for(var d=-1;d<=7;d++)u+d<=-1||this.moduleCount<=u+d||(0<=c&&c<=6&&(d==0||d==6)||0<=d&&d<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=d&&d<=4?this.modules[l+c][u+d]=!0:this.modules[l+c][u+d]=!1)},a.getBestMaskPattern=function(){for(var l=0,u=0,c=0;c<8;c++){this.makeImpl(!0,c);var d=o.getLostPoint(this);(c==0||l>d)&&(l=d,u=c)}return u},a.createMovieClip=function(l,u,c){var d=l.createEmptyMovieClip(u,c),h=1;this.make();for(var p=0;p<this.modules.length;p++)for(var x=p*h,m=0;m<this.modules[p].length;m++){var g=m*h,b=this.modules[p][m];b&&(d.beginFill(0,100),d.moveTo(g,x),d.lineTo(g+h,x),d.lineTo(g+h,x+h),d.lineTo(g,x+h),d.endFill())}return d},a.setupTimingPattern=function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},a.setupPositionAdjustPattern=function(){for(var l=o.getPatternPosition(this.typeNumber),u=0;u<l.length;u++)for(var c=0;c<l.length;c++){var d=l[u],h=l[c];if(this.modules[d][h]==null)for(var p=-2;p<=2;p++)for(var x=-2;x<=2;x++)p==-2||p==2||x==-2||x==2||p==0&&x==0?this.modules[d+p][h+x]=!0:this.modules[d+p][h+x]=!1}},a.setupTypeNumber=function(l){for(var u=o.getBCHTypeNumber(this.typeNumber),c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},a.setupTypeInfo=function(l,u){for(var c=this.errorCorrectLevel<<3|u,d=o.getBCHTypeInfo(c),h=0;h<15;h++){var p=!l&&(d>>h&1)==1;h<6?this.modules[h][8]=p:h<8?this.modules[h+1][8]=p:this.modules[this.moduleCount-15+h][8]=p}for(var h=0;h<15;h++){var p=!l&&(d>>h&1)==1;h<8?this.modules[8][this.moduleCount-h-1]=p:h<9?this.modules[8][15-h-1+1]=p:this.modules[8][15-h-1]=p}this.modules[this.moduleCount-8][8]=!l},a.mapData=function(l,u){for(var c=-1,d=this.moduleCount-1,h=7,p=0,x=this.moduleCount-1;x>0;x-=2)for(x==6&&x--;;){for(var m=0;m<2;m++)if(this.modules[d][x-m]==null){var g=!1;p<l.length&&(g=(l[p]>>>h&1)==1);var b=o.getMask(u,d,x-m);b&&(g=!g),this.modules[d][x-m]=g,h--,h==-1&&(p++,h=7)}if(d+=c,d<0||this.moduleCount<=d){d-=c,c=-c;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(l,u,c){for(var d=t.getRSBlocks(l,u),h=new n,p=0;p<c.length;p++){var x=c[p];h.put(x.mode,4),h.put(x.getLength(),o.getLengthInBits(x.mode,l)),x.write(h)}for(var m=0,p=0;p<d.length;p++)m+=d[p].dataCount;if(h.getLengthInBits()>m*8)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+m*8+")");for(h.getLengthInBits()+4<=m*8&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=m*8||(h.put(i.PAD0,8),h.getLengthInBits()>=m*8));)h.put(i.PAD1,8);return i.createBytes(h,d)},i.createBytes=function(l,u){for(var c=0,d=0,h=0,p=new Array(u.length),x=new Array(u.length),m=0;m<u.length;m++){var g=u[m].dataCount,b=u[m].totalCount-g;d=Math.max(d,g),h=Math.max(h,b),p[m]=new Array(g);for(var y=0;y<p[m].length;y++)p[m][y]=255&l.buffer[y+c];c+=g;var v=o.getErrorCorrectPolynomial(b),C=new s(p[m],v.getLength()-1),k=C.mod(v);x[m]=new Array(v.getLength()-1);for(var y=0;y<x[m].length;y++){var F=y+k.getLength()-x[m].length;x[m][y]=F>=0?k.get(F):0}}for(var T=0,y=0;y<u.length;y++)T+=u[y].totalCount;for(var I=new Array(T),D=0,y=0;y<d;y++)for(var m=0;m<u.length;m++)y<p[m].length&&(I[D++]=p[m][y]);for(var y=0;y<h;y++)for(var m=0;m<u.length;m++)y<x[m].length&&(I[D++]=x[m][y]);return I},yl=i,yl}var Xs={},Of;function lF(){if(Of)return Xs;Of=1,Object.defineProperty(Xs,"__esModule",{value:!0});var e=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var h=arguments[d];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(c[p]=h[p])}return c},t=tp(),n=i(t),o=op(),s=i(o);function i(c){return c&&c.__esModule?c:{default:c}}function a(c,d){var h={};for(var p in c)d.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(c,p)&&(h[p]=c[p]);return h}var l={bgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,bgD:n.default.string.isRequired,fgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,fgD:n.default.string.isRequired,size:n.default.number.isRequired,title:n.default.string,viewBoxSize:n.default.number.isRequired,xmlns:n.default.string},u=(0,o.forwardRef)(function(c,d){var h=c.bgColor,p=c.bgD,x=c.fgD,m=c.fgColor,g=c.size,b=c.title,y=c.viewBoxSize,v=c.xmlns,C=v===void 0?"http://www.w3.org/2000/svg":v,k=a(c,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",e({},k,{height:g,ref:d,viewBox:"0 0 "+y+" "+y,width:g,xmlns:C}),b?s.default.createElement("title",null,b):null,s.default.createElement("path",{d:p,fill:h}),s.default.createElement("path",{d:x,fill:m}))});return u.displayName="QRCodeSvg",u.propTypes=l,Xs.default=u,Xs}var Lf;function cF(){if(Lf)return eo;Lf=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.QRCode=void 0;var e=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var y=arguments[b];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(g[v]=y[v])}return g},t=tp(),n=h(t),o=qx(),s=h(o),i=aF(),a=h(i),l=op(),u=h(l),c=lF(),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function p(g,b){var y={};for(var v in g)b.indexOf(v)>=0||Object.prototype.hasOwnProperty.call(g,v)&&(y[v]=g[v]);return y}var x={bgColor:n.default.oneOfType([n.default.object,n.default.string]),fgColor:n.default.oneOfType([n.default.object,n.default.string]),level:n.default.string,size:n.default.number,value:n.default.string.isRequired},m=(0,l.forwardRef)(function(g,b){var y=g.bgColor,v=y===void 0?"#FFFFFF":y,C=g.fgColor,k=C===void 0?"#000000":C,F=g.level,T=F===void 0?"L":F,I=g.size,D=I===void 0?256:I,V=g.value,O=p(g,["bgColor","fgColor","level","size","value"]),S=new a.default(-1,s.default[T]);S.addData(V),S.make();var $=S.modules;return u.default.createElement(d.default,e({},O,{bgColor:v,bgD:$.map(function(P,w){return P.map(function(E,R){return E?"":"M "+R+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:k,fgD:$.map(function(P,w){return P.map(function(E,R){return E?"M "+R+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:b,size:D,viewBoxSize:$.length}))});return eo.QRCode=m,m.displayName="QRCode",m.propTypes=x,eo.default=m,eo}var uF=cF();const dF=Sc(uF),hF=({onComplete:e})=>{const{enqueueSnackbar:t}=Jt(),[n,o]=f.useState(0),[s,i]=f.useState(!1),[a,l]=f.useState(null),[u,c]=f.useState(""),[d,h]=f.useState([]),p=["Generate QR Code","Scan with App","Verify Setup"],x=async()=>{i(!0);try{const y=await fetch("/api/mfa/totp/setup",{method:"POST",credentials:"include"});if(y.ok){const v=await y.json();l(v.data),o(1)}else throw new Error("Failed to generate TOTP")}catch{t("Failed to setup authenticator",{variant:"error"})}finally{i(!1)}},m=async()=>{if(u.length!==6){t("Please enter a 6-digit code",{variant:"warning"});return}i(!0);try{const y=await fetch("/api/mfa/totp/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:u})});if(y.ok){const v=await y.json();v.backupCodes&&h(v.backupCodes),o(2),t("Authenticator app enabled successfully!",{variant:"success"}),setTimeout(()=>{e()},2e3)}else{const v=await y.json();throw new Error(v.error||"Invalid code")}}catch(y){t(y.message,{variant:"error"})}finally{i(!1)}},g=y=>{navigator.clipboard.writeText(y),t("Copied to clipboard",{variant:"success"})},b=()=>{const y=d.join(`
`),v=new Blob([y],{type:"text/plain"}),C=URL.createObjectURL(v),k=document.createElement("a");k.href=C,k.download="backup-codes.txt",k.click(),URL.revokeObjectURL(C)};return r.jsxs(M,{children:[r.jsx(Hr,{activeStep:n,sx:{mb:4},children:p.map(y=>r.jsx(zn,{children:r.jsx(Un,{children:y})},y))}),n===0&&r.jsxs(M,{textAlign:"center",children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Setup Authenticator App"}),r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Use Microsoft Authenticator, Google Authenticator, or any compatible TOTP app"}),r.jsx(Y,{variant:"contained",size:"large",onClick:x,disabled:s,startIcon:s?r.jsx(We,{size:20}):r.jsx(mb,{}),children:s?"Generating...":"Generate QR Code"})]}),n===1&&a&&r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{elevation:2,sx:{p:3,textAlign:"center"},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Scan QR Code"}),r.jsx(M,{sx:{my:3,bgcolor:"white",p:2,borderRadius:1},children:r.jsx(dF,{value:a.uri,size:200})}),r.jsx(A,{variant:"caption",color:"textSecondary",children:"Scan this QR code with your authenticator app"})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{elevation:2,sx:{p:3},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Manual Entry"}),r.jsx(xe,{severity:"info",sx:{mb:2},children:"Can't scan? Enter this key manually:"}),r.jsxs(M,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,mb:2},children:[r.jsx(A,{variant:"body2",sx:{fontFamily:"monospace",wordBreak:"break-all"},children:a.manualEntryKey}),r.jsx(Y,{size:"small",startIcon:r.jsx(Bt,{}),onClick:()=>g(a.secret),sx:{mt:1},children:"Copy"})]}),r.jsx(A,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Enter Verification Code"}),r.jsx(Re,{fullWidth:!0,placeholder:"000000",value:u,onChange:y=>c(y.target.value.replace(/\D/g,"").slice(0,6)),inputProps:{maxLength:6,style:{fontSize:"1.5rem",letterSpacing:"0.5rem",textAlign:"center"}},sx:{mb:2}}),r.jsx(Y,{fullWidth:!0,variant:"contained",onClick:m,disabled:s||u.length!==6,children:s?r.jsx(We,{size:24}):"Verify & Enable"})]})})]}),n===2&&r.jsxs(M,{textAlign:"center",children:[r.jsx(Ne,{color:"success",sx:{fontSize:64,mb:2}}),r.jsx(A,{variant:"h5",gutterBottom:!0,children:"Setup Complete!"}),r.jsx(A,{variant:"body1",color:"textSecondary",paragraph:!0,children:"Your authenticator app has been successfully configured."}),d.length>0&&r.jsxs(fe,{sx:{p:3,mt:3,bgcolor:"warning.light",color:"warning.contrastText"},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(A,{variant:"body2",paragraph:!0,children:"Save these codes in a safe place. Each can be used once if you lose access to your authenticator."}),r.jsx(Q,{container:!0,spacing:1,sx:{mb:2},children:d.map((y,v)=>r.jsx(Q,{item:!0,xs:6,children:r.jsx(A,{variant:"body2",sx:{fontFamily:"monospace"},children:y})},v))}),r.jsx(Y,{variant:"contained",size:"small",onClick:b,sx:{bgcolor:"warning.dark"},children:"Download Codes"})]})]})]})},fF=({onComplete:e,existingDevices:t=[]})=>{const{enqueueSnackbar:n}=Jt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(""),[c,d]=f.useState(t),[h,p]=f.useState(null),x=["Name Your Key","Insert Security Key","Verify Registration"],m=()=>window.PublicKeyCredential!==void 0,g=async()=>{if(!l.trim()){n("Please enter a name for your security key",{variant:"warning"});return}if(!m()){n("WebAuthn is not supported in this browser",{variant:"error"});return}a(!0),s(1);try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:k}=await C.json(),F=await fetch("/api/mfa/fido2/register/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":k},credentials:"include"});if(!F.ok)throw new Error("Failed to start registration");const{data:T}=await F.json();console.log("Received options from server:",T);let I;typeof T.user.id=="string"?I=y(T.user.id):T.user.id instanceof Object&&T.user.id.type==="Buffer"?I=new Uint8Array(T.user.id.data).buffer:I=T.user.id;const D={...T,challenge:y(T.challenge),user:{...T.user,id:I},pubKeyCredParams:T.pubKeyCredParams||[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:T.authenticatorSelection||{authenticatorAttachment:"cross-platform",userVerification:"preferred",requireResidentKey:!1},attestation:T.attestation||"direct",timeout:T.timeout||6e4};s(2),n("Please interact with your security key...",{variant:"info"});const V=await navigator.credentials.create({publicKey:D});if(!V)throw new Error("Failed to create credential");const O={id:V.id,rawId:v(V.rawId),type:V.type,response:{clientDataJSON:v(V.response.clientDataJSON),attestationObject:v(V.response.attestationObject)}},S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:$}=await S.json(),P=await fetch("/api/mfa/fido2/register/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":$},credentials:"include",body:JSON.stringify({credential:O,deviceName:l.trim()})});if(!P.ok){const R=await P.json();throw new Error(R.error||"Failed to complete registration")}const E={id:(await P.json()).credentialID,name:l.trim(),registered:new Date().toISOString(),lastUsed:null};d([...c,E]),s(3),n("Security key registered successfully!",{variant:"success"}),setTimeout(()=>{s(0),u(""),e&&e(E)},2e3)}catch(C){console.error("Registration error:",C),C.name==="NotAllowedError"?n("Registration was cancelled or timed out",{variant:"warning"}):C.name==="InvalidStateError"?n("This key may already be registered",{variant:"warning"}):n(C.message||"Failed to register security key",{variant:"error"}),s(0)}finally{a(!1)}},b=async C=>{try{if(!(await fetch(`/api/mfa/fido2/devices/${C}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to remove device");d(c.filter(F=>F.id!==C)),n("Security key removed successfully",{variant:"success"})}catch{n("Failed to remove security key",{variant:"error"})}finally{p(null)}},y=C=>{let k=C.replace(/-/g,"+").replace(/_/g,"/");const F=(4-k.length%4)%4;F&&(k+="=".repeat(F));const T=window.atob(k),I=T.length,D=new Uint8Array(I);for(let V=0;V<I;V++)D[V]=T.charCodeAt(V);return D.buffer},v=C=>{const k=new Uint8Array(C);let F="";for(let T=0;T<k.byteLength;T++)F+=String.fromCharCode(k[T]);return window.btoa(F).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};return m()?r.jsxs(M,{children:[c.length>0&&r.jsxs(M,{mb:3,children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Registered Security Keys"}),r.jsx(ot,{children:c.map(C=>r.jsxs(ce,{children:[r.jsx(es,{sx:{mr:2}}),r.jsx(se,{primary:C.name,secondary:`Registered: ${new Date(C.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Pe,{edge:"end",onClick:()=>p(C),color:"error",children:r.jsx(Kt,{})})})]},C.id))})]}),r.jsxs(fe,{variant:"outlined",sx:{p:3},children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Add New Security Key"}),r.jsx(Hr,{activeStep:o,sx:{mb:3},children:x.map(C=>r.jsx(zn,{children:r.jsx(Un,{children:C})},C))}),r.jsxs(M,{children:[o===0&&r.jsxs(M,{children:[r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Give your security key a name to identify it later."}),r.jsx(Re,{fullWidth:!0,label:"Security Key Name",value:l,onChange:C=>u(C.target.value),placeholder:"e.g., YubiKey 5C, Work Key, etc.",disabled:i,sx:{mb:2}}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(es,{}),onClick:g,disabled:i||!l.trim(),fullWidth:!0,children:"Start Registration"})]}),o===1&&r.jsxs(M,{textAlign:"center",children:[r.jsx(gb,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Insert Your Security Key"}),r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Please insert your security key into a USB port or hold it near the NFC reader."}),r.jsx(We,{})]}),o===2&&r.jsxs(M,{textAlign:"center",children:[r.jsx(Qf,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Verify Your Identity"}),r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Touch your security key or use your biometric verification when prompted."}),r.jsx(We,{})]}),o===3&&r.jsxs(M,{textAlign:"center",children:[r.jsx(Fn,{sx:{fontSize:64,color:"success.main",mb:2}}),r.jsx(A,{variant:"h6",color:"success.main",gutterBottom:!0,children:"Registration Successful!"}),r.jsx(A,{variant:"body2",color:"textSecondary",children:"Your security key has been registered successfully."})]})]}),r.jsx(xe,{severity:"info",sx:{mt:3},children:r.jsxs(A,{variant:"body2",children:[r.jsx("strong",{children:"Supported devices:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"YubiKey (all models)"}),r.jsx("li",{children:"Windows Hello (fingerprint, face, PIN)"}),r.jsx("li",{children:"Touch ID / Face ID (macOS, iOS)"}),r.jsx("li",{children:"Android biometrics"}),r.jsx("li",{children:"Other FIDO2-compatible security keys"})]})]})})]}),r.jsxs(lt,{open:!!h,onClose:()=>p(null),children:[r.jsx(ct,{children:"Remove Security Key"}),r.jsxs(ut,{children:[r.jsxs(A,{children:['Are you sure you want to remove "',h?.name,'"?']}),r.jsx(A,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"You won't be able to use this key for authentication anymore."})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>p(null),children:"Cancel"}),r.jsx(Y,{onClick:()=>b(h.id),color:"error",variant:"contained",children:"Remove"})]})]})]}):r.jsx(xe,{severity:"warning",children:"Your browser doesn't support WebAuthn/Security Keys. Please use a modern browser like Chrome, Firefox, Safari, or Edge."})},pF=()=>{const{enqueueSnackbar:e}=Jt(),[t,n]=f.useState(!0),[o,s]=f.useState(null),[i,a]=f.useState(null),[l,u]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1),[x,m]=f.useState([]),[g,b]=f.useState(!1),[y,v]=f.useState({current:"",new:"",confirm:""});f.useEffect(()=>{C(),k()},[]);const C=async()=>{try{const S=await fetch("/api/auth/me",{credentials:"include"});if(S.ok){const $=await S.json();a($.user)}}catch(S){console.error("Failed to fetch user info:",S)}},k=async()=>{try{n(!0);const S=await fetch("/api/mfa/status",{credentials:"include"});if(S.ok){const $=await S.json();s($.data)}else throw new Error("Failed to fetch MFA status")}catch(S){console.error("MFA status error:",S),e("Failed to load MFA status",{variant:"error"})}finally{n(!1)}},F=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:$}=await S.json();if((await fetch("/api/mfa/totp/disable",{method:"POST",headers:{"X-CSRF-Token":$},credentials:"include"})).ok)e("TOTP disabled successfully",{variant:"success"}),k();else throw new Error("Failed to disable TOTP")}catch{e("Failed to disable TOTP",{variant:"error"})}},T=async S=>{try{const $=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await $.json();if((await fetch(`/api/mfa/fido2/devices/${S}`,{method:"DELETE",headers:{"X-CSRF-Token":P},credentials:"include"})).ok)e("Device removed successfully",{variant:"success"}),k();else throw new Error("Failed to remove device")}catch{e("Failed to remove device",{variant:"error"})}},I=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:$}=await S.json(),P=await fetch("/api/mfa/backup/generate",{method:"POST",headers:{"X-CSRF-Token":$},credentials:"include"});if(P.ok){const w=await P.json();m(w.codes),p(!0),k()}else throw new Error("Failed to generate backup codes")}catch{e("Failed to generate backup codes",{variant:"error"})}},D=async()=>{if(y.new!==y.confirm){e("Passwords do not match",{variant:"error"});return}try{const S=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({currentPassword:y.current,newPassword:y.new})});if(S.ok)e("Password changed successfully",{variant:"success"}),b(!1),v({current:"",new:"",confirm:""});else{const $=await S.json();throw new Error($.error||"Failed to change password")}}catch(S){e(S.message,{variant:"error"})}},V=()=>{const S=x.join(`
`),$=new Blob([S],{type:"text/plain"}),P=URL.createObjectURL($),w=document.createElement("a");w.href=P,w.download="backup-codes.txt",w.click(),URL.revokeObjectURL(P)},O=()=>{navigator.clipboard.writeText(x.join(`
`)),e("Backup codes copied to clipboard",{variant:"success"})};return t?r.jsx(M,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:r.jsx(We,{})}):r.jsxs(M,{sx:{p:3},children:[r.jsx(A,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Profile & Security"}),r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(ze,{elevation:3,children:[r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(wc,{sx:{mr:1}}),r.jsx(A,{variant:"h6",children:"User Information"})]}),r.jsxs(ot,{children:[r.jsx(ce,{children:r.jsx(se,{primary:"Username",secondary:i?.username||"N/A"})}),r.jsx(ce,{children:r.jsx(se,{primary:"Role",secondary:r.jsx(we,{size:"small",label:i?.role||"N/A",color:i?.role==="admin"?"error":"primary"})})}),r.jsx(ce,{children:r.jsx(se,{primary:"Account Created",secondary:i?.createdAt?new Date(i.createdAt).toLocaleDateString():"N/A"})})]})]}),r.jsx(xb,{children:r.jsx(Y,{startIcon:r.jsx(ar,{}),onClick:()=>b(!0),fullWidth:!0,children:"Change Password"})})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ze,{elevation:3,children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(Fn,{sx:{mr:1}}),r.jsx(A,{variant:"h6",children:"Two-Factor Authentication"})]}),r.jsx(M,{mb:2,children:r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(pc,{sx:{mr:1}}),r.jsx(A,{children:"Authenticator App"})]}),o?.totp?.enabled?r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(we,{size:"small",label:"Enabled",color:"success",icon:r.jsx(Ne,{})}),r.jsx(Pe,{size:"small",onClick:F,color:"error",children:r.jsx(Kt,{})})]}):r.jsx(Y,{size:"small",startIcon:r.jsx(ir,{}),onClick:()=>u(!0),children:"Setup"})]})}),r.jsx(St,{sx:{my:2}}),r.jsxs(M,{mb:2,children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(es,{sx:{mr:1}}),r.jsx(A,{children:"Security Keys"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(ir,{}),onClick:()=>d(!0),children:"Add Key"})]}),o?.fido2?.devices?.length>0?r.jsx(ot,{dense:!0,children:o.fido2.devices.map(S=>r.jsxs(ce,{children:[r.jsx(se,{primary:S.name,secondary:`Added: ${new Date(S.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Pe,{edge:"end",size:"small",onClick:()=>T(S.id),color:"error",children:r.jsx(Kt,{})})})]},S.id))}):r.jsx(A,{variant:"body2",color:"textSecondary",children:"No security keys registered"})]}),r.jsx(St,{sx:{my:2}}),r.jsxs(M,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsx(A,{children:"Backup Codes"}),r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[o?.backup?.remaining>0&&r.jsx(we,{size:"small",label:`${o.backup.remaining} remaining`,color:o.backup.remaining<3?"warning":"default"}),r.jsx(Y,{size:"small",onClick:I,startIcon:o?.backup?.remaining>0?r.jsx(gn,{}):r.jsx(ir,{}),children:o?.backup?.remaining>0?"Regenerate":"Generate"})]})]}),o?.backup?.remaining<3&&o?.backup?.remaining>0&&r.jsx(xe,{severity:"warning",sx:{mt:1},children:"Low on backup codes. Generate new ones soon."})]})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(xe,{severity:"info",variant:"outlined",children:r.jsxs(A,{variant:"body2",children:[r.jsx("strong",{children:"Security Tips:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"Enable two-factor authentication for enhanced security"}),r.jsx("li",{children:"Use a unique, strong password for your account"}),r.jsx("li",{children:"Keep your backup codes in a safe place"}),r.jsx("li",{children:"Regularly review your security settings"})]})]})})})]}),r.jsxs(lt,{open:l,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(ct,{children:"Setup Two-Factor Authentication"}),r.jsx(ut,{children:r.jsx(hF,{onComplete:()=>{u(!1),k()}})})]}),r.jsxs(lt,{open:h,onClose:()=>p(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Tn,{color:"warning",sx:{mr:1}}),"Backup Codes Generated"]})}),r.jsxs(ut,{children:[r.jsx(xe,{severity:"warning",sx:{mb:2},children:"Save these codes in a secure location. Each code can only be used once."}),r.jsx(fe,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:r.jsx(Q,{container:!0,spacing:1,children:x.map((S,$)=>r.jsx(Q,{item:!0,xs:6,children:r.jsx(A,{variant:"body2",fontFamily:"monospace",children:S})},$))})})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:O,startIcon:r.jsx(Bt,{}),children:"Copy"}),r.jsx(Y,{onClick:V,startIcon:r.jsx(or,{}),children:"Download"}),r.jsx(Y,{onClick:()=>p(!1),variant:"contained",children:"Done"})]})]}),r.jsxs(lt,{open:g,onClose:()=>b(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Change Password"}),r.jsx(ut,{children:r.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[r.jsx(Re,{label:"Current Password",type:"password",value:y.current,onChange:S=>v({...y,current:S.target.value}),fullWidth:!0}),r.jsx(Re,{label:"New Password",type:"password",value:y.new,onChange:S=>v({...y,new:S.target.value}),fullWidth:!0,helperText:"At least 8 characters"}),r.jsx(Re,{label:"Confirm New Password",type:"password",value:y.confirm,onChange:S=>v({...y,confirm:S.target.value}),fullWidth:!0,error:y.confirm&&y.new!==y.confirm,helperText:y.confirm&&y.new!==y.confirm?"Passwords do not match":""})]})}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>b(!1),children:"Cancel"}),r.jsx(Y,{onClick:D,variant:"contained",disabled:!y.current||!y.new||y.new!==y.confirm,children:"Change Password"})]})]}),r.jsxs(lt,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(ct,{children:"Setup Security Keys"}),r.jsx(ut,{children:r.jsx(fF,{existingDevices:o?.fido2?.devices||[],onComplete:()=>{d(!1),k()}})}),r.jsx(Ct,{children:r.jsx(Y,{onClick:()=>d(!1),children:"Close"})})]})]})},mF=({onComplete:e})=>{const{apiRequest:t}=Wt(),[n,o]=f.useState(0),[s,i]=f.useState(!1),[a,l]=f.useState(null),[u,c]=f.useState(null),[d,h]=f.useState(""),[p,x]=f.useState(null),[m,g]=f.useState(null),[b,y]=f.useState(!1),[v,C]=f.useState(!1),[k,F]=f.useState({displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api",useClientSecret:!1,clientSecretExpiry:365}),[T,I]=f.useState(null),D=["Enter Tenant","Admin Login","Configure App","Create App"];f.useEffect(()=>{let P;return b&&p&&(P=setInterval(async()=>{try{const E=await(await t("/api/azure-setup/setup/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p})})).json();E.success?(y(!1),C(!0),setTimeout(()=>o(2),2e3)):E.error&&(y(!1),l(E.error))}catch(w){y(!1),l(w.message)}},5e3)),()=>clearInterval(P)},[b,p]);const V=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:d})})).json();w.success?(x(w.flowId),g(w),y(!0),o(1)):l(w.error||"Failed to start authentication")}catch(P){l("Failed to start authentication: "+P.message)}finally{i(!1)}},O=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p,appConfig:k})})).json();w.success?(I(w),c("Application created successfully!"),setTimeout(()=>{e({application:w.application,config:k})},3e3)):l(w.error||"Failed to create application")}catch(P){l("Failed to create application: "+P.message)}finally{i(!1)}},S=P=>{navigator.clipboard.writeText(P),c("Copied to clipboard!"),setTimeout(()=>c(null),2e3)},$=()=>{switch(n){case 0:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Enter Your Azure Tenant Information"}),r.jsx(Re,{fullWidth:!0,label:"Tenant ID or Domain",value:d,onChange:P=>h(P.target.value),placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(xe,{severity:"info",sx:{mt:3},children:[r.jsx(Ze,{children:"What you'll need:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"Global Administrator access to your Azure AD tenant"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"Permission to create applications in Azure AD"})]})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:V,disabled:!d||s,startIcon:s?r.jsx(We,{size:20}):r.jsx(Fn,{}),children:s?"Starting...":"Start Admin Authentication"})]});case 1:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Admin Authentication"}),m&&r.jsxs(r.Fragment,{children:[r.jsx(ze,{sx:{mt:3,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h4",align:"center",gutterBottom:!0,children:m.userCode}),r.jsx(M,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(Bt,{}),onClick:()=>S(m.userCode),children:"Copy Code"})})]})}),r.jsxs(M,{mt:3,textAlign:"center",children:[r.jsx(A,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(jc,{}),href:m.verificationUrl,target:"_blank",sx:{mt:1},children:m.verificationUrl})]}),b&&r.jsxs(M,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(We,{size:20,sx:{mr:2}}),r.jsx(A,{children:"Waiting for authentication..."})]}),r.jsxs(xe,{severity:"info",sx:{mt:3},children:[r.jsx(Ze,{children:"Instructions"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"1. Click the link above or go to microsoft.com/devicelogin"})}),r.jsx(ce,{children:r.jsx(se,{primary:"2. Enter the code shown above"})}),r.jsx(ce,{children:r.jsx(se,{primary:"3. Sign in with your Global Administrator account"})}),r.jsx(ce,{children:r.jsx(se,{primary:"4. Approve the permissions requested"})})]})]})]})]});case 2:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),r.jsx(Re,{fullWidth:!0,label:"Application Name",value:k.displayName,onChange:P=>F({...k,displayName:P.target.value}),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication Method"}),r.jsxs(gt,{value:k.authMethod,onChange:P=>F({...k,authMethod:P.target.value}),label:"Authentication Method",children:[r.jsx(oe,{value:"device_code",children:"Device Code Flow (User Context)"}),r.jsx(oe,{value:"client_credentials",children:"Client Credentials (App-Only)"})]}),r.jsx(Cc,{children:"Device Code: Send as specific user | Client Credentials: Send as any user"})]}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(gt,{value:k.apiMethod,onChange:P=>F({...k,apiMethod:P.target.value}),label:"API Method",children:[r.jsx(oe,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(oe,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),k.apiMethod==="smtp_oauth"&&r.jsxs(xe,{severity:"warning",sx:{mt:2},children:[r.jsx(Ze,{children:"SMTP AUTH Required"}),r.jsx(A,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(A,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(A,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:P=>P.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:P=>P.palette.mode==="dark"?"#90caf9":"#1976d2",border:P=>`1px solid ${P.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(A,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),k.authMethod==="client_credentials"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{control:r.jsx(jn,{checked:k.useClientSecret,onChange:P=>F({...k,useClientSecret:P.target.checked})}),label:"Create Client Secret",sx:{mt:2}}),k.useClientSecret&&r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Secret Expiry"}),r.jsxs(gt,{value:k.clientSecretExpiry,onChange:P=>F({...k,clientSecretExpiry:P.target.value}),label:"Secret Expiry",children:[r.jsx(oe,{value:90,children:"3 Months"}),r.jsx(oe,{value:180,children:"6 Months"}),r.jsx(oe,{value:365,children:"1 Year"}),r.jsx(oe,{value:730,children:"2 Years (Maximum)"})]})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>o(3),startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(ze,{sx:{mt:2},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"Application Name",secondary:k.displayName})}),r.jsx(ce,{children:r.jsx(se,{primary:"Authentication Method",secondary:k.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ce,{children:r.jsx(se,{primary:"API Method",secondary:k.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})}),k.useClientSecret&&r.jsx(ce,{children:r.jsx(se,{primary:"Client Secret",secondary:`Expires in ${k.clientSecretExpiry} days`})})]})]})}),T?r.jsxs(xe,{severity:"success",sx:{mt:3},children:[r.jsx(Ze,{children:"Application Created Successfully!"}),r.jsxs(A,{children:[r.jsx("strong",{children:"App ID:"})," ",T.application.appId]}),r.jsxs(A,{children:[r.jsx("strong",{children:"Tenant ID:"})," ",T.application.tenantId]}),T.clientSecret&&r.jsx(A,{variant:"caption",children:"Client secret saved to config.yml"})]}):r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:O,disabled:s,color:"success",startIcon:s?r.jsx(We,{size:20}):r.jsx(Mr,{}),children:s?"Creating Application...":"Create Application in Azure AD"})]});default:return null}};return r.jsxs(fe,{sx:{p:4},children:[r.jsx(A,{variant:"h5",gutterBottom:!0,children:"Azure AD Automatic Setup"}),r.jsx(Hr,{activeStep:n,sx:{mb:4},children:D.map(P=>r.jsx(zn,{children:r.jsx(Un,{children:P})},P))}),$(),a&&r.jsx(xe,{severity:"error",sx:{mt:2},onClose:()=>l(null),children:a}),u&&r.jsx(xe,{severity:"success",sx:{mt:2},onClose:()=>c(null),children:u}),r.jsx(M,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(M,{children:n>0&&n<3&&!b&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(rs,{}),onClick:()=>o(n-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},gF=({onComplete:e,onBack:t})=>{const{apiRequest:n}=Wt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(null),[h,p]=f.useState({tenantId:"",clientId:"",clientSecret:"",authMethod:"device_code",apiMethod:"graph_api"}),x=["Choose Auth Method","Azure Portal Setup","Enter Credentials","Save Configuration"],m=async()=>{a(!0),u(null);try{const y=await(await n("/api/azure-simple/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();y.success?(d("Configuration saved successfully!"),setTimeout(()=>{e(y)},2e3)):u(y.error||"Failed to save configuration")}catch(b){u("Failed to save configuration: "+b.message)}finally{a(!1)}},g=()=>{switch(o){case 0:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Choose Authentication Method"}),r.jsx(ze,{sx:{mt:2,cursor:"pointer",border:h.authMethod==="device_code"?"2px solid":"1px solid",borderColor:h.authMethod==="device_code"?"primary.main":"divider"},onClick:()=>p({...h,authMethod:"device_code"}),children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",color:"primary",children:"Device Code Flow (Recommended)"}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" Users authenticate with their own account  Each user needs to authenticate individually  More secure - no shared credentials  Perfect for multi-user environments"}),r.jsx(we,{label:"User Context",color:"success",size:"small",sx:{mt:1}})]})}),r.jsx(ze,{sx:{mt:2,cursor:"pointer",border:h.authMethod==="client_credentials"?"2px solid":"1px solid",borderColor:h.authMethod==="client_credentials"?"primary.main":"divider"},onClick:()=>p({...h,authMethod:"client_credentials"}),children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h6",color:"primary",children:"Client Credentials Flow"}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" App authenticates without user interaction  Can send emails as any user in the organization  Requires admin consent  Good for automated services"}),r.jsx(we,{label:"App-Only",color:"warning",size:"small",sx:{mt:1}})]})}),r.jsxs(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>s(1),children:["Continue with ",h.authMethod==="device_code"?"Device Code":"Client Credentials"]})]});case 1:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Create Azure AD Application"}),r.jsxs(xe,{severity:"info",sx:{mb:2},children:[r.jsx(Ze,{children:"Manual Setup Required"}),"Due to Microsoft security restrictions, you need to create the app manually in Azure Portal."]}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(np,{}),href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps",target:"_blank",fullWidth:!0,sx:{mb:3},children:"Open Azure Portal - App Registrations"}),r.jsx(A,{variant:"subtitle1",gutterBottom:!0,children:"Follow these steps:"}),r.jsxs(ot,{children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"1."})}),r.jsx(se,{primary:"Click 'New registration'",secondary:"In the Azure Portal App registrations page"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"2."})}),r.jsx(se,{primary:"Basic Settings",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:" Name: SMTP Relay for Exchange Online"}),r.jsx(A,{variant:"body2",children:" Account types: Accounts in this organizational directory only"})]})})]}),h.authMethod==="device_code"?r.jsxs(r.Fragment,{children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"3."})}),r.jsx(se,{primary:"Redirect URI",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:" Platform: Mobile and desktop applications"}),r.jsx(A,{variant:"body2",children:" URI: https://login.microsoftonline.com/common/oauth2/nativeclient"})]})})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"4."})}),r.jsx(se,{primary:"API Permissions",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:"Add permission  Microsoft Graph  Delegated:"}),r.jsx(A,{variant:"body2",children:" Mail.Send"}),r.jsx(A,{variant:"body2",children:" User.Read"}),r.jsx(A,{variant:"body2",children:" offline_access"})]})})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"5."})}),r.jsx(se,{primary:"Enable Public Client",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:"Authentication  Advanced settings"}),r.jsx(A,{variant:"body2",children:" Allow public client flows: Yes"})]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"3."})}),r.jsx(se,{primary:"Skip Redirect URI",secondary:"Not needed for client credentials"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"4."})}),r.jsx(se,{primary:"API Permissions",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:"Add permission  Microsoft Graph  Application:"}),r.jsx(A,{variant:"body2",children:" Mail.Send"}),r.jsx(xe,{severity:"warning",sx:{mt:1},children:`Don't forget to click "Grant admin consent"!`})]})})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(A,{children:"5."})}),r.jsx(se,{primary:"Create Client Secret",secondary:r.jsxs(M,{children:[r.jsx(A,{variant:"body2",children:"Certificates & secrets  New client secret"}),r.jsx(A,{variant:"body2",children:" Description: SMTP Relay Secret"}),r.jsx(A,{variant:"body2",children:" Expires: Max 2 years (Microsoft limit)"}),r.jsx(xe,{severity:"error",sx:{mt:1},children:"Copy the secret immediately - it won't be shown again!"})]})})]})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{color:"success"})}),r.jsx(se,{primary:"Copy Application ID",secondary:"From the Overview page, copy the Application (client) ID"})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:2},onClick:()=>s(2),children:"I've Created the App - Continue"})]});case 2:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Enter Azure AD Application Details"}),r.jsx(Re,{fullWidth:!0,label:"Tenant ID",value:h.tenantId,onChange:b=>p({...h,tenantId:b.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"Your Azure AD tenant ID (from Azure Portal  Overview)"}),r.jsx(Re,{fullWidth:!0,label:"Application (Client) ID",value:h.clientId,onChange:b=>p({...h,clientId:b.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"The Application ID you copied from Azure Portal"}),h.authMethod==="client_credentials"&&r.jsx(Re,{fullWidth:!0,label:"Client Secret",type:"password",value:h.clientSecret,onChange:b=>p({...h,clientSecret:b.target.value}),margin:"normal",required:!0,helperText:"The secret value you copied (not the secret ID)"}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(gt,{value:h.apiMethod,onChange:b=>p({...h,apiMethod:b.target.value}),label:"API Method",children:[r.jsx(oe,{value:"graph_api",children:"Microsoft Graph API (Recommended)"}),r.jsx(oe,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),h.apiMethod==="smtp_oauth"&&r.jsxs(xe,{severity:"warning",sx:{mt:2},children:[r.jsx(Ze,{children:"SMTP AUTH Required"}),r.jsx(A,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(A,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(A,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:b=>b.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:b=>b.palette.mode==="dark"?"#90caf9":"#1976d2",border:b=>`1px solid ${b.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(A,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>s(3),disabled:!h.tenantId||!h.clientId||h.authMethod==="client_credentials"&&!h.clientSecret,children:"Review Configuration"})]});case 3:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Review & Save Configuration"}),r.jsx(ze,{sx:{mt:2},children:r.jsx(Oe,{children:r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"Authentication Method",secondary:h.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ce,{children:r.jsx(se,{primary:"Tenant ID",secondary:h.tenantId})}),r.jsx(ce,{children:r.jsx(se,{primary:"Client ID",secondary:h.clientId})}),h.clientSecret&&r.jsx(ce,{children:r.jsx(se,{primary:"Client Secret",secondary:""})}),r.jsx(ce,{children:r.jsx(se,{primary:"API Method",secondary:h.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})})]})})}),r.jsx(xe,{severity:"info",sx:{mt:2},children:"This configuration will be saved to config.yml and used for Exchange Online authentication."}),r.jsx(Y,{variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},onClick:m,disabled:i,children:i?"Saving...":"Save Configuration"})]});default:return null}};return r.jsxs(fe,{sx:{p:4},children:[r.jsx(A,{variant:"h5",gutterBottom:!0,children:"Azure AD Manual Setup"}),r.jsx(Hr,{activeStep:o,sx:{mb:4},children:x.map(b=>r.jsx(zn,{children:r.jsx(Un,{children:b})},b))}),g(),l&&r.jsx(xe,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),c&&r.jsx(xe,{severity:"success",sx:{mt:2},onClose:()=>d(null),children:c}),r.jsx(M,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(M,{children:(o===0?t:o>0&&o<3)&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(rs,{}),onClick:o===0?t:()=>s(o-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},xF={displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api",useClientSecret:!1,clientSecretExpiry:365},bl=["Enter Tenant","Admin Authentication","Configure App","Create App"],yF=5e3,bF=2e3,vF=5,Yx=({onComplete:e,onBack:t})=>{const{apiRequest:n}=Wt(),[o,s]=f.useState(0),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(""),[h,p]=f.useState(null),[x,m]=f.useState(null),[g,b]=f.useState(!1),[y,v]=f.useState(!1),[C,k]=f.useState(null),[F,T]=f.useState(xF),[I,D]=f.useState(null),[V,O]=f.useState(null);f.useEffect(()=>{u(null)},[o]),f.useEffect(()=>{if(!g||!h)return;const B=setInterval(async()=>{try{const U=await(await n("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:h})})).json();U.success?(b(!1),v(!0),k(U),s(2)):U.error&&!U.pending&&(b(!1),u(U.error))}catch(z){console.log("Polling in progress...",z.message)}},yF);return()=>clearInterval(B)},[g,h,n]);const S=f.useCallback(async()=>{if(!c.trim()){u("Tenant ID is required");return}a(!0),u(null);try{const B=await(await n("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:c.trim()})})).json();B.success?(p(B.flowId),m(B),b(!0),s(1)):u(B.error||"Failed to start authentication")}catch(L){u(`Failed to start authentication: ${L.message}`)}finally{a(!1)}},[c,n]),$=f.useCallback(async()=>{if(!h||!F.displayName.trim()){u("Invalid configuration");return}a(!0),u(null);try{const L=await n("/api/azure-graph/admin/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:h,appConfig:{...F,displayName:F.displayName.trim()}})});if(!L.ok){const z=await L.json();throw new Error(z.details||z.error||"Failed to create application")}const B=await L.json();D(B),s(3),B.consentUrl&&setTimeout(()=>{window.open(B.consentUrl,"_blank","noopener,noreferrer")},bF),P(B)}catch(L){console.error("App creation error:",L),u(L.message||"Failed to create application")}finally{a(!1)}},[h,F,n,e]),P=f.useCallback(L=>{let B=vF;O(B);const z=setInterval(()=>{B-=1,O(B),B<=0&&(clearInterval(z),e&&e({application:L.application,config:F,success:!0}))},1e3);return()=>clearInterval(z)},[F,e]),w=f.useCallback(async L=>{try{await navigator.clipboard.writeText(L)}catch(B){console.error("Failed to copy to clipboard:",B),u("Failed to copy to clipboard")}},[]);f.useMemo(()=>{switch(o){case 0:return c.trim().length>0;case 1:return y;case 2:return F.displayName.trim().length>0;case 3:return!0;default:return!1}},[o,c,y,F.displayName]);const E=f.useCallback((L,B)=>{T(z=>({...z,[L]:B}))},[]),R=f.useCallback(()=>{s(L=>Math.max(0,L-1))},[]),N=f.useCallback(()=>{s(L=>Math.min(bl.length-1,L+1))},[]),_=f.useMemo(()=>{switch(o){case 0:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Azure AD Automatic Setup with Global Admin"}),r.jsxs(xe,{severity:"warning",sx:{mb:2},children:[r.jsx(Ze,{children:"Global Administrator Required"}),"This setup requires Global Administrator or Application Administrator privileges. The setup will use Microsoft Graph PowerShell to create the application."]}),r.jsx(ze,{sx:{mb:2,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(yb,{sx:{mr:1}}),r.jsx(A,{variant:"subtitle1",children:"Using Microsoft Graph PowerShell"})]}),r.jsx(A,{variant:"body2",children:"Client ID: 14d82eec-204b-4c2f-b7e8-296a70dab67e"}),r.jsx(A,{variant:"body2",children:"This is Microsoft's official Graph PowerShell application with the necessary permissions."})]})}),r.jsx(Re,{fullWidth:!0,label:"Tenant ID or Domain",value:c,onChange:L=>d(L.target.value),error:l&&o===0,placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(xe,{severity:"info",sx:{mt:3},children:[r.jsx(Ze,{children:"What will happen:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"You'll authenticate with your Global Admin account"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"A new Azure AD application will be created"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"Permissions will be configured automatically"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{})}),r.jsx(se,{primary:"Configuration will be saved to config.yml"})]})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:S,disabled:!c||i,startIcon:i?r.jsx(We,{size:20}):r.jsx(Pl,{}),children:i?"Starting...":"Start Global Admin Authentication"})]});case 1:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Global Administrator Authentication"}),x&&r.jsxs(r.Fragment,{children:[r.jsx(ze,{sx:{mt:3,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h3",align:"center",gutterBottom:!0,children:x.userCode}),r.jsx(M,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(Bt,{}),onClick:()=>w(x.userCode),children:"Copy Code"})})]})}),r.jsxs(M,{mt:3,textAlign:"center",children:[r.jsx(A,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(jc,{}),href:x.verificationUrl,target:"_blank",sx:{mt:1},children:x.verificationUrl})]}),g&&r.jsxs(M,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(We,{size:20,sx:{mr:2}}),r.jsx(A,{children:"Waiting for Global Administrator authentication..."})]}),r.jsxs(xe,{severity:"warning",sx:{mt:3},children:[r.jsx(Ze,{children:"Important"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"1. Sign in with a Global Administrator account"})}),r.jsx(ce,{children:r.jsx(se,{primary:"2. You'll see 'Microsoft Graph PowerShell' requesting permissions"})}),r.jsx(ce,{children:r.jsx(se,{primary:"3. Accept the permissions to continue"})})]})]})]})]});case 2:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),C&&r.jsxs(xe,{severity:"success",sx:{mb:2},children:[r.jsx(Ze,{children:"Admin Authenticated"}),r.jsxs(A,{variant:"body2",children:["User: ",C.adminUser]}),C.adminRoles?.length>0&&r.jsxs(A,{variant:"body2",children:["Roles: ",C.adminRoles.join(", ")]})]}),r.jsx(Re,{fullWidth:!0,label:"Application Name",value:F.displayName,onChange:L=>E("displayName",L.target.value),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Authentication Method"}),r.jsxs(gt,{value:F.authMethod,onChange:L=>E("authMethod",L.target.value),label:"Authentication Method",children:[r.jsx(oe,{value:"device_code",children:"Device Code Flow (User Context)"}),r.jsx(oe,{value:"client_credentials",children:"Client Credentials (App-Only)"})]}),r.jsx(Cc,{children:"Device Code: Send as specific user | Client Credentials: Send as any user"})]}),r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"API Method"}),r.jsxs(gt,{value:F.apiMethod,onChange:L=>E("apiMethod",L.target.value),label:"API Method",children:[r.jsx(oe,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(oe,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),F.apiMethod==="smtp_oauth"&&r.jsxs(xe,{severity:"warning",sx:{mt:2},children:[r.jsx(Ze,{children:"SMTP AUTH Required"}),r.jsx(A,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(A,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(A,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:L=>L.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:L=>L.palette.mode==="dark"?"#90caf9":"#1976d2",border:L=>`1px solid ${L.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(A,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),F.authMethod==="client_credentials"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{control:r.jsx(jn,{checked:F.useClientSecret,onChange:L=>E("useClientSecret",L.target.checked)}),label:"Create Client Secret",sx:{mt:2}}),F.useClientSecret&&r.jsxs(dt,{fullWidth:!0,margin:"normal",children:[r.jsx(vt,{children:"Secret Expiry"}),r.jsxs(gt,{value:F.clientSecretExpiry,onChange:L=>E("clientSecretExpiry",L.target.value),label:"Secret Expiry",children:[r.jsx(oe,{value:90,children:"3 Months"}),r.jsx(oe,{value:180,children:"6 Months"}),r.jsx(oe,{value:365,children:"1 Year"}),r.jsx(oe,{value:730,children:"2 Years (Maximum)"})]})]}),r.jsx(xe,{severity:"info",sx:{mt:2},children:"Client Credentials requires admin consent after creation."})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:N,startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(M,{children:[r.jsx(A,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(ze,{sx:{mt:2},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ce,{children:r.jsx(se,{primary:"Application Name",secondary:F.displayName})}),r.jsx(ce,{children:r.jsx(se,{primary:"Authentication Method",secondary:F.authMethod==="device_code"?"Device Code Flow":"Client Credentials"})}),r.jsx(ce,{children:r.jsx(se,{primary:"API Method",secondary:F.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})}),F.useClientSecret&&r.jsx(ce,{children:r.jsx(se,{primary:"Client Secret",secondary:`Expires in ${F.clientSecretExpiry} days`})})]})]})}),I?r.jsxs(r.Fragment,{children:[r.jsxs(xe,{severity:"success",sx:{mt:3},children:[r.jsx(Ze,{children:" Application Created Successfully!"}),r.jsxs(A,{variant:"body1",sx:{mt:1},children:[r.jsx("strong",{children:"Application Name:"})," ",I.application.displayName]}),r.jsxs(A,{variant:"body1",children:[r.jsx("strong",{children:"Application ID:"})," ",I.application.appId]}),r.jsxs(A,{variant:"body1",children:[r.jsx("strong",{children:"Tenant ID:"})," ",I.application.tenantId]}),I.clientSecret&&r.jsx(A,{variant:"body2",sx:{mt:1},children:" Client secret has been saved to config.yml"}),r.jsx(A,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:I.nextSteps})]}),I.consentUrl&&r.jsxs(xe,{severity:"info",sx:{mt:2},children:[r.jsx(Ze,{children:"Admin Consent Required"}),r.jsx(A,{children:"A new window will open for admin consent."}),r.jsx(Y,{variant:"outlined",size:"small",href:I.consentUrl,target:"_blank",sx:{mt:1},children:"Grant Admin Consent"})]}),r.jsx(M,{sx:{mt:3,textAlign:"center"},children:r.jsxs(A,{variant:"body2",color:"text.secondary",children:["Setup complete! ",V&&V>0&&`Redirecting in ${V} seconds...`]})})]}):r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:$,disabled:i,color:"success",startIcon:i?r.jsx(We,{size:20}):r.jsx(Mr,{}),children:i?"Creating Application...":"Create Application in Azure AD"})]});default:return null}},[o,c,x,g,C,F,I,V,i,l,E,S,$,w,N,e]);return r.jsxs(fe,{sx:{p:4},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(Pl,{sx:{mr:2,fontSize:40,color:"primary.main"}}),r.jsx(A,{variant:"h5",children:"Exchange Online Configuration"})]}),r.jsx(Hr,{activeStep:o,sx:{mb:4},children:bl.map((L,B)=>r.jsx(zn,{completed:B<o,children:r.jsx(Un,{children:L})},L))}),r.jsx(M,{"aria-label":`Step ${o+1}: ${bl[o]}`,children:_}),l&&r.jsx(xe,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),r.jsx(M,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(M,{children:!I&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(rs,{}),onClick:o===0?t:R,disabled:g,sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"},"&:disabled":{opacity:.5,backgroundColor:"#ce93d8"}},children:"Back"})})})]})};Yx.propTypes={onComplete:G.func.isRequired,onBack:G.func};const CF=({open:e,onClose:t,tenantId:n,onAuthComplete:o})=>{const{apiRequest:s}=Wt(),[i,a]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(!1),[h,p]=f.useState(null);f.useEffect(()=>{e&&n&&!l&&x()},[e,n]),f.useEffect(()=>{let b;return c&&l&&(b=setInterval(m,5e3)),()=>clearInterval(b)},[c,l]);const x=async()=>{a(!0),p(null);try{const b=await s("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:n})}),y=await b.json();b.ok&&(y.success||y.userCode)?(u(y),d(!0)):p(y.error||"Failed to initialize admin authentication")}catch{p("Failed to start authentication process")}finally{a(!1)}},m=async()=>{try{const y=await(await s("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:l.flowId})})).json();y.authenticated?(d(!1),o(!0),t()):y.error&&y.error!=="authorization_pending"&&(d(!1),p(y.error))}catch{}},g=()=>{l?.userCode&&navigator.clipboard.writeText(l.userCode)};return r.jsxs(lt,{open:e,onClose:c?void 0:t,maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Fn,{sx:{mr:1}}),"Administrator Authentication Required"]})}),r.jsx(ut,{children:i&&!l?r.jsx(M,{display:"flex",justifyContent:"center",p:3,children:r.jsx(We,{})}):l?r.jsxs(M,{children:[r.jsxs(xe,{severity:"info",sx:{mb:2},children:[r.jsx(Ze,{children:"Sign in as Azure AD Administrator"}),"To delete the application from Azure AD, you need to authenticate with administrator privileges."]}),r.jsx(A,{variant:"body1",gutterBottom:!0,children:"Please use this code to authenticate:"}),r.jsx(ze,{sx:{my:2,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h3",align:"center",gutterBottom:!0,children:l.userCode}),r.jsx(M,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(Bt,{}),onClick:g,children:"Copy Code"})})]})}),r.jsx(A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Click the button below to open the authentication page:"}),r.jsx(Y,{variant:"contained",fullWidth:!0,startIcon:r.jsx(np,{}),onClick:()=>window.open(l.verificationUrl,"_blank"),sx:{mb:2},children:"Open Microsoft Login"}),c&&r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"center",mt:2,children:[r.jsx(We,{size:20,sx:{mr:1}}),r.jsx(A,{variant:"body2",color:"text.secondary",children:"Waiting for authentication..."})]}),r.jsxs(xe,{severity:"warning",sx:{mt:2},children:[r.jsx("strong",{children:"Important:"})," Sign in with an account that has Global Administrator or Application Administrator privileges in your Azure AD tenant."]})]}):h?r.jsx(xe,{severity:"error",children:h}):null}),r.jsx(Ct,{children:r.jsx(Y,{onClick:t,disabled:c,children:"Cancel"})})]})},wF=({onSetupStart:e,onEdit:t})=>{const{apiRequest:n}=Wt(),[o,s]=f.useState(!0),[i,a]=f.useState(null),[l,u]=f.useState(null),[c,d]=f.useState({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),[h,p]=f.useState({open:!1,tenantId:null}),[x,m]=f.useState({applications:!0,tokens:!0,mailboxes:!0}),[g,b]=f.useState(""),[y,v]=f.useState({open:!1,mailbox:null,processing:!1});f.useEffect(()=>{C();const S=setInterval(C,6e4);return()=>clearInterval(S)},[]);const C=async()=>{try{s(!0);const[S,$,P]=await Promise.all([n("/api/exchange-config/status"),n("/api/exchange-config/token-status"),n("/api/exchange-config/mailboxes")]),w=await S.json(),E=$.ok?await $.json():null,R=P.ok?await P.json():null;a({...w,tokens:E,mailboxes:R}),u(null)}catch(S){console.error("Failed to fetch status:",S),u("Failed to load Exchange status")}finally{s(!1)}},k=S=>{m($=>({...$,[S]:!$[S]}))},F=S=>{switch(S){case"connected":case"valid":case"active":return"success";case"expired":case"error":case"disconnected":return"error";case"warning":case"expiring":return"warning";default:return"default"}},T=S=>{if(!S)return"Unknown";const $=new Date,w=new Date(S)-$;if(w<=0)return"Expired";const E=Math.floor(w/(1e3*60*60*24)),R=Math.floor(w%(1e3*60*60*24)/(1e3*60*60)),N=Math.floor(w%(1e3*60*60)/(1e3*60));return E>0?`${E}d ${R}h`:R>0?`${R}h ${N}m`:`${N}m`},I=S=>{navigator.clipboard.writeText(S)},D=async()=>{if(y.mailbox){v(S=>({...S,processing:!0}));try{const S=await n(`/api/exchange-config/mailboxes/${encodeURIComponent(y.mailbox.email)}`,{method:"DELETE"});if(S.ok)v({open:!1,mailbox:null,processing:!1}),b(`Mailbox ${y.mailbox.email} and all associated tokens have been deleted`),await C();else{const $=await S.json();u($.error||"Failed to delete mailbox"),v(P=>({...P,processing:!1}))}}catch{u("Failed to delete mailbox"),v($=>({...$,processing:!1}))}}},V=async()=>{if(c.app){if(c.deleteOption==="everything"&&c.confirmName!==c.app.displayName){u("Application name does not match. Please type the exact name.");return}d(S=>({...S,processing:!0}));try{console.log("Sending delete request for app:",c.app.appId);const S=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})});console.log("Delete response status:",S.status);const $=await S.json();S.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),c.deleteOption==="everything"?(u(null),b("Application and Azure AD registration deleted successfully")):b("Application configuration deleted successfully")):S.status===401&&$.requiresAdminAuth?(console.log("Admin auth required for Azure deletion"),d(P=>({...P,processing:!1})),p({open:!0,tenantId:$.tenantId||c.app.tenantId})):(u($.error||"Failed to delete application"),d(P=>({...P,processing:!1})))}catch{u("Failed to delete application"),d($=>({...$,processing:!1}))}}};if(o&&!i)return r.jsx(M,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(We,{})});const O=i?.configured||i?.applications?.length>0;return r.jsxs(M,{children:[r.jsx(fe,{sx:{p:3,mb:3},children:r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[O?r.jsx(bb,{sx:{fontSize:40,color:"success.main",mr:2}}):r.jsx(vb,{sx:{fontSize:40,color:"error.main",mr:2}}),r.jsxs(M,{children:[r.jsx(A,{variant:"h5",gutterBottom:!0,children:"Exchange Online Status"}),r.jsx(A,{variant:"body2",color:"text.secondary",children:O?"Connected and configured":"Not configured - Setup required"})]})]}),r.jsxs(M,{children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(gn,{}),onClick:C,disabled:o,sx:{mr:1},children:"Refresh"}),!O&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:e,children:"Start Setup"})]})]})}),l&&r.jsx(xe,{severity:"error",sx:{mb:2},children:l}),r.jsx(ze,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(bc,{sx:{mr:1}}),r.jsx(A,{variant:"h6",children:"Azure AD Applications"}),i?.applications?.length>0&&r.jsx(we,{label:i.applications.length,size:"small",sx:{ml:1}})]}),r.jsx(Pe,{onClick:()=>k("applications"),children:x.applications?r.jsx(Ta,{}):r.jsx(rr,{})})]}),r.jsxs(Sn,{in:x.applications,children:[r.jsx(St,{sx:{my:2}}),i?.applications?.length>0?r.jsx(ps,{children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(Mn,{children:[r.jsx(ue,{children:"Application Name"}),r.jsx(ue,{children:"Application ID"}),r.jsx(ue,{children:"Tenant ID"}),r.jsx(ue,{children:"Auth Method"}),r.jsx(ue,{children:"API Method"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{align:"right",children:"Actions"})]})}),r.jsx(xs,{children:i.applications.map((S,$)=>r.jsxs(Mn,{children:[r.jsx(ue,{children:r.jsx(A,{variant:"body2",fontWeight:"medium",children:S.displayName||"Unnamed Application"})}),r.jsx(ue,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsxs(A,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.appId?.substring(0,8),"..."]}),r.jsx(Pe,{size:"small",onClick:()=>I(S.appId),children:r.jsx(Bt,{fontSize:"small"})})]})}),r.jsx(ue,{children:r.jsxs(A,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.tenantId?.substring(0,8),"..."]})}),r.jsx(ue,{children:r.jsx(we,{label:S.authMethod||"Unknown",size:"small",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:S.apiMethod==="smtp_oauth"?"SMTP OAuth2":"Graph API",size:"small",color:S.apiMethod==="smtp_oauth"?"warning":"primary",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:S.status||"Active",color:F(S.status||"active"),size:"small"})}),r.jsx(ue,{align:"right",children:r.jsx(Pe,{size:"small",onClick:()=>d({open:!0,app:S}),children:r.jsx(Kt,{fontSize:"small"})})})]},$))})]})}):r.jsx(xe,{severity:"info",children:'No Azure AD applications configured. Click "Start Setup" to configure.'})]})]})}),r.jsx(ze,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Fn,{sx:{mr:1}}),r.jsx(A,{variant:"h6",children:"Token Status"})]}),r.jsx(Pe,{onClick:()=>k("tokens"),children:x.tokens?r.jsx(Ta,{}):r.jsx(rr,{})})]}),r.jsxs(Sn,{in:x.tokens,children:[r.jsx(St,{sx:{my:2}}),i?.tokens||i?.accounts?.length>0?r.jsxs(Q,{container:!0,spacing:2,children:[i?.accounts?.length>0&&r.jsx(Q,{item:!0,xs:12,children:r.jsxs(fe,{variant:"outlined",sx:{p:2,bgcolor:"background.default"},children:[r.jsx(A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Accounts with Active Tokens"}),i.accounts.map((S,$)=>r.jsxs(M,{display:"flex",alignItems:"center",sx:{mt:$>0?2:1},children:[r.jsx(Gu,{sx:{mr:1},color:S.hasValidToken?"primary":"disabled"}),r.jsxs(M,{flex:1,children:[r.jsx(A,{variant:"body2",fontWeight:"medium",children:S.email||S.displayName||"Unknown Account"}),S.displayName&&S.email&&r.jsx(A,{variant:"caption",color:"text.secondary",children:S.displayName})]}),r.jsxs(M,{display:"flex",gap:1,children:[S.isDefault&&r.jsx(we,{label:"Default",size:"small",color:"primary",variant:"outlined"}),r.jsx(we,{label:S.hasValidToken?"Active":"Expired",size:"small",color:S.hasValidToken?"success":"error"})]})]},$))]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{variant:"outlined",sx:{p:2},children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"subtitle2",color:"text.secondary",children:"Access Token"}),r.jsx(A,{variant:"h6",children:i.tokens?.accessToken||i.hasTokens?"Valid":"Not Available"}),(i.tokens?.accessToken||i.hasTokens)&&r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)]})]}),r.jsx(M,{children:i.tokens?.accessToken||i.hasTokens?r.jsx(Ne,{color:"success"}):r.jsx(xn,{color:"error"})})]}),(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)&&r.jsx(Qt,{variant:"determinate",value:fc(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt),sx:{mt:1},color:_f(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(fe,{variant:"outlined",sx:{p:2},children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{children:[r.jsx(A,{variant:"subtitle2",color:"text.secondary",children:"Refresh Token"}),r.jsx(A,{variant:"h6",children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?"Valid":"Not Available"}),(i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken)&&r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))]})]}),r.jsx(M,{children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?r.jsx(Ne,{color:"success"}):r.jsx(xn,{color:"error"})})]}),(i.tokens?.refreshTokenExpiry||i.accounts?.[0]?.hasRefreshToken)&&r.jsx(Qt,{variant:"determinate",value:fc(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null)),sx:{mt:1},color:_f(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))})]})}),i.tokens.lastRefresh&&r.jsx(Q,{item:!0,xs:12,children:r.jsxs(A,{variant:"caption",color:"text.secondary",children:["Last token refresh: ",new Date(i.tokens.lastRefresh).toLocaleString()]})})]}):r.jsx(xe,{severity:"warning",children:"No token information available. Please complete the setup process."})]})]})}),r.jsx(ze,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(Sl,{sx:{mr:1}}),r.jsx(A,{variant:"h6",children:"Connected Mailboxes"}),i?.mailboxes?.length>0&&r.jsx(we,{label:i.mailboxes.length,size:"small",sx:{ml:1}})]}),r.jsxs(M,{children:[r.jsx(Y,{size:"small",startIcon:r.jsx(ir,{}),onClick:()=>t?.({type:"mailbox"}),children:"Add Mailbox"}),r.jsx(Pe,{onClick:()=>k("mailboxes"),children:x.mailboxes?r.jsx(Ta,{}):r.jsx(rr,{})})]})]}),r.jsxs(Sn,{in:x.mailboxes,children:[r.jsx(St,{sx:{my:2}}),i?.mailboxes?.length>0?r.jsx(ot,{children:i.mailboxes.map((S,$)=>r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Gu,{})}),r.jsx(se,{primary:S.email,secondary:r.jsxs(M,{children:[r.jsxs(A,{variant:"caption",display:"block",children:["Type: ",S.type||"User Mailbox"]}),r.jsxs(A,{variant:"caption",display:"block",children:["Permissions: ",S.permissions?.join(", ")||"Send As"]})]})}),r.jsxs(un,{children:[r.jsx(we,{label:S.status||"Active",color:F(S.status||"active"),size:"small",sx:{mr:1}}),r.jsx(Pe,{size:"small",onClick:()=>v({open:!0,mailbox:S,processing:!1}),children:r.jsx(Kt,{fontSize:"small"})})]})]},$))}):r.jsx(xe,{severity:"info",children:"No mailboxes configured. The default account will be used for sending."})]})]})}),r.jsxs(lt,{open:c.open,onClose:()=>!c.processing&&d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Delete Application"}),r.jsxs(ut,{children:[r.jsxs(M,{mt:2,children:[r.jsxs(A,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Application:"})," ",c.app?.displayName]}),r.jsxs(A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[r.jsx("strong",{children:"App ID:"})," ",c.app?.appId]})]}),r.jsxs(M,{mt:3,children:[r.jsx(A,{variant:"subtitle1",gutterBottom:!0,children:"What would you like to delete?"}),r.jsx(dt,{component:"fieldset",children:r.jsxs(Cb,{value:c.deleteOption,onChange:S=>d($=>({...$,deleteOption:S.target.value,confirmName:""})),children:[r.jsx(hn,{value:"config",control:r.jsx(Wu,{}),label:r.jsxs(M,{children:[r.jsx(A,{variant:"body1",children:"Configuration only"}),r.jsx(A,{variant:"caption",color:"text.secondary",children:"Remove from SMTP Relay only (Azure AD App remains)"})]})}),r.jsx(hn,{value:"everything",control:r.jsx(Wu,{}),label:r.jsxs(M,{children:[r.jsx(A,{variant:"body1",children:"Configuration + Azure AD App"}),r.jsx(A,{variant:"caption",color:"text.secondary",children:"Completely remove everything from Azure AD"})]})})]})})]}),c.deleteOption==="everything"&&r.jsxs(M,{mt:3,children:[r.jsxs(xe,{severity:"error",sx:{mb:2},children:[r.jsx(Ze,{children:" Permanent Deletion Warning"}),"This will permanently delete the application from Azure AD. This action cannot be undone!"]}),r.jsxs(A,{variant:"body2",gutterBottom:!0,children:["Please type ",r.jsx("strong",{children:c.app?.displayName})," to confirm:"]}),r.jsx(Re,{fullWidth:!0,size:"small",value:c.confirmName,onChange:S=>d($=>({...$,confirmName:S.target.value})),placeholder:"Type application name here",disabled:c.processing,error:c.confirmName&&c.confirmName!==c.app?.displayName,helperText:c.confirmName&&c.confirmName!==c.app?.displayName?"Name does not match":""}),r.jsxs(xe,{severity:"info",sx:{mt:2},children:[r.jsx("strong",{children:"Note:"})," This operation requires Azure AD administrator authentication."]})]}),c.deleteOption==="config"&&r.jsx(xe,{severity:"info",sx:{mt:2},children:"The Azure AD application will remain in your tenant and can be reused later."})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),disabled:c.processing,children:"Cancel"}),r.jsx(Y,{onClick:V,color:"error",variant:"contained",disabled:c.processing||c.deleteOption==="everything"&&c.confirmName!==c.app?.displayName,children:c.processing?r.jsx(We,{size:24}):c.deleteOption==="everything"?"Delete Everything":"Delete Configuration"})]})]}),r.jsx(CF,{open:h.open,tenantId:h.tenantId,onClose:()=>p({open:!1,tenantId:null}),onAuthComplete:async S=>{if(p({open:!1,tenantId:null}),S&&c.app){console.log("Admin auth complete, retrying delete for:",c.app.appId);try{const $=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})}),P=await $.json();$.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),b("Application and Azure AD registration deleted successfully")):(u(P.error||"Failed to delete application"),d(w=>({...w,processing:!1})))}catch{u("Failed to delete application"),d(P=>({...P,processing:!1}))}}}}),r.jsxs(lt,{open:y.open,onClose:()=>!y.processing&&v({open:!1,mailbox:null,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(ct,{children:"Delete Mailbox"}),r.jsxs(ut,{children:[r.jsxs(xe,{severity:"warning",sx:{mb:2},children:[r.jsx(Ze,{children:"Warning"}),"This will delete the mailbox configuration and all associated tokens. The mailbox will need to be re-authenticated if you want to use it again."]}),y.mailbox&&r.jsxs(M,{mt:2,children:[r.jsxs(A,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Mailbox:"})," ",y.mailbox.email]}),r.jsxs(A,{variant:"body2",color:"text.secondary",children:[r.jsx("strong",{children:"Type:"})," ",y.mailbox.type||"User Mailbox"]})]}),r.jsx(A,{variant:"body2",sx:{mt:2},children:"Are you sure you want to delete this mailbox and all its tokens?"})]}),r.jsxs(Ct,{children:[r.jsx(Y,{onClick:()=>v({open:!1,mailbox:null,processing:!1}),disabled:y.processing,children:"Cancel"}),r.jsx(Y,{onClick:D,color:"error",variant:"contained",disabled:y.processing,children:y.processing?r.jsx(We,{size:24}):"Delete Mailbox"})]})]}),r.jsx(wb,{open:!!g,autoHideDuration:6e3,onClose:()=>b(""),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(xe,{onClose:()=>b(""),severity:"success",sx:{width:"100%"},children:g})})]})},fc=e=>{if(!e)return 0;const t=new Date,n=new Date(e),o=new Date(n.getTime()-3600*1e3),s=n-o,i=n-t;return Math.max(0,Math.min(100,i/s*100))},_f=e=>{const t=fc(e);return t>50?"success":t>20?"warning":"error"};class jF extends Le.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n),this.setState({error:t,errorInfo:n})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?r.jsx(M,{sx:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:r.jsxs(fe,{sx:{p:4,maxWidth:600,textAlign:"center"},children:[r.jsx(xn,{sx:{fontSize:64,color:"error.main",mb:2}}),r.jsx(A,{variant:"h5",gutterBottom:!0,children:"Something went wrong"}),r.jsx(A,{variant:"body2",color:"text.secondary",paragraph:!0,children:this.state.error?.message||"An unexpected error occurred"}),!1,r.jsx(Y,{variant:"contained",color:"primary",onClick:this.handleReset,sx:{mt:3},children:"Try Again"})]})}):this.props.children}}const SF=1e3,PF=2e3,kF=["Choose Method","Configure Azure AD","Authenticate","Test Connection"],vl=Ht(ze),$f=Ht(M),IF=()=>{const{apiRequest:e}=Wt(),t=Yt(),[n,o]=f.useState(0),[s,i]=f.useState(!0),[a,l]=f.useState(null),[u,c]=f.useState([]),[d,h]=f.useState(!1),[p,x]=f.useState({authMethod:"device_code",tenantId:"",clientId:"",clientSecret:"",apiMethod:"graph_api",sendAs:""}),[m,g]=f.useState(null),[b,y]=f.useState(!1),[v,C]=f.useState(!1),[k,F]=f.useState(null),[T,I]=f.useState(null),[D,V]=f.useState(null),[O,S]=f.useState(null),[$,P]=f.useState(!1),[w,E]=f.useState("choose"),[R,N]=f.useState(!1),[_,L]=f.useState(0),B=f.useMemo(()=>kF,[]),z=f.useCallback(async()=>{i(!0);try{const ne=await(await e("/api/exchange-config/status")).json();console.log("Exchange status data:",ne),l(ne),c(ne.accounts||[]);const je=ne.isConfigured||ne.hasConfig,Z=ne.applications?.length>0,ye=ne.hasTokens,ge=ne.clientId||ne.exchangeConfig?.auth?.client_id;console.log("Setup check:",{hasConfig:je,hasApplications:Z,hasTokens:ye,hasClientId:ge}),je||Z||ge&&ye?(console.log("Showing dashboard view"),h(!1)):(console.log("Showing setup wizard"),h(!0))}catch(X){console.error("Failed to check status:",X),h(!0)}finally{i(!1)}},[e]),U=f.useCallback(()=>{o(X=>X+1)},[]),J=f.useCallback(()=>{o(X=>{const ne=Math.max(0,X-1);return X===1&&ne===0&&E("choose"),ne})},[]);f.useCallback(()=>{o(0),g(null),y(!1),F(null),I(null),V(null)},[]);const ee=f.useCallback(async(X=!1)=>{i(!0),I(null);try{const ne=a?.applications?.[0];if(!ne){I("No Azure AD application configured. Please complete setup first."),i(!1);return}const Z=await(await e("/api/exchange-config/oauth/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authMethod:"device_code",tenantId:ne.tenantId,clientId:ne.appId,apiMethod:"graph_api"})})).json();g(Z),y(!0),!X&&d&&U()}catch{I("Failed to start authentication")}finally{i(!1)}},[a,d,e,U]),te=f.useCallback(async()=>{try{(await(await e("/api/exchange-config/oauth/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceCode:m.deviceCode,tenantId:a?.applications?.[0]?.tenantId,clientId:a?.applications?.[0]?.appId})})).json()).success&&(y(!1),V("Authentication successful!"),await z(),R?(N(!1),g(null),L(je=>je+1)):d&&U())}catch(X){X.message?.includes("authorization_pending")||(I("Authentication failed"),y(!1))}},[m,a,e,R,d,U,z]);f.useCallback(async()=>{i(!0),I(null);try{(await e("/api/exchange-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(V("Configuration saved successfully"),await z(),p.authMethod==="device_code"?await ee():U())}catch{I("Failed to save configuration")}finally{i(!1)}},[p,e,z,ee,U]);const ve=f.useCallback(async X=>{i(!0),I(null);try{const je=await(await e("/api/exchange-config/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:X})})).json();F(je),je.success?V("Connection test successful!"):I(je.error||"Connection test failed")}catch{I("Connection test failed")}finally{i(!1)}},[e]);f.useCallback(async X=>{i(!0);try{await e(`/api/exchange-config/accounts/${X}/refresh`,{method:"POST"}),V("Token refreshed successfully"),await z()}catch{I("Failed to refresh token")}finally{i(!1)}},[e,z]),f.useCallback(async X=>{try{await e(`/api/exchange-config/accounts/${X}/set-default`,{method:"POST"}),await z()}catch{I("Failed to set default account")}},[e,z]),f.useCallback(async X=>{try{await e(`/api/exchange-config/accounts/${X}`,{method:"DELETE"}),await z()}catch{I("Failed to delete account")}},[e,z]);const W=f.useCallback(X=>{navigator.clipboard.writeText(X).then(()=>{V("Copied to clipboard!"),setTimeout(()=>V(null),PF)}).catch(ne=>{console.error("Failed to copy:",ne),I("Failed to copy to clipboard")})},[]);f.useCallback(X=>X?new Date(X).toLocaleString():"Never",[]),f.useCallback(X=>{if(!X)return"Expired";const ne=new Date,Z=new Date(X)-ne;if(Z<=0)return"Expired";const ye=Math.floor(Z/(1e3*60*60*24)),ge=Math.floor(Z%(1e3*60*60*24)/(1e3*60*60));return ye>0?`${ye} days ${ge} hours`:`${ge} hours`},[]);const K=f.useCallback(async X=>{X&&X.success&&(V("Azure AD application created successfully!"),await z(),h(!1),X.application&&V(`Application "${X.application.displayName}" created successfully! Application ID: ${X.application.appId}`))},[z]);if(f.useEffect(()=>{z()},[z]),f.useEffect(()=>{let X;return b&&m&&(X=setInterval(()=>{te()},(m.interval||5)*SF)),()=>clearInterval(X)},[b,m,te]),s&&!a)return r.jsx(M,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #0f0f23 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsx($f,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(fe,{sx:{p:4,borderRadius:4,boxShadow:6},children:r.jsxs(M,{display:"flex",flexDirection:"column",alignItems:"center",children:[r.jsx(We,{size:60,thickness:4}),r.jsx(A,{variant:"h6",sx:{mt:2},children:"Loading Exchange Configuration..."})]})})})});if((a?.isConfigured||a?.applications?.length>0)&&!d)return r.jsxs(M,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:[r.jsx(wF,{onSetupStart:()=>h(!0),onEdit:X=>{console.log("Edit item:",X),X?.type==="mailbox"?(N(!0),ee(!0)):h(!0)}},_),r.jsxs(lt,{open:R,onClose:()=>{N(!1),y(!1),g(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[r.jsx(ct,{children:r.jsxs(M,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(jb,{color:"primary"}),r.jsx(A,{variant:"h6",children:"Add User Mailbox"})]})}),r.jsx(ut,{children:m?r.jsxs(r.Fragment,{children:[r.jsx(A,{variant:"body1",gutterBottom:!0,children:"Authenticate the user account that will send emails:"}),r.jsx(vl,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},sx:{mt:2,background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:r.jsxs(Oe,{children:[r.jsx(A,{variant:"h2",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",letterSpacing:3},children:m.userCode}),r.jsx(M,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(Bt,{}),onClick:()=>W(m.userCode),sx:{borderRadius:3,textTransform:"none",fontWeight:"bold"},children:"Copy Code"})})]})}),r.jsxs(M,{mt:3,textAlign:"center",children:[r.jsx(A,{variant:"body2",gutterBottom:!0,color:"textSecondary",children:"Go to this URL and enter the code:"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(jc,{}),href:m.verificationUrl||"https://microsoft.com/devicelogin",target:"_blank",sx:{mt:1,borderRadius:3,textTransform:"none"},children:"microsoft.com/devicelogin"})]}),b&&r.jsx(Aa,{in:b,children:r.jsxs(M,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(We,{size:20,sx:{mr:2}}),r.jsx(A,{children:"Waiting for user authentication..."})]})}),r.jsxs(xe,{severity:"info",sx:{mt:3,borderRadius:2},children:[r.jsx(Ze,{children:"Important"}),"The user must:",r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(se,{primary:"Sign in with their Exchange account"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(se,{primary:"Accept the Mail.Send permission"})]}),r.jsxs(ce,{children:[r.jsx(De,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(se,{primary:"Grant permission to send emails as this user"})]})]})]})]}):r.jsx(M,{display:"flex",justifyContent:"center",alignItems:"center",py:4,children:r.jsx(We,{})})}),r.jsx(Ct,{sx:{p:3},children:r.jsx(Y,{onClick:()=>{N(!1),y(!1),g(null)},sx:{borderRadius:2},children:"Cancel"})})]})]});const ae=X=>{switch(X){case 0:return r.jsx(Aa,{in:!0,children:r.jsxs(M,{children:[r.jsx(M,{textAlign:"center",mb:4,children:r.jsxs(Ht.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[r.jsx(ho,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:a?.isConfigured?"Reconfigure Exchange Online":"Welcome to Exchange Online Setup"}),r.jsx(A,{variant:"subtitle1",color:"textSecondary",children:"Connect your Microsoft Exchange to enable email functionality"})]})}),a?.isConfigured&&r.jsx(Cl,{in:!0,children:r.jsxs(xe,{severity:"info",sx:{mb:3,borderRadius:2},children:[r.jsx(Ze,{children:"Current Configuration"}),"You have an existing configuration. Creating a new app will replace the current one.",r.jsx(Y,{size:"small",startIcon:r.jsx(rs,{}),sx:{mt:1,color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},onClick:()=>h(!1),children:"Back to Dashboard"})]})}),r.jsx(A,{variant:"h6",gutterBottom:!0,sx:{mt:3,mb:2,fontWeight:"medium"},children:"Choose Your Setup Method:"}),r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(vl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="automatic"?"2px solid":"1px solid",borderColor:w==="automatic"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="automatic"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("automatic"),children:r.jsxs(Oe,{sx:{p:3},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(M,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(Sb,{sx:{fontSize:32,color:"white"}})}),r.jsxs(M,{flex:1,children:[r.jsx(A,{variant:"h5",fontWeight:"bold",children:"Automatic Setup"}),r.jsx(we,{label:"Recommended",color:"success",size:"small",sx:{mt:.5},icon:r.jsx(Pb,{})})]})]}),r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Let the wizard automatically create and configure your Azure AD application with all required permissions."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(se,{primary:"One-click setup",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(se,{primary:"Automatic permissions",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(se,{primary:"Admin consent handling",primaryTypographyProps:{variant:"body2"}})]})]})]})})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(vl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="manual"?"2px solid":"1px solid",borderColor:w==="manual"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="manual"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("manual"),children:r.jsxs(Oe,{sx:{p:3},children:[r.jsxs(M,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(M,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(fs,{sx:{fontSize:32,color:"white"}})}),r.jsxs(M,{flex:1,children:[r.jsx(A,{variant:"h5",fontWeight:"bold",children:"Manual Setup"}),r.jsx(we,{label:"Advanced",color:"info",size:"small",sx:{mt:.5},icon:r.jsx(Ys,{})})]})]}),r.jsx(A,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Manually enter your existing Azure AD application details for complete control."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(se,{primary:"Use existing app",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(se,{primary:"Custom configuration",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ce,{sx:{pl:0},children:[r.jsx(De,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(se,{primary:"Full control",primaryTypographyProps:{variant:"body2"}})]})]})]})})})]}),r.jsx(M,{mt:4,display:"flex",justifyContent:"center",children:r.jsxs(Y,{variant:"contained",size:"large",onClick:()=>o(1),disabled:!w,startIcon:r.jsx(kb,{}),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontSize:"1.1rem",fontWeight:"bold",background:w?t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":void 0},children:["Continue with ",w==="automatic"?"Automatic":w==="manual"?"Manual":""," Setup"]})})]})});case 1:return w==="automatic"?r.jsx(jF,{onReset:()=>o(0),children:r.jsx(Yx,{onComplete:K,onBack:J})}):r.jsx(gF,{onComplete:()=>z(),onBack:J});case 2:return r.jsx(mF,{deviceCodeInfo:m,polling:b,onSuccess:()=>{z(),U()}});case 3:return r.jsx(Aa,{in:!0,children:r.jsxs(M,{textAlign:"center",children:[r.jsx(Ht.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(Ne,{sx:{fontSize:80,color:"success.main",mb:2}})}),r.jsx(A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Configuration Complete!"}),r.jsx(A,{variant:"subtitle1",color:"textSecondary",paragraph:!0,children:"Your Exchange Online integration is ready to use."}),r.jsxs(M,{mt:4,children:[r.jsx(Y,{variant:"contained",size:"large",onClick:()=>ve(a?.defaultAccount),disabled:s,startIcon:s?r.jsx(We,{size:20}):r.jsx(wl,{}),sx:{borderRadius:3,px:4,py:1.5,mr:2,textTransform:"none",background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:"Test Connection"}),r.jsx(Y,{variant:"outlined",size:"large",onClick:()=>h(!1),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none"},children:"Go to Dashboard"})]}),k&&r.jsx(Cl,{in:!0,children:r.jsxs(xe,{severity:k.success?"success":"error",sx:{mt:3,borderRadius:2},children:[r.jsx(Ze,{children:k.success?"Test Successful":"Test Failed"}),k.message||k.error]})})]})});default:return null}};return r.jsx(M,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:r.jsx($f,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},sx:{maxWidth:1200,mx:"auto",px:3},children:r.jsxs(fe,{sx:{p:{xs:3,md:5},borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[r.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[r.jsxs(M,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(ho,{sx:{fontSize:40,color:"primary.main"}}),r.jsx(A,{variant:"h4",fontWeight:"bold",children:"Exchange Online Setup"})]}),n>0&&!(n===1&&(w==="automatic"||w==="manual"))&&r.jsx(Y,{variant:"outlined",startIcon:r.jsx(rs,{}),onClick:J,sx:{borderRadius:2,borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.23)":"rgba(0, 0, 0, 0.23)",color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},children:"Back"})]}),(n===0||w!=="automatic")&&r.jsx(Hr,{activeStep:n,sx:{mb:5},children:B.map((X,ne)=>r.jsx(zn,{children:r.jsx(Un,{StepIconProps:{sx:{fontSize:28,"&.Mui-completed":{color:"success.main"},"&.Mui-active":{color:"primary.main"}}},children:r.jsx(A,{variant:"body1",fontWeight:n===ne?"bold":"normal",children:X})})},X))}),r.jsx(M,{sx:{minHeight:400},children:ae(n)}),w!=="automatic"&&r.jsxs(r.Fragment,{children:[r.jsx(Sn,{in:!!T,children:r.jsx(xe,{severity:"error",sx:{mt:3,borderRadius:2},onClose:()=>I(null),children:T})}),r.jsx(Sn,{in:!!D,children:r.jsx(xe,{severity:"success",sx:{mt:3,borderRadius:2},onClose:()=>V(null),children:D})})]})]})})})},EF=({children:e})=>{const{user:t,loading:n}=Wt();return n?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?e:r.jsx(sp,{to:"/login",replace:!0})},Bo=240,Ho=65,TF=({darkMode:e,toggleDarkMode:t})=>{const[n,o]=f.useState(!0),{user:s}=Wt(),i=Hb(),a=kc(),l=Yt(),u=[{path:"/dashboard",name:"Dashboard",icon:r.jsx(jl,{})},{path:"/analytics",name:"Analytics",icon:r.jsx(Ib,{})},{path:"/devices",name:"Devices",icon:r.jsx(Vf,{})},{path:"/queue",name:"Queue",icon:r.jsx(mo,{})},{path:"/logs",name:"Logs",icon:r.jsx(Eb,{})},{path:"/ip-whitelist",name:"IP Whitelist",icon:r.jsx(Fn,{})},{path:"/sessions",name:"Sessions",icon:r.jsx(go,{})},...s?.role==="admin"?[{path:"/users",name:"User Management",icon:r.jsx(Tb,{})}]:[],{path:"/exchange-setup",name:"Exchange Setup",icon:r.jsx(Jf,{})},{path:"/settings",name:"Settings",icon:r.jsx(fs,{})}],c=()=>{o(!n)},d=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(h){console.error("Logout error:",h)}sessionStorage.clear(),a("/login")};return r.jsxs(M,{sx:{display:"flex"},children:[r.jsx(rp,{}),r.jsx(Ab,{position:"fixed",sx:{width:`calc(100% - ${n?Bo:Ho}px)`,ml:`${n?Bo:Ho}px`,transition:l.transitions.create(["width","margin"],{easing:l.transitions.easing.sharp,duration:l.transitions.duration.leavingScreen})},children:r.jsxs(Mb,{children:[r.jsx(Pe,{color:"inherit","aria-label":"toggle drawer",onClick:c,edge:"start",sx:{mr:2},children:n?r.jsx(Rb,{}):r.jsx(Db,{})}),r.jsx(A,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:u.find(h=>h.path===i.pathname)?.name||"SMTP Relay"}),r.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(we,{icon:r.jsx(ep,{sx:{fontSize:12}}),label:"Connected",color:"success",size:"small",sx:{"& .MuiChip-icon":{animation:"pulse 2s infinite","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.3},"100%":{opacity:1}}}}}),r.jsx(A,{variant:"body2",sx:{display:{xs:"none",md:"block"}},children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),r.jsx(it,{title:"Toggle theme",children:r.jsx(Pe,{onClick:t,color:"inherit",children:e?r.jsx(Fb,{}):r.jsx(Ob,{})})}),r.jsx(an,{sx:{bgcolor:"secondary.main",width:32,height:32},children:"A"})]})]})}),r.jsxs(Lb,{sx:{width:n?Bo:Ho,flexShrink:0,"& .MuiDrawer-paper":{width:n?Bo:Ho,boxSizing:"border-box",transition:l.transitions.create("width",{easing:l.transitions.easing.sharp,duration:l.transitions.duration.enteringScreen}),overflowX:"hidden"}},variant:"permanent",anchor:"left",children:[r.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:n?"flex-start":"center",p:2,minHeight:64},children:[r.jsx(mo,{sx:{fontSize:32,color:"primary.main",mr:n?1:0}}),n&&r.jsx(A,{variant:"h6",sx:{fontWeight:"bold"},children:"SMTP Relay"})]}),r.jsx(St,{}),r.jsx(ot,{sx:{flexGrow:1},children:u.map(h=>r.jsx(ce,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ma,{component:qu,to:h.path,selected:i.pathname===h.path,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected","&:hover":{backgroundColor:"action.hover"}}},children:[r.jsx(it,{title:n?"":h.name,placement:"right",children:r.jsx(De,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:i.pathname===h.path?"primary.main":"inherit"},children:h.icon})}),n&&r.jsx(se,{primary:h.name,primaryTypographyProps:{fontSize:14,fontWeight:i.pathname===h.path?"medium":"regular"}})]})},h.path))}),r.jsx(St,{}),r.jsxs(ot,{children:[r.jsx(ce,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ma,{component:qu,to:"/profile",selected:i.pathname==="/profile",sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected"}},children:[r.jsx(it,{title:n?"":"Profile",placement:"right",children:r.jsx(De,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center"},children:r.jsx(wc,{})})}),n&&r.jsx(se,{primary:"Profile",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})}),r.jsx(ce,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ma,{onClick:d,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,color:"error.main","&:hover":{backgroundColor:h=>(h.palette.mode==="dark","rgba(244, 67, 54, 0.08)")}},children:[r.jsx(it,{title:n?"":"Logout",placement:"right",children:r.jsx(De,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:"error.main"},children:r.jsx(Yf,{})})}),n&&r.jsx(se,{primary:"Logout",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})})]})]}),r.jsx(M,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",p:3,width:`calc(100% - ${n?Bo:Ho}px)`,minHeight:"100vh",mt:8},children:r.jsx(zb,{})})]})},AF=new nC({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});function MF(){const e=f.useRef(),[t,n]=f.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!0}),o=f.useMemo(()=>_b({palette:{mode:t?"dark":"light",primary:{main:"#667eea",light:"#8b9cff",dark:"#4c63b6"},secondary:{main:"#764ba2",light:"#a374cc",dark:"#542f75"},success:{main:"#84fab0",light:"#b4ffd4",dark:"#52c77e"},error:{main:"#f5576c",light:"#ff8a95",dark:"#c62641"},background:{default:t?"#0f0f23":"#f5f5f5",paper:t?"#1a1a2e":"#ffffff"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700,fontSize:"2.5rem"},h2:{fontWeight:600,fontSize:"2rem"},h3:{fontWeight:600,fontSize:"1.75rem"},h4:{fontWeight:600,fontSize:"1.5rem"},h5:{fontWeight:500,fontSize:"1.25rem"},h6:{fontWeight:500,fontSize:"1rem"},button:{textTransform:"none",fontWeight:500}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 16px",fontSize:"0.875rem"},contained:{boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"}}}},MuiCard:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none",border:t?"1px solid rgba(255,255,255,0.1)":"none",boxShadow:t?"0 8px 32px rgba(0,0,0,0.4)":"0 2px 8px rgba(0,0,0,0.1)"}}},MuiPaper:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none"}}}}}),[t]),s=()=>{n(i=>{const a=!i;return localStorage.setItem("darkMode",JSON.stringify(a)),a})};return r.jsx(aC,{client:AF,children:r.jsxs($b,{theme:o,children:[r.jsx(rp,{}),r.jsx(Lv,{ref:e,maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:4e3,TransitionComponent:Ht.div,action:i=>r.jsx(Pe,{size:"small",color:"inherit",onClick:()=>e.current.closeSnackbar(i),children:r.jsx(iv,{fontSize:"small"})}),children:r.jsx(Ub,{children:r.jsx(PS,{children:r.jsx(w1,{children:r.jsx(Km,{mode:"wait",children:r.jsxs(Gb,{children:[r.jsx($t,{path:"/login",element:r.jsx(IS,{})}),r.jsxs($t,{path:"/",element:r.jsx(EF,{children:r.jsx(TF,{darkMode:t,toggleDarkMode:s})}),children:[r.jsx($t,{index:!0,element:r.jsx(sp,{to:"/dashboard",replace:!0})}),r.jsx($t,{path:"dashboard",element:r.jsx(j1,{})}),r.jsx($t,{path:"devices",element:r.jsx(aD,{})}),r.jsx($t,{path:"queue",element:r.jsx(lD,{})}),r.jsx($t,{path:"logs",element:r.jsx(YD,{})}),r.jsx($t,{path:"settings",element:r.jsx(XD,{})}),r.jsx($t,{path:"ip-whitelist",element:r.jsx(JD,{})}),r.jsx($t,{path:"sessions",element:r.jsx(ZD,{})}),r.jsx($t,{path:"analytics",element:r.jsx(tF,{})}),r.jsx($t,{path:"users",element:r.jsx(nF,{})}),r.jsx($t,{path:"profile",element:r.jsx(pF,{})}),r.jsx($t,{path:"exchange-setup",element:r.jsx(IF,{})})]})]})})})})})}),!1]})})}document.querySelector(".loader")?.classList.remove("active");tv.createRoot(document.getElementById("root")).render(r.jsx(Le.StrictMode,{children:r.jsx(MF,{})}));
//# sourceMappingURL=index-1rzAneVD.js.map
