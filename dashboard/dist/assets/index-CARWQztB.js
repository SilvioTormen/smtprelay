import{u as uy,r as dy,a as hy,_ as j,b as Gi,j as r,D as at,d as lt,e as ct,B as A,T as k,f as gc,g as sn,S as xc,K as $r,A as ye,h as Fe,C as Ue,i as bt,k as Y,l as Ve,m as fy,I as Er,E as py,n as Se,V as yc,o as bc,L as my,F as $n,p as Bf,q as ft,s as pt,R as gn,t as we,W as mn,G as K,v as mo,w as Hf,x as zf,y as Rn,z as ae,H as Gt,J as Oe,M as Ne,N as In,O as Kn,Q as hr,U as Pt,X as Te,Y as St,c as $e,Z as le,$ as Hr,a0 as Ui,a1 as Tn,a2 as mt,a3 as Xe,a4 as Gf,a5 as Uf,a6 as jl,a7 as vc,a8 as _t,a9 as Wf,aa as Cc,ab as re,ac as gy,ad as xy,ae as So,af as fn,ag as Je,ah as de,ai as Re,aj as ce,ak as yy,al as by,am as qf,an as vy,ao as Cy,ap as Bu,aq as ns,ar as Kf,as as wy,at as Bt,au as nr,av as Mt,aw as wt,ax as fr,P as U,ay as jy,az as sr,aA as Qf,aB as Xt,aC as ro,aD as Sy,aE as Py,aF as Sl,aG as ky,aH as wc,aI as wn,aJ as Wi,aK as Iy,aL as Ty,aM as Ey,aN as Ay,aO as go,aP as Ht,aQ as Hu,aR as My,aS as ho,aT as Ry,aU as Dy,aV as Yf,aW as Xf,aX as Jf,aY as mi,aZ as ir,a_ as Fy,a$ as Oy,b0 as xo,b1 as jc,b2 as Ly,b3 as Ye,b4 as Zf,b5 as _y,b6 as ep,b7 as Ar,b8 as $y,b9 as zu,ba as Gu,bb as Sc,bc as ar,bd as Bn,be as Ny,bf as Vy,bg as By,bh as Hy,bi as zy,bj as Gy,bk as zt,bl as Uy,bm as Wy,bn as tp,bo as Pc,bp as qy,bq as Ky,br as Qy,bs as Uu,bt as Wu,bu as Yy,bv as Xy,bw as Jy,bx as Zy,by as ot,bz as ge,bA as np,bB as un,bC as Ko,bD as Mr,bE as Zs,bF as eb,bG as tb,bH as rp,bI as ka,bJ as Ia,bK as zr,bL as Hn,bM as zn,bN as Ta,bO as nb,bP as qi,bQ as jn,bR as rs,bS as rr,bT as rb,bU as gi,bV as Pl,bW as Ea,bX as ob,bY as ps,bZ as ms,b_ as gs,b$ as En,c0 as ue,c1 as xs,c2 as kl,c3 as Qo,c4 as op,c5 as sb,c6 as ib,c7 as ab,c8 as sp,c9 as lb,ca as cb,cb as ub,cc as db,cd as hb,ce as fb,cf as Il,cg as ip,ch as pb,ci as mb,cj as gb,ck as xi,cl as xb,cm as yb,cn as ap,co as bb,cp as vb,cq as Cb,cr as os,cs as kc,ct as lp,cu as wb,cv as jb,cw as Sb,cx as Aa,cy as qu,cz as Pb,cA as Ku,cB as kb,cC as Ib,cD as Ma,cE as Tb,cF as Eb,cG as Ab,cH as Mb,cI as cp,cJ as Rb,cK as Db,cL as Fb,cM as Ob,cN as Lb,cO as _b,cP as $b,cQ as Nb,cR as Vb,cS as Ra,cT as Bb,cU as Hb}from"./mui-vendor-B2VBbI2A.js";import{h as zb,g as Ic,b as Gb,c as Le,a as h,e as Tc,d as Ub,u as Ec,r as up,N as dp,i as Wb,L as Os,O as qb,B as Kb,j as Qb,k as Rt}from"./react-vendor-QNX_tP7X.js";import{R as Yb,A as Xb,C as Jb,X as Zb,Y as ev,T as tv,L as nv,a as Ls}from"./chart-vendor-CB_lVEXS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var _s={},Qu;function rv(){if(Qu)return _s;Qu=1;var e=zb();return _s.createRoot=e.createRoot,_s.hydrateRoot=e.hydrateRoot,_s}var ov=rv();const sv=Ic(ov);var Ro={},Da={};const iv=Gb(uy);var Yu;function av(){return Yu||(Yu=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=iv}(Da)),Da}var Xu;function lv(){if(Xu)return Ro;Xu=1;var e=dy();Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.default=void 0;var t=e(av()),n=hy();return Ro.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ro}var cv=lv();const uv=Ic(cv);function hp(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=hp(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function Gr(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=hp(e))&&(o&&(o+=" "),o+=t);return o}let dv={data:""},hv=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||dv,fv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pv=/\/\*[^]*?\*\/|  +/g,Ju=/\n+/g,Pr=(e,t)=>{let n="",o="",s="";for(let i in e){let a=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":o+=i[1]=="f"?Pr(a,i):i+"{"+Pr(a,i[1]=="k"?"":t)+"}":typeof a=="object"?o+=Pr(a,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Pr.p?Pr.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+o},Fn={},fp=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+fp(e[n]);return t}return e},mv=(e,t,n,o,s)=>{let i=fp(e),a=Fn[i]||(Fn[i]=(u=>{let c=0,d=11;for(;c<u.length;)d=101*d+u.charCodeAt(c++)>>>0;return"go"+d})(i));if(!Fn[a]){let u=i!==e?e:(c=>{let d,f,p=[{}];for(;d=fv.exec(c.replace(pv,""));)d[4]?p.shift():d[3]?(f=d[3].replace(Ju," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(Ju," ").trim();return p[0]})(e);Fn[a]=Pr(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let l=n&&Fn.g?Fn.g:null;return n&&(Fn.g=Fn[a]),((u,c,d,f)=>{f?c.data=c.data.replace(f,u):c.data.indexOf(u)===-1&&(c.data=d?u+c.data:c.data+u)})(Fn[a],t,o,l),a},gv=(e,t,n)=>e.reduce((o,s,i)=>{let a=t[i];if(a&&a.call){let l=a(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=u?"."+u:l&&typeof l=="object"?l.props?"":Pr(l,""):l===!1?"":l}return o+s+(a??"")},"");function Ac(e){let t=this||{},n=e.call?e(t.p):e;return mv(n.unshift?n.raw?gv(n,[].slice.call(arguments,1),t.p):n.reduce((o,s)=>Object.assign(o,s&&s.call?s(t.p):s),{}):n,hv(t.target),t.g,t.o,t.k)}Ac.bind({g:1});Ac.bind({k:1});function xv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pp(e,t,n){return t&&xv(e.prototype,t),e}function Qe(){return Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qe.apply(this,arguments)}function mp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ys(e,t){if(e==null)return{};var n={},o=Object.keys(e),s,i;for(i=0;i<o.length;i++)s=o[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Zu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ed=function(){return""},gp=Le.createContext({enqueueSnackbar:ed,closeSnackbar:ed}),Cr={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},td=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Mc=function(t){return""+td(t.vertical)+td(t.horizontal)},$s=function(t){return!!t||t===0},Ns="unmounted",Qr="exited",Yr="entering",Do="entered",nd="exiting",Rc=function(e){mp(t,e);function t(o){var s;s=e.call(this,o)||this;var i=o.appear,a;return s.appearStatus=null,o.in?i?(a=Qr,s.appearStatus=Yr):a=Do:o.unmountOnExit||o.mountOnEnter?a=Ns:a=Qr,s.state={status:a},s.nextCallback=null,s}t.getDerivedStateFromProps=function(s,i){var a=s.in;return a&&i.status===Ns?{status:Qr}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Yr&&a!==Do&&(i=Yr):(a===Yr||a===Do)&&(i=nd)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i=s,a=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(a=s.exit,i=s.enter),{exit:a,enter:i}},n.updateStatus=function(s,i){s===void 0&&(s=!1),i!==null?(this.cancelNextCallback(),i===Yr?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===Qr&&this.setState({status:Ns})},n.performEnter=function(s){var i=this,a=this.props.enter,l=s,u=this.getTimeouts();if(!s&&!a){this.safeSetState({status:Do},function(){i.props.onEntered&&i.props.onEntered(i.node,l)});return}this.props.onEnter&&this.props.onEnter(this.node,l),this.safeSetState({status:Yr},function(){i.props.onEntering&&i.props.onEntering(i.node,l),i.onTransitionEnd(u.enter,function(){i.safeSetState({status:Do},function(){i.props.onEntered&&i.props.onEntered(i.node,l)})})})},n.performExit=function(){var s=this,i=this.props.exit,a=this.getTimeouts();if(!i){this.safeSetState({status:Qr},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:nd},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Qr},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,a=!0;return this.nextCallback=function(){a&&(a=!1,i.nextCallback=null,s())},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var a=s==null&&!this.props.addEndListener;if(!this.node||a){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Ns)return null;var i=this.props,a=i.children,l=ys(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return a(s,l)},pp(t,[{key:"node",get:function(){var s,i=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!i)throw new Error("notistack - Custom snackbar is not refForwarding");return i}}]),t}(Le.Component);function Xr(){}Rc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xr,onEntering:Xr,onEntered:Xr,onExit:Xr,onExiting:Xr,onExited:Xr};function rd(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Tl(e,t){return h.useMemo(function(){return e==null&&t==null?null:function(n){rd(e,n),rd(t,n)}},[e,t])}function yi(e){var t=e.timeout,n=e.style,o=n===void 0?{}:n,s=e.mode;return{duration:typeof t=="object"?t[s]||0:t,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var El={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xp=function(t){t.scrollTop=t.scrollTop},od=function(t){return Math.round(t)+"ms"};function oo(e,t){e===void 0&&(e=["all"]);var n=t||{},o=n.duration,s=o===void 0?300:o,i=n.easing,a=i===void 0?El.easeInOut:i,l=n.delay,u=l===void 0?0:l,c=Array.isArray(e)?e:[e];return c.map(function(d){var f=typeof s=="string"?s:od(s),p=typeof u=="string"?u:od(u);return d+" "+f+" "+a+" "+p}).join(",")}function yv(e){return e&&e.ownerDocument||document}function yp(e){var t=yv(e);return t.defaultView||window}function bv(e,t){t===void 0&&(t=166);var n;function o(){for(var s=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=function(){e.apply(s,a)};clearTimeout(n),n=setTimeout(u,t)}return o.clear=function(){clearTimeout(n)},o}function vv(e,t){var n=t.getBoundingClientRect(),o=yp(t),s;if(t.fakeTransform)s=t.fakeTransform;else{var i=o.getComputedStyle(t);s=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var a=0,l=0;if(s&&s!=="none"&&typeof s=="string"){var u=s.split("(")[1].split(")")[0].split(",");a=parseInt(u[4],10),l=parseInt(u[5],10)}switch(e){case"left":return"translateX("+(o.innerWidth+a-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-a)+"px)";case"up":return"translateY("+(o.innerHeight+l-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-l)+"px)"}}function Vs(e,t){if(t){var n=vv(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var bp=h.forwardRef(function(e,t){var n=e.children,o=e.direction,s=o===void 0?"down":o,i=e.in,a=e.style,l=e.timeout,u=l===void 0?0:l,c=e.onEnter,d=e.onEntered,f=e.onExit,p=e.onExited,x=ys(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),g=h.useRef(null),m=Tl(n.ref,g),v=Tl(m,t),y=function(I,R){Vs(s,I),xp(I),c&&c(I,R)},b=function(I){var R=a?.transitionTimingFunction||El.easeOut,N=yi({timeout:u,mode:"enter",style:Qe({},a,{transitionTimingFunction:R})});I.style.webkitTransition=oo("-webkit-transform",N),I.style.transition=oo("transform",N),I.style.webkitTransform="none",I.style.transform="none"},C=function(I){var R=a?.transitionTimingFunction||El.sharp,N=yi({timeout:u,mode:"exit",style:Qe({},a,{transitionTimingFunction:R})});I.style.webkitTransition=oo("-webkit-transform",N),I.style.transition=oo("transform",N),Vs(s,I),f&&f(I)},P=function(I){I.style.webkitTransition="",I.style.transition="",p&&p(I)},L=h.useCallback(function(){g.current&&Vs(s,g.current)},[s]);return h.useEffect(function(){if(!(i||s==="down"||s==="right")){var T=bv(function(){g.current&&Vs(s,g.current)}),I=yp(g.current);return I.addEventListener("resize",T),function(){T.clear(),I.removeEventListener("resize",T)}}},[s,i]),h.useEffect(function(){i||L()},[i,L]),h.createElement(Rc,Object.assign({appear:!0,nodeRef:g,onEnter:y,onEntered:d,onEntering:b,onExit:C,onExited:P,in:i,timeout:u},x),function(T,I){return h.cloneElement(n,Qe({ref:v,style:Qe({visibility:T==="exited"&&!i?"hidden":void 0},a,{},n.props.style)},I))})});bp.displayName="Slide";var Ki=function(t){return Le.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},Cv=function(){return Le.createElement(Ki,null,Le.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},wv=function(){return Le.createElement(Ki,null,Le.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},jv=function(){return Le.createElement(Ki,null,Le.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Sv=function(){return Le.createElement(Ki,null,Le.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Pv={default:void 0,success:Le.createElement(Cv,null),warning:Le.createElement(wv,null),error:Le.createElement(jv,null),info:Le.createElement(Sv,null)},Rr={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Pv,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:bp,transitionDuration:{enter:225,exit:195}},kv=function(t,n){var o=function(i){return typeof i=="number"||i===null};return o(t)?t:o(n)?n:Rr.autoHideDuration},Iv=function(t,n){var o=function(i,a){return a.some(function(l){return typeof i===l})};return o(t,["string","number"])?t:o(t,["object"])?Qe({},Rr.transitionDuration,{},o(n,["object"])&&n,{},t):o(n,["string","number"])?n:o(n,["object"])?Qe({},Rr.transitionDuration,{},n):Rr.transitionDuration},Tv=function(t,n){return function(o,s){return s===void 0&&(s=!1),s?Qe({},Rr[o],{},n[o],{},t[o]):o==="autoHideDuration"?kv(t.autoHideDuration,n.autoHideDuration):o==="transitionDuration"?Iv(t.transitionDuration,n.transitionDuration):t[o]||n[o]||Rr[o]}};function bs(e){return Object.entries(e).reduce(function(t,n){var o,s=n[0],i=n[1];return Qe({},t,(o={},o[s]=Ac(i),o))},{})}var yo={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},sd=bs({root:{height:0},entered:{height:"auto"}}),Fa="0px",Oa=175,vp=h.forwardRef(function(e,t){var n=e.children,o=e.in,s=e.onExited,i=h.useRef(null),a=h.useRef(null),l=Tl(t,a),u=function(){return i.current?i.current.clientHeight:0},c=function(m){m.style.height=Fa},d=function(m){var v=u(),y=yi({timeout:Oa,mode:"enter"}),b=y.duration,C=y.easing;m.style.transitionDuration=typeof b=="string"?b:b+"ms",m.style.height=v+"px",m.style.transitionTimingFunction=C||""},f=function(m){m.style.height="auto"},p=function(m){m.style.height=u()+"px"},x=function(m){xp(m);var v=yi({timeout:Oa,mode:"exit"}),y=v.duration,b=v.easing;m.style.transitionDuration=typeof y=="string"?y:y+"ms",m.style.height=Fa,m.style.transitionTimingFunction=b||""};return h.createElement(Rc,{in:o,unmountOnExit:!0,onEnter:c,onEntered:f,onEntering:d,onExit:p,onExited:s,onExiting:x,nodeRef:a,timeout:Oa},function(g,m){return h.createElement("div",Object.assign({ref:l,className:Gr(sd.root,g==="entered"&&sd.entered),style:Qe({pointerEvents:"all",overflow:"hidden",minHeight:Fa,transition:oo("height")},g==="entered"&&{overflow:"visible"},{},g==="exited"&&!o&&{visibility:"hidden"})},m),h.createElement("div",{ref:i,className:yo.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});vp.displayName="Collapse";var id={right:"left",left:"right",bottom:"up",top:"down"},Ev=function(t){return t.horizontal!=="center"?id[t.horizontal]:id[t.vertical]},Av=function(t){return"anchorOrigin"+Mc(t)},Mv=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(o){return!n[o]}).reduce(function(o,s){var i;return Qe({},o,(i={},i[s]=t[s],i))},{})},Rv=function(){};function Yo(e,t){return e.reduce(function(n,o){return o==null?n:function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=[].concat(a);t&&u.indexOf(t)===-1&&u.push(t),n.apply(this,u),o.apply(this,u)}},Rv)}var Dv=typeof window<"u"?h.useLayoutEffect:h.useEffect;function ad(e){var t=h.useRef(e);return Dv(function(){t.current=e}),h.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var Cp=h.forwardRef(function(e,t){var n=e.children,o=e.className,s=e.autoHideDuration,i=e.disableWindowBlurListener,a=i===void 0?!1:i,l=e.onClose,u=e.id,c=e.open,d=e.SnackbarProps,f=d===void 0?{}:d,p=h.useRef(),x=ad(function(){l&&l.apply(void 0,arguments)}),g=ad(function(C){!l||C==null||(p.current&&clearTimeout(p.current),p.current=setTimeout(function(){x(null,"timeout",u)},C))});h.useEffect(function(){return c&&g(s),function(){p.current&&clearTimeout(p.current)}},[c,s,g]);var m=function(){p.current&&clearTimeout(p.current)},v=h.useCallback(function(){s!=null&&g(s*.5)},[s,g]),y=function(P){f.onMouseEnter&&f.onMouseEnter(P),m()},b=function(P){f.onMouseLeave&&f.onMouseLeave(P),v()};return h.useEffect(function(){if(!a&&c)return window.addEventListener("focus",v),window.addEventListener("blur",m),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",m)}},[a,v,c]),h.createElement("div",Object.assign({ref:t},f,{className:Gr(yo.Snackbar,o),onMouseEnter:y,onMouseLeave:b}),n)});Cp.displayName="Snackbar";var La,Fv=bs({root:(La={display:"flex",flexWrap:"wrap",flexGrow:1},La[Cr.upSm]={flexGrow:"initial",minWidth:"288px"},La)}),wp=h.forwardRef(function(e,t){var n=e.className,o=ys(e,["className"]);return Le.createElement("div",Object.assign({ref:t,className:Gr(Fv.root,n)},o))});wp.displayName="SnackbarContent";var Fo=bs({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ld="notistack-snackbar",jp=h.forwardRef(function(e,t){var n=e.id,o=e.message,s=e.action,i=e.iconVariant,a=e.variant,l=e.hideIconVariant,u=e.style,c=e.className,d=i[a],f=s;return typeof f=="function"&&(f=f(n)),Le.createElement(wp,{ref:t,role:"alert","aria-describedby":ld,style:u,className:Gr(yo.MuiContent,yo.MuiContentVariant(a),Fo.root,Fo[a],c,!l&&d&&Fo.lessPadding)},Le.createElement("div",{id:ld,className:Fo.message},l?null:d,o),f&&Le.createElement("div",{className:Fo.action},f))});jp.displayName="MaterialDesignContent";var Ov=h.memo(jp),Lv=bs({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),_v=function(t){var n=h.useRef(),o=h.useState(!0),s=o[0],i=o[1],a=Yo([t.snack.onClose,t.onClose]),l=function(){t.snack.requestClose&&a(null,"instructed",t.snack.id)},u=h.useCallback(function(){n.current=setTimeout(function(){i(function(N){return!N})},125)},[]);h.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var c=t.snack,d=t.classes,f=t.Component,p=f===void 0?Ov:f,x=h.useMemo(function(){return Mv(d)},[d]),g=c.open,m=c.SnackbarProps,v=c.TransitionComponent,y=c.TransitionProps,b=c.transitionDuration,C=c.disableWindowBlurListener,P=c.content,L=ys(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=Qe({direction:Ev(L.anchorOrigin),timeout:b},y),I=P;typeof I=="function"&&(I=I(L.id,L.message));var R=["onEnter","onEntered","onExit","onExited"].reduce(function(N,F){var S;return Qe({},N,(S={},S[F]=Yo([t.snack[F],t[F]],L.id),S))},{});return Le.createElement(vp,{in:s,onExited:R.onExited},Le.createElement(Cp,{open:g,id:L.id,disableWindowBlurListener:C,autoHideDuration:L.autoHideDuration,className:Gr(Lv.wrappedRoot,x.root,x[Av(L.anchorOrigin)]),SnackbarProps:m,onClose:a},Le.createElement(v,Object.assign({},T,{appear:!0,in:g,onExit:R.onExit,onExited:u,onEnter:R.onEnter,onEntered:Yo([R.onEntered,l],L.id)}),I||Le.createElement(p,Object.assign({},L)))))},Oo,_a,Bs,Hs,$a,On={view:{default:20},snackbar:{default:6,dense:2}},cd="."+yo.CollapseWrapper,Na=16,zs=bs({root:(Oo={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:oo(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Oo[cd]={padding:On.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Oo.maxWidth="calc(100% - "+On.view.default*2+"px)",Oo[Cr.downXs]={width:"100%",maxWidth:"calc(100% - "+Na*2+"px)"},Oo),rootDense:(_a={},_a[cd]={padding:On.snackbar.dense+"px 0px"},_a),top:{top:On.view.default-On.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:On.view.default-On.snackbar.default+"px",flexDirection:"column-reverse"},left:(Bs={left:On.view.default+"px"},Bs[Cr.upSm]={alignItems:"flex-start"},Bs[Cr.downXs]={left:Na+"px"},Bs),right:(Hs={right:On.view.default+"px"},Hs[Cr.upSm]={alignItems:"flex-end"},Hs[Cr.downXs]={right:Na+"px"},Hs),center:($a={left:"50%",transform:"translateX(-50%)"},$a[Cr.upSm]={alignItems:"center"},$a)}),$v=function(t){var n=t.classes,o=n===void 0?{}:n,s=t.anchorOrigin,i=t.dense,a=t.children,l=Gr(yo.SnackbarContainer,zs[s.vertical],zs[s.horizontal],zs.root,o.containerRoot,o["containerAnchorOrigin"+Mc(s)],i&&zs.rootDense);return Le.createElement("div",{className:l},a)},Nv=h.memo($v),ud=function(t){var n=typeof t=="string"||h.isValidElement(t);return!n},Vv=function(e){mp(t,e);function t(o){var s;return s=e.call(this,o)||this,s.enqueueSnackbar=function(i,a){if(a===void 0&&(a={}),i==null)throw new Error("enqueueSnackbar called with invalid argument");var l=ud(i)?i:a,u=ud(i)?i.message:i,c=l.key,d=l.preventDuplicate,f=ys(l,["key","preventDuplicate"]),p=$s(c),x=p?c:new Date().getTime()+Math.random(),g=Tv(f,s.props),m=Qe({id:x},f,{message:u,open:!0,entered:!1,requestClose:!1,persist:g("persist"),action:g("action"),content:g("content"),variant:g("variant"),anchorOrigin:g("anchorOrigin"),disableWindowBlurListener:g("disableWindowBlurListener"),autoHideDuration:g("autoHideDuration"),hideIconVariant:g("hideIconVariant"),TransitionComponent:g("TransitionComponent"),transitionDuration:g("transitionDuration"),TransitionProps:g("TransitionProps",!0),iconVariant:g("iconVariant",!0),style:g("style",!0),SnackbarProps:g("SnackbarProps",!0),className:Gr(s.props.className,f.className)});return m.persist&&(m.autoHideDuration=void 0),s.setState(function(v){if(d===void 0&&s.props.preventDuplicate||d){var y=function(L){return p?L.id===x:L.message===u},b=v.queue.findIndex(y)>-1,C=v.snacks.findIndex(y)>-1;if(b||C)return v}return s.handleDisplaySnack(Qe({},v,{queue:[].concat(v.queue,[m])}))}),x},s.handleDisplaySnack=function(i){var a=i.snacks;return a.length>=s.maxSnack?s.handleDismissOldest(i):s.processQueue(i)},s.processQueue=function(i){var a=i.queue,l=i.snacks;return a.length>0?Qe({},i,{snacks:[].concat(l,[a[0]]),queue:a.slice(1,a.length)}):i},s.handleDismissOldest=function(i){if(i.snacks.some(function(d){return!d.open||d.requestClose}))return i;var a=!1,l=!1,u=i.snacks.reduce(function(d,f){return d+(f.open&&f.persist?1:0)},0);u===s.maxSnack&&(l=!0);var c=i.snacks.map(function(d){return!a&&(!d.persist||l)?(a=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),s.props.onClose&&s.props.onClose(null,"maxsnack",d.id),Qe({},d,{open:!1})):Qe({},d,{requestClose:!0})):Qe({},d)});return Qe({},i,{snacks:c})},s.handleEnteredSnack=function(i,a,l){if(!$s(l))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(u){var c=u.snacks;return{snacks:c.map(function(d){return d.id===l?Qe({},d,{entered:!0}):Qe({},d)})}})},s.handleCloseSnack=function(i,a,l){s.props.onClose&&s.props.onClose(i,a,l);var u=l===void 0;s.setState(function(c){var d=c.snacks,f=c.queue;return{snacks:d.map(function(p){return!u&&p.id!==l?Qe({},p):p.entered?Qe({},p,{open:!1}):Qe({},p,{requestClose:!0})}),queue:f.filter(function(p){return p.id!==l})}})},s.closeSnackbar=function(i){var a=s.state.snacks.find(function(l){return l.id===i});$s(i)&&a&&a.onClose&&a.onClose(null,"instructed",i),s.handleCloseSnack(null,"instructed",i)},s.handleExitedSnack=function(i,a){if(!$s(a))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(l){var u=s.processQueue(Qe({},l,{snacks:l.snacks.filter(function(c){return c.id!==a})}));return u.queue.length===0?u:s.handleDismissOldest(u)})},s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(Zu(s)),closeSnackbar:s.closeSnackbar.bind(Zu(s))}},s}var n=t.prototype;return n.render=function(){var s=this,i=this.state.contextValue,a=this.props,l=a.domRoot,u=a.children,c=a.dense,d=c===void 0?!1:c,f=a.Components,p=f===void 0?{}:f,x=a.classes,g=this.state.snacks.reduce(function(v,y){var b,C=Mc(y.anchorOrigin),P=v[C]||[];return Qe({},v,(b={},b[C]=[].concat(P,[y]),b))},{}),m=Object.keys(g).map(function(v){var y=g[v],b=y[0];return Le.createElement(Nv,{key:v,dense:d,anchorOrigin:b.anchorOrigin,classes:x},y.map(function(C){return Le.createElement(_v,{key:C.id,snack:C,classes:x,Component:p[C.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:Yo([s.handleExitedSnack,s.props.onExited],C.id),onEntered:Yo([s.handleEnteredSnack,s.props.onEntered],C.id)})}))});return Le.createElement(gp.Provider,{value:i},u,l?Tc.createPortal(m,l):m)},pp(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||Rr.maxSnack}}]),t}(h.Component),Qt=function(){return h.useContext(gp)},Qi=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(o){var s=this,i=o||function(){};return this.listeners.push(i),this.onSubscribe(),function(){s.listeners=s.listeners.filter(function(a){return a!==i}),s.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),Sp=typeof window>"u";function Dt(){}function Bv(e,t){return typeof e=="function"?e(t):e}function Hv(e){return typeof e=="number"&&e>=0&&e!==1/0}function bi(e){return Array.isArray(e)?e:[e]}function zv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Va(e,t,n){return Yi(e)?typeof t=="function"?j({},n,{queryKey:e,queryFn:t}):j({},t,{queryKey:e}):e}function Jn(e,t,n){return Yi(e)?[j({},t,{queryKey:e}),n]:[e||{},t]}function Gv(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function dd(e,t){var n=e.active,o=e.exact,s=e.fetching,i=e.inactive,a=e.predicate,l=e.queryKey,u=e.stale;if(Yi(l)){if(o){if(t.queryHash!==Dc(l,t.options))return!1}else if(!vi(t.queryKey,l))return!1}var c=Gv(n,i);if(c==="none")return!1;if(c!=="all"){var d=t.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||typeof s=="boolean"&&t.isFetching()!==s||a&&!a(t))}function hd(e,t){var n=e.exact,o=e.fetching,s=e.predicate,i=e.mutationKey;if(Yi(i)){if(!t.options.mutationKey)return!1;if(n){if(kr(t.options.mutationKey)!==kr(i))return!1}else if(!vi(t.options.mutationKey,i))return!1}return!(typeof o=="boolean"&&t.state.status==="loading"!==o||s&&!s(t))}function Dc(e,t){var n=t?.queryKeyHashFn||kr;return n(e)}function kr(e){var t=bi(e);return Uv(t)}function Uv(e){return JSON.stringify(e,function(t,n){return Al(n)?Object.keys(n).sort().reduce(function(o,s){return o[s]=n[s],o},{}):n})}function vi(e,t){return Pp(bi(e),bi(t))}function Pp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!Pp(e[n],t[n])}):!1}function kp(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||Al(e)&&Al(t)){for(var o=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{},l=0,u=0;u<i;u++){var c=n?u:s[u];a[c]=kp(e[c],t[c]),a[c]===e[c]&&l++}return o===i&&l===o?e:a}return t}function Al(e){if(!fd(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!fd(n)||!n.hasOwnProperty("isPrototypeOf"))}function fd(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yi(e){return typeof e=="string"||Array.isArray(e)}function Wv(e){return new Promise(function(t){setTimeout(t,e)})}function pd(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function Ip(){if(typeof AbortController=="function")return new AbortController}var qv=function(e){Gi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!Sp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setFocused(l):a.onFocus()})},n.setFocused=function(s){this.focused=s,s&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(s){s()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(Qi),ei=new qv,Kv=function(e){Gi(t,e);function t(){var o;return o=e.call(this)||this,o.setup=function(s){var i;if(!Sp&&((i=window)!=null&&i.addEventListener)){var a=function(){return s()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},o}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,a=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(l){typeof l=="boolean"?a.setOnline(l):a.onOnline()})},n.setOnline=function(s){this.online=s,s&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(s){s()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(Qi),ti=new Kv;function Qv(e){return Math.min(1e3*Math.pow(2,e),3e4)}function Ci(e){return typeof e?.cancel=="function"}var Tp=function(t){this.revert=t?.revert,this.silent=t?.silent};function Ba(e){return e instanceof Tp}var Ep=function(t){var n=this,o=!1,s,i,a,l;this.abort=t.abort,this.cancel=function(p){return s?.(p)},this.cancelRetry=function(){o=!0},this.continueRetry=function(){o=!1},this.continue=function(){return i?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(p,x){a=p,l=x});var u=function(x){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(x),i?.(),a(x))},c=function(x){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(x),i?.(),l(x))},d=function(){return new Promise(function(x){i=x,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){i=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},f=function p(){if(!n.isResolved){var x;try{x=t.fn()}catch(g){x=Promise.reject(g)}s=function(m){if(!n.isResolved&&(c(new Tp(m)),n.abort==null||n.abort(),Ci(x)))try{x.cancel()}catch{}},n.isTransportCancelable=Ci(x),Promise.resolve(x).then(u).catch(function(g){var m,v;if(!n.isResolved){var y=(m=t.retry)!=null?m:3,b=(v=t.retryDelay)!=null?v:Qv,C=typeof b=="function"?b(n.failureCount,g):b,P=y===!0||typeof y=="number"&&n.failureCount<y||typeof y=="function"&&y(n.failureCount,g);if(o||!P){c(g);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,g),Wv(C).then(function(){if(!ei.isFocused()||!ti.isOnline())return d()}).then(function(){o?c(g):p()})}})}};f()},Yv=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(o){var s;this.transactions++;try{s=o()}finally{this.transactions--,this.transactions||this.flush()}return s},t.schedule=function(o){var s=this;this.transactions?this.queue.push(o):pd(function(){s.notifyFn(o)})},t.batchCalls=function(o){var s=this;return function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];s.schedule(function(){o.apply(void 0,a)})}},t.flush=function(){var o=this,s=this.queue;this.queue=[],s.length&&pd(function(){o.batchNotifyFn(function(){s.forEach(function(i){o.notifyFn(i)})})})},t.setNotifyFunction=function(o){this.notifyFn=o},t.setBatchNotifyFunction=function(o){this.batchNotifyFn=o},e}(),Ct=new Yv,Ap=console;function Mp(){return Ap}function Xv(e){Ap=e}var Jv=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(o){var s;this.options=j({},this.defaultOptions,o),this.meta=o?.meta,this.cacheTime=Math.max(this.cacheTime||0,(s=this.options.cacheTime)!=null?s:300*1e3)},t.setDefaultOptions=function(o){this.defaultOptions=o},t.scheduleGc=function(){var o=this;this.clearGcTimeout(),Hv(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){o.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(o,s){var i,a,l=this.state.data,u=Bv(o,l);return(i=(a=this.options).isDataEqual)!=null&&i.call(a,l,u)?u=l:this.options.structuralSharing!==!1&&(u=kp(l,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:s?.updatedAt}),u},t.setState=function(o,s){this.dispatch({type:"setState",state:o,setStateOptions:s})},t.cancel=function(o){var s,i=this.promise;return(s=this.retryer)==null||s.cancel(o),i?i.then(Dt).catch(Dt):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(o){return o.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(o){return o.getCurrentResult().isStale})},t.isStaleByTime=function(o){return o===void 0&&(o=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!zv(this.state.dataUpdatedAt,o)},t.onFocus=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.onOnline=function(){var o,s=this.observers.find(function(i){return i.shouldFetchOnReconnect()});s&&s.refetch(),(o=this.retryer)==null||o.continue()},t.addObserver=function(o){this.observers.indexOf(o)===-1&&(this.observers.push(o),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:o}))},t.removeObserver=function(o){this.observers.indexOf(o)!==-1&&(this.observers=this.observers.filter(function(s){return s!==o}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:o}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(o,s){var i=this,a,l,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(o&&this.setOptions(o),!this.options.queryFn){var d=this.observers.find(function(b){return b.options.queryFn});d&&this.setOptions(d.options)}var f=bi(this.queryKey),p=Ip(),x={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(x,"signal",{enumerable:!0,get:function(){if(p)return i.abortSignalConsumed=!0,p.signal}});var g=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(x)):Promise.reject("Missing queryFn")},m={fetchOptions:s,options:this.options,queryKey:f,state:this.state,fetchFn:g,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var v;(v=this.options.behavior)==null||v.onFetch(m)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=m.fetchOptions)==null?void 0:l.meta)){var y;this.dispatch({type:"fetch",meta:(y=m.fetchOptions)==null?void 0:y.meta})}return this.retryer=new Ep({fn:m.fetchFn,abort:p==null||(u=p.abort)==null?void 0:u.bind(p),onSuccess:function(C){i.setData(C),i.cache.config.onSuccess==null||i.cache.config.onSuccess(C,i),i.cacheTime===0&&i.optionalRemove()},onError:function(C){Ba(C)&&C.silent||i.dispatch({type:"error",error:C}),Ba(C)||(i.cache.config.onError==null||i.cache.config.onError(C,i),Mp().error(C)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(o){var s=this;this.state=this.reducer(this.state,o),Ct.batch(function(){s.observers.forEach(function(i){i.onQueryUpdate(o)}),s.cache.notify({query:s,type:"queryUpdated",action:o})})},t.getDefaultState=function(o){var s=typeof o.initialData=="function"?o.initialData():o.initialData,i=typeof o.initialData<"u",a=i?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0,l=typeof s<"u";return{data:s,dataUpdateCount:0,dataUpdatedAt:l?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},t.reducer=function(o,s){var i,a;switch(s.type){case"failed":return j({},o,{fetchFailureCount:o.fetchFailureCount+1});case"pause":return j({},o,{isPaused:!0});case"continue":return j({},o,{isPaused:!1});case"fetch":return j({},o,{fetchFailureCount:0,fetchMeta:(i=s.meta)!=null?i:null,isFetching:!0,isPaused:!1},!o.dataUpdatedAt&&{error:null,status:"loading"});case"success":return j({},o,{data:s.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:(a=s.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=s.error;return Ba(l)&&l.revert&&this.revertState?j({},this.revertState):j({},o,{error:l,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return j({},o,{isInvalidated:!0});case"setState":return j({},o,s.state);default:return o}},e}(),Zv=function(e){Gi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.queries=[],s.queriesMap={},s}var n=t.prototype;return n.build=function(s,i,a){var l,u=i.queryKey,c=(l=i.queryHash)!=null?l:Dc(u,i),d=this.get(c);return d||(d=new Jv({cache:this,queryKey:u,queryHash:c,options:s.defaultQueryOptions(i),state:a,defaultOptions:s.getQueryDefaults(u),meta:i.meta}),this.add(d)),d},n.add=function(s){this.queriesMap[s.queryHash]||(this.queriesMap[s.queryHash]=s,this.queries.push(s),this.notify({type:"queryAdded",query:s}))},n.remove=function(s){var i=this.queriesMap[s.queryHash];i&&(s.destroy(),this.queries=this.queries.filter(function(a){return a!==s}),i===s&&delete this.queriesMap[s.queryHash],this.notify({type:"queryRemoved",query:s}))},n.clear=function(){var s=this;Ct.batch(function(){s.queries.forEach(function(i){s.remove(i)})})},n.get=function(s){return this.queriesMap[s]},n.getAll=function(){return this.queries},n.find=function(s,i){var a=Jn(s,i),l=a[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(u){return dd(l,u)})},n.findAll=function(s,i){var a=Jn(s,i),l=a[0];return Object.keys(l).length>0?this.queries.filter(function(u){return dd(l,u)}):this.queries},n.notify=function(s){var i=this;Ct.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){var s=this;Ct.batch(function(){s.queries.forEach(function(i){i.onFocus()})})},n.onOnline=function(){var s=this;Ct.batch(function(){s.queries.forEach(function(i){i.onOnline()})})},t}(Qi),eC=function(){function e(n){this.options=j({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||tC(),this.meta=n.meta}var t=e.prototype;return t.setState=function(o){this.dispatch({type:"setState",state:o})},t.addObserver=function(o){this.observers.indexOf(o)===-1&&this.observers.push(o)},t.removeObserver=function(o){this.observers=this.observers.filter(function(s){return s!==o})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Dt).catch(Dt)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var o=this,s,i=this.state.status==="loading",a=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){o.mutationCache.config.onMutate==null||o.mutationCache.config.onMutate(o.state.variables,o)}).then(function(){return o.options.onMutate==null?void 0:o.options.onMutate(o.state.variables)}).then(function(l){l!==o.state.context&&o.dispatch({type:"loading",context:l,variables:o.state.variables})})),a.then(function(){return o.executeMutation()}).then(function(l){s=l,o.mutationCache.config.onSuccess==null||o.mutationCache.config.onSuccess(s,o.state.variables,o.state.context,o)}).then(function(){return o.options.onSuccess==null?void 0:o.options.onSuccess(s,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(s,null,o.state.variables,o.state.context)}).then(function(){return o.dispatch({type:"success",data:s}),s}).catch(function(l){return o.mutationCache.config.onError==null||o.mutationCache.config.onError(l,o.state.variables,o.state.context,o),Mp().error(l),Promise.resolve().then(function(){return o.options.onError==null?void 0:o.options.onError(l,o.state.variables,o.state.context)}).then(function(){return o.options.onSettled==null?void 0:o.options.onSettled(void 0,l,o.state.variables,o.state.context)}).then(function(){throw o.dispatch({type:"error",error:l}),l})})},t.executeMutation=function(){var o=this,s;return this.retryer=new Ep({fn:function(){return o.options.mutationFn?o.options.mutationFn(o.state.variables):Promise.reject("No mutationFn found")},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(o){var s=this;this.state=nC(this.state,o),Ct.batch(function(){s.observers.forEach(function(i){i.onMutationUpdate(o)}),s.mutationCache.notify(s)})},e}();function tC(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function nC(e,t){switch(t.type){case"failed":return j({},e,{failureCount:e.failureCount+1});case"pause":return j({},e,{isPaused:!0});case"continue":return j({},e,{isPaused:!1});case"loading":return j({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return j({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return j({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return j({},e,t.state);default:return e}}var rC=function(e){Gi(t,e);function t(o){var s;return s=e.call(this)||this,s.config=o||{},s.mutations=[],s.mutationId=0,s}var n=t.prototype;return n.build=function(s,i,a){var l=new eC({mutationCache:this,mutationId:++this.mutationId,options:s.defaultMutationOptions(i),state:a,defaultOptions:i.mutationKey?s.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(l),l},n.add=function(s){this.mutations.push(s),this.notify(s)},n.remove=function(s){this.mutations=this.mutations.filter(function(i){return i!==s}),s.cancel(),this.notify(s)},n.clear=function(){var s=this;Ct.batch(function(){s.mutations.forEach(function(i){s.remove(i)})})},n.getAll=function(){return this.mutations},n.find=function(s){return typeof s.exact>"u"&&(s.exact=!0),this.mutations.find(function(i){return hd(s,i)})},n.findAll=function(s){return this.mutations.filter(function(i){return hd(s,i)})},n.notify=function(s){var i=this;Ct.batch(function(){i.listeners.forEach(function(a){a(s)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var s=this.mutations.filter(function(i){return i.state.isPaused});return Ct.batch(function(){return s.reduce(function(i,a){return i.then(function(){return a.continue().catch(Dt)})},Promise.resolve())})},t}(Qi);function oC(){return{onFetch:function(t){t.fetchFn=function(){var n,o,s,i,a,l,u=(n=t.fetchOptions)==null||(o=n.meta)==null?void 0:o.refetchPage,c=(s=t.fetchOptions)==null||(i=s.meta)==null?void 0:i.fetchMore,d=c?.pageParam,f=c?.direction==="forward",p=c?.direction==="backward",x=((a=t.state.data)==null?void 0:a.pages)||[],g=((l=t.state.data)==null?void 0:l.pageParams)||[],m=Ip(),v=m?.signal,y=g,b=!1,C=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},P=function(w,E,M,$){return y=$?[E].concat(y):[].concat(y,[E]),$?[M].concat(w):[].concat(w,[M])},L=function(w,E,M,$){if(b)return Promise.reject("Cancelled");if(typeof M>"u"&&!E&&w.length)return Promise.resolve(w);var _={queryKey:t.queryKey,signal:v,pageParam:M,meta:t.meta},O=C(_),B=Promise.resolve(O).then(function(G){return P(w,M,G,$)});if(Ci(O)){var z=B;z.cancel=O.cancel}return B},T;if(!x.length)T=L([]);else if(f){var I=typeof d<"u",R=I?d:md(t.options,x);T=L(x,I,R)}else if(p){var N=typeof d<"u",F=N?d:sC(t.options,x);T=L(x,N,F,!0)}else(function(){y=[];var D=typeof t.options.getNextPageParam>"u",w=u&&x[0]?u(x[0],0,x):!0;T=w?L([],D,g[0]):Promise.resolve(P([],g[0],x[0]));for(var E=function(_){T=T.then(function(O){var B=u&&x[_]?u(x[_],_,x):!0;if(B){var z=D?g[_]:md(t.options,O);return L(O,D,z)}return Promise.resolve(P(O,g[_],x[_]))})},M=1;M<x.length;M++)E(M)})();var S=T.then(function(D){return{pages:D,pageParams:y}}),V=S;return V.cancel=function(){b=!0,m?.abort(),Ci(T)&&T.cancel()},S}}}}function md(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function sC(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var iC=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Zv,this.mutationCache=n.mutationCache||new rC,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var o=this;this.unsubscribeFocus=ei.subscribe(function(){ei.isFocused()&&ti.isOnline()&&(o.mutationCache.onFocus(),o.queryCache.onFocus())}),this.unsubscribeOnline=ti.subscribe(function(){ei.isFocused()&&ti.isOnline()&&(o.mutationCache.onOnline(),o.queryCache.onOnline())})},t.unmount=function(){var o,s;(o=this.unsubscribeFocus)==null||o.call(this),(s=this.unsubscribeOnline)==null||s.call(this)},t.isFetching=function(o,s){var i=Jn(o,s),a=i[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(o){return this.mutationCache.findAll(j({},o,{fetching:!0})).length},t.getQueryData=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state.data},t.getQueriesData=function(o){return this.getQueryCache().findAll(o).map(function(s){var i=s.queryKey,a=s.state,l=a.data;return[i,l]})},t.setQueryData=function(o,s,i){var a=Va(o),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(s,i)},t.setQueriesData=function(o,s,i){var a=this;return Ct.batch(function(){return a.getQueryCache().findAll(o).map(function(l){var u=l.queryKey;return[u,a.setQueryData(u,s,i)]})})},t.getQueryState=function(o,s){var i;return(i=this.queryCache.find(o,s))==null?void 0:i.state},t.removeQueries=function(o,s){var i=Jn(o,s),a=i[0],l=this.queryCache;Ct.batch(function(){l.findAll(a).forEach(function(u){l.remove(u)})})},t.resetQueries=function(o,s,i){var a=this,l=Jn(o,s,i),u=l[0],c=l[1],d=this.queryCache,f=j({},u,{active:!0});return Ct.batch(function(){return d.findAll(u).forEach(function(p){p.reset()}),a.refetchQueries(f,c)})},t.cancelQueries=function(o,s,i){var a=this,l=Jn(o,s,i),u=l[0],c=l[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var f=Ct.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.cancel(d)})});return Promise.all(f).then(Dt).catch(Dt)},t.invalidateQueries=function(o,s,i){var a,l,u,c=this,d=Jn(o,s,i),f=d[0],p=d[1],x=j({},f,{active:(a=(l=f.refetchActive)!=null?l:f.active)!=null?a:!0,inactive:(u=f.refetchInactive)!=null?u:!1});return Ct.batch(function(){return c.queryCache.findAll(f).forEach(function(g){g.invalidate()}),c.refetchQueries(x,p)})},t.refetchQueries=function(o,s,i){var a=this,l=Jn(o,s,i),u=l[0],c=l[1],d=Ct.batch(function(){return a.queryCache.findAll(u).map(function(p){return p.fetch(void 0,j({},c,{meta:{refetchPage:u?.refetchPage}}))})}),f=Promise.all(d).then(Dt);return c?.throwOnError||(f=f.catch(Dt)),f},t.fetchQuery=function(o,s,i){var a=Va(o,s,i),l=this.defaultQueryOptions(a);typeof l.retry>"u"&&(l.retry=!1);var u=this.queryCache.build(this,l);return u.isStaleByTime(l.staleTime)?u.fetch(l):Promise.resolve(u.state.data)},t.prefetchQuery=function(o,s,i){return this.fetchQuery(o,s,i).then(Dt).catch(Dt)},t.fetchInfiniteQuery=function(o,s,i){var a=Va(o,s,i);return a.behavior=oC(),this.fetchQuery(a)},t.prefetchInfiniteQuery=function(o,s,i){return this.fetchInfiniteQuery(o,s,i).then(Dt).catch(Dt)},t.cancelMutations=function(){var o=this,s=Ct.batch(function(){return o.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(s).then(Dt).catch(Dt)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(o){return this.mutationCache.build(this,o).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(o){this.defaultOptions=o},t.setQueryDefaults=function(o,s){var i=this.queryDefaults.find(function(a){return kr(o)===kr(a.queryKey)});i?i.defaultOptions=s:this.queryDefaults.push({queryKey:o,defaultOptions:s})},t.getQueryDefaults=function(o){var s;return o?(s=this.queryDefaults.find(function(i){return vi(o,i.queryKey)}))==null?void 0:s.defaultOptions:void 0},t.setMutationDefaults=function(o,s){var i=this.mutationDefaults.find(function(a){return kr(o)===kr(a.mutationKey)});i?i.defaultOptions=s:this.mutationDefaults.push({mutationKey:o,defaultOptions:s})},t.getMutationDefaults=function(o){var s;return o?(s=this.mutationDefaults.find(function(i){return vi(o,i.mutationKey)}))==null?void 0:s.defaultOptions:void 0},t.defaultQueryOptions=function(o){if(o?._defaulted)return o;var s=j({},this.defaultOptions.queries,this.getQueryDefaults(o?.queryKey),o,{_defaulted:!0});return!s.queryHash&&s.queryKey&&(s.queryHash=Dc(s.queryKey,s)),s},t.defaultQueryObserverOptions=function(o){return this.defaultQueryOptions(o)},t.defaultMutationOptions=function(o){return o?._defaulted?o:j({},this.defaultOptions.mutations,this.getMutationDefaults(o?.mutationKey),o,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),aC=Ub.unstable_batchedUpdates;Ct.setBatchNotifyFunction(aC);var lC=console;Xv(lC);var gd=Le.createContext(void 0),cC=Le.createContext(!1);function uC(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=gd),window.ReactQueryClientContext):gd}var dC=function(t){var n=t.client,o=t.contextSharing,s=o===void 0?!1:o,i=t.children;Le.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var a=uC(s);return Le.createElement(cC.Provider,{value:s},Le.createElement(a.Provider,{value:n},i))};const Rp=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Xi=h.createContext({}),Ji=h.createContext(null),Zi=typeof document<"u",Fc=Zi?h.useLayoutEffect:h.useEffect,Dp=h.createContext({strict:!1}),Oc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hC="framerAppearId",Fp="data-"+Oc(hC);function fC(e,t,n,o){const{visualElement:s}=h.useContext(Xi),i=h.useContext(Dp),a=h.useContext(Ji),l=h.useContext(Rp).reducedMotion,u=h.useRef();o=o||i.renderer,!u.current&&o&&(u.current=o(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current;h.useInsertionEffect(()=>{c&&c.update(n,a)});const d=h.useRef(!!(n[Fp]&&!window.HandoffComplete));return Fc(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),h.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function so(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function pC(e,t,n){return h.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):so(n)&&(n.current=o))},[t])}function ss(e){return typeof e=="string"||Array.isArray(e)}function ea(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Lc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_c=["initial",...Lc];function ta(e){return ea(e.animate)||_c.some(t=>ss(e[t]))}function Op(e){return!!(ta(e)||e.variants)}function mC(e,t){if(ta(e)){const{initial:n,animate:o}=e;return{initial:n===!1||ss(n)?n:void 0,animate:ss(o)?o:void 0}}return e.inherit!==!1?t:{}}function gC(e){const{initial:t,animate:n}=mC(e,h.useContext(Xi));return h.useMemo(()=>({initial:t,animate:n}),[xd(t),xd(n)])}function xd(e){return Array.isArray(e)?e.join(" "):e}const yd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},is={};for(const e in yd)is[e]={isEnabled:t=>yd[e].some(n=>!!t[n])};function xC(e){for(const t in e)is[t]={...is[t],...e[t]}}const $c=h.createContext({}),Lp=h.createContext({}),yC=Symbol.for("motionComponentSymbol");function bC({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:s}){e&&xC(e);function i(l,u){let c;const d={...h.useContext(Rp),...l,layoutId:vC(l)},{isStatic:f}=d,p=gC(l),x=o(l,f);if(!f&&Zi){p.visualElement=fC(s,x,d,t);const g=h.useContext(Lp),m=h.useContext(Dp).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,m,e,g))}return h.createElement(Xi.Provider,{value:p},c&&p.visualElement?h.createElement(c,{visualElement:p.visualElement,...d}):null,n(s,l,pC(x,p.visualElement,u),x,f,p.visualElement))}const a=h.forwardRef(i);return a[yC]=s,a}function vC({layoutId:e}){const t=h.useContext($c).id;return t&&e!==void 0?t+"-"+e:e}function CC(e){function t(o,s={}){return bC(e(o,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(o,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const wC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Nc(e){return typeof e!="string"||e.includes("-")?!1:!!(wC.indexOf(e)>-1||/[A-Z]/.test(e))}const wi={};function jC(e){Object.assign(wi,e)}const vs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set(vs);function _p(e,{layout:t,layoutId:n}){return Ur.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!wi[e]||e==="opacity")}const Kt=e=>!!(e&&e.getVelocity),SC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PC=vs.length;function kC(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},o,s){let i="";for(let a=0;a<PC;a++){const l=vs[a];if(e[l]!==void 0){const u=SC[l]||l;i+=`${u}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,o?"":i):n&&o&&(i="none"),i}const $p=e=>t=>typeof t=="string"&&t.startsWith(e),Np=$p("--"),Ml=$p("var(--"),IC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,TC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ur=(e,t,n)=>Math.min(Math.max(n,e),t),Wr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Xo={...Wr,transform:e=>ur(0,1,e)},Gs={...Wr,default:1},Jo=e=>Math.round(e*1e5)/1e5,na=/(-)?([\d]*\.?[\d])+/g,Vp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,EC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Cs(e){return typeof e=="string"}const ws=e=>({test:t=>Cs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qn=ws("deg"),Sn=ws("%"),ke=ws("px"),AC=ws("vh"),MC=ws("vw"),bd={...Sn,parse:e=>Sn.parse(e)/100,transform:e=>Sn.transform(e*100)},vd={...Wr,transform:Math.round},Bp={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,size:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,rotate:Qn,rotateX:Qn,rotateY:Qn,rotateZ:Qn,scale:Gs,scaleX:Gs,scaleY:Gs,scaleZ:Gs,skew:Qn,skewX:Qn,skewY:Qn,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Xo,originX:bd,originY:bd,originZ:ke,zIndex:vd,fillOpacity:Xo,strokeOpacity:Xo,numOctaves:vd};function Vc(e,t,n,o){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let u=!1,c=!1,d=!0;for(const f in t){const p=t[f];if(Np(f)){i[f]=p;continue}const x=Bp[f],g=TC(p,x);if(Ur.has(f)){if(u=!0,a[f]=g,!d)continue;p!==(x.default||0)&&(d=!1)}else f.startsWith("origin")?(c=!0,l[f]=g):s[f]=g}if(t.transform||(u||o?s.transform=kC(e.transform,n,d,o):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:p="50%",originZ:x=0}=l;s.transformOrigin=`${f} ${p} ${x}`}}const Bc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Hp(e,t,n){for(const o in t)!Kt(t[o])&&!_p(o,n)&&(e[o]=t[o])}function RC({transformTemplate:e},t,n){return h.useMemo(()=>{const o=Bc();return Vc(o,t,{enableHardwareAcceleration:!n},e),Object.assign({},o.vars,o.style)},[t])}function DC(e,t,n){const o=e.style||{},s={};return Hp(s,o,e),Object.assign(s,RC(e,t,n)),e.transformValues?e.transformValues(s):s}function FC(e,t,n){const o={},s=DC(e,t,n);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=s,o}const OC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ji(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||OC.has(e)}let zp=e=>!ji(e);function LC(e){e&&(zp=t=>t.startsWith("on")?!ji(t):e(t))}try{LC(require("@emotion/is-prop-valid").default)}catch{}function _C(e,t,n){const o={};for(const s in e)s==="values"&&typeof e.values=="object"||(zp(s)||n===!0&&ji(s)||!t&&!ji(s)||e.draggable&&s.startsWith("onDrag"))&&(o[s]=e[s]);return o}function Cd(e,t,n){return typeof e=="string"?e:ke.transform(t+n*e)}function $C(e,t,n){const o=Cd(t,e.x,e.width),s=Cd(n,e.y,e.height);return`${o} ${s}`}const NC={offset:"stroke-dashoffset",array:"stroke-dasharray"},VC={offset:"strokeDashoffset",array:"strokeDasharray"};function BC(e,t,n=1,o=0,s=!0){e.pathLength=1;const i=s?NC:VC;e[i.offset]=ke.transform(-o);const a=ke.transform(t),l=ke.transform(n);e[i.array]=`${a} ${l}`}function Hc(e,{attrX:t,attrY:n,attrScale:o,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...c},d,f,p){if(Vc(e,c,d,p),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:g,dimensions:m}=e;x.transform&&(m&&(g.transform=x.transform),delete x.transform),m&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=$C(m,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(x.x=t),n!==void 0&&(x.y=n),o!==void 0&&(x.scale=o),a!==void 0&&BC(x,a,l,u,!1)}const Gp=()=>({...Bc(),attrs:{}}),zc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function HC(e,t,n,o){const s=h.useMemo(()=>{const i=Gp();return Hc(i,t,{enableHardwareAcceleration:!1},zc(o),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Hp(i,e.style,e),s.style={...i,...s.style}}return s}function zC(e=!1){return(n,o,s,{latestValues:i},a)=>{const u=(Nc(n)?HC:FC)(o,i,a,n),d={..._C(o,typeof n=="string",e),...u,ref:s},{children:f}=o,p=h.useMemo(()=>Kt(f)?f.get():f,[f]);return h.createElement(n,{...d,children:p})}}function Up(e,{style:t,vars:n},o,s){Object.assign(e.style,t,s&&s.getProjectionStyles(o));for(const i in n)e.style.setProperty(i,n[i])}const Wp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qp(e,t,n,o){Up(e,t,void 0,o);for(const s in t.attrs)e.setAttribute(Wp.has(s)?s:Oc(s),t.attrs[s])}function Gc(e,t){const{style:n}=e,o={};for(const s in n)(Kt(n[s])||t.style&&Kt(t.style[s])||_p(s,e))&&(o[s]=n[s]);return o}function Kp(e,t){const n=Gc(e,t);for(const o in e)if(Kt(e[o])||Kt(t[o])){const s=vs.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;n[s]=e[o]}return n}function Uc(e,t,n,o={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,s)),t}function Qp(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const Si=e=>Array.isArray(e),GC=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),UC=e=>Si(e)?e[e.length-1]||0:e;function ni(e){const t=Kt(e)?e.get():e;return GC(t)?t.toValue():t}function WC({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},o,s,i){const a={latestValues:qC(o,s,i,e),renderState:t()};return n&&(a.mount=l=>n(o,l,a)),a}const Yp=e=>(t,n)=>{const o=h.useContext(Xi),s=h.useContext(Ji),i=()=>WC(e,t,o,s);return n?i():Qp(i)};function qC(e,t,n,o){const s={},i=o(e,{});for(const p in i)s[p]=ni(i[p]);let{initial:a,animate:l}=e;const u=ta(e),c=Op(e);t&&c&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?l:a;return f&&typeof f!="boolean"&&!ea(f)&&(Array.isArray(f)?f:[f]).forEach(x=>{const g=Uc(e,x);if(!g)return;const{transitionEnd:m,transition:v,...y}=g;for(const b in y){let C=y[b];if(Array.isArray(C)){const P=d?C.length-1:0;C=C[P]}C!==null&&(s[b]=C)}for(const b in m)s[b]=m[b]}),s}const it=e=>e;let wd=class{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}};function KC(e){let t=new wd,n=new wd,o=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(u,c=!1,d=!1)=>{const f=d&&s,p=f?t:n;return c&&a.add(u),p.add(u)&&f&&s&&(o=t.order.length),u},cancel:u=>{n.remove(u),a.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),o=t.order.length,o)for(let c=0;c<o;c++){const d=t.order[c];d(u),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(u))}};return l}const Us=["prepare","read","update","preRender","render","postRender"],QC=40;function YC(e,t){let n=!1,o=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Us.reduce((f,p)=>(f[p]=KC(()=>n=!0),f),{}),a=f=>i[f].process(s),l=()=>{const f=performance.now();n=!1,s.delta=o?1e3/60:Math.max(Math.min(f-s.timestamp,QC),1),s.timestamp=f,s.isProcessing=!0,Us.forEach(a),s.isProcessing=!1,n&&t&&(o=!1,e(l))},u=()=>{n=!0,o=!0,s.isProcessing||e(l)};return{schedule:Us.reduce((f,p)=>{const x=i[p];return f[p]=(g,m=!1,v=!1)=>(n||u(),x.schedule(g,m,v)),f},{}),cancel:f=>Us.forEach(p=>i[p].cancel(f)),state:s,steps:i}}const{schedule:et,cancel:qn,state:Et,steps:Ha}=YC(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),XC={useVisualState:Yp({scrapeMotionValuesFromProps:Kp,createRenderState:Gp,onMount:(e,t,{renderState:n,latestValues:o})=>{et.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{Hc(n,o,{enableHardwareAcceleration:!1},zc(t.tagName),e.transformTemplate),qp(t,n)})}})},JC={useVisualState:Yp({scrapeMotionValuesFromProps:Gc,createRenderState:Bc})};function ZC(e,{forwardMotionProps:t=!1},n,o){return{...Nc(e)?XC:JC,preloadedFeatures:n,useRender:zC(t),createVisualElement:o,Component:e}}function Nn(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}const Xp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ra(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ew=e=>t=>Xp(t)&&e(t,ra(t));function Gn(e,t,n,o){return Nn(e,t,ew(n),o)}const tw=(e,t)=>n=>t(e(n)),lr=(...e)=>e.reduce(tw);function Jp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const jd=Jp("dragHorizontal"),Sd=Jp("dragVertical");function Zp(e){let t=!1;if(e==="y")t=Sd();else if(e==="x")t=jd();else{const n=jd(),o=Sd();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function em(){const e=Zp(!0);return e?(e(),!1):!0}class pr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Pd(e,t){const n="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||em())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&et.update(()=>l[o](i,a))};return Gn(e.current,n,s,{passive:!e.getProps()[o]})}class nw extends pr{mount(){this.unmount=lr(Pd(this.node,!0),Pd(this.node,!1))}unmount(){}}class rw extends pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lr(Nn(this.node.current,"focus",()=>this.onFocus()),Nn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const tm=(e,t)=>t?e===t?!0:tm(e,t.parentElement):!1;function za(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ra(n))}class ow extends pr{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),i=Gn(window,"pointerup",(l,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:f}=this.node.getProps();et.update(()=>{!f&&!tm(this.node.current,l.target)?d&&d(l,u):c&&c(l,u)})},{passive:!(o.onTap||o.onPointerUp)}),a=Gn(window,"pointercancel",(l,u)=>this.cancelPress(l,u),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=lr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||za("up",(u,c)=>{const{onTap:d}=this.node.getProps();d&&et.update(()=>d(u,c))})};this.removeEndListeners(),this.removeEndListeners=Nn(this.node.current,"keyup",a),za("down",(l,u)=>{this.startPress(l,u)})},n=Nn(this.node.current,"keydown",t),o=()=>{this.isPressing&&za("cancel",(i,a)=>this.cancelPress(i,a))},s=Nn(this.node.current,"blur",o);this.removeAccessibleListeners=lr(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&et.update(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!em()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&et.update(()=>o(t,n))}mount(){const t=this.node.getProps(),n=Gn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Nn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lr(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Rl=new WeakMap,Ga=new WeakMap,sw=e=>{const t=Rl.get(e.target);t&&t(e)},iw=e=>{e.forEach(sw)};function aw({root:e,...t}){const n=e||document;Ga.has(n)||Ga.set(n,{});const o=Ga.get(n),s=JSON.stringify(t);return o[s]||(o[s]=new IntersectionObserver(iw,{root:e,...t})),o[s]}function lw(e,t,n){const o=aw(t);return Rl.set(e,n),o.observe(e),()=>{Rl.delete(e),o.unobserve(e)}}const cw={some:0,all:1};class uw extends pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:o,threshold:typeof s=="number"?s:cw[s]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(u)};return lw(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(dw(t,n))&&this.startObserver()}unmount(){}}function dw({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const hw={inView:{Feature:uw},tap:{Feature:ow},focus:{Feature:rw},hover:{Feature:nw}};function nm(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function fw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.get()),t}function pw(e){const t={};return e.values.forEach((n,o)=>t[o]=n.getVelocity()),t}function oa(e,t,n){const o=e.getProps();return Uc(o,t,n!==void 0?n:o.custom,fw(e),pw(e))}let Wc=it;const Dr=e=>e*1e3,Un=e=>e/1e3,mw={current:!1},rm=e=>Array.isArray(e)&&typeof e[0]=="number";function om(e){return!!(!e||typeof e=="string"&&sm[e]||rm(e)||Array.isArray(e)&&e.every(om))}const Go=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,sm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function im(e){if(e)return rm(e)?Go(e):Array.isArray(e)?e.map(im):sm[e]}function gw(e,t,n,{delay:o=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:u}={}){const c={[t]:n};u&&(c.offset=u);const d=im(l);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:o,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function xw(e,{repeat:t,repeatType:n="loop"}){const o=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[o]}const am=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,yw=1e-7,bw=12;function vw(e,t,n,o,s){let i,a,l=0;do a=t+(n-t)/2,i=am(a,o,s)-e,i>0?n=a:t=a;while(Math.abs(i)>yw&&++l<bw);return a}function js(e,t,n,o){if(e===t&&n===o)return it;const s=i=>vw(i,0,1,e,n);return i=>i===0||i===1?i:am(s(i),t,o)}const Cw=js(.42,0,1,1),ww=js(0,0,.58,1),lm=js(.42,0,.58,1),jw=e=>Array.isArray(e)&&typeof e[0]!="number",cm=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,um=e=>t=>1-e(1-t),qc=e=>1-Math.sin(Math.acos(e)),dm=um(qc),Sw=cm(qc),hm=js(.33,1.53,.69,.99),Kc=um(hm),Pw=cm(Kc),kw=e=>(e*=2)<1?.5*Kc(e):.5*(2-Math.pow(2,-10*(e-1))),Iw={linear:it,easeIn:Cw,easeInOut:lm,easeOut:ww,circIn:qc,circInOut:Sw,circOut:dm,backIn:Kc,backInOut:Pw,backOut:hm,anticipate:kw},kd=e=>{if(Array.isArray(e)){Wc(e.length===4);const[t,n,o,s]=e;return js(t,n,o,s)}else if(typeof e=="string")return Iw[e];return e},Qc=(e,t)=>n=>!!(Cs(n)&&EC.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),fm=(e,t,n)=>o=>{if(!Cs(o))return o;const[s,i,a,l]=o.match(na);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Tw=e=>ur(0,255,e),Ua={...Wr,transform:e=>Math.round(Tw(e))},Ir={test:Qc("rgb","red"),parse:fm("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+Ua.transform(e)+", "+Ua.transform(t)+", "+Ua.transform(n)+", "+Jo(Xo.transform(o))+")"};function Ew(e){let t="",n="",o="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,o+=o,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:s?parseInt(s,16)/255:1}}const Dl={test:Qc("#"),parse:Ew,transform:Ir.transform},io={test:Qc("hsl","hue"),parse:fm("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+Sn.transform(Jo(t))+", "+Sn.transform(Jo(n))+", "+Jo(Xo.transform(o))+")"},Ft={test:e=>Ir.test(e)||Dl.test(e)||io.test(e),parse:e=>Ir.test(e)?Ir.parse(e):io.test(e)?io.parse(e):Dl.parse(e),transform:e=>Cs(e)?e:e.hasOwnProperty("red")?Ir.transform(e):io.transform(e)},rt=(e,t,n)=>-n*e+n*t+e;function Wa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Aw({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;s=Wa(u,l,e+1/3),i=Wa(u,l,e),a=Wa(u,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:o}}const qa=(e,t,n)=>{const o=e*e;return Math.sqrt(Math.max(0,n*(t*t-o)+o))},Mw=[Dl,Ir,io],Rw=e=>Mw.find(t=>t.test(e));function Id(e){const t=Rw(e);let n=t.parse(e);return t===io&&(n=Aw(n)),n}const pm=(e,t)=>{const n=Id(e),o=Id(t),s={...n};return i=>(s.red=qa(n.red,o.red,i),s.green=qa(n.green,o.green,i),s.blue=qa(n.blue,o.blue,i),s.alpha=rt(n.alpha,o.alpha,i),Ir.transform(s))};function Dw(e){var t,n;return isNaN(e)&&Cs(e)&&(((t=e.match(na))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Vp))===null||n===void 0?void 0:n.length)||0)>0}const mm={regex:IC,countKey:"Vars",token:"${v}",parse:it},gm={regex:Vp,countKey:"Colors",token:"${c}",parse:Ft.parse},xm={regex:na,countKey:"Numbers",token:"${n}",parse:Wr.parse};function Ka(e,{regex:t,countKey:n,token:o,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,o),e.values.push(...i.map(s)))}function Pi(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ka(n,mm),Ka(n,gm),Ka(n,xm),n}function ym(e){return Pi(e).values}function bm(e){const{values:t,numColors:n,numVars:o,tokenised:s}=Pi(e),i=t.length;return a=>{let l=s;for(let u=0;u<i;u++)u<o?l=l.replace(mm.token,a[u]):u<o+n?l=l.replace(gm.token,Ft.transform(a[u])):l=l.replace(xm.token,Jo(a[u]));return l}}const Fw=e=>typeof e=="number"?0:e;function Ow(e){const t=ym(e);return bm(e)(t.map(Fw))}const dr={test:Dw,parse:ym,createTransformer:bm,getAnimatableNone:Ow},vm=(e,t)=>n=>`${n>0?t:e}`;function Cm(e,t){return typeof e=="number"?n=>rt(e,t,n):Ft.test(e)?pm(e,t):e.startsWith("var(")?vm(e,t):jm(e,t)}const wm=(e,t)=>{const n=[...e],o=n.length,s=e.map((i,a)=>Cm(i,t[a]));return i=>{for(let a=0;a<o;a++)n[a]=s[a](i);return n}},Lw=(e,t)=>{const n={...e,...t},o={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(o[s]=Cm(e[s],t[s]));return s=>{for(const i in o)n[i]=o[i](s);return n}},jm=(e,t)=>{const n=dr.createTransformer(t),o=Pi(e),s=Pi(t);return o.numVars===s.numVars&&o.numColors===s.numColors&&o.numNumbers>=s.numNumbers?lr(wm(o.values,s.values),n):vm(e,t)},as=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},Td=(e,t)=>n=>rt(e,t,n);function _w(e){return typeof e=="number"?Td:typeof e=="string"?Ft.test(e)?pm:jm:Array.isArray(e)?wm:typeof e=="object"?Lw:Td}function $w(e,t,n){const o=[],s=n||_w(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||it:t;l=lr(u,l)}o.push(l)}return o}function Sm(e,t,{clamp:n=!0,ease:o,mixer:s}={}){const i=e.length;if(Wc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=$w(t,o,s),l=a.length,u=c=>{let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=as(e[d],e[d+1],c);return a[d](f)};return n?c=>u(ur(e[0],e[i-1],c)):u}function Nw(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const s=as(0,t,o);e.push(rt(n,1,s))}}function Vw(e){const t=[0];return Nw(t,e.length-1),t}function Bw(e,t){return e.map(n=>n*t)}function Hw(e,t){return e.map(()=>t||lm).splice(0,e.length-1)}function ki({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const s=jw(o)?o.map(kd):kd(o),i={done:!1,value:t[0]},a=Bw(n&&n.length===t.length?n:Vw(t),e),l=Sm(a,t,{ease:Array.isArray(s)?s:Hw(t,s)});return{calculatedDuration:e,next:u=>(i.value=l(u),i.done=u>=e,i)}}function Pm(e,t){return t?e*(1e3/t):0}const zw=5;function km(e,t,n){const o=Math.max(t-zw,0);return Pm(n-e(o),t-o)}const Qa=.001,Gw=.01,Uw=10,Ww=.05,qw=1;function Kw({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let s,i,a=1-t;a=ur(Ww,qw,a),e=ur(Gw,Uw,Un(e)),a<1?(s=c=>{const d=c*a,f=d*e,p=d-n,x=Fl(c,a),g=Math.exp(-f);return Qa-p/x*g},i=c=>{const f=c*a*e,p=f*n+n,x=Math.pow(a,2)*Math.pow(c,2)*e,g=Math.exp(-f),m=Fl(Math.pow(c,2),a);return(-s(c)+Qa>0?-1:1)*((p-x)*g)/m}):(s=c=>{const d=Math.exp(-c*e),f=(c-n)*e+1;return-Qa+d*f},i=c=>{const d=Math.exp(-c*e),f=(n-c)*(e*e);return d*f});const l=5/e,u=Yw(s,i,l);if(e=Dr(e),isNaN(u))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(u,2)*o;return{stiffness:c,damping:a*2*Math.sqrt(o*c),duration:e}}}const Qw=12;function Yw(e,t,n){let o=n;for(let s=1;s<Qw;s++)o=o-e(o)/t(o);return o}function Fl(e,t){return e*Math.sqrt(1-t*t)}const Xw=["duration","bounce"],Jw=["stiffness","damping","mass"];function Ed(e,t){return t.some(n=>e[n]!==void 0)}function Zw(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ed(e,Jw)&&Ed(e,Xw)){const n=Kw(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Im({keyframes:e,restDelta:t,restSpeed:n,...o}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=Zw({...o,velocity:-Un(o.velocity||0)}),x=f||0,g=u/(2*Math.sqrt(l*c)),m=i-s,v=Un(Math.sqrt(l/c)),y=Math.abs(m)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let b;if(g<1){const C=Fl(v,g);b=P=>{const L=Math.exp(-g*v*P);return i-L*((x+g*v*m)/C*Math.sin(C*P)+m*Math.cos(C*P))}}else if(g===1)b=C=>i-Math.exp(-v*C)*(m+(x+v*m)*C);else{const C=v*Math.sqrt(g*g-1);b=P=>{const L=Math.exp(-g*v*P),T=Math.min(C*P,300);return i-L*((x+g*v*m)*Math.sinh(T)+C*m*Math.cosh(T))/C}}return{calculatedDuration:p&&d||null,next:C=>{const P=b(C);if(p)a.done=C>=d;else{let L=x;C!==0&&(g<1?L=km(b,C,P):L=0);const T=Math.abs(L)<=n,I=Math.abs(i-P)<=t;a.done=T&&I}return a.value=a.done?i:P,a}}}function Ad({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:d}){const f=e[0],p={done:!1,value:f},x=R=>l!==void 0&&R<l||u!==void 0&&R>u,g=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let m=n*t;const v=f+m,y=a===void 0?v:a(v);y!==v&&(m=y-f);const b=R=>-m*Math.exp(-R/o),C=R=>y+b(R),P=R=>{const N=b(R),F=C(R);p.done=Math.abs(N)<=c,p.value=p.done?y:F};let L,T;const I=R=>{x(p.value)&&(L=R,T=Im({keyframes:[p.value,g(p.value)],velocity:km(C,R,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:R=>{let N=!1;return!T&&L===void 0&&(N=!0,P(R),I(R)),L!==void 0&&R>L?T.next(R-L):(!N&&P(R),p)}}}const e0=e=>{const t=({timestamp:n})=>e(n);return{start:()=>et.update(t,!0),stop:()=>qn(t),now:()=>Et.isProcessing?Et.timestamp:performance.now()}},Md=2e4;function Rd(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<Md;)t+=n,o=e.next(t);return t>=Md?1/0:t}const t0={decay:Ad,inertia:Ad,tween:ki,keyframes:ki,spring:Im};function Ii({autoplay:e=!0,delay:t=0,driver:n=e0,keyframes:o,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:u,onStop:c,onComplete:d,onUpdate:f,...p}){let x=1,g=!1,m,v;const y=()=>{v=new Promise(z=>{m=z})};y();let b;const C=t0[s]||ki;let P;C!==ki&&typeof o[0]!="number"&&(P=Sm([0,100],o,{clamp:!1}),o=[0,100]);const L=C({...p,keyframes:o});let T;l==="mirror"&&(T=C({...p,keyframes:[...o].reverse(),velocity:-(p.velocity||0)}));let I="idle",R=null,N=null,F=null;L.calculatedDuration===null&&i&&(L.calculatedDuration=Rd(L));const{calculatedDuration:S}=L;let V=1/0,D=1/0;S!==null&&(V=S+a,D=V*(i+1)-a);let w=0;const E=z=>{if(N===null)return;x>0&&(N=Math.min(N,z)),x<0&&(N=Math.min(z-D/x,N)),R!==null?w=R:w=Math.round(z-N)*x;const G=w-t*(x>=0?1:-1),J=x>=0?G<0:G>D;w=Math.max(G,0),I==="finished"&&R===null&&(w=D);let ee=w,te=L;if(i){const ie=Math.min(w,D)/V;let X=Math.floor(ie),ne=ie%1;!ne&&ie>=1&&(ne=1),ne===1&&X--,X=Math.min(X,i+1),!!(X%2)&&(l==="reverse"?(ne=1-ne,a&&(ne-=a/V)):l==="mirror"&&(te=T)),ee=ur(0,1,ne)*V}const ve=J?{done:!1,value:o[0]}:te.next(ee);P&&(ve.value=P(ve.value));let{done:W}=ve;!J&&S!==null&&(W=x>=0?w>=D:w<=0);const Q=R===null&&(I==="finished"||I==="running"&&W);return f&&f(ve.value),Q&&_(),ve},M=()=>{b&&b.stop(),b=void 0},$=()=>{I="idle",M(),m(),y(),N=F=null},_=()=>{I="finished",d&&d(),M(),m()},O=()=>{if(g)return;b||(b=n(E));const z=b.now();u&&u(),R!==null?N=z-R:(!N||I==="finished")&&(N=z),I==="finished"&&y(),F=N,R=null,I="running",b.start()};e&&O();const B={then(z,G){return v.then(z,G)},get time(){return Un(w)},set time(z){z=Dr(z),w=z,R!==null||!b||x===0?R=z:N=b.now()-z/x},get duration(){const z=L.calculatedDuration===null?Rd(L):L.calculatedDuration;return Un(z)},get speed(){return x},set speed(z){z===x||!b||(x=z,B.time=Un(w))},get state(){return I},play:O,pause:()=>{I="paused",R=w},stop:()=>{g=!0,I!=="idle"&&(I="idle",c&&c(),$())},cancel:()=>{F!==null&&E(F),$()},complete:()=>{I="finished"},sample:z=>(N=0,E(z))};return B}function n0(e){let t;return()=>(t===void 0&&(t=e()),t)}const r0=n0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),o0=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ws=10,s0=2e4,i0=(e,t)=>t.type==="spring"||e==="backgroundColor"||!om(t.ease);function a0(e,t,{onUpdate:n,onComplete:o,...s}){if(!(r0()&&o0.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,u,c=!1;const d=()=>{u=new Promise(C=>{l=C})};d();let{keyframes:f,duration:p=300,ease:x,times:g}=s;if(i0(t,s)){const C=Ii({...s,repeat:0,delay:0});let P={done:!1,value:f[0]};const L=[];let T=0;for(;!P.done&&T<s0;)P=C.sample(T),L.push(P.value),T+=Ws;g=void 0,f=L,p=T-Ws,x="linear"}const m=gw(e.owner.current,t,f,{...s,duration:p,ease:x,times:g}),v=()=>{c=!1,m.cancel()},y=()=>{c=!0,et.update(v),l(),d()};return m.onfinish=()=>{c||(e.set(xw(f,s)),o&&o(),y())},{then(C,P){return u.then(C,P)},attachTimeline(C){return m.timeline=C,m.onfinish=null,it},get time(){return Un(m.currentTime||0)},set time(C){m.currentTime=Dr(C)},get speed(){return m.playbackRate},set speed(C){m.playbackRate=C},get duration(){return Un(p)},play:()=>{a||(m.play(),qn(v))},pause:()=>m.pause(),stop:()=>{if(a=!0,m.playState==="idle")return;const{currentTime:C}=m;if(C){const P=Ii({...s,autoplay:!1});e.setWithVelocity(P.sample(C-Ws).value,P.sample(C).value,Ws)}y()},complete:()=>{c||m.finish()},cancel:y}}function l0({keyframes:e,delay:t,onUpdate:n,onComplete:o}){const s=()=>(n&&n(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return t?Ii({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const c0={type:"spring",stiffness:500,damping:25,restSpeed:10},u0=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),d0={type:"keyframes",duration:.8},h0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},f0=(e,{keyframes:t})=>t.length>2?d0:Ur.has(e)?e.startsWith("scale")?u0(t[1]):c0:h0,Ol=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dr.test(t)||t==="0")&&!t.startsWith("url(")),p0=new Set(["brightness","contrast","saturate","opacity"]);function m0(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(na)||[];if(!o)return e;const s=n.replace(o,"");let i=p0.has(t)?1:0;return o!==n&&(i*=100),t+"("+i+s+")"}const g0=/([a-z-]*)\(.*?\)/g,Ll={...dr,getAnimatableNone:e=>{const t=e.match(g0);return t?t.map(m0).join(" "):e}},x0={...Bp,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Ll,WebkitFilter:Ll},Yc=e=>x0[e];function Tm(e,t){let n=Yc(e);return n!==Ll&&(n=dr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Em=e=>/^0[^.\s]+$/.test(e);function y0(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Em(e)}function b0(e,t,n,o){const s=Ol(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=o.from!==void 0?o.from:e.get();let l;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?a:i[c-1]),y0(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(s&&u.length&&l)for(let c=0;c<u.length;c++){const d=u[c];i[d]=Tm(t,l)}return i}function v0({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:u,elapsed:c,...d}){return!!Object.keys(d).length}function Xc(e,t){return e[t]||e.default||e}const C0={skipAnimations:!1},Jc=(e,t,n,o={})=>s=>{const i=Xc(o,e)||{},a=i.delay||o.delay||0;let{elapsed:l=0}=o;l=l-Dr(a);const u=b0(t,e,n,i),c=u[0],d=u[u.length-1],f=Ol(e,c),p=Ol(e,d);let x={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(v0(i)||(x={...x,...f0(e,x)}),x.duration&&(x.duration=Dr(x.duration)),x.repeatDelay&&(x.repeatDelay=Dr(x.repeatDelay)),!f||!p||mw.current||i.type===!1||C0.skipAnimations)return l0(x);if(!o.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=a0(t,e,x);if(g)return g}return Ii(x)};function Ti(e){return!!(Kt(e)&&e.add)}const Am=e=>/^\-?\d*\.?\d+$/.test(e);function Zc(e,t){e.indexOf(t)===-1&&e.push(t)}function eu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class tu{constructor(){this.subscriptions=[]}add(t){return Zc(this.subscriptions,t),()=>eu(this.subscriptions,t)}notify(t,n,o){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,o);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const w0=e=>!isNaN(parseFloat(e));class j0{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,s=!0)=>{this.prev=this.current,this.current=o;const{delta:i,timestamp:a}=Et;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=w0(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new tu);const o=this.events[t].add(n);return t==="change"?()=>{o(),et.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=t,this.timeDelta=o}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Pm(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(e,t){return new j0(e,t)}const Mm=e=>t=>t.test(e),S0={test:e=>e==="auto",parse:e=>e},Rm=[Wr,ke,Sn,Qn,MC,AC,S0],Lo=e=>Rm.find(Mm(e)),P0=[...Rm,Ft,dr],k0=e=>P0.find(Mm(e));function I0(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,bo(n))}function T0(e,t){const n=oa(e,t);let{transitionEnd:o={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...o};for(const a in i){const l=UC(i[a]);I0(e,a,l)}}function E0(e,t,n){var o,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const u=i[l],c=t[u];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(o=n[u])!==null&&o!==void 0?o:e.readValue(u))!==null&&s!==void 0?s:t[u]),d!=null&&(typeof d=="string"&&(Am(d)||Em(d))?d=parseFloat(d):!k0(d)&&dr.test(c)&&(d=Tm(u,c)),e.addValue(u,bo(d,{owner:e})),n[u]===void 0&&(n[u]=d),d!==null&&e.setBaseTarget(u,d))}}function A0(e,t){return t?(t[e]||t.default||t).from:void 0}function M0(e,t,n){const o={};for(const s in e){const i=A0(s,t);if(i!==void 0)o[s]=i;else{const a=n.getValue(s);a&&(o[s]=a.get())}}return o}function R0({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function D0(e,t){const n=e.get();if(Array.isArray(t)){for(let o=0;o<t.length;o++)if(t[o]!==n)return!0}else return n!==t}function Dm(e,t,{delay:n=0,transitionOverride:o,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const u=e.getValue("willChange");o&&(i=o);const c=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in l){const p=e.getValue(f),x=l[f];if(!p||x===void 0||d&&R0(d,f))continue;const g={delay:n,elapsed:0,...Xc(i||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[Fp];if(y){const b=window.HandoffAppearAnimations(y,f,p,et);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let m=!g.isHandoff&&!D0(p,x);if(g.type==="spring"&&(p.getVelocity()||g.velocity)&&(m=!1),p.animation&&(m=!1),m)continue;p.start(Jc(f,p,x,e.shouldReduceMotion&&Ur.has(f)?{type:!1}:g));const v=p.animation;Ti(u)&&(u.add(f),v.then(()=>u.remove(f))),c.push(v)}return a&&Promise.all(c).then(()=>{a&&T0(e,a)}),c}function _l(e,t,n={}){const o=oa(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(Dm(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return F0(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>c())}else return Promise.all([i(),a(n.delay)])}function F0(e,t,n=0,o=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*o,u=s===1?(c=0)=>c*o:(c=0)=>l-c*o;return Array.from(e.variantChildren).sort(O0).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(_l(c,t,{...i,delay:n+u(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function O0(e,t){return e.sortNodePosition(t)}function L0(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const s=t.map(i=>_l(e,i,n));o=Promise.all(s)}else if(typeof t=="string")o=_l(e,t,n);else{const s=typeof t=="function"?oa(e,t,n.custom):t;o=Promise.all(Dm(e,s,n))}return o.then(()=>e.notify("AnimationComplete",t))}const _0=[...Lc].reverse(),$0=Lc.length;function N0(e){return t=>Promise.all(t.map(({animation:n,options:o})=>L0(e,n,o)))}function V0(e){let t=N0(e);const n=H0();let o=!0;const s=(u,c)=>{const d=oa(e,c);if(d){const{transition:f,transitionEnd:p,...x}=d;u={...u,...x,...p}}return u};function i(u){t=u(e)}function a(u,c){const d=e.getProps(),f=e.getVariantContext(!0)||{},p=[],x=new Set;let g={},m=1/0;for(let y=0;y<$0;y++){const b=_0[y],C=n[b],P=d[b]!==void 0?d[b]:f[b],L=ss(P),T=b===c?C.isActive:null;T===!1&&(m=y);let I=P===f[b]&&P!==d[b]&&L;if(I&&o&&e.manuallyAnimateOnMount&&(I=!1),C.protectedKeys={...g},!C.isActive&&T===null||!P&&!C.prevProp||ea(P)||typeof P=="boolean")continue;let N=B0(C.prevProp,P)||b===c&&C.isActive&&!I&&L||y>m&&L,F=!1;const S=Array.isArray(P)?P:[P];let V=S.reduce(s,{});T===!1&&(V={});const{prevResolvedValues:D={}}=C,w={...D,...V},E=M=>{N=!0,x.has(M)&&(F=!0,x.delete(M)),C.needsAnimating[M]=!0};for(const M in w){const $=V[M],_=D[M];if(g.hasOwnProperty(M))continue;let O=!1;Si($)&&Si(_)?O=!nm($,_):O=$!==_,O?$!==void 0?E(M):x.add(M):$!==void 0&&x.has(M)?E(M):C.protectedKeys[M]=!0}C.prevProp=P,C.prevResolvedValues=V,C.isActive&&(g={...g,...V}),o&&e.blockInitialAnimation&&(N=!1),N&&(!I||F)&&p.push(...S.map(M=>({animation:M,options:{type:b,...u}})))}if(x.size){const y={};x.forEach(b=>{const C=e.getBaseTarget(b);C!==void 0&&(y[b]=C)}),p.push({animation:y})}let v=!!p.length;return o&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),o=!1,v?t(p):Promise.resolve()}function l(u,c,d){var f;if(n[u].isActive===c)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(x=>{var g;return(g=x.animationState)===null||g===void 0?void 0:g.setActive(u,c)}),n[u].isActive=c;const p=a(d,u);for(const x in n)n[x].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function B0(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!nm(t,e):!1}function vr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H0(){return{animate:vr(!0),whileInView:vr(),whileHover:vr(),whileTap:vr(),whileDrag:vr(),whileFocus:vr(),exit:vr()}}class z0 extends pr{constructor(t){super(t),t.animationState||(t.animationState=V0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ea(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let G0=0;class U0 extends pr{constructor(){super(...arguments),this.id=G0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:o}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:o??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const W0={animation:{Feature:z0},exit:{Feature:U0}},Dd=(e,t)=>Math.abs(e-t);function q0(e,t){const n=Dd(e.x,t.x),o=Dd(e.y,t.y);return Math.sqrt(n**2+o**2)}class Fm{constructor(t,n,{transformPagePoint:o,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Xa(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=q0(f.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:g}=f,{timestamp:m}=Et;this.history.push({...g,timestamp:m});const{onStart:v,onMove:y}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ya(p,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Xa(f.type==="pointercancel"?this.lastMoveEventInfo:Ya(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,v),g&&g(f,v)},!Xp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=o,this.contextWindow=s||window;const a=ra(t),l=Ya(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Et;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,Xa(l,this.history)),this.removeListeners=lr(Gn(this.contextWindow,"pointermove",this.handlePointerMove),Gn(this.contextWindow,"pointerup",this.handlePointerUp),Gn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qn(this.updatePoint)}}function Ya(e,t){return t?{point:t(e.point)}:e}function Fd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xa({point:e},t){return{point:e,delta:Fd(e,Om(t)),offset:Fd(e,K0(t)),velocity:Q0(t,.1)}}function K0(e){return e[0]}function Om(e){return e[e.length-1]}function Q0(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const s=Om(e);for(;n>=0&&(o=e[n],!(s.timestamp-o.timestamp>Dr(t)));)n--;if(!o)return{x:0,y:0};const i=Un(s.timestamp-o.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-o.x)/i,y:(s.y-o.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Jt(e){return e.max-e.min}function $l(e,t=0,n=.01){return Math.abs(e-t)<=n}function Od(e,t,n,o=.5){e.origin=o,e.originPoint=rt(t.min,t.max,e.origin),e.scale=Jt(n)/Jt(t),($l(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=rt(n.min,n.max,e.origin)-e.originPoint,($l(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Zo(e,t,n,o){Od(e.x,t.x,n.x,o?o.originX:void 0),Od(e.y,t.y,n.y,o?o.originY:void 0)}function Ld(e,t,n){e.min=n.min+t.min,e.max=e.min+Jt(t)}function Y0(e,t,n){Ld(e.x,t.x,n.x),Ld(e.y,t.y,n.y)}function _d(e,t,n){e.min=t.min-n.min,e.max=e.min+Jt(t)}function es(e,t,n){_d(e.x,t.x,n.x),_d(e.y,t.y,n.y)}function X0(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?rt(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?rt(n,e,o.max):Math.min(e,n)),e}function $d(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function J0(e,{top:t,left:n,bottom:o,right:s}){return{x:$d(e.x,n,s),y:$d(e.y,t,o)}}function Nd(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function Z0(e,t){return{x:Nd(e.x,t.x),y:Nd(e.y,t.y)}}function ej(e,t){let n=.5;const o=Jt(e),s=Jt(t);return s>o?n=as(t.min,t.max-o,e.min):o>s&&(n=as(e.min,e.max-s,t.min)),ur(0,1,n)}function tj(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Nl=.35;function nj(e=Nl){return e===!1?e=0:e===!0&&(e=Nl),{x:Vd(e,"left","right"),y:Vd(e,"top","bottom")}}function Vd(e,t,n){return{min:Bd(e,t),max:Bd(e,n)}}function Bd(e,t){return typeof e=="number"?e:e[t]||0}const Hd=()=>({translate:0,scale:1,origin:0,originPoint:0}),ao=()=>({x:Hd(),y:Hd()}),zd=()=>({min:0,max:0}),ht=()=>({x:zd(),y:zd()});function en(e){return[e("x"),e("y")]}function Lm({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function rj({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function oj(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function Ja(e){return e===void 0||e===1}function Vl({scale:e,scaleX:t,scaleY:n}){return!Ja(e)||!Ja(t)||!Ja(n)}function wr(e){return Vl(e)||_m(e)||e.z||e.rotate||e.rotateX||e.rotateY}function _m(e){return Gd(e.x)||Gd(e.y)}function Gd(e){return e&&e!=="0%"}function Ei(e,t,n){const o=e-n,s=t*o;return n+s}function Ud(e,t,n,o,s){return s!==void 0&&(e=Ei(e,s,o)),Ei(e,n,o)+t}function Bl(e,t=0,n=1,o,s){e.min=Ud(e.min,t,n,o,s),e.max=Ud(e.max,t,n,o,s)}function $m(e,{x:t,y:n}){Bl(e.x,t.translate,t.scale,t.originPoint),Bl(e.y,n.translate,n.scale,n.originPoint)}function sj(e,t,n,o=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lo(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,$m(e,a)),o&&wr(i.latestValues)&&lo(e,i.latestValues))}t.x=Wd(t.x),t.y=Wd(t.y)}function Wd(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Zn(e,t){e.min=e.min+t,e.max=e.max+t}function qd(e,t,[n,o,s]){const i=t[s]!==void 0?t[s]:.5,a=rt(e.min,e.max,i);Bl(e,t[n],t[o],a,t.scale)}const ij=["x","scaleX","originX"],aj=["y","scaleY","originY"];function lo(e,t){qd(e.x,t,ij),qd(e.y,t,aj)}function Nm(e,t){return Lm(oj(e.getBoundingClientRect(),t))}function lj(e,t,n){const o=Nm(e,n),{scroll:s}=t;return s&&(Zn(o.x,s.offset.x),Zn(o.y,s.offset.y)),o}const Vm=({current:e})=>e?e.ownerDocument.defaultView:null,cj=new WeakMap;class uj{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ra(d,"page").point)},i=(d,f)=>{const{drag:p,dragPropagation:x,onDragStart:g}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Zp(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),en(v=>{let y=this.getAxisMotionValue(v).get()||0;if(Sn.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[v];C&&(y=Jt(C)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&et.update(()=>g(d,f),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:g,onDrag:m}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:v}=f;if(x&&this.currentDirection===null){this.currentDirection=dj(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),m&&m(d,f)},l=(d,f)=>this.stop(d,f),u=()=>en(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Fm(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Vm(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&et.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:s}=this.getProps();if(!o||!qs(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(a=X0(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&so(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=J0(s.layoutBox,n):this.constraints=!1,this.elastic=nj(o),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&en(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=tj(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!so(t))return!1;const o=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=lj(o,s.root,this.visualElement.getTransformPagePoint());let a=Z0(s.layout.layoutBox,i);if(n){const l=n(rj(a));this.hasMutatedConstraints=!!l,l&&(a=Lm(l))}return a}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=en(d=>{if(!qs(d,n,this.currentDirection))return;let f=u&&u[d]||{};a&&(f={min:0,max:0});const p=s?200:1e6,x=s?40:1e7,g={type:"inertia",velocity:o?t[d]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(c).then(l)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return o.start(Jc(t,o,0,n))}stopAnimation(){en(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){en(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),s=o[n];return s||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){en(n=>{const{drag:o}=this.getProps();if(!qs(n,o,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-rt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!so(n)||!o||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};en(a=>{const l=this.getAxisMotionValue(a);if(l){const u=l.get();s[a]=ej({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),en(a=>{if(!qs(a,t,null))return;const l=this.getAxisMotionValue(a),{min:u,max:c}=this.constraints[a];l.set(rt(u,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;cj.set(this.visualElement,this);const t=this.visualElement.current,n=Gn(t,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(u)}),o=()=>{const{dragConstraints:u}=this.getProps();so(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",o);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),o();const a=Nn(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(en(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=u[d].translate,f.set(f.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Nl,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function qs(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function dj(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class hj extends pr{constructor(t){super(t),this.removeGroupControls=it,this.removeListeners=it,this.controls=new uj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kd=e=>(t,n)=>{e&&et.update(()=>e(t,n))};class fj extends pr{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(t){this.session=new Fm(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vm(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:s}=this.node.getProps();return{onSessionStart:Kd(t),onStart:Kd(n),onMove:o,onEnd:(i,a)=>{delete this.session,s&&et.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=Gn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function pj(){const e=h.useContext(Ji);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,s=h.useId();return h.useEffect(()=>o(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ri={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _o={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ke.test(e))e=parseFloat(e);else return e;const n=Qd(e,t.target.x),o=Qd(e,t.target.y);return`${n}% ${o}%`}},mj={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,s=dr.parse(e);if(s.length>5)return o;const i=dr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=u;const c=rt(l,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};class gj extends Le.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:s}=this.props,{projection:i}=t;jC(xj),i&&(n.group&&n.group.add(i),o&&o.register&&s&&o.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ri.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:s,isPresent:i}=this.props,a=o.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||et.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),o&&o.deregister&&o.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Bm(e){const[t,n]=pj(),o=h.useContext($c);return Le.createElement(gj,{...e,layoutGroup:o,switchLayoutGroup:h.useContext(Lp),isPresent:t,safeToRemove:n})}const xj={borderRadius:{..._o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_o,borderTopRightRadius:_o,borderBottomLeftRadius:_o,borderBottomRightRadius:_o,boxShadow:mj},Hm=["TopLeft","TopRight","BottomLeft","BottomRight"],yj=Hm.length,Yd=e=>typeof e=="string"?parseFloat(e):e,Xd=e=>typeof e=="number"||ke.test(e);function bj(e,t,n,o,s,i){s?(e.opacity=rt(0,n.opacity!==void 0?n.opacity:1,vj(o)),e.opacityExit=rt(t.opacity!==void 0?t.opacity:1,0,Cj(o))):i&&(e.opacity=rt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let a=0;a<yj;a++){const l=`border${Hm[a]}Radius`;let u=Jd(t,l),c=Jd(n,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Xd(u)===Xd(c)?(e[l]=Math.max(rt(Yd(u),Yd(c),o),0),(Sn.test(c)||Sn.test(u))&&(e[l]+="%")):e[l]=c}(t.rotate||n.rotate)&&(e.rotate=rt(t.rotate||0,n.rotate||0,o))}function Jd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const vj=zm(0,.5,dm),Cj=zm(.5,.95,it);function zm(e,t,n){return o=>o<e?0:o>t?1:n(as(e,t,o))}function Zd(e,t){e.min=t.min,e.max=t.max}function Zt(e,t){Zd(e.x,t.x),Zd(e.y,t.y)}function eh(e,t,n,o,s){return e-=t,e=Ei(e,1/n,o),s!==void 0&&(e=Ei(e,1/s,o)),e}function wj(e,t=0,n=1,o=.5,s,i=e,a=e){if(Sn.test(t)&&(t=parseFloat(t),t=rt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=rt(i.min,i.max,o);e===i&&(l-=t),e.min=eh(e.min,t,n,l,s),e.max=eh(e.max,t,n,l,s)}function th(e,t,[n,o,s],i,a){wj(e,t[n],t[o],t[s],t.scale,i,a)}const jj=["x","scaleX","originX"],Sj=["y","scaleY","originY"];function nh(e,t,n,o){th(e.x,t,jj,n?n.x:void 0,o?o.x:void 0),th(e.y,t,Sj,n?n.y:void 0,o?o.y:void 0)}function rh(e){return e.translate===0&&e.scale===1}function Gm(e){return rh(e.x)&&rh(e.y)}function Pj(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Um(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function oh(e){return Jt(e.x)/Jt(e.y)}class kj{constructor(){this.members=[]}add(t){Zc(this.members,t),t.scheduleRender()}remove(t){if(eu(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let o;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){o=i;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sh(e,t,n){let o="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(o=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:u,rotateX:c,rotateY:d}=n;u&&(o+=`rotate(${u}deg) `),c&&(o+=`rotateX(${c}deg) `),d&&(o+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(o+=`scale(${a}, ${l})`),o||"none"}const Ij=(e,t)=>e.depth-t.depth;class Tj{constructor(){this.children=[],this.isDirty=!1}add(t){Zc(this.children,t),this.isDirty=!0}remove(t){eu(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ij),this.isDirty=!1,this.children.forEach(t)}}function Ej(e,t){const n=performance.now(),o=({timestamp:s})=>{const i=s-n;i>=t&&(qn(o),e(i-t))};return et.read(o,!0),()=>qn(o)}function Aj(e){window.MotionDebug&&window.MotionDebug.record(e)}function Mj(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Rj(e,t,n){const o=Kt(e)?e:bo(e);return o.start(Jc("",o,t,n)),o.animation}const ih=["","X","Y","Z"],Dj={visibility:"hidden"},ah=1e3;let Fj=0;const jr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Wm({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:s}){return class{constructor(a={},l=t?.()){this.id=Fj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jr.totalNodes=jr.resolvedTargetDeltas=jr.recalculatedProjection=0,this.nodes.forEach(_j),this.nodes.forEach(Hj),this.nodes.forEach(zj),this.nodes.forEach($j),Aj(jr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Tj)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new tu),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Mj(a),this.instance=a;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||u)&&(this.isLayoutDirty=!0),e){let f;const p=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Ej(p,250),ri.hasAnimatedSinceResize&&(ri.hasAnimatedSinceResize=!1,this.nodes.forEach(ch))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||Kj,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!Um(this.targetLayout,g)||x,C=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,C);const P={...Xc(m,"layout"),onPlay:v,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||ch(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Gj),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lh);return}this.isUpdating||this.nodes.forEach(Vj),this.isUpdating=!1,this.nodes.forEach(Bj),this.nodes.forEach(Oj),this.nodes.forEach(Lj),this.clearAllSnapshots();const l=performance.now();Et.delta=ur(0,1e3/60,l-Et.timestamp),Et.timestamp=l,Et.isProcessing=!0,Ha.update.process(Et),Ha.preRender.process(Et),Ha.render.process(Et),Et.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Nj),this.sharedNodes.forEach(Uj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:o(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Gm(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&(l||wr(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),Qj(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ht();const l=a.measureViewportBox(),{scroll:u}=this.root;return u&&(Zn(l.x,u.offset.x),Zn(l.y,u.offset.y)),l}removeElementScroll(a){const l=ht();Zt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;if(c!==this.root&&d&&f.layoutScroll){if(d.isRoot){Zt(l,a);const{scroll:p}=this.root;p&&(Zn(l.x,-p.offset.x),Zn(l.y,-p.offset.y))}Zn(l.x,d.offset.x),Zn(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const u=ht();Zt(u,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&lo(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),wr(d.latestValues)&&lo(u,d.latestValues)}return wr(this.latestValues)&&lo(u,this.latestValues),u}removeTransform(a){const l=ht();Zt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!wr(c.latestValues))continue;Vl(c.latestValues)&&c.updateSnapshot();const d=ht(),f=c.measurePageBox();Zt(d,f),nh(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return wr(this.latestValues)&&nh(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Et.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Et.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),es(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y0(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),$m(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),es(this.relativeTargetOrigin,this.target,x.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Vl(this.parent.latestValues)||_m(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Et.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Zt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;sj(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=ao(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ao(),this.projectionDeltaWithTransform=ao());const m=this.projectionTransform;Zo(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=sh(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),jr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const u=this.snapshot,c=u?u.latestValues:{},d={...this.latestValues},f=ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ht(),x=u?u.source:void 0,g=this.layout?this.layout.source:void 0,m=x!==g,v=this.getStack(),y=!v||v.members.length<=1,b=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(qj));this.animationProgress=0;let C;this.mixTargetDelta=P=>{const L=P/1e3;uh(f.x,a.x,L),uh(f.y,a.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(es(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Wj(this.relativeTarget,this.relativeTargetOrigin,p,L),C&&Pj(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ht()),Zt(C,this.relativeTarget)),m&&(this.animationValues=d,bj(d,c,this.latestValues,L,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{ri.hasAnimatedSinceResize=!0,this.currentAnimation=Rj(0,ah,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ah),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:d}=a;if(!(!l||!u||!c)){if(this!==a&&this.layout&&c&&qm(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ht();const f=Jt(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+f;const p=Jt(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+p}Zt(l,u),lo(l,d),Zo(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new kj),this.sharedNodes.get(a).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(l=!0),!l)return;const c={};for(let d=0;d<ih.length;d++){const f="rotate"+ih[d];u[f]&&(c[f]=u[f],a.setStaticValue(f,0))}a.render();for(const d in c)a.setStaticValue(d,c[d]);a.scheduleRender()}getProjectionStyles(a){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dj;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ni(a?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=ni(a?.pointerEvents)||""),this.hasProjected&&!wr(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=sh(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x,y:g}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const m in wi){if(p[m]===void 0)continue;const{correct:v,applyTo:y}=wi[m],b=c.transform==="none"?p[m]:v(p[m],f);if(y){const C=y.length;for(let P=0;P<C;P++)c[y[P]]=b}else c[m]=b}return this.options.layoutId&&(c.pointerEvents=f===this?ni(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(lh),this.root.sharedNodes.clear()}}}function Oj(e){e.updateLayout()}function Lj(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:s}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?en(f=>{const p=a?n.measuredBox[f]:n.layoutBox[f],x=Jt(p);p.min=o[f].min,p.max=p.min+x}):qm(i,n.layoutBox,o)&&en(f=>{const p=a?n.measuredBox[f]:n.layoutBox[f],x=Jt(o[f]);p.max=p.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+x)});const l=ao();Zo(l,o,n.layoutBox);const u=ao();a?Zo(u,e.applyTransform(s,!0),n.measuredBox):Zo(u,o,n.layoutBox);const c=!Gm(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:x}=f;if(p&&x){const g=ht();es(g,n.layoutBox,p.layoutBox);const m=ht();es(m,o,x.layoutBox),Um(g,m)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function _j(e){jr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $j(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Nj(e){e.clearSnapshot()}function lh(e){e.clearMeasurements()}function Vj(e){e.isLayoutDirty=!1}function Bj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ch(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Hj(e){e.resolveTargetDelta()}function zj(e){e.calcProjection()}function Gj(e){e.resetRotation()}function Uj(e){e.removeLeadSnapshot()}function uh(e,t,n){e.translate=rt(t.translate,0,n),e.scale=rt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function dh(e,t,n,o){e.min=rt(t.min,n.min,o),e.max=rt(t.max,n.max,o)}function Wj(e,t,n,o){dh(e.x,t.x,n.x,o),dh(e.y,t.y,n.y,o)}function qj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Kj={duration:.45,ease:[.4,0,.1,1]},hh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),fh=hh("applewebkit/")&&!hh("chrome/")?Math.round:it;function ph(e){e.min=fh(e.min),e.max=fh(e.max)}function Qj(e){ph(e.x),ph(e.y)}function qm(e,t,n){return e==="position"||e==="preserve-aspect"&&!$l(oh(t),oh(n),.2)}const Yj=Wm({attachResizeListener:(e,t)=>Nn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Za={current:void 0},Km=Wm({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Za.current){const e=new Yj({});e.mount(window),e.setOptions({layoutScroll:!0}),Za.current=e}return Za.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Xj={pan:{Feature:fj},drag:{Feature:hj,ProjectionNode:Km,MeasureLayout:Bm}},Jj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Zj(e){const t=Jj.exec(e);if(!t)return[,];const[,n,o]=t;return[n,o]}function Hl(e,t,n=1){const[o,s]=Zj(e);if(!o)return;const i=window.getComputedStyle(t).getPropertyValue(o);if(i){const a=i.trim();return Am(a)?parseFloat(a):a}else return Ml(s)?Hl(s,t,n+1):s}function eS(e,{...t},n){const o=e.current;if(!(o instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Ml(i))return;const a=Hl(i,o);a&&s.set(a)});for(const s in t){const i=t[s];if(!Ml(i))continue;const a=Hl(i,o);a&&(t[s]=a,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const tS=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Qm=e=>tS.has(e),nS=e=>Object.keys(e).some(Qm),mh=e=>e===Wr||e===ke,gh=(e,t)=>parseFloat(e.split(", ")[t]),xh=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const s=o.match(/^matrix3d\((.+)\)$/);if(s)return gh(s[1],t);{const i=o.match(/^matrix\((.+)\)$/);return i?gh(i[1],e):0}},rS=new Set(["x","y","z"]),oS=vs.filter(e=>!rS.has(e));function sS(e){const t=[];return oS.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const vo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:xh(4,13),y:xh(5,14)};vo.translateX=vo.x;vo.translateY=vo.y;const iS=(e,t,n)=>{const o=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{l[c]=vo[c](o,i)}),t.render();const u=t.measureViewportBox();return n.forEach(c=>{const d=t.getValue(c);d&&d.jump(l[c]),e[c]=vo[c](u,i)}),e},aS=(e,t,n={},o={})=>{t={...t},o={...o};const s=Object.keys(t).filter(Qm);let i=[],a=!1;const l=[];if(s.forEach(u=>{const c=e.getValue(u);if(!e.hasValue(u))return;let d=n[u],f=Lo(d);const p=t[u];let x;if(Si(p)){const g=p.length,m=p[0]===null?1:0;d=p[m],f=Lo(d);for(let v=m;v<g&&p[v]!==null;v++)x?Wc(Lo(p[v])===x):x=Lo(p[v])}else x=Lo(p);if(f!==x)if(mh(f)&&mh(x)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof p=="string"?t[u]=parseFloat(p):Array.isArray(p)&&x===ke&&(t[u]=p.map(parseFloat))}else f?.transform&&x?.transform&&(d===0||p===0)?d===0?c.set(x.transform(d)):t[u]=f.transform(p):(a||(i=sS(e),a=!0),l.push(u),o[u]=o[u]!==void 0?o[u]:t[u],c.jump(p))}),l.length){const u=l.indexOf("height")>=0?window.pageYOffset:null,c=iS(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),Zi&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:o}}else return{target:t,transitionEnd:o}};function lS(e,t,n,o){return nS(t)?aS(e,t,n,o):{target:t,transitionEnd:o}}const cS=(e,t,n,o)=>{const s=eS(e,t,o);return t=s.target,o=s.transitionEnd,lS(e,t,n,o)},zl={current:null},Ym={current:!1};function uS(){if(Ym.current=!0,!!Zi)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zl.current=e.matches;e.addListener(t),t()}else zl.current=!1}function dS(e,t,n){const{willChange:o}=t;for(const s in t){const i=t[s],a=n[s];if(Kt(i))e.addValue(s,i),Ti(o)&&o.add(s);else if(Kt(a))e.addValue(s,bo(i,{owner:e})),Ti(o)&&o.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,bo(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const yh=new WeakMap,Xm=Object.keys(is),hS=Xm.length,bh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fS=_c.length;class pS{constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=ta(n),this.isVariantNode=Op(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const f in d){const p=d[f];l[f]!==void 0&&Kt(p)&&(p.set(l[f],!1),Ti(c)&&c.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,yh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),Ym.current||uS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yh.delete(this.current),this.projection&&this.projection.unmount(),qn(this.notifyUpdate),qn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const o=Ur.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},o,s,i){let a,l;for(let u=0;u<hS;u++){const c=Xm[u],{isEnabled:d,Feature:f,ProjectionNode:p,MeasureLayout:x}=is[c];p&&(a=p),d(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:d,dragConstraints:f,layoutScroll:p,layoutRoot:x}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!d||f&&so(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<bh.length;o++){const s=bh[o];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=dS(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const n={};for(let o=0;o<fS;o++){const s=_c[o],i=this.props[s];(ss(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=bo(n,{owner:this}),this.addValue(t,o)),o}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props,s=typeof o=="string"||typeof o=="object"?(n=Uc(this.props,o))===null||n===void 0?void 0:n[t]:void 0;if(o&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Kt(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new tu),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Jm extends pS{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...o},{transformValues:s},i){let a=M0(o,t||{},this);if(s&&(n&&(n=s(n)),o&&(o=s(o)),a&&(a=s(a))),i){E0(this,o,a);const l=cS(this,o,a,n);n=l.transitionEnd,o=l.target}return{transition:t,transitionEnd:n,...o}}}function mS(e){return window.getComputedStyle(e)}class gS extends Jm{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ur.has(n)){const o=Yc(n);return o&&o.default||0}else{const o=mS(t),s=(Np(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Nm(t,n)}build(t,n,o,s){Vc(t,n,o,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Gc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,o,s){Up(t,n,o,s)}}class xS extends Jm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ur.has(n)){const o=Yc(n);return o&&o.default||0}return n=Wp.has(n)?n:Oc(n),t.getAttribute(n)}measureInstanceViewportBox(){return ht()}scrapeMotionValuesFromProps(t,n){return Kp(t,n)}build(t,n,o,s){Hc(t,n,o,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,o,s){qp(t,n,o,s)}mount(t){this.isSVGTag=zc(t.tagName),super.mount(t)}}const yS=(e,t)=>Nc(e)?new xS(t,{enableHardwareAcceleration:!1}):new gS(t,{enableHardwareAcceleration:!0}),bS={layout:{ProjectionNode:Km,MeasureLayout:Bm}},vS={...W0,...hw,...Xj,...bS},Ut=CC((e,t)=>ZC(e,t,vS,yS));function Zm(){const e=h.useRef(!1);return Fc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function CS(){const e=Zm(),[t,n]=h.useState(0),o=h.useCallback(()=>{e.current&&n(t+1)},[t]);return[h.useCallback(()=>et.postRender(o),[o]),t]}class wS extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jS({children:e,isPresent:t}){const n=h.useId(),o=h.useRef(null),s=h.useRef({width:0,height:0,top:0,left:0});return h.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:u}=s.current;if(t||!o.current||!i||!a)return;o.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),h.createElement(wS,{isPresent:t,childRef:o,sizeRef:s},h.cloneElement(e,{ref:o}))}const el=({children:e,initial:t,isPresent:n,onExitComplete:o,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=Qp(SS),u=h.useId(),c=h.useMemo(()=>({id:u,initial:t,isPresent:n,custom:s,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;o&&o()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return h.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[n]),h.useEffect(()=>{!n&&!l.size&&o&&o()},[n]),a==="popLayout"&&(e=h.createElement(jS,{isPresent:n},e)),h.createElement(Ji.Provider,{value:c},e)};function SS(){return new Map}function PS(e){return h.useEffect(()=>()=>e(),[])}const Sr=e=>e.key||"";function kS(e,t){e.forEach(n=>{const o=Sr(n);t.set(o,n)})}function IS(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const eg=({children:e,custom:t,initial:n=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=h.useContext($c).forceRender||CS()[0],u=Zm(),c=IS(e);let d=c;const f=h.useRef(new Map).current,p=h.useRef(d),x=h.useRef(new Map).current,g=h.useRef(!0);if(Fc(()=>{g.current=!1,kS(c,x),p.current=d}),PS(()=>{g.current=!0,x.clear(),f.clear()}),g.current)return h.createElement(h.Fragment,null,d.map(b=>h.createElement(el,{key:Sr(b),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},b)));d=[...d];const m=p.current.map(Sr),v=c.map(Sr),y=m.length;for(let b=0;b<y;b++){const C=m[b];v.indexOf(C)===-1&&!f.has(C)&&f.set(C,void 0)}return a==="wait"&&f.size&&(d=[]),f.forEach((b,C)=>{if(v.indexOf(C)!==-1)return;const P=x.get(C);if(!P)return;const L=m.indexOf(C);let T=b;if(!T){const I=()=>{f.delete(C);const R=Array.from(x.keys()).filter(N=>!v.includes(N));if(R.forEach(N=>x.delete(N)),p.current=c.filter(N=>{const F=Sr(N);return F===C||R.includes(F)}),!f.size){if(u.current===!1)return;l(),o&&o()}};T=h.createElement(el,{key:Sr(P),isPresent:!1,onExitComplete:I,custom:t,presenceAffectsLayout:i,mode:a},P),f.set(C,T)}d.splice(L,0,T)}),d=d.map(b=>{const C=b.key;return f.has(C)?b:h.createElement(el,{key:Sr(b),isPresent:!0,presenceAffectsLayout:i,mode:a},b)}),h.createElement(h.Fragment,null,f.size?d:d.map(b=>h.cloneElement(b)))};var TS={};const tg=h.createContext(null),$t=()=>{const e=h.useContext(tg);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},ES=({children:e})=>{const[t,n]=h.useState(null),[o,s]=h.useState(!0),[i,a]=h.useState(null),[l,u]=h.useState(null),c=Ec(),d=TS.REACT_APP_API_URL||window.location.origin;h.useEffect(()=>{console.log("[AuthContext] Checking session on mount..."),p(),f()},[]);const f=async()=>{try{const y=await fetch(`${d}/api/auth/csrf-token`,{credentials:"include"});if(y.ok){const b=await y.json();return u(b.csrfToken),console.log("[AuthContext] CSRF token fetched:",b.csrfToken),b.csrfToken}}catch(y){console.error("[AuthContext] Failed to fetch CSRF token:",y)}return null};h.useEffect(()=>{console.log("[AuthContext] User state changed:",t)},[t]);const p=async()=>{console.log("[AuthContext] checkSession called");try{console.log("[AuthContext] Checking API /api/auth/me...");const y=await fetch(`${d}/api/auth/me`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("[AuthContext] API response status:",y.status),y.ok){const b=await y.json();console.log("[AuthContext] Got user from API:",b),n(b)}else console.log("[AuthContext] API returned non-OK status"),n(null)}catch(y){console.error("[AuthContext] Session check failed:",y),n(null)}finally{s(!1)}},v={user:t,loading:o,error:i,login:async(y,b,C=null,P=null)=>{console.log("[AuthContext] Login attempt for:",y);try{a(null);const L=await fetch(`${d}/api/auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:b,...C&&{totpToken:C},...P&&{fido2Response:P}})}),T=await L.json();if(console.log("[AuthContext] Login response:",T),!L.ok)throw new Error(T.error||"Login failed");return T.requiresTwoFactor?{requiresTwoFactor:!0,mfaMethods:T.mfaMethods||[],hasFIDO2:T.hasFIDO2,hasTOTP:T.hasTOTP}:(n(T.user),console.log("[AuthContext] Login successful, user set:",T.user),console.log("[AuthContext] Authentication uses httpOnly cookies (secure)"),await f(),c("/dashboard"),{success:!0})}catch(L){throw console.error("[AuthContext] Login error:",L),a(L.message),L}},logout:async()=>{console.log("[AuthContext] Logout called");try{await fetch(`${d}/api/auth/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(y){console.error("[AuthContext] Logout error:",y)}finally{n(null),sessionStorage.clear(),c("/login")}},checkSession:p,apiRequest:async(y,b={})=>{console.log("[AuthContext] API Request to:",y);let C=l;b.method&&b.method!=="GET"&&(C||(console.log("[AuthContext] CSRF token not found, fetching..."),C=await f()),console.log("[AuthContext] CSRF token to use:",C?`${C.substring(0,10)}...`:"none"));const P={...b,credentials:"include",headers:{"Content-Type":"application/json",...b.method&&b.method!=="GET"&&C?{"X-CSRF-Token":C}:{},...b.headers}};console.log("[AuthContext] Request headers:",P.headers);try{const L=await fetch(`${d}${y}`,P);if(L.status===401){const T=L.headers.get("content-type");if(T&&T.includes("application/json"))try{if((await L.clone().json()).requiresAdminAuth)return console.log("[AuthContext] Admin authentication required, not a login issue"),L}catch{}console.log("[AuthContext] 401 Unauthorized, redirecting to login"),sessionStorage.clear(),n(null),c("/login")}return L}catch(L){throw console.error("[AuthContext] API Request error:",L),L}}};return r.jsx(tg.Provider,{value:v,children:e})},AS=({open:e,onClose:t,mfaMethods:n,onVerify:o,username:s})=>{const{enqueueSnackbar:i}=Qt(),[a,l]=h.useState(""),[u,c]=h.useState(""),[d,f]=h.useState(!1),[p,x]=h.useState("");h.useEffect(()=>{n&&n.length===1?l(n[0]):n&&n.includes("fido2")?l("fido2"):n&&n.includes("totp")&&l("totp")},[n]);const g=(C,P)=>{P!==null&&(l(P),x(""),c(""))},m=async()=>{if(!u||u.length!==6){x("Please enter a 6-digit code");return}f(!0),x("");try{await o("totp",u)}catch(C){x(C.message||"Invalid code"),c("")}finally{f(!1)}},v=async()=>{f(!0),x("");try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await C.json(),L=await fetch("/api/mfa/fido2/authenticate/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":P},credentials:"include",body:JSON.stringify({username:s})});if(!L.ok)throw new Error("Failed to start authentication");const{data:T}=await L.json(),I=M=>{let $=M.replace(/-/g,"+").replace(/_/g,"/");const _=(4-$.length%4)%4;_&&($+="=".repeat(_));const O=window.atob($),B=O.length,z=new Uint8Array(B);for(let G=0;G<B;G++)z[G]=O.charCodeAt(G);return z.buffer},R=M=>{const $=new Uint8Array(M);let _="";for(let O=0;O<$.byteLength;O++)_+=String.fromCharCode($[O]);return window.btoa(_).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},N={...T,challenge:I(T.challenge),allowCredentials:T.allowCredentials?.map(M=>({...M,id:I(M.id)})),timeout:T.timeout||6e4,userVerification:T.userVerification||"preferred"};i("Please interact with your security key...",{variant:"info"});const F=await navigator.credentials.get({publicKey:N});if(!F)throw new Error("Authentication cancelled");const S={id:F.id,rawId:R(F.rawId),type:F.type,response:{clientDataJSON:R(F.response.clientDataJSON),authenticatorData:R(F.response.authenticatorData),signature:R(F.response.signature),userHandle:F.response.userHandle?R(F.response.userHandle):null}},V=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:D}=await V.json(),w=await fetch("/api/mfa/fido2/authenticate/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":D},credentials:"include",body:JSON.stringify({credential:S})});if(!w.ok){const M=await w.json();throw new Error(M.error||"Authentication failed")}const E=await w.json();await o("fido2",E.mfaToken||"verified"),i("Security key verified successfully!",{variant:"success"})}catch(C){console.error("FIDO2 authentication error:",C),C.name==="NotAllowedError"?x("Authentication was cancelled or timed out"):C.name==="InvalidStateError"?x("No security key registered for this account"):x(C.message||"Failed to authenticate with security key")}finally{f(!1)}},y=()=>{a==="totp"?m():a==="fido2"&&v()},b=C=>{C.key==="Enter"&&a==="totp"&&m()};return r.jsxs(at,{open:e,onClose:()=>!d&&t(),maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:d,children:[r.jsx(lt,{children:"Two-Factor Authentication Required"}),r.jsxs(ct,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Select your preferred authentication method:"}),n&&n.length>1&&r.jsxs(gc,{value:a,exclusive:!0,onChange:g,fullWidth:!0,sx:{mt:2},children:[n.includes("totp")&&r.jsxs(sn,{value:"totp",children:[r.jsx(xc,{sx:{mr:1}}),"Authenticator App"]}),n.includes("fido2")&&r.jsxs(sn,{value:"fido2",children:[r.jsx($r,{sx:{mr:1}}),"Security Key"]})]})]}),p&&r.jsx(ye,{severity:"error",sx:{mb:2},children:p}),a==="totp"&&r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Enter the 6-digit code from your authenticator app:"}),r.jsx(Fe,{fullWidth:!0,label:"6-Digit Code",value:u,onChange:C=>{const P=C.target.value.replace(/\D/g,"");P.length<=6&&c(P)},onKeyPress:b,placeholder:"000000",autoFocus:!0,disabled:d,inputProps:{maxLength:6,pattern:"[0-9]*",inputMode:"numeric",style:{letterSpacing:"0.5em",fontSize:"1.5rem",textAlign:"center"}},sx:{mt:2}})]}),a==="fido2"&&r.jsxs(A,{textAlign:"center",sx:{py:2},children:[r.jsx($r,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:d?"Waiting for security key...":"Click verify to authenticate with your security key"}),r.jsx(k,{variant:"body2",color:"textSecondary",children:"Insert your security key and follow the browser prompts"}),d&&r.jsx(Ue,{sx:{mt:2}})]})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:t,disabled:d,children:"Cancel"}),r.jsx(Y,{onClick:y,variant:"contained",disabled:d||!a||a==="totp"&&(!u||u.length!==6),children:d?"Verifying...":"Verify"})]})]})},MS=()=>{const e=Ec(),{enqueueSnackbar:t}=Qt(),{login:n}=$t(),[o,s]=h.useState({username:"",password:"",rememberMe:!1}),[i,a]=h.useState(!1),[l,u]=h.useState(!1),[c,d]=h.useState(""),[f,p]=h.useState(!1),[x,g]=h.useState([]),m=b=>{const{name:C,value:P,checked:L}=b.target;s(T=>({...T,[C]:C==="rememberMe"?L:P})),d("")},v=async b=>{b.preventDefault(),u(!0),d("");try{const C=await n(o.username,o.password);C.requiresTwoFactor?(g(C.mfaMethods||[]),p(!0),u(!1)):C.success&&(t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(C){d(C.message||"Login failed. Please try again."),t(C.message||"Login failed",{variant:"error"})}finally{u(!1)}},y=async(b,C)=>{u(!0);try{(await n(o.username,o.password,b==="totp"?C:void 0,b==="fido2"?{fido2Verified:!0}:void 0)).success&&(p(!1),t("Login successful! Welcome back.",{variant:"success"}),e("/dashboard"))}catch(P){throw u(!1),P}};return r.jsxs(A,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:b=>b.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:2},children:[r.jsx(Ut.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:r.jsxs(Ve,{sx:{width:{xs:"100%",sm:400},p:4,WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)",backgroundColor:"background.paper",boxShadow:3},children:[r.jsxs(A,{sx:{textAlign:"center",mb:3},children:[r.jsx(Ut.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:r.jsx(fy,{sx:{fontSize:48,color:"primary.main",mb:2}})}),r.jsx(k,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"SMTP Relay"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Control Center Login"})]}),r.jsxs("form",{onSubmit:v,noValidate:!0,children:[r.jsx(Fe,{fullWidth:!0,id:"username",name:"username",label:"Username",value:o.username,onChange:m,margin:"normal",required:!0,autoFocus:!0,autoComplete:"username","aria-label":"Username",InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(py,{color:"action"})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx(Fe,{fullWidth:!0,id:"password",name:"password",label:"Password",type:i?"text":"password",value:o.password,onChange:m,margin:"normal",required:!0,autoComplete:"current-password","aria-label":"Password",InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(my,{color:"action"})}),endAdornment:r.jsx(Er,{position:"end",children:r.jsx(Se,{onClick:()=>a(!i),edge:"end",size:"small","aria-label":i?"Hide password":"Show password",title:i?"Hide password":"Show password",children:i?r.jsx(yc,{}):r.jsx(bc,{})})}),sx:{backgroundColor:"background.paper","& input":{color:"text.primary"}}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}},disabled:l}),r.jsx($n,{control:r.jsx(Bf,{name:"rememberMe",checked:o.rememberMe,onChange:m,color:"primary"}),label:"Remember me",sx:{mt:1,mb:2}}),c&&r.jsx(Ut.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:r.jsx(ye,{severity:"error",sx:{mb:2},children:c})}),r.jsx(Y,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:l,sx:{mt:2,mb:2,height:48,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)"}},children:l?r.jsx(Ue,{size:24,color:"inherit"}):"Sign In"}),r.jsx(ft,{sx:{my:2},children:r.jsx(k,{variant:"caption",color:"text.secondary",children:"SECURITY INFO"})}),r.jsx(A,{sx:{textAlign:"center"},children:r.jsx(k,{variant:"caption",color:"text.secondary",children:"This is a secure system. Unauthorized access is prohibited. All activities are monitored and logged."})})]})]})}),r.jsx(AS,{open:f,onClose:()=>p(!1),mfaMethods:x,onVerify:y,username:o.username})]})},An=Object.create(null);An.open="0";An.close="1";An.ping="2";An.pong="3";An.message="4";An.upgrade="5";An.noop="6";const oi=Object.create(null);Object.keys(An).forEach(e=>{oi[An[e]]=e});const Gl={type:"error",data:"parser error"},ng=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rg=typeof ArrayBuffer=="function",og=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,nu=({type:e,data:t},n,o)=>ng&&t instanceof Blob?n?o(t):vh(t,o):rg&&(t instanceof ArrayBuffer||og(t))?n?o(t):vh(new Blob([t]),o):o(An[e]+(t||"")),vh=(e,t)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];t("b"+(o||""))},n.readAsDataURL(e)};function Ch(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let tl;function RS(e,t){if(ng&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ch).then(t);if(rg&&(e.data instanceof ArrayBuffer||og(e.data)))return t(Ch(e.data));nu(e,!1,n=>{tl||(tl=new TextEncoder),t(tl.encode(n))})}const wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<wh.length;e++)Uo[wh.charCodeAt(e)]=e;const DS=e=>{let t=e.length*.75,n=e.length,o,s=0,i,a,l,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),d=new Uint8Array(c);for(o=0;o<n;o+=4)i=Uo[e.charCodeAt(o)],a=Uo[e.charCodeAt(o+1)],l=Uo[e.charCodeAt(o+2)],u=Uo[e.charCodeAt(o+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|u&63;return c},FS=typeof ArrayBuffer=="function",ru=(e,t)=>{if(typeof e!="string")return{type:"message",data:sg(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:OS(e.substring(1),t)}:oi[n]?e.length>1?{type:oi[n],data:e.substring(1)}:{type:oi[n]}:Gl},OS=(e,t)=>{if(FS){const n=DS(e);return sg(n,t)}else return{base64:!0,data:e}},sg=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ig="",LS=(e,t)=>{const n=e.length,o=new Array(n);let s=0;e.forEach((i,a)=>{nu(i,!1,l=>{o[a]=l,++s===n&&t(o.join(ig))})})},_S=(e,t)=>{const n=e.split(ig),o=[];for(let s=0;s<n.length;s++){const i=ru(n[s],t);if(o.push(i),i.type==="error")break}return o};function $S(){return new TransformStream({transform(e,t){RS(e,n=>{const o=n.length;let s;if(o<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,o);else if(o<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,o)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(o))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let nl;function Ks(e){return e.reduce((t,n)=>t+n.length,0)}function Qs(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let s=0;s<t;s++)n[s]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function NS(e,t){nl||(nl=new TextDecoder);const n=[];let o=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(o===0){if(Ks(n)<1)break;const u=Qs(n,1);i=(u[0]&128)===128,s=u[0]&127,s<126?o=3:s===126?o=1:o=2}else if(o===1){if(Ks(n)<2)break;const u=Qs(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),o=3}else if(o===2){if(Ks(n)<8)break;const u=Qs(n,8),c=new DataView(u.buffer,u.byteOffset,u.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Gl);break}s=d*Math.pow(2,32)+c.getUint32(4),o=3}else{if(Ks(n)<s)break;const u=Qs(n,s);l.enqueue(ru(i?u:nl.decode(u),t)),o=0}if(s===0||s>e){l.enqueue(Gl);break}}}})}const ag=4;function gt(e){if(e)return VS(e)}function VS(e){for(var t in gt.prototype)e[t]=gt.prototype[t];return e}gt.prototype.on=gt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};gt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===t||o.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};gt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,t)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};gt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const sa=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BS="arraybuffer";function lg(e,...t){return t.reduce((n,o)=>(e.hasOwnProperty(o)&&(n[o]=e[o]),n),{})}const HS=on.setTimeout,zS=on.clearTimeout;function ia(e,t){t.useNativeTimers?(e.setTimeoutFn=HS.bind(on),e.clearTimeoutFn=zS.bind(on)):(e.setTimeoutFn=on.setTimeout.bind(on),e.clearTimeoutFn=on.clearTimeout.bind(on))}const GS=1.33;function US(e){return typeof e=="string"?WS(e):Math.ceil((e.byteLength||e.size)*GS)}function WS(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function cg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qS(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function KS(e){let t={},n=e.split("&");for(let o=0,s=n.length;o<s;o++){let i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class QS extends Error{constructor(t,n,o){super(t),this.description=n,this.context=o,this.type="TransportError"}}class ou extends gt{constructor(t){super(),this.writable=!1,ia(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,o){return super.emitReserved("error",new QS(t,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=ru(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=qS(t);return n.length?"?"+n:""}}class YS extends ou{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};_S(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,LS(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=cg()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let ug=!1;try{ug=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const XS=ug;function JS(){}class ZS extends YS{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}}doWrite(t,n){const o=this.request({method:"POST",data:t});o.on("success",n),o.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=t}}let fo=class si extends gt{constructor(t,n,o){super(),this.createRequest=t,ia(this,o),this._opts=o,this._method=o.method||"GET",this._uri=n,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var t;const n=lg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(n);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&o.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var s;o.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=si.requestsCount++,si.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=JS,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete si.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};fo.requestsCount=0;fo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",jh);else if(typeof addEventListener=="function"){const e="onpagehide"in on?"pagehide":"unload";addEventListener(e,jh,!1)}}function jh(){for(let e in fo.requests)fo.requests.hasOwnProperty(e)&&fo.requests[e].abort()}const e1=function(){const e=dg({xdomain:!1});return e&&e.responseType!==null}();class t1 extends ZS{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=e1&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fo(dg,this.uri(),t)}}function dg(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||XS))return new XMLHttpRequest}catch{}if(!t)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const hg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class n1 extends ou{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,o=hg?{}:lg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,o)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;nu(o,this.supportsBinary,i=>{try{this.doWrite(o,i)}catch{}s&&sa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=cg()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const rl=on.WebSocket||on.MozWebSocket;class r1 extends n1{createSocket(t,n,o){return hg?new rl(t,n,o):n?new rl(t,n):new rl(t)}doWrite(t,n){this.ws.send(n)}}class o1 extends ou{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=NS(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=t.readable.pipeThrough(n).getReader(),s=$S();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{o.read().then(({done:l,value:u})=>{l||(this.onPacket(u),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],s=n===t.length-1;this._writer.write(o).then(()=>{s&&sa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const s1={websocket:r1,webtransport:o1,polling:t1},i1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ul(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");n!=-1&&o!=-1&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let s=i1.exec(e||""),i={},a=14;for(;a--;)i[a1[a]]=s[a]||"";return n!=-1&&o!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=l1(i,i.path),i.queryKey=c1(i,i.query),i}function l1(e,t){const n=/\/{2,9}/g,o=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&o.splice(0,1),t.slice(-1)=="/"&&o.splice(o.length-1,1),o}function c1(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,s,i){s&&(n[s]=i)}),n}const Wl=typeof addEventListener=="function"&&typeof removeEventListener=="function",ii=[];Wl&&addEventListener("offline",()=>{ii.forEach(e=>e())},!1);class cr extends gt{constructor(t,n){if(super(),this.binaryType=BS,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const o=Ul(t);n.hostname=o.host,n.secure=o.protocol==="https"||o.protocol==="wss",n.port=o.port,o.query&&(n.query=o.query)}else n.host&&(n.hostname=Ul(n.host).host);ia(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(o=>{const s=o.prototype.name;this.transports.push(s),this._transportsByName[s]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=KS(this.opts.query)),Wl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ii.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=ag,n.transport=t,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&cr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",cr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const s=this.writeBuffer[o].data;if(s&&(n+=US(s)),o>0&&n>this._maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,sa(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,o){return this._sendPacket("message",t,n,o),this}send(t,n,o){return this._sendPacket("message",t,n,o),this}_sendPacket(t,n,o,s){if(typeof n=="function"&&(s=n,n=void 0),typeof o=="function"&&(s=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const i={type:t,data:n,options:o};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}_onError(t){if(cr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Wl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=ii.indexOf(this._offlineEventListener);o!==-1&&ii.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}cr.protocol=ag;class u1 extends cr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),o=!1;cr.priorWebsocketSuccess=!1;const s=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!o)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;cr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){o||(o=!0,d(),n.close(),n=null)}const a=f=>{const p=new Error("probe error: "+f);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function u(){a("socket closed")}function c(f){n&&f.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",l),this.off("close",u),this.off("upgrading",c)};n.once("open",s),n.once("error",a),n.once("close",l),this.once("close",u),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let o=0;o<t.length;o++)~this.transports.indexOf(t[o])&&n.push(t[o]);return n}}let d1=class extends u1{constructor(t,n={}){const o=typeof t=="object"?t:n;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(s=>s1[s]).filter(s=>!!s)),super(t,o)}};function h1(e,t="",n){let o=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),o=Ul(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const i=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port+t,o.href=o.protocol+"://"+i+(n&&n.port===o.port?"":":"+o.port),o}const f1=typeof ArrayBuffer=="function",p1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,fg=Object.prototype.toString,m1=typeof Blob=="function"||typeof Blob<"u"&&fg.call(Blob)==="[object BlobConstructor]",g1=typeof File=="function"||typeof File<"u"&&fg.call(File)==="[object FileConstructor]";function su(e){return f1&&(e instanceof ArrayBuffer||p1(e))||m1&&e instanceof Blob||g1&&e instanceof File}function ai(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,o=e.length;n<o;n++)if(ai(e[n]))return!0;return!1}if(su(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ai(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ai(e[n]))return!0;return!1}function x1(e){const t=[],n=e.data,o=e;return o.data=ql(n,t),o.attachments=t.length,{packet:o,buffers:t}}function ql(e,t){if(!e)return e;if(su(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=ql(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=ql(e[o],t));return n}return e}function y1(e,t){return e.data=Kl(e.data,t),delete e.attachments,e}function Kl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Kl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Kl(e[n],t));return e}const b1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],v1=5;var ze;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ze||(ze={}));class C1{constructor(t){this.replacer=t}encode(t){return(t.type===ze.EVENT||t.type===ze.ACK)&&ai(t)?this.encodeAsBinary({type:t.type===ze.EVENT?ze.BINARY_EVENT:ze.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===ze.BINARY_EVENT||t.type===ze.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=x1(t),o=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(o),s}}function Sh(e){return Object.prototype.toString.call(e)==="[object Object]"}class iu extends gt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const o=n.type===ze.BINARY_EVENT;o||n.type===ze.BINARY_ACK?(n.type=o?ze.EVENT:ze.ACK,this.reconstructor=new w1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(su(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const o={type:Number(t.charAt(0))};if(ze[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===ze.BINARY_EVENT||o.type===ze.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(i,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(a)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););o.nsp=t.substring(i,n)}else o.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}o.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(iu.isPayloadValid(o.type,i))o.data=i;else throw new Error("invalid payload")}return o}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case ze.CONNECT:return Sh(n);case ze.DISCONNECT:return n===void 0;case ze.CONNECT_ERROR:return typeof n=="string"||Sh(n);case ze.EVENT:case ze.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&b1.indexOf(n[0])===-1);case ze.ACK:case ze.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class w1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=y1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const j1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:iu,Encoder:C1,get PacketType(){return ze},protocol:v1},Symbol.toStringTag,{value:"Module"}));function cn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const S1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class pg extends gt{constructor(t,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[cn(t,"open",this.onopen.bind(this)),cn(t,"packet",this.onpacket.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var o,s,i;if(S1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:ze.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),a.id=d}const l=(s=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var o;const s=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((o,s)=>{const i=(a,l)=>a?s(a):o(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>o!==this._queue[0]?void 0:(s!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ze.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(o=>String(o.id)===t)){const o=this.acks[t];delete this.acks[t],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ze.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ze.EVENT:case ze.BINARY_EVENT:this.onevent(t);break;case ze.ACK:case ze.BINARY_ACK:this.onack(t);break;case ze.DISCONNECT:this.ondisconnect();break;case ze.CONNECT_ERROR:this.destroy();const o=new Error(t.data.message);o.data=t.data.data,this.emitReserved("connect_error",o);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let o=!1;return function(...s){o||(o=!0,n.packet({type:ze.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ze.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,t.data)}}}function Po(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Po.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};Po.prototype.reset=function(){this.attempts=0};Po.prototype.setMin=function(e){this.ms=e};Po.prototype.setMax=function(e){this.max=e};Po.prototype.setJitter=function(e){this.jitter=e};class Ql extends gt{constructor(t,n){var o;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ia(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Po({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||j1;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new d1(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const s=cn(n,"open",function(){o.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=cn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(cn(t,"ping",this.onping.bind(this)),cn(t,"data",this.ondata.bind(this)),cn(t,"error",this.onerror.bind(this)),cn(t,"close",this.onclose.bind(this)),cn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){sa(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let o=this.nsps[t];return o?this._autoConnect&&!o.active&&o.connect():(o=new pg(this,t,n),this.nsps[t]=o),o}_destroy(t){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let o=0;o<n.length;o++)this.engine.write(n[o],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $o={};function li(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=h1(e,t.path||"/socket.io"),o=n.source,s=n.id,i=n.path,a=$o[s]&&i in $o[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let u;return l?u=new Ql(o,t):($o[s]||($o[s]=new Ql(o,t)),u=$o[s]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(li,{Manager:Ql,Socket:pg,io:li,connect:li});var P1={};const mg=h.createContext(null),au=()=>{const e=h.useContext(mg);if(!e)throw new Error("useWebSocket must be used within WebSocketProvider");return e},k1=({children:e})=>{const[t,n]=h.useState(null),[o,s]=h.useState(!1),[i,a]=h.useState(null),[l,u]=h.useState([]),[c,d]=h.useState(null),{user:f}=$t(),p=P1.REACT_APP_API_URL||"http://localhost:3001";h.useEffect(()=>{if(!f){t&&(t.disconnect(),n(null));return}const b=li(p,{withCredentials:!0,transports:["websocket","polling"]});return b.on("connect",()=>{console.log("WebSocket connected"),s(!0),b.emit("request:stats"),b.emit("request:devices")}),b.on("disconnect",()=>{console.log("WebSocket disconnected"),s(!1)}),b.on("connect_error",C=>{console.error("WebSocket connection error:",C.message),s(!1)}),b.on("stats:update",C=>{a(C)}),b.on("devices:update",C=>{u(C)}),b.on("queue:update",C=>{d(C)}),b.on("email:sent",C=>{console.log("Email sent:",C)}),b.on("email:failed",C=>{console.error("Email failed:",C)}),n(b),()=>{b.disconnect()}},[f,p]);const y={socket:t,connected:o,stats:i,devices:l,queueStatus:c,requestStats:()=>{t&&o&&t.emit("request:stats")},requestDevices:()=>{t&&o&&t.emit("request:devices")},requestQueueStatus:()=>{t&&o&&t.emit("request:queue")},sendCommand:(b,C)=>{t&&o&&t.emit(b,C)}};return r.jsx(mg.Provider,{value:y,children:e})},Ys=({title:e,value:t,icon:n,color:o,trend:s})=>r.jsx(Ut.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:e}),r.jsx(k,{variant:"h4",component:"div",children:t}),s&&r.jsxs(k,{variant:"body2",color:s>0?"success.main":"error.main",children:[s>0?"+":"",s,"%"]})]}),r.jsx(A,{sx:{color:o},children:n})]})})})}),I1=()=>{const{socket:e,connected:t}=au(),[n,o]=h.useState({totalEmails:0,emailsToday:0,activeDevices:0,queueSize:0,successRate:0,avgProcessingTime:0}),[s,i]=h.useState([]),[a,l]=h.useState({smtp:"healthy",exchange:"healthy",redis:"healthy",disk:85,memory:65,cpu:45});h.useEffect(()=>{if(e&&t)return e.emit("request:stats"),e.on("stats:update",d=>{o(f=>({...f,totalEmails:d.totalEmails??f.totalEmails,emailsToday:d.emailsToday??f.emailsToday,activeDevices:d.activeDevices??f.activeDevices,queueSize:d.queueSize??f.queueSize,successRate:d.successRate??f.successRate,avgProcessingTime:d.avgProcessingTime??f.avgProcessingTime}))}),e.on("activity:update",d=>{i(d)}),e.on("health:update",d=>{l(d)}),()=>{e.off("stats:update"),e.off("activity:update"),e.off("health:update")}},[e,t]);const u=()=>{e&&t&&e.emit("request:stats")},c=d=>{switch(d){case"healthy":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(mn,{color:"warning"});case"error":return r.jsx(In,{color:"error"});default:return r.jsx(Ne,{})}};return r.jsxs(A,{sx:{flexGrow:1,p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Dashboard"}),r.jsx(pt,{title:"Refresh",children:r.jsx(Se,{onClick:u,children:r.jsx(gn,{})})})]}),!t&&r.jsx(A,{mb:2,children:r.jsx(we,{label:"Connecting to server...",color:"warning",icon:r.jsx(mn,{})})}),r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ys,{title:"Total Emails",value:n.totalEmails.toLocaleString(),icon:r.jsx(mo,{fontSize:"large"}),color:"primary.main",trend:12})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ys,{title:"Active Devices",value:n.activeDevices,icon:r.jsx(Hf,{fontSize:"large"}),color:"success.main"})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ys,{title:"Queue Size",value:n.queueSize,icon:r.jsx(zf,{fontSize:"large"}),color:"warning.main"})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ys,{title:"Success Rate",value:`${n.successRate}%`,icon:r.jsx(Rn,{fontSize:"large"}),color:"info.main"})})]}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{elevation:3,sx:{p:2},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"System Health"}),r.jsxs(A,{sx:{mt:2},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.smtp),r.jsx(k,{sx:{ml:1},children:"SMTP Server"})]}),r.jsx(we,{label:a.smtp,color:a.smtp==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.exchange),r.jsx(k,{sx:{ml:1},children:"Exchange Online"})]}),r.jsx(we,{label:a.exchange,color:a.exchange==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[c(a.redis),r.jsx(k,{sx:{ml:1},children:"Redis Cache"})]}),r.jsx(we,{label:a.redis,color:a.redis==="healthy"?"success":"error",size:"small"})]}),r.jsxs(A,{mt:3,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["CPU Usage (",a.cpu,"%)"]}),r.jsx(Gt,{variant:"determinate",value:a.cpu,color:a.cpu>80?"error":"primary"})]}),r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Memory Usage (",a.memory,"%)"]}),r.jsx(Gt,{variant:"determinate",value:a.memory,color:a.memory>80?"error":"primary"})]}),r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Disk Usage (",a.disk,"%)"]}),r.jsx(Gt,{variant:"determinate",value:a.disk,color:a.disk>90?"error":a.disk>80?"warning":"primary"})]})]})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{elevation:3,sx:{p:2},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),r.jsx(A,{sx:{mt:2},children:s.length===0?r.jsx(k,{color:"textSecondary",align:"center",children:"No recent activity"}):s.map((d,f)=>r.jsxs(A,{sx:{mb:1,pb:1,borderBottom:"1px solid #e0e0e0"},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",children:[r.jsxs(k,{variant:"body2",children:[d.device," - ",d.action]}),r.jsx(k,{variant:"caption",color:"textSecondary",children:d.time})]}),d.details&&r.jsx(k,{variant:"caption",color:"textSecondary",children:d.details})]},f))})]})})]})]})},gg=h.createContext(void 0);function Be(){const e=h.useContext(gg);if(e===void 0)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const xg=h.createContext(void 0),fe=()=>{const e=h.useContext(xg);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},yg=h.createContext(void 0);function mr(){const e=h.useContext(yg);if(e===void 0)throw new Error(["MUI: Could not find the data grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const Ph={};function lu(e,t){const n=h.useRef(Ph);return n.current===Ph&&(n.current=e(t)),n}const T1=[];function bg(e){h.useEffect(e,T1)}const Dn=(e,t="warning")=>{let n=!1;const o=Array.isArray(e)?e.join(`
`):e;return()=>{n||(n=!0,t==="error"?console.error(o):console.warn(o))}},E1=Object.is;function vg(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,o=0;for(const s in e)if(n+=1,!E1(e[s],t[s])||!(s in t))return!1;for(const s in t)o+=1;return n===o}Dn(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);function A1(e){return e.acceptsApiRef}function kh(e,t){return A1(t)?t(e):t(e.current.state)}const M1=Object.is,cu=vg,R1=()=>({state:null,equals:null,selector:null}),se=(e,t,n=M1)=>{const o=lu(R1),s=o.current.selector!==null,[i,a]=h.useState(s?null:kh(e,t));return o.current.state=i,o.current.equals=n,o.current.selector=t,bg(()=>e.current.store.subscribe(()=>{const l=kh(e,o.current.selector);o.current.equals(o.current.state,l)||(o.current.state=l,a(l))})),i};function He(e){return hr("MuiDataGrid",e)}const H=Kn("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","autoHeight","autosizing","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--selectionMode","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorderColor","cell--withRightBorder","columnHeader--withRightBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]);var Ai="NOT_FOUND";function D1(e){var t;return{get:function(o){return t&&e(t.key,o)?t.value:Ai},put:function(o,s){t={key:o,value:s}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function F1(e,t){var n=[];function o(l){var u=n.findIndex(function(d){return t(l,d.key)});if(u>-1){var c=n[u];return u>0&&(n.splice(u,1),n.unshift(c)),c.value}return Ai}function s(l,u){o(l)===Ai&&(n.unshift({key:l,value:u}),n.length>e&&n.pop())}function i(){return n}function a(){n=[]}return{get:o,put:s,getEntries:i,clear:a}}var O1=function(t,n){return t===n};function L1(e){return function(n,o){if(n===null||o===null||n.length!==o.length)return!1;for(var s=n.length,i=0;i<s;i++)if(!e(n[i],o[i]))return!1;return!0}}function aa(e,t){var n=typeof t=="object"?t:{equalityCheck:t},o=n.equalityCheck,s=o===void 0?O1:o,i=n.maxSize,a=i===void 0?1:i,l=n.resultEqualityCheck,u=L1(s),c=a===1?D1(u):F1(a,u);function d(){var f=c.get(arguments);if(f===Ai){if(f=e.apply(null,arguments),l){var p=c.getEntries(),x=p.find(function(g){return l(g.value,f)});x&&(f=x.value)}c.put(arguments,f)}return f}return d.clearCache=function(){return c.clear()},d}function _1(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(o){return typeof o=="function"})){var n=t.map(function(o){return typeof o=="function"?"function "+(o.name||"unnamed")+"()":typeof o}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function $1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=0,d,f={memoizeOptions:void 0},p=l.pop();if(typeof p=="object"&&(f=p,p=l.pop()),typeof p!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof p+"]");var x=f,g=x.memoizeOptions,m=g===void 0?n:g,v=Array.isArray(m)?m:[m],y=_1(l),b=e.apply(void 0,[function(){return c++,p.apply(null,arguments)}].concat(v)),C=e(function(){for(var L=[],T=y.length,I=0;I<T;I++)L.push(y[I].apply(null,arguments));return d=b.apply(null,L),d});return Object.assign(C,{resultFunc:p,memoizedResultFunc:b,dependencies:y,lastResult:function(){return d},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),C};return s}var N1=$1(aa);const V1={cache:new WeakMap};Dn(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g. `mySelector(state, apiRef.current.instanceId)`."]);function Yl(e){return"current"in e&&"instanceId"in e.current}const Xl={id:"default"},Ee=(e,t,n,o,s,i,...a)=>{if(a.length>0)throw new Error("Unsupported number of selectors");let l;if(e&&t&&n)l=(u,c)=>{const d=Yl(u),f=c??(d?u.current.instanceId:Xl),p=d?u.current.state:u,x=e(p,f),g=t(p,f);return n(x,g)};else if(e&&t)l=(u,c)=>{const d=Yl(u),f=c??(d?u.current.instanceId:Xl),p=d?u.current.state:u,x=e(p,f);return t(x)};else throw new Error("Missing arguments");return l.acceptsApiRef=!0,l},nt=(...e)=>{const t=(...n)=>{var o,s;const[i,a]=n,l=Yl(i),u=l?i.current.instanceId:a??Xl,c=l?i.current.state:i,{cache:d}=V1;if(d.get(u)&&(o=d.get(u))!=null&&o.get(e)){var f;return(f=d.get(u))==null?void 0:f.get(e)(c,u)}const p=N1(...e);return d.get(u)||d.set(u,new Map),(s=d.get(u))==null||s.set(e,p),p(c,u)};return t.acceptsApiRef=!0,t},Fr=e=>e.columns,Wn=Ee(Fr,e=>e.orderedFields),ko=Ee(Fr,e=>e.lookup),Pn=nt(Wn,ko,(e,t)=>e.map(n=>t[n])),hn=Ee(Fr,e=>e.columnVisibilityModel),jt=nt(Pn,hn,(e,t)=>e.filter(n=>t[n.field]!==!1)),la=nt(jt,e=>e.map(t=>t.field)),Co=nt(jt,e=>{const t=[];let n=0;for(let o=0;o<e.length;o+=1)t.push(n),n+=e[o].computedWidth;return t}),uu=Ee(jt,Co,(e,t)=>{const n=e.length;return n===0?0:t[n-1]+e[n-1].computedWidth}),Cg=nt(Pn,e=>e.filter(t=>t.filterable)),B1=nt(Pn,e=>e.reduce((t,n)=>(n.filterable&&(t[n.field]=n),t),{})),ca=e=>e.columnGrouping,H1=nt(ca,e=>{var t;return(t=e?.unwrappedGroupingModel)!=null?t:{}}),wg=nt(ca,e=>{var t;return(t=e?.lookup)!=null?t:{}}),z1=nt(ca,e=>{var t;return(t=e?.headerStructure)!=null?t:[]}),Ss=Ee(ca,e=>{var t;return(t=e?.maxDepth)!=null?t:0}),xn=e=>e.rows,ua=Ee(xn,e=>e.totalRowCount),G1=Ee(xn,e=>e.loading),U1=Ee(xn,e=>e.totalTopLevelRowCount),Vn=Ee(xn,e=>e.dataRowIdToModelLookup),Mi=Ee(xn,e=>e.dataRowIdToIdLookup),dn=Ee(xn,e=>e.tree),W1=Ee(xn,e=>e.groupingName),Ih=Ee(xn,e=>e.treeDepths),da=nt(xn,e=>{const t=Object.entries(e.treeDepths);return t.length===0?1:t.filter(([,n])=>n>0).map(([n])=>Number(n)).sort((n,o)=>o-n)[0]+1}),Wo=Ee(xn,e=>e.dataRowIds),q1=Ee(xn,e=>e?.additionalRowGroups),Io=nt(q1,e=>{var t,n;const o=e?.pinnedRows;return{bottom:o==null||(t=o.bottom)==null?void 0:t.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}}),top:o==null||(n=o.top)==null?void 0:n.map(s=>{var i;return{id:s.id,model:(i=s.model)!=null?i:{}}})}}),K1=Ee(Io,e=>{var t,n;return((e==null||(t=e.top)==null?void 0:t.length)||0)+((e==null||(n=e.bottom)==null?void 0:n.length)||0)}),jg=()=>{var e;const t=mr(),n=fe(),o=se(t,jt),s=se(t,ua),i=se(t,Ss),a=se(t,K1);let l="grid";return(e=n.experimentalFeatures)!=null&&e.ariaV7&&n.treeData&&(l="treegrid"),{role:l,"aria-colcount":o.length,"aria-rowcount":i+1+a+s,"aria-multiselectable":!n.disableMultipleRowSelection}},Q1=e=>{const{classes:t}=e;return Te({root:["main"]},He,t)},Y1=Pt("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})(()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"})),X1=h.forwardRef((e,t)=>{var n;const o=fe(),s=Q1(o),i=(n=o.experimentalFeatures)!=null&&n.ariaV7?jg:null,a=typeof i=="function"?i():null;return r.jsx(Y1,j({ref:t,className:s.root,ownerState:o},a,{children:e.children}))}),Sg=e=>e.sorting,du=Ee(Sg,e=>e.sortedRows),hu=nt(du,Vn,(e,t)=>e.map(n=>{var o;return{id:n,model:(o=t[n])!=null?o:{}}})),tn=Ee(Sg,e=>e.sortModel),J1=nt(tn,e=>e.reduce((n,o,s)=>(n[o.field]={sortDirection:o.sort,sortIndex:e.length>1?s+1:void 0},n),{})),fu=e=>e.filter,yt=Ee(fu,e=>e.filterModel);Ee(yt,e=>e.quickFilterValues);const Z1=e=>e.visibleRowsLookup,Pg=Ee(fu,e=>e.filteredRowsLookup);Ee(fu,e=>e.filteredDescendantCountLookup);const gr=nt(Z1,hu,(e,t)=>t.filter(n=>e[n.id]!==!1)),ts=nt(gr,e=>e.map(t=>t.id)),eP=nt(Pg,hu,(e,t)=>t.filter(n=>e[n.id]!==!1)),tP=nt(eP,e=>e.map(t=>t.id)),kg=nt(gr,dn,da,(e,t,n)=>n<2?e:e.filter(o=>{var s;return((s=t[o.id])==null?void 0:s.depth)===0})),Ig=Ee(gr,e=>e.length),Tg=Ee(kg,e=>e.length),nP=nt(yt,ko,(e,t)=>{var n;return(n=e.items)==null?void 0:n.filter(o=>{var s,i;if(!o.field)return!1;const a=t[o.field];if(!(a!=null&&a.filterOperators)||(a==null||(s=a.filterOperators)==null?void 0:s.length)===0)return!1;const l=a.filterOperators.find(u=>u.value===o.operator);return l?!l.InputComponent||o.value!=null&&((i=o.value)==null?void 0:i.toString())!=="":!1})}),rP=nt(nP,e=>e.reduce((n,o)=>(n[o.field]?n[o.field].push(o):n[o.field]=[o],n),{})),ha=e=>e.focus,Yt=Ee(ha,e=>e.cell),oP=Ee(ha,e=>e.columnHeader);Ee(ha,e=>e.columnHeaderFilter);const Ri=Ee(ha,e=>e.columnGroupHeader),fa=e=>e.tabIndex,Di=Ee(fa,e=>e.cell),Eg=Ee(fa,e=>e.columnHeader);Ee(fa,e=>e.columnHeaderFilter);const sP=Ee(fa,e=>e.columnGroupHeader),pu=e=>e.density,iP=Ee(pu,e=>e.value),To=Ee(pu,e=>e.factor),Jl=e=>e.columnMenu;function aP(e){const{VirtualScrollerComponent:t,ColumnHeadersProps:n,children:o}=e,s=mr(),i=fe(),a=h.useRef(null),l=se(s,jt),u=se(s,rP),c=se(s,J1),d=se(s,Co),f=se(s,Eg),p=se(s,Di),x=se(s,sP),g=se(s,oP),m=se(s,Ri),v=se(s,To),y=se(s,Ss),b=se(s,Jl),C=se(s,hn),P=se(s,z1),L=!(x===null&&f===null&&p===null);St(()=>{s.current.computeSizeAndPublishResizeEvent();const F=a.current;if(typeof ResizeObserver>"u")return()=>{};let S;const V=new ResizeObserver(()=>{S=requestAnimationFrame(()=>{s.current.computeSizeAndPublishResizeEvent()})});return F&&V.observe(F),()=>{S&&window.cancelAnimationFrame(S),F&&V.unobserve(F)}},[s]);const T=h.useRef(null),I=h.useRef(null),R=h.useRef(null);s.current.register("private",{columnHeadersContainerElementRef:I,columnHeadersElementRef:T,virtualScrollerRef:R,mainElementRef:a});const N=!!s.current.getRootDimensions();return r.jsxs(X1,{ref:a,children:[r.jsx(i.slots.columnHeaders,j({ref:I,innerRef:T,visibleColumns:l,filterColumnLookup:u,sortColumnLookup:c,columnPositions:d,columnHeaderTabIndexState:f,columnGroupHeaderTabIndexState:x,columnHeaderFocus:g,columnGroupHeaderFocus:m,densityFactor:v,headerGroupingMaxDepth:y,columnMenuState:b,columnVisibility:C,columnGroupsHeaderStructure:P,hasOtherElementInTabSequence:L},n)),N&&r.jsx(t,{ref:R}),o]})}function lP(){var e;const t=fe();return t.hideFooter?null:r.jsx(t.slots.footer,j({},(e=t.slotProps)==null?void 0:e.footer))}const Lt="auto-generated-group-node-root",po=Symbol("mui.id_autogenerated"),cP=()=>({type:"group",id:Lt,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null});function uP(e,t,n="A row was provided without id in the rows prop:"){if(e==null)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join(`
`))}const Fi=(e,t,n)=>{const o=t?t(e):e.id;return uP(o,e,n),o},ci=({rows:e,getRowId:t,loading:n,rowCount:o})=>{const s={type:"full",rows:[]},i={},a={};for(let l=0;l<e.length;l+=1){const u=e[l],c=Fi(u,t);i[c]=u,a[c]=c,s.rows.push(c)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:n,rowCountPropBeforePartialUpdates:o,updates:s,dataRowIdToIdLookup:a,dataRowIdToModelLookup:i}},Ag=({tree:e,rowCountProp:t=0})=>{const n=e[Lt];return Math.max(t,n.children.length+(n.footerId==null?0:1))},Mg=({apiRef:e,rowCountProp:t=0,loadingProp:n,previousTree:o,previousTreeDepths:s})=>{const i=e.current.caches.rows,{tree:a,treeDepths:l,dataRowIds:u,groupingName:c}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:o,previousTreeDepths:s,updates:i.updates,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIdToModelLookup:i.dataRowIdToModelLookup}),d=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:a,treeDepths:l,dataRowIdToIdLookup:i.dataRowIdToIdLookup,dataRowIds:u,dataRowIdToModelLookup:i.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},j({},d,{totalRowCount:Math.max(t,d.dataRowIds.length),totalTopLevelRowCount:Ag({tree:d.tree,rowCountProp:t}),groupingName:c,loading:n})},ls=e=>e.type==="skeletonRow"||e.type==="footer"||e.type==="group"&&e.isAutoGenerated||e.type==="pinnedRow"&&e.isAutoGenerated,mu=(e,t,n)=>{const o=e[t];if(o.type!=="group")return[];const s=[];for(let i=0;i<o.children.length;i+=1){const a=o.children[i];(!n||!ls(e[a]))&&s.push(a);const l=mu(e,a,n);for(let u=0;u<l.length;u+=1)s.push(l[u])}return!n&&o.footerId!=null&&s.push(o.footerId),s},dP=({previousCache:e,getRowId:t,updates:n})=>{var o,s,i;if(e.updates.type==="full")throw new Error("MUI: Unable to prepare a partial update if a full update is not applied yet");const a=new Map;n.forEach(p=>{const x=Fi(p,t,"A row was provided without id when calling updateRows():");a.has(x)?a.set(x,j({},a.get(x),p)):a.set(x,p)});const l={type:"partial",actions:{insert:[...(o=e.updates.actions.insert)!=null?o:[]],modify:[...(s=e.updates.actions.modify)!=null?s:[]],remove:[...(i=e.updates.actions.remove)!=null?i:[]]},idToActionLookup:j({},e.updates.idToActionLookup)},u=j({},e.dataRowIdToModelLookup),c=j({},e.dataRowIdToIdLookup),d={insert:{},modify:{},remove:{}};a.forEach((p,x)=>{const g=l.idToActionLookup[x];if(p._action==="delete"){if(g==="remove"||!u[x])return;g!=null&&(d[g][x]=!0),l.actions.remove.push(x),delete u[x],delete c[x];return}const m=u[x];if(m){g==="remove"?(d.remove[x]=!0,l.actions.modify.push(x)):g==null&&l.actions.modify.push(x),u[x]=j({},m,p);return}g==="remove"?(d.remove[x]=!0,l.actions.insert.push(x)):g==null&&l.actions.insert.push(x),u[x]=p,c[x]=x});const f=Object.keys(d);for(let p=0;p<f.length;p+=1){const x=f[p],g=d[x];Object.keys(g).length>0&&(l.actions[x]=l.actions[x].filter(m=>!g[m]))}return{dataRowIdToModelLookup:u,dataRowIdToIdLookup:c,updates:l,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}};function Rg(e){var t,n;const o=Io(e),s=(o==null||(t=o.top)==null?void 0:t.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0,i=(o==null||(n=o.bottom)==null?void 0:n.reduce((a,l)=>(a+=e.current.unstable_getRowHeight(l.id),a),0))||0;return{top:s,bottom:i}}function Dg(e,t){const n=To(e);return`var(--DataGrid-overlayHeight, ${2*Math.floor(t*n)}px)`}const hP=Pt("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapper})(({overlayType:e})=>({position:"sticky",top:0,left:0,width:0,height:0,zIndex:e==="loadingOverlay"?5:4})),fP=Pt("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>e!=="overlayType",overridesResolver:(e,t)=>t.overlayWrapperInner})({}),pP=e=>{const{classes:t}=e;return Te({root:["overlayWrapper"],inner:["overlayWrapperInner"]},He,t)};function mP(e){var t,n;const o=Be(),s=fe(),[i,a]=h.useState(()=>{var d,f;return(d=(f=o.current.getRootDimensions())==null?void 0:f.viewportInnerSize)!=null?d:null}),l=h.useCallback(()=>{var d,f;a((d=(f=o.current.getRootDimensions())==null?void 0:f.viewportInnerSize)!=null?d:null)},[o]);St(()=>o.current.subscribeEvent("viewportInnerSizeChange",l),[o,l]);let u=(t=i?.height)!=null?t:0;s.autoHeight&&u===0&&(u=Dg(o,s.rowHeight));const c=pP(j({},e,{classes:s.classes}));return i?r.jsx(hP,{className:$e(c.root),overlayType:e.overlayType,children:r.jsx(fP,j({className:$e(c.inner),style:{height:u,width:(n=i?.width)!=null?n:0}},e))}):null}function gP(){const e=Be(),t=fe(),n=se(e,ua),o=se(e,Ig),s=se(e,G1),i=!s&&n===0,a=!s&&n>0&&o===0;let l=null,u="";if(i){var c;l=r.jsx(t.slots.noRowsOverlay,j({},(c=t.slotProps)==null?void 0:c.noRowsOverlay)),u="noRowsOverlay"}if(a){var d;l=r.jsx(t.slots.noResultsOverlay,j({},(d=t.slotProps)==null?void 0:d.noResultsOverlay)),u="noResultsOverlay"}if(s){var f;l=r.jsx(t.slots.loadingOverlay,j({},(f=t.slotProps)==null?void 0:f.loadingOverlay)),u="loadingOverlay"}return l===null?null:r.jsx(mP,{overlayType:u,children:l})}function pa(e){return h.memo(e,vg)}let ol;function xP(){return ol===void 0&&document.createElement("div").focus({get preventScroll(){return ol=!0,!1}}),ol}var Mn=function(e){return e.Cell="cell",e.Row="row",e}(Mn||{}),Ke=function(e){return e.Edit="edit",e.View="view",e}(Ke||{}),Ze=function(e){return e.Edit="edit",e.View="view",e}(Ze||{}),Vt=function(e){return e.And="and",e.Or="or",e}(Vt||{}),Ln=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}(Ln||{}),ln=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(ln||{}),Yn=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(Yn||{}),_n=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(_n||{});function Fg(e){return e.field!==void 0}function yP(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function bP(e,t){return e.closest(`.${t}`)}function gu(e){return e.replace(/["\\]/g,"\\$&")}function vP(e,t){return e.querySelector(`[role="columnheader"][data-field="${gu(t)}"]`)}function Og(e){return`.${H.row}[data-id="${gu(String(e))}"]`}function CP(e,t){return e.querySelector(Og(t))}function wP(e,{id:t,field:n}){const o=Og(t),s=`.${H.cell}[data-field="${gu(n)}"]`,i=`${o} ${s}`;return e.querySelector(i)}function Ps(e){return e.target.nodeType===1&&!e.currentTarget.contains(e.target)}function De(e,t,n){const o=h.useRef(!0);h.useEffect(()=>{o.current=!1,e.current.register(n,t)},[e,n,t]),o.current&&e.current.register(n,t)}class co extends Error{}function jP(e,t){const{getRowId:n}=t,o=h.useCallback(g=>({field:g,colDef:e.current.getColumn(g)}),[e]),s=h.useCallback(g=>{const m=e.current.getRow(g);if(!m)throw new co(`No row with id #${g} found`);return{id:g,columns:e.current.getAllColumns(),row:m}},[e]),i=h.useCallback((g,m)=>{const v=e.current.getRow(g),y=e.current.getRowNode(g);if(!v||!y)throw new co(`No row with id #${g} found`);const b=Yt(e),C=Di(e);return{id:g,field:m,row:v,rowNode:y,value:v[m],colDef:e.current.getColumn(m),cellMode:e.current.getCellMode(g,m),api:e.current,hasFocus:b!==null&&b.field===m&&b.id===g,tabIndex:C&&C.field===m&&C.id===g?0:-1}},[e]),a=h.useCallback((g,m)=>{const v=e.current.getColumn(m),y=e.current.getCellValue(g,m),b=e.current.getRow(g),C=e.current.getRowNode(g);if(!b||!C)throw new co(`No row with id #${g} found`);const P=Yt(e),L=Di(e),T={id:g,field:m,row:b,rowNode:C,colDef:v,cellMode:e.current.getCellMode(g,m),hasFocus:P!==null&&P.field===m&&P.id===g,tabIndex:L&&L.field===m&&L.id===g?0:-1,value:y,formattedValue:y,isEditable:!1};return v&&v.valueFormatter&&(T.formattedValue=v.valueFormatter({id:g,field:T.field,value:T.value,api:e.current})),T.isEditable=v&&e.current.isCellEditable(T),T},[e]),l=h.useCallback((g,m)=>{const v=e.current.getColumn(m);if(!v||!v.valueGetter){const y=e.current.getRow(g);if(!y)throw new co(`No row with id #${g} found`);return y[m]}return v.valueGetter(i(g,m))},[e,i]),u=h.useCallback((g,m)=>{var v;const y=po in g?g[po]:(v=n?.(g))!=null?v:g.id,b=m.field;return!m||!m.valueGetter?g[b]:m.valueGetter(i(y,b))},[i,n]),c=h.useCallback((g,m)=>{var v;const y=u(g,m);if(!m||!m.valueFormatter)return y;const b=(v=n?n(g):g.id)!=null?v:g[po],C=m.field;return m.valueFormatter({id:b,field:C,value:y,api:e.current})},[e,n,u]),d=h.useCallback(g=>e.current.rootElementRef.current?vP(e.current.rootElementRef.current,g):null,[e]),f=h.useCallback(g=>e.current.rootElementRef.current?CP(e.current.rootElementRef.current,g):null,[e]),p=h.useCallback((g,m)=>e.current.rootElementRef.current?wP(e.current.rootElementRef.current,{id:g,field:m}):null,[e]);De(e,{getCellValue:l,getCellParams:a,getCellElement:p,getRowValue:u,getRowFormattedValue:c,getRowParams:s,getRowElement:f,getColumnHeaderParams:o,getColumnHeaderElement:d},"public")}const SP=["changeReason","unstable_updateValueOnRender"],PP=["column","rowId","editCellState","align","children","colIndex","height","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","isNotVisible","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver","style"],kP=["changeReason","unstable_updateValueOnRender"],Oi={id:-1,field:"__unset__",row:{},rowNode:{id:-1,depth:0,type:"leaf",parent:-1,groupingKey:null},colDef:{type:"string",field:"__unset__",computedWidth:0},cellMode:Ke.View,hasFocus:!1,tabIndex:-1,value:null,formattedValue:"__unset__",isEditable:!1,api:{}},IP=e=>{const{align:t,showRightBorder:n,isEditable:o,isSelected:s,isSelectionMode:i,classes:a}=e,l={root:["cell",`cell--text${Tn(t)}`,o&&"cell--editable",s&&"selected",n&&"cell--withRightBorder",i&&!o&&"cell--selectionMode","withBorderColor"],content:["cellContent"]};return Te(l,He,a)},TP=h.forwardRef((e,t)=>{const{column:n,rowId:o,editCellState:s}=e,i=Be(),a=fe(),l=n.field,u=se(i,()=>{try{const N=i.current.getCellParams(o,l);return N.api=i.current,N}catch(R){if(R instanceof co)return Oi;throw R}},cu),c=se(i,()=>i.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:o,field:l}));if(u===Oi)return null;const{cellMode:d,hasFocus:f,isEditable:p,value:x,formattedValue:g}=u,m=n.type==="actions",v=(d==="view"||!p)&&!m?u.tabIndex:-1,{classes:y,getCellClassName:b}=a,C=i.current.unstable_applyPipeProcessors("cellClassName",[],{id:o,field:l});n.cellClassName&&C.push(typeof n.cellClassName=="function"?n.cellClassName(u):n.cellClassName),b&&C.push(b(u));let P;if(s==null&&n.renderCell&&(P=n.renderCell(u),C.push(H["cell--withRenderer"]),C.push(y?.["cell--withRenderer"])),s!=null&&n.renderEditCell){const R=i.current.getRowWithUpdatedValues(o,n.field),N=le(s,SP),F=j({},u,{row:R},N);P=n.renderEditCell(F),C.push(H["cell--editing"]),C.push(y?.["cell--editing"])}const{slots:L}=a,T=L.cell,I=j({},e,{ref:t,field:l,formattedValue:g,hasFocus:f,isEditable:p,isSelected:c,value:x,cellMode:d,children:P,tabIndex:v,className:$e(C)});return h.createElement(T,I)}),EP=pa(TP),AP=h.forwardRef((e,t)=>{var n,o,s,i;const{column:a,rowId:l,editCellState:u,align:c,colIndex:d,height:f,width:p,className:x,showRightBorder:g,colSpan:m,disableDragEvents:v,isNotVisible:y,onClick:b,onDoubleClick:C,onMouseDown:P,onMouseUp:L,onMouseOver:T,onKeyDown:I,onKeyUp:R,onDragEnter:N,onDragOver:F,style:S}=e,V=le(e,PP),D=Be(),w=fe(),E=a.field,M=se(D,()=>{try{const he=D.current.getCellParams(l,E);return he.api=D.current,he}catch(oe){if(oe instanceof co)return Oi;throw oe}},cu),$=se(D,()=>D.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:l,field:E})),{cellMode:_,hasFocus:O,isEditable:B,value:z,formattedValue:G}=M,J=a.type==="actions"&&((n=(o=a).getActions)==null?void 0:n.call(o,D.current.getRowParams(l)).some(oe=>!oe.props.disabled)),ee=(_==="view"||!B)&&!J?M.tabIndex:-1,{classes:te,getCellClassName:ve}=w,W=D.current.unstable_applyPipeProcessors("cellClassName",[],{id:l,field:E});a.cellClassName&&W.push(typeof a.cellClassName=="function"?a.cellClassName(M):a.cellClassName),ve&&W.push(ve(M));const Q=G??z,ie=h.useRef(null),X=Hr(t,ie),ne=h.useRef(null),je=(s=w.unstable_cellSelection)!=null?s:!1,Z={align:c,showRightBorder:g,isEditable:B,classes:w.classes,isSelected:$,isSelectionMode:je},xe=IP(Z),me=h.useCallback(oe=>he=>{const Ce=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,Ce,he),L&&L(he)},[D,E,L,l]),Pe=h.useCallback(oe=>he=>{const Ce=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,Ce,he),P&&P(he)},[D,E,P,l]),be=h.useCallback((oe,he)=>Ce=>{if(!D.current.getRow(l))return;const _e=D.current.getCellParams(l,E||"");D.current.publishEvent(oe,_e,Ce),he&&he(Ce)},[D,E,l]),Ae=h.useMemo(()=>y?j({padding:0,opacity:0,width:0,border:0},S):j({minWidth:p,maxWidth:p,minHeight:f,maxHeight:f==="auto"?"none":f},S),[p,f,y,S]);if(h.useEffect(()=>{if(!O||_===Ke.Edit)return;const oe=Ui(D.current.rootElementRef.current);if(ie.current&&!ie.current.contains(oe.activeElement)){const he=ie.current.querySelector('[tabindex="0"]'),Ce=ne.current||he||ie.current;if(xP())Ce.focus({preventScroll:!0});else{const _e=D.current.getScrollPosition();Ce.focus(),D.current.scroll(_e)}}},[O,_,D]),M===Oi)return null;let We=V.onFocus,Ge;if(u==null&&a.renderCell&&(Ge=a.renderCell(M),W.push(H["cell--withRenderer"]),W.push(te?.["cell--withRenderer"])),u!=null&&a.renderEditCell){const oe=D.current.getRowWithUpdatedValues(l,a.field),he=le(u,kP),Ce=j({},M,{row:oe},he);Ge=a.renderEditCell(Ce),W.push(H["cell--editing"]),W.push(te?.["cell--editing"])}if(Ge===void 0){const oe=Q?.toString();Ge=r.jsx("div",{className:xe.content,title:oe,role:"presentation",children:oe})}h.isValidElement(Ge)&&J&&(Ge=h.cloneElement(Ge,{focusElementRef:ne}));const xt=v?null:{onDragEnter:be("cellDragEnter",N),onDragOver:be("cellDragOver",F)},Ie=(i=w.experimentalFeatures)==null?void 0:i.ariaV7;return r.jsx("div",j({ref:X,className:$e(x,W,xe.root),role:Ie?"gridcell":"cell","data-field":E,"data-colindex":d,"aria-colindex":d+1,"aria-colspan":m,style:Ae,tabIndex:ee,onClick:be("cellClick",b),onDoubleClick:be("cellDoubleClick",C),onMouseOver:be("cellMouseOver",T),onMouseDown:Pe("cellMouseDown"),onMouseUp:me("cellMouseUp"),onKeyDown:be("cellKeyDown",I),onKeyUp:be("cellKeyUp",R)},xt,V,{onFocus:We,children:Ge}))}),Zl=pa(AP),MP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex"],RP=e=>{const{classes:t}=e;return Te({root:["booleanCell"]},He,t)};function DP(e){const{value:t}=e,n=le(e,MP),o=Be(),s=fe(),i={classes:s.classes},a=RP(i),l=h.useMemo(()=>t?s.slots.booleanCellTrueIcon:s.slots.booleanCellFalseIcon,[s.slots.booleanCellFalseIcon,s.slots.booleanCellTrueIcon,t]);return r.jsx(l,j({fontSize:"small",className:a.root,titleAccess:o.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":!!t},n))}const FP=h.memo(DP),OP=e=>ls(e.rowNode)?"":r.jsx(FP,j({},e)),LP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"],_P=e=>{const{classes:t}=e;return Te({root:["editBooleanCell"]},He,t)};function $P(e){var t;const{id:n,value:o,field:s,className:i,hasFocus:a,onValueChange:l}=e,u=le(e,LP),c=Be(),d=h.useRef(null),f=mt(),[p,x]=h.useState(o),g=fe(),m={classes:g.classes},v=_P(m),y=h.useCallback(async b=>{const C=b.target.checked;l&&await l(b,C),x(C),await c.current.setEditCellValue({id:n,field:s,value:C},b)},[c,s,n,l]);return h.useEffect(()=>{x(o)},[o]),St(()=>{a&&d.current.focus()},[a]),r.jsx("label",j({htmlFor:f,className:$e(v.root,i)},u,{children:r.jsx(g.slots.baseCheckbox,j({id:f,inputRef:d,checked:!!p,onChange:y,size:"small"},(t=g.slotProps)==null?void 0:t.baseCheckbox))}))}const NP=e=>r.jsx($P,j({},e)),VP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],BP=Xe(Gf)({fontSize:"inherit"}),HP=e=>{const{classes:t}=e;return Te({root:["editInputCell"]},He,t)};function zP(e){const{id:t,value:n,field:o,colDef:s,hasFocus:i,inputProps:a,onValueChange:l}=e,u=le(e,VP),c=s.type==="dateTime",d=Be(),f=h.useRef(),p=h.useMemo(()=>{let P;n==null?P=null:n instanceof Date?P=n:P=new Date((n??"").toString());let L;return P==null||Number.isNaN(P.getTime())?L="":L=new Date(P.getTime()-P.getTimezoneOffset()*60*1e3).toISOString().substr(0,c?16:10),{parsed:P,formatted:L}},[n,c]),[x,g]=h.useState(p),v={classes:fe().classes},y=HP(v),b=h.useCallback(P=>{if(P==="")return null;const[L,T]=P.split("T"),[I,R,N]=L.split("-"),F=new Date;if(F.setFullYear(Number(I),Number(R)-1,Number(N)),F.setHours(0,0,0,0),T){const[S,V]=T.split(":");F.setHours(Number(S),Number(V),0,0)}return F},[]),C=h.useCallback(async P=>{const L=P.target.value,T=b(L);l&&await l(P,T),g({parsed:T,formatted:L}),d.current.setEditCellValue({id:t,field:o,value:T},P)},[d,o,t,l,b]);return h.useEffect(()=>{g(P=>{var L,T;return p.parsed!==P.parsed&&((L=p.parsed)==null?void 0:L.getTime())!==((T=P.parsed)==null?void 0:T.getTime())?p:P})},[p]),St(()=>{i&&f.current.focus()},[i]),r.jsx(BP,j({inputRef:f,fullWidth:!0,className:y.root,type:c?"datetime-local":"date",inputProps:j({max:c?"9999-12-31T23:59":"9999-12-31"},a),value:x.formatted,onChange:C},u))}const Lg=e=>r.jsx(zP,j({},e)),GP=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],UP=e=>{const{classes:t}=e;return Te({root:["editInputCell"]},He,t)},WP=Xe(Gf,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})(({theme:e})=>j({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),qP=h.forwardRef((e,t)=>{const n=fe(),{id:o,value:s,field:i,colDef:a,hasFocus:l,debounceMs:u=200,isProcessingProps:c,onValueChange:d}=e,f=le(e,GP),p=Be(),x=h.useRef(),[g,m]=h.useState(s),v=UP(n),y=h.useCallback(async C=>{const P=C.target.value;d&&await d(C,P);const L=p.current.getColumn(i);let T=P;L.valueParser&&(T=L.valueParser(P,p.current.getCellParams(o,i))),m(T),p.current.setEditCellValue({id:o,field:i,value:T,debounceMs:u,unstable_skipValueParser:!0},C)},[p,u,i,o,d]),b=p.current.unstable_getEditCellMeta(o,i);return h.useEffect(()=>{b?.changeReason!=="debouncedSetEditCellValue"&&m(s)},[b,s]),St(()=>{l&&x.current.focus()},[l]),r.jsx(WP,j({ref:t,inputRef:x,className:v.root,ownerState:n,fullWidth:!0,type:a.type==="number"?a.type:"text",value:g??"",onChange:y,endAdornment:c?r.jsx(n.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},f))}),KP=e=>r.jsx(qP,j({},e)),Li=e=>e==="Escape",QP=e=>e==="Enter",_g=e=>e==="Tab",$g=e=>e===" ",YP=e=>e.indexOf("Arrow")===0,XP=e=>e==="Home"||e==="End",JP=e=>e.indexOf("Page")===0;function Ng(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}const _i=e=>XP(e)||YP(e)||JP(e)||$g(e),ZP=e=>!!e.key,ek=e=>_g(e)||Li(e);function Or(e){return e?.type==="singleSelect"}function ec(e,t,n){if(t===void 0)return;const o=t.find(s=>{const i=n(s);return String(i)===String(e)});return n(o)}const tk=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","getOptionLabel","getOptionValue"],nk=["MenuProps"];function rk(e){return!!e.key}function ok(e){var t,n,o;const s=fe(),{id:i,value:a,field:l,row:u,colDef:c,hasFocus:d,error:f,onValueChange:p,initialOpen:x=s.editMode===Mn.Cell,getOptionLabel:g,getOptionValue:m}=e,v=le(e,tk),y=Be(),b=h.useRef(),C=h.useRef(),[P,L]=h.useState(x),I=(n=(((t=s.slotProps)==null?void 0:t.baseSelect)||{}).native)!=null?n:!1,R=((o=s.slotProps)==null?void 0:o.baseSelect)||{},{MenuProps:N}=R,F=le(R,nk);if(St(()=>{if(d){var $;($=C.current)==null||$.focus()}},[d]),!Or(c))return null;let S;if(typeof c?.valueOptions=="function"?S=c?.valueOptions({id:i,row:u,field:l}):S=c?.valueOptions,!S)return null;const V=m||c.getOptionValue,D=g||c.getOptionLabel,w=async $=>{if(!Or(c)||!S)return;L(!1);const _=$.target,O=ec(_.value,S,V);p&&await p($,O),await y.current.setEditCellValue({id:i,field:l,value:O},$)},E=($,_)=>{if(s.editMode===Mn.Row){L(!1);return}if(_==="backdropClick"||Li($.key)){const O=y.current.getCellParams(i,l);y.current.publishEvent("cellEditStop",j({},O,{reason:Li($.key)?ln.escapeKeyDown:ln.cellFocusOut}))}},M=$=>{rk($)&&$.key==="Enter"||L(!0)};return!S||!c?null:r.jsx(s.slots.baseSelect,j({ref:b,inputRef:C,value:a,onChange:w,open:P,onOpen:M,MenuProps:j({onClose:E},N),error:f,native:I,fullWidth:!0},v,F,{children:S.map($=>{var _;const O=V($);return h.createElement(s.slots.baseSelectOption,j({},((_=s.slotProps)==null?void 0:_.baseSelectOption)||{},{native:I,key:O,value:O}),D($))})}))}const sk=e=>r.jsx(ok,j({},e)),ik=["open","target","onClose","children","position","className","onExited"],ak=e=>{const{classes:t}=e;return Te({root:["menu"]},He,t)},lk=Xe(vc,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})(({theme:e})=>({zIndex:e.zIndex.modal,[`& .${H.menuList}`]:{outline:0}})),ck={"bottom-start":"top left","bottom-end":"top right"};function Vg(e){var t;const{open:n,target:o,onClose:s,children:i,position:a,className:l,onExited:u}=e,c=le(e,ik),d=Be(),f=fe(),p=ak(f),x=h.useRef(null);St(()=>{if(n)x.current=document.activeElement instanceof HTMLElement?document.activeElement:null;else{var v,y;(v=x.current)==null||(y=v.focus)==null||y.call(v),x.current=null}},[n]),h.useEffect(()=>{const v=n?"menuOpen":"menuClose";d.current.publishEvent(v,{target:o})},[d,n,o]);const g=v=>y=>{v&&v(),u&&u(y)},m=v=>{v.target&&(o===v.target||o!=null&&o.contains(v.target))||s(v)};return r.jsx(lk,j({as:f.slots.basePopper,className:$e(l,p.root),ownerState:f,open:n,anchorEl:o,transition:!0,placement:a},c,(t=f.slotProps)==null?void 0:t.basePopper,{children:({TransitionProps:v,placement:y})=>r.jsx(Uf,{onClickAway:m,mouseEvent:"onMouseDown",children:r.jsx(jl,j({},v,{style:{transformOrigin:ck[y]},onExited:g(v?.onExited),children:r.jsx(ae,{children:i})}))})}))}const uk=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"],dk=e=>typeof e.getActions=="function";function hk(e){var t;const{colDef:n,id:o,hasFocus:s,tabIndex:i,position:a="bottom-end",focusElementRef:l}=e,u=le(e,uk),[c,d]=h.useState(-1),[f,p]=h.useState(!1),x=Be(),g=h.useRef(null),m=h.useRef(null),v=h.useRef(!1),y=h.useRef({}),b=_t(),C=mt(),P=mt(),L=fe();if(!dk(n))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const T=n.getActions(x.current.getRowParams(o)),I=T.filter(M=>!M.props.showInMenu),R=T.filter(M=>M.props.showInMenu),N=I.length+(R.length?1:0);h.useLayoutEffect(()=>{s||Object.entries(y.current).forEach(([M,$])=>{$?.stop({},()=>{delete y.current[M]})})},[s]),h.useEffect(()=>{if(c<0||!g.current||c>=g.current.children.length)return;g.current.children[c].focus({preventScroll:!0})},[c]),h.useEffect(()=>{s||(d(-1),v.current=!1)},[s]),h.useImperativeHandle(l,()=>({focus(){if(!v.current){const M=T.findIndex($=>!$.props.disabled);d(M)}}}),[T]),h.useEffect(()=>{c>=N&&d(N-1)},[c,N]);const F=()=>{p(!0),d(N-1),v.current=!0},S=()=>{p(!1)},V=M=>$=>{y.current[M]=$},D=(M,$)=>_=>{d(M),v.current=!0,$&&$(_)},w=M=>{if(N<=1)return;const $=(O,B)=>{var z;if(O<0||O>T.length)return O;const G=b.direction==="rtl"?-1:1,J=(B==="left"?-1:1)*G;return(z=T[O+J])!=null&&z.props.disabled?$(O+J,B):O+J};let _=c;M.key==="ArrowRight"?_=$(c,"right"):M.key==="ArrowLeft"&&(_=$(c,"left")),!(_<0||_>=N)&&_!==c&&(M.preventDefault(),M.stopPropagation(),d(_))},E=M=>{M.key==="Tab"&&M.preventDefault(),["Tab","Escape"].includes(M.key)&&S()};return r.jsxs("div",j({role:"menu",ref:g,tabIndex:-1,className:H.actionsCell,onKeyDown:w},u,{children:[I.map((M,$)=>h.cloneElement(M,{key:$,touchRippleRef:V($),onClick:D($,M.props.onClick),tabIndex:c===$?i:-1})),R.length>0&&P&&r.jsx(L.slots.baseIconButton,j({ref:m,id:P,"aria-label":x.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?C:void 0,role:"menuitem",size:"small",onClick:F,touchRippleRef:V(P),tabIndex:c===I.length?i:-1},(t=L.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(L.slots.moreActionsIcon,{fontSize:"small"})})),R.length>0&&r.jsx(Vg,{open:f,target:m.current,position:a,onClose:S,children:r.jsx(Wf,{id:C,className:H.menuList,onKeyDown:E,"aria-labelledby":P,variant:"menu",autoFocusItem:!0,children:R.map((M,$)=>h.cloneElement(M,{key:$,closeMenu:S}))})})]}))}const fk=e=>r.jsx(hk,j({},e)),pk=["field","align","width","contentWidth"],mk=e=>{const{align:t,classes:n}=e,o={root:["cell","cellSkeleton",`cell--text${Tn(t)}`,"withBorderColor"]};return Te(o,He,n)};function gk(e){const{align:t,width:n,contentWidth:o}=e,s=le(e,pk),a={classes:fe().classes,align:t},l=mk(a);return r.jsx("div",j({className:l.root,style:{width:n}},s,{children:r.jsx(Cc,{width:`${o}%`})}))}function xk(e){return e.vars?e.vars.palette.TableCell.border:e.palette.mode==="light"?gy(re(e.palette.divider,1),.88):xy(re(e.palette.divider,1),.68)}const Th={[`.${H.columnSeparator}, .${H["columnSeparator--resizing"]}`]:{visibility:"visible",width:"auto"}},Eh={[`& .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.menuIcon}`]:{width:"auto",visibility:"visible"}},yk=Xe("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${H.autoHeight}`]:t.autoHeight},{[`&.${H.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${H["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${H["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${H["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${H.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`&.${H["root--disableUserSelection"]} .${H.cell}`]:t["root--disableUserSelection"]},{[`&.${H.autosizing}`]:t.autosizing},{[`& .${H.editBooleanCell}`]:t.editBooleanCell},{[`& .${H["cell--editing"]}`]:t["cell--editing"]},{[`& .${H["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${H["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${H["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${H["cell--withRenderer"]}`]:t["cell--withRenderer"]},{[`& .${H.cell}`]:t.cell},{[`& .${H["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${H["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${H["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${H["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${H["cell--withRightBorder"]}`]:t["cell--withRightBorder"]},{[`& .${H.cellContent}`]:t.cellContent},{[`& .${H.cellCheckbox}`]:t.cellCheckbox},{[`& .${H.cellSkeleton}`]:t.cellSkeleton},{[`& .${H.checkboxInput}`]:t.checkboxInput},{[`& .${H["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${H["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${H["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${H["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${H["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${H["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${H["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${H["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${H["columnHeader--withRightBorder"]}`]:t["columnHeader--withRightBorder"]},{[`& .${H.columnHeader}`]:t.columnHeader},{[`& .${H.headerFilterRow}`]:t.headerFilterRow},{[`& .${H.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${H.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${H.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${H["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${H["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${H.columnSeparator}`]:t.columnSeparator},{[`& .${H.filterIcon}`]:t.filterIcon},{[`& .${H.iconSeparator}`]:t.iconSeparator},{[`& .${H.menuIcon}`]:t.menuIcon},{[`& .${H.menuIconButton}`]:t.menuIconButton},{[`& .${H.menuOpen}`]:t.menuOpen},{[`& .${H.menuList}`]:t.menuList},{[`& .${H["row--editable"]}`]:t["row--editable"]},{[`& .${H["row--editing"]}`]:t["row--editing"]},{[`& .${H["row--dragging"]}`]:t["row--dragging"]},{[`& .${H.row}`]:t.row},{[`& .${H.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${H.rowReorderCell}`]:t.rowReorderCell},{[`& .${H["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${H.sortIcon}`]:t.sortIcon},{[`& .${H.withBorderColor}`]:t.withBorderColor},{[`& .${H.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${H.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${H.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${H["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})(({theme:e})=>{const t=xk(e),n=e.shape.borderRadius;return j({"--unstable_DataGrid-radius":typeof n=="number"?`${n}px`:n,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:re(e.palette.background.default,e.palette.action.disabledOpacity),"--DataGrid-cellOffsetMultiplier":2,flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:t,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflowAnchor:"none",[`&.${H.autoHeight}`]:{height:"auto",[`& .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"}},[`&.${H.autosizing}`]:{[`& .${H.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},[`& .${H.cell} > *`]:{overflow:"visible !important",whiteSpace:"nowrap"},[`& .${H.groupingCriteriaCell}`]:{width:"unset"},[`& .${H.treeDataGroupingCell}`]:{width:"unset"}},[`& .${H["virtualScrollerContent--overflowed"]} .${H["row--lastVisible"]} .${H.cell}`]:{borderBottomColor:"transparent"},[`& .${H.columnHeader}, & .${H.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${H.columnHeader}:focus-within, & .${H.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:re(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${H.columnHeader}:focus, & .${H.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${H.columnHeaderCheckbox}, & .${H.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${H.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${H["columnHeader--sorted"]} .${H.iconButtonContainer}, & .${H["columnHeader--filtered"]} .${H.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}) .${H.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${H.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden",position:"relative"},[`& .${H.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${H["columnHeader--filledGroup"]} .${H.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]} .${H.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${H["columnHeader--filledGroup"]}.${H["columnHeader--showColumnBorder"]}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${H.headerFilterRow}`]:{borderTop:`1px solid ${t}`},[`& .${H.sortIcon}, & .${H.filterIcon}`]:{fontSize:"inherit"},[`& .${H["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${H["columnHeader--alignCenter"]} .${H.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${H["columnHeader--alignRight"]} .${H.columnHeaderDraggableContainer}, & .${H["columnHeader--alignRight"]} .${H.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${H["columnHeader--alignCenter"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${H["columnHeader--alignRight"]} .${H.menuIcon}, & .${H["columnHeader--alignRight"]} .${H.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${H["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${H.columnSeparator}`]:{visibility:"hidden",position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:t},"@media (hover: hover)":{[`& .${H.columnHeaders}:hover`]:Th,[`& .${H.columnHeader}:hover`]:Eh,[`& .${H.columnHeader}:not(.${H["columnHeader--sorted"]}):hover .${H.sortIcon}`]:{opacity:.5}},"@media (hover: none)":{[`& .${H.columnHeaders}`]:Th,[`& .${H.columnHeader}`]:Eh},[`& .${H["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${H["columnSeparator--sideRight"]}`]:{right:-12},[`& .${H["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:(e.vars||e).palette.text.primary,"@media (hover: none)":{color:t}},[`&.${H["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${H.iconSeparator}`]:{color:"inherit"},[`& .${H.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`.${H.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${H.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(
                ${e.vars.palette.action.selectedOpacity} + 
                ${e.vars.palette.action.hoverOpacity}
              ))`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${H.cell}`]:{display:"flex",alignItems:"center",borderBottom:"1px solid","&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`&.${H["root--disableUserSelection"]} .${H.cell}`]:{userSelect:"none"},[`& .${H.row}:not(.${H["row--dynamicHeight"]}) > .${H.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${H.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${H.cell}.${H["cell--selectionMode"]}`]:{cursor:"default"},[`& .${H.cell}.${H["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`solid ${(e.vars||e).palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${H["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${H["row--editing"]} .${H.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${H.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${H.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${H.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${H.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${H.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${H.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`.${H.withBorderColor}`]:{borderColor:t},[`& .${H["cell--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["columnHeader--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${H["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${H["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${H["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${H.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${H.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${H["columnHeader--dragging"]}, & .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${H["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${H.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${H.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${H.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${H.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})}),bk=["children","className"],vk=e=>{const{autoHeight:t,density:n,classes:o}=e,s={root:["root",t&&"autoHeight",`root--density${Tn(n)}`,"withBorderColor"]};return Te(s,He,o)},Ck=h.forwardRef(function(t,n){var o;const s=fe(),{children:i,className:a}=t,l=le(t,bk),u=mr(),c=se(u,iP),d=h.useRef(null),f=Hr(d,n),p=(o=s.experimentalFeatures)!=null&&o.ariaV7?null:jg,x=typeof p=="function"?p():null,g=j({},s,{density:c}),m=vk(g);u.current.register("public",{rootElementRef:d});const[v,y]=h.useState(!1);return St(()=>{y(!0)},[]),v?r.jsx(yk,j({ref:f,className:$e(a,m.root),ownerState:g},x,l,{children:i})):null}),wk=["className"],jk=e=>{const{classes:t}=e;return Te({root:["footerContainer","withBorderColor"]},He,t)},Sk=Pt("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),Pk=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,wk),i=fe(),a=jk(i);return r.jsx(Sk,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),kk=["className"],Ik=e=>{const{classes:t}=e;return Te({root:["overlay"]},He,t)},Tk=Pt("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),xu=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,kk),i=fe(),a=Ik(i);return r.jsx(Tk,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),Ek=["className"],Ak=e=>{const{classes:t}=e;return Te({root:["iconButtonContainer"]},He,t)},Mk=Pt("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),Bg=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,Ek),i=fe(),a=Ak(i);return r.jsx(Mk,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),Rk=e=>{const{classes:t}=e;return Te({icon:["sortIcon"]},He,t)};function Dk(e,t,n,o){let s;const i={};return t==="asc"?s=e.columnSortedAscendingIcon:t==="desc"?s=e.columnSortedDescendingIcon:(s=e.columnUnsortedIcon,i.sortingOrder=o),s?r.jsx(s,j({fontSize:"small",className:n},i)):null}function Fk(e){var t;const{direction:n,index:o,sortingOrder:s}=e,i=Be(),a=fe(),l=j({},e,{classes:a.classes}),u=Rk(l),c=Dk(a.slots,n,u.icon,s);if(!c)return null;const d=r.jsx(a.slots.baseIconButton,j({tabIndex:-1,"aria-label":i.current.getLocaleText("columnHeaderSortIconLabel"),title:i.current.getLocaleText("columnHeaderSortIconLabel"),size:"small"},(t=a.slotProps)==null?void 0:t.baseIconButton,{children:c}));return r.jsxs(Bg,{children:[o!=null&&r.jsx(So,{badgeContent:o,color:"default",children:d}),o==null&&d]})}const Ok=h.memo(Fk),Lk=e=>{const{classes:t,open:n}=e;return Te({root:["menuIcon",n&&"menuOpen"],button:["menuIconButton"]},He,t)},_k=h.memo(e=>{var t,n;const{colDef:o,open:s,columnMenuId:i,columnMenuButtonId:a,iconButtonRef:l}=e,u=Be(),c=fe(),d=j({},e,{classes:c.classes}),f=Lk(d),p=h.useCallback(x=>{x.preventDefault(),x.stopPropagation(),u.current.toggleColumnMenu(o.field)},[u,o.field]);return r.jsx("div",{className:f.root,children:r.jsx(c.slots.baseTooltip,j({title:u.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},(t=c.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx(c.slots.baseIconButton,j({ref:l,tabIndex:-1,className:f.button,"aria-label":u.current.getLocaleText("columnMenuLabel"),size:"small",onClick:p,"aria-haspopup":"menu","aria-expanded":s,"aria-controls":s?i:void 0,id:a},(n=c.slotProps)==null?void 0:n.baseIconButton,{children:r.jsx(c.slots.columnMenuIcon,{fontSize:"small"})}))}))})});function $k({columnMenuId:e,columnMenuButtonId:t,ContentComponent:n,contentComponentProps:o,field:s,open:i,target:a,onExited:l}){const u=Be(),c=u.current.getColumn(s),d=fn(f=>{f&&(f.stopPropagation(),a!=null&&a.contains(f.target))||u.current.hideColumnMenu()});return!a||!c?null:r.jsx(Vg,{placement:`bottom-${c.align==="right"?"start":"end"}`,open:i,target:a,onClose:d,onExited:l,children:r.jsx(n,j({colDef:c,hideMenu:d,open:i,id:e,labelledby:t},o))})}const Nk=["className"],Vk=e=>{const{classes:t}=e;return Te({root:["columnHeaderTitle"]},He,t)},Bk=Pt("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)"}),Hk=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,Nk),i=fe(),a=Vk(i);return r.jsx(Bk,j({ref:n,className:$e(a.root,o),ownerState:i},s))});function zk(e){var t;const{label:n,description:o}=e,s=fe(),i=h.useRef(null),[a,l]=h.useState(""),u=h.useCallback(()=>{if(!o&&i!=null&&i.current){const c=yP(i.current);l(c?n:"")}},[o,n]);return r.jsx(s.slots.baseTooltip,j({title:o||a},(t=s.slotProps)==null?void 0:t.baseTooltip,{children:r.jsx(Hk,{onMouseOver:u,ref:i,children:n})}))}const Gk=["resizable","resizing","height","side"];var Hg=function(e){return e.Left="left",e.Right="right",e}(Hg||{});const Uk=e=>{const{resizable:t,resizing:n,classes:o,side:s}=e,i={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",s&&`columnSeparator--side${Tn(s)}`],icon:["iconSeparator"]};return Te(i,He,o)};function Wk(e){const{height:t,side:n=Hg.Right}=e,o=le(e,Gk),s=fe(),i=j({},e,{side:n,classes:s.classes}),a=Uk(i),l=h.useCallback(u=>{u.preventDefault(),u.stopPropagation()},[]);return r.jsx("div",j({className:a.root,style:{minHeight:t,opacity:s.showColumnVerticalBorder?0:1}},o,{onClick:l,children:r.jsx(s.slots.columnResizeIcon,{className:a.icon})}))}const qk=h.memo(Wk),Kk=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps"],zg=h.forwardRef(function(t,n){const{classes:o,columnMenuOpen:s,colIndex:i,height:a,isResizing:l,sortDirection:u,hasFocus:c,tabIndex:d,separatorSide:f,isDraggable:p,headerComponent:x,description:g,width:m,columnMenuIconButton:v=null,columnMenu:y=null,columnTitleIconButtons:b=null,headerClassName:C,label:P,resizable:L,draggableContainerProps:T,columnHeaderSeparatorProps:I}=t,R=le(t,Kk),N=mr(),F=fe(),S=h.useRef(null),[V,D]=h.useState(s),w=Hr(S,n);let E="none";return u!=null&&(E=u==="asc"?"ascending":"descending"),h.useEffect(()=>{V||D(s)},[V,s]),h.useLayoutEffect(()=>{const M=N.current.state.columnMenu;if(c&&!M.open){const _=S.current.querySelector('[tabindex="0"]')||S.current;_?.focus(),N.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[N,c]),r.jsxs("div",j({ref:w,className:$e(o.root,C),style:{height:a,width:m,minWidth:m,maxWidth:m},role:"columnheader",tabIndex:d,"aria-colindex":i+1,"aria-sort":E,"aria-label":x==null?P:void 0},R,{children:[r.jsxs("div",j({className:o.draggableContainer,draggable:p,role:"presentation"},T,{children:[r.jsxs("div",{className:o.titleContainer,role:"presentation",children:[r.jsx("div",{className:o.titleContainerContent,children:x!==void 0?x:r.jsx(zk,{label:P,description:g,columnWidth:m})}),b]}),v]})),r.jsx(qk,j({resizable:!F.disableColumnResize&&!!L,resizing:l,height:a,side:f},I)),y]}))}),Qk=e=>{const{colDef:t,classes:n,isDragging:o,sortDirection:s,showRightBorder:i,filterItemsCounter:a}=e,l=s!=null,u=a!=null&&a>0,c=t.type==="number",d={root:["columnHeader",t.headerAlign==="left"&&"columnHeader--alignLeft",t.headerAlign==="center"&&"columnHeader--alignCenter",t.headerAlign==="right"&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",o&&"columnHeader--moving",l&&"columnHeader--sorted",u&&"columnHeader--filtered",c&&"columnHeader--numeric","withBorderColor",i&&"columnHeader--withRightBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return Te(d,He,n)};function Yk(e){var t,n,o,s;const{colDef:i,columnMenuOpen:a,colIndex:l,headerHeight:u,isResizing:c,sortDirection:d,sortIndex:f,filterItemsCounter:p,hasFocus:x,tabIndex:g,disableReorder:m,separatorSide:v}=e,y=mr(),b=fe(),C=h.useRef(null),P=mt(),L=mt(),T=h.useRef(null),[I,R]=h.useState(a),N=h.useMemo(()=>!b.disableColumnReorder&&!m&&!i.disableReorder,[b.disableColumnReorder,m,i.disableReorder]);let F;i.renderHeader&&(F=i.renderHeader(y.current.getColumnHeaderParams(i.field)));const S=j({},e,{classes:b.classes,showRightBorder:b.showColumnVerticalBorder}),V=Qk(S),D=h.useCallback(ee=>te=>{Ps(te)||y.current.publishEvent(ee,y.current.getColumnHeaderParams(i.field),te)},[y,i.field]),w=h.useMemo(()=>({onClick:D("columnHeaderClick"),onDoubleClick:D("columnHeaderDoubleClick"),onMouseOver:D("columnHeaderOver"),onMouseOut:D("columnHeaderOut"),onMouseEnter:D("columnHeaderEnter"),onMouseLeave:D("columnHeaderLeave"),onKeyDown:D("columnHeaderKeyDown"),onFocus:D("columnHeaderFocus"),onBlur:D("columnHeaderBlur")}),[D]),E=h.useMemo(()=>N?{onDragStart:D("columnHeaderDragStart"),onDragEnter:D("columnHeaderDragEnter"),onDragOver:D("columnHeaderDragOver"),onDragEnd:D("columnHeaderDragEnd")}:{},[N,D]),M=h.useMemo(()=>({onMouseDown:D("columnSeparatorMouseDown"),onDoubleClick:D("columnSeparatorDoubleClick")}),[D]);h.useEffect(()=>{I||R(a)},[I,a]);const $=h.useCallback(()=>{R(!1)},[]),_=!b.disableColumnMenu&&!i.disableColumnMenu&&r.jsx(_k,{colDef:i,columnMenuId:P,columnMenuButtonId:L,open:I,iconButtonRef:T}),O=r.jsx($k,{columnMenuId:P,columnMenuButtonId:L,field:i.field,open:a,target:T.current,ContentComponent:b.slots.columnMenu,contentComponentProps:(t=b.slotProps)==null?void 0:t.columnMenu,onExited:$}),B=(n=i.sortingOrder)!=null?n:b.sortingOrder,z=r.jsxs(h.Fragment,{children:[!b.disableColumnFilter&&r.jsx(b.slots.columnHeaderFilterIconButton,j({field:i.field,counter:p},(o=b.slotProps)==null?void 0:o.columnHeaderFilterIconButton)),i.sortable&&!i.hideSortIcons&&r.jsx(Ok,{direction:d,index:f,sortingOrder:B})]});h.useLayoutEffect(()=>{const ee=y.current.state.columnMenu;if(x&&!ee.open){var te;const W=C.current.querySelector('[tabindex="0"]')||C.current;W?.focus(),(te=y.current.columnHeadersContainerElementRef)!=null&&te.current&&(y.current.columnHeadersContainerElementRef.current.scrollLeft=0)}},[y,x]);const G=typeof i.headerClassName=="function"?i.headerClassName({field:i.field,colDef:i}):i.headerClassName,J=(s=i.headerName)!=null?s:i.field;return r.jsx(zg,j({ref:C,classes:V,columnMenuOpen:a,colIndex:l,height:u,isResizing:c,sortDirection:d,hasFocus:x,tabIndex:g,separatorSide:v,isDraggable:N,headerComponent:F,description:i.description,elementId:i.field,width:i.computedWidth,columnMenuIconButton:_,columnTitleIconButtons:z,headerClassName:G,label:J,resizable:!b.disableColumnResize&&!!i.resizable,"data-field":i.field,columnMenu:O,draggableContainerProps:E,columnHeaderSeparatorProps:M},w))}const cs=()=>({items:[],logicOperator:Vt.And,quickFilterValues:[],quickFilterLogicOperator:Vt.And}),Ah=1e3;class Xk{constructor(t=Ah){this.timeouts=new Map,this.cleanupTimeout=Ah,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const s=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,s)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Jk{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}var kn=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e}(kn||{});class Zk{}function eI(e){let t=0;return function(o,s,i,a){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Jk:new Xk);const[l]=h.useState(new Zk),u=h.useRef(null),c=h.useRef();c.current=i;const d=h.useRef(null);if(!u.current&&c.current){const f=(p,x,g)=>{if(!x.defaultMuiPrevented){var m;(m=c.current)==null||m.call(c,p,x,g)}};u.current=o.current.subscribeEvent(s,f,a),t+=1,d.current={cleanupToken:t},e.registry.register(l,()=>{var p;(p=u.current)==null||p.call(u),u.current=null,d.current=null},d.current)}else!c.current&&u.current&&(u.current(),u.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));h.useEffect(()=>{if(!u.current&&c.current){const f=(p,x,g)=>{if(!x.defaultMuiPrevented){var m;(m=c.current)==null||m.call(c,p,x,g)}};u.current=o.current.subscribeEvent(s,f,a)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var f;(f=u.current)==null||f.call(u),u.current=null}},[o,s,a])}}const tI={registry:null},pe=eI(tI),nI={isFirst:!0};function tt(e,t,n){pe(e,t,n,nI)}function kt(e,t){const n=h.useRef(null);if(n.current)return n.current;const o=e.current.getLogger(t);return n.current=o,o}function rI(e){return typeof e=="number"&&!Number.isNaN(e)}function Gg(e){return typeof e=="function"}function yu(e){return typeof e=="object"&&e!==null}function oI(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}function ui(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const wo=(e,t,n)=>Math.max(t,Math.min(n,e));function Lr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(!Lr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;for(let i=0;i<s.length;i+=1){const a=s[i];if(!Lr(a[1],t.get(a[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),o=n.length;if(o!==Object.keys(t).length)return!1;for(let s=0;s<o;s+=1)if(!Object.prototype.hasOwnProperty.call(t,n[s]))return!1;for(let s=0;s<o;s+=1){const i=n[s];if(!Lr(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function sI(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function iI(e,t,n){const o=sI(e);return()=>t+(n-t)*o()}function Ug(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const aI=(e,t,n,o,s)=>{const i=kt(e,"useNativeEventListener"),[a,l]=h.useState(!1),u=h.useRef(o),c=h.useCallback(d=>u.current&&u.current(d),[]);h.useEffect(()=>{u.current=o},[o]),h.useEffect(()=>{let d;if(Gg(t)?d=t():d=t&&t.current?t.current:null,d&&n&&!a){i.debug(`Binding native ${n} event`),d.addEventListener(n,c,s);const f=d;l(!0);const p=()=>{i.debug(`Clearing native ${n} event`),f.removeEventListener(n,c,s)};e.current.subscribeEvent("unmount",p)}},[t,c,n,a,i,s,e])},ks=e=>{const t=h.useRef(!0);t.current&&(t.current=!1,e())},lI=100,cI=e=>e?0:100,Wg=(e,t)=>t>0&&e>0?Math.ceil(e/t):0;Dn(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error");const qg=e=>({page:0,pageSize:e?0:100}),uI=(e,t=0)=>t===0?e:Math.max(Math.min(e,t-1),0),Kg=(e,t)=>{if(t===kn.DataGrid&&e>lI)throw new Error(["MUI: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`))},bu=e=>e.pagination,nn=Ee(bu,e=>e.paginationModel),uo=Ee(bu,e=>e.rowCount),dI=Ee(nn,e=>e.page),Qg=Ee(nn,e=>e.pageSize),hI=Ee(Qg,uo,(e,t)=>Wg(t,e)),vu=nt(nn,dn,da,gr,kg,(e,t,n,o,s)=>{const i=s.length,a=Math.min(e.pageSize*e.page,i-1),l=Math.min(a+e.pageSize-1,i-1);if(a===-1||l===-1)return null;if(n<2)return{firstRowIndex:a,lastRowIndex:l};const u=s[a],c=l-a+1,d=o.findIndex(g=>g.id===u.id);let f=d,p=0;for(;f<o.length&&p<=c;){var x;const g=o[f],m=(x=t[g.id])==null?void 0:x.depth;m===void 0?f+=1:((p<c||m>0)&&(f+=1),m===0&&(p+=1))}return{firstRowIndex:d,lastRowIndex:f-1}}),fI=nt(gr,vu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Yg=nt(ts,vu,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),us=e=>e.preferencePanel;var Nr=function(e){return e.filters="filters",e.columns="columns",e}(Nr||{});const ds=e=>e.rowsMeta,rn=e=>e.rowSelection,pI=Ee(rn,e=>e.length),mI=nt(rn,Vn,(e,t)=>new Map(e.map(n=>[n,t[n]]))),$i=nt(rn,e=>e.reduce((t,n)=>(t[n]=n,t),{})),gI=Dn(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Xg=(e,t)=>t&&e.length>1?(gI(),[e[0]]):e,Mh=(e,t)=>n=>j({},n,{sorting:j({},n.sorting,{sortModel:Xg(e,t)})}),xI=e=>e==="desc",yI=(e,t)=>{const n=t.current.getColumn(e.field);if(!n)return null;const o=xI(e.sort)?(...i)=>-1*n.sortComparator(...i):n.sortComparator;return{getSortCellParams:i=>({id:i,field:n.field,rowNode:t.current.getRowNode(i),value:t.current.getCellValue(i,n.field),api:t.current}),comparator:o}},bI=(e,t,n)=>e.reduce((o,s,i)=>{if(o!==0)return o;const a=t.params[i],l=n.params[i];return o=s.comparator(a.value,l.value,a,l),o},0),vI=(e,t)=>{const n=e.map(o=>yI(o,t)).filter(o=>!!o);return n.length===0?null:o=>o.map(s=>({node:s,params:n.map(i=>i.getSortCellParams(s.id))})).sort((s,i)=>bI(n,s,i)).map(s=>s.node.id)},Rh=(e,t)=>{const n=e.indexOf(t);return!t||n===-1||n+1===e.length?e[0]:e[n+1]},Cu=(e,t)=>e==null&&t!=null?-1:t==null&&e!=null?1:e==null&&t==null?0:null,CI=new Intl.Collator,wI=(e,t)=>{const n=Cu(e,t);return n!==null?n:typeof e=="string"?CI.compare(e.toString(),t.toString()):e-t},Jg=(e,t)=>{const n=Cu(e,t);return n!==null?n:Number(e)-Number(t)},Zg=(e,t)=>{const n=Cu(e,t);return n!==null?n:e>t?1:e<t?-1:0},ex=e=>e.headerFiltering,jI=Ee(ex,e=>e.editing),SI=Ee(ex,e=>e.menuOpen),PI=(e,t)=>{const n={enabled:!t.disableVirtualization,enabledForColumns:!0};return j({},e,{virtualization:n})};function kI(e,t){const n=i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabled:i})}))};De(e,{unstable_setVirtualization:n,unstable_setColumnVirtualization:i=>{e.current.setState(a=>j({},a,{virtualization:j({},a.virtualization,{enabledForColumns:i})}))}},"public"),h.useEffect(()=>{n(!t.disableVirtualization)},[t.disableVirtualization])}const tx=e=>e.virtualization,II=Ee(tx,e=>e.enabled),nx=Ee(tx,e=>e.enabledForColumns),TI=e=>{const{classes:t}=e;return Te({icon:["filterIcon"]},He,t)};function EI(e){var t,n;const{counter:o,field:s,onClick:i}=e,a=Be(),l=fe(),u=j({},e,{classes:l.classes}),c=TI(u),d=se(a,us),f=mt(),p=mt(),x=h.useCallback(v=>{v.preventDefault(),v.stopPropagation();const{open:y,openedPanelValue:b}=us(a.current.state);y&&b===Nr.filters?a.current.hideFilterPanel():a.current.showFilterPanel(void 0,p,f),i&&i(a.current.getColumnHeaderParams(s),v)},[a,s,i,p,f]);if(!o)return null;const g=d.open&&d.labelId===f,m=r.jsx(l.slots.baseIconButton,j({id:f,onClick:x,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?p:void 0},(t=l.slotProps)==null?void 0:t.baseIconButton,{children:r.jsx(l.slots.columnFilteredIcon,{className:c.icon,fontSize:"small"})}));return r.jsx(l.slots.baseTooltip,j({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(o),enterDelay:1e3},(n=l.slotProps)==null?void 0:n.baseTooltip,{children:r.jsxs(Bg,{children:[o>1&&r.jsx(So,{badgeContent:o,color:"default",children:m}),o===1&&m]})}))}const AI=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],MI=e=>{const{classes:t}=e;return Te({root:["checkboxInput"]},He,t)},RI=h.forwardRef(function(t,n){var o;const{field:s,id:i,value:a,rowNode:l,hasFocus:u,tabIndex:c}=t,d=le(t,AI),f=Be(),p=fe(),x={classes:p.classes},g=MI(x),m=h.useRef(null),v=h.useRef(null),y=Hr(m,n),b=f.current.getCellElement(i,s),C=I=>{const R={value:I.target.checked,id:i};f.current.publishEvent("rowSelectionCheckboxChange",R,I)};h.useLayoutEffect(()=>{c===0&&b&&(b.tabIndex=-1)},[b,c]),h.useEffect(()=>{if(u){var I;const R=(I=m.current)==null?void 0:I.querySelector("input");R?.focus({preventScroll:!0})}else v.current&&v.current.stop({})},[u]);const P=h.useCallback(I=>{$g(I.key)&&I.stopPropagation()},[]);if(l.type==="footer"||l.type==="pinnedRow")return null;const L=f.current.isRowSelectable(i),T=f.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return r.jsx(p.slots.baseCheckbox,j({ref:y,tabIndex:c,checked:a,onChange:C,className:g.root,inputProps:{"aria-label":T},onKeyDown:P,disabled:!L,touchRippleRef:v},(o=p.slotProps)==null?void 0:o.baseCheckbox,d))}),DI=RI,FI=["field","colDef"],OI=e=>{const{classes:t}=e;return Te({root:["checkboxInput"]},He,t)},LI=h.forwardRef(function(t,n){var o;const s=le(t,FI),[,i]=h.useState(!1),a=Be(),l=fe(),u={classes:l.classes},c=OI(u),d=se(a,Eg),f=se(a,rn),p=se(a,ts),x=se(a,Yg),g=h.useMemo(()=>typeof l.isRowSelectable!="function"?f:f.filter(R=>a.current.getRow(R)?l.isRowSelectable(a.current.getRowParams(R)):!1),[a,l.isRowSelectable,f]),m=h.useMemo(()=>(!l.pagination||!l.checkboxSelectionVisibleOnly?p:x).reduce((N,F)=>(N[F]=!0,N),{}),[l.pagination,l.checkboxSelectionVisibleOnly,x,p]),v=h.useMemo(()=>g.filter(R=>m[R]).length,[g,m]),y=v>0&&v<Object.keys(m).length,b=v>0,C=R=>{const N={value:R.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",N)},P=d!==null&&d.field===t.field?0:-1;h.useLayoutEffect(()=>{const R=a.current.getColumnHeaderElement(t.field);P===0&&R&&(R.tabIndex=-1)},[P,a,t.field]);const L=h.useCallback(R=>{R.key===" "&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!b})},[a,b]),T=h.useCallback(()=>{i(R=>!R)},[]);h.useEffect(()=>a.current.subscribeEvent("rowSelectionChange",T),[a,T]);const I=a.current.getLocaleText(b?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return r.jsx(l.slots.baseCheckbox,j({ref:n,indeterminate:y,checked:b,onChange:C,className:c.root,inputProps:{"aria-label":I},tabIndex:P,onKeyDown:L},(o=l.slotProps)==null?void 0:o.baseCheckbox,s))}),Dh=Je(r.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),Fh=Je(r.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),Oh=Je(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),Lh=Je(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),_I=Je(r.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),_h=Je(r.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),$I=Je(r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");Je(r.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");Je(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const NI=Je(r.jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),VI=Je(r.jsx("path",{d:"M11 19V5h2v14z"}),"Separator"),BI=Je(r.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),HI=Je(r.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),zI=Je(r.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),GI=Je(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),sl=Je(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),$h=Je(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),UI=Je(r.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),WI=Je(r.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),Nh=Je(r.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),qI=Je(r.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),KI=Je(r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),QI=Je(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),YI=Je(r.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),XI=Je(r.jsx("g",{children:r.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),JI=Je(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");Je(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const ZI=Je(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),eT=["hideMenu","colDef","id","labelledby","className","children","open"],tT=Xe(Wf)(()=>({minWidth:248})),nT=h.forwardRef(function(t,n){const{hideMenu:o,id:s,labelledby:i,className:a,children:l,open:u}=t,c=le(t,eT),d=h.useCallback(f=>{_g(f.key)&&f.preventDefault(),ek(f.key)&&o(f)},[o]);return r.jsx(tT,j({id:s,ref:n,className:$e(H.menuList,a),"aria-labelledby":i,onKeyDown:d,autoFocus:u},c,{children:l}))}),rT=["displayOrder"],oT=e=>{const t=mr(),{defaultSlots:n,defaultSlotProps:o,slots:s={},slotProps:i={},hideMenu:a,colDef:l,addDividers:u=!0}=e,c=h.useMemo(()=>j({},n,s),[n,s]),d=h.useMemo(()=>{if(!i||Object.keys(i).length===0)return o;const x=j({},i);return Object.entries(o).forEach(([g,m])=>{x[g]=j({},m,i[g]||{})}),x},[o,i]),f=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),p=h.useMemo(()=>{const x=Object.keys(n);return Object.keys(s).filter(g=>!x.includes(g))},[s,n]);return h.useMemo(()=>{const m=Array.from(new Set([...f,...p])).filter(v=>c[v]!=null).sort((v,y)=>{const b=d[v],C=d[y],P=Number.isFinite(b?.displayOrder)?b.displayOrder:100,L=Number.isFinite(C?.displayOrder)?C.displayOrder:100;return P-L});return m.reduce((v,y,b)=>{let C={colDef:l,onClick:a};const P=d[y];if(P){const L=le(P,rT);C=j({},C,L)}return u&&b!==m.length-1?[...v,[c[y],C],[ft,{}]]:[...v,[c[y],C]]},[])},[u,l,f,a,c,d,p])};function sT(e){const{colDef:t,onClick:n}=e,o=Be(),s=fe(),l=jt(o).filter(c=>c.disableColumnMenu!==!0).length===1,u=h.useCallback(c=>{l||(o.current.setColumnVisibility(t.field,!1),n(c))},[o,t.field,n,l]);return s.disableColumnSelector||t.hideable===!1?null:r.jsxs(de,{onClick:u,disabled:l,children:[r.jsx(Re,{children:r.jsx(s.slots.columnMenuHideIcon,{fontSize:"small"})}),r.jsx(ce,{children:o.current.getLocaleText("columnMenuHideColumn")})]})}function iT(e){const{onClick:t}=e,n=Be(),o=fe(),s=h.useCallback(i=>{t(i),n.current.showPreferences(Nr.columns)},[n,t]);return o.disableColumnSelector?null:r.jsxs(de,{onClick:s,children:[r.jsx(Re,{children:r.jsx(o.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),r.jsx(ce,{children:n.current.getLocaleText("columnMenuManageColumns")})]})}function aT(e){return r.jsxs(h.Fragment,{children:[r.jsx(sT,j({},e)),r.jsx(iT,j({},e))]})}function lT(e){const{colDef:t,onClick:n}=e,o=Be(),s=fe(),i=h.useCallback(a=>{n(a),o.current.showFilterPanel(t.field)},[o,t.field,n]);return s.disableColumnFilter||!t.filterable?null:r.jsxs(de,{onClick:i,children:[r.jsx(Re,{children:r.jsx(s.slots.columnMenuFilterIcon,{fontSize:"small"})}),r.jsx(ce,{children:o.current.getLocaleText("columnMenuFilter")})]})}function cT(e){var t;const{colDef:n,onClick:o}=e,s=Be(),i=se(s,tn),a=fe(),l=h.useMemo(()=>{if(!n)return null;const f=i.find(p=>p.field===n.field);return f?.sort},[n,i]),u=(t=n.sortingOrder)!=null?t:a.sortingOrder,c=h.useCallback(f=>{o(f);const p=f.currentTarget.getAttribute("data-value")||null;s.current.sortColumn(n,p===l?null:p)},[s,n,o,l]);if(!n||!n.sortable||!u.some(f=>!!f))return null;const d=f=>{const p=s.current.getLocaleText(f);return typeof p=="function"?p(n):p};return r.jsxs(h.Fragment,{children:[u.includes("asc")&&l!=="asc"?r.jsxs(de,{onClick:c,"data-value":"asc",children:[r.jsx(Re,{children:r.jsx(a.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),r.jsx(ce,{children:d("columnMenuSortAsc")})]}):null,u.includes("desc")&&l!=="desc"?r.jsxs(de,{onClick:c,"data-value":"desc",children:[r.jsx(Re,{children:r.jsx(a.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),r.jsx(ce,{children:d("columnMenuSortDesc")})]}):null,u.includes(null)&&l!=null?r.jsxs(de,{onClick:c,children:[r.jsx(Re,{}),r.jsx(ce,{children:s.current.getLocaleText("columnMenuUnsort")})]}):null]})}const uT=["defaultSlots","defaultSlotProps","slots","slotProps"],dT={columnMenuSortItem:cT,columnMenuFilterItem:lT,columnMenuColumnsItem:aT},hT={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},fT=h.forwardRef(function(t,n){const{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}=t,l=le(t,uT),u=oT(j({},l,{defaultSlots:o,defaultSlotProps:s,slots:i,slotProps:a}));return r.jsx(nT,j({ref:n},l,{children:u.map(([c,d],f)=>r.jsx(c,j({},d),f))}))}),pT=h.forwardRef(function(t,n){return r.jsx(fT,j({},t,{ref:n,defaultSlots:dT,defaultSlotProps:hT}))}),mT=["className"],gT=e=>{const{classes:t}=e;return Te({root:["panelContent"]},He,t)},xT=Pt("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function rx(e){const{className:t}=e,n=le(e,mT),o=fe(),s=gT(o);return r.jsx(xT,j({className:$e(t,s.root),ownerState:o},n))}const yT=["className"],bT=e=>{const{classes:t}=e;return Te({root:["panelFooter"]},He,t)},vT=Pt("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})(({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"}));function ox(e){const{className:t}=e,n=le(e,yT),o=fe(),s=bT(o);return r.jsx(vT,j({className:$e(t,s.root),ownerState:o},n))}const CT=["className"],wT=e=>{const{classes:t}=e;return Te({root:["panelHeader"]},He,t)},jT=Pt("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,t)=>t.panelHeader})(({theme:e})=>({padding:e.spacing(1)}));function ST(e){const{className:t}=e,n=le(e,CT),o=fe(),s=wT(o);return r.jsx(jT,j({className:$e(t,s.root),ownerState:o},n))}const PT=["className","slotProps"],kT=e=>{const{classes:t}=e;return Te({root:["panelWrapper"]},He,t)},IT=Xe("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),TT=()=>!0,sx=h.forwardRef(function(t,n){const{className:o,slotProps:s={}}=t,i=le(t,PT),a=fe(),l=kT(a);return r.jsx(yy,j({open:!0,disableEnforceFocus:!0,isEnabled:TT},s.TrapFocus,{children:r.jsx(IT,j({ref:n,tabIndex:-1,className:$e(o,l.root),ownerState:a},i))}))}),ET=!1,AT=["sort","searchPredicate","autoFocusSearchField","disableHideAllButton","disableShowAllButton","getTogglableColumns"],MT=e=>{const{classes:t}=e;return Te({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},He,t)},RT=Xe("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,t)=>t.columnsPanel})({padding:"8px 0px 8px 8px"}),DT=Xe("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,t)=>t.columnsPanelRow})(({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${by.root}`]:{marginRight:e.spacing(.5)}}));Xe(Se)({justifyContent:"flex-end"});const Vh=new Intl.Collator,FT=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1;function OT(e){var t,n,o;const s=Be(),i=h.useRef(null),a=se(s,Pn),l=se(s,hn),u=fe(),[c,d]=h.useState(""),f=MT(u),{sort:p,searchPredicate:x=FT,autoFocusSearchField:g=!0,disableHideAllButton:m=!1,disableShowAllButton:v=!1,getTogglableColumns:y}=e,b=le(e,AT),C=h.useMemo(()=>{switch(p){case"asc":return[...a].sort((S,V)=>Vh.compare(S.headerName||S.field,V.headerName||V.field));case"desc":return[...a].sort((S,V)=>-Vh.compare(S.headerName||S.field,V.headerName||V.field));default:return a}},[a,p]),P=S=>{const{name:V}=S.target;s.current.setColumnVisibility(V,l[V]===!1)},L=h.useCallback(S=>{const V=hn(s),D=j({},V),w=y?y(a):null;return a.forEach(E=>{E.hideable&&(w==null||w.includes(E.field))&&(S?delete D[E.field]:D[E.field]=!1)}),s.current.setColumnVisibilityModel(D)},[s,a,y]),T=h.useCallback(S=>{d(S.target.value)},[]),I=h.useMemo(()=>{const S=y?y(C):null,V=S?C.filter(({field:D})=>S.includes(D)):C;return c?V.filter(D=>x(D,c.toLowerCase())):V},[C,c,x,y]),R=h.useRef(null);h.useEffect(()=>{g?i.current.focus():R.current&&typeof R.current.focus=="function"&&R.current.focus()},[g]);let N=!1;const F=S=>N===!1&&S.hideable!==!1?(N=!0,!0):!1;return r.jsxs(sx,j({},b,{children:[r.jsx(ST,{children:r.jsx(u.slots.baseTextField,j({label:s.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:s.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:i,value:c,onChange:T,variant:"standard",fullWidth:!0},(t=u.slotProps)==null?void 0:t.baseTextField))}),r.jsx(rx,{children:r.jsx(RT,{className:f.root,ownerState:u,children:I.map(S=>{var V;return r.jsxs(DT,{className:f.columnsPanelRow,ownerState:u,children:[r.jsx($n,{control:r.jsx(u.slots.baseSwitch,j({disabled:S.hideable===!1,checked:l[S.field]!==!1,onClick:P,name:S.field,size:"small",inputRef:F(S)?R:void 0},(V=u.slotProps)==null?void 0:V.baseSwitch)),label:S.headerName||S.field}),!u.disableColumnReorder&&ET]},S.field)})})}),v&&m?null:r.jsxs(ox,{children:[m?r.jsx("span",{}):r.jsx(u.slots.baseButton,j({onClick:()=>L(!1)},(n=u.slotProps)==null?void 0:n.baseButton,{disabled:m,children:s.current.getLocaleText("columnsPanelHideAllButton")})),v?null:r.jsx(u.slots.baseButton,j({onClick:()=>L(!0)},(o=u.slotProps)==null?void 0:o.baseButton,{disabled:v,children:s.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))}const LT=["children","className","classes"],_T=Kn("MuiDataGrid",["panel","paper"]),$T=Xe(vc,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})(({theme:e})=>({zIndex:e.zIndex.modal})),NT=Xe(ae,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex"})),VT=h.forwardRef((e,t)=>{const{children:n,className:o}=e,s=le(e,LT),i=Be(),a=fe(),l=_T,[u,c]=h.useState(!1),d=h.useCallback(()=>{i.current.hidePreferences()},[i]),f=h.useCallback(m=>{Li(m.key)&&i.current.hidePreferences()},[i]),p=h.useMemo(()=>[{name:"flip",enabled:!0,options:{rootBoundary:"document"}},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{c(!0)},effect:()=>()=>{c(!1)}}],[]),[x,g]=h.useState(null);return h.useEffect(()=>{var m;const v=(m=i.current.rootElementRef)==null||(m=m.current)==null?void 0:m.querySelector(`.${H.columnHeaders}`);v&&g(v)},[i]),x?r.jsx($T,j({ref:t,placement:"bottom-start",className:$e(o,l.panel),ownerState:a,anchorEl:x,modifiers:p},s,{children:r.jsx(Uf,{mouseEvent:"onMouseUp",onClickAway:d,children:r.jsx(NT,{className:l.paper,ownerState:a,elevation:8,onKeyDown:f,children:u&&n})})})):null}),BT=h.forwardRef(function(t,n){var o,s,i;const a=Be(),l=se(a,Pn),u=fe(),c=se(a,us),d=a.current.unstable_applyPipeProcessors("preferencePanel",null,(o=c.openedPanelValue)!=null?o:Nr.filters);return r.jsx(u.slots.panel,j({ref:n,as:u.slots.basePopper,open:l.length>0&&c.open,id:c.panelId,"aria-labelledby":c.labelId},(s=u.slotProps)==null?void 0:s.panel,t,(i=u.slotProps)==null?void 0:i.basePopper,{children:d}))}),HT=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],zT=["InputComponentProps"],GT=e=>{const{classes:t}=e;return Te({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},He,t)},UT=Xe("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})(({theme:e})=>({display:"flex",padding:e.spacing(1)})),WT=Xe("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})(({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)})),qT=Xe("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,t)=>t.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),KT=Xe("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),QT=Xe("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:120}),YT=Xe("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),XT=e=>{switch(e){case Vt.And:return"filterPanelOperatorAnd";case Vt.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `logicOperator` property in the `GridFilterPanel`.")}},No=e=>e.headerName||e.field,Bh=new Intl.Collator,JT=h.forwardRef(function(t,n){var o,s,i,a,l,u,c,d,f,p;const{item:x,hasMultipleFilters:g,deleteFilter:m,applyFilterChanges:v,multiFilterOperator:y,showMultiFilterOperators:b,disableMultiFilterOperator:C,applyMultiFilterOperatorChanges:P,focusElementRef:L,logicOperators:T=[Vt.And,Vt.Or],columnsSort:I,filterColumns:R,deleteIconProps:N={},logicOperatorInputProps:F={},operatorInputProps:S={},columnInputProps:V={},valueInputProps:D={}}=t,w=le(t,HT),E=Be(),M=se(E,Cg),$=se(E,yt),_=mt(),O=mt(),B=mt(),z=mt(),G=fe(),J=GT(G),ee=h.useRef(null),te=h.useRef(null),ve=g&&T.length>0,W=((o=G.slotProps)==null?void 0:o.baseFormControl)||{},ie=(i=(((s=G.slotProps)==null?void 0:s.baseSelect)||{}).native)!=null?i:!0,X=((a=G.slotProps)==null?void 0:a.baseInputLabel)||{},ne=((l=G.slotProps)==null?void 0:l.baseSelectOption)||{},{InputComponentProps:je}=D,Z=le(D,zT),xe=h.useMemo(()=>{if(R===void 0||typeof R!="function")return M;const Ie=R({field:x.field,columns:M,currentFilters:$?.items||[]});return M.filter(oe=>Ie.includes(oe.field))},[R,$?.items,M,x.field]),me=h.useMemo(()=>{switch(I){case"asc":return xe.sort((Ie,oe)=>Bh.compare(No(Ie),No(oe)));case"desc":return xe.sort((Ie,oe)=>-Bh.compare(No(Ie),No(oe)));default:return xe}},[xe,I]),Pe=x.field?E.current.getColumn(x.field):null,be=h.useMemo(()=>{var Ie;return!x.operator||!Pe?null:(Ie=Pe.filterOperators)==null?void 0:Ie.find(oe=>oe.value===x.operator)},[x,Pe]),Ae=h.useCallback(Ie=>{const oe=Ie.target.value,he=E.current.getColumn(oe);if(he.field===Pe.field)return;const Ce=he.filterOperators.find(st=>st.value===x.operator)||he.filterOperators[0],_e=!Ce.InputComponent||Ce.InputComponent!==be?.InputComponent||he.type!==Pe.type;v(j({},x,{field:oe,operator:Ce.value,value:_e?void 0:x.value}))},[E,v,x,Pe,be]),We=h.useCallback(Ie=>{const oe=Ie.target.value,he=Pe?.filterOperators.find(_e=>_e.value===oe),Ce=!(he!=null&&he.InputComponent)||he?.InputComponent!==be?.InputComponent;v(j({},x,{operator:oe,value:Ce?void 0:x.value}))},[v,x,Pe,be]),Ge=h.useCallback(Ie=>{const oe=Ie.target.value===Vt.And.toString()?Vt.And:Vt.Or;P(oe)},[P]),xt=()=>{G.disableMultipleColumnsFiltering?x.value===void 0?m(x):v(j({},x,{value:void 0})):m(x)};return h.useImperativeHandle(L,()=>({focus:()=>{if(be!=null&&be.InputComponent){var Ie;ee==null||(Ie=ee.current)==null||Ie.focus()}else te.current.focus()}}),[be]),r.jsxs(UT,j({ref:n,className:J.root,"data-id":x.id,ownerState:G},w,{children:[r.jsx(WT,j({variant:"standard",as:G.slots.baseFormControl},W,N,{className:$e(J.deleteIcon,W.className,N.className),ownerState:G,children:r.jsx(G.slots.baseIconButton,j({"aria-label":E.current.getLocaleText("filterPanelDeleteIconLabel"),title:E.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:xt,size:"small"},(u=G.slotProps)==null?void 0:u.baseIconButton,{children:r.jsx(G.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),r.jsx(qT,j({variant:"standard",as:G.slots.baseFormControl},W,F,{sx:j({display:ve?"flex":"none",visibility:b?"visible":"hidden"},W.sx||{},F.sx||{}),className:$e(J.logicOperatorInput,W.className,F.className),ownerState:G,children:r.jsx(G.slots.baseSelect,j({inputProps:{"aria-label":E.current.getLocaleText("filterPanelLogicOperator")},value:y,onChange:Ge,disabled:!!C||T.length===1,native:ie},(c=G.slotProps)==null?void 0:c.baseSelect,{children:T.map(Ie=>h.createElement(G.slots.baseSelectOption,j({},ne,{native:ie,key:Ie.toString(),value:Ie.toString()}),E.current.getLocaleText(XT(Ie))))}))})),r.jsxs(KT,j({variant:"standard",as:G.slots.baseFormControl},W,V,{className:$e(J.columnInput,W.className,V.className),ownerState:G,children:[r.jsx(G.slots.baseInputLabel,j({},X,{htmlFor:_,id:O,children:E.current.getLocaleText("filterPanelColumns")})),r.jsx(G.slots.baseSelect,j({labelId:O,id:_,label:E.current.getLocaleText("filterPanelColumns"),value:x.field||"",onChange:Ae,native:ie},(d=G.slotProps)==null?void 0:d.baseSelect,{children:me.map(Ie=>h.createElement(G.slots.baseSelectOption,j({},ne,{native:ie,key:Ie.field,value:Ie.field}),No(Ie)))}))]})),r.jsxs(QT,j({variant:"standard",as:G.slots.baseFormControl},W,S,{className:$e(J.operatorInput,W.className,S.className),ownerState:G,children:[r.jsx(G.slots.baseInputLabel,j({},X,{htmlFor:B,id:z,children:E.current.getLocaleText("filterPanelOperator")})),r.jsx(G.slots.baseSelect,j({labelId:z,label:E.current.getLocaleText("filterPanelOperator"),id:B,value:x.operator,onChange:We,native:ie,inputRef:te},(f=G.slotProps)==null?void 0:f.baseSelect,{children:Pe==null||(p=Pe.filterOperators)==null?void 0:p.map(Ie=>h.createElement(G.slots.baseSelectOption,j({},ne,{native:ie,key:Ie.value,value:Ie.value}),Ie.label||E.current.getLocaleText(`filterOperator${Tn(Ie.value)}`)))}))]})),r.jsx(YT,j({variant:"standard",as:G.slots.baseFormControl},W,Z,{className:$e(J.valueInput,W.className,Z.className),ownerState:G,children:be!=null&&be.InputComponent?r.jsx(be.InputComponent,j({apiRef:E,item:x,applyValue:v,focusElementRef:ee},be.InputComponentProps,je)):null}))]}))});class wu{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new wu}start(t,n){this.clear(),this.currentId=setTimeout(n,t)}}function ju(){const e=lu(wu.create).current;return bg(e.disposeEffect),e}const ZT=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","clearButton","InputProps","variant"];function Cn(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,tabIndex:u,disabled:c,clearButton:d,InputProps:f,variant:p="standard"}=e,x=le(e,ZT),g=ju(),[m,v]=h.useState((t=o.value)!=null?t:""),[y,b]=h.useState(!1),C=mt(),P=fe(),L=h.useCallback(T=>{const{value:I}=T.target;v(String(I)),b(!0),g.start(P.filterDebounceMs,()=>{const R=j({},o,{value:I,fromInput:C});s(R),b(!1)})},[C,s,o,P.filterDebounceMs,g]);return h.useEffect(()=>{if(o.fromInput!==C||o.value===void 0){var I;v(String((I=o.value)!=null?I:""))}},[C,o]),r.jsx(P.slots.baseTextField,j({id:C,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:m,onChange:L,variant:p,type:i||"text",InputProps:j({},y||d?{endAdornment:y?r.jsx(P.slots.loadIcon,{fontSize:"small",color:"action"}):d}:{},{disabled:c},f,{inputProps:j({tabIndex:u},f?.inputProps)}),InputLabelProps:{shrink:!0},inputRef:l},x,(n=P.slotProps)==null?void 0:n.baseTextField))}const eE=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function Jr(e){var t,n;const{item:o,applyValue:s,type:i,apiRef:a,focusElementRef:l,InputProps:u,clearButton:c,tabIndex:d,disabled:f}=e,p=le(e,eE),x=ju(),[g,m]=h.useState((t=o.value)!=null?t:""),[v,y]=h.useState(!1),b=mt(),C=fe(),P=h.useCallback(L=>{const T=L.target.value;m(String(T)),y(!0),x.start(C.filterDebounceMs,()=>{s(j({},o,{value:T})),y(!1)})},[s,o,C.filterDebounceMs,x]);return h.useEffect(()=>{var L;const T=(L=o.value)!=null?L:"";m(String(T))},[o.value]),r.jsx(C.slots.baseTextField,j({fullWidth:!0,id:b,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:g,onChange:P,variant:"standard",type:i||"text",InputLabelProps:{shrink:!0},inputRef:l,InputProps:j({},v||c?{endAdornment:v?r.jsx(C.slots.loadIcon,{fontSize:"small",color:"action"}):c}:{},{disabled:f},u,{inputProps:j({max:i==="datetime-local"?"9999-12-31T23:59":"9999-12-31",tabIndex:d},u?.inputProps)})},p,(n=C.slotProps)==null?void 0:n.baseTextField))}const tE=["item","applyValue","type","apiRef","focusElementRef","getOptionLabel","getOptionValue","placeholder","tabIndex","label","variant","isFilterActive","clearButton","InputLabelProps"],nE=({column:{valueOptions:e,field:t},OptionComponent:n,getOptionLabel:o,getOptionValue:s,isSelectNative:i,baseSelectOptionProps:a})=>(typeof e=="function"?["",...e({field:t})]:["",...e||[]]).map(u=>{const c=s(u),d=o(u);return h.createElement(n,j({},a,{native:i,key:c,value:c}),d)}),rE=Xe("div")({display:"flex",alignItems:"flex-end",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Hh(e){var t,n,o,s,i,a,l,u;const{item:c,applyValue:d,type:f,apiRef:p,focusElementRef:x,getOptionLabel:g,getOptionValue:m,placeholder:v,tabIndex:y,label:b,variant:C="standard",clearButton:P}=e,L=le(e,tE),[T,I]=h.useState((t=c.value)!=null?t:""),R=mt(),N=mt(),F=fe(),S=(n=(o=F.slotProps)==null||(o=o.baseSelect)==null?void 0:o.native)!=null?n:!0;let V=null;if(c.field){const _=p.current.getColumn(c.field);Or(_)&&(V=_)}const D=m||((s=V)==null?void 0:s.getOptionValue),w=g||((i=V)==null?void 0:i.getOptionLabel),E=h.useMemo(()=>{if(V)return typeof V.valueOptions=="function"?V.valueOptions({field:V.field}):V.valueOptions},[V]),M=h.useCallback(_=>{let O=_.target.value;O=ec(O,E,D),I(String(O)),d(j({},c,{value:O}))},[E,D,d,c]);if(h.useEffect(()=>{var _;let O;if(E!==void 0){if(O=ec(c.value,E,D),O!==c.value){d(j({},c,{value:O}));return}}else O=c.value;O=(_=O)!=null?_:"",I(String(O))},[c,E,d,D]),!Or(V)||!Or(V))return null;const $=b??p.current.getLocaleText("filterPanelInputLabel");return r.jsxs(rE,{children:[r.jsxs(F.slots.baseFormControl,{children:[r.jsx(F.slots.baseInputLabel,j({},(a=F.slotProps)==null?void 0:a.baseInputLabel,{id:N,htmlFor:R,shrink:!0,variant:C,children:$})),r.jsx(F.slots.baseSelect,j({id:R,label:$,labelId:N,value:T,onChange:M,variant:C,type:f||"text",inputProps:{tabIndex:y,ref:x,placeholder:v??p.current.getLocaleText("filterPanelInputPlaceholder")},native:S,notched:C==="outlined"?!0:void 0},L,(l=F.slotProps)==null?void 0:l.baseSelect,{children:nE({column:V,OptionComponent:F.slots.baseSelectOption,getOptionLabel:w,getOptionValue:D,isSelectNative:S,baseSelectOptionProps:(u=F.slotProps)==null?void 0:u.baseSelectOption})}))]}),P]})}const oE=["item","applyValue","apiRef","focusElementRef","isFilterActive","clearButton","tabIndex","label","variant","InputLabelProps"],sE=Xe("div")({display:"flex",alignItems:"center",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function iE(e){var t,n,o,s;const{item:i,applyValue:a,apiRef:l,focusElementRef:u,clearButton:c,tabIndex:d,label:f,variant:p="standard"}=e,x=le(e,oE),[g,m]=h.useState(i.value||""),v=fe(),y=mt(),b=mt(),C=((t=v.slotProps)==null?void 0:t.baseSelect)||{},P=(n=C.native)!=null?n:!0,L=((o=v.slotProps)==null?void 0:o.baseSelectOption)||{},T=h.useCallback(R=>{const N=R.target.value;m(N),a(j({},i,{value:N}))},[a,i]);h.useEffect(()=>{m(i.value||"")},[i.value]);const I=f??l.current.getLocaleText("filterPanelInputLabel");return r.jsxs(sE,{children:[r.jsxs(v.slots.baseFormControl,{fullWidth:!0,children:[r.jsx(v.slots.baseInputLabel,j({},(s=v.slotProps)==null?void 0:s.baseInputLabel,{id:y,shrink:!0,variant:p,children:I})),r.jsxs(v.slots.baseSelect,j({labelId:y,id:b,label:I,value:g,onChange:T,variant:p,notched:p==="outlined"?!0:void 0,native:P,displayEmpty:!0,inputProps:{ref:u,tabIndex:d}},x,C,{children:[r.jsx(v.slots.baseSelectOption,j({},L,{native:P,value:"",children:l.current.getLocaleText("filterValueAny")})),r.jsx(v.slots.baseSelectOption,j({},L,{native:P,value:"true",children:l.current.getLocaleText("filterValueTrue")})),r.jsx(v.slots.baseSelectOption,j({},L,{native:P,value:"false",children:l.current.getLocaleText("filterValueFalse")}))]}))]}),c]})}const aE=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],zh=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(Math.random()*1e5)}),lE=h.forwardRef(function(t,n){var o,s;const i=Be(),a=fe(),l=se(i,yt),u=se(i,Cg),c=h.useRef(null),d=h.useRef(null),{logicOperators:f=[Vt.And,Vt.Or],columnsSort:p,filterFormProps:x,getColumnForNewFilter:g,disableAddFilterButton:m=!1,disableRemoveAllButton:v=!1}=t,y=le(t,aE),b=i.current.upsertFilterItem,C=h.useCallback(S=>{i.current.setFilterLogicOperator(S)},[i]),P=h.useCallback(()=>{let S;if(g&&typeof g=="function"){const V=g({currentFilters:l?.items||[],columns:u});if(V===null)return null;S=u.find(({field:D})=>D===V)}else S=u.find(V=>{var D;return(D=V.filterOperators)==null?void 0:D.length});return S?zh(S):null},[l?.items,u,g]),L=h.useCallback(()=>{if(g===void 0||typeof g!="function")return P();const S=l.items.length?l.items:[P()].filter(Boolean),V=g({currentFilters:S,columns:u});if(V===null)return null;const D=u.find(({field:w})=>w===V);return D?zh(D):null},[l.items,u,g,P]),T=h.useMemo(()=>l.items.length?l.items:(d.current||(d.current=P()),d.current?[d.current]:[]),[l.items,P]),I=T.length>1,R=()=>{const S=L();S&&i.current.upsertFilterItems([...T,S])},N=h.useCallback(S=>{const V=T.length===1;i.current.deleteFilterItem(S),V&&i.current.hideFilterPanel()},[i,T.length]),F=()=>{T.length===1&&T[0].value===void 0&&(i.current.deleteFilterItem(T[0]),i.current.hideFilterPanel()),i.current.setFilterModel(j({},l,{items:[]}))};return h.useEffect(()=>{f.length>0&&l.logicOperator&&!f.includes(l.logicOperator)&&C(f[0])},[f,C,l.logicOperator]),h.useEffect(()=>{T.length>0&&c.current.focus()},[T.length]),r.jsxs(sx,j({ref:n},y,{children:[r.jsx(rx,{children:T.map((S,V)=>r.jsx(JT,j({item:S,applyFilterChanges:b,deleteFilter:N,hasMultipleFilters:I,showMultiFilterOperators:V>0,multiFilterOperator:l.logicOperator,disableMultiFilterOperator:V!==1,applyMultiFilterOperatorChanges:C,focusElementRef:V===T.length-1?c:null,logicOperators:f,columnsSort:p},x),S.id==null?V:S.id))}),!a.disableMultipleColumnsFiltering&&!(m&&v)?r.jsxs(ox,{children:[m?r.jsx("span",{}):r.jsx(a.slots.baseButton,j({onClick:R,startIcon:r.jsx(a.slots.filterPanelAddIcon,{})},(o=a.slotProps)==null?void 0:o.baseButton,{children:i.current.getLocaleText("filterPanelAddFilter")})),v?null:r.jsx(a.slots.baseButton,j({onClick:F,startIcon:r.jsx(a.slots.filterPanelRemoveAllIcon,{})},(s=a.slotProps)==null?void 0:s.baseButton,{children:i.current.getLocaleText("filterPanelRemoveAll")}))]}):null]}))}),cE=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function ix(e){const{item:t,applyValue:n,type:o,apiRef:s,focusElementRef:i,color:a,error:l,helperText:u,size:c,variant:d}=e,f=le(e,cE),p={color:a,error:l,helperText:u,size:c,variant:d},[x,g]=h.useState(t.value||[]),m=mt(),v=fe();h.useEffect(()=>{var b;const C=(b=t.value)!=null?b:[];g(C.map(String))},[t.value]);const y=h.useCallback((b,C)=>{g(C.map(String)),n(j({},t,{value:[...C]}))},[n,t]);return r.jsx(qf,j({multiple:!0,freeSolo:!0,options:[],filterOptions:(b,C)=>{const{inputValue:P}=C;return P==null||P===""?[]:[P]},id:m,value:x,onChange:y,renderTags:(b,C)=>b.map((P,L)=>r.jsx(v.slots.baseChip,j({variant:"outlined",size:"small",label:P},C({index:L})))),renderInput:b=>{var C;return r.jsx(v.slots.baseTextField,j({},b,{label:s.current.getLocaleText("filterPanelInputLabel"),placeholder:s.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},b.InputLabelProps,{shrink:!0}),inputRef:i,type:o||"text"},p,(C=v.slotProps)==null?void 0:C.baseTextField))}},f))}const uE=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant","getOptionLabel","getOptionValue"],dE=vy();function hE(e){var t,n;const{item:o,applyValue:s,apiRef:i,focusElementRef:a,color:l,error:u,helperText:c,size:d,variant:f="standard",getOptionLabel:p,getOptionValue:x}=e,g=le(e,uE),m={color:l,error:u,helperText:c,size:d,variant:f},v=mt(),y=fe();let b=null;if(o.field){const F=i.current.getColumn(o.field);Or(F)&&(b=F)}const C=x||((t=b)==null?void 0:t.getOptionValue),P=p||((n=b)==null?void 0:n.getOptionLabel),L=h.useCallback((F,S)=>C(F)===C(S),[C]),T=h.useMemo(()=>{var F;return(F=b)!=null&&F.valueOptions?typeof b.valueOptions=="function"?b.valueOptions({field:b.field}):b.valueOptions:[]},[b]),I=h.useMemo(()=>T?.map(C),[T,C]),R=h.useMemo(()=>Array.isArray(o.value)?T!==void 0?o.value.map(S=>I?.findIndex(V=>V===S)).filter(S=>S>=0).map(S=>T[S]):o.value:[],[o.value,T,I]);h.useEffect(()=>{(!Array.isArray(o.value)||R.length!==o.value.length)&&s(j({},o,{value:R.map(C)}))},[o,R,s,C]);const N=h.useCallback((F,S)=>{s(j({},o,{value:S.map(C)}))},[s,o,C]);return r.jsx(qf,j({multiple:!0,options:T,isOptionEqualToValue:L,filterOptions:dE,id:v,value:R,onChange:N,getOptionLabel:P,renderTags:(F,S)=>F.map((V,D)=>r.jsx(y.slots.baseChip,j({variant:"outlined",size:"small",label:P(V)},S({index:D})))),renderInput:F=>{var S;return r.jsx(y.slots.baseTextField,j({},F,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:j({},F.InputLabelProps,{shrink:!0}),inputRef:a,type:"singleSelect"},m,(S=y.slotProps)==null?void 0:S.baseTextField))}},g))}const fE=["hideMenu","options"],pE=["hideMenu","options"];function mE(e){const t=Be(),{hideMenu:n,options:o}=e,s=le(e,fE);return r.jsx(de,j({onClick:()=>{t.current.exportDataAsCsv(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportCSV")}))}function gE(e){const t=Be(),{hideMenu:n,options:o}=e,s=le(e,pE);return r.jsx(de,j({onClick:()=>{t.current.exportDataAsPrint(o),n?.()}},s,{children:t.current.getLocaleText("toolbarExportPrint")}))}const xE=["className","selectedRowCount"],yE=e=>{const{classes:t}=e;return Te({root:["selectedRowCount"]},He,t)},bE=Pt("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),vE=h.forwardRef(function(t,n){const{className:o,selectedRowCount:s}=t,i=le(t,xE),a=Be(),l=fe(),u=yE(l),c=a.current.getLocaleText("footerRowSelected")(s);return r.jsx(bE,j({ref:n,className:$e(u.root,o),ownerState:l},i,{children:c}))}),CE=h.forwardRef(function(t,n){var o,s;const i=Be(),a=fe(),l=se(i,U1),u=se(i,pI),c=se(i,Tg),d=!a.hideFooterSelectedRowCount&&u>0?r.jsx(vE,{selectedRowCount:u}):r.jsx("div",{}),f=!a.hideFooterRowCount&&!a.pagination?r.jsx(a.slots.footerRowCount,j({},(o=a.slotProps)==null?void 0:o.footerRowCount,{rowCount:l,visibleRowCount:c})):null,p=a.pagination&&!a.hideFooterPagination&&a.slots.pagination&&r.jsx(a.slots.pagination,j({},(s=a.slotProps)==null?void 0:s.pagination));return r.jsxs(Pk,j({ref:n},t,{children:[d,f,p]}))});function wE(){var e,t;const n=fe();return r.jsxs(h.Fragment,{children:[r.jsx(n.slots.preferencesPanel,j({},(e=n.slotProps)==null?void 0:e.preferencesPanel)),n.slots.toolbar&&r.jsx(n.slots.toolbar,j({},(t=n.slotProps)==null?void 0:t.toolbar))]})}const jE=h.forwardRef(function(t,n){return r.jsx(xu,j({ref:n},t,{children:r.jsx(Ue,{})}))}),SE=h.forwardRef(function(t,n){const s=Be().current.getLocaleText("noRowsLabel");return r.jsx(xu,j({ref:n},t,{children:s}))}),PE=Xe(Cy)(({theme:e})=>({[`& .${Bu.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${Bu.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),kE=h.forwardRef(function(t,n){const o=Be(),s=fe(),i=se(o,nn),a=se(o,uo),l=h.useMemo(()=>Math.floor(a/(i.pageSize||1)),[a,i.pageSize]),u=h.useCallback(p=>{const x=Number(p.target.value);o.current.setPageSize(x)},[o]),c=h.useCallback((p,x)=>{o.current.setPage(x)},[o]),f=(p=>{for(let x=0;x<s.pageSizeOptions.length;x+=1){const g=s.pageSizeOptions[x];if(typeof g=="number"){if(g===p)return!0}else if(g.value===p)return!0}return!1})(i.pageSize)?s.pageSizeOptions:[];return r.jsx(PE,j({ref:n,component:"div",count:a,page:i.page<=l?i.page:l,rowsPerPageOptions:f,rowsPerPage:i.pageSize,onPageChange:c,onRowsPerPageChange:u},o.current.getLocaleText("MuiTablePagination"),t))}),IE=["className","rowCount","visibleRowCount"],TE=e=>{const{classes:t}=e;return Te({root:["rowCount"]},He,t)},EE=Pt("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)})),AE=h.forwardRef(function(t,n){const{className:o,rowCount:s,visibleRowCount:i}=t,a=le(t,IE),l=Be(),u=fe(),c=TE(u);if(s===0)return null;const d=i<s?l.current.getLocaleText("footerTotalVisibleRows")(i,s):s.toLocaleString();return r.jsxs(EE,j({ref:n,className:$e(c.root,o),ownerState:u},a,{children:[l.current.getLocaleText("footerTotalRows")," ",d]}))}),Ni=(e,t)=>{let n,o;return t.pagination&&t.paginationMode==="client"?(o=vu(e),n=fI(e)):(n=gr(e),n.length===0?o=null:o={firstRowIndex:0,lastRowIndex:n.length-1}),{rows:n,range:o}},qr=(e,t)=>{const n=Ni(e,t);return h.useMemo(()=>({rows:n.rows,range:n.range}),[n.rows,n.range])},tc={current:null};function Is(e){return e.isInternal=!0,e}function Vi(e){return e!==void 0&&e.isInternal===!0}function ME(e){return Is((t,n)=>{const o=e(t,n);return o&&(s=>o(s.value,s.row,n,tc.current))})}function Ts(e){return e.map(t=>j({},t,{getApplyFilterFn:ME(t.getApplyFilterFnV7),getApplyFilterFnV7:Is(t.getApplyFilterFnV7)}))}function ax(e){return Is((t,n,o)=>{const s=e(t,n,o);return s&&(i=>s(i.value,i.row,n,o))})}function lx(e){return{current:e.current.getPublicApi()}}let Vo;function RE(){if(Vo!==void 0)return Vo;try{Vo=new Function("return true")()}catch{Vo=!1}return Vo}const nc=(e,t)=>{const n=j({},e);if(n.id==null&&(n.id=Math.round(Math.random()*1e5)),n.operator==null){const o=ko(t)[n.field];n.operator=o&&o.filterOperators[0].value}return n},DE=Dn(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),FE=Dn("MUI: The `id` field is required on `filterModel.items` when you use multiple filters.","error"),OE=Dn("MUI: The `operator` field is required on `filterModel.items`, one or more of your filtering item has no `operator` provided.","error"),cx=(e,t,n)=>{const o=e.items.length>1;let s;o&&t?(DE(),s=[e.items[0]]):s=e.items;const i=o&&s.some(l=>l.id==null),a=s.some(l=>l.operator==null);return i&&FE(),a&&OE(),a||i?j({},e,{items:s.map(l=>nc(l,n))}):e.items!==s?j({},e,{items:s}):e},Gh=(e,t,n)=>o=>j({},o,{filterModel:cx(e,t,n)}),or=e=>typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,ux=(e,t)=>{if(!e.field||!e.operator)return null;const n=t.current.getColumn(e.field);if(!n)return null;let o;if(n.valueParser){var s;const x=n.valueParser;o=Array.isArray(e.value)?(s=e.value)==null?void 0:s.map(g=>x(g)):x(e.value)}else o=e.value;const{ignoreDiacritics:i}=t.current.rootProps;i&&(o=or(o));const a=j({},e,{value:o}),l=n.filterOperators;if(!(l!=null&&l.length))throw new Error(`MUI: No filter operators found for column '${n.field}'.`);const u=l.find(x=>x.value===a.operator);if(!u)throw new Error(`MUI: No filter operator found for column '${n.field}' and operator value '${a.operator}'.`);const c=!Vi(u.getApplyFilterFn),d=!Vi(u.getApplyFilterFnV7),f=lx(t);if(u.getApplyFilterFnV7&&!(c&&!d)){const x=u.getApplyFilterFnV7(a,n);return typeof x!="function"?null:{v7:!0,item:a,fn:g=>{let m=t.current.getRowValue(g,n);return i&&(m=or(m)),x(m,g,n,f)}}}const p=u.getApplyFilterFn(a,n);return typeof p!="function"?null:{v7:!1,item:a,fn:x=>{const g=t.current.getCellParams(x,a.field);tc.current=f,i&&(g.value=or(g.value));const m=p(g);return tc.current=null,m}}};let Uh=1;const LE=(e,t,n)=>{const{items:o}=e,s=o.map(l=>ux(l,t)).filter(l=>!!l);if(s.length===0)return null;if(n||!RE())return(l,u)=>{const c={};for(let d=0;d<s.length;d+=1){const f=s[d];(!u||u(f.item.field))&&(c[f.item.id]=f.v7?f.fn(l):f.fn(t.current.getRowId(l)))}return c};const i=new Function("getRowId","appliers","row","shouldApplyFilter",`"use strict";
${s.map((l,u)=>`const shouldApply${u} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(l.item.field)});`).join(`
`)}

const result$$ = {
${s.map((l,u)=>`  ${JSON.stringify(String(l.item.id))}: !shouldApply${u}
    ? false
    : ${l.v7?`appliers[${u}].fn(row)`:`appliers[${u}].fn(getRowId(row))`},`).join(`
`)}
};

return result$$;`.replaceAll("$$",String(Uh)));return Uh+=1,(l,u)=>i(t.current.getRowId,s,l,u)},_E=(e,t)=>{var n,o,s;const i=(n=(o=e.quickFilterValues)==null?void 0:o.filter(Boolean))!=null?n:[];if(i.length===0)return null;const l=((s=e.quickFilterExcludeHiddenColumns)!=null?s:!1)?la(t):Wn(t),u=[],{ignoreDiacritics:c}=t.current.rootProps,d=lx(t);return l.forEach(f=>{const p=t.current.getColumn(f),x=p?.getApplyQuickFilterFn,g=p?.getApplyQuickFilterFnV7,m=!Vi(x),v=!Vi(g);g&&!(m&&!v)?u.push({column:p,appliers:i.map(y=>{const b=c?or(y):y;return{v7:!0,fn:g(b,p,d)}})}):x&&u.push({column:p,appliers:i.map(y=>{const b=c?or(y):y;return{v7:!1,fn:x(b,p,d)}})})}),function(p,x){const g={},m={};e:for(let y=0;y<i.length;y+=1){const b=i[y];for(let C=0;C<u.length;C+=1){const{column:P,appliers:L}=u[C],{field:T}=P;if(x&&!x(T))continue;const I=L[y];let R=t.current.getRowValue(p,P);if(I.fn!==null)if(I.v7){if(c&&(R=or(R)),I.fn(R,p,P,d)){g[b]=!0;continue e}}else{var v;const N=(v=m[T])!=null?v:t.current.getCellParams(t.current.getRowId(p),T);if(c&&(N.value=or(N.value)),m[T]=N,I.fn(N)){g[b]=!0;continue e}}}g[b]=!1}return g}},$E=(e,t,n)=>{const o=LE(e,t,n),s=_E(e,t);return function(a,l,u){var c,d;u.passingFilterItems=(c=o?.(a,l))!=null?c:null,u.passingQuickFilterValues=(d=s?.(a,l))!=null?d:null}},Wh=e=>e!=null,NE=(e,t,n)=>(e.cleanedFilterItems||(e.cleanedFilterItems=n.filter(o=>ux(o,t)!==null)),e.cleanedFilterItems),VE=(e,t,n,o,s)=>{const i=NE(s,o,n.items),a=e.filter(Wh),l=t.filter(Wh);if(a.length>0){var u;const d=p=>a.some(x=>x[p.id]);if(((u=n.logicOperator)!=null?u:cs().logicOperator)===Vt.And){if(!i.every(d))return!1}else if(!i.some(d))return!1}if(l.length>0&&n.quickFilterValues!=null){var c;const d=p=>l.some(x=>x[p]);if(((c=n.quickFilterLogicOperator)!=null?c:cs().quickFilterLogicOperator)===Vt.And){if(!n.quickFilterValues.every(d))return!1}else if(!n.quickFilterValues.some(d))return!1}return!0},qh=Is(e=>{if(!e)return null;const t=new RegExp(ui(e),"i");return(n,o,s,i)=>{let a=i.current.getRowFormattedValue(o,s);return i.current.ignoreDiacritics&&(a=or(a)),a!=null?t.test(a.toString()):!1}}),BE=(e=!1)=>Ts([{value:"contains",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(ui(n),"i");return s=>s!=null?o.test(String(s)):!1},InputComponent:Cn},{value:"equals",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?o.compare(n,s.toString())===0:!1},InputComponent:Cn},{value:"startsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`^${ui(n)}.*$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:Cn},{value:"endsWith",getApplyFilterFnV7:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(`.*${ui(n)}$`,"i");return s=>s!=null?o.test(s.toString()):!1},InputComponent:Cn},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t===""||t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!==""&&t!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:t=>{if(!Array.isArray(t.value)||t.value.length===0)return null;const n=e?t.value:t.value.map(s=>s.trim()),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return s=>s!=null?n.some(i=>o.compare(i,s.toString()||"")===0):!1},InputComponent:ix}]),pn={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:wI,type:"string",align:"left",filterOperators:BE(),renderEditCell:KP,getApplyQuickFilterFn:ax(qh),getApplyQuickFilterFnV7:qh},HE=()=>Ts([{value:"is",getApplyFilterFnV7:e=>{if(!e.value)return null;const t=e.value==="true";return n=>!!n===t},InputComponent:iE}]);function zE({value:e,api:t}){return e?t.getLocaleText("booleanCellTrueLabel"):t.getLocaleText("booleanCellFalseLabel")}const GE=e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}},dx=j({},pn,{type:"boolean",align:"center",headerAlign:"center",renderCell:OP,renderEditCell:NP,sortComparator:Jg,valueFormatter:zE,filterOperators:HE(),getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,aggregable:!1,pastedValueParser:e=>GE(e)}),Xn="__check__",Eo=j({},dx,{field:Xn,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,valueGetter:e=>$i(e.api.state,e.api.instanceId)[e.id]!==void 0,renderHeader:e=>r.jsx(LI,j({},e)),renderCell:e=>r.jsx(DI,j({},e))}),ma="actions",UE=j({},pn,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:fk,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0}),Su="__detail_panel_toggle__",Ot=e=>e.editRows,WE=["selected","hovered","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","isLastVisible","focusedCellColumnIndexNotInRange","isNotVisible","focusedCell","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"],qE=e=>{const{editable:t,editing:n,selected:o,isLastVisible:s,rowHeight:i,classes:a}=e;return Te({root:["row",o&&"selected",t&&"row--editable",n&&"row--editing",s&&"row--lastVisible",i==="auto"&&"row--dynamicHeight"]},He,a)};function KE({width:e}){if(!e)return null;const t={width:e};return r.jsx("div",{className:`${H.cell} ${H.withBorderColor}`,style:t})}const QE=h.forwardRef(function(t,n){const{selected:o,hovered:s,rowId:i,row:a,index:l,style:u,position:c,rowHeight:d,className:f,visibleColumns:p,renderedColumns:x,containerWidth:g,firstColumnToRender:m,isLastVisible:v=!1,focusedCellColumnIndexNotInRange:y,isNotVisible:b,focusedCell:C,onClick:P,onDoubleClick:L,onMouseEnter:T,onMouseLeave:I,onMouseOut:R,onMouseOver:N}=t,F=le(t,WE),S=Be(),V=h.useRef(null),D=fe(),w=qr(S,D),E=se(S,uu),M=se(S,tn),$=se(S,da),_=se(S,Ss),O=se(S,Ot),B=Hr(V,n),z=l+_+2,G={selected:o,isLastVisible:v,classes:D.classes,editing:S.current.getRowMode(i)===Ze.Edit,editable:D.editMode===Mn.Row,rowHeight:d},J=qE(G);h.useLayoutEffect(()=>{d==="auto"&&V.current&&typeof ResizeObserver>"u"&&S.current.unstable_storeRowHeightMeasurement(i,V.current.clientHeight,c)},[S,d,i,c]),h.useLayoutEffect(()=>{if(w.range){const _e=S.current.getRowIndexRelativeToVisibleRows(i);_e!=null&&S.current.unstable_setLastMeasuredRowIndex(_e)}const oe=V.current;if(!oe||d!=="auto"||typeof ResizeObserver>"u")return;const Ce=new ResizeObserver(_e=>{const[st]=_e,an=st.borderBoxSize&&st.borderBoxSize.length>0?st.borderBoxSize[0].blockSize:st.contentRect.height;S.current.unstable_storeRowHeightMeasurement(i,an,c)});return Ce.observe(oe),()=>Ce.disconnect()},[S,w.range,l,d,i,c]);const ee=h.useCallback((oe,he)=>Ce=>{Ps(Ce)||S.current.getRow(i)&&(S.current.publishEvent(oe,S.current.getRowParams(i),Ce),he&&he(Ce))},[S,i]),te=h.useCallback(oe=>{const he=bP(oe.target,H.cell),Ce=he?.getAttribute("data-field");if(Ce){if(Ce===Eo.field||Ce===Su||Ce==="__reorder__"||S.current.getCellMode(i,Ce)===Ke.Edit)return;const _e=S.current.getColumn(Ce);if(_e?.type===ma)return}ee("rowClick",P)(oe)},[S,P,ee,i]),{slots:ve,slotProps:W,disableColumnReorder:Q}=D,ie=ve.cell===Zl?Zl:EP,X=D.rowReordering,ne=(oe,he)=>{var Ce,_e;const st=Q&&oe.disableReorder||!X&&!!M.length&&$>1&&Object.keys(O).length>0,an=(Ce=(_e=O[i])==null?void 0:_e[oe.field])!=null?Ce:null;let bn=!1;return y!==void 0&&p[y].field===oe.field&&(bn=!0),r.jsx(ie,j({column:oe,width:he.width,rowId:i,height:d,showRightBorder:he.showRightBorder,align:oe.align||"left",colIndex:he.indexRelativeToAllColumns,colSpan:he.colSpan,disableDragEvents:st,editCellState:an,isNotVisible:bn},W?.cell),oe.field)},je=se(S,()=>j({},S.current.unstable_getRowInternalSizes(i)),cu);let Z=d;if(Z==="auto"&&je){let oe=0;const he=Object.entries(je).reduce((Ce,[_e,st])=>/^base[A-Z]/.test(_e)?(oe+=1,st>Ce?st:Ce):Ce,0);he>0&&oe>1&&(Z=he)}const xe=h.useMemo(()=>{if(b)return{opacity:0,width:0,height:0};const oe=j({},u,{maxHeight:d==="auto"?"none":d,minHeight:Z});if(je!=null&&je.spacingTop){const he=D.rowSpacingType==="border"?"borderTopWidth":"marginTop";oe[he]=je.spacingTop}if(je!=null&&je.spacingBottom){const he=D.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let Ce=oe[he];typeof Ce!="number"&&(Ce=parseInt(Ce||"0",10)),Ce+=je.spacingBottom,oe[he]=Ce}return oe},[b,d,u,Z,je,D.rowSpacingType]),me=S.current.unstable_applyPipeProcessors("rowClassName",[],i);if(typeof D.getRowClassName=="function"){var Pe;const oe=l-(((Pe=w.range)==null?void 0:Pe.firstRowIndex)||0),he=j({},S.current.getRowParams(i),{isFirstVisible:oe===0,isLastVisible:oe===w.rows.length-1,indexRelativeToCurrentPage:oe});me.push(D.getRowClassName(he))}const be=iI(1e4,20,80),Ae=S.current.getRowNode(i);if(!Ae)return null;const We=Ae.type,Ge=[];for(let oe=0;oe<x.length;oe+=1){const he=x[oe];let Ce=m+oe;y!==void 0&&C&&(p[y].field===he.field?Ce=y:Ce-=1);const _e=S.current.unstable_getCellColSpanInfo(i,Ce);if(_e&&!_e.spannedByColSpan)if(We!=="skeletonRow"){const{colSpan:st,width:an}=_e.cellProps,bn={width:an,colSpan:st,showRightBorder:D.showCellVerticalBorder,indexRelativeToAllColumns:Ce};Ge.push(ne(he,bn))}else{const{width:st}=_e.cellProps,an=Math.round(be());Ge.push(r.jsx(ve.skeletonCell,{width:st,contentWidth:an,field:he.field,align:he.align},he.field))}}const xt=g-E,Ie=a?{onClick:te,onDoubleClick:ee("rowDoubleClick",L),onMouseEnter:ee("rowMouseEnter",T),onMouseLeave:ee("rowMouseLeave",I),onMouseOut:ee("rowMouseOut",R),onMouseOver:ee("rowMouseOver",N)}:null;return r.jsxs("div",j({ref:B,"data-id":i,"data-rowindex":l,role:"row",className:$e(...me,J.root,f,s&&"Mui-hovered"),"aria-rowindex":z,"aria-selected":o,style:xe},Ie,F,{children:[Ge,xt>0&&r.jsx(KE,{width:xt})]}))}),YE=pa(QE);function XE({privateApiRef:e,props:t,children:n}){const o=h.useRef(e.current.getPublicApi());return r.jsx(xg.Provider,{value:t,children:r.jsx(yg.Provider,{value:e,children:r.jsx(gg.Provider,{value:o,children:n})})})}const JE=oI()&&window.localStorage.getItem("DEBUG")!=null,qo=()=>{},ZE={debug:qo,info:qo,warn:qo,error:qo},Kh=["debug","info","warn","error"];function Qh(e,t,n=console){const o=Kh.indexOf(t);if(o===-1)throw new Error(`MUI: Log level ${t} not recognized.`);return Kh.reduce((i,a,l)=>(l>=o?i[a]=(...u)=>{const[c,...d]=u;n[a](`MUI: ${e} - ${c}`,...d)}:i[a]=qo,i),{})}const e2=(e,t)=>{const n=h.useCallback(o=>JE?Qh(o,"debug",t.logger):t.logLevel?Qh(o,t.logLevel.toString(),t.logger):ZE,[t.logLevel,t.logger]);De(e,{getLogger:n},"private")};class Pu{static create(t){return new Pu(t)}constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{this.value=n,this.listeners.forEach(o=>o(n))},this.value=t,this.listeners=new Set}}class t2{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let s=this.events[t];s||(s={highPriority:new Map,regular:new Map},this.events[t]=s),o.isFirst?s.highPriority.set(n,!0):s.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const s=Array.from(o.highPriority.keys()),i=Array.from(o.regular.keys());for(let a=s.length-1;a>=0;a-=1){const l=s[a];o.highPriority.has(l)&&l.apply(this,n)}for(let a=0;a<i.length;a+=1){const l=i[a];o.regular.has(l)&&l.apply(this,n)}}once(t,n){const o=this;this.on(t,function s(...i){o.removeListener(t,s),n.apply(o,i)})}}const hx=Symbol("mui.api_private"),n2=e=>e.isPropagationStopped!==void 0;let Yh=0;function r2(e){var t;const n=(t=e.current)==null?void 0:t[hx];if(n)return n;const o={},s={state:o,store:Pu.create(o),instanceId:{id:Yh}};return Yh+=1,s.getPublicApi=()=>e.current,s.register=(i,a)=>{Object.keys(a).forEach(l=>{const u=a[l],c=s[l];if(c?.spying===!0?c.target=u:s[l]=u,i==="public"){const d=e.current,f=d[l];f?.spying===!0?f.target=u:d[l]=u}})},s.register("private",{caches:{},eventManager:new t2}),s}function o2(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[hx]:e.current}}function s2(e,t){const n=h.useRef(),o=h.useRef();o.current||(o.current=r2(n)),n.current||(n.current=o2(o));const s=h.useCallback((...a)=>{const[l,u,c={}]=a;if(c.defaultMuiPrevented=!1,n2(c)&&c.isPropagationStopped())return;const d=t.signature===kn.DataGridPro?{api:o.current.getPublicApi()}:{};o.current.eventManager.emit(l,u,c,d)},[o,t.signature]),i=h.useCallback((a,l,u)=>{o.current.eventManager.on(a,l,u);const c=o.current;return()=>{c.eventManager.removeListener(a,l)}},[o]);return De(o,{subscribeEvent:i,publishEvent:s},"public"),h.useImperativeHandle(e,()=>n.current,[n]),h.useEffect(()=>{const a=o.current;return()=>{a.publishEvent("unmount")}},[o]),o}const i2=(e,t)=>{const n=h.useCallback(o=>{if(t.localeText[o]==null)throw new Error(`Missing translation for key ${o}.`);return t.localeText[o]},[t.localeText]);e.current.register("public",{getLocaleText:n})},a2=e=>{const t=h.useRef({}),n=h.useRef(!1),o=h.useCallback(d=>{n.current||!d||(n.current=!0,Object.values(d.appliers).forEach(f=>{f()}),n.current=!1)},[]),s=h.useCallback((d,f,p)=>{t.current[d]||(t.current[d]={processors:new Map,appliers:{}});const x=t.current[d];return x.processors.get(f)!==p&&(x.processors.set(f,p),o(x)),()=>{t.current[d].processors.set(f,null)}},[o]),i=h.useCallback((d,f,p)=>(t.current[d]||(t.current[d]={processors:new Map,appliers:{}}),t.current[d].appliers[f]=p,()=>{const x=t.current[d].appliers,g=le(x,[f].map(ns));t.current[d].appliers=g}),[]),a=h.useCallback(d=>{const f=t.current[d];o(f)},[o]),l=h.useCallback((...d)=>{const[f,p,x]=d;return t.current[f]?Array.from(t.current[f].processors.values()).reduce((m,v)=>v?v(m,x):m,p):p},[]),u={registerPipeProcessor:s,registerPipeApplier:i,requestPipeProcessorsApplication:a},c={unstable_applyPipeProcessors:l};De(e,u,"private"),De(e,c,"public")},ut=(e,t,n)=>{const o=h.useRef(),s=h.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=h.useCallback(()=>{o.current=e.current.registerPipeProcessor(t,s.current,n)},[e,n,t]);ks(()=>{i()});const a=h.useRef(!0);h.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},ku=(e,t,n)=>{const o=h.useRef(),s=h.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=h.useCallback(()=>{o.current=e.current.registerPipeApplier(t,s.current,n)},[e,n,t]);ks(()=>{i()});const a=h.useRef(!0);h.useEffect(()=>(a.current?a.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])},Bi=(e,t,n,o)=>{const s=h.useCallback(()=>{e.current.registerStrategyProcessor(t,n,o)},[e,o,n,t]);ks(()=>{s()});const i=h.useRef(!0);h.useEffect(()=>{i.current?i.current=!1:s()},[s])},Vr="none",Xh={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree",visibleRowsLookupCreation:"rowTree"},l2=e=>{const t=h.useRef(new Map),n=h.useRef({}),o=h.useCallback((u,c,d)=>{const f=()=>{const g=n.current[c],m=le(g,[u].map(ns));n.current[c]=m};n.current[c]||(n.current[c]={});const p=n.current[c],x=p[u];return p[u]=d,!x||x===d||u===e.current.getActiveStrategy(Xh[c])&&e.current.publishEvent("activeStrategyProcessorChange",c),f},[e]),s=h.useCallback((u,c)=>{const d=e.current.getActiveStrategy(Xh[u]);if(d==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const f=n.current[u];if(!f||!f[d])throw new Error(`No processor found for processor "${u}" on strategy "${d}"`);const p=f[d];return p(c)},[e]),i=h.useCallback(u=>{var c;const f=Array.from(t.current.entries()).find(([,p])=>p.group!==u?!1:p.isAvailable());return(c=f?.[0])!=null?c:Vr},[]),a=h.useCallback((u,c,d)=>{t.current.set(c,{group:u,isAvailable:d}),e.current.publishEvent("strategyAvailabilityChange")},[e]);De(e,{registerStrategyProcessor:o,applyStrategyProcessor:s,getActiveStrategy:i,setStrategyAvailability:a},"private")},c2=(e,t)=>{const n=h.useRef({}),[,o]=h.useState(),s=h.useCallback(d=>{n.current[d.stateId]=d},[]),i=h.useCallback((d,f)=>{let p;if(Gg(d)?p=d(e.current.state):p=d,e.current.state===p)return!1;let x=!1;const g=[];if(Object.keys(n.current).forEach(m=>{const v=n.current[m],y=v.stateSelector(e.current.state,e.current.instanceId),b=v.stateSelector(p,e.current.instanceId);b!==y&&(g.push({stateId:v.stateId,hasPropChanged:b!==v.propModel}),v.propModel!==void 0&&b!==v.propModel&&(x=!0))}),g.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${g[0].stateId}, therefore, you're not allowed to update ${g.map(m=>m.stateId).join(", ")} in the same transaction.`);if(x||(e.current.state=p,e.current.publishEvent&&e.current.publishEvent("stateChange",p),e.current.store.update(p)),g.length===1){const{stateId:m,hasPropChanged:v}=g[0],y=n.current[m],b=y.stateSelector(p,e.current.instanceId);if(y.propOnChange&&v){const C=t.signature===kn.DataGridPro?{api:e.current,reason:f}:{reason:f};y.propOnChange(b,C)}x||e.current.publishEvent(y.changeEvent,b,{reason:f})}return!x},[e,t.signature]),a=h.useCallback((d,f,p)=>e.current.setState(x=>j({},x,{[d]:f(x[d])}),p),[e]),l=h.useCallback(()=>o(()=>e.current.state),[e]),u={setState:i,forceUpdate:l},c={updateControlState:a,registerControlState:s};De(e,u,"public"),De(e,c,"private")},u2=(e,t)=>{const n=s2(e,t);return e2(n,t),c2(n,t),a2(n),l2(n),i2(n,t),n.current.register("private",{rootProps:t}),n},Nt=(e,t,n)=>{const o=h.useRef(!1);o.current||(t.current.state=e(t.current.state,n,t),o.current=!0)},d2=/(\d+)-(\d+)-(\d+)/,h2=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Zr(e,t,n,o){if(!e.value)return null;const[s,i,a,l,u]=e.value.match(n?h2:d2).slice(1).map(Number),c=new Date(s,i-1,a,l||0,u||0).getTime();return d=>{if(!d)return!1;if(o)return t(d.getTime(),c);const p=new Date(d).setHours(n?d.getHours():0,n?d.getMinutes():0,0,0);return t(p,c)}}const fx=e=>Ts([{value:"is",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n===o,e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n!==o,e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n>o,e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n>=o,e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n<o,e,!e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFnV7:t=>Zr(t,(n,o)=>n<=o,e),InputComponent:Jr,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFnV7:()=>t=>t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>t=>t!=null,requiresFilterValue:!1}]);function px({value:e,columnType:t,rowId:n,field:o}){if(!(e instanceof Date))throw new Error([`MUI: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${n}, field: "${o}".`].join(`
`))}function f2({value:e,field:t,id:n}){return e?(px({value:e,columnType:"date",rowId:n,field:t}),e.toLocaleDateString()):""}function p2({value:e,field:t,id:n}){return e?(px({value:e,columnType:"dateTime",rowId:n,field:t}),e.toLocaleString()):""}const m2=j({},pn,{type:"date",sortComparator:Zg,valueFormatter:f2,filterOperators:fx(),renderEditCell:Lg,pastedValueParser:e=>new Date(e)}),g2=j({},pn,{type:"dateTime",sortComparator:Zg,valueFormatter:p2,filterOperators:fx(!0),renderEditCell:Lg,pastedValueParser:e=>new Date(e)}),er=e=>e==null?null:Number(e),Jh=Is(e=>e==null||Number.isNaN(e)||e===""?null:t=>er(t)===er(e)),x2=()=>Ts([{value:"=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>er(t)===e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>er(t)!==e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:er(t)>e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:er(t)>=e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:er(t)<e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFnV7:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:er(t)<=e.value,InputComponent:Cn,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFnV7:()=>e=>e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:e=>!Array.isArray(e.value)||e.value.length===0?null:t=>t!=null&&e.value.includes(Number(t)),InputComponent:ix,InputComponentProps:{type:"number"}}]),y2=j({},pn,{type:"number",align:"right",headerAlign:"right",sortComparator:Jg,valueParser:e=>e===""?null:Number(e),valueFormatter:({value:e})=>rI(e)?e.toLocaleString():e||"",filterOperators:x2(),getApplyQuickFilterFn:ax(Jh),getApplyQuickFilterFnV7:Jh}),eo=e=>e==null||!yu(e)?e:e.value,b2=()=>Ts([{value:"is",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>eo(t)===eo(e.value),InputComponent:Hh},{value:"not",getApplyFilterFnV7:e=>e.value==null||e.value===""?null:t=>eo(t)!==eo(e.value),InputComponent:Hh},{value:"isAnyOf",getApplyFilterFnV7:e=>{if(!Array.isArray(e.value)||e.value.length===0)return null;const t=e.value.map(eo);return n=>t.includes(eo(n))},InputComponent:hE}]),v2=e=>typeof e[0]=="object",C2=e=>yu(e)?e.value:e,w2=e=>yu(e)?e.label:String(e),j2=j({},pn,{type:"singleSelect",getOptionLabel:w2,getOptionValue:C2,valueFormatter(e){const{id:t,field:n,value:o,api:s}=e,i=e.api.getColumn(n);if(!Or(i))return"";let a;if(typeof i.valueOptions=="function"?a=i.valueOptions({id:t,row:t?s.getRow(t):null,field:n}):a=i.valueOptions,o==null)return"";if(!a)return o;if(!v2(a))return i.getOptionLabel(o);const l=a.find(u=>i.getOptionValue(u)===o);return l?i.getOptionLabel(l):""},renderEditCell:sk,filterOperators:b2(),pastedValueParser:(e,t)=>{const n=t.colDef,o=n.valueOptions,s=typeof o=="function"?o({field:n.field}):o||[],i=n.getOptionValue;if(s.find(l=>i(l)===e))return e}}),mx="__default__",S2=()=>({string:pn,number:y2,date:m2,dateTime:g2,boolean:dx,singleSelect:j2,[ma]:UE,[mx]:pn});function rc(e,t){if(typeof e=="string"){if(t.shouldAppendQuotes||t.escapeFormulas){const n=e.replace(/"/g,'""');return[t.delimiter,`
`,"\r",'"'].some(o=>e.includes(o))?`"${n}"`:t.escapeFormulas&&["=","+","-","@","	","\r"].includes(n[0])?`'${n}`:n}return e}return e}const gx=(e,t)=>{const{csvOptions:n,ignoreValueFormatter:o}=t;let s;if(o){var i;const l=e.colDef.type;if(l==="number")s=String(e.value);else if(l==="date"||l==="dateTime"){var a;s=(a=e.value)==null?void 0:a.toISOString()}else typeof((i=e.value)==null?void 0:i.toString)=="function"?s=e.value.toString():s=e.value}else s=e.formattedValue;return rc(s,n)};Dn(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);class oc{constructor(t){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=t}addValue(t){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),t==null?this.rowString+="":typeof this.options.sanitizeCellValue=="function"?this.rowString+=this.options.sanitizeCellValue(t,this.options.csvOptions):this.rowString+=t,this.isEmpty=!1}getRowString(){return this.rowString}}const P2=({id:e,columns:t,getCellParams:n,csvOptions:o,ignoreValueFormatter:s})=>{const i=new oc({csvOptions:o});return t.forEach(a=>{const l=n(e,a.field);i.addValue(gx(l,{ignoreValueFormatter:s,csvOptions:o}))}),i.getRowString()};function k2(e){const{columns:t,rowIds:n,csvOptions:o,ignoreValueFormatter:s,apiRef:i}=e,a=n.reduce((f,p)=>`${f}${P2({id:p,columns:t,getCellParams:i.current.getCellParams,ignoreValueFormatter:s,csvOptions:o})}\r
`,"").trim();if(!o.includeHeaders)return a;const l=t.filter(f=>f.field!==Eo.field),u=[];if(o.includeColumnGroupsHeaders){const f=i.current.unstable_getAllGroupDetails();let p=0;const x=l.reduce((g,m)=>{const v=i.current.unstable_getColumnGroupPath(m.field);return g[m.field]=v,p=Math.max(p,v.length),g},{});for(let g=0;g<p;g+=1){const m=new oc({csvOptions:o,sanitizeCellValue:rc});u.push(m),l.forEach(v=>{const y=(x[v.field]||[])[g],b=f[y];m.addValue(b?b.headerName||b.groupId:"")})}}const c=new oc({csvOptions:o,sanitizeCellValue:rc});return l.forEach(f=>{c.addValue(f.headerName||f.field)}),u.push(c),`${`${u.map(f=>f.getRowString()).join(`\r
`)}\r
`}${a}`.trim()}function Zh(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const n=document.createRange();n.selectNode(t);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function I2(e){navigator.clipboard?navigator.clipboard.writeText(e).catch(()=>{Zh(e)}):Zh(e)}function T2(e){var t;return!!((t=window.getSelection())!=null&&t.toString()||e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}const E2=(e,t)=>{const n=t.unstable_ignoreValueFormatterDuringExport,o=(typeof n=="object"?n?.clipboardExport:n)||!1,s=t.clipboardCopyCellDelimiter,i=h.useCallback(a=>{if(!((a.ctrlKey||a.metaKey)&&a.key==="c")||T2(a.target))return;let l="";if(e.current.getSelectedRows().size>0)l=e.current.getDataAsCsv({includeHeaders:!1,delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1});else{const c=Yt(e);if(c){const d=e.current.getCellParams(c.id,c.field);l=gx(d,{csvOptions:{delimiter:s,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:o})}}l=e.current.unstable_applyPipeProcessors("clipboardCopy",l),l&&(I2(l),e.current.publishEvent("clipboardCopy",l))},[e,o,s]);aI(e,e.current.rootElementRef,"keydown",i),tt(e,"clipboardCopy",t.onClipboardCopy)},A2=e=>j({},e,{columnMenu:{open:!1}}),M2=e=>{const t=kt(e,"useGridColumnMenu"),n=h.useCallback(a=>{e.current.setState(u=>u.columnMenu.open&&u.columnMenu.field===a?u:(t.debug("Opening Column Menu"),j({},u,{columnMenu:{open:!0,field:a}})))&&(e.current.hidePreferences(),e.current.forceUpdate())},[e,t]),o=h.useCallback(()=>{const a=Jl(e.current.state);if(a.field){const u=ko(e),c=hn(e),d=Wn(e);let f=a.field;if(u[f]||(f=d[0]),c[f]===!1){const p=d.filter(g=>g===f?!0:c[g]!==!1),x=p.indexOf(f);f=p[x+1]||p[x-1]}e.current.setColumnHeaderFocus(f)}e.current.setState(u=>!u.columnMenu.open&&u.columnMenu.field===void 0?u:(t.debug("Hiding Column Menu"),j({},u,{columnMenu:j({},u.columnMenu,{open:!1,field:void 0})})))&&e.current.forceUpdate()},[e,t]),s=h.useCallback(a=>{t.debug("Toggle Column Menu");const l=Jl(e.current.state);!l.open||l.field!==a?n(a):o()},[e,t,n,o]);De(e,{showColumnMenu:n,hideColumnMenu:o,toggleColumnMenu:s},"public"),pe(e,"columnResizeStart",o),pe(e,"virtualScrollerWheel",e.current.hideColumnMenu),pe(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)},xx=["maxWidth","minWidth","width","flex"];function R2({initialFreeSpace:e,totalFlexUnits:t,flexColumns:n}){const o=new Set(n.map(a=>a.field)),s={all:{},frozenFields:[],freeze:a=>{const l=s.all[a];l&&l.frozen!==!0&&(s.all[a].frozen=!0,s.frozenFields.push(a))}};function i(){if(s.frozenFields.length===o.size)return;const a={min:{},max:{}};let l=e,u=t,c=0;s.frozenFields.forEach(d=>{l-=s.all[d].computedWidth,u-=s.all[d].flex});for(let d=0;d<n.length;d+=1){const f=n[d];if(s.all[f.field]&&s.all[f.field].frozen===!0)continue;let x=l/u*f.flex;x<f.minWidth?(c+=f.minWidth-x,x=f.minWidth,a.min[f.field]=!0):x>f.maxWidth&&(c+=f.maxWidth-x,x=f.maxWidth,a.max[f.field]=!0),s.all[f.field]={frozen:!1,computedWidth:x,flex:f.flex}}c<0?Object.keys(a.max).forEach(d=>{s.freeze(d)}):c>0?Object.keys(a.min).forEach(d=>{s.freeze(d)}):n.forEach(({field:d})=>{s.freeze(d)}),i()}return i(),s.all}const sc=(e,t)=>{const n={};let o=0,s=0;const i=[];e.orderedFields.forEach(l=>{const u=j({},e.lookup[l]);if(e.columnVisibilityModel[l]===!1)u.computedWidth=0;else{let c;u.flex&&u.flex>0?(o+=u.flex,c=0,i.push(u)):c=wo(u.width||pn.width,u.minWidth||pn.minWidth,u.maxWidth||pn.maxWidth),s+=c,u.computedWidth=c}n[l]=u});const a=Math.max(t-s,0);if(o>0&&t>0){const l=R2({initialFreeSpace:a,totalFlexUnits:o,flexColumns:i});Object.keys(l).forEach(u=>{n[u].computedWidth=l[u].computedWidth})}return j({},e,{lookup:n})},D2=(e,t)=>{if(!t)return e;const{orderedFields:n=[],dimensions:o={}}=t,s=Object.keys(o);if(s.length===0&&n.length===0)return e;const i={},a=[];for(let d=0;d<n.length;d+=1){const f=n[d];e.lookup[f]&&(i[f]=!0,a.push(f))}const l=a.length===0?e.orderedFields:[...a,...e.orderedFields.filter(d=>!i[d])],u=j({},e.lookup);for(let d=0;d<s.length;d+=1){const f=s[d],p=j({},u[f],{hasBeenResized:!0});Object.entries(o[f]).forEach(([x,g])=>{p[x]=g===-1?1/0:g}),u[f]=p}return j({},e,{orderedFields:l,lookup:u})};function ef(e,t){let n=e[mx];return t&&e[t]&&(n=e[t]),n}const no=({apiRef:e,columnsToUpsert:t,initialState:n,columnTypes:o,columnVisibilityModel:s=hn(e),keepOnlyColumnsToUpsert:i=!1})=>{var a,l,u;const c=!e.current.state.columns;let d;if(c)d={orderedFields:[],lookup:{},columnVisibilityModel:s};else{const g=Fr(e.current.state);d={orderedFields:i?[]:[...g.orderedFields],lookup:j({},g.lookup),columnVisibilityModel:s}}let f={};i&&!c&&(f=Object.keys(d.lookup).reduce((g,m)=>j({},g,{[m]:!1}),{})),t.forEach(g=>{const{field:m}=g;f[m]=!0;let v=d.lookup[m];v==null?(v=j({},ef(o,g.type),{field:m,hasBeenResized:!1}),d.orderedFields.push(m)):i&&d.orderedFields.push(m),v&&v.type!==g.type&&(v=j({},ef(o,g.type),{field:m}));let y=v.hasBeenResized;xx.forEach(b=>{g[b]!==void 0&&(y=!0,g[b]===-1&&(g[b]=1/0))}),d.lookup[m]=j({},v,g,{hasBeenResized:y})}),i&&!c&&Object.keys(d.lookup).forEach(g=>{f[g]||delete d.lookup[g]});const p=e.current.unstable_applyPipeProcessors("hydrateColumns",d),x=D2(p,n);return sc(x,(a=(l=(u=e.current).getRootDimensions)==null||(l=l.call(u))==null?void 0:l.viewportInnerSize.width)!=null?a:0)},tf=e=>t=>j({},t,{columns:e});function ic({firstColumnToRender:e,apiRef:t,firstRowToRender:n,lastRowToRender:o,visibleRows:s}){let i=e;for(let a=n;a<o;a+=1)if(s[a]){const u=s[a].id,c=t.current.unstable_getCellColSpanInfo(u,e);c&&c.spannedByColSpan&&(i=c.leftVisibleCellIndex)}return i}function F2({firstColumnIndex:e,minColumnIndex:t,columnBuffer:n,firstRowToRender:o,lastRowToRender:s,apiRef:i,visibleRows:a}){const l=Math.max(e-n,t);return ic({firstColumnToRender:l,apiRef:i,firstRowToRender:o,lastRowToRender:s,visibleRows:a})}function Iu(e,t){const n=To(e),o=Ss(e);return Math.floor(t*n)*((o??0)+1)}const yx=S2(),O2=(e,t,n)=>{var o,s,i,a;const l=no({apiRef:n,columnTypes:yx,columnsToUpsert:t.columns,initialState:(o=t.initialState)==null?void 0:o.columns,columnVisibilityModel:(s=(i=t.columnVisibilityModel)!=null?i:(a=t.initialState)==null||(a=a.columns)==null?void 0:a.columnVisibilityModel)!=null?s:{},keepOnlyColumnsToUpsert:!0});return j({},e,{columns:l})};function L2(e,t){var n,o;const s=kt(e,"useGridColumns"),i=yx,a=h.useRef(t.columns),l=h.useRef(i);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:hn,changeEvent:"columnVisibilityModelChange"});const u=h.useCallback(w=>{s.debug("Updating columns state."),e.current.setState(tf(w)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",w.orderedFields)},[s,e]),c=h.useCallback(w=>ko(e)[w],[e]),d=h.useCallback(()=>Pn(e),[e]),f=h.useCallback(()=>jt(e),[e]),p=h.useCallback((w,E=!0)=>(E?jt(e):Pn(e)).findIndex($=>$.field===w),[e]),x=h.useCallback(w=>{const E=p(w);return Co(e)[E]},[e,p]),g=h.useCallback(w=>{hn(e)!==w&&(e.current.setState(M=>j({},M,{columns:no({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:w,keepOnlyColumnsToUpsert:!1})})),e.current.forceUpdate())},[e,i]),m=h.useCallback(w=>{const E=no({apiRef:e,columnTypes:i,columnsToUpsert:w,initialState:void 0,keepOnlyColumnsToUpsert:!1});u(E)},[e,u,i]),v=h.useCallback((w,E)=>{var M;const $=hn(e),_=(M=$[w])!=null?M:!0;if(E!==_){const O=j({},$,{[w]:E});e.current.setColumnVisibilityModel(O)}},[e]),y=h.useCallback(w=>Wn(e).findIndex(M=>M===w),[e]),b=h.useCallback((w,E)=>{const M=Wn(e),$=y(w);if($===E)return;s.debug(`Moving column ${w} to index ${E}`);const _=[...M],O=_.splice($,1)[0];_.splice(E,0,O),u(j({},Fr(e.current.state),{orderedFields:_}));const B={column:e.current.getColumn(w),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(w),oldIndex:$};e.current.publishEvent("columnIndexChange",B)},[e,s,u,y]),C=h.useCallback((w,E)=>{var M,$;s.debug(`Updating column ${w} width to ${E}`);const _=Fr(e.current.state),O=_.lookup[w],B=j({},O,{width:E,hasBeenResized:!0});u(sc(j({},_,{lookup:j({},_.lookup,{[w]:B})}),(M=($=e.current.getRootDimensions())==null?void 0:$.viewportInnerSize.width)!=null?M:0)),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(w),colDef:B,width:E})},[e,s,u]),P={getColumn:c,getAllColumns:d,getColumnIndex:p,getColumnPosition:x,getVisibleColumns:f,getColumnIndexRelativeToVisibleColumns:y,updateColumns:m,setColumnVisibilityModel:g,setColumnVisibility:v,setColumnWidth:C},L={setColumnIndex:b};De(e,P,"public"),De(e,L,t.signature===kn.DataGrid?"private":"public");const T=h.useCallback((w,E)=>{var M,$;const _={},O=hn(e);(!E.exportOnlyDirtyModels||t.columnVisibilityModel!=null||Object.keys((M=($=t.initialState)==null||($=$.columns)==null?void 0:$.columnVisibilityModel)!=null?M:{}).length>0||Object.keys(O).length>0)&&(_.columnVisibilityModel=O),_.orderedFields=Wn(e);const z=Pn(e),G={};return z.forEach(J=>{if(J.hasBeenResized){const ee={};xx.forEach(te=>{let ve=J[te];ve===1/0&&(ve=-1),ee[te]=ve}),G[J.field]=ee}}),Object.keys(G).length>0&&(_.dimensions=G),j({},w,{columns:_})},[e,t.columnVisibilityModel,(n=t.initialState)==null?void 0:n.columns]),I=h.useCallback((w,E)=>{var M;const $=(M=E.stateToRestore.columns)==null?void 0:M.columnVisibilityModel,_=E.stateToRestore.columns;if($==null&&_==null)return w;const O=no({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:_,columnVisibilityModel:$,keepOnlyColumnsToUpsert:!1});return e.current.setState(tf(O)),_!=null&&e.current.publishEvent("columnsChange",O.orderedFields),w},[e,i]),R=h.useCallback((w,E)=>{if(E===Nr.columns){var M;const $=t.slots.columnsPanel;return r.jsx($,j({},(M=t.slotProps)==null?void 0:M.columnsPanel))}return w},[t.slots.columnsPanel,(o=t.slotProps)==null?void 0:o.columnsPanel]),N=h.useCallback(w=>t.disableColumnSelector?w:[...w,"columnMenuColumnsItem"],[t.disableColumnSelector]);ut(e,"columnMenu",N),ut(e,"exportState",T),ut(e,"restoreState",I),ut(e,"preferencePanel",R);const F=h.useRef(null);pe(e,"viewportInnerSizeChange",w=>{F.current!==w.width&&(F.current=w.width,u(sc(Fr(e.current.state),w.width)))});const V=h.useCallback(()=>{s.info("Columns pipe processing have changed, regenerating the columns");const w=no({apiRef:e,columnTypes:i,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});u(w)},[e,s,u,i]);ku(e,"hydrateColumns",V);const D=h.useRef(!0);h.useEffect(()=>{if(D.current){D.current=!1;return}if(s.info(`GridColumns have changed, new length ${t.columns.length}`),a.current===t.columns&&l.current===i)return;const w=no({apiRef:e,columnTypes:i,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});a.current=t.columns,l.current=i,u(w)},[s,e,u,t.columns,i]),h.useEffect(()=>{t.columnVisibilityModel!==void 0&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)},[e,s,t.columnVisibilityModel])}const _2=.7,$2=1.3,bx={compact:_2,comfortable:$2,standard:1},N2=(e,t)=>j({},e,{density:{value:t.density,factor:bx[t.density]}}),V2=(e,t)=>{const n=kt(e,"useDensity"),o=h.useCallback(i=>{n.debug(`Set grid density to ${i}`),e.current.setState(a=>{const l=pu(a),u={value:i,factor:bx[i]};return Lr(l,u)?a:j({},a,{density:u})}),e.current.forceUpdate()},[n,e]);h.useEffect(()=>{e.current.setDensity(t.density)},[e,t.density]),De(e,{setDensity:o},"public")};function B2(e,t="csv",n=document.title||"untitled"){const o=`${n}.${t}`;if("download"in HTMLAnchorElement.prototype){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=o,i.click(),setTimeout(()=>{URL.revokeObjectURL(s)});return}throw new Error("MUI: exportAs not supported")}const vx=({apiRef:e,options:t})=>{const n=Pn(e);return t.fields?t.fields.reduce((s,i)=>{const a=n.find(l=>l.field===i);return a&&s.push(a),s},[]):(t.allColumns?n:jt(e)).filter(s=>!s.disableExport)},H2=({apiRef:e})=>{var t,n;const o=tP(e),s=dn(e),i=e.current.getSelectedRows(),a=o.filter(d=>s[d].type!=="footer"),l=Io(e),u=(l==null||(t=l.top)==null?void 0:t.map(d=>d.id))||[],c=(l==null||(n=l.bottom)==null?void 0:n.map(d=>d.id))||[];return a.unshift(...u),a.push(...c),i.size>0?a.filter(d=>i.has(d)):a},z2=(e,t)=>{const n=kt(e,"useGridCsvExport"),o=t.unstable_ignoreValueFormatterDuringExport,s=(typeof o=="object"?o?.csvExport:o)||!1,i=h.useCallback((c={})=>{var d,f,p,x,g;n.debug("Get data as CSV");const m=vx({apiRef:e,options:c}),y=((d=c.getRowsToExport)!=null?d:H2)({apiRef:e});return k2({columns:m,rowIds:y,csvOptions:{delimiter:c.delimiter||",",shouldAppendQuotes:(f=c.shouldAppendQuotes)!=null?f:!0,includeHeaders:(p=c.includeHeaders)!=null?p:!0,includeColumnGroupsHeaders:(x=c.includeColumnGroupsHeaders)!=null?x:!0,escapeFormulas:(g=c.escapeFormulas)!=null?g:!0},ignoreValueFormatter:s,apiRef:e})},[n,e,s]),a=h.useCallback(c=>{n.debug("Export data as CSV");const d=i(c),f=new Blob([c!=null&&c.utf8WithBom?new Uint8Array([239,187,191]):"",d],{type:"text/csv"});B2(f,"csv",c?.fileName)},[n,i]);De(e,{getDataAsCsv:i,exportDataAsCsv:a},"public");const u=h.useCallback((c,d)=>{var f;return(f=d.csvOptions)!=null&&f.disableToolbarButton?c:[...c,{component:r.jsx(mE,{options:d.csvOptions}),componentName:"csvExport"}]},[]);ut(e,"exportMenu",u)},di=(e,t,n)=>{var o;let s=e.paginationModel;const i=e.rowCount,a=(o=n?.pageSize)!=null?o:s.pageSize,l=Wg(i,a);n&&(n?.page!==s.page||n?.pageSize!==s.pageSize)&&(s=n);const u=uI(s.page,l);return u!==s.page&&(s=j({},s,{page:u})),Kg(s.pageSize,t),s},G2=(e,t)=>{var n;const o=kt(e,"useGridPaginationModel"),s=se(e,To),i=Math.floor(t.rowHeight*s);e.current.registerControlState({stateId:"paginationModel",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:nn,changeEvent:"paginationModelChange"});const a=h.useCallback(m=>{const v=nn(e);m!==v.page&&(o.debug(`Setting page to ${m}`),e.current.setPaginationModel({page:m,pageSize:v.pageSize}))},[e,o]),l=h.useCallback(m=>{const v=nn(e);m!==v.pageSize&&(o.debug(`Setting page size to ${m}`),e.current.setPaginationModel({pageSize:m,page:v.page}))},[e,o]),u=h.useCallback(m=>{const v=nn(e);m!==v&&(o.debug("Setting 'paginationModel' to",m),e.current.setState(y=>j({},y,{pagination:j({},y.pagination,{paginationModel:di(y.pagination,t.signature,m)})})))},[e,o,t.signature]);De(e,{setPage:a,setPageSize:l,setPaginationModel:u},"public");const d=h.useCallback((m,v)=>{var y;const b=nn(e);return!v.exportOnlyDirtyModels||t.paginationModel!=null||((y=t.initialState)==null||(y=y.pagination)==null?void 0:y.paginationModel)!=null||b.page!==0&&b.pageSize!==cI(t.autoPageSize)?j({},m,{pagination:j({},m.pagination,{paginationModel:b})}):m},[e,t.paginationModel,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.paginationModel,t.autoPageSize]),f=h.useCallback((m,v)=>{var y,b;const C=(y=v.stateToRestore.pagination)!=null&&y.paginationModel?j({},qg(t.autoPageSize),(b=v.stateToRestore.pagination)==null?void 0:b.paginationModel):nn(e);return e.current.setState(P=>j({},P,{pagination:j({},P.pagination,{paginationModel:di(P.pagination,t.signature,C)})})),m},[e,t.autoPageSize,t.signature]);ut(e,"exportState",d),ut(e,"restoreState",f);const p=()=>{var m;const v=nn(e);(m=e.current.virtualScrollerRef)!=null&&m.current&&e.current.scrollToIndexes({rowIndex:v.page*v.pageSize})},x=h.useCallback(()=>{if(!t.autoPageSize)return;const m=e.current.getRootDimensions()||{viewportInnerSize:{height:0}},v=Rg(e),y=Math.floor((m.viewportInnerSize.height-v.top-v.bottom)/i);e.current.setPageSize(y)},[e,t.autoPageSize,i]),g=h.useCallback(m=>{if(m==null)return;const v=nn(e),y=hI(e);v.page>y-1&&e.current.setPage(Math.max(0,y-1))},[e]);pe(e,"viewportInnerSizeChange",x),pe(e,"paginationModelChange",p),pe(e,"rowCountChange",g),h.useEffect(()=>{e.current.setState(m=>j({},m,{pagination:j({},m.pagination,{paginationModel:di(m.pagination,t.signature,t.paginationModel)})}))},[e,t.paginationModel,t.paginationMode,t.signature]),h.useEffect(x,[x])};function U2(){return new Promise(e=>{requestAnimationFrame(()=>{e()})})}function W2(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}const q2=(e,t)=>{const n=kt(e,"useGridPrintExport"),o=h.useRef(null),s=h.useRef(null),i=h.useRef({}),a=h.useRef([]);h.useEffect(()=>{o.current=Ui(e.current.rootElementRef.current)},[e]);const l=h.useCallback((g,m,v)=>new Promise(y=>{const b=vx({apiRef:e,options:{fields:g,allColumns:m}}).map(L=>L.field),C=Pn(e),P={};C.forEach(L=>{P[L.field]=b.includes(L.field)}),v&&(P[Eo.field]=!0),e.current.setColumnVisibilityModel(P),y()}),[e]),u=h.useCallback(g=>{const v=g({apiRef:e}).map(y=>e.current.getRow(y));e.current.setRows(v)},[e]),c=h.useCallback((g,m)=>{var v,y;const b=j({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},m),C=g.contentDocument;if(!C)return;const P=ds(e.current.state),L=e.current.rootElementRef.current,T=L.cloneNode(!0),I=T.querySelector(`.${H.main}`);I.style.overflow="visible",T.style.contain="size";const N=T.querySelector(`.${H.columnHeaders}`).querySelector(`.${H.columnHeadersInner}`);N.style.width="100%";let F=((v=L.querySelector(`.${H.toolbarContainer}`))==null?void 0:v.offsetHeight)||0,S=((y=L.querySelector(`.${H.footerContainer}`))==null?void 0:y.offsetHeight)||0;if(b.hideToolbar){var V;(V=T.querySelector(`.${H.toolbarContainer}`))==null||V.remove(),F=0}if(b.hideFooter){var D;(D=T.querySelector(`.${H.footerContainer}`))==null||D.remove(),S=0}const w=P.currentPageTotalHeight+Iu(e,t.columnHeaderHeight)+F+S;if(T.style.height=`${w}px`,T.style.boxSizing="content-box",m!=null&&m.getRowsToExport){const _=T.querySelector(`.${H.footerContainer}`);_.style.position="absolute",_.style.width="100%",_.style.top=`${w-S}px`}const E=document.createElement("div");E.appendChild(T),C.body.innerHTML=E.innerHTML;const M=typeof b.pageStyle=="function"?b.pageStyle():b.pageStyle;if(typeof M=="string"){const _=C.createElement("style");_.appendChild(C.createTextNode(M)),C.head.appendChild(_)}b.bodyClassName&&C.body.classList.add(...b.bodyClassName.split(" "));const $=[];if(b.copyStyles){const _=L.getRootNode(),B=(_.constructor.name==="ShadowRoot"?_:o.current).querySelectorAll("style, link[rel='stylesheet']");for(let z=0;z<B.length;z+=1){const G=B[z];if(G.tagName==="STYLE"){const J=C.createElement(G.tagName),ee=G.sheet;if(ee){let te="";for(let ve=0;ve<ee.cssRules.length;ve+=1)typeof ee.cssRules[ve].cssText=="string"&&(te+=`${ee.cssRules[ve].cssText}\r
`);J.appendChild(C.createTextNode(te)),C.head.appendChild(J)}}else if(G.getAttribute("href")){const J=C.createElement(G.tagName);for(let ee=0;ee<G.attributes.length;ee+=1){const te=G.attributes[ee];te&&J.setAttribute(te.nodeName,te.nodeValue||"")}$.push(new Promise(ee=>{J.addEventListener("load",()=>ee())})),C.head.appendChild(J)}}}Promise.all($).then(()=>{g.contentWindow.print()})},[e,o,t.columnHeaderHeight]),d=h.useCallback(g=>{var m;o.current.body.removeChild(g),e.current.restoreState(s.current||{}),(m=s.current)!=null&&(m=m.columns)!=null&&m.columnVisibilityModel||e.current.setColumnVisibilityModel(i.current),e.current.unstable_setVirtualization(!0),e.current.setRows(a.current),s.current=null,i.current={},a.current=[]},[e]),p={exportDataAsPrint:h.useCallback(async g=>{if(n.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");s.current=e.current.exportState(),i.current=hn(e);const m=Vn(e);if(a.current=Wo(e).map(y=>m[y]),t.pagination){const b={page:0,pageSize:Ig(e)};e.current.setState(C=>j({},C,{pagination:j({},C.pagination,{paginationModel:di(C.pagination,"DataGridPro",b)})})),e.current.forceUpdate()}await l(g?.fields,g?.allColumns,g?.includeCheckboxes),g!=null&&g.getRowsToExport&&u(g.getRowsToExport),e.current.unstable_setVirtualization(!1),await U2();const v=W2(g?.fileName);v.onload=()=>{c(v,g),v.contentWindow.matchMedia("print").addEventListener("change",b=>{b.matches===!1&&d(v)})},o.current.body.appendChild(v)},[t,n,e,c,d,l,u])};De(e,p,"public");const x=h.useCallback((g,m)=>{var v;return(v=m.printOptions)!=null&&v.disableToolbarButton?g:[...g,{component:r.jsx(gE,{options:m.printOptions}),componentName:"printExport"}]},[]);ut(e,"exportMenu",x)},K2=(e,t,n)=>{var o,s,i;const a=(o=(s=t.filterModel)!=null?s:(i=t.initialState)==null||(i=i.filter)==null?void 0:i.filterModel)!=null?o:cs();return j({},e,{filter:{filterModel:cx(a,t.disableMultipleColumnsFiltering,n),filteredRowsLookup:{},filteredDescendantCountLookup:{}},visibleRowsLookup:{}})},Q2=e=>e.filteredRowsLookup;function nf(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function Y2(){return aa(Object.values)}const X2=(e,t)=>{var n,o;const s=kt(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:yt,changeEvent:"filterModelChange"});const i=h.useCallback(()=>{e.current.setState(F=>{const S=yt(F,e.current.instanceId),V=t.filterMode==="client"?$E(S,e,t.disableEval):null,D=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:V,filterModel:S??cs()}),w=j({},F,{filter:j({},F.filter,D)}),E=nf(e,w);return j({},w,{visibleRowsLookup:E})}),e.current.publishEvent("filteredRowsSet")},[e,t.filterMode,t.disableEval]),a=h.useCallback((F,S)=>S==null||S.filterable===!1||t.disableColumnFilter?F:[...F,"columnMenuFilterItem"],[t.disableColumnFilter]),l=h.useCallback(()=>{i(),e.current.forceUpdate()},[e,i]),u=h.useCallback(F=>{const S=yt(e),V=[...S.items],D=V.findIndex(w=>w.id===F.id);D===-1?V.push(F):V[D]=F,e.current.setFilterModel(j({},S,{items:V}),"upsertFilterItem")},[e]),c=h.useCallback(F=>{const S=yt(e),V=[...S.items];F.forEach(D=>{const w=F.findIndex(E=>E.id===D.id);w===-1?V.push(D):V[w]=D}),e.current.setFilterModel(j({},S,{items:F}),"upsertFilterItems")},[e]),d=h.useCallback(F=>{const S=yt(e),V=S.items.filter(D=>D.id!==F.id);V.length!==S.items.length&&e.current.setFilterModel(j({},S,{items:V}),"deleteFilterItem")},[e]),f=h.useCallback((F,S,V)=>{if(s.debug("Displaying filter panel"),F){const D=yt(e),w=D.items.filter(_=>{var O;if(_.value!==void 0)return!(Array.isArray(_.value)&&_.value.length===0);const z=(O=e.current.getColumn(_.field).filterOperators)==null?void 0:O.find(J=>J.value===_.operator);return!(typeof z?.requiresFilterValue>"u"?!0:z?.requiresFilterValue)});let E;const M=w.find(_=>_.field===F),$=e.current.getColumn(F);M?E=w:t.disableMultipleColumnsFiltering?E=[nc({field:F,operator:$.filterOperators[0].value},e)]:E=[...w,nc({field:F,operator:$.filterOperators[0].value},e)],e.current.setFilterModel(j({},D,{items:E}))}e.current.showPreferences(Nr.filters,S,V)},[e,s,t.disableMultipleColumnsFiltering]),p=h.useCallback(()=>{s.debug("Hiding filter panel"),e.current.hidePreferences()},[e,s]),x=h.useCallback(F=>{const S=yt(e);S.logicOperator!==F&&e.current.setFilterModel(j({},S,{logicOperator:F}),"changeLogicOperator")},[e]),g=h.useCallback(F=>{const S=yt(e);Lr(S.quickFilterValues,F)||e.current.setFilterModel(j({},S,{quickFilterValues:[...F]}))},[e]),m=h.useCallback((F,S)=>{yt(e)!==F&&(s.debug("Setting filter model"),e.current.updateControlState("filter",Gh(F,t.disableMultipleColumnsFiltering,e),S),e.current.unstable_applyFilters())},[e,s,t.disableMultipleColumnsFiltering]),v={setFilterLogicOperator:x,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:u,upsertFilterItems:c,setFilterModel:m,showFilterPanel:f,hideFilterPanel:p,setQuickFilterValues:g,ignoreDiacritics:t.ignoreDiacritics};De(e,v,"public");const y=h.useCallback((F,S)=>{var V;const D=yt(e);return!S.exportOnlyDirtyModels||t.filterModel!=null||((V=t.initialState)==null||(V=V.filter)==null?void 0:V.filterModel)!=null||!Lr(D,cs())?j({},F,{filter:{filterModel:D}}):F},[e,t.filterModel,(n=t.initialState)==null||(n=n.filter)==null?void 0:n.filterModel]),b=h.useCallback((F,S)=>{var V;const D=(V=S.stateToRestore.filter)==null?void 0:V.filterModel;return D==null?F:(e.current.updateControlState("filter",Gh(D,t.disableMultipleColumnsFiltering,e),"restoreState"),j({},F,{callbacks:[...F.callbacks,e.current.unstable_applyFilters]}))},[e,t.disableMultipleColumnsFiltering]),C=h.useCallback((F,S)=>{if(S===Nr.filters){var V;const D=t.slots.filterPanel;return r.jsx(D,j({},(V=t.slotProps)==null?void 0:V.filterPanel))}return F},[t.slots.filterPanel,(o=t.slotProps)==null?void 0:o.filterPanel]),{getRowId:P}=t,L=lu(Y2),T=h.useCallback(F=>{if(t.filterMode!=="client"||!F.isRowMatchingFilters)return{filteredRowsLookup:{},filteredDescendantCountLookup:{}};const S=Vn(e),V={},{isRowMatchingFilters:D}=F,w={},E={passingFilterItems:null,passingQuickFilterValues:null},M=L.current(e.current.state.rows.dataRowIdToModelLookup);for(let O=0;O<M.length;O+=1){const B=M[O],z=P?P(B):B.id;D(B,void 0,E);const G=VE([E.passingFilterItems],[E.passingQuickFilterValues],F.filterModel,e,w);V[z]=G}const $="auto-generated-group-footer-root";return S[$]&&(V[$]=!0),{filteredRowsLookup:V,filteredDescendantCountLookup:{}}},[e,t.filterMode,P,L]);ut(e,"columnMenu",a),ut(e,"exportState",y),ut(e,"restoreState",b),ut(e,"preferencePanel",C),Bi(e,Vr,"filtering",T),Bi(e,Vr,"visibleRowsLookupCreation",Q2);const I=h.useCallback(()=>{s.debug("onColUpdated - GridColumns changed, applying filters");const F=yt(e),S=B1(e),V=F.items.filter(D=>D.field&&S[D.field]);V.length<F.items.length&&e.current.setFilterModel(j({},F,{items:V}))},[e,s]),R=h.useCallback(F=>{F==="filtering"&&e.current.unstable_applyFilters()},[e]),N=h.useCallback(()=>{e.current.setState(F=>j({},F,{visibleRowsLookup:nf(e,F)})),e.current.forceUpdate()},[e]);pe(e,"rowsSet",i),pe(e,"columnsChange",I),pe(e,"activeStrategyProcessorChange",R),pe(e,"rowExpansionChange",N),pe(e,"columnVisibilityModelChange",()=>{const F=yt(e);F.quickFilterValues&&F.quickFilterExcludeHiddenColumns&&e.current.unstable_applyFilters()}),ks(()=>{e.current.unstable_applyFilters()}),St(()=>{t.filterModel!==void 0&&e.current.setFilterModel(t.filterModel)},[e,s,t.filterModel])},J2=e=>j({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),Z2=(e,t)=>{const n=kt(e,"useGridFocus"),o=h.useRef(null),s=h.useCallback((I,R)=>{I&&e.current.getRow(I.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(I.id,I.field),R)},[e]),i=h.useCallback((I,R)=>{const N=Yt(e);N?.id===I&&N?.field===R||(e.current.setState(F=>(n.debug(`Focusing on cell with id=${I} and field=${R}`),j({},F,{tabIndex:{cell:{id:I,field:R},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:I,field:R},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),e.current.forceUpdate(),e.current.getRow(I)&&(N&&s(N,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(I,R))))},[e,n,s]),a=h.useCallback((I,R={})=>{const N=Yt(e);s(N,R),e.current.setState(F=>(n.debug(`Focusing on column header with colIndex=${I}`),j({},F,{tabIndex:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:I},columnHeaderFilter:null,cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),l=h.useCallback((I,R={})=>{const N=Yt(e);s(N,R),e.current.setState(F=>(n.debug(`Focusing on column header filter with colIndex=${I}`),j({},F,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:I},cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,s]),u=h.useCallback((I,R,N={})=>{const F=Yt(e);F&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(F.id,F.field),N),e.current.setState(S=>j({},S,{tabIndex:{columnGroupHeader:{field:I,depth:R},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:I,depth:R},columnHeader:null,columnHeaderFilter:null,cell:null}})),e.current.forceUpdate()},[e]),c=h.useCallback(()=>Ri(e),[e]),d=h.useCallback((I,R,N)=>{let F=e.current.getColumnIndex(R);const S=jt(e),V=Ni(e,{pagination:t.pagination,paginationMode:t.paginationMode}),D=Io(e),w=[].concat(D.top||[],V.rows,D.bottom||[]);let E=w.findIndex(O=>O.id===I);N==="right"?F+=1:N==="left"?F-=1:E+=1,F>=S.length?(E+=1,E<w.length&&(F=0)):F<0&&(E-=1,E>=0&&(F=S.length-1)),E=wo(E,0,w.length-1);const M=w[E];if(!M)return;const $=e.current.unstable_getCellColSpanInfo(M.id,F);$&&$.spannedByColSpan&&(N==="left"||N==="below"?F=$.leftVisibleCellIndex:N==="right"&&(F=$.rightVisibleCellIndex)),F=wo(F,0,S.length-1);const _=S[F];e.current.setCellFocus(M.id,_.field)},[e,t.pagination,t.paginationMode]),f=h.useCallback(({id:I,field:R})=>{e.current.setCellFocus(I,R)},[e]),p=h.useCallback((I,R)=>{R.key==="Enter"||R.key==="Tab"||R.key==="Shift"||_i(R.key)||e.current.setCellFocus(I.id,I.field)},[e]),x=h.useCallback(({field:I},R)=>{R.target===R.currentTarget&&e.current.setColumnHeaderFocus(I,R)},[e]),g=h.useCallback(({fields:I,depth:R},N)=>{if(N.target!==N.currentTarget)return;const F=Ri(e);F!==null&&F.depth===R&&I.includes(F.field)||e.current.setColumnGroupHeaderFocus(I[0],R,N)},[e]),m=h.useCallback((I,R)=>{var N;(N=R.relatedTarget)!=null&&N.className.includes(H.columnHeader)||(n.debug("Clearing focus"),e.current.setState(F=>j({},F,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))},[n,e]),v=h.useCallback(I=>{o.current=I},[]),y=h.useCallback(I=>{const R=o.current;o.current=null;const N=Yt(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:I,cell:R}))return;if(!N){R&&e.current.setCellFocus(R.id,R.field);return}if(R?.id===N.id&&R?.field===N.field)return;const S=e.current.getCellElement(N.id,N.field);S!=null&&S.contains(I.target)||(R?e.current.setCellFocus(R.id,R.field):(e.current.setState(V=>j({},V,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})),e.current.forceUpdate(),s(N,I)))},[e,s]),b=h.useCallback(I=>{if(I.cellMode==="view")return;const R=Yt(e);(R?.id!==I.id||R?.field!==I.field)&&e.current.setCellFocus(I.id,I.field)},[e]),C=h.useCallback(()=>{const I=Yt(e);I&&!e.current.getRow(I.id)&&e.current.setState(R=>j({},R,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))},[e]),P=fn(()=>{const I=Yt(e);if(!I)return;const R=Ni(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(R.rows.find(S=>S.id===I.id))return;const F=jt(e);e.current.setState(S=>j({},S,{tabIndex:{cell:{id:R.rows[0].id,field:F[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}}))}),L={setCellFocus:i,setColumnHeaderFocus:a,setColumnHeaderFilterFocus:l},T={moveFocusToRelativeCell:d,setColumnGroupHeaderFocus:u,getColumnGroupHeaderFocus:c};De(e,L,"public"),De(e,T,"private"),h.useEffect(()=>{const I=Ui(e.current.rootElementRef.current);return I.addEventListener("mouseup",y),()=>{I.removeEventListener("mouseup",y)}},[e,y]),pe(e,"columnHeaderBlur",m),pe(e,"cellDoubleClick",f),pe(e,"cellMouseDown",v),pe(e,"cellKeyDown",p),pe(e,"cellModeChange",b),pe(e,"columnHeaderFocus",x),pe(e,"columnGroupHeaderFocus",g),pe(e,"rowsSet",C),pe(e,"paginationModelChange",P)};function eA(e,t){const n=Io(e)||{};return[...n.top||[],...t,...n.bottom||[]]}const il=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e<n)return e+1}else if(o==="ltr"&&e>t)return e-1;return null},al=({currentColIndex:e,firstColIndex:t,lastColIndex:n,direction:o})=>{if(o==="rtl"){if(e>t)return e-1}else if(o==="ltr"&&e<n)return e+1;return null},tA=(e,t)=>{const n=kt(e,"useGridKeyboardNavigation"),o=qr(e,t).rows,s=_t(),i=h.useMemo(()=>eA(e,o),[e,o]),a=t.signature!=="DataGrid"&&t.unstable_headerFilters,l=h.useCallback((y,b,C="left")=>{const P=gr(e),L=e.current.unstable_getCellColSpanInfo(b,y);L&&L.spannedByColSpan&&(C==="left"?y=L.leftVisibleCellIndex:C==="right"&&(y=L.rightVisibleCellIndex));const T=P.findIndex(R=>R.id===b);n.debug(`Navigating to cell row ${T}, col ${y}`),e.current.scrollToIndexes({colIndex:y,rowIndex:T});const I=e.current.getVisibleColumns()[y].field;e.current.setCellFocus(b,I)},[e,n]),u=h.useCallback((y,b)=>{n.debug(`Navigating to header col ${y}`),e.current.scrollToIndexes({colIndex:y});const C=e.current.getVisibleColumns()[y].field;e.current.setColumnHeaderFocus(C,b)},[e,n]),c=h.useCallback((y,b)=>{n.debug(`Navigating to header filter col ${y}`),e.current.scrollToIndexes({colIndex:y});const C=e.current.getVisibleColumns()[y].field;e.current.setColumnHeaderFilterFocus(C,b)},[e,n]),d=h.useCallback((y,b,C)=>{n.debug(`Navigating to header col ${y}`),e.current.scrollToIndexes({colIndex:y});const{field:P}=e.current.getVisibleColumns()[y];e.current.setColumnGroupHeaderFocus(P,b,C)},[e,n]),f=h.useCallback(y=>{var b;return(b=i[y])==null?void 0:b.id},[i]),p=h.useCallback((y,b)=>{const C=b.currentTarget.querySelector(`.${H.columnHeaderTitleContainerContent}`);if(!!C&&C.contains(b.target)&&y.field!==Eo.field||!e.current.getRootDimensions())return;const T=e.current.getViewportPageSize(),I=y.field?e.current.getColumnIndex(y.field):0,R=i.length>0?0:null,N=i.length-1,F=0,S=jt(e).length-1,V=Ss(e);let D=!0;switch(b.key){case"ArrowDown":{R!==null&&(a?c(I,b):l(I,f(R)));break}case"ArrowRight":{const w=al({currentColIndex:I,firstColIndex:F,lastColIndex:S,direction:s.direction});w!==null&&u(w,b);break}case"ArrowLeft":{const w=il({currentColIndex:I,firstColIndex:F,lastColIndex:S,direction:s.direction});w!==null&&u(w,b);break}case"ArrowUp":{V>0&&d(I,V-1,b);break}case"PageDown":{R!==null&&N!==null&&l(I,f(Math.min(R+T,N)));break}case"Home":{u(F,b);break}case"End":{u(S,b);break}case"Enter":{(b.ctrlKey||b.metaKey)&&e.current.toggleColumnMenu(y.field);break}case" ":break;default:D=!1}D&&b.preventDefault()},[e,i.length,a,c,l,f,s.direction,u,d]),x=h.useCallback((y,b)=>{if(!e.current.getRootDimensions())return;const P=jI(e)===y.field,L=SI(e)===y.field;if(P||L||!_i(b.key))return;const T=e.current.getViewportPageSize(),I=y.field?e.current.getColumnIndex(y.field):0,R=0,N=i.length-1,F=0,S=jt(e).length-1;let V=!0;switch(b.key){case"ArrowDown":{const D=f(R);D!=null&&l(I,D);break}case"ArrowRight":{const D=al({currentColIndex:I,firstColIndex:F,lastColIndex:S,direction:s.direction});D!==null&&c(D,b);break}case"ArrowLeft":{const D=il({currentColIndex:I,firstColIndex:F,lastColIndex:S,direction:s.direction});D!==null?c(D,b):e.current.setColumnHeaderFilterFocus(y.field,b);break}case"ArrowUp":{u(I,b);break}case"PageDown":{N!==null&&l(I,f(Math.min(R+T,N)));break}case"Home":{c(F,b);break}case"End":{c(S,b);break}case" ":break;default:V=!1}V&&b.preventDefault()},[e,i.length,c,s.direction,u,l,f]),g=h.useCallback((y,b)=>{if(!e.current.getRootDimensions())return;const P=Ri(e);if(P===null)return;const{field:L,depth:T}=P,{fields:I,depth:R,maxDepth:N}=y,F=e.current.getViewportPageSize(),S=e.current.getColumnIndex(L),V=L?e.current.getColumnIndex(L):0,D=0,w=i.length-1,E=0,M=jt(e).length-1;let $=!0;switch(b.key){case"ArrowDown":{R===N-1?u(S,b):d(S,T+1,b);break}case"ArrowUp":{R>0&&d(S,T-1,b);break}case"ArrowRight":{const _=I.length-I.indexOf(L)-1;S+_+1<=M&&d(S+_+1,T,b);break}case"ArrowLeft":{const _=I.indexOf(L);S-_-1>=E&&d(S-_-1,T,b);break}case"PageDown":{w!==null&&l(V,f(Math.min(D+F,w)));break}case"Home":{d(E,T,b);break}case"End":{d(M,T,b);break}case" ":break;default:$=!1}$&&b.preventDefault()},[e,i.length,u,d,l,f]),m=h.useCallback((y,b)=>{if(Ps(b))return;const C=e.current.getCellParams(y.id,y.field);if(C.cellMode===Ke.Edit||!_i(b.key)||!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:b,cell:C}))return;const L=e.current.getRootDimensions();if(i.length===0||!L)return;const T=s.direction,I=e.current.getViewportPageSize(),R=y.field?e.current.getColumnIndex(y.field):0,N=i.findIndex(E=>E.id===y.id),F=0,S=i.length-1,V=0,D=jt(e).length-1;let w=!0;switch(b.key){case"ArrowDown":{N<S&&l(R,f(N+1));break}case"ArrowUp":{N>F?l(R,f(N-1)):a?c(R,b):u(R,b);break}case"ArrowRight":{const E=al({currentColIndex:R,firstColIndex:V,lastColIndex:D,direction:T});E!==null&&l(E,f(N),T==="rtl"?"left":"right");break}case"ArrowLeft":{const E=il({currentColIndex:R,firstColIndex:V,lastColIndex:D,direction:T});E!==null&&l(E,f(N),T==="rtl"?"right":"left");break}case"Tab":{b.shiftKey&&R>V?l(R-1,f(N),"left"):!b.shiftKey&&R<D&&l(R+1,f(N),"right");break}case" ":{if(y.field===Su)break;const M=y.colDef;if(M&&M.type==="treeDataGroup")break;!b.shiftKey&&N<S&&l(R,f(Math.min(N+I,S)));break}case"PageDown":{N<S&&l(R,f(Math.min(N+I,S)));break}case"PageUp":{const E=Math.max(N-I,F);E!==N&&E>=F?l(R,f(E)):u(R,b);break}case"Home":{b.ctrlKey||b.metaKey||b.shiftKey?l(V,f(F)):l(V,f(N));break}case"End":{b.ctrlKey||b.metaKey||b.shiftKey?l(D,f(S)):l(D,f(N));break}default:w=!1}w&&b.preventDefault()},[e,i,s.direction,l,f,a,c,u]),v=h.useCallback((y,{event:b})=>b.key===" "?!1:y,[]);ut(e,"canStartEditing",v),pe(e,"columnHeaderKeyDown",p),pe(e,"headerFilterKeyDown",x),pe(e,"columnGroupHeaderKeyDown",g),pe(e,"cellKeyDown",m)},nA=(e,t)=>{var n;const o=kt(e,"useGridRowCount"),s=se(e,Tg),i=se(e,uo);e.current.registerControlState({stateId:"paginationRowCount",propModel:t.rowCount,propOnChange:t.onRowCountChange,stateSelector:uo,changeEvent:"rowCountChange"});const l={setRowCount:h.useCallback(d=>{i!==d&&(o.debug("Setting 'rowCount' to",d),e.current.setState(f=>j({},f,{pagination:j({},f.pagination,{rowCount:d})})))},[e,o,i])};De(e,l,"public");const u=h.useCallback((d,f)=>{var p;const x=uo(e);return!f.exportOnlyDirtyModels||t.rowCount!=null||((p=t.initialState)==null||(p=p.pagination)==null?void 0:p.rowCount)!=null?j({},d,{pagination:j({},d.pagination,{rowCount:x})}):d},[e,t.rowCount,(n=t.initialState)==null||(n=n.pagination)==null?void 0:n.rowCount]),c=h.useCallback((d,f)=>{var p;const x=(p=f.stateToRestore.pagination)!=null&&p.rowCount?f.stateToRestore.pagination.rowCount:uo(e);return e.current.setState(g=>j({},g,{pagination:j({},g.pagination,{rowCount:x})})),d},[e]);ut(e,"exportState",u),ut(e,"restoreState",c),h.useEffect(()=>{},[t.rowCount,t.paginationMode]),h.useEffect(()=>{t.paginationMode==="client"?e.current.setRowCount(s):t.rowCount!=null&&e.current.setRowCount(t.rowCount)},[e,s,t.paginationMode,t.rowCount])},rA=(e,t)=>{var n,o,s,i,a;const l=j({},qg(t.autoPageSize),(n=t.paginationModel)!=null?n:(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.paginationModel);Kg(l.pageSize,t.signature);const u=(s=(i=t.rowCount)!=null?i:(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.rowCount)!=null?s:0;return j({},e,{pagination:{paginationModel:l,rowCount:u}})},oA=(e,t)=>{G2(e,t),nA(e,t)},sA=(e,t)=>{var n,o;return j({},e,{preferencePanel:(n=(o=t.initialState)==null?void 0:o.preferencePanel)!=null?n:{open:!1}})},iA=(e,t)=>{var n;const o=kt(e,"useGridPreferencesPanel"),s=h.useRef(),i=h.useRef(),a=h.useCallback(()=>{o.debug("Hiding Preferences Panel");const p=us(e.current.state);p.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:p.openedPanelValue}),e.current.setState(x=>j({},x,{preferencePanel:{open:!1}})),e.current.forceUpdate()},[e,o]),l=h.useCallback(()=>{i.current=setTimeout(()=>clearTimeout(s.current),0)},[]),u=h.useCallback(()=>{s.current=setTimeout(a,100)},[a]),c=h.useCallback((p,x,g)=>{o.debug("Opening Preferences Panel"),l(),e.current.setState(m=>j({},m,{preferencePanel:j({},m.preferencePanel,{open:!0,openedPanelValue:p,panelId:x,labelId:g})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:p}),e.current.forceUpdate()},[o,l,e]);De(e,{showPreferences:c,hidePreferences:u},"public");const d=h.useCallback((p,x)=>{var g;const m=us(e.current.state);return!x.exportOnlyDirtyModels||((g=t.initialState)==null?void 0:g.preferencePanel)!=null||m.open?j({},p,{preferencePanel:m}):p},[e,(n=t.initialState)==null?void 0:n.preferencePanel]),f=h.useCallback((p,x)=>{const g=x.stateToRestore.preferencePanel;return g!=null&&e.current.setState(m=>j({},m,{preferencePanel:g})),p},[e]);ut(e,"exportState",d),ut(e,"restoreState",f),h.useEffect(()=>()=>{clearTimeout(s.current),clearTimeout(i.current)},[])},aA=["id","field"],lA=["id","field"],cA=Dn(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),uA=(e,t)=>{const[n,o]=h.useState({}),s=h.useRef(n),i=h.useRef({}),{processRowUpdate:a,onProcessRowUpdateError:l,cellModesModel:u,onCellModesModelChange:c}=t,d=w=>(...E)=>{t.editMode===Mn.Cell&&w(...E)},f=h.useCallback((w,E)=>{const M=e.current.getCellParams(w,E);if(!e.current.isCellEditable(M))throw new Error(`MUI: The cell with id=${w} and field=${E} is not editable.`)},[e]),p=h.useCallback((w,E,M)=>{if(e.current.getCellMode(w,E)!==M)throw new Error(`MUI: The cell with id=${w} and field=${E} is not in ${M} mode.`)},[e]),x=h.useCallback((w,E)=>{if(!w.isEditable||w.cellMode===Ke.Edit)return;const M=j({},w,{reason:Ln.cellDoubleClick});e.current.publishEvent("cellEditStart",M,E)},[e]),g=h.useCallback((w,E)=>{if(w.cellMode===Ke.View||e.current.getCellMode(w.id,w.field)===Ke.View)return;const M=j({},w,{reason:ln.cellFocusOut});e.current.publishEvent("cellEditStop",M,E)},[e]),m=h.useCallback((w,E)=>{if(w.cellMode===Ke.Edit){if(E.which===229)return;let M;if(E.key==="Escape"?M=ln.escapeKeyDown:E.key==="Enter"?M=ln.enterKeyDown:E.key==="Tab"&&(M=E.shiftKey?ln.shiftTabKeyDown:ln.tabKeyDown,E.preventDefault()),M){const $=j({},w,{reason:M});e.current.publishEvent("cellEditStop",$,E)}}else if(w.isEditable){let M;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:E,cellParams:w,editMode:"cell"}))return;if(Ng(E)?M=Ln.printableKeyDown:(E.ctrlKey||E.metaKey)&&E.key==="v"?M=Ln.pasteKeyDown:E.key==="Enter"?M=Ln.enterKeyDown:(E.key==="Delete"||E.key==="Backspace")&&(M=Ln.deleteKeyDown),M){const _=j({},w,{reason:M,key:E.key});e.current.publishEvent("cellEditStart",_,E)}}},[e]),v=h.useCallback(w=>{const{id:E,field:M,reason:$}=w,_={id:E,field:M};($===Ln.printableKeyDown||$===Ln.deleteKeyDown||$===Ln.pasteKeyDown)&&(_.deleteValue=!0),e.current.startCellEditMode(_)},[e]),y=h.useCallback(w=>{const{id:E,field:M,reason:$}=w;e.current.runPendingEditCellValueMutation(E,M);let _;$===ln.enterKeyDown?_="below":$===ln.tabKeyDown?_="right":$===ln.shiftTabKeyDown&&(_="left");const O=$==="escapeKeyDown";e.current.stopCellEditMode({id:E,field:M,ignoreModifications:O,cellToFocusAfter:_})},[e]);pe(e,"cellDoubleClick",d(x)),pe(e,"cellFocusOut",d(g)),pe(e,"cellKeyDown",d(m)),pe(e,"cellEditStart",d(v)),pe(e,"cellEditStop",d(y)),tt(e,"cellEditStart",t.onCellEditStart),tt(e,"cellEditStop",t.onCellEditStop);const b=h.useCallback((w,E)=>{const M=Ot(e.current.state);return M[w]&&M[w][E]?Ke.Edit:Ke.View},[e]),C=fn(w=>{const E=w!==t.cellModesModel;c&&E&&c(w,{}),!(t.cellModesModel&&E)&&(o(w),s.current=w,e.current.publishEvent("cellModesModelChange",w))}),P=h.useCallback((w,E,M)=>{const $=j({},s.current);if(M!==null)$[w]=j({},$[w],{[E]:j({},M)});else{const _=$[w],O=le(_,[E].map(ns));$[w]=O,Object.keys($[w]).length===0&&delete $[w]}C($)},[C]),L=h.useCallback((w,E,M)=>{e.current.setState($=>{const _=j({},$.editRows);return M!==null?_[w]=j({},_[w],{[E]:j({},M)}):(delete _[w][E],Object.keys(_[w]).length===0&&delete _[w]),j({},$,{editRows:_})}),e.current.forceUpdate()},[e]),T=h.useCallback(w=>{const{id:E,field:M}=w,$=le(w,aA);f(E,M),p(E,M,Ke.View),P(E,M,j({mode:Ke.Edit},$))},[f,p,P]),I=fn(w=>{const{id:E,field:M,deleteValue:$,initialValue:_}=w;let O=e.current.getCellValue(E,M);($||_)&&(O=$?"":_),L(E,M,{value:O,error:!1,isProcessingProps:!1}),e.current.setCellFocus(E,M)}),R=h.useCallback(w=>{const{id:E,field:M}=w,$=le(w,lA);p(E,M,Ke.Edit),P(E,M,j({mode:Ke.View},$))},[p,P]),N=fn(async w=>{const{id:E,field:M,ignoreModifications:$,cellToFocusAfter:_="none"}=w;p(E,M,Ke.Edit),e.current.runPendingEditCellValueMutation(E,M);const O=()=>{L(E,M,null),P(E,M,null),_!=="none"&&e.current.moveFocusToRelativeCell(E,M,_)};if($){O();return}const B=Ot(e.current.state),{error:z,isProcessingProps:G}=B[E][M];if(z||G){i.current[E][M].mode=Ke.Edit,P(E,M,{mode:Ke.Edit});return}const J=e.current.getRowWithUpdatedValuesFromCellEditing(E,M);if(a){const ee=te=>{i.current[E][M].mode=Ke.Edit,P(E,M,{mode:Ke.Edit}),l?l(te):cA()};try{const te=e.current.getRow(E);Promise.resolve(a(J,te)).then(ve=>{e.current.updateRows([ve]),O()}).catch(ee)}catch(te){ee(te)}}else e.current.updateRows([J]),O()}),F=h.useCallback(async w=>{var E;const{id:M,field:$,value:_,debounceMs:O,unstable_skipValueParser:B}=w;f(M,$),p(M,$,Ke.Edit);const z=e.current.getColumn($),G=e.current.getRow(M);let J=_;z.valueParser&&!B&&(J=z.valueParser(_,e.current.getCellParams(M,$)));let ee=Ot(e.current.state),te=j({},ee[M][$],{value:J,changeReason:O?"debouncedSetEditCellValue":"setEditCellValue"});if(z.preProcessEditCellProps){const ve=_!==ee[M][$].value;te=j({},te,{isProcessingProps:!0}),L(M,$,te),te=await Promise.resolve(z.preProcessEditCellProps({id:M,row:G,props:te,hasChanged:ve}))}return e.current.getCellMode(M,$)===Ke.View?!1:(ee=Ot(e.current.state),te=j({},te,{isProcessingProps:!1}),te.value=z.preProcessEditCellProps?ee[M][$].value:J,L(M,$,te),ee=Ot(e.current.state),!((E=ee[M])!=null&&(E=E[$])!=null&&E.error))},[e,f,p,L]),S=h.useCallback((w,E)=>{const M=e.current.getColumn(E),$=Ot(e.current.state),_=e.current.getRow(w);if(!$[w]||!$[w][E])return e.current.getRow(w);const{value:O}=$[w][E];return M.valueSetter?M.valueSetter({value:O,row:_}):j({},_,{[E]:O})},[e]),V={getCellMode:b,startCellEditMode:T,stopCellEditMode:R},D={setCellEditingEditCellValue:F,getRowWithUpdatedValuesFromCellEditing:S};De(e,V,"public"),De(e,D,"private"),h.useEffect(()=>{u&&C(u)},[u,C]),St(()=>{const w=Mi(e),E=i.current;i.current=Ug(n),Object.entries(n).forEach(([M,$])=>{Object.entries($).forEach(([_,O])=>{var B,z;const G=((B=E[M])==null||(B=B[_])==null?void 0:B.mode)||Ke.View,J=(z=w[M])!=null?z:M;O.mode===Ke.Edit&&G===Ke.View?I(j({id:J,field:_},O)):O.mode===Ke.View&&G===Ke.Edit&&N(j({id:J,field:_},O))})})},[e,n,I,N])},dA=["id"],hA=["id"],fA=Dn(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),pA=(e,t)=>{const[n,o]=h.useState({}),s=h.useRef(n),i=h.useRef({}),a=h.useRef(null),l=h.useRef(null),{processRowUpdate:u,onProcessRowUpdateError:c,rowModesModel:d,onRowModesModelChange:f}=t,p=_=>(...O)=>{t.editMode===Mn.Row&&_(...O)},x=h.useCallback((_,O)=>{const B=e.current.getCellParams(_,O);if(!e.current.isCellEditable(B))throw new Error(`MUI: The cell with id=${_} and field=${O} is not editable.`)},[e]),g=h.useCallback((_,O)=>{if(e.current.getRowMode(_)!==O)throw new Error(`MUI: The row with id=${_} is not in ${O} mode.`)},[e]),m=h.useCallback((_,O)=>{if(!_.isEditable||e.current.getRowMode(_.id)===Ze.Edit)return;const B=e.current.getRowParams(_.id),z=j({},B,{field:_.field,reason:Yn.cellDoubleClick});e.current.publishEvent("rowEditStart",z,O)},[e]),v=h.useCallback(_=>{l.current=_},[]),y=h.useCallback((_,O)=>{_.isEditable&&e.current.getRowMode(_.id)!==Ze.View&&(l.current=null,a.current=setTimeout(()=>{var B;if(a.current=null,((B=l.current)==null?void 0:B.id)!==_.id){if(!e.current.getRow(_.id)||e.current.getRowMode(_.id)===Ze.View)return;const z=e.current.getRowParams(_.id),G=j({},z,{field:_.field,reason:_n.rowFocusOut});e.current.publishEvent("rowEditStop",G,O)}}))},[e]);h.useEffect(()=>()=>{clearTimeout(a.current)},[]);const b=h.useCallback((_,O)=>{if(_.cellMode===Ze.Edit){if(O.which===229)return;let B;if(O.key==="Escape")B=_n.escapeKeyDown;else if(O.key==="Enter")B=_n.enterKeyDown;else if(O.key==="Tab"){const z=la(e).filter(G=>e.current.getColumn(G).type===ma?!0:e.current.isCellEditable(e.current.getCellParams(_.id,G)));if(O.shiftKey?_.field===z[0]&&(B=_n.shiftTabKeyDown):_.field===z[z.length-1]&&(B=_n.tabKeyDown),O.preventDefault(),!B){const G=z.findIndex(ee=>ee===_.field),J=z[O.shiftKey?G-1:G+1];e.current.setCellFocus(_.id,J)}}if(B){const z=j({},e.current.getRowParams(_.id),{reason:B,field:_.field});e.current.publishEvent("rowEditStop",z,O)}}else if(_.isEditable){let B;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:O,cellParams:_,editMode:"row"}))return;if(Ng(O)||(O.ctrlKey||O.metaKey)&&O.key==="v"?B=Yn.printableKeyDown:O.key==="Enter"?B=Yn.enterKeyDown:(O.key==="Delete"||O.key==="Backspace")&&(B=Yn.deleteKeyDown),B){const G=e.current.getRowParams(_.id),J=j({},G,{field:_.field,reason:B});e.current.publishEvent("rowEditStart",J,O)}}},[e]),C=h.useCallback(_=>{const{id:O,field:B,reason:z}=_,G={id:O,fieldToFocus:B};(z===Yn.printableKeyDown||z===Yn.deleteKeyDown)&&(G.deleteValue=!!B),e.current.startRowEditMode(G)},[e]),P=h.useCallback(_=>{const{id:O,reason:B,field:z}=_;e.current.runPendingEditCellValueMutation(O);let G;B===_n.enterKeyDown?G="below":B===_n.tabKeyDown?G="right":B===_n.shiftTabKeyDown&&(G="left");const J=B==="escapeKeyDown";e.current.stopRowEditMode({id:O,ignoreModifications:J,field:z,cellToFocusAfter:G})},[e]);pe(e,"cellDoubleClick",p(m)),pe(e,"cellFocusIn",p(v)),pe(e,"cellFocusOut",p(y)),pe(e,"cellKeyDown",p(b)),pe(e,"rowEditStart",p(C)),pe(e,"rowEditStop",p(P)),tt(e,"rowEditStart",t.onRowEditStart),tt(e,"rowEditStop",t.onRowEditStop);const L=h.useCallback(_=>{if(t.editMode===Mn.Cell)return Ze.View;const O=Ot(e.current.state);return O[_]&&Object.keys(O[_]).length>0?Ze.Edit:Ze.View},[e,t.editMode]),T=fn(_=>{const O=_!==t.rowModesModel;f&&O&&f(_,{}),!(t.rowModesModel&&O)&&(o(_),s.current=_,e.current.publishEvent("rowModesModelChange",_))}),I=h.useCallback((_,O)=>{const B=j({},s.current);O!==null?B[_]=j({},O):delete B[_],T(B)},[T]),R=h.useCallback((_,O)=>{e.current.setState(B=>{const z=j({},B.editRows);return O!==null?z[_]=O:delete z[_],j({},B,{editRows:z})}),e.current.forceUpdate()},[e]),N=h.useCallback((_,O,B)=>{e.current.setState(z=>{const G=j({},z.editRows);return B!==null?G[_]=j({},G[_],{[O]:j({},B)}):(delete G[_][O],Object.keys(G[_]).length===0&&delete G[_]),j({},z,{editRows:G})}),e.current.forceUpdate()},[e]),F=h.useCallback(_=>{const{id:O}=_,B=le(_,dA);g(O,Ze.View),I(O,j({mode:Ze.Edit},B))},[g,I]),S=fn(_=>{const{id:O,fieldToFocus:B,deleteValue:z,initialValue:G}=_,ee=Wn(e).reduce((te,ve)=>{if(!e.current.getCellParams(O,ve).isEditable)return te;let Q=e.current.getCellValue(O,ve);return B===ve&&(z||G)&&(Q=z?"":G),te[ve]={value:Q,error:!1,isProcessingProps:!1},te},{});R(O,ee),B&&e.current.setCellFocus(O,B)}),V=h.useCallback(_=>{const{id:O}=_,B=le(_,hA);g(O,Ze.Edit),I(O,j({mode:Ze.View},B))},[g,I]),D=fn(_=>{const{id:O,ignoreModifications:B,field:z,cellToFocusAfter:G="none"}=_;e.current.runPendingEditCellValueMutation(O);const J=()=>{G!=="none"&&z&&e.current.moveFocusToRelativeCell(O,z,G),R(O,null),I(O,null)};if(B){J();return}const ee=Ot(e.current.state),te=e.current.getRow(O);if(Object.values(ee[O]).some(ie=>ie.isProcessingProps)){i.current[O].mode=Ze.Edit;return}if(Object.values(ee[O]).some(ie=>ie.error)){i.current[O].mode=Ze.Edit,I(O,{mode:Ze.Edit});return}const Q=e.current.getRowWithUpdatedValuesFromRowEditing(O);if(u){const ie=X=>{i.current[O].mode=Ze.Edit,I(O,{mode:Ze.Edit}),c?c(X):fA()};try{Promise.resolve(u(Q,te)).then(X=>{e.current.updateRows([X]),J()}).catch(ie)}catch(X){ie(X)}}else e.current.updateRows([Q]),J()}),w=h.useCallback(_=>{const{id:O,field:B,value:z,debounceMs:G,unstable_skipValueParser:J}=_;x(O,B);const ee=e.current.getColumn(B),te=e.current.getRow(O);let ve=z;ee.valueParser&&!J&&(ve=ee.valueParser(z,e.current.getCellParams(O,B)));let W=Ot(e.current.state),Q=j({},W[O][B],{value:ve,changeReason:G?"debouncedSetEditCellValue":"setEditCellValue"});return ee.preProcessEditCellProps||N(O,B,Q),new Promise(ie=>{const X=[];if(ee.preProcessEditCellProps){const ne=Q.value!==W[O][B].value;Q=j({},Q,{isProcessingProps:!0}),N(O,B,Q);const je=W[O],Z=le(je,[B].map(ns)),xe=Promise.resolve(ee.preProcessEditCellProps({id:O,row:te,props:Q,hasChanged:ne,otherFieldsProps:Z})).then(me=>{if(e.current.getRowMode(O)===Ze.View){ie(!1);return}W=Ot(e.current.state),me=j({},me,{isProcessingProps:!1}),me.value=ee.preProcessEditCellProps?W[O][B].value:ve,N(O,B,me)});X.push(xe)}Object.entries(W[O]).forEach(([ne,je])=>{if(ne===B)return;const Z=e.current.getColumn(ne);if(!Z.preProcessEditCellProps)return;je=j({},je,{isProcessingProps:!0}),N(O,ne,je),W=Ot(e.current.state);const xe=W[O],me=le(xe,[ne].map(ns)),Pe=Promise.resolve(Z.preProcessEditCellProps({id:O,row:te,props:je,hasChanged:!1,otherFieldsProps:me})).then(be=>{if(e.current.getRowMode(O)===Ze.View){ie(!1);return}be=j({},be,{isProcessingProps:!1}),N(O,ne,be)});X.push(Pe)}),Promise.all(X).then(()=>{e.current.getRowMode(O)===Ze.Edit?(W=Ot(e.current.state),ie(!W[O][B].error)):ie(!1)})})},[e,x,N]),E=h.useCallback(_=>{const O=Ot(e.current.state),B=e.current.getRow(_);if(!O[_])return e.current.getRow(_);let z=j({},B);return Object.entries(O[_]).forEach(([G,J])=>{const ee=e.current.getColumn(G);ee.valueSetter?z=ee.valueSetter({value:J.value,row:z}):z[G]=J.value}),z},[e]),M={getRowMode:L,startRowEditMode:F,stopRowEditMode:V},$={setRowEditingEditCellValue:w,getRowWithUpdatedValuesFromRowEditing:E};De(e,M,"public"),De(e,$,"private"),h.useEffect(()=>{d&&T(d)},[d,T]),St(()=>{const _=Mi(e),O=i.current;i.current=Ug(n),Object.entries(n).forEach(([B,z])=>{var G,J;const ee=((G=O[B])==null?void 0:G.mode)||Ze.View,te=(J=_[B])!=null?J:B;z.mode===Ze.Edit&&ee===Ze.View?S(j({id:te},z)):z.mode===Ze.View&&ee===Ze.Edit&&D(j({id:te},z))})},[e,n,S,D])},mA=e=>j({},e,{editRows:{}}),gA=(e,t)=>{uA(e,t),pA(e,t);const n=h.useRef({}),{isCellEditable:o}=t,s=h.useCallback(p=>ls(p.rowNode)||!p.colDef.editable||!p.colDef.renderEditCell?!1:o?o(p):!0,[o]),i=(p,x,g,m)=>{if(!g){m();return}if(n.current[p]||(n.current[p]={}),n.current[p][x]){const[b]=n.current[p][x];clearTimeout(b)}const v=()=>{const[b]=n.current[p][x];clearTimeout(b),m(),delete n.current[p][x]},y=setTimeout(()=>{m(),delete n.current[p][x]},g);n.current[p][x]=[y,v]};h.useEffect(()=>{const p=n.current;return()=>{Object.entries(p).forEach(([x,g])=>{Object.keys(g).forEach(m=>{const[v]=p[x][m];clearTimeout(v),delete p[x][m]})})}},[]);const a=h.useCallback((p,x)=>{if(n.current[p]){if(!x)Object.keys(n.current[p]).forEach(g=>{const[,m]=n.current[p][g];m()});else if(n.current[p][x]){const[,g]=n.current[p][x];g()}}},[]),l=h.useCallback(p=>{const{id:x,field:g,debounceMs:m}=p;return new Promise(v=>{i(x,g,m,async()=>{const y=t.editMode===Mn.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(x,g)===Ke.Edit){const b=await y(p);v(b)}})})},[e,t.editMode]),u=h.useCallback((p,x)=>t.editMode===Mn.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(p,x):e.current.getRowWithUpdatedValuesFromRowEditing(p),[e,t.editMode]),c=h.useCallback((p,x)=>{var g,m;return(g=(m=Ot(e.current.state)[p])==null?void 0:m[x])!=null?g:null},[e]),d={isCellEditable:s,setEditCellValue:l,getRowWithUpdatedValues:u,unstable_getEditCellMeta:c},f={runPendingEditCellValueMutation:a};De(e,d,"public"),De(e,f,"private")},xA=(e,t,n)=>(n.current.caches.rows=ci({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),j({},e,{rows:Mg({apiRef:n,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:null,previousTreeDepths:null})})),yA=(e,t)=>{const n=kt(e,"useGridRows"),o=qr(e,t),s=h.useRef(Date.now()),i=ju(),a=h.useCallback(D=>{const w=Vn(e)[D];if(w)return w;const E=e.current.getRowNode(D);return E&&ls(E)?{[po]:D}:null},[e]),l=t.getRowId,u=h.useCallback(D=>po in D?D[po]:l?l(D):D.id,[l]),c=h.useMemo(()=>o.rows.reduce((D,{id:w},E)=>(D[w]=E,D),{}),[o.rows]),d=h.useCallback(({cache:D,throttle:w})=>{const E=()=>{s.current=Date.now(),e.current.setState($=>j({},$,{rows:Mg({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:dn(e),previousTreeDepths:Ih(e)})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(i.clear(),e.current.caches.rows=D,!w){E();return}const M=t.throttleRowsMs-(Date.now()-s.current);if(M>0){i.start(M,E);return}E()},[t.throttleRowsMs,t.rowCount,t.loading,e,i]),f=h.useCallback(D=>{n.debug(`Updating all rows, new length ${D.length}`);const w=ci({rows:D,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),E=e.current.caches.rows;w.rowsBeforePartialUpdates=E.rowsBeforePartialUpdates,d({cache:w,throttle:!0})},[n,t.getRowId,t.loading,t.rowCount,d,e]),p=h.useCallback(D=>{if(t.signature===kn.DataGrid&&D.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const w=[];D.forEach(M=>{const $=Fi(M,t.getRowId,"A row was provided without id when calling updateRows():"),_=e.current.getRowNode($);if(_?.type==="pinnedRow"){const O=e.current.caches.pinnedRows,B=O.idLookup[$];B&&(O.idLookup[$]=j({},B,M))}else w.push(M)});const E=dP({updates:w,getRowId:t.getRowId,previousCache:e.current.caches.rows});d({cache:E,throttle:!0})},[t.signature,t.getRowId,d,e]),x=h.useCallback(()=>{const D=Wo(e),w=Vn(e);return new Map(D.map(E=>{var M;return[E,(M=w[E])!=null?M:{}]}))},[e]),g=h.useCallback(()=>ua(e),[e]),m=h.useCallback(()=>Wo(e),[e]),v=h.useCallback(D=>c[D],[c]),y=h.useCallback((D,w)=>{const E=e.current.getRowNode(D);if(!E)throw new Error(`MUI: No row with id #${D} found`);if(E.type!=="group")throw new Error("MUI: Only group nodes can be expanded or collapsed");const M=j({},E,{childrenExpanded:w});e.current.setState($=>j({},$,{rows:j({},$.rows,{tree:j({},$.rows.tree,{[D]:M})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",M)},[e]),b=h.useCallback(D=>{var w;return(w=dn(e)[D])!=null?w:null},[e]),C=h.useCallback(({skipAutoGeneratedRows:D=!0,groupId:w,applySorting:E,applyFiltering:M})=>{const $=dn(e);let _;if(E){const O=$[w];if(!O)return[];const B=du(e);_=[];const z=B.findIndex(G=>G===w)+1;for(let G=z;G<B.length&&$[B[G]].depth>O.depth;G+=1){const J=B[G];(!D||!ls($[J]))&&_.push(J)}}else _=mu($,w,D);if(M){const O=Pg(e);_=_.filter(B=>O[B]!==!1)}return _},[e]),P=h.useCallback((D,w)=>{const E=e.current.getRowNode(D);if(!E)throw new Error(`MUI: No row with id #${D} found`);if(E.parent!==Lt)throw new Error("MUI: The row reordering do not support reordering of grouped rows yet");if(E.type!=="leaf")throw new Error("MUI: The row reordering do not support reordering of footer or grouping rows");e.current.setState(M=>{const $=dn(M,e.current.instanceId)[Lt],_=$.children,O=_.findIndex(z=>z===D);if(O===-1||O===w)return M;n.debug(`Moving row ${D} to index ${w}`);const B=[..._];return B.splice(w,0,B.splice(O,1)[0]),j({},M,{rows:j({},M.rows,{tree:j({},M.rows.tree,{[Lt]:j({},$,{children:B})})})})}),e.current.publishEvent("rowsSet")},[e,n]),L=h.useCallback((D,w)=>{if(t.signature===kn.DataGrid&&w.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(w.length===0)return;if(da(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const M=j({},dn(e)),$=j({},Vn(e)),_=j({},Mi(e)),O=M[Lt],B=[...O.children],z=new Set;for(let J=0;J<w.length;J+=1){const ee=w[J],te=Fi(ee,t.getRowId,"A row was provided without id when calling replaceRows()."),[ve]=B.splice(D+J,1,te);z.has(ve)||(delete $[ve],delete _[ve],delete M[ve]);const W={id:te,depth:0,parent:Lt,type:"leaf",groupingKey:null};$[te]=ee,_[te]=te,M[te]=W,z.add(te)}M[Lt]=j({},O,{children:B});const G=B.filter(J=>M[J].type==="leaf");e.current.caches.rows.dataRowIdToModelLookup=$,e.current.caches.rows.dataRowIdToIdLookup=_,e.current.setState(J=>j({},J,{rows:j({},J.rows,{dataRowIdToModelLookup:$,dataRowIdToIdLookup:_,dataRowIds:G,tree:M})})),e.current.publishEvent("rowsSet")},[e,t.signature,t.getRowId]),T={getRow:a,getRowId:u,getRowModels:x,getRowsCount:g,getAllRowIds:m,setRows:f,updateRows:p,getRowNode:b,getRowIndexRelativeToVisibleRows:v,unstable_replaceRows:L},I={setRowIndex:P,setRowChildrenExpansion:y,getRowGroupChildren:C},R=h.useCallback(()=>{n.info("Row grouping pre-processing have changed, regenerating the row tree");let D;e.current.caches.rows.rowsBeforePartialUpdates===t.rows?D=j({},e.current.caches.rows,{updates:{type:"full",rows:Wo(e)}}):D=ci({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),d({cache:D,throttle:!1})},[n,e,t.rows,t.getRowId,t.loading,t.rowCount,d]),N=h.useCallback(D=>{D==="rowTreeCreation"&&R()},[R]),F=h.useCallback(()=>{e.current.getActiveStrategy("rowTree")!==W1(e)&&R()},[e,R]);pe(e,"activeStrategyProcessorChange",N),pe(e,"strategyAvailabilityChange",F);const S=h.useCallback(()=>{e.current.setState(D=>{const w=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:dn(D,e.current.instanceId),treeDepths:Ih(D,e.current.instanceId),dataRowIds:Wo(D,e.current.instanceId),dataRowIdToModelLookup:Vn(D,e.current.instanceId),dataRowIdToIdLookup:Mi(D,e.current.instanceId)});return j({},D,{rows:j({},D.rows,w,{totalTopLevelRowCount:Ag({tree:w.tree,rowCountProp:t.rowCount})})})}),e.current.publishEvent("rowsSet"),e.current.forceUpdate()},[e,t.rowCount]);ku(e,"hydrateRows",S),De(e,T,"public"),De(e,I,t.signature===kn.DataGrid?"private":"public");const V=h.useRef(!0);h.useEffect(()=>{if(V.current){V.current=!1;return}const D=e.current.caches.rows.rowsBeforePartialUpdates===t.rows,w=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,E=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;if(D){w||(e.current.setState(M=>j({},M,{rows:j({},M.rows,{loading:t.loading})})),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),E||(e.current.setState(M=>j({},M,{rows:j({},M.rows,{totalRowCount:Math.max(t.rowCount||0,M.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,M.rows.totalTopLevelRowCount)})})),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate());return}n.debug(`Updating all rows, new length ${t.rows.length}`),d({cache:ci({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1})},[t.rows,t.rowCount,t.getRowId,t.loading,n,d,e])},bA=e=>{const t={[Lt]:j({},cP(),{children:e})};for(let n=0;n<e.length;n+=1){const o=e[n];t[o]={id:o,depth:0,parent:Lt,type:"leaf",groupingKey:null}}return{groupingName:Vr,tree:t,treeDepths:{0:e.length},dataRowIds:e}},vA=({previousTree:e,actions:t})=>{const n=j({},e),o={};for(let a=0;a<t.remove.length;a+=1){const l=t.remove[a];o[l]=!0,delete n[l]}for(let a=0;a<t.insert.length;a+=1){const l=t.insert[a];n[l]={id:l,depth:0,parent:Lt,type:"leaf",groupingKey:null}}const s=n[Lt];let i=[...s.children,...t.insert];return Object.values(o).length&&(i=i.filter(a=>!o[a])),n[Lt]=j({},s,{children:i}),{groupingName:Vr,tree:n,treeDepths:{0:i.length},dataRowIds:i}},CA=e=>e.updates.type==="full"?bA(e.updates.rows):vA({previousTree:e.previousTree,actions:e.updates.actions}),wA=e=>{Bi(e,Vr,"rowTreeCreation",CA)},Cx=(e,t)=>e==null||Array.isArray(e)?e:t&&t[0]===e?t:[e],jA=(e,t)=>{var n;return j({},e,{rowSelection:t.rowSelection?(n=Cx(t.rowSelectionModel))!=null?n:[]:[]})},SA=(e,t)=>{const n=kt(e,"useGridSelection"),o=w=>(...E)=>{t.rowSelection&&w(...E)},s=h.useMemo(()=>Cx(t.rowSelectionModel,rn(e.current.state)),[e,t.rowSelectionModel]),i=h.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:s,propOnChange:t.onRowSelectionModelChange,stateSelector:rn,changeEvent:"rowSelectionChange"});const{checkboxSelection:a,disableMultipleRowSelection:l,disableRowSelectionOnClick:u,isRowSelectable:c}=t,d=!l||a,f=qr(e,t),p=h.useCallback(w=>{var E;let M=w;const $=(E=i.current)!=null?E:w,_=e.current.isRowSelected(w);if(_){const O=ts(e),B=O.findIndex(G=>G===$),z=O.findIndex(G=>G===M);if(B===z)return;B>z?M=O[z+1]:M=O[z-1]}i.current=w,e.current.selectRowRange({startId:$,endId:M},!_)},[e]),x=h.useCallback(w=>{if(t.signature===kn.DataGrid&&!t.checkboxSelection&&Array.isArray(w)&&w.length>1)throw new Error(["MUI: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join(`
`));rn(e.current.state)!==w&&(n.debug("Setting selection model"),e.current.setState(M=>j({},M,{rowSelection:t.rowSelection?w:[]})),e.current.forceUpdate())},[e,n,t.rowSelection,t.signature,t.checkboxSelection]),g=h.useCallback(w=>rn(e.current.state).includes(w),[e]),m=h.useCallback(w=>{if(c&&!c(e.current.getRowParams(w)))return!1;const E=e.current.getRowNode(w);return!(E?.type==="footer"||E?.type==="pinnedRow")},[e,c]),v=h.useCallback(()=>mI(e),[e]),y=h.useCallback((w,E=!0,M=!1)=>{if(e.current.isRowSelectable(w))if(i.current=w,M)n.debug(`Setting selection for row ${w}`),e.current.setRowSelectionModel(E?[w]:[]);else{n.debug(`Toggling selection for row ${w}`);const _=rn(e.current.state).filter(B=>B!==w);E&&_.push(w),(_.length<2||d)&&e.current.setRowSelectionModel(_)}},[e,n,d]),b=h.useCallback((w,E=!0,M=!1)=>{n.debug("Setting selection for several rows");const $=w.filter(B=>e.current.isRowSelectable(B));let _;if(M)_=E?$:[];else{const B=j({},$i(e));$.forEach(z=>{E?B[z]=z:delete B[z]}),_=Object.values(B)}(_.length<2||d)&&e.current.setRowSelectionModel(_)},[e,n,d]),C=h.useCallback(({startId:w,endId:E},M=!0,$=!1)=>{if(!e.current.getRow(w)||!e.current.getRow(E))return;n.debug(`Expanding selection from row ${w} to row ${E}`);const _=ts(e),O=_.indexOf(w),B=_.indexOf(E),[z,G]=O>B?[B,O]:[O,B],J=_.slice(z,G+1);e.current.selectRows(J,M,$)},[e,n]),P={selectRow:y,setRowSelectionModel:x,getSelectedRows:v,isRowSelected:g,isRowSelectable:m},L={selectRows:b,selectRowRange:C};De(e,P,"public"),De(e,L,t.signature===kn.DataGrid?"private":"public");const T=h.useCallback(()=>{if(t.keepNonExistentRowsSelected)return;const w=rn(e.current.state),E=Vn(e),M=j({},$i(e));let $=!1;w.forEach(_=>{E[_]||(delete M[_],$=!0)}),$&&e.current.setRowSelectionModel(Object.values(M))},[e,t.keepNonExistentRowsSelected]),I=h.useCallback((w,E)=>{const M=E.metaKey||E.ctrlKey,$=!a&&!M&&!ZP(E),_=!d||$,O=e.current.isRowSelected(w);_?e.current.selectRow(w,$?!0:!O,!0):e.current.selectRow(w,!O,!1)},[e,d,a]),R=h.useCallback((w,E)=>{var M;if(u)return;const $=(M=E.target.closest(`.${H.cell}`))==null?void 0:M.getAttribute("data-field");if($===Eo.field||$===Su)return;if($){const O=e.current.getColumn($);if(O?.type===ma)return}e.current.getRowNode(w.id).type!=="pinnedRow"&&(E.shiftKey&&(d||a)?p(w.id):I(w.id,E))},[u,d,a,e,p,I]),N=h.useCallback((w,E)=>{if(d&&E.shiftKey){var M;(M=window.getSelection())==null||M.removeAllRanges()}},[d]),F=h.useCallback((w,E)=>{E.nativeEvent.shiftKey?p(w.id):e.current.selectRow(w.id,w.value)},[e,p]),S=h.useCallback(w=>{const M=t.checkboxSelectionVisibleOnly&&t.pagination?Yg(e):ts(e),$=yt(e);e.current.selectRows(M,w.value,$?.items.length>0)},[e,t.checkboxSelectionVisibleOnly,t.pagination]),V=h.useCallback((w,E)=>{if(e.current.getCellMode(w.id,w.field)!==Ke.Edit&&!Ps(E)){if(_i(E.key)&&E.shiftKey){const M=Yt(e);if(M&&M.id!==w.id){E.preventDefault();const $=e.current.isRowSelected(M.id);if(!d){e.current.selectRow(M.id,!$,!0);return}const _=e.current.getRowIndexRelativeToVisibleRows(M.id),O=e.current.getRowIndexRelativeToVisibleRows(w.id);let B,z;_>O?$?(B=O,z=_-1):(B=O,z=_):$?(B=_+1,z=O):(B=_,z=O);const G=f.rows.slice(B,z+1).map(J=>J.id);e.current.selectRows(G,!$);return}}if(E.key===" "&&E.shiftKey){E.preventDefault(),I(w.id,E);return}E.key==="a"&&(E.ctrlKey||E.metaKey)&&(E.preventDefault(),b(e.current.getAllRowIds(),!0))}},[e,I,b,f.rows,d]);pe(e,"sortedRowsSet",o(T)),pe(e,"rowClick",o(R)),pe(e,"rowSelectionCheckboxChange",o(F)),pe(e,"headerSelectionCheckboxChange",S),pe(e,"cellMouseDown",o(N)),pe(e,"cellKeyDown",o(V)),h.useEffect(()=>{s!==void 0&&e.current.setRowSelectionModel(s)},[e,s,t.rowSelection]),h.useEffect(()=>{t.rowSelection||e.current.setRowSelectionModel([])},[e,t.rowSelection]);const D=s!=null;h.useEffect(()=>{if(D||!t.rowSelection)return;const w=rn(e.current.state);if(m){const E=w.filter(M=>m(M));E.length<w.length&&e.current.setRowSelectionModel(E)}},[e,m,D,t.rowSelection]),h.useEffect(()=>{if(!t.rowSelection||D)return;const w=rn(e.current.state);!d&&w.length>1&&e.current.setRowSelectionModel([])},[e,d,a,D,t.rowSelection])},PA={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorEquals:"Equals",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>e!==1?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},kA=e=>{const{classes:t}=e;return h.useMemo(()=>Te({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},He,t),[t])},IA=(e,t)=>{const n={classes:t.classes},o=kA(n),s=h.useCallback(i=>{const a=j({},Eo,{cellClassName:o.cellCheckbox,headerClassName:o.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),l=t.checkboxSelection,u=i.lookup[Xn]!=null;return l&&!u?(i.lookup[Xn]=a,i.orderedFields=[Xn,...i.orderedFields]):!l&&u?(delete i.lookup[Xn],i.orderedFields=i.orderedFields.filter(c=>c!==Xn)):l&&u&&(i.lookup[Xn]=j({},a,i.lookup[Xn])),i},[e,o,t.checkboxSelection]);ut(e,"hydrateColumns",s)},TA=(e,t)=>{var n,o,s;const i=(n=(o=t.sortModel)!=null?o:(s=t.initialState)==null||(s=s.sorting)==null?void 0:s.sortModel)!=null?n:[];return j({},e,{sorting:{sortModel:Xg(i,t.disableMultipleColumnsSorting),sortedRows:[]}})},EA=(e,t)=>{var n;const o=kt(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:tn,changeEvent:"sortModelChange"});const s=h.useCallback((T,I)=>{const R=tn(e),N=R.findIndex(S=>S.field===T);let F=[...R];return N>-1?I?F.splice(N,1,I):F.splice(N,1):F=[...R,I],F},[e]),i=h.useCallback((T,I)=>{var R;const F=tn(e).find(V=>V.field===T.field);if(F){var S;const V=I===void 0?Rh((S=T.sortingOrder)!=null?S:t.sortingOrder,F.sort):I;return V==null?void 0:j({},F,{sort:V})}return{field:T.field,sort:I===void 0?Rh((R=T.sortingOrder)!=null?R:t.sortingOrder):I}},[e,t.sortingOrder]),a=h.useCallback((T,I)=>I==null||I.sortable===!1?T:(I.sortingOrder||t.sortingOrder).some(N=>!!N)?[...T,"columnMenuSortItem"]:T,[t.sortingOrder]),l=h.useCallback(()=>{e.current.setState(T=>{if(t.sortingMode==="server")return o.debug("Skipping sorting rows as sortingMode = server"),j({},T,{sorting:j({},T.sorting,{sortedRows:mu(dn(e),Lt,!1)})});const I=tn(T,e.current.instanceId),R=vI(I,e),N=e.current.applyStrategyProcessor("sorting",{sortRowList:R});return j({},T,{sorting:j({},T.sorting,{sortedRows:N})})}),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()},[e,o,t.sortingMode]),u=h.useCallback(T=>{tn(e)!==T&&(o.debug("Setting sort model"),e.current.setState(Mh(T,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())},[e,o,t.disableMultipleColumnsSorting]),c=h.useCallback((T,I,R)=>{if(!T.sortable)return;const N=i(T,I);let F;!R||t.disableMultipleColumnsSorting?F=N?[N]:[]:F=s(T.field,N),e.current.setSortModel(F)},[e,s,i,t.disableMultipleColumnsSorting]),d=h.useCallback(()=>tn(e),[e]),f=h.useCallback(()=>hu(e).map(I=>I.model),[e]),p=h.useCallback(()=>du(e),[e]),x=h.useCallback(T=>e.current.getSortedRowIds()[T],[e]);De(e,{getSortModel:d,getSortedRows:f,getSortedRowIds:p,getRowIdFromRowIndex:x,setSortModel:u,sortColumn:c,applySorting:l},"public");const m=h.useCallback((T,I)=>{var R;const N=tn(e);return!I.exportOnlyDirtyModels||t.sortModel!=null||((R=t.initialState)==null||(R=R.sorting)==null?void 0:R.sortModel)!=null||N.length>0?j({},T,{sorting:{sortModel:N}}):T},[e,t.sortModel,(n=t.initialState)==null||(n=n.sorting)==null?void 0:n.sortModel]),v=h.useCallback((T,I)=>{var R;const N=(R=I.stateToRestore.sorting)==null?void 0:R.sortModel;return N==null?T:(e.current.setState(Mh(N,t.disableMultipleColumnsSorting)),j({},T,{callbacks:[...T.callbacks,e.current.applySorting]}))},[e,t.disableMultipleColumnsSorting]),y=h.useCallback(T=>{const I=dn(e),R=I[Lt],N=T.sortRowList?T.sortRowList(R.children.map(F=>I[F])):[...R.children];return R.footerId!=null&&N.push(R.footerId),N},[e]);ut(e,"exportState",m),ut(e,"restoreState",v),Bi(e,Vr,"sorting",y);const b=h.useCallback(({colDef:T},I)=>{const R=I.shiftKey||I.metaKey||I.ctrlKey;c(T,void 0,R)},[c]),C=h.useCallback(({colDef:T},I)=>{QP(I.key)&&!I.ctrlKey&&!I.metaKey&&c(T,void 0,I.shiftKey)},[c]),P=h.useCallback(()=>{const T=tn(e),I=ko(e);if(T.length>0){const R=T.filter(N=>I[N.field]);R.length<T.length&&e.current.setSortModel(R)}},[e]),L=h.useCallback(T=>{T==="sorting"&&e.current.applySorting()},[e]);ut(e,"columnMenu",a),pe(e,"columnHeaderClick",b),pe(e,"columnHeaderKeyDown",C),pe(e,"rowsSet",e.current.applySorting),pe(e,"columnsChange",P),pe(e,"activeStrategyProcessorChange",L),ks(()=>{e.current.applySorting()}),St(()=>{t.sortModel!==void 0&&e.current.setSortModel(t.sortModel)},[e,t.sortModel])};function rf(e){const{clientHeight:t,scrollTop:n,offsetHeight:o,offsetTop:s}=e,i=s+o;if(o>t)return s;if(i-t>n)return i-t;if(s<n)return s}const AA=(e,t)=>{const n=_t(),o=kt(e,"useGridScroll"),s=e.current.columnHeadersElementRef,i=e.current.virtualScrollerRef,a=se(e,gr),l=h.useCallback(f=>{const p=ua(e),x=jt(e);if(!(f.rowIndex==null)&&p===0||x.length===0)return!1;o.debug(`Scrolling to cell at row ${f.rowIndex}, col: ${f.colIndex} `);let m={};if(f.colIndex!=null){const C=Co(e);let P;if(typeof f.rowIndex<"u"){var v;const L=(v=a[f.rowIndex])==null?void 0:v.id,T=e.current.unstable_getCellColSpanInfo(L,f.colIndex);T&&!T.spannedByColSpan&&(P=T.cellProps.width)}typeof P>"u"&&(P=x[f.colIndex].computedWidth),m.left=rf({clientHeight:i.current.clientWidth,scrollTop:Math.abs(i.current.scrollLeft),offsetHeight:P,offsetTop:C[f.colIndex]})}if(f.rowIndex!=null){var y,b;const C=ds(e.current.state),P=dI(e),L=Qg(e),T=t.pagination?f.rowIndex-P*L:f.rowIndex,I=C.positions[T+1]?C.positions[T+1]-C.positions[T]:C.currentPageTotalHeight-C.positions[T],R=((y=i.current.querySelector(`.${H["pinnedRows--top"]}`))==null?void 0:y.clientHeight)||0,N=((b=i.current.querySelector(`.${H["pinnedRows--bottom"]}`))==null?void 0:b.clientHeight)||0;m.top=rf({clientHeight:i.current.clientHeight-R-N,scrollTop:i.current.scrollTop,offsetHeight:I,offsetTop:C.positions[T]})}return m=e.current.unstable_applyPipeProcessors("scrollToIndexes",m,f),typeof m.left!==void 0||typeof m.top!==void 0?(e.current.scroll(m),!0):!1},[o,e,i,t.pagination,a]),u=h.useCallback(f=>{if(i.current&&f.left!=null&&s.current){const p=n.direction==="rtl"?-1:1;s.current.scrollLeft=f.left,i.current.scrollLeft=p*f.left,o.debug(`Scrolling left: ${f.left}`)}i.current&&f.top!=null&&(i.current.scrollTop=f.top,o.debug(`Scrolling top: ${f.top}`)),o.debug("Scrolling, updating container, and viewport")},[i,n.direction,s,o]),c=h.useCallback(()=>i!=null&&i.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0},[i]);De(e,{scroll:u,scrollToIndexes:l,getScrollPosition:c},"public")};function MA(e,t){tt(e,"columnHeaderClick",t.onColumnHeaderClick),tt(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),tt(e,"columnHeaderOver",t.onColumnHeaderOver),tt(e,"columnHeaderOut",t.onColumnHeaderOut),tt(e,"columnHeaderEnter",t.onColumnHeaderEnter),tt(e,"columnHeaderLeave",t.onColumnHeaderLeave),tt(e,"cellClick",t.onCellClick),tt(e,"cellDoubleClick",t.onCellDoubleClick),tt(e,"cellKeyDown",t.onCellKeyDown),tt(e,"preferencePanelClose",t.onPreferencePanelClose),tt(e,"preferencePanelOpen",t.onPreferencePanelOpen),tt(e,"menuOpen",t.onMenuOpen),tt(e,"menuClose",t.onMenuClose),tt(e,"rowDoubleClick",t.onRowDoubleClick),tt(e,"rowClick",t.onRowClick),tt(e,"stateChange",t.onStateChange)}const RA=({content:e,container:t,scrollBarSize:n})=>{const o=e.width>t.width,s=e.height>t.height;let i=!1,a=!1;return(o||s)&&(i=o,a=e.height+(i?n:0)>t.height,a&&(i=e.width+n>t.width)),{hasScrollX:i,hasScrollY:a}};function DA(e,t){const n=kt(e,"useResizeContainer"),o=h.useRef(!1),s=h.useRef(null),i=h.useRef(null),a=se(e,ds),l=se(e,To),u=Math.floor(t.rowHeight*l),c=Iu(e,t.columnHeaderHeight),d=h.useCallback(()=>{var I;const R=(I=e.current.rootElementRef)==null?void 0:I.current,N=uu(e),F=Rg(e);if(!s.current)return;let S;if(t.scrollbarSize!=null)S=t.scrollbarSize;else if(!N||!R)S=0;else{const O=Ui(R).createElement("div");O.style.width="99px",O.style.height="99px",O.style.position="absolute",O.style.overflow="scroll",O.className="scrollDiv",R.appendChild(O),S=O.offsetWidth-O.clientWidth,R.removeChild(O)}let V,D,w;if(t.autoHeight)w=!1,D=Math.round(N)>Math.round(s.current.width),V={width:s.current.width,height:a.currentPageTotalHeight+(D?S:0)};else{V={width:s.current.width,height:Math.max(s.current.height-c,0)};const _=RA({content:{width:Math.round(N),height:a.currentPageTotalHeight},container:{width:Math.round(V.width),height:V.height-F.top-F.bottom},scrollBarSize:S});w=_.hasScrollY,D=_.hasScrollX}const E={width:V.width-(w?S:0),height:V.height-(D?S:0)},M={viewportOuterSize:V,viewportInnerSize:E,hasScrollX:D,hasScrollY:w,scrollBarSize:S},$=i.current;i.current=M,(M.viewportInnerSize.width!==$?.viewportInnerSize.width||M.viewportInnerSize.height!==$?.viewportInnerSize.height)&&e.current.publishEvent("viewportInnerSizeChange",M.viewportInnerSize)},[e,t.scrollbarSize,t.autoHeight,a.currentPageTotalHeight,c]),[f,p]=h.useState(),x=h.useMemo(()=>Kf(p,60),[]),g=h.useRef();St(()=>{f&&(d(),e.current.publishEvent("debouncedResize",s.current))},[e,f,d]);const m=h.useCallback(()=>{e.current.computeSizeAndPublishResizeEvent()},[e]),v=h.useCallback(()=>i.current,[]),y=h.useCallback(()=>{const I=e.current.getRootDimensions();if(!I)return 0;const R=Ni(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){const F=e.current.getRenderContext(),S=F.lastRowIndex-F.firstRowIndex;return Math.min(S-1,R.rows.length)}const N=Math.floor(I.viewportInnerSize.height/u);return Math.min(N,R.rows.length)},[e,t.pagination,t.paginationMode,t.getRowHeight,u]),b=h.useCallback(()=>{var I,R,N;const F=(I=e.current.mainElementRef)==null?void 0:I.current;if(!F)return;const V=wy(F).getComputedStyle(F),D=parseFloat(V.height)||0,w=parseFloat(V.width)||0,E=D!==((R=g.current)==null?void 0:R.height),M=w!==((N=g.current)==null?void 0:N.width);if(!g.current||E||M){const $={width:w,height:D};e.current.publishEvent("resize",$),g.current=$}},[e]),C={resize:m,getRootDimensions:v},P={getViewportPageSize:y,updateGridDimensionsRef:d,computeSizeAndPublishResizeEvent:b};De(e,C,"public"),De(e,P,"private");const L=h.useRef(!0),T=h.useCallback(I=>{s.current=I;const R=/jsdom/.test(window.navigator.userAgent);if(I.height===0&&!o.current&&!t.autoHeight&&!R&&(n.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),I.width===0&&!o.current&&!R&&(n.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),o.current=!0),L.current){p(I),L.current=!1;return}x(I)},[t.autoHeight,x,n]);St(()=>d(),[d]),tt(e,"sortedRowsSet",d),tt(e,"paginationModelChange",d),tt(e,"columnsChange",d),pe(e,"resize",T),tt(e,"debouncedResize",t.onResize)}const FA=["style"],OA=["style"];function jo(e,t,n=0,o=t.length){if(t.length<=0)return-1;if(n>=o)return n;const s=n+Math.floor((o-n)/2),i=t[s];return e<=i?jo(e,t,n,s):jo(e,t,s+1,o)}function LA(e,t,n){let o=1;for(;n<t.length&&Math.abs(t[n])<e;)n+=o,o*=2;return jo(e,t,Math.floor(n/2),Math.min(n,t.length))}const tr=({firstIndex:e,lastIndex:t,buffer:n,minFirstIndex:o,maxLastIndex:s})=>[wo(e-n,o,s),wo(t+n,o,s)],wx=(e,t)=>e===t?!0:e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex,_A={maxSize:3},$A=e=>{const t=mr(),n=fe(),o=se(t,jt),s=se(t,II),i=se(t,nx),{ref:a,onRenderZonePositioning:l,renderZoneMinColumnIndex:u=0,renderZoneMaxColumnIndex:c=o.length,getRowProps:d}=e,f=_t(),p=se(t,Co),x=se(t,uu),g=se(t,Yt),m=se(t,Di),v=se(t,ds),y=se(t,$i),b=qr(t,n),C=h.useRef(null),P=h.useRef(null),L=Hr(a,P),[T,I]=h.useState(null),R=h.useRef(T),N=h.useRef({top:0,left:0}),[F,S]=h.useState({width:null,height:null}),V=h.useRef(x),[D,w]=h.useState(null),E=h.useRef(Object.create(null)),M=h.useRef(),$=h.useRef(),_=h.useRef(aa((Z,xe,me,Pe,be,Ae)=>{let We;const Ge=Z.slice(xe,me);return Ae>-1&&(xe>Ae&&Ae>=Pe||me<Ae&&Ae<be)&&(We=Ae),{focusedCellColumnIndexNotInRange:We,renderedColumns:Ge}},_A)),O=h.useMemo(()=>g!==null?o.findIndex(Z=>Z.field===g.field):-1,[g,o]),B=h.useCallback(()=>{if(!s)return{firstRowIndex:0,lastRowIndex:b.rows.length,firstColumnIndex:0,lastColumnIndex:o.length};const{top:Z,left:xe}=N.current,me=Math.min(of(t,b,v,Z),v.positions.length-1),Pe=n.autoHeight?me+b.rows.length:of(t,b,v,Z+F.height);let be=0,Ae=p.length;if(i){let We=!1;const[Ge,xt]=tr({firstIndex:me,lastIndex:Pe,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer});for(let Ie=Ge;Ie<xt&&!We;Ie+=1){const oe=b.rows[Ie];We=t.current.rowHasAutoHeight(oe.id)}We||(be=jo(Math.abs(xe),p),Ae=jo(Math.abs(xe)+F.width,p))}return{firstRowIndex:me,lastRowIndex:Pe,firstColumnIndex:be,lastColumnIndex:Ae}},[s,i,v,n.autoHeight,n.rowBuffer,b,p,o.length,t,F]);St(()=>{s?(P.current.scrollLeft=0,P.current.scrollTop=0):C.current.style.transform="translate3d(0px, 0px, 0px)"},[s]),St(()=>{S({width:P.current.clientWidth,height:P.current.clientHeight})},[v.currentPageTotalHeight]);const z=h.useCallback(()=>{P.current&&S({width:P.current.clientWidth,height:P.current.clientHeight})},[]);pe(t,"debouncedResize",z);const G=h.useCallback(Z=>{const[xe,me]=tr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer}),[Pe]=tr({firstIndex:Z.firstColumnIndex,lastIndex:Z.lastColumnIndex,minFirstIndex:u,maxLastIndex:c,buffer:n.columnBuffer}),be=ic({firstColumnToRender:Pe,apiRef:t,firstRowToRender:xe,lastRowToRender:me,visibleRows:b.rows}),Ae=f.direction==="ltr"?1:-1,We=ds(t.current.state).positions[xe],Ge=Ae*Co(t)[be];C.current.style.transform=`translate3d(${Ge}px, ${We}px, 0px)`,typeof l=="function"&&l({top:We,left:Ge})},[t,b.rows,l,u,c,n.columnBuffer,n.rowBuffer,f.direction]),J=h.useCallback(()=>R.current,[]),ee=h.useCallback(Z=>{if(R.current&&wx(Z,R.current)){G(Z);return}I(Z),G(Z);const[xe,me]=tr({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:n.rowBuffer});t.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:xe,lastRowToRender:me}),R.current=Z},[t,I,R,b.rows.length,n.rowBuffer,G]);St(()=>{if(F.width==null)return;const Z=B();ee(Z);const{top:xe,left:me}=N.current,Pe={top:xe,left:me,renderContext:Z};t.current.publishEvent("scrollPositionChange",Pe)},[t,B,F.width,ee]);const te=fn(Z=>{const{scrollTop:xe,scrollLeft:me}=Z.currentTarget;if(N.current.top=xe,N.current.left=me,!R.current||xe<0||f.direction==="ltr"&&me<0||f.direction==="rtl"&&me>0)return;const Pe=s?B():R.current,be=Math.abs(Pe.firstRowIndex-R.current.firstRowIndex),Ae=Math.abs(Pe.lastRowIndex-R.current.lastRowIndex),We=Math.abs(Pe.firstColumnIndex-R.current.firstColumnIndex),Ge=Math.abs(Pe.lastColumnIndex-R.current.lastColumnIndex),xt=be>=n.rowThreshold||Ae>=n.rowThreshold||We>=n.columnThreshold||Ge>=n.columnThreshold||V.current!==x;t.current.publishEvent("scrollPositionChange",{top:xe,left:me,renderContext:xt?Pe:R.current},Z),xt&&(Tc.flushSync(()=>{ee(Pe)}),V.current=x)}),ve=fn(Z=>{t.current.publishEvent("virtualScrollerWheel",{},Z)}),W=fn(Z=>{t.current.publishEvent("virtualScrollerTouchMove",{},Z)}),Q=h.useMemo(()=>g!==null?b.rows.findIndex(Z=>Z.id===g.id):-1,[g,b.rows]);pe(t,"rowMouseOver",(Z,xe)=>{var me;xe.currentTarget.contains(xe.relatedTarget)||w((me=Z.id)!=null?me:null)}),pe(t,"rowMouseOut",(Z,xe)=>{xe.currentTarget.contains(xe.relatedTarget)||w(null)});const ie=(Z={renderContext:T})=>{var xe;const{onRowRender:me,renderContext:Pe,minFirstColumn:be=u,maxLastColumn:Ae=c,availableSpace:We=F.width,rowIndexOffset:Ge=0,position:xt="center"}=Z;if(!Pe||We==null)return null;const Ie=s?n.rowBuffer:0,oe=s?n.columnBuffer:0,[he,Ce]=tr({firstIndex:Pe.firstRowIndex,lastIndex:Pe.lastRowIndex,minFirstIndex:0,maxLastIndex:b.rows.length,buffer:Ie}),_e=[];if(Z.rows)Z.rows.forEach(vt=>{_e.push(vt),t.current.calculateColSpan({rowId:vt.id,minFirstColumn:be,maxLastColumn:Ae,columns:o})});else{if(!b.range)return null;for(let vt=he;vt<Ce;vt+=1){const dt=b.rows[vt];_e.push(dt),t.current.calculateColSpan({rowId:dt.id,minFirstColumn:be,maxLastColumn:Ae,columns:o})}}let st=!1;if(Q>-1){const vt=b.rows[Q];(he>Q||Ce<Q)&&(st=!0,Q>he?_e.push(vt):_e.unshift(vt),t.current.calculateColSpan({rowId:vt.id,minFirstColumn:be,maxLastColumn:Ae,columns:o}))}const[an,bn]=tr({firstIndex:Pe.firstColumnIndex,lastIndex:Pe.lastColumnIndex,minFirstIndex:be,maxLastIndex:Ae,buffer:oe}),Kr=ic({firstColumnToRender:an,apiRef:t,firstRowToRender:he,lastRowToRender:Ce,visibleRows:b.rows});let Ds=!1;(Kr>O||bn<O)&&(Ds=!0);const{focusedCellColumnIndexNotInRange:It,renderedColumns:Tt}=_.current(o,Kr,bn,be,Ae,Ds?O:-1),yr=((xe=n.slotProps)==null?void 0:xe.row)||{},{style:br}=yr,ja=le(yr,FA);(M.current!==d||$.current!==br)&&(E.current=Object.create(null));const Fs=[];let Du=!1;for(let vt=0;vt<_e.length;vt+=1){var Fu;const{id:dt,model:Ou}=_e[vt],oy=st&&g.id===dt,sy=st?he+vt===b.rows.length:he+vt===b.rows.length-1,iy=t.current.rowHasAutoHeight(dt)?"auto":t.current.unstable_getRowHeight(dt);let Sa;y[dt]==null?Sa=!1:Sa=t.current.isRowSelectable(dt),me&&me(dt);const Lu=g!==null&&g.id===dt?g.field:null,_u=It!==void 0&&o[It],ay=_u&&Lu?[_u,...Tt]:Tt;let $u=null;m!==null&&m.id===dt&&($u=t.current.getCellParams(dt,m.field).cellMode==="view"?m.field:null);const Nu=typeof d=="function"&&d(dt,Ou)||{},{style:ly}=Nu,cy=le(Nu,OA);if(!E.current[dt]){const Vu=j({},ly,br);E.current[dt]=Vu}let Pa=Ge+((b==null||(Fu=b.range)==null?void 0:Fu.firstRowIndex)||0)+he+vt;st&&g?.id===dt?(Pa=Q,Du=!0):Du&&(Pa-=1),Fs.push(r.jsx(n.slots.row,j({row:Ou,rowId:dt,focusedCellColumnIndexNotInRange:It,isNotVisible:oy,rowHeight:iy,focusedCell:Lu,tabbableCell:$u,renderedColumns:ay,visibleColumns:o,firstColumnToRender:Kr,lastColumnToRender:bn,selected:Sa,index:Pa,containerWidth:We,isLastVisible:sy,position:xt},cy,ja,{hovered:D===dt,style:E.current[dt]}),dt))}return M.current=d,$.current=br,Fs},X=F.width&&x>=F.width,ne=h.useMemo(()=>{const Z=Math.max(v.currentPageTotalHeight,1);let xe=!1;P!=null&&P.current&&Z<=P?.current.clientHeight&&(xe=!0);const me={width:X?x:"auto",height:Z,minHeight:xe?"100%":"auto"};return n.autoHeight&&b.rows.length===0&&(me.height=Dg(t,n.rowHeight)),me},[t,P,x,v.currentPageTotalHeight,X,n.autoHeight,n.rowHeight,b.rows.length]);h.useEffect(()=>{t.current.publishEvent("virtualScrollerContentSizeChange")},[t,ne]);const je=h.useMemo(()=>{const Z={};return X||(Z.overflowX="hidden"),n.autoHeight&&(Z.overflowY="hidden"),Z},[X,n.autoHeight]);return t.current.register("private",{getRenderContext:J}),{renderContext:T,updateRenderZonePosition:G,getRows:ie,getRootProps:(Z={})=>j({ref:L,onScroll:te,onWheel:ve,onTouchMove:W},Z,{style:Z.style?j({},Z.style,je):je,role:"presentation"}),getContentProps:({style:Z}={})=>({style:Z?j({},Z,ne):ne,role:"presentation"}),getRenderZoneProps:()=>({ref:C,role:"rowgroup"})}};function of(e,t,n,o){var s,i;const a=e.current.getLastMeasuredRowIndex();let l=a===1/0;(s=t.range)!=null&&s.lastRowIndex&&!l&&(l=a>=t.range.lastRowIndex);const u=wo(a-(((i=t.range)==null?void 0:i.firstRowIndex)||0),0,n.positions.length);return l||n.positions[u]>=o?jo(o,n.positions):LA(o,n.positions,u)}const NA=e=>{const{classes:t,headerAlign:n,isDragging:o,showColumnBorder:s,groupId:i}=e;return Te({root:["columnHeader",n==="left"&&"columnHeader--alignLeft",n==="center"&&"columnHeader--alignCenter",n==="right"&&"columnHeader--alignRight",o&&"columnHeader--moving",s&&"columnHeader--showColumnBorder",s&&"columnHeader--withRightBorder","withBorderColor",i===null?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},He,t)};function VA(e){var t;const{groupId:n,width:o,depth:s,maxDepth:i,fields:a,height:l,colIndex:u,hasFocus:c,tabIndex:d,isLastColumn:f}=e,p=fe(),x=h.useRef(null),g=Be(),m=se(g,wg),v=n?m[n]:{},{headerName:y=n??"",description:b="",headerAlign:C=void 0}=v;let P;const L=n&&((t=m[n])==null?void 0:t.renderHeaderGroup),T=h.useMemo(()=>({groupId:n,headerName:y,description:b,depth:s,maxDepth:i,fields:a,colIndex:u,isLastColumn:f}),[n,y,b,s,i,a,u,f]);n&&L&&(P=L(T));const I=p.showColumnVerticalBorder,R=j({},e,{classes:p.classes,showColumnBorder:I,headerAlign:C,depth:s,isDragging:!1}),N=y??n,F=mt(),S=n===null?`empty-group-cell-${F}`:n,V=NA(R);h.useLayoutEffect(()=>{if(c){const $=x.current.querySelector('[tabindex="0"]')||x.current;$?.focus()}},[g,c]);const D=h.useCallback(M=>$=>{Ps($)||g.current.publishEvent(M,T,$)},[g,T]),w=h.useMemo(()=>({onKeyDown:D("columnGroupHeaderKeyDown"),onFocus:D("columnGroupHeaderFocus"),onBlur:D("columnGroupHeaderBlur")}),[D]),E=typeof v.headerClassName=="function"?v.headerClassName(T):v.headerClassName;return r.jsx(zg,j({ref:x,classes:V,columnMenuOpen:!1,colIndex:u,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:d,isDraggable:!1,headerComponent:P,headerClassName:E,description:b,elementId:S,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:N,"aria-colspan":a.length,"data-fields":`|-${a.join("-|-")}-|`},w))}const sf=Xe("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})(()=>({display:"flex"}));function BA(e){return!!e.target}const HA=e=>{const{innerRef:t,minColumnIndex:n=0,visibleColumns:o,sortColumnLookup:s,filterColumnLookup:i,columnPositions:a,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:u,columnHeaderFocus:c,columnGroupHeaderFocus:d,densityFactor:f,headerGroupingMaxDepth:p,columnMenuState:x,columnVisibility:g,columnGroupsHeaderStructure:m,hasOtherElementInTabSequence:v}=e,y=_t(),[b,C]=h.useState(""),[P,L]=h.useState(""),T=mr(),I=se(T,nx),R=fe(),N=h.useRef(null),F=Hr(t,N),[S,V]=h.useState(null),D=h.useRef(S),w=h.useRef(0),E=qr(T,R),M=Iu(T,R.columnHeaderHeight),$=Math.floor(R.columnHeaderHeight*f),_=h.useCallback(X=>{S&&X&&wx(S,X)||V(X)},[S]);h.useEffect(()=>{var X;(X=T.current.columnHeadersContainerElementRef)!=null&&X.current&&(T.current.columnHeadersContainerElementRef.current.scrollLeft=0)},[T]);const O=h.useRef(aa(F2,{equalityCheck:(X,ne)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every(je=>X[je]===ne[je])})),B=h.useCallback(X=>{const[ne,je]=tr({firstIndex:X.firstRowIndex,lastIndex:X.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:R.rowBuffer}),Z=O.current({firstColumnIndex:X.firstColumnIndex,minColumnIndex:n,columnBuffer:R.columnBuffer,firstRowToRender:ne,lastRowToRender:je,apiRef:T,visibleRows:E.rows}),xe=y.direction==="ltr"?1:-1,me=Z>0?w.current-xe*a[Z]:w.current;N.current.style.transform=`translate3d(${-me}px, 0px, 0px)`},[a,n,R.columnBuffer,T,E.rows,R.rowBuffer,y.direction]);h.useLayoutEffect(()=>{S&&B(S)},[S,B]);const z=h.useCallback(({left:X,renderContext:ne=null},je)=>{var Z,xe;if(!N.current||w.current===X&&((Z=D.current)==null?void 0:Z.firstColumnIndex)===ne?.firstColumnIndex&&((xe=D.current)==null?void 0:xe.lastColumnIndex)===ne?.lastColumnIndex)return;w.current=X;let me=!1;ne!==D.current||!D.current?(BA(je)?(Tc.flushSync(()=>{_(ne)}),me=!0):_(ne),D.current=ne):me=!0,ne&&me&&B(ne)},[B,_]),G=h.useCallback(X=>L(X.field),[]),J=h.useCallback(()=>L(""),[]),ee=h.useCallback(X=>C(X.field),[]),te=h.useCallback(()=>C(""),[]);pe(T,"columnResizeStart",G),pe(T,"columnResizeStop",J),pe(T,"columnHeaderDragStart",ee),pe(T,"columnHeaderDragEnd",te),pe(T,"scrollPositionChange",z);const ve=X=>{const{renderContext:ne=S,minFirstColumn:je=n,maxLastColumn:Z=o.length}=X||{};if(!ne)return null;const[xe,me]=tr({firstIndex:ne.firstRowIndex,lastIndex:ne.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:R.rowBuffer}),Pe=I?O.current({firstColumnIndex:ne.firstColumnIndex,minColumnIndex:je,columnBuffer:R.columnBuffer,apiRef:T,firstRowToRender:xe,lastRowToRender:me,visibleRows:E.rows}):0,be=I?Math.min(ne.lastColumnIndex+R.columnBuffer,Z):Z;return{renderedColumns:o.slice(Pe,be),firstColumnToRender:Pe,lastColumnToRender:be,minFirstColumn:je,maxLastColumn:Z}},W=(X,ne={})=>{const je=ve(X);if(je==null)return null;const{renderedColumns:Z,firstColumnToRender:xe}=je,me=[];for(let Pe=0;Pe<Z.length;Pe+=1){const be=Z[Pe],Ae=xe+Pe,We=Ae===0,Ge=l!==null&&l.field===be.field||We&&!v?0:-1,xt=c!==null&&c.field===be.field,Ie=x.open&&x.field===be.field;me.push(r.jsx(Yk,j({},s[be.field],{columnMenuOpen:Ie,filterItemsCounter:i[be.field]&&i[be.field].length,headerHeight:$,isDragging:be.field===b,colDef:be,colIndex:Ae,isResizing:P===be.field,hasFocus:xt,tabIndex:Ge},ne),be.field))}return r.jsx(sf,{role:"row","aria-rowindex":p+1,ownerState:R,children:me})},Q=X=>{if(p===0)return null;const ne=ve(X);if(ne==null||ne.renderedColumns.length===0)return null;const{firstColumnToRender:je,lastColumnToRender:Z}=ne,xe=[],me=[];for(let Ae=0;Ae<p;Ae+=1){var Pe,be;const We=m[Ae],Ge=o[je].field,xt=(Pe=T.current.unstable_getColumnGroupPath(Ge)[Ae])!=null?Pe:null,Ie=We.findIndex(({groupId:It,columnFields:Tt})=>It===xt&&Tt.includes(Ge)),oe=o[Z-1].field,he=(be=T.current.unstable_getColumnGroupPath(oe)[Ae])!=null?be:null,Ce=We.findIndex(({groupId:It,columnFields:Tt})=>It===he&&Tt.includes(oe)),_e=We.slice(Ie,Ce+1).map(It=>j({},It,{columnFields:It.columnFields.filter(Tt=>g[Tt]!==!1)})).filter(It=>It.columnFields.length>0),st=_e[0].columnFields.indexOf(Ge),bn=_e[0].columnFields.slice(0,st).reduce((It,Tt)=>{var yr;const br=T.current.getColumn(Tt);return It+((yr=br.computedWidth)!=null?yr:0)},0);let Kr=je;const Ds=_e.map(({groupId:It,columnFields:Tt})=>{const yr=d!==null&&d.depth===Ae&&Tt.includes(d.field),br=u!==null&&u.depth===Ae&&Tt.includes(u.field)?0:-1,ja={groupId:It,width:Tt.reduce((Ru,Fs)=>Ru+T.current.getColumn(Fs).computedWidth,0),fields:Tt,colIndex:Kr,hasFocus:yr,tabIndex:br};return Kr+=Tt.length,ja});me.push({leftOverflow:bn,elements:Ds})}return me.forEach((Ae,We)=>{xe.push(r.jsx(sf,{style:{height:`${$}px`,transform:`translateX(-${Ae.leftOverflow}px)`},role:"row","aria-rowindex":We+1,ownerState:R,children:Ae.elements.map(({groupId:Ge,width:xt,fields:Ie,colIndex:oe,hasFocus:he,tabIndex:Ce},_e)=>r.jsx(VA,{groupId:Ge,width:xt,fields:Ie,colIndex:oe,depth:We,isLastColumn:oe===o.length-Ie.length,maxDepth:me.length,height:$,hasFocus:he,tabIndex:Ce},_e))},We))}),xe},ie={minHeight:M,maxHeight:M,lineHeight:`${$}px`};return{renderContext:S,getColumnHeaders:W,getColumnsToRender:ve,getColumnGroupHeaders:Q,isDragging:!!b,getRootProps:(X={})=>j({style:ie},X),getInnerProps:()=>({ref:F,role:"rowgroup"}),headerHeight:$}},zA=["className"],GA=e=>{const{classes:t}=e;return Te({root:["columnHeaders","withBorderColor"]},He,t)},UA=Pt("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})({position:"relative",overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:"1px solid",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),WA=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,zA),i=fe(),a=GA(i);return r.jsx(UA,j({ref:n,className:$e(o,a.root),ownerState:i},s,{role:"presentation"}))}),qA=["isDragging","className"],KA=e=>{const{isDragging:t,hasScrollX:n,classes:o}=e;return Te({root:["columnHeadersInner",t&&"columnHeaderDropZone",n&&"columnHeadersInner--scrollable"]},He,o)},QA=Pt("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,t)=>[{[`&.${H.columnHeaderDropZone}`]:t.columnHeaderDropZone},t.columnHeadersInner]})(()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${H.columnHeaderDropZone} .${H.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${H["columnHeadersInner--scrollable"]} .${H.columnHeader}:last-child`]:{borderRight:"none"}})),YA=h.forwardRef(function(t,n){var o,s;const{isDragging:i,className:a}=t,l=le(t,qA),u=Be(),c=fe(),d=j({},c,{isDragging:i,hasScrollX:(o=(s=u.current.getRootDimensions())==null?void 0:s.hasScrollX)!=null?o:!1}),f=KA(d);return r.jsx(QA,j({ref:n,className:$e(a,f.root),ownerState:d},l))}),XA=["innerRef","className","visibleColumns","sortColumnLookup","filterColumnLookup","columnPositions","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","densityFactor","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],JA=h.forwardRef(function(t,n){const{innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:f,densityFactor:p,headerGroupingMaxDepth:x,columnMenuState:g,columnVisibility:m,columnGroupsHeaderStructure:v,hasOtherElementInTabSequence:y}=t,b=le(t,XA),{isDragging:C,getRootProps:P,getInnerProps:L,getColumnHeaders:T,getColumnGroupHeaders:I}=HA({innerRef:o,visibleColumns:s,sortColumnLookup:i,filterColumnLookup:a,columnPositions:l,columnHeaderTabIndexState:u,columnGroupHeaderTabIndexState:c,columnHeaderFocus:d,columnGroupHeaderFocus:f,densityFactor:p,headerGroupingMaxDepth:x,columnMenuState:g,columnVisibility:m,columnGroupsHeaderStructure:v,hasOtherElementInTabSequence:y});return r.jsx(WA,j({ref:n},P(b),{children:r.jsxs(YA,j({isDragging:C},L(),{children:[I(),T()]}))}))}),ZA=pa(JA),eM=h.forwardRef(function(t,n){const s=Be().current.getLocaleText("noResultsOverlayLabel");return r.jsx(xu,j({ref:n},t,{children:s}))}),tM=["sortingOrder"],nM=h.memo(function(t){const{sortingOrder:n}=t,o=le(t,tM),s=fe(),[i]=n,a=i==="asc"?s.slots.columnSortedAscendingIcon:s.slots.columnSortedDescendingIcon;return a?r.jsx(a,j({},o)):null}),rM=["native"];function oM(e){let{native:t}=e,n=le(e,rM);return t?r.jsx("option",j({},n)):r.jsx(de,j({},n))}const sM={BooleanCellTrueIcon:KI,BooleanCellFalseIcon:sl,ColumnMenuIcon:GI,OpenFilterButtonIcon:_I,FilterPanelDeleteIcon:sl,ColumnFilteredIcon:_h,ColumnSelectorIcon:NI,ColumnUnsortedIcon:nM,ColumnSortedAscendingIcon:Dh,ColumnSortedDescendingIcon:Fh,ColumnResizeIcon:VI,DensityCompactIcon:BI,DensityStandardIcon:HI,DensityComfortableIcon:zI,ExportIcon:qI,MoreActionsIcon:QI,TreeDataCollapseIcon:Lh,TreeDataExpandIcon:Oh,GroupingCriteriaCollapseIcon:Lh,GroupingCriteriaExpandIcon:Oh,DetailPanelExpandIcon:$h,DetailPanelCollapseIcon:UI,RowReorderIcon:Nh,QuickFilterIcon:$I,QuickFilterClearIcon:sl,ColumnMenuHideIcon:YI,ColumnMenuSortAscendingIcon:Dh,ColumnMenuSortDescendingIcon:Fh,ColumnMenuFilterIcon:_h,ColumnMenuManageColumnsIcon:XI,ColumnMenuClearIcon:JI,LoadIcon:WI,FilterPanelAddIcon:$h,FilterPanelRemoveAllIcon:ZI,ColumnReorderIcon:Nh},iM=j({},sM,{BaseCheckbox:Bf,BaseTextField:Fe,BaseFormControl:wt,BaseSelect:Mt,BaseSwitch:nr,BaseButton:Y,BaseIconButton:Se,BaseInputAdornment:Er,BaseTooltip:pt,BasePopper:vc,BaseInputLabel:Bt,BaseSelectOption:oM,BaseChip:we}),aM=j({},iM,{Cell:Zl,SkeletonCell:gk,ColumnHeaderFilterIconButton:EI,ColumnMenu:pT,ColumnHeaders:ZA,Footer:CE,FooterRowCount:AE,Toolbar:null,PreferencesPanel:BT,LoadingOverlay:jE,NoResultsOverlay:eM,NoRowsOverlay:SE,Pagination:kE,FilterPanel:lE,ColumnsPanel:OT,Panel:VT,Row:YE}),jx=e=>{if(e!==void 0)return Object.keys(e).reduce((t,n)=>j({},t,{[`${n.charAt(0).toLowerCase()}${n.slice(1)}`]:e[n]}),{})};function lM({defaultSlots:e,slots:t,components:n}){const o=t??(n?jx(n):null);if(!o||Object.keys(o).length===0)return e;const s=j({},e);return Object.keys(o).forEach(i=>{const a=i;o[a]!==void 0&&(s[a]=o[a])}),s}const cM=["components","componentsProps"];function uM(e){var t;const n=Object.keys(e);if(!n.some(i=>i.startsWith("aria-")||i.startsWith("data-")))return e;const o={},s=(t=e.forwardedProps)!=null?t:{};for(let i=0;i<n.length;i+=1){const a=n[i];a.startsWith("aria-")||a.startsWith("data-")?s[a]=e[a]:o[a]=e[a]}return o.forwardedProps=s,o}function dM(e){return h.useMemo(()=>{const{components:t,componentsProps:n}=e,o=le(e,cM);return[t,n,uM(o)]},[e])}const hM={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleRowSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},ga={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,rowSelection:!0,density:"standard",disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleRowSelection:!1,disableMultipleColumnsSorting:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:Mn.Cell,filterMode:"client",filterDebounceMs:150,columnHeaderHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:"client",rowHeight:52,pageSizeOptions:[25,50,100],rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingOrder:["asc","desc",null],sortingMode:"client",throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1,unstable_ignoreValueFormatterDuringExport:!1,clipboardCopyCellDelimiter:"	",rowPositionsDebounceMs:166},fM=jx(aM),pM=e=>{const[t,n,o]=dM(fr({props:e,name:"MuiDataGrid"})),s=h.useMemo(()=>j({},PA,o.localeText),[o.localeText]),i=h.useMemo(()=>lM({defaultSlots:fM,slots:o.slots,components:t}),[t,o.slots]);return h.useMemo(()=>{var a;return j({},ga,o,{localeText:s,slots:i,slotProps:(a=o.slotProps)!=null?a:n},hM)},[o,s,i,n])},mM=e=>j({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),af=(e,t,n)=>typeof e=="number"&&e>0?e:t,gM=(e,t)=>{const{getRowHeight:n,getRowSpacing:o,getEstimatedRowHeight:s}=t,i=h.useRef(Object.create(null)),a=h.useRef(-1),l=h.useRef(!1),u=se(e,To),c=se(e,yt),d=se(e,bu),f=se(e,tn),p=qr(e,t),x=se(e,Io),g=af(t.rowHeight,ga.rowHeight),m=Math.floor(g*u),v=h.useCallback(()=>{var V,D;l.current=!1;const w=$=>{i.current[$.id]||(i.current[$.id]={sizes:{baseCenter:m},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:_,needsFirstMeasurement:O,sizes:B}=i.current[$.id];let z=typeof m=="number"&&m>0?m:52;const G=B.baseCenter;if(_)z=G;else if(n){const W=n(j({},$,{densityFactor:u}));if(W==="auto"){if(O){const Q=s?s(j({},$,{densityFactor:u})):m;z=Q??m}else z=G;l.current=!0,i.current[$.id].autoHeight=!0}else z=af(W,m),i.current[$.id].needsFirstMeasurement=!1,i.current[$.id].autoHeight=!1}else i.current[$.id].needsFirstMeasurement=!1;const J={};for(const W in B)/^base[A-Z]/.test(W)&&(J[W]=B[W]);if(J.baseCenter=z,o){var ee,te;const W=e.current.getRowIndexRelativeToVisibleRows($.id),Q=o(j({},$,{isFirstVisible:W===0,isLastVisible:W===p.rows.length-1,indexRelativeToCurrentPage:W}));J.spacingTop=(ee=Q.top)!=null?ee:0,J.spacingBottom=(te=Q.bottom)!=null?te:0}const ve=e.current.unstable_applyPipeProcessors("rowHeight",J,$);return i.current[$.id].sizes=ve,ve},E=[],M=p.rows.reduce(($,_)=>{E.push($);let O=0,B=0;const z=w(_);for(const G in z){const J=z[G];/^base[A-Z]/.test(G)?O=J>O?J:O:B+=J}return $+O+B},0);x==null||(V=x.top)==null||V.forEach($=>{w($)}),x==null||(D=x.bottom)==null||D.forEach($=>{w($)}),e.current.setState($=>j({},$,{rowsMeta:{currentPageTotalHeight:M,positions:E}})),l.current||(a.current=1/0),e.current.forceUpdate()},[e,p.rows,m,n,o,s,x,u]),y=h.useCallback(V=>{const D=i.current[V];return D?D.sizes.baseCenter:m},[m]),b=V=>{var D;return(D=i.current[V])==null?void 0:D.sizes},C=h.useCallback((V,D)=>{i.current[V].sizes.baseCenter=D,i.current[V].isResized=!0,i.current[V].needsFirstMeasurement=!1,v()},[v]),P=h.useMemo(()=>Kf(v,t.rowPositionsDebounceMs),[v,t.rowPositionsDebounceMs]),L=h.useCallback((V,D,w)=>{if(!i.current[V]||!i.current[V].autoHeight)return;const E=i.current[V].sizes[`base${Tn(w)}`]!==D;i.current[V].needsFirstMeasurement=!1,i.current[V].sizes[`base${Tn(w)}`]=D,E&&P()},[P]),T=h.useCallback(V=>{var D;return((D=i.current[V])==null?void 0:D.autoHeight)||!1},[]),I=h.useCallback(()=>a.current,[]),R=h.useCallback(V=>{l.current&&V>a.current&&(a.current=V)},[]),N=h.useCallback(()=>{i.current={},v()},[v]);h.useEffect(()=>{v()},[m,c,d,f,v]),ku(e,"rowHeight",v);const F={unstable_setLastMeasuredRowIndex:R,unstable_getRowHeight:y,unstable_getRowInternalSizes:b,unstable_setRowHeight:C,unstable_storeRowHeightMeasurement:L,resetRowHeights:N},S={getLastMeasuredRowIndex:I,rowHasAutoHeight:T};De(e,F,"public"),De(e,S,"private")},xM=e=>{const t=h.useCallback((s={})=>e.current.unstable_applyPipeProcessors("exportState",{},s),[e]),n=h.useCallback(s=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:s}).callbacks.forEach(a=>{a()}),e.current.forceUpdate()},[e]);De(e,{exportState:t,restoreState:n},"public")},yM=e=>{const t=h.useRef({}),n=h.useCallback((c,d,f)=>{const p=t.current;p[c]||(p[c]={}),p[c][d]=f},[]),o=h.useCallback((c,d)=>{var f;return(f=t.current[c])==null?void 0:f[d]},[]),s=h.useCallback(c=>{const{columnIndex:d,rowId:f,minFirstColumnIndex:p,maxLastColumnIndex:x,columns:g}=c,m=g.length,v=g[d],y=typeof v.colSpan=="function"?v.colSpan(e.current.getCellParams(f,v.field)):v.colSpan;if(!y||y===1)return n(f,d,{spannedByColSpan:!1,cellProps:{colSpan:1,width:v.computedWidth}}),{colSpan:1};let b=v.computedWidth;for(let C=1;C<y;C+=1){const P=d+C;if(P>=p&&P<x){const L=g[P];b+=L.computedWidth,n(f,d+C,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(d+y,m-1),leftVisibleCellIndex:d})}n(f,d,{spannedByColSpan:!1,cellProps:{colSpan:y,width:b}})}return{colSpan:y}},[e,n]),i=h.useCallback(({rowId:c,minFirstColumn:d,maxLastColumn:f,columns:p})=>{for(let x=d;x<f;x+=1){const g=s({columnIndex:x,rowId:c,minFirstColumnIndex:d,maxLastColumnIndex:f,columns:p});g.colSpan>1&&(x+=g.colSpan-1)}},[s]),a={unstable_getCellColSpanInfo:o},l={calculateColSpan:i};De(e,a,"public"),De(e,l,"private");const u=h.useCallback(()=>{t.current={}},[]);pe(e,"columnOrderChange",u)},Sx=(e,t,n)=>{if(Fg(e)){if(n[e.field]!==void 0)throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${n[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join(`
`));n[e.field]=t;return}const{groupId:o,children:s}=e;s.forEach(i=>{Sx(i,[...t,o],n)})},ac=e=>{if(!e)return{};const t={};return e.forEach(n=>{Sx(n,[],t)}),t},lc=(e,t,n)=>{const o=u=>{var c;return(c=t[u])!=null?c:[]},s=[],i=Math.max(...e.map(u=>o(u).length)),a=(u,c,d)=>Lr(o(u).slice(0,d+1),o(c).slice(0,d+1)),l=(u,c)=>!!(n!=null&&n.left&&n.left.includes(u)&&!n.left.includes(c)||n!=null&&n.right&&!n.right.includes(u)&&n.right.includes(c));for(let u=0;u<i;u+=1){const c=e.reduce((d,f)=>{var p;const x=(p=o(f)[u])!=null?p:null;if(d.length===0)return[{columnFields:[f],groupId:x}];const g=d[d.length-1],m=g.columnFields[g.columnFields.length-1];return g.groupId!==x||!a(m,f,u)||l(m,f)?[...d,{columnFields:[f],groupId:x}]:[...d.slice(0,d.length-1),{columnFields:[...g.columnFields,f],groupId:x}]},[]);s.push(c)}return s},bM=["groupId","children"],Tu=e=>{let t={};return e.forEach(n=>{if(Fg(n))return;const{groupId:o,children:s}=n,i=le(n,bM);if(!o)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");s||console.warn(`MUI: group groupId=${o} has no children.`);const a=j({},i,{groupId:o}),l=Tu(s);if(l[o]!==void 0||t[o]!==void 0)throw new Error(`MUI: The groupId ${o} is used multiple times in the columnGroupingModel.`);t=j({},t,l,{[o]:a})}),j({},t)},vM=(e,t,n)=>{var o,s,i,a;if(!((o=t.experimentalFeatures)!=null&&o.columnGrouping))return e;const l=Wn(n),u=la(n),c=Tu((s=t.columnGroupingModel)!=null?s:[]),d=ac((i=t.columnGroupingModel)!=null?i:[]),f=lc(l,d,(a=n.current.state.pinnedColumns)!=null?a:{}),p=u.length===0?0:Math.max(...u.map(x=>{var g,m;return(g=(m=d[x])==null?void 0:m.length)!=null?g:0}));return j({},e,{columnGrouping:{lookup:c,unwrappedGroupingModel:d,headerStructure:f,maxDepth:p}})},CM=(e,t)=>{var n;const o=h.useCallback(u=>{var c;return(c=H1(e)[u])!=null?c:[]},[e]),s=h.useCallback(()=>wg(e),[e]);De(e,{unstable_getColumnGroupPath:o,unstable_getAllGroupDetails:s},"public");const a=h.useCallback(()=>{var u;const c=ac((u=t.columnGroupingModel)!=null?u:[]);e.current.setState(d=>{var f,p,x;const g=(f=(p=d.columns)==null?void 0:p.orderedFields)!=null?f:[],m=(x=d.pinnedColumns)!=null?x:{},v=lc(g,c,m);return j({},d,{columnGrouping:j({},d.columnGrouping,{headerStructure:v})})})},[e,t.columnGroupingModel]),l=h.useCallback(u=>{var c,d,f,p;if(!((c=t.experimentalFeatures)!=null&&c.columnGrouping))return;const x=(d=(f=(p=e.current).getPinnedColumns)==null?void 0:f.call(p))!=null?d:{},g=Wn(e),m=la(e),v=Tu(u??[]),y=ac(u??[]),b=lc(g,y,x),C=m.length===0?0:Math.max(...m.map(P=>{var L,T;return(L=(T=y[P])==null?void 0:T.length)!=null?L:0}));e.current.setState(P=>j({},P,{columnGrouping:{lookup:v,unwrappedGroupingModel:y,headerStructure:b,maxDepth:C}}))},[e,(n=t.experimentalFeatures)==null?void 0:n.columnGrouping]);pe(e,"columnIndexChange",a),pe(e,"columnsChange",()=>{l(t.columnGroupingModel)}),pe(e,"columnVisibilityModelChange",()=>{l(t.columnGroupingModel)}),h.useEffect(()=>{l(t.columnGroupingModel)},[l,t.columnGroupingModel])},wM=(e,t)=>{const n=u2(e,t);return IA(n,t),wA(n),Nt(jA,n,t),Nt(O2,n,t),Nt(xA,n,t),Nt(mA,n,t),Nt(J2,n,t),Nt(TA,n,t),Nt(sA,n,t),Nt(K2,n,t),Nt(N2,n,t),Nt(rA,n,t),Nt(mM,n,t),Nt(A2,n,t),Nt(vM,n,t),Nt(PI,n,t),tA(n,t),SA(n,t),L2(n,t),yA(n,t),jP(n,t),yM(n),CM(n,t),gA(n,t),Z2(n,t),iA(n,t),X2(n,t),EA(n,t),V2(n,t),oA(n,t),gM(n,t),AA(n,t),M2(n),z2(n,t),q2(n,t),E2(n,t),DA(n,t),MA(n,t),xM(n),kI(n,t),n},jM=e=>{const{classes:t}=e;return Te({root:["virtualScroller"]},He,t)},SM=Pt("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({overflow:"auto",height:"100%",position:"relative","@media print":{overflow:"hidden"},zIndex:0}),PM=h.forwardRef(function(t,n){const o=fe(),s=jM(o);return r.jsx(SM,j({ref:n},t,{className:$e(s.root,t.className),ownerState:o}))}),kM=(e,t)=>{const{classes:n}=e;return Te({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},He,n)},IM=Pt("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),TM=h.forwardRef(function(t,n){var o;const s=fe(),i=!s.autoHeight&&((o=t.style)==null?void 0:o.minHeight)==="auto",a=kM(s,i);return r.jsx(IM,j({ref:n},t,{ownerState:s,className:$e(a.root,t.className)}))}),EM=["className"],AM=e=>{const{classes:t}=e;return Te({root:["virtualScrollerRenderZone"]},He,t)},MM=Pt("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),RM=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,EM),i=fe(),a=AM(i);return r.jsx(MM,j({ref:n,className:$e(a.root,o),ownerState:i},s))}),DM=["className"],FM=h.forwardRef(function(t,n){const{className:o}=t,s=le(t,DM),{getRootProps:i,getContentProps:a,getRenderZoneProps:l,getRows:u}=$A({ref:n});return r.jsxs(PM,j({className:o},i(s),{children:[r.jsx(gP,{}),r.jsx(TM,j({},a(),{children:r.jsx(RM,j({},l(),{children:u()}))}))]}))}),Px=h.forwardRef(function(t,n){const o=pM(t),s=wM(o.apiRef,o);return r.jsx(XE,{privateApiRef:s,props:o,children:r.jsxs(Ck,j({className:o.className,style:o.style,sx:o.sx,ref:n},o.forwardedProps,{children:[r.jsx(wE,{}),r.jsx(aP,{VirtualScrollerComponent:FM}),r.jsx(lP,{})]}))})}),kx=h.memo(Px);ga.filterDebounceMs;ga.filterDebounceMs;Px.propTypes={apiRef:U.shape({current:U.object.isRequired}),"aria-label":U.string,"aria-labelledby":U.string,autoHeight:U.bool,autoPageSize:U.bool,cellModesModel:U.object,checkboxSelection:U.bool,classes:U.object,clipboardCopyCellDelimiter:U.string,columnBuffer:U.number,columnGroupingModel:U.arrayOf(U.object),columnHeaderHeight:U.number,columns:jy(U.array.isRequired),columnThreshold:U.number,columnVisibilityModel:U.object,components:U.object,componentsProps:U.object,density:U.oneOf(["comfortable","compact","standard"]),disableColumnFilter:U.bool,disableColumnMenu:U.bool,disableColumnSelector:U.bool,disableDensitySelector:U.bool,disableEval:U.bool,disableRowSelectionOnClick:U.bool,disableVirtualization:U.bool,editMode:U.oneOf(["cell","row"]),experimentalFeatures:U.shape({ariaV7:U.bool,columnGrouping:U.bool,warnIfFocusStateIsNotSynced:U.bool}),filterDebounceMs:U.number,filterMode:U.oneOf(["client","server"]),filterModel:U.shape({items:U.arrayOf(U.shape({field:U.string.isRequired,id:U.oneOfType([U.number,U.string]),operator:U.string.isRequired,value:U.any})).isRequired,logicOperator:U.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:U.bool,quickFilterLogicOperator:U.oneOf(["and","or"]),quickFilterValues:U.array}),forwardedProps:U.object,getCellClassName:U.func,getDetailPanelContent:U.func,getEstimatedRowHeight:U.func,getRowClassName:U.func,getRowHeight:U.func,getRowId:U.func,getRowSpacing:U.func,hideFooter:U.bool,hideFooterPagination:U.bool,hideFooterSelectedRowCount:U.bool,ignoreDiacritics:U.bool,initialState:U.object,isCellEditable:U.func,isRowSelectable:U.func,keepNonExistentRowsSelected:U.bool,loading:U.bool,localeText:U.object,logger:U.shape({debug:U.func.isRequired,error:U.func.isRequired,info:U.func.isRequired,warn:U.func.isRequired}),logLevel:U.oneOf(["debug","error","info","warn",!1]),nonce:U.string,onCellClick:U.func,onCellDoubleClick:U.func,onCellEditStart:U.func,onCellEditStop:U.func,onCellKeyDown:U.func,onCellModesModelChange:U.func,onClipboardCopy:U.func,onColumnHeaderClick:U.func,onColumnHeaderDoubleClick:U.func,onColumnHeaderEnter:U.func,onColumnHeaderLeave:U.func,onColumnHeaderOut:U.func,onColumnHeaderOver:U.func,onColumnOrderChange:U.func,onColumnVisibilityModelChange:U.func,onFilterModelChange:U.func,onMenuClose:U.func,onMenuOpen:U.func,onPaginationModelChange:U.func,onPreferencePanelClose:U.func,onPreferencePanelOpen:U.func,onProcessRowUpdateError:U.func,onResize:U.func,onRowClick:U.func,onRowCountChange:U.func,onRowDoubleClick:U.func,onRowEditStart:U.func,onRowEditStop:U.func,onRowModesModelChange:U.func,onRowSelectionModelChange:U.func,onSortModelChange:U.func,onStateChange:U.func,pageSizeOptions:U.arrayOf(U.oneOfType([U.number,U.shape({label:U.string.isRequired,value:U.number.isRequired})]).isRequired),pagination:e=>e.pagination===!1?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join(`
`)):null,paginationMode:U.oneOf(["client","server"]),paginationModel:U.shape({page:U.number.isRequired,pageSize:U.number.isRequired}),processRowUpdate:U.func,rowBuffer:U.number,rowCount:U.number,rowHeight:U.number,rowModesModel:U.object,rowPositionsDebounceMs:U.number,rows:U.arrayOf(U.object).isRequired,rowSelection:U.bool,rowSelectionModel:U.oneOfType([U.arrayOf(U.oneOfType([U.number,U.string]).isRequired),U.number,U.string]),rowSpacingType:U.oneOf(["border","margin"]),rowThreshold:U.number,scrollbarSize:U.number,showCellVerticalBorder:U.bool,showColumnVerticalBorder:U.bool,slotProps:U.object,slots:U.object,sortingMode:U.oneOf(["client","server"]),sortingOrder:U.arrayOf(U.oneOf(["asc","desc"])),sortModel:U.arrayOf(U.shape({field:U.string.isRequired,sort:U.oneOf(["asc","desc"])})),sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object]),unstable_ignoreValueFormatterDuringExport:U.oneOfType([U.shape({clipboardExport:U.bool,csvExport:U.bool}),U.bool])};function Ix(e,t){return function(){return e.apply(t,arguments)}}const{toString:OM}=Object.prototype,{getPrototypeOf:Eu}=Object,{iterator:xa,toStringTag:Tx}=Symbol,ya=(e=>t=>{const n=OM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),yn=e=>(e=e.toLowerCase(),t=>ya(t)===e),ba=e=>t=>typeof t===e,{isArray:Ao}=Array,hs=ba("undefined");function Es(e){return e!==null&&!hs(e)&&e.constructor!==null&&!hs(e.constructor)&&Wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ex=yn("ArrayBuffer");function LM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ex(e.buffer),t}const _M=ba("string"),Wt=ba("function"),Ax=ba("number"),As=e=>e!==null&&typeof e=="object",$M=e=>e===!0||e===!1,hi=e=>{if(ya(e)!=="object")return!1;const t=Eu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Tx in e)&&!(xa in e)},NM=e=>{if(!As(e)||Es(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},VM=yn("Date"),BM=yn("File"),HM=yn("Blob"),zM=yn("FileList"),GM=e=>As(e)&&Wt(e.pipe),UM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wt(e.append)&&((t=ya(e))==="formdata"||t==="object"&&Wt(e.toString)&&e.toString()==="[object FormData]"))},WM=yn("URLSearchParams"),[qM,KM,QM,YM]=["ReadableStream","Request","Response","Headers"].map(yn),XM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ms(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),Ao(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{if(Es(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(o=0;o<a;o++)l=i[o],t.call(null,e[l],l,e)}}function Mx(e,t){if(Es(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rx=e=>!hs(e)&&e!==Tr;function cc(){const{caseless:e}=Rx(this)&&this||{},t={},n=(o,s)=>{const i=e&&Mx(t,s)||s;hi(t[i])&&hi(o)?t[i]=cc(t[i],o):hi(o)?t[i]=cc({},o):Ao(o)?t[i]=o.slice():t[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Ms(arguments[o],n);return t}const JM=(e,t,n,{allOwnKeys:o}={})=>(Ms(t,(s,i)=>{n&&Wt(s)?e[i]=Ix(s,n):e[i]=s},{allOwnKeys:o}),e),ZM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),eR=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},tR=(e,t,n,o)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!o||o(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&Eu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},nR=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},rR=e=>{if(!e)return null;if(Ao(e))return e;let t=e.length;if(!Ax(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},oR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Eu(Uint8Array)),sR=(e,t)=>{const o=(e&&e[xa]).call(e);let s;for(;(s=o.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},iR=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},aR=yn("HTMLFormElement"),lR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),lf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),cR=yn("RegExp"),Dx=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Ms(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(o[i]=a||s)}),Object.defineProperties(e,o)},uR=e=>{Dx(e,(t,n)=>{if(Wt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(Wt(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dR=(e,t)=>{const n={},o=s=>{s.forEach(i=>{n[i]=!0})};return Ao(e)?o(e):o(String(e).split(t)),n},hR=()=>{},fR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pR(e){return!!(e&&Wt(e.append)&&e[Tx]==="FormData"&&e[xa])}const mR=e=>{const t=new Array(10),n=(o,s)=>{if(As(o)){if(t.indexOf(o)>=0)return;if(Es(o))return o;if(!("toJSON"in o)){t[s]=o;const i=Ao(o)?[]:{};return Ms(o,(a,l)=>{const u=n(a,s+1);!hs(u)&&(i[l]=u)}),t[s]=void 0,i}}return o};return n(e,0)},gR=yn("AsyncFunction"),xR=e=>e&&(As(e)||Wt(e))&&Wt(e.then)&&Wt(e.catch),Fx=((e,t)=>e?setImmediate:t?((n,o)=>(Tr.addEventListener("message",({source:s,data:i})=>{s===Tr&&i===n&&o.length&&o.shift()()},!1),s=>{o.push(s),Tr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wt(Tr.postMessage)),yR=typeof queueMicrotask<"u"?queueMicrotask.bind(Tr):typeof process<"u"&&process.nextTick||Fx,bR=e=>e!=null&&Wt(e[xa]),q={isArray:Ao,isArrayBuffer:Ex,isBuffer:Es,isFormData:UM,isArrayBufferView:LM,isString:_M,isNumber:Ax,isBoolean:$M,isObject:As,isPlainObject:hi,isEmptyObject:NM,isReadableStream:qM,isRequest:KM,isResponse:QM,isHeaders:YM,isUndefined:hs,isDate:VM,isFile:BM,isBlob:HM,isRegExp:cR,isFunction:Wt,isStream:GM,isURLSearchParams:WM,isTypedArray:oR,isFileList:zM,forEach:Ms,merge:cc,extend:JM,trim:XM,stripBOM:ZM,inherits:eR,toFlatObject:tR,kindOf:ya,kindOfTest:yn,endsWith:nR,toArray:rR,forEachEntry:sR,matchAll:iR,isHTMLForm:aR,hasOwnProperty:lf,hasOwnProp:lf,reduceDescriptors:Dx,freezeMethods:uR,toObjectSet:dR,toCamelCase:lR,noop:hR,toFiniteNumber:fR,findKey:Mx,global:Tr,isContextDefined:Rx,isSpecCompliantForm:pR,toJSONObject:mR,isAsyncFn:gR,isThenable:xR,setImmediate:Fx,asap:yR,isIterable:bR};function Me(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Ox=Me.prototype,Lx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Lx[e]={value:e}});Object.defineProperties(Me,Lx);Object.defineProperty(Ox,"isAxiosError",{value:!0});Me.from=(e,t,n,o,s,i)=>{const a=Object.create(Ox);return q.toFlatObject(e,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),Me.call(a,e.message,t,n,o,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const vR=null;function uc(e){return q.isPlainObject(e)||q.isArray(e)}function _x(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function cf(e,t,n){return e?e.concat(t).map(function(s,i){return s=_x(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function CR(e){return q.isArray(e)&&!e.some(uc)}const wR=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function va(e,t,n){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!q.isUndefined(v[m])});const o=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(q.isDate(g))return g.toISOString();if(q.isBoolean(g))return g.toString();if(!u&&q.isBlob(g))throw new Me("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(g)||q.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,m,v){let y=g;if(g&&!v&&typeof g=="object"){if(q.endsWith(m,"{}"))m=o?m:m.slice(0,-2),g=JSON.stringify(g);else if(q.isArray(g)&&CR(g)||(q.isFileList(g)||q.endsWith(m,"[]"))&&(y=q.toArray(g)))return m=_x(m),y.forEach(function(C,P){!(q.isUndefined(C)||C===null)&&t.append(a===!0?cf([m],P,i):a===null?m:m+"[]",c(C))}),!1}return uc(g)?!0:(t.append(cf(v,m,i),c(g)),!1)}const f=[],p=Object.assign(wR,{defaultVisitor:d,convertValue:c,isVisitable:uc});function x(g,m){if(!q.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),q.forEach(g,function(y,b){(!(q.isUndefined(y)||y===null)&&s.call(t,y,q.isString(b)?b.trim():b,m,p))===!0&&x(y,m?m.concat(b):[b])}),f.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return x(e),t}function uf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Au(e,t){this._pairs=[],e&&va(e,this,t)}const $x=Au.prototype;$x.append=function(t,n){this._pairs.push([t,n])};$x.toString=function(t){const n=t?function(o){return t.call(this,o,uf)}:uf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function jR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nx(e,t,n){if(!t)return e;const o=n&&n.encode||jR;q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=q.isURLSearchParams(t)?t.toString():new Au(t,n).toString(o),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class df{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Vx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SR=typeof URLSearchParams<"u"?URLSearchParams:Au,PR=typeof FormData<"u"?FormData:null,kR=typeof Blob<"u"?Blob:null,IR={isBrowser:!0,classes:{URLSearchParams:SR,FormData:PR,Blob:kR},protocols:["http","https","file","blob","url","data"]},Mu=typeof window<"u"&&typeof document<"u",dc=typeof navigator=="object"&&navigator||void 0,TR=Mu&&(!dc||["ReactNative","NativeScript","NS"].indexOf(dc.product)<0),ER=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AR=Mu&&window.location.href||"http://localhost",MR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mu,hasStandardBrowserEnv:TR,hasStandardBrowserWebWorkerEnv:ER,navigator:dc,origin:AR},Symbol.toStringTag,{value:"Module"})),At={...MR,...IR};function RR(e,t){return va(e,new At.classes.URLSearchParams,{visitor:function(n,o,s,i){return At.isNode&&q.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function DR(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FR(e){const t={},n=Object.keys(e);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],t[i]=e[i];return t}function Bx(e){function t(n,o,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=i>=n.length;return a=!a&&q.isArray(s)?s.length:a,u?(q.hasOwnProp(s,a)?s[a]=[s[a],o]:s[a]=o,!l):((!s[a]||!q.isObject(s[a]))&&(s[a]=[]),t(n,o,s[a],i)&&q.isArray(s[a])&&(s[a]=FR(s[a])),!l)}if(q.isFormData(e)&&q.isFunction(e.entries)){const n={};return q.forEachEntry(e,(o,s)=>{t(DR(o),s,n,0)}),n}return null}function OR(e,t,n){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Rs={transitional:Vx,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,i=q.isObject(t);if(i&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return s?JSON.stringify(Bx(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return RR(t,this.formSerializer).toString();if((l=q.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return va(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),OR(t)):t}],transformResponse:[function(t){const n=this.transitional||Rs.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(o&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Me.from(l,Me.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:At.classes.FormData,Blob:At.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{Rs.headers[e]={}});const LR=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_R=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),o=a.substring(s+1).trim(),!(!n||t[n]&&LR[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},hf=Symbol("internals");function Bo(e){return e&&String(e).trim().toLowerCase()}function fi(e){return e===!1||e==null?e:q.isArray(e)?e.map(fi):String(e)}function $R(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const NR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ll(e,t,n,o,s){if(q.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!q.isString(t)){if(q.isString(o))return t.indexOf(o)!==-1;if(q.isRegExp(o))return o.test(t)}}function VR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function BR(e,t){const n=q.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,i,a){return this[o].call(this,t,s,i,a)},configurable:!0})})}let qt=class{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function i(l,u,c){const d=Bo(u);if(!d)throw new Error("header name must be a non-empty string");const f=q.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||u]=fi(l))}const a=(l,u)=>q.forEach(l,(c,d)=>i(c,d,u));if(q.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(q.isString(t)&&(t=t.trim())&&!NR(t))a(_R(t),n);else if(q.isObject(t)&&q.isIterable(t)){let l={},u,c;for(const d of t){if(!q.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?q.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&i(n,t,o);return this}get(t,n){if(t=Bo(t),t){const o=q.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return $R(s);if(q.isFunction(n))return n.call(this,s,o);if(q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Bo(t),t){const o=q.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||ll(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function i(a){if(a=Bo(a),a){const l=q.findKey(o,a);l&&(!n||ll(o,o[l],l,n))&&(delete o[l],s=!0)}}return q.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const i=n[o];(!t||ll(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,o={};return q.forEach(this,(s,i)=>{const a=q.findKey(o,i);if(a){n[a]=fi(s),delete n[i];return}const l=t?VR(i):String(i).trim();l!==i&&delete n[i],n[l]=fi(s),o[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return q.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&q.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[hf]=this[hf]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Bo(a);o[l]||(BR(s,a),o[l]=!0)}return q.isArray(t)?t.forEach(i):i(t),this}};qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(qt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});q.freezeMethods(qt);function cl(e,t){const n=this||Rs,o=t||n,s=qt.from(o.headers);let i=o.data;return q.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Hx(e){return!!(e&&e.__CANCEL__)}function Mo(e,t,n){Me.call(this,e??"canceled",Me.ERR_CANCELED,t,n),this.name="CanceledError"}q.inherits(Mo,Me,{__CANCEL__:!0});function zx(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Me("Request failed with status code "+n.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function HR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function zR(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),d=o[i];a||(a=c),n[s]=u,o[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),c-a<t)return;const x=d&&c-d;return x?Math.round(p*1e3/x):void 0}}function GR(e,t){let n=0,o=1e3/t,s,i;const a=(c,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=o?a(c,d):(s=c,i||(i=setTimeout(()=>{i=null,a(s)},o-f)))},()=>s&&a(s)]}const Hi=(e,t,n=3)=>{let o=0;const s=zR(50,250);return GR(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,u=a-o,c=s(u),d=a<=l;o=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-a)/c:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},ff=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},pf=e=>(...t)=>q.asap(()=>e(...t)),UR=At.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,At.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(At.origin),At.navigator&&/(msie|trident)/i.test(At.navigator.userAgent)):()=>!0,WR=At.hasStandardBrowserEnv?{write(e,t,n,o,s,i){const a=[e+"="+encodeURIComponent(t)];q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),q.isString(o)&&a.push("path="+o),q.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Gx(e,t,n){let o=!qR(t);return e&&(o||n==!1)?KR(e,t):t}const mf=e=>e instanceof qt?{...e}:e;function Br(e,t){t=t||{};const n={};function o(c,d,f,p){return q.isPlainObject(c)&&q.isPlainObject(d)?q.merge.call({caseless:p},c,d):q.isPlainObject(d)?q.merge({},d):q.isArray(d)?d.slice():d}function s(c,d,f,p){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c,f,p)}else return o(c,d,f,p)}function i(c,d){if(!q.isUndefined(d))return o(void 0,d)}function a(c,d){if(q.isUndefined(d)){if(!q.isUndefined(c))return o(void 0,c)}else return o(void 0,d)}function l(c,d,f){if(f in t)return o(c,d);if(f in e)return o(void 0,c)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,d,f)=>s(mf(c),mf(d),f,!0)};return q.forEach(Object.keys({...e,...t}),function(d){const f=u[d]||s,p=f(e[d],t[d],d);q.isUndefined(p)&&f!==l||(n[d]=p)}),n}const Ux=e=>{const t=Br({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=qt.from(a),t.url=Nx(Gx(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(q.isFormData(n)){if(At.hasStandardBrowserEnv||At.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[c,...d]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...d].join("; "))}}if(At.hasStandardBrowserEnv&&(o&&q.isFunction(o)&&(o=o(t)),o||o!==!1&&UR(t.url))){const c=s&&i&&WR.read(i);c&&a.set(s,c)}return t},QR=typeof XMLHttpRequest<"u",YR=QR&&function(e){return new Promise(function(n,o){const s=Ux(e);let i=s.data;const a=qt.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=s,d,f,p,x,g;function m(){x&&x(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function y(){if(!v)return;const C=qt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:C,config:e,request:v};zx(function(I){n(I),m()},function(I){o(I),m()},L),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(o(new Me("Request aborted",Me.ECONNABORTED,e,v)),v=null)},v.onerror=function(){o(new Me("Network Error",Me.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||Vx;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),o(new Me(P,L.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,e,v)),v=null},i===void 0&&a.setContentType(null),"setRequestHeader"in v&&q.forEach(a.toJSON(),function(P,L){v.setRequestHeader(L,P)}),q.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),l&&l!=="json"&&(v.responseType=s.responseType),c&&([p,g]=Hi(c,!0),v.addEventListener("progress",p)),u&&v.upload&&([f,x]=Hi(u),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(d=C=>{v&&(o(!C||C.type?new Mo(null,e,v):C),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const b=HR(s.url);if(b&&At.protocols.indexOf(b)===-1){o(new Me("Unsupported protocol "+b+":",Me.ERR_BAD_REQUEST,e));return}v.send(i||null)})},XR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,s;const i=function(c){if(!s){s=!0,l();const d=c instanceof Error?c:this.reason;o.abort(d instanceof Me?d:new Mo(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new Me(`timeout ${t} of ms exceeded`,Me.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:u}=o;return u.unsubscribe=()=>q.asap(l),u}},JR=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,s;for(;o<n;)s=o+t,yield e.slice(o,s),o=s},ZR=async function*(e,t){for await(const n of eD(e))yield*JR(n,t)},eD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},gf=(e,t,n,o)=>{const s=ZR(e,t);let i=0,a,l=u=>{a||(a=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await s.next();if(c){l(),u.close();return}let f=d.byteLength;if(n){let p=i+=f;n(p)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},Ca=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wx=Ca&&typeof ReadableStream=="function",tD=Ca&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),qx=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nD=Wx&&qx(()=>{let e=!1;const t=new Request(At.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),xf=64*1024,hc=Wx&&qx(()=>q.isReadableStream(new Response("").body)),zi={stream:hc&&(e=>e.body)};Ca&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!zi[t]&&(zi[t]=q.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Me(`Response type '${t}' is not supported`,Me.ERR_NOT_SUPPORT,o)})})})(new Response);const rD=async e=>{if(e==null)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e))return(await new Request(At.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(q.isArrayBufferView(e)||q.isArrayBuffer(e))return e.byteLength;if(q.isURLSearchParams(e)&&(e=e+""),q.isString(e))return(await tD(e)).byteLength},oD=async(e,t)=>{const n=q.toFiniteNumber(e.getContentLength());return n??rD(t)},sD=Ca&&(async e=>{let{url:t,method:n,data:o,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:f="same-origin",fetchOptions:p}=Ux(e);c=c?(c+"").toLowerCase():"text";let x=XR([s,i&&i.toAbortSignal()],a),g;const m=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let v;try{if(u&&nD&&n!=="get"&&n!=="head"&&(v=await oD(d,o))!==0){let L=new Request(t,{method:"POST",body:o,duplex:"half"}),T;if(q.isFormData(o)&&(T=L.headers.get("content-type"))&&d.setContentType(T),L.body){const[I,R]=ff(v,Hi(pf(u)));o=gf(L.body,xf,I,R)}}q.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;g=new Request(t,{...p,signal:x,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:y?f:void 0});let b=await fetch(g,p);const C=hc&&(c==="stream"||c==="response");if(hc&&(l||C&&m)){const L={};["status","statusText","headers"].forEach(N=>{L[N]=b[N]});const T=q.toFiniteNumber(b.headers.get("content-length")),[I,R]=l&&ff(T,Hi(pf(l),!0))||[];b=new Response(gf(b.body,xf,I,()=>{R&&R(),m&&m()}),L)}c=c||"text";let P=await zi[q.findKey(zi,c)||"text"](b,e);return!C&&m&&m(),await new Promise((L,T)=>{zx(L,T,{data:P,headers:qt.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:g})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,e,g),{cause:y.cause||y}):Me.from(y,y&&y.code,e,g)}}),fc={http:vR,xhr:YR,fetch:sD};q.forEach(fc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yf=e=>`- ${e}`,iD=e=>q.isFunction(e)||e===null||e===!1,Kx={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let i=0;i<t;i++){n=e[i];let a;if(o=n,!iD(n)&&(o=fc[(a=String(n)).toLowerCase()],o===void 0))throw new Me(`Unknown adapter '${a}'`);if(o)break;s[a||"#"+i]=o}if(!o){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(yf).join(`
`):" "+yf(i[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o},adapters:fc};function ul(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mo(null,e)}function bf(e){return ul(e),e.headers=qt.from(e.headers),e.data=cl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Kx.getAdapter(e.adapter||Rs.adapter)(e).then(function(o){return ul(e),o.data=cl.call(e,e.transformResponse,o),o.headers=qt.from(o.headers),o},function(o){return Hx(o)||(ul(e),o&&o.response&&(o.response.data=cl.call(e,e.transformResponse,o.response),o.response.headers=qt.from(o.response.headers))),Promise.reject(o)})}const Qx="1.11.0",wa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wa[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const vf={};wa.transitional=function(t,n,o){function s(i,a){return"[Axios v"+Qx+"] Transitional option '"+i+"'"+a+(o?". "+o:"")}return(i,a,l)=>{if(t===!1)throw new Me(s(a," has been removed"+(n?" in "+n:"")),Me.ERR_DEPRECATED);return n&&!vf[a]&&(vf[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};wa.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function aD(e,t,n){if(typeof e!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const i=o[s],a=t[i];if(a){const l=e[i],u=l===void 0||a(l,i,e);if(u!==!0)throw new Me("option "+i+" must be "+u,Me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Me("Unknown option "+i,Me.ERR_BAD_OPTION)}}const pi={assertOptions:aD,validators:wa},vn=pi.validators;let _r=class{constructor(t){this.defaults=t||{},this.interceptors={request:new df,response:new df}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Br(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:i}=n;o!==void 0&&pi.assertOptions(o,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),s!=null&&(q.isFunction(s)?n.paramsSerializer={serialize:s}:pi.assertOptions(s,{encode:vn.function,serialize:vn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),pi.assertOptions(n,{baseUrl:vn.spelling("baseURL"),withXsrfToken:vn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&q.merge(i.common,i[n.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=qt.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(u=u&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,f=0,p;if(!u){const g=[bf.bind(this),void 0];for(g.unshift(...l),g.push(...c),p=g.length,d=Promise.resolve(n);f<p;)d=d.then(g[f++],g[f++]);return d}p=l.length;let x=n;for(f=0;f<p;){const g=l[f++],m=l[f++];try{x=g(x)}catch(v){m.call(this,v);break}}try{d=bf.call(this,x)}catch(g){return Promise.reject(g)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=Br(this.defaults,t);const n=Gx(t.baseURL,t.url,t.allowAbsoluteUrls);return Nx(n,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){_r.prototype[t]=function(n,o){return this.request(Br(o||{},{method:t,url:n,data:(o||{}).data}))}});q.forEach(["post","put","patch"],function(t){function n(o){return function(i,a,l){return this.request(Br(l||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}_r.prototype[t]=n(),_r.prototype[t+"Form"]=n(!0)});let lD=class Yx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{o.subscribe(l),i=l}).then(s);return a.cancel=function(){o.unsubscribe(i)},a},t(function(i,a,l){o.reason||(o.reason=new Mo(i,a,l),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Yx(function(s){t=s}),cancel:t}}};function cD(e){return function(n){return e.apply(null,n)}}function uD(e){return q.isObject(e)&&e.isAxiosError===!0}const pc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pc).forEach(([e,t])=>{pc[t]=e});function Xx(e){const t=new _r(e),n=Ix(_r.prototype.request,t);return q.extend(n,_r.prototype,t,{allOwnKeys:!0}),q.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Xx(Br(e,s))},n}const qe=Xx(Rs);qe.Axios=_r;qe.CanceledError=Mo;qe.CancelToken=lD;qe.isCancel=Hx;qe.VERSION=Qx;qe.toFormData=va;qe.AxiosError=Me;qe.Cancel=qe.CanceledError;qe.all=function(t){return Promise.all(t)};qe.spread=cD;qe.isAxiosError=uD;qe.mergeConfig=Br;qe.AxiosHeaders=qt;qe.formToJSON=e=>Bx(q.isHTMLForm(e)?new FormData(e):e);qe.getAdapter=Kx.getAdapter;qe.HttpStatusCode=pc;qe.default=qe;const{Axios:UF,AxiosError:WF,CanceledError:qF,isCancel:KF,CancelToken:QF,VERSION:YF,all:XF,Cancel:JF,isAxiosError:ZF,spread:eO,toFormData:tO,AxiosHeaders:nO,HttpStatusCode:rO,formToJSON:oO,getAdapter:sO,mergeConfig:iO}=qe,dD=()=>{const{enqueueSnackbar:e}=Qt(),[t,n]=h.useState([]),[o,s]=h.useState(!0),[i,a]=h.useState(!1),[l,u]=h.useState(null),[c,d]=h.useState({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),f=[{field:"name",headerName:"Device Name",flex:1,minWidth:150},{field:"ip",headerName:"IP Address",width:150},{field:"type",headerName:"Type",width:120,renderCell:y=>r.jsx(we,{label:y.value,size:"small",variant:"outlined"})},{field:"status",headerName:"Status",width:120,renderCell:y=>{const b=()=>{switch(y.value){case"active":return r.jsx(Ne,{color:"success",fontSize:"small"});case"inactive":return r.jsx(ro,{color:"error",fontSize:"small"});default:return r.jsx(mn,{color:"warning",fontSize:"small"})}};return r.jsxs(A,{display:"flex",alignItems:"center",children:[b(),r.jsx(k,{sx:{ml:1},variant:"body2",children:y.value})]})}},{field:"lastSeen",headerName:"Last Seen",width:180},{field:"emailsSent",headerName:"Emails Sent",width:120,type:"number"},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:y=>r.jsxs(A,{children:[r.jsx(Se,{size:"small",onClick:()=>g(y.row),color:"primary",children:r.jsx(Qf,{fontSize:"small"})}),r.jsx(Se,{size:"small",onClick:()=>m(y.row.id),color:"error",children:r.jsx(Xt,{fontSize:"small"})})]})}];h.useEffect(()=>{p()},[]);const p=async()=>{try{const y=await qe.get("/api/devices");n(y.data)}catch{e("Failed to fetch devices",{variant:"error"})}finally{s(!1)}},x=()=>{u(null),d({name:"",ip:"",type:"printer",auth:"none",username:"",password:""}),a(!0)},g=y=>{u(y),d({name:y.name,ip:y.ip,type:y.type,auth:y.auth||"none",username:y.username||"",password:""}),a(!0)},m=async y=>{if(window.confirm("Are you sure you want to delete this device?"))try{await qe.delete(`/api/devices/${y}`),e("Device deleted successfully",{variant:"success"}),p()}catch{e("Failed to delete device",{variant:"error"})}},v=async()=>{try{l?(await qe.put(`/api/devices/${l.id}`,c),e("Device updated successfully",{variant:"success"})):(await qe.post("/api/devices",c),e("Device added successfully",{variant:"success"})),a(!1),p()}catch{e("Failed to save device",{variant:"error"})}};return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Device Management"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:x,children:"Add Device"})]}),r.jsx(ae,{elevation:3,children:r.jsx(kx,{rows:t,columns:f,pageSize:10,rowsPerPageOptions:[10,25,50],loading:o,autoHeight:!0,disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-cell:hover":{cursor:"pointer"}}})}),r.jsxs(at,{open:i,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:l?"Edit Device":"Add New Device"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsx(Fe,{fullWidth:!0,label:"Device Name",value:c.name,onChange:y=>d({...c,name:y.target.value}),margin:"normal",required:!0}),r.jsx(Fe,{fullWidth:!0,label:"IP Address",value:c.ip,onChange:y=>d({...c,ip:y.target.value}),margin:"normal",required:!0,helperText:"Enter IP address or CIDR range (e.g., 192.168.1.0/24)"}),r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Device Type"}),r.jsxs(Mt,{value:c.type,label:"Device Type",onChange:y=>d({...c,type:y.target.value}),children:[r.jsx(de,{value:"printer",children:"Printer"}),r.jsx(de,{value:"scanner",children:"Scanner"}),r.jsx(de,{value:"nas",children:"NAS System"}),r.jsx(de,{value:"monitoring",children:"Monitoring Tool"}),r.jsx(de,{value:"camera",children:"Security Camera"}),r.jsx(de,{value:"other",children:"Other"})]})]}),r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Authentication"}),r.jsxs(Mt,{value:c.auth,label:"Authentication",onChange:y=>d({...c,auth:y.target.value}),children:[r.jsx(de,{value:"none",children:"None (IP Whitelist)"}),r.jsx(de,{value:"basic",children:"Basic Auth"}),r.jsx(de,{value:"static",children:"Static User"})]})]}),c.auth!=="none"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{fullWidth:!0,label:"Username",value:c.username,onChange:y=>d({...c,username:y.target.value}),margin:"normal"}),r.jsx(Fe,{fullWidth:!0,label:"Password",type:"password",value:c.password,onChange:y=>d({...c,password:y.target.value}),margin:"normal",helperText:l?"Leave blank to keep existing password":""})]})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>a(!1),children:"Cancel"}),r.jsx(Y,{onClick:v,variant:"contained",children:l?"Update":"Add"})]})]})]})},hD=()=>{const{enqueueSnackbar:e}=Qt(),{socket:t,connected:n}=au(),[o,s]=h.useState([]),[i,a]=h.useState(!0),[l,u]=h.useState("running"),[c,d]=h.useState([]),[f,p]=h.useState({pending:0,processing:0,failed:0,completed:0}),x=[{field:"status",headerName:"Status",width:100,renderCell:C=>{const P=()=>{switch(C.value){case"pending":return r.jsx(wc,{color:"info"});case"processing":return r.jsx(Ue,{size:20});case"completed":return r.jsx(Ne,{color:"success"});case"failed":return r.jsx(ky,{color:"error"});default:return null}};return r.jsx(pt,{title:C.value,children:P()})}},{field:"messageId",headerName:"Message ID",width:150},{field:"from",headerName:"From",flex:1,minWidth:200},{field:"to",headerName:"To",flex:1,minWidth:200},{field:"subject",headerName:"Subject",flex:1,minWidth:250},{field:"size",headerName:"Size",width:100,valueFormatter:C=>{const P=C.value;return P<1024?`${P} B`:P<1024*1024?`${(P/1024).toFixed(2)} KB`:`${(P/(1024*1024)).toFixed(2)} MB`}},{field:"attempts",headerName:"Attempts",width:100,renderCell:C=>r.jsx(we,{label:`${C.value}/3`,size:"small",color:C.value>=3?"error":C.value>1?"warning":"default"})},{field:"queuedAt",headerName:"Queued At",width:180},{field:"nextRetry",headerName:"Next Retry",width:180},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:C=>r.jsxs(A,{children:[r.jsx(pt,{title:"Retry Now",children:r.jsx(Se,{size:"small",onClick:()=>m(C.row.id),color:"primary",disabled:C.row.status==="processing",children:r.jsx(Sl,{fontSize:"small"})})}),r.jsx(pt,{title:"Delete",children:r.jsx(Se,{size:"small",onClick:()=>v(C.row.id),color:"error",children:r.jsx(Xt,{fontSize:"small"})})})]})}];h.useEffect(()=>{if(g(),t&&n)return t.on("queue:update",C=>{s(C.items),p(C.stats)}),()=>{t.off("queue:update")}},[t,n]);const g=async()=>{try{const C=await qe.get("/api/queue");s(C.data.items),p(C.data.stats),u(C.data.status)}catch{e("Failed to fetch queue items",{variant:"error"})}finally{a(!1)}},m=async C=>{try{await qe.post(`/api/queue/${C}/retry`),e("Message queued for retry",{variant:"success"}),g()}catch{e("Failed to retry message",{variant:"error"})}},v=async C=>{if(window.confirm("Are you sure you want to delete this message from the queue?"))try{await qe.delete(`/api/queue/${C}`),e("Message deleted from queue",{variant:"success"}),g()}catch{e("Failed to delete message",{variant:"error"})}},y=async C=>{if(c.length===0){e("No items selected",{variant:"warning"});return}try{await qe.post("/api/queue/bulk",{action:C,ids:c}),e(`Bulk ${C} completed`,{variant:"success"}),d([]),g()}catch{e(`Failed to ${C} items`,{variant:"error"})}},b=async()=>{try{const C=l==="running"?"paused":"running";await qe.post("/api/queue/control",{action:C}),u(C),e(`Queue ${C}`,{variant:"success"})}catch{e("Failed to change queue status",{variant:"error"})}};return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"Email Queue"}),r.jsxs(A,{children:[r.jsx(Y,{variant:"outlined",startIcon:l==="running"?r.jsx(Sy,{}):r.jsx(Py,{}),onClick:b,sx:{mr:1},children:l==="running"?"Pause Queue":"Resume Queue"}),r.jsx(Se,{onClick:g,children:r.jsx(gn,{})})]})]}),r.jsxs(A,{display:"flex",gap:2,mb:3,children:[r.jsxs(ae,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Pending"}),r.jsx(k,{variant:"h4",color:"info.main",children:f.pending})]}),r.jsxs(ae,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Processing"}),r.jsx(k,{variant:"h4",color:"warning.main",children:f.processing})]}),r.jsxs(ae,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Failed"}),r.jsx(k,{variant:"h4",color:"error.main",children:f.failed})]}),r.jsxs(ae,{sx:{p:2,flex:1},children:[r.jsx(k,{variant:"body2",color:"textSecondary",children:"Completed (24h)"}),r.jsx(k,{variant:"h4",color:"success.main",children:f.completed})]})]}),l==="paused"&&r.jsx(ye,{severity:"warning",sx:{mb:2},children:"Queue processing is currently paused"}),c.length>0&&r.jsxs(A,{mb:2,children:[r.jsxs(Y,{variant:"contained",color:"primary",startIcon:r.jsx(Sl,{}),onClick:()=>y("retry"),sx:{mr:1},children:["Retry Selected (",c.length,")"]}),r.jsxs(Y,{variant:"contained",color:"error",startIcon:r.jsx(Xt,{}),onClick:()=>y("delete"),children:["Delete Selected (",c.length,")"]})]}),r.jsx(ae,{elevation:3,children:r.jsx(kx,{rows:o,columns:x,pageSize:10,rowsPerPageOptions:[10,25,50],loading:i,autoHeight:!0,checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:C=>{d(C)},selectionModel:c,sx:{"& .MuiDataGrid-row":{"&.Mui-selected":{backgroundColor:"action.selected"}}}})})]})},Xs=Ut(Ve),fD=Ut(A),Cf=Ut(ae),pD=({value:e,size:t=120,thickness:n=10,children:o})=>{const s=_t(),i=()=>e>=80?s.palette.success.main:e>=60?s.palette.warning.main:s.palette.error.main;return r.jsxs(A,{position:"relative",display:"inline-flex",children:[r.jsx(Ue,{variant:"determinate",value:e,size:t,thickness:n,sx:{color:i(),"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),r.jsx(A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:o})]})},dl=({status:e,size:t="medium"})=>{const n=_t(),o=()=>{switch(e){case"online":case"running":case"active":case"configured":return n.palette.success.main;case"offline":case"stopped":case"error":return n.palette.error.main;case"warning":case"degraded":return n.palette.warning.main;default:return n.palette.grey[500]}},i={small:8,medium:12,large:16}[t]||12;return r.jsx(A,{position:"relative",display:"inline-flex",alignItems:"center",children:r.jsx(A,{sx:{width:i,height:i,borderRadius:"50%",bgcolor:o(),position:"relative","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",bgcolor:o(),animation:e==="online"||e==="configured"?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),.7)}`},"70%":{transform:"scale(1)",boxShadow:`0 0 0 10px ${re(o(),0)}`},"100%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),0)}`}}}}})})},mD=()=>{const{apiRequest:e}=$t(),{enqueueSnackbar:t}=Qt(),n=_t(),[o,s]=h.useState(!0),[i,a]=h.useState(null),[l,u]=h.useState(null),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[x,g]=h.useState("overview");h.useEffect(()=>{m()},[]);const m=async()=>{o||d(!0);try{const[y,b]=await Promise.all([e("/api/security/status"),e("/api/security/recommendations")]);if(y.ok){const C=await y.json();a(C)}if(b.ok){const C=await b.json();u(C)}}catch(y){console.error("Error fetching security data:",y),t("Failed to load security information",{variant:"error"})}finally{s(!1),d(!1)}},v=async()=>{p(!0);try{const y=await e("/api/security/generate-secrets",{method:"POST"});if(y.ok){const b=await y.json();t(b.message,{variant:"success"}),t(b.warning,{variant:"warning",persist:!0})}else throw new Error("Failed to generate secrets")}catch(y){console.error("Error generating secrets:",y),t("Failed to generate security secrets",{variant:"error"})}finally{p(!1)}};return o?r.jsx(A,{sx:{p:3},children:r.jsx(K,{container:!0,spacing:3,children:[1,2,3,4].map(y=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Cc,{variant:"rectangular",height:200,sx:{borderRadius:2}})},y))})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(Cf,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.1)} 0%, ${re(n.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(K,{item:!0,xs:12,md:8,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(So,{badgeContent:r.jsx(dl,{status:i?.overall==="excellent"?"online":"warning",size:"small"}),overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(wn,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.secondary.main} 100%)`},children:r.jsx(Wi,{fontSize:"large"})})}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",fontWeight:"bold",children:"Security Center"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Monitor and manage your SMTP Relay security configuration"})]})]})}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(A,{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,children:[r.jsx(Y,{variant:"contained",startIcon:r.jsx(Iy,{}),onClick:v,disabled:f,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)"}},children:f?"Generating...":"Generate Secrets"}),r.jsx(pt,{title:"Refresh",children:r.jsx(Se,{onClick:m,disabled:c,sx:{background:re(n.palette.primary.main,.1),"&:hover":{background:re(n.palette.primary.main,.2)}},children:c?r.jsx(Ue,{size:24}):r.jsx(gn,{})})})]})})]})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(Cf,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},elevation:2,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.15)} 0%, ${re(n.palette.secondary.dark,.15)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`,border:`1px solid ${re(i.overall==="excellent"?n.palette.success.main:i.overall==="good"?n.palette.info.main:i.overall==="fair"?n.palette.warning.main:n.palette.error.main,.3)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, 
                  ${i.overall==="excellent"?n.palette.success.main:i.overall==="good"?n.palette.info.main:i.overall==="fair"?n.palette.warning.main:n.palette.error.main} 0%, 
                  ${re(n.palette.primary.main,.5)} 100%)`,animation:"shimmer 3s infinite linear","@keyframes shimmer":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(100%)"}}}},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsxs(K,{item:!0,xs:12,md:8,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Security Health Score"}),r.jsxs(A,{display:"flex",alignItems:"baseline",gap:2,children:[r.jsxs(k,{variant:"h1",fontWeight:"900",sx:{background:i.score>=80?"linear-gradient(135deg, #10b981 0%, #34d399 100%)":i.score>=60?"linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)":"linear-gradient(135deg, #ef4444 0%, #f87171 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:`0 2px 10px ${re(i.score>=80?"#10b981":i.score>=60?"#f59e0b":"#ef4444",.3)}`},children:[i.score,"%"]}),r.jsx(A,{children:r.jsx(we,{label:i.overall.replace("_"," ").toUpperCase(),color:i.overall==="excellent"?"success":i.overall==="good"?"info":i.overall==="fair"?"warning":"error",sx:{fontWeight:"bold",fontSize:"1rem"}})})]}),r.jsx(Gt,{variant:"determinate",value:i.score,sx:{mt:2,height:8,borderRadius:4,backgroundColor:re(n.palette.grey[500],.2),"& .MuiLinearProgress-bar":{borderRadius:4,background:i.score>=80?"linear-gradient(90deg, #10b981 0%, #34d399 100%)":i.score>=60?"linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%)":"linear-gradient(90deg, #ef4444 0%, #f87171 100%)"}}})]}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsx(pD,{value:i.score,size:150,thickness:12,children:r.jsx(A,{sx:{textAlign:"center"},children:i.score>=80?r.jsx(Ty,{sx:{fontSize:50,color:"#10b981"}}):i.score>=60?r.jsx(Ey,{sx:{fontSize:50,color:"#f59e0b"}}):r.jsx(Ay,{sx:{fontSize:50,color:"#ef4444"}})})})})]})}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Xs,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.error.dark,.05):re(n.palette.error.light,.05),border:`1px solid ${re(n.palette.error.main,.2)}`,transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${re(n.palette.error.main,.15)}`}},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[r.jsx(wn,{sx:{bgcolor:re(n.palette.error.main,.1),color:n.palette.error.main,width:40,height:40},children:r.jsx(go,{})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Critical Security"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Essential security requirements"})]}),r.jsx(dl,{status:i.critical.secrets.status==="configured"?"configured":"error"})]}),r.jsx(Ht,{spacing:1.5,children:[...i.critical.secrets.items,...i.critical.authentication.items].map((y,b)=>r.jsx(ae,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{transform:"translateX(4px)",borderColor:y.icon==="check"?n.palette.success.main:n.palette.error.main,background:re(y.icon==="check"?n.palette.success.main:n.palette.error.main,.05)}},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[y.icon==="check"?r.jsx(Hu,{sx:{color:n.palette.success.main,fontSize:20}}):y.icon==="warning"?r.jsx(mn,{sx:{color:n.palette.warning.main,fontSize:20}}):r.jsx(My,{sx:{color:n.palette.error.main,fontSize:20}}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:y.name})]}),r.jsx(we,{size:"small",label:y.value||y.status,color:y.icon==="check"?"success":y.icon==="warning"?"warning":"error",variant:"outlined",sx:{fontWeight:"bold"}})]})},b))})]})})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Xs,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.primary.dark,.05):re(n.palette.primary.light,.05),border:`1px solid ${re(n.palette.primary.main,.2)}`,transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${re(n.palette.primary.main,.15)}`}},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[r.jsx(wn,{sx:{bgcolor:re(n.palette.primary.main,.1),color:n.palette.primary.main,width:40,height:40},children:r.jsx(ho,{})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Network Security"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Connection and transport security"})]}),r.jsx(dl,{status:i.network.tls.status==="configured"||i.network.proxy.status==="configured"?"configured":"warning"})]}),r.jsx(Ht,{spacing:1.5,children:[...i.network.tls.items,...i.network.proxy.items].map((y,b)=>r.jsx(ae,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,transition:"all 0.3s","&:hover":{transform:"translateX(4px)",borderColor:y.icon==="check"?n.palette.success.main:n.palette.warning.main,background:re(y.icon==="check"?n.palette.success.main:n.palette.warning.main,.05)}},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[y.name==="TLS Certificate"?r.jsx(Ry,{sx:{color:n.palette.primary.main,fontSize:20}}):y.name==="Reverse Proxy"?r.jsx(Dy,{sx:{color:n.palette.info.main,fontSize:20}}):y.name==="IP Whitelist"?r.jsx(Yf,{sx:{color:n.palette.success.main,fontSize:20}}):r.jsx(Xf,{sx:{color:n.palette.primary.main,fontSize:20}}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:y.name})]}),r.jsx(we,{size:"small",label:y.value||y.status.replace("_"," "),color:y.icon==="check"?"success":"warning",variant:"outlined",sx:{fontWeight:"bold"}})]})},b))})]})})}),(i.optional.mfa.items.length>0||i.optional.webauthn.items.length>0||i.optional.authentication?.items?.length>0)&&r.jsx(K,{item:!0,xs:12,children:r.jsx(Xs,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.info.dark,.05):re(n.palette.info.light,.05),border:`1px solid ${re(n.palette.info.main,.2)}`},children:r.jsxs(Oe,{children:[r.jsxs(k,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Jf,{sx:{color:n.palette.info.main}}),"Authentication & Optional Features"]}),r.jsx(K,{container:!0,spacing:2,children:[...i.optional.mfa.items,...i.optional.webauthn.items,...i.optional.authentication?.items||[]].map((y,b)=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsxs(ae,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`,textAlign:"center",minHeight:140,display:"flex",flexDirection:"column",justifyContent:"center",transition:"all 0.3s","&:hover":{transform:"translateY(-2px)",borderColor:y.icon==="check"?n.palette.success.main:y.icon==="warning"?n.palette.warning.main:n.palette.info.main,background:re(y.icon==="check"?n.palette.success.main:y.icon==="warning"?n.palette.warning.main:n.palette.info.main,.05)}},children:[y.name==="Multi-Factor Auth"?r.jsx(mi,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):y.name==="WebAuthn/FIDO2"?r.jsx(ir,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):y.name==="Session Timeout"?r.jsx(Fy,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):y.name==="Password Policy"?r.jsx(Oy,{sx:{fontSize:40,color:y.icon==="check"?n.palette.success.main:n.palette.warning.main,mb:1}}):y.name==="Account Lockout"?r.jsx(xo,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}):y.name==="Azure AD SSO"?r.jsx(jc,{sx:{fontSize:40,color:n.palette.success.main,mb:1}}):y.name==="LDAP Integration"?r.jsx(Ly,{sx:{fontSize:40,color:n.palette.success.main,mb:1}}):r.jsx(Rn,{sx:{fontSize:40,color:n.palette.info.main,mb:1}}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:y.name}),r.jsx(we,{size:"small",label:y.value||y.status.replace("_"," "),color:y.icon==="check"?"success":y.icon==="warning"?"warning":"info",variant:"outlined",sx:{mt:1,fontWeight:"bold"}})]})},b))})]})})}),i.recommendations&&i.recommendations.length>0&&r.jsx(K,{item:!0,xs:12,children:r.jsx(fD,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:r.jsxs(ye,{severity:"info",sx:{borderRadius:3,background:n.palette.mode==="dark"?re(n.palette.info.dark,.1):re(n.palette.info.light,.1),border:`1px solid ${re(n.palette.info.main,.3)}`,"& .MuiAlert-icon":{fontSize:28}},icon:r.jsx(_y,{sx:{animation:"pulse 2s infinite"}}),children:[r.jsx(Ye,{sx:{fontWeight:"bold",fontSize:"1.1rem"},children:"Security Recommendations"}),r.jsx(Ht,{spacing:1,sx:{mt:2},children:i.recommendations.map((y,b)=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,p:1,borderRadius:1,transition:"all 0.3s","&:hover":{background:re(n.palette.info.main,.1),transform:"translateX(8px)"}},children:[r.jsx(Zf,{sx:{color:n.palette.info.main,fontSize:16}}),r.jsx(k,{variant:"body2",children:y})]},b))})]})})}),l&&l.length>0&&r.jsxs(K,{item:!0,xs:12,children:[r.jsx(k,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{mt:2},children:"Detailed Security Checklist"}),r.jsx(K,{container:!0,spacing:2,children:l.map((y,b)=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Xs,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6+b*.1},sx:{borderRadius:2,border:`1px solid ${y.priority==="high"?re(n.palette.error.main,.3):y.priority==="medium"?re(n.palette.warning.main,.3):re(n.palette.info.main,.3)}`},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,mb:2,children:[r.jsx(we,{label:y.priority.toUpperCase(),size:"small",color:y.priority==="high"?"error":y.priority==="medium"?"warning":"info"}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:y.category})]}),r.jsx(Ht,{spacing:1,children:y.items.map((C,P)=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,p:1,borderRadius:1,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`},children:[C.status==="completed"?r.jsx(Hu,{sx:{color:n.palette.success.main,fontSize:20}}):C.status==="pending"?r.jsx(mn,{sx:{color:n.palette.warning.main,fontSize:20}}):r.jsx(ep,{sx:{color:n.palette.info.main,fontSize:20}}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:C.title}),r.jsx(k,{variant:"caption",color:"text.secondary",children:C.description})]})]},P))})]})})},b))})]})]})]})]})},wf=({status:e,size:t="medium"})=>{const n=_t(),o=()=>{switch(e){case"online":case"running":case"active":return n.palette.success.main;case"offline":case"stopped":case"error":return n.palette.error.main;case"warning":case"degraded":return n.palette.warning.main;default:return n.palette.grey[500]}},i={small:8,medium:12,large:16}[t]||12;return r.jsx(A,{position:"relative",display:"inline-flex",alignItems:"center",children:r.jsx(A,{sx:{width:i,height:i,borderRadius:"50%",bgcolor:o(),position:"relative","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",bgcolor:o(),animation:e==="online"||e==="running"?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),.7)}`},"70%":{transform:"scale(1)",boxShadow:`0 0 0 10px ${re(o(),0)}`},"100%":{transform:"scale(0.95)",boxShadow:`0 0 0 0 ${re(o(),0)}`}}}}})})},gD=()=>{const{apiRequest:e}=$t(),{enqueueSnackbar:t}=Qt(),n=_t(),[o,s]=h.useState(!0),[i,a]=h.useState(null),[l,u]=h.useState(!1),[c,d]=h.useState({system:!0,resources:!0,network:!0}),[f,p]=h.useState(!1);h.useEffect(()=>{x()},[]),h.useEffect(()=>{if(f){const b=setInterval(x,3e4);return()=>clearInterval(b)}},[f]);const x=async()=>{o||u(!0);try{const b=await e("/api/system/info");if(!b.ok)throw new Error("Failed to fetch system information");const C=await b.json();a(C)}catch(b){console.error("Error fetching system info:",b),t("Failed to load system information",{variant:"error"})}finally{s(!1),u(!1)}},g=b=>{navigator.clipboard.writeText(b),t("Copied to clipboard",{variant:"success"})},m=b=>{if(b===0)return"0 Bytes";const C=1024,P=["Bytes","KB","MB","GB","TB"],L=Math.floor(Math.log(b)/Math.log(C));return parseFloat((b/Math.pow(C,L)).toFixed(2))+" "+P[L]},v=b=>{const C=Math.floor(b/86400),P=Math.floor(b%86400/3600),L=Math.floor(b%3600/60);return`${C}d ${P}h ${L}m`},y=b=>{d(C=>({...C,[b]:!C[b]}))};return o?r.jsx(A,{children:r.jsx(K,{container:!0,spacing:3,children:[1,2,3,4].map(b=>r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Cc,{variant:"rectangular",height:200,sx:{borderRadius:2}})},b))})}):i?r.jsxs(A,{children:[r.jsx(ae,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:n.palette.mode==="dark"?`linear-gradient(135deg, ${re(n.palette.primary.dark,.1)} 0%, ${re(n.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(n.palette.primary.light,.1)} 0%, ${re(n.palette.secondary.light,.1)} 100%)`},children:r.jsxs(K,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(K,{item:!0,xs:12,md:8,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(So,{badgeContent:r.jsx(wf,{status:"online",size:"small"}),overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(wn,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.secondary.main} 100%)`},children:r.jsx(Ar,{fontSize:"large"})})}),r.jsxs(A,{children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"System Information"}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:[i?.hostname||"Loading...","  Last updated: ",new Date().toLocaleTimeString()]})]})]})}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(A,{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,children:[r.jsx(pt,{title:f?"Auto-refresh ON (30s)":"Auto-refresh OFF",children:r.jsx(Se,{onClick:()=>{p(!f),t(f?"Auto-refresh disabled":"Auto-refresh enabled (30s interval)",{variant:"info"})},color:f?"primary":"default",children:r.jsx($y,{})})}),r.jsx(pt,{title:"Refresh Now",children:r.jsx(Se,{onClick:()=>{x(),t("Refreshing system information...",{variant:"info"})},disabled:l,children:l?r.jsx(Ue,{size:24}):r.jsx(gn,{})})})]})})]})}),r.jsx(K,{container:!0,spacing:2,sx:{mb:3},children:[{label:"Uptime",value:i?.uptime?v(i.uptime):"N/A",icon:r.jsx(wc,{}),color:"primary"},{label:"CPU Cores",value:i?.cpu?.cores||"N/A",icon:r.jsx(zu,{}),color:"secondary"},{label:"Memory",value:i?.memory?`${Math.round(i.memory.used/i.memory.total*100)}%`:"N/A",icon:r.jsx(Gu,{}),color:i?.memory&&i.memory.used/i.memory.total>.8?"error":"success"},{label:"Disk",value:i?.disk?`${Math.round(i.disk.used/i.disk.total*100)}%`:"N/A",icon:r.jsx(Sc,{}),color:i?.disk&&i.disk.used/i.disk.total>.8?"error":"success"}].map((b,C)=>r.jsx(K,{item:!0,xs:6,md:3,children:r.jsx(Ve,{sx:{p:2,borderRadius:2,background:n.palette.mode==="dark"?re(n.palette.background.paper,.8):"white",border:`1px solid ${re(n.palette[b.color].main,.2)}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:b.label}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:b.value})]}),r.jsx(wn,{sx:{width:40,height:40,bgcolor:re(n.palette[b.color].main,.1),color:n.palette[b.color].main},children:b.icon})]})})},C))}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(Ve,{sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(wn,{sx:{bgcolor:"primary.main",width:32,height:32},children:r.jsx(Ar,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"System Overview"})]}),r.jsx(Se,{size:"small",onClick:()=>y("system"),children:r.jsx(ar,{sx:{transform:c.system?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Bn,{in:c.system,children:r.jsx(Ht,{spacing:1.5,children:[{label:"Hostname",value:i?.hostname,icon:r.jsx(Ny,{})},{label:"Platform",value:i?.platform,icon:r.jsx(Vy,{})},{label:"OS Version",value:i?.osVersion,icon:r.jsx(By,{})},{label:"Kernel",value:i?.kernel,icon:r.jsx(Hy,{})},{label:"Architecture",value:i?.arch,icon:r.jsx(zy,{})},{label:"Node Version",value:i?.nodeVersion,icon:r.jsx(Gy,{})}].map((b,C)=>r.jsx(ae,{sx:{p:2,borderRadius:2,background:re(n.palette.background.default,.5),border:`1px solid ${n.palette.divider}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[b.icon,r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:b.label}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:b.value||"Unknown"})]})]}),b.value&&r.jsx(Se,{size:"small",onClick:()=>g(b.value),children:r.jsx(zt,{fontSize:"small"})})]})},C))})})]})})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(Ve,{sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(wn,{sx:{bgcolor:"secondary.main",width:32,height:32},children:r.jsx(Gu,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Resource Usage"})]}),r.jsx(Se,{size:"small",onClick:()=>y("resources"),children:r.jsx(ar,{sx:{transform:c.resources?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsxs(Bn,{in:c.resources,children:[r.jsxs(A,{mb:3,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsx(k,{variant:"subtitle2",children:"Memory Usage"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.memory?`${m(i.memory.used)} / ${m(i.memory.total)}`:"Unknown"})]}),r.jsx(Gt,{variant:"determinate",value:i?.memory?i.memory.used/i.memory.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:re(n.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.memory&&i.memory.used/i.memory.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.primary.main} 0%, ${n.palette.primary.dark} 100%)`}}}),i?.memory?.free&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:[m(i.memory.free)," available"]})]}),r.jsxs(A,{mb:3,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsx(k,{variant:"subtitle2",children:"Disk Usage"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.disk?`${m(i.disk.used)} / ${m(i.disk.total)}`:"Unknown"})]}),r.jsx(Gt,{variant:"determinate",value:i?.disk?i.disk.used/i.disk.total*100:0,sx:{height:10,borderRadius:5,backgroundColor:re(n.palette.secondary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:5,background:i?.disk&&i.disk.used/i.disk.total>.8?`linear-gradient(90deg, ${n.palette.error.main} 0%, ${n.palette.error.dark} 100%)`:`linear-gradient(90deg, ${n.palette.secondary.main} 0%, ${n.palette.secondary.dark} 100%)`}}}),i?.disk?.free&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:[m(i.disk.free)," available"]})]}),r.jsx(ae,{sx:{p:2,borderRadius:2,bgcolor:re(n.palette.background.default,.5)},children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(zu,{fontSize:"small"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"CPU Cores"}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:i?.cpu?.cores||"N/A"})]})]})}),r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(zf,{fontSize:"small"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Load Average"}),r.jsx(k,{variant:"body2",fontWeight:"medium",children:i?.loadAvg?.map(b=>b.toFixed(2)).join(" ")||"N/A"})]})]})})]})})]})]})})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(Ve,{sx:{borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(wn,{sx:{bgcolor:"success.main",width:32,height:32},children:r.jsx(Uy,{fontSize:"small"})}),r.jsx(k,{variant:"h6",fontWeight:"bold",children:"Services & Network"})]}),r.jsx(Se,{size:"small",onClick:()=>y("network"),children:r.jsx(ar,{sx:{transform:c.network?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),r.jsx(Bn,{in:c.network,children:r.jsxs(K,{container:!0,spacing:3,children:[r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Active Services"}),r.jsx(Ht,{spacing:1,children:[{name:"SMTP Server",port:i?.ports?.smtp||"25",status:i?.services?.smtp||"active",icon:r.jsx(mo,{})},{name:"API Server",port:i?.ports?.api||"3001",status:i?.services?.api||"active",icon:r.jsx(Wy,{})},{name:"Dashboard",port:i?.ports?.dashboard||"3001",status:i?.services?.dashboard||"active",icon:r.jsx(tp,{})},{name:"PM2 Process",port:"N/A",status:i?.pm2?.status||"unknown",icon:r.jsx(Pc,{})}].map((b,C)=>r.jsx(ae,{sx:{p:2,borderRadius:2,border:`1px solid ${n.palette.divider}`},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[b.icon,r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:b.name}),r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Port: ",b.port]})]})]}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(wf,{status:b.status}),r.jsx(we,{label:b.status,size:"small",color:b.status==="active"||b.status==="running"?"success":b.status==="stopped"||b.status==="error"?"error":"warning",variant:"outlined"})]})]})},C))})]}),r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Network Information"}),r.jsxs(Ht,{spacing:2,children:[r.jsxs(ae,{sx:{p:2,borderRadius:2,bgcolor:re(n.palette.info.main,.05)},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"IP Addresses"}),r.jsx(A,{mt:1,children:i?.network?.ips?.map((b,C)=>r.jsx(we,{label:b,size:"small",sx:{mr:1,mb:1,fontFamily:"monospace"},icon:r.jsx(Xf,{}),onClick:()=>g(b)},C))||r.jsx(k,{variant:"body2",children:"No IP addresses found"})})]}),r.jsx(ae,{sx:{p:2,borderRadius:2},children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(qy,{fontSize:"small",color:"primary"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Uptime"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.pm2?.uptime||"Unknown"})]})]})}),r.jsx(K,{item:!0,xs:6,children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ky,{fontSize:"small",color:"secondary"}),r.jsxs(A,{children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Restarts"}),r.jsx(k,{variant:"body2",fontWeight:"bold",children:i?.pm2?.restarts||"0"})]})]})})]})})]})]})]})})]})})})]})]}):r.jsxs(ye,{severity:"error",sx:{borderRadius:2},action:r.jsx(Y,{color:"inherit",size:"small",onClick:x,children:"Retry"}),children:[r.jsx(Ye,{children:"Error"}),"Failed to load system information"]})},fs=h.createContext({});function xD(e){return hr("MuiTimeline",e)}Kn("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function xr(e){return e==="alternate-reverse"?"positionAlternateReverse":`position${Tn(e)}`}const yD=["position","className"],bD=e=>{const{position:t,classes:n}=e,o={root:["root",t&&xr(t)]};return Te(o,xD,n)},vD=Xe("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.position&&t[xr(n.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),CD=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimeline"}),{position:s="right",className:i}=o,a=le(o,yD),l=j({},o,{position:s}),u=bD(l),c=h.useMemo(()=>({position:s}),[s]);return r.jsx(fs.Provider,{value:c,children:r.jsx(vD,j({className:$e(u.root,i),ownerState:l,ref:n},a))})});function wD(e){return hr("MuiTimelineConnector",e)}Kn("MuiTimelineConnector",["root"]);const jD=["className"],SD=e=>{const{classes:t}=e;return Te({root:["root"]},wD,t)},PD=Xe("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.grey[400],flexGrow:1})),kD=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineConnector"}),{className:s}=o,i=le(o,jD),a=o,l=SD(a);return r.jsx(PD,j({className:$e(l.root,s),ownerState:a,ref:n},i))});function ID(e){return hr("MuiTimelineContent",e)}const TD=Kn("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),ED=["className"],AD=e=>{const{position:t,classes:n}=e,o={root:["root",xr(t)]};return Te(o,ID,n)},MD=Xe(k,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({flex:1,padding:"6px 16px",textAlign:"left"},e.position==="left"&&{textAlign:"right"})),RD=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineContent"}),{className:s}=o,i=le(o,ED),{position:a}=h.useContext(fs),l=j({},o,{position:a||"right"}),u=AD(l);return r.jsx(MD,j({component:"div",className:$e(u.root,s),ownerState:l,ref:n},i))});function DD(e){return hr("MuiTimelineDot",e)}Kn("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const FD=["className","color","variant"],OD=e=>{const{color:t,variant:n,classes:o}=e,s={root:["root",n,t!=="inherit"&&`${n}${Tn(t)}`]};return Te(s,DD,o)},LD=Xe("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.color!=="inherit"&&`${n.variant}${Tn(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>j({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0"},e.variant==="filled"&&j({borderColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main})),e.variant==="outlined"&&j({boxShadow:"none",backgroundColor:"transparent"},e.color!=="inherit"&&j({},e.color==="grey"?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[e.color].main})))),_D=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineDot"}),{className:s,color:i="grey",variant:a="filled"}=o,l=le(o,FD),u=j({},o,{color:i,variant:a}),c=OD(u);return r.jsx(LD,j({className:$e(c.root,s),ownerState:u,ref:n},l))});function $D(e){return hr("MuiTimelineOppositeContent",e)}const ND=Kn("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),VD=["className"],BD=e=>{const{position:t,classes:n}=e,o={root:["root",xr(t)]};return Te(o,$D,n)},HD=Xe(k,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1},e.position==="left"&&{textAlign:"left"})),Jx=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineOppositeContent"}),{className:s}=o,i=le(o,VD),{position:a}=h.useContext(fs),l=j({},o,{position:a||"left"}),u=BD(l);return r.jsx(HD,j({component:"div",className:$e(u.root,s),ownerState:l,ref:n},i))});Jx.muiName="TimelineOppositeContent";function zD(e){return hr("MuiTimelineItem",e)}Kn("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const GD=["position","className"],UD=e=>{const{position:t,classes:n,hasOppositeContent:o}=e,s={root:["root",xr(t),!o&&"missingOppositeContent"]};return Te(s,zD,n)},WD=Xe("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[xr(n.position)]]}})(({ownerState:e})=>j({listStyle:"none",display:"flex",position:"relative",minHeight:70},e.position==="left"&&{flexDirection:"row-reverse"},(e.position==="alternate"||e.position==="alternate-reverse")&&{[`&:nth-of-type(${e.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${TD.root}`]:{textAlign:"right"},[`& .${ND.root}`]:{textAlign:"left"}}},!e.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}})),qD=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineItem"}),{position:s,className:i}=o,a=le(o,GD),{position:l}=h.useContext(fs);let u=!1;h.Children.forEach(o.children,p=>{Qy(p,["TimelineOppositeContent"])&&(u=!0)});const c=j({},o,{position:s||l||"right",hasOppositeContent:u}),d=UD(c),f=h.useMemo(()=>({position:c.position}),[c.position]);return r.jsx(fs.Provider,{value:f,children:r.jsx(WD,j({className:$e(d.root,i),ownerState:c,ref:n},a))})});function KD(e){return hr("MuiTimelineSeparator",e)}Kn("MuiTimelineSeparator",["root"]);const QD=["className"],YD=e=>{const{classes:t}=e;return Te({root:["root"]},KD,t)},XD=Xe("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),JD=h.forwardRef(function(t,n){const o=fr({props:t,name:"MuiTimelineSeparator"}),{className:s}=o,i=le(o,QD),a=o,l=YD(a);return r.jsx(XD,j({className:$e(l.root,s),ownerState:a,ref:n},i))}),jf=Ut(Ve),ZD=Ut(A),eF=()=>{const e=_t(),{enqueueSnackbar:t}=Qt(),[n,o]=h.useState(!1),[s,i]=h.useState(null),[a,l]=h.useState(!1),[u,c]=h.useState(!1),[d,f]=h.useState(!1),[p,x]=h.useState(!0),[g,m]=h.useState(!1),[v,y]=h.useState(!1),[b,C]=h.useState([]),[P,L]=h.useState(!1),[T,I]=h.useState(0),[R,N]=h.useState(null),[F,S]=h.useState(null),[V,D]=h.useState(null),[w,E]=h.useState({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),[M,$]=h.useState({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"});h.useEffect(()=>{_(),O()},[]);const _=async()=>{o(!0);try{const ie=await(await fetch("/api/certificates/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();i(ie),y(ie.autoRenewEnabled||!1)}catch{t("Failed to fetch certificate status",{variant:"error"})}finally{o(!1)}},O=async()=>{try{const ie=await(await fetch("/api/certificates/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();C(ie.history||[])}catch{console.error("Failed to fetch certificate history")}},B=async()=>{if(!R||!F){t("Certificate and key files are required",{variant:"warning"});return}const Q=new FormData;Q.append("certificate",R),Q.append("key",F),V&&Q.append("chain",V),o(!0);try{const ie=await fetch("/api/certificates/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Q}),X=await ie.json();if(ie.ok)t("Certificate uploaded successfully",{variant:"success"}),l(!1),N(null),S(null),D(null),_(),O();else throw new Error(X.error)}catch(ie){t(`Upload failed: ${ie.message}`,{variant:"error"})}finally{o(!1)}},z=async()=>{if(!w.commonName){t("Common Name is required",{variant:"warning"});return}o(!0);try{const Q=await fetch("/api/certificates/generate-self-signed",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(w)}),ie=await Q.json();if(Q.ok)t("Self-signed certificate generated successfully",{variant:"success"}),c(!1),E({commonName:"",country:"",state:"",locality:"",organization:"",organizationalUnit:"",emailAddress:"",days:365,keySize:2048,alternativeNames:[]}),_(),O();else throw new Error(ie.error)}catch(Q){t(`Generation failed: ${Q.message}`,{variant:"error"})}finally{o(!1)}},G=async()=>{if(!M.domain||!M.email){t("Domain and email are required",{variant:"warning"});return}o(!0);try{const Q=await fetch("/api/certificates/generate-letsencrypt",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(M)}),ie=await Q.json();if(Q.ok)t(ie.message,{variant:"success"}),ie.renewCommand&&t("Auto-renewal configured",{variant:"info"}),f(!1),$({domain:"",email:"",staging:!0,autoRenew:!0,dnsChallenge:!1,webroot:"/var/www/html"}),_(),O();else throw new Error(ie.error||"Generation failed")}catch(Q){t(`Let's Encrypt failed: ${Q.message}`,{variant:"error"})}finally{o(!1)}},J=async()=>{try{(await fetch("/api/certificates/auto-renew",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!v})})).ok&&(y(!v),t(`Auto-renewal ${v?"disabled":"enabled"}`,{variant:"success"}))}catch{t("Failed to update auto-renewal",{variant:"error"})}},te=s?.hasCertificate?s.daysUntilExpiry<0?{status:"expired",color:"error",icon:r.jsx(In,{})}:s.daysUntilExpiry<7?{status:"critical",color:"error",icon:r.jsx(nb,{})}:s.daysUntilExpiry<30?{status:"warning",color:"warning",icon:r.jsx(mn,{})}:s.daysUntilExpiry<60?{status:"attention",color:"info",icon:r.jsx(ep,{})}:{status:"healthy",color:"success",icon:r.jsx(Ne,{})}:{status:"missing",color:"default",icon:r.jsx(xo,{})},ve=Q=>{navigator.clipboard.writeText(Q),t("Copied to clipboard",{variant:"success"})},W=Q=>Q?new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return r.jsxs(A,{sx:{width:"100%"},children:[r.jsx(jf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},elevation:3,sx:{mb:3,background:e.palette.mode==="dark"?`linear-gradient(135deg, ${re(e.palette.primary.dark,.1)} 0%, ${re(e.palette.secondary.dark,.1)} 100%)`:`linear-gradient(135deg, ${re(e.palette.primary.light,.1)} 0%, ${re(e.palette.secondary.light,.1)} 100%)`,borderRadius:3,overflow:"visible"},children:r.jsx(Oe,{sx:{p:4},children:r.jsxs(K,{container:!0,spacing:3,children:[r.jsxs(K,{item:!0,xs:12,md:8,children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:3,children:[r.jsx(So,{badgeContent:te.status==="healthy"?r.jsx(Ne,{fontSize:"small"}):null,color:te.color,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:r.jsx(A,{sx:{width:64,height:64,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.mode==="dark"?`linear-gradient(135deg, ${e.palette.primary.dark} 0%, ${e.palette.secondary.dark} 100%)`:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.secondary.main} 100%)`,color:"white",mr:2},children:te.icon})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"TLS Certificate Status"}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(we,{label:s?.hasCertificate?"Certificate Installed":"No Certificate",color:te.color,size:"small",icon:s?.hasCertificate?r.jsx(go,{}):r.jsx(xo,{})}),s?.isSelfSigned&&r.jsx(we,{label:"Self-Signed",color:"warning",size:"small",variant:"outlined"}),s?.isLetsEncrypt&&r.jsx(we,{label:"Let's Encrypt",color:"success",size:"small",icon:r.jsx(Uu,{})})]})]}),r.jsx(pt,{title:"Refresh Status",children:r.jsx(Se,{onClick:_,disabled:n,sx:{background:re(e.palette.primary.main,.1),"&:hover":{background:re(e.palette.primary.main,.2)}},children:n?r.jsx(Ue,{size:24}):r.jsx(gn,{})})})]}),n&&r.jsx(Gt,{sx:{mb:2,borderRadius:1}}),s?.hasCertificate&&r.jsx(eg,{children:r.jsxs(ZD,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(ae,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Wu,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Common Name"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:s.subject||"Unknown"})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(ae,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Uu,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Issuer"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:s.issuer||"Unknown"})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(ae,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8)},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(Yy,{sx:{mr:1,color:"primary.main"}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Valid From"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:W(s.validFrom)})]})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(ae,{sx:{p:2,borderRadius:2,bgcolor:re(e.palette.background.paper,.8),border:te.status!=="healthy"?`2px solid ${e.palette[te.color].main}`:"none"},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(wc,{sx:{mr:1,color:te.color==="default"?"primary.main":`${te.color}.main`}}),r.jsx(k,{variant:"subtitle2",color:"textSecondary",children:"Expires"})]}),r.jsx(k,{variant:"body1",fontWeight:"medium",children:W(s.validTo)}),r.jsx(k,{variant:"caption",color:`${te.color}.main`,children:s.daysUntilExpiry>0?`${s.daysUntilExpiry} days remaining`:"Expired"})]})})]}),r.jsxs(Xy,{expanded:p,onChange:()=>x(!p),sx:{mt:2,borderRadius:2,"&:before":{display:"none"}},children:[r.jsx(Jy,{expandIcon:r.jsx(ar,{}),children:r.jsx(k,{children:"Advanced Certificate Details"})}),r.jsx(Zy,{children:r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(np,{})}),r.jsx(ce,{primary:"Serial Number",secondary:s.serialNumber||"N/A"}),r.jsx(un,{children:r.jsx(Se,{size:"small",onClick:()=>ve(s.serialNumber),children:r.jsx(zt,{fontSize:"small"})})})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(ir,{})}),r.jsx(ce,{primary:"Signature Algorithm",secondary:s.signatureAlgorithm||"N/A"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Wi,{})}),r.jsx(ce,{primary:"Key Size",secondary:`${s.keySize||"Unknown"} bits`})]})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Wu,{})}),r.jsx(ce,{primary:"Alternative Names",secondary:s.altNames?.join(", ")||"None"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Rn,{})}),r.jsx(ce,{primary:"Fingerprint (SHA-256)",secondary:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(k,{variant:"caption",sx:{fontFamily:"monospace",display:g?"block":"none"},children:s.fingerprint}),!g&&r.jsx(k,{variant:"caption",children:""}),r.jsx(Se,{size:"small",onClick:()=>m(!g),sx:{ml:1},children:g?r.jsx(yc,{fontSize:"small"}):r.jsx(bc,{fontSize:"small"})})]})})]})]})})]})})]})]})}),!s?.hasCertificate&&r.jsxs(ye,{severity:"warning",sx:{borderRadius:2},children:[r.jsx(Ye,{children:"No Certificate Installed"}),"Your SMTP relay is running without TLS encryption. Upload or generate a certificate to secure email communications."]})]}),r.jsx(K,{item:!0,xs:12,md:4,children:r.jsxs(ae,{sx:{p:3,borderRadius:2,height:"100%"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),r.jsxs(A,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(Y,{fullWidth:!0,variant:"contained",startIcon:r.jsx(Ko,{}),onClick:()=>f(!0),sx:{background:"linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)",color:"black",fontWeight:"bold"},children:"Get Let's Encrypt Cert"}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Mr,{}),onClick:()=>l(!0),children:"Upload Certificate"}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Zs,{}),onClick:()=>c(!0),children:"Generate Self-Signed"}),s?.hasCertificate&&r.jsxs(r.Fragment,{children:[r.jsx(ft,{}),r.jsx(Y,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(eb,{}),onClick:()=>window.open("/api/certificates/download/certificate","_blank"),children:"Download Certificate"}),r.jsx($n,{control:r.jsx(nr,{checked:v,onChange:J,color:"primary"}),label:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(tb,{sx:{mr:1}}),"Auto-Renewal"]})})]})]})]})})]})})}),b.length>0&&r.jsx(jf,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},elevation:3,sx:{mb:3,borderRadius:3},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(k,{variant:"h6",children:"Certificate History"}),r.jsx(Se,{onClick:()=>L(!P),children:r.jsx(rp,{})})]}),r.jsx(Bn,{in:P,children:r.jsx(CD,{position:"alternate",children:b.slice(0,5).map((Q,ie)=>r.jsxs(qD,{children:[r.jsx(Jx,{color:"textSecondary",children:W(Q.date)}),r.jsxs(JD,{children:[r.jsx(_D,{color:Q.type==="installed"?"success":"warning",children:Q.type==="installed"?r.jsx(Ne,{}):r.jsx(mn,{})}),ie<b.length-1&&r.jsx(kD,{})]}),r.jsxs(RD,{children:[r.jsx(k,{variant:"subtitle2",children:Q.action}),r.jsx(k,{variant:"caption",color:"textSecondary",children:Q.details})]})]},ie))})})]})}),r.jsxs(at,{open:a,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:ka,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Mr,{sx:{mr:1}}),"Upload TLS Certificate"]})}),r.jsx(ct,{children:r.jsxs(A,{sx:{mt:2,display:"flex",flexDirection:"column",gap:3},children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Certificate File (.pem, .crt) *"}),r.jsx(Ia,{type:"file",onChange:Q=>N(Q.target.files[0]),inputProps:{accept:".pem,.crt"},fullWidth:!0})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Private Key File (.pem, .key) *"}),r.jsx(Ia,{type:"file",onChange:Q=>S(Q.target.files[0]),inputProps:{accept:".pem,.key"},fullWidth:!0})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Certificate Chain (optional)"}),r.jsx(Ia,{type:"file",onChange:Q=>D(Q.target.files[0]),inputProps:{accept:".pem"},fullWidth:!0})]}),r.jsx(ye,{severity:"info",children:"Files will be validated before installation. Ensure your private key matches the certificate."})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>l(!1),children:"Cancel"}),r.jsx(Y,{onClick:B,variant:"contained",disabled:n||!R||!F,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:"Upload & Install"})]})]}),r.jsxs(at,{open:u,onClose:()=>c(!1),maxWidth:"md",fullWidth:!0,TransitionComponent:ka,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Zs,{sx:{mr:1}}),"Generate Self-Signed Certificate"]})}),r.jsx(ct,{children:r.jsxs(zr,{activeStep:T,orientation:"vertical",sx:{mt:2},children:[r.jsxs(Hn,{children:[r.jsx(zn,{children:"Basic Information"}),r.jsxs(Ta,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,children:r.jsx(Fe,{label:"Common Name (CN) *",value:w.commonName,onChange:Q=>E({...w,commonName:Q.target.value}),fullWidth:!0,helperText:"e.g., smtp-relay.yourdomain.com"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(Fe,{label:"Country (C)",value:w.country,onChange:Q=>E({...w,country:Q.target.value}),fullWidth:!0,inputProps:{maxLength:2},helperText:"Two-letter code (US, DE, CH)"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(Fe,{label:"State/Province (ST)",value:w.state,onChange:Q=>E({...w,state:Q.target.value}),fullWidth:!0})})]}),r.jsx(A,{mt:2,children:r.jsx(Y,{onClick:()=>I(1),variant:"contained",children:"Next"})})]})]}),r.jsxs(Hn,{children:[r.jsx(zn,{children:"Organization Details"}),r.jsxs(Ta,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(Fe,{label:"Organization (O)",value:w.organization,onChange:Q=>E({...w,organization:Q.target.value}),fullWidth:!0})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(Fe,{label:"Organizational Unit (OU)",value:w.organizationalUnit,onChange:Q=>E({...w,organizationalUnit:Q.target.value}),fullWidth:!0})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(Fe,{label:"Email Address",type:"email",value:w.emailAddress,onChange:Q=>E({...w,emailAddress:Q.target.value}),fullWidth:!0})})]}),r.jsxs(A,{mt:2,display:"flex",gap:1,children:[r.jsx(Y,{onClick:()=>I(0),children:"Back"}),r.jsx(Y,{onClick:()=>I(2),variant:"contained",children:"Next"})]})]})]}),r.jsxs(Hn,{children:[r.jsx(zn,{children:"Certificate Options"}),r.jsxs(Ta,{children:[r.jsxs(K,{container:!0,spacing:2,children:[r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsx(Fe,{label:"Validity (Days)",type:"number",value:w.days,onChange:Q=>E({...w,days:parseInt(Q.target.value)}),fullWidth:!0,helperText:"Recommended: 365 days"})}),r.jsx(K,{item:!0,xs:12,sm:6,children:r.jsxs(wt,{fullWidth:!0,children:[r.jsx(Bt,{children:"Key Size"}),r.jsxs(Mt,{value:w.keySize,onChange:Q=>E({...w,keySize:Q.target.value}),label:"Key Size",children:[r.jsx(de,{value:2048,children:"2048 bits (Recommended)"}),r.jsx(de,{value:4096,children:"4096 bits (More Secure)"})]})]})})]}),r.jsxs(A,{mt:2,display:"flex",gap:1,children:[r.jsx(Y,{onClick:()=>I(1),children:"Back"}),r.jsx(Y,{onClick:z,variant:"contained",disabled:n||!w.commonName,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Zs,{}),children:"Generate Certificate"})]})]})]})]})})]}),r.jsxs(at,{open:d,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,TransitionComponent:ka,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Ko,{sx:{mr:1,color:"success.main"}}),"Generate Let's Encrypt Certificate"]})}),r.jsxs(ct,{children:[r.jsx(ye,{severity:"info",sx:{mb:2},children:"Free, automated TLS certificate from Let's Encrypt Certificate Authority."}),r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(Fe,{label:"Domain *",value:M.domain,onChange:Q=>$({...M,domain:Q.target.value}),fullWidth:!0,helperText:"Fully qualified domain name (must be publicly accessible)"}),r.jsx(Fe,{label:"Email *",type:"email",value:M.email,onChange:Q=>$({...M,email:Q.target.value}),fullWidth:!0,helperText:"For renewal notifications and account recovery"}),r.jsx($n,{control:r.jsx(nr,{checked:M.dnsChallenge,onChange:Q=>$({...M,dnsChallenge:Q.target.checked})}),label:"Use DNS Challenge (for wildcard certificates)"}),!M.dnsChallenge&&r.jsx(Fe,{label:"Webroot Path",value:M.webroot,onChange:Q=>$({...M,webroot:Q.target.value}),fullWidth:!0,helperText:"Path for HTTP-01 challenge files"}),r.jsx($n,{control:r.jsx(nr,{checked:M.autoRenew,onChange:Q=>$({...M,autoRenew:Q.target.checked}),color:"primary"}),label:"Enable Auto-Renewal (Recommended)"}),r.jsx($n,{control:r.jsx(nr,{checked:M.staging,onChange:Q=>$({...M,staging:Q.target.checked})}),label:"Use Staging Environment (for testing)"}),!M.staging&&r.jsx(ye,{severity:"warning",children:"Production certificates have rate limits. Use staging for testing first."})]})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>f(!1),children:"Cancel"}),r.jsx(Y,{onClick:G,variant:"contained",color:"success",disabled:n||!M.domain||!M.email,startIcon:n?r.jsx(Ue,{size:20}):r.jsx(Ko,{}),children:"Generate Certificate"})]})]})]})};function Sf({children:e,value:t,index:n,...o}){return r.jsx("div",{role:"tabpanel",hidden:t!==n,id:`settings-tabpanel-${n}`,"aria-labelledby":`settings-tab-${n}`,...o,children:t===n&&r.jsx(A,{sx:{p:3},children:e})})}function tF(){const[e,t]=h.useState(0);return r.jsxs(A,{sx:{p:3},children:[r.jsx(k,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Settings"}),r.jsx(ae,{elevation:3,sx:{width:"100%",mb:2},children:r.jsxs(qi,{value:e,onChange:(n,o)=>t(o),indicatorColor:"primary",textColor:"primary",variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(jn,{label:"TLS Certificates",icon:r.jsx(Rn,{})}),r.jsx(jn,{label:"System Config",icon:r.jsx(rs,{})})]})}),r.jsx(Sf,{value:e,index:0,children:r.jsx(eF,{})}),r.jsx(Sf,{value:e,index:1,children:r.jsx(gD,{})})]})}const nF=()=>{const{enqueueSnackbar:e}=Qt(),{socket:t,connected:n}=au(),[o,s]=h.useState([]),[i,a]=h.useState(!0),[l,u]=h.useState({level:"all",search:"",timeRange:"1h"}),[c,d]=h.useState(!0),f={error:"error",warn:"warning",info:"info",debug:"default"};h.useEffect(()=>{if(p(),t&&n&&c)return t.on("logs:new",v=>{s(y=>[v,...y].slice(0,1e3))}),()=>{t.off("logs:new")}},[t,n,c,l]);const p=async()=>{try{const v=await qe.get("/api/logs",{params:l});s(v.data)}catch{e("Failed to fetch logs",{variant:"error"})}finally{a(!1)}},x=()=>{const v=o.map(P=>`[${P.timestamp}] [${P.level.toUpperCase()}] ${P.message} ${P.details||""}`).join(`
`),y=new Blob([v],{type:"text/plain"}),b=window.URL.createObjectURL(y),C=document.createElement("a");C.href=b,C.download=`smtp-relay-logs-${new Date().toISOString()}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(b)},g=v=>new Date(v).toLocaleString(),m=(v,y)=>y?v.split(new RegExp(`(${y})`,"gi")).map((C,P)=>C.toLowerCase()===y.toLowerCase()?r.jsx("mark",{style:{backgroundColor:"yellow"},children:C},P):C):v;return r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"System Logs"}),r.jsxs(A,{children:[r.jsx(Se,{onClick:p,title:"Refresh",children:r.jsx(gn,{})}),r.jsx(Se,{onClick:x,title:"Download Logs",children:r.jsx(rr,{})})]})]}),r.jsx(ae,{elevation:3,sx:{p:2,mb:3},children:r.jsxs(A,{display:"flex",gap:2,alignItems:"center",children:[r.jsxs(wt,{size:"small",sx:{minWidth:120},children:[r.jsx(Bt,{children:"Log Level"}),r.jsxs(Mt,{value:l.level,label:"Log Level",onChange:v=>u({...l,level:v.target.value}),children:[r.jsx(de,{value:"all",children:"All"}),r.jsx(de,{value:"error",children:"Error"}),r.jsx(de,{value:"warn",children:"Warning"}),r.jsx(de,{value:"info",children:"Info"}),r.jsx(de,{value:"debug",children:"Debug"})]})]}),r.jsxs(wt,{size:"small",sx:{minWidth:120},children:[r.jsx(Bt,{children:"Time Range"}),r.jsxs(Mt,{value:l.timeRange,label:"Time Range",onChange:v=>u({...l,timeRange:v.target.value}),children:[r.jsx(de,{value:"15m",children:"Last 15 min"}),r.jsx(de,{value:"1h",children:"Last 1 hour"}),r.jsx(de,{value:"6h",children:"Last 6 hours"}),r.jsx(de,{value:"24h",children:"Last 24 hours"}),r.jsx(de,{value:"7d",children:"Last 7 days"})]})]}),r.jsx(Fe,{size:"small",placeholder:"Search logs...",value:l.search,onChange:v=>u({...l,search:v.target.value}),InputProps:{startAdornment:r.jsx(gi,{sx:{mr:1,color:"text.secondary"}}),endAdornment:l.search&&r.jsx(Se,{size:"small",onClick:()=>u({...l,search:""}),children:r.jsx(rb,{fontSize:"small"})})},sx:{flex:1}}),r.jsx(wt,{size:"small",children:r.jsxs(Mt,{value:c,onChange:v=>d(v.target.value),children:[r.jsx(de,{value:!0,children:"Auto-refresh ON"}),r.jsx(de,{value:!1,children:"Auto-refresh OFF"})]})})]})}),r.jsx(ae,{elevation:3,sx:{p:2,maxHeight:"calc(100vh - 300px)",overflow:"auto",backgroundColor:"#1e1e1e"},children:i?r.jsx(k,{color:"text.secondary",align:"center",children:"Loading logs..."}):o.length===0?r.jsx(ye,{severity:"info",children:"No logs found for the selected filters"}):r.jsx(A,{sx:{fontFamily:"monospace",fontSize:"0.9rem"},children:o.map((v,y)=>r.jsxs(A,{sx:{mb:.5,p:1,backgroundColor:y%2===0?"#252525":"#1e1e1e",borderLeft:"3px solid",borderColor:v.level==="error"?"error.main":v.level==="warn"?"warning.main":v.level==="info"?"info.main":"grey.600","&:hover":{backgroundColor:"#333"}},children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(k,{variant:"caption",sx:{color:"grey.500",minWidth:"150px"},children:g(v.timestamp)}),r.jsx(we,{label:v.level.toUpperCase(),size:"small",color:f[v.level],sx:{minWidth:"60px"}}),r.jsx(k,{sx:{color:"grey.100",wordBreak:"break-all"},children:m(v.message,l.search)})]}),v.details&&r.jsx(k,{variant:"body2",sx:{color:"grey.400",ml:"230px",mt:.5,fontFamily:"monospace"},children:m(v.details,l.search)}),v.metadata&&r.jsx(A,{sx:{ml:"230px",mt:.5},children:Object.entries(v.metadata).map(([b,C])=>r.jsx(we,{label:`${b}: ${C}`,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},b))})]},y))})})]})},rF=()=>{const{enqueueSnackbar:e}=Qt(),{apiRequest:t}=$t(),[n,o]=h.useState(null),[s,i]=h.useState(!0),[a,l]=h.useState(0),[u,c]=h.useState(!1),[d,f]=h.useState(!1),[p,x]=h.useState(!1),[g,m]=h.useState(!1),[v,y]=h.useState(null),[b,C]=h.useState([]),[P,L]=h.useState(""),[T,I]=h.useState(""),[R,N]=h.useState(""),[F,S]=h.useState(""),[V,D]=h.useState(""),[w,E]=h.useState("");h.useEffect(()=>{M()},[]);const M=async()=>{try{const W=await t("/api/ip-whitelist/config");o(W.config),i(!1)}catch(W){e(W.message,{variant:"error"}),i(!1)}},$=async()=>{if(!R||!P||!T){e("Please fill all fields",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/add",{method:"POST",body:JSON.stringify({category:P,subcategory:T,ip:R})});e(`Added ${W.ip} successfully`,{variant:"success"}),c(!1),N(""),M()}catch(W){e(W.message,{variant:"error"})}},_=async(W,Q,ie)=>{if(confirm(`Remove ${ie} from ${W}/${Q}?`))try{const X=await t("/api/ip-whitelist/remove",{method:"POST",body:JSON.stringify({category:W,subcategory:Q,ip:ie})});e(`Removed ${ie} successfully`,{variant:"success"}),M()}catch(X){e(X.message,{variant:"error"})}},O=async()=>{if(!F||!P||!T){e("Please fill all fields",{variant:"error"});return}const W=F.split(`
`).map(Q=>Q.trim()).filter(Boolean);try{const Q=await t("/api/ip-whitelist/import",{method:"POST",body:JSON.stringify({category:P,subcategory:T,ips:W})}),{results:ie}=Q;e(`Import complete: ${ie.success.length} added, ${ie.skipped.length} skipped, ${ie.failed.length} failed`,{variant:"success"}),f(!1),S(""),M()}catch(Q){e(Q.message,{variant:"error"})}},B=async(W,Q)=>{try{const ie=await t(`/api/ip-whitelist/export/${W}/${Q}`),X=ie.ips.join(`
`),ne=new Blob([X],{type:"text/plain"}),je=URL.createObjectURL(ne),Z=document.createElement("a");Z.href=je,Z.download=`${W}_${Q}_ips.txt`,Z.click(),URL.revokeObjectURL(je),e(`Exported ${ie.count} IPs`,{variant:"success"})}catch(ie){e(ie.message,{variant:"error"})}},z=async()=>{if(!V){e("Please enter an IP to test",{variant:"error"});return}try{const W=await t("/api/ip-whitelist/test",{method:"POST",body:JSON.stringify({ip:V})});y(W)}catch(W){e(W.message,{variant:"error"}),y(null)}},G=async(W,Q)=>{try{const ie=await t("/api/ip-whitelist/settings",{method:"POST",body:JSON.stringify({[W]:Q})});e("Settings updated successfully",{variant:"success"}),M()}catch(ie){e(ie.message,{variant:"error"})}},J=async()=>{try{const W=await t("/api/ip-whitelist/audit?limit=100");C(W.logs),m(!0)}catch(W){e(W.message,{variant:"error"})}},ee=W=>w?W.filter(Q=>Q.toLowerCase().includes(w.toLowerCase())):W,te=W=>{navigator.clipboard.writeText(W),e("Copied to clipboard",{variant:"info"})},ve=(W,Q)=>{l(Q)};return s?r.jsx(A,{sx:{p:3},children:r.jsx(Gt,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Rn,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",component:"h1",children:"IP Whitelist Management"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Control access to SMTP relay and dashboard"})]})]}),r.jsxs(A,{display:"flex",gap:1,children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(gi,{}),onClick:()=>x(!0),children:"Test IP"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(rp,{}),onClick:J,children:"Audit Log"})]})]}),n&&r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"primary",children:n.smtp_relay.no_auth_required.length+n.smtp_relay.auth_required.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"SMTP Allowed IPs"})]}),r.jsx(Pl,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"success.main",children:n.frontend_access.allowed.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Frontend Allowed IPs"})]}),r.jsx(ho,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"error",children:n.blacklist.blocked.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Blacklisted IPs"})]}),r.jsx(Ea,{sx:{fontSize:32,color:"error.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"secondary",children:n.settings.enforce_frontend_whitelist?"Enforced":"Open"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Frontend Access"})]}),n.settings.enforce_frontend_whitelist?r.jsx(go,{sx:{fontSize:32,color:"secondary.main",opacity:.3}}):r.jsx(xo,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(ae,{elevation:3,children:[r.jsxs(qi,{value:a,onChange:ve,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(jn,{icon:r.jsx(Pl,{}),label:"SMTP Relay",iconPosition:"start"}),r.jsx(jn,{icon:r.jsx(ho,{}),label:"Frontend Access",iconPosition:"start"}),r.jsx(jn,{icon:r.jsx(Ea,{}),label:"Blacklist",iconPosition:"start"}),r.jsx(jn,{icon:r.jsx(rs,{}),label:"Settings",iconPosition:"start"})]}),r.jsxs(A,{sx:{p:3},children:[a!==3&&r.jsxs(A,{display:"flex",gap:2,mb:3,children:[r.jsx(Fe,{fullWidth:!0,variant:"outlined",placeholder:"Search IPs...",value:w,onChange:W=>E(W.target.value),InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(gi,{})})}}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:()=>{L(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),c(!0)},children:"Add IP"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(ob,{}),onClick:()=>{L(a===0?"smtp_relay":a===1?"frontend_access":"blacklist"),I(a===0?"no_auth_required":a===1?"allowed":"blocked"),f(!0)},children:"Import"})]}),n&&a===0&&r.jsxs(A,{children:[r.jsxs(A,{mb:4,children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(xo,{color:"success"}),r.jsx(k,{variant:"h6",children:"No Authentication Required"}),r.jsx(we,{label:n.smtp_relay.no_auth_required.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("smtp_relay","no_auth_required"),children:"Export"})]}),r.jsx(ae,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.no_auth_required).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.smtp_relay.no_auth_required).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(ae,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Se,{size:"small",onClick:()=>te(W),children:r.jsx(zt,{fontSize:"small"})}),r.jsx(Se,{size:"small",color:"error",onClick:()=>_("smtp_relay","no_auth_required",W),children:r.jsx(Xt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(go,{color:"warning"}),r.jsx(k,{variant:"h6",children:"Authentication Required"}),r.jsx(we,{label:n.smtp_relay.auth_required.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("smtp_relay","auth_required"),children:"Export"})]}),r.jsx(ae,{variant:"outlined",sx:{p:2},children:ee(n.smtp_relay.auth_required).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.smtp_relay.auth_required).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(ae,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Se,{size:"small",onClick:()=>te(W),children:r.jsx(zt,{fontSize:"small"})}),r.jsx(Se,{size:"small",color:"error",onClick:()=>_("smtp_relay","auth_required",W),children:r.jsx(Xt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]})]}),n&&a===1&&r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(ho,{color:"primary"}),r.jsx(k,{variant:"h6",children:"Allowed IPs"}),r.jsx(we,{label:n.frontend_access.allowed.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("frontend_access","allowed"),children:"Export"})]}),!n.settings.enforce_frontend_whitelist&&r.jsx(ye,{severity:"warning",sx:{mb:2},children:"Frontend whitelist is not enforced. All IPs can access the dashboard."}),r.jsx(ae,{variant:"outlined",sx:{p:2},children:ee(n.frontend_access.allowed).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.frontend_access.allowed).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(ae,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Se,{size:"small",onClick:()=>te(W),children:r.jsx(zt,{fontSize:"small"})}),r.jsx(Se,{size:"small",color:"error",onClick:()=>_("frontend_access","allowed",W),children:r.jsx(Xt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs configured"})})]}),n&&a===2&&r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ea,{color:"error"}),r.jsx(k,{variant:"h6",children:"Blocked IPs"}),r.jsx(we,{label:n.blacklist.blocked.length,size:"small",color:"default"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(rr,{}),onClick:()=>B("blacklist","blocked"),children:"Export"})]}),r.jsx(ae,{variant:"outlined",sx:{p:2},children:ee(n.blacklist.blocked).length>0?r.jsx(K,{container:!0,spacing:2,children:ee(n.blacklist.blocked).map(W=>r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(ae,{elevation:1,sx:{p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W}),r.jsxs(A,{display:"flex",gap:.5,children:[r.jsx(Se,{size:"small",onClick:()=>te(W),children:r.jsx(zt,{fontSize:"small"})}),r.jsx(Se,{size:"small",color:"error",onClick:()=>_("blacklist","blocked",W),children:r.jsx(Xt,{fontSize:"small"})})]})]})},W))}):r.jsx(k,{variant:"body2",color:"text.secondary",align:"center",py:4,children:"No IPs blacklisted"})})]}),n&&a===3&&r.jsxs(A,{children:[r.jsxs(ae,{variant:"outlined",sx:{p:3,mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Access Control Settings"}),r.jsxs(ot,{children:[r.jsxs(ge,{children:[r.jsx(ce,{primary:"Enforce Frontend Whitelist",secondary:"Only allow whitelisted IPs to access the dashboard"}),r.jsx(un,{children:r.jsx(nr,{edge:"end",checked:n.settings.enforce_frontend_whitelist,onChange:W=>G("enforce_frontend_whitelist",W.target.checked),color:"primary"})})]}),r.jsx(ft,{}),r.jsxs(ge,{children:[r.jsx(ce,{primary:"Log Denied Attempts",secondary:"Record all denied access attempts in audit log"}),r.jsx(un,{children:r.jsx(nr,{edge:"end",checked:n.settings.log_denied_attempts,onChange:W=>G("log_denied_attempts",W.target.checked),color:"primary"})})]}),r.jsx(ft,{}),r.jsxs(ge,{children:[r.jsx(ce,{primary:"Auto-block After Failures",secondary:"Number of failed attempts before auto-blacklisting"}),r.jsx(un,{children:r.jsx(Fe,{type:"number",value:n.settings.auto_block_after_failures,onChange:W=>G("auto_block_after_failures",parseInt(W.target.value)),inputProps:{min:0,max:100},size:"small",sx:{width:80}})})]})]})]}),r.jsxs(ye,{severity:"info",icon:r.jsx(ir,{}),children:[r.jsx(Ye,{children:"IP Format Examples"}),r.jsxs(A,{component:"ul",sx:{mt:1,pl:2},children:[r.jsxs("li",{children:[r.jsx("code",{children:"192.168.1.1"})," - Single IP"]}),r.jsxs("li",{children:[r.jsx("code",{children:"10.0.0.0/24"})," - CIDR notation (256 IPs)"]}),r.jsxs("li",{children:[r.jsx("code",{children:"172.16.0.0/12"})," - Large subnet"]}),r.jsxs("li",{children:[r.jsx("code",{children:"2001:db8::/32"})," - IPv6 range"]})]})]})]})]})]}),r.jsxs(at,{open:u,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Add IP Address"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Category"}),r.jsxs(Mt,{value:P,onChange:W=>{L(W.target.value),I("")},label:"Category",children:[r.jsx(de,{value:"",children:"Select category..."}),r.jsx(de,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(de,{value:"frontend_access",children:"Frontend Access"}),r.jsx(de,{value:"blacklist",children:"Blacklist"})]})]}),P==="smtp_relay"&&r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Subcategory"}),r.jsxs(Mt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(de,{value:"",children:"Select subcategory..."}),r.jsx(de,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(de,{value:"auth_required",children:"Auth Required"})]})]}),P==="frontend_access"&&r.jsx("input",{type:"hidden",value:"allowed",onChange:()=>I("allowed")}),P==="blacklist"&&r.jsx("input",{type:"hidden",value:"blocked",onChange:()=>I("blocked")}),r.jsx(Fe,{fullWidth:!0,margin:"normal",label:"IP Address",value:R,onChange:W=>N(W.target.value),placeholder:"e.g., 192.168.1.1 or 10.0.0.0/24"})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>{c(!1),N(""),L(""),I("")},children:"Cancel"}),r.jsx(Y,{onClick:$,variant:"contained",children:"Add IP"})]})]}),r.jsxs(at,{open:d,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Import IP Addresses"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Category"}),r.jsxs(Mt,{value:P,onChange:W=>{L(W.target.value),I("")},label:"Category",children:[r.jsx(de,{value:"",children:"Select category..."}),r.jsx(de,{value:"smtp_relay",children:"SMTP Relay"}),r.jsx(de,{value:"frontend_access",children:"Frontend Access"}),r.jsx(de,{value:"blacklist",children:"Blacklist"})]})]}),P==="smtp_relay"&&r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"Subcategory"}),r.jsxs(Mt,{value:T,onChange:W=>I(W.target.value),label:"Subcategory",children:[r.jsx(de,{value:"",children:"Select subcategory..."}),r.jsx(de,{value:"no_auth_required",children:"No Auth Required"}),r.jsx(de,{value:"auth_required",children:"Auth Required"})]})]}),r.jsx(Fe,{fullWidth:!0,margin:"normal",label:"IP Addresses (one per line)",multiline:!0,rows:6,value:F,onChange:W=>S(W.target.value),placeholder:`192.168.1.1
10.0.0.0/24
172.16.0.0/16`})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>{f(!1),S(""),L(""),I("")},children:"Cancel"}),r.jsx(Y,{onClick:O,variant:"contained",children:"Import"})]})]}),r.jsxs(at,{open:p,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Test IP Address"}),r.jsx(ct,{children:r.jsxs(A,{sx:{pt:2},children:[r.jsx(Fe,{fullWidth:!0,margin:"normal",label:"IP Address",value:V,onChange:W=>D(W.target.value),placeholder:"e.g., 192.168.1.1"}),v&&r.jsx(ae,{variant:"outlined",sx:{p:2,mt:2},children:r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"IP Type",secondary:v.type})}),r.jsx(ft,{}),r.jsxs(ge,{children:[r.jsx(ce,{primary:"Blacklisted"}),r.jsx(un,{children:v.blacklisted?r.jsx(we,{icon:r.jsx(ro,{}),label:"Yes",color:"error",size:"small"}):r.jsx(we,{icon:r.jsx(Ne,{}),label:"No",color:"success",size:"small"})})]}),r.jsx(ft,{}),r.jsxs(ge,{children:[r.jsx(ce,{primary:"SMTP Access"}),r.jsx(un,{children:v.smtp_access.allowed?r.jsx(we,{icon:r.jsx(Ne,{}),label:v.smtp_access.requiresAuth?"Auth Required":"No Auth",color:"success",size:"small"}):r.jsx(we,{icon:r.jsx(ro,{}),label:"Denied",color:"error",size:"small"})})]}),r.jsx(ft,{}),r.jsxs(ge,{children:[r.jsx(ce,{primary:"Frontend Access"}),r.jsx(un,{children:v.frontend_access?r.jsx(we,{icon:r.jsx(Ne,{}),label:"Allowed",color:"success",size:"small"}):r.jsx(we,{icon:r.jsx(ro,{}),label:"Denied",color:"error",size:"small"})})]})]})})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>{x(!1),D(""),y(null)},children:"Close"}),r.jsx(Y,{onClick:z,variant:"contained",children:"Test IP"})]})]}),r.jsxs(at,{open:g,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsx(k,{variant:"h6",children:"Audit Log"}),r.jsx(Se,{onClick:()=>m(!1),children:r.jsx(ro,{})})]})}),r.jsx(ct,{children:r.jsx(ps,{children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(En,{children:[r.jsx(ue,{children:"Time"}),r.jsx(ue,{children:"Action"}),r.jsx(ue,{children:"Category"}),r.jsx(ue,{children:"Value"}),r.jsx(ue,{children:"User"})]})}),r.jsx(xs,{children:b.map(W=>r.jsxs(En,{hover:!0,children:[r.jsx(ue,{children:new Date(W.timestamp).toLocaleString()}),r.jsx(ue,{children:r.jsx(we,{label:W.action,size:"small",color:W.action==="ADD"?"success":W.action==="REMOVE"?"error":W.action==="DENIED_ACCESS"?"warning":"default"})}),r.jsxs(ue,{children:[W.category,"/",W.subcategory]}),r.jsx(ue,{children:r.jsx(k,{variant:"body2",fontFamily:"monospace",children:W.value})}),r.jsx(ue,{children:W.user})]},W.id))})]})})})]})]})},oF=()=>{const{enqueueSnackbar:e}=Qt(),[t,n]=h.useState([]),[o,s]=h.useState([]),[i,a]=h.useState(null),[l,u]=h.useState(!0),[c,d]=h.useState(0),[f,p]=h.useState({open:!1,action:null,message:""}),{apiRequest:x}=$t();h.useEffect(()=>{g(),m()},[]);const g=async()=>{try{const S=await(await x("/api/sessions/my-sessions")).json();n(S.sessions),u(!1)}catch{e("Failed to load sessions",{variant:"error"}),u(!1)}},m=async()=>{try{const S=await(await x("/api/sessions/security-events")).json();s(S.events)}catch{console.error("Failed to load security events")}},v=()=>{f.action&&f.action(),p({open:!1,action:null,message:""})},y=async F=>{p({open:!0,message:"Are you sure you want to revoke this session?",action:async()=>{try{(await x(`/api/sessions/revoke/${F}`,{method:"DELETE"})).ok&&(n(t.filter(V=>V.id!==F)),e("Session revoked successfully",{variant:"success"}))}catch{e("Failed to revoke session",{variant:"error"})}}})},b=async()=>{p({open:!0,message:"This will log you out from all other devices. Continue?",action:async()=>{try{(await x("/api/sessions/revoke-all",{method:"POST"})).ok&&(g(),e("All other sessions revoked",{variant:"success"}))}catch{e("Failed to revoke sessions",{variant:"error"})}}})},C=async()=>{try{const F=await x("/api/sessions/backup-codes",{method:"POST"}),S=await F.json();F.ok?(a(S.codes),e("Backup codes generated successfully",{variant:"success"})):e(S.error||"Failed to generate backup codes",{variant:"error"})}catch{e("Failed to generate backup codes",{variant:"error"})}},P=F=>F?.toLowerCase().includes("mobile")?r.jsx(xc,{}):r.jsx(Ar,{}),L=F=>{switch(F){case"LOGIN_SUCCESS":return r.jsx(Ne,{color:"success"});case"LOGIN_FAILED":return r.jsx(ro,{color:"error"});case"SECURITY_ALERT":return r.jsx(mn,{color:"warning"});default:return r.jsx(Qo,{color:"action"})}},T=F=>{const S=Math.floor((new Date-new Date(F))/1e3);return S<60?"Just now":S<3600?`${Math.floor(S/60)} minutes ago`:S<86400?`${Math.floor(S/3600)} hours ago`:`${Math.floor(S/86400)} days ago`},I=(F,S)=>{d(S)},R=()=>{i&&(navigator.clipboard.writeText(i.join(`
`)),e("Codes copied to clipboard",{variant:"info"}))},N=()=>{if(i){const F=new Blob([i.join(`
`)],{type:"text/plain"}),S=URL.createObjectURL(F),V=document.createElement("a");V.href=S,V.download="backup-codes.txt",V.click(),URL.revokeObjectURL(S),e("Codes downloaded",{variant:"info"})}};return l?r.jsx(A,{sx:{p:3},children:r.jsx(Gt,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Wi,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h4",component:"h1",children:"Security & Sessions"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Manage your active sessions and security settings"})]})]}),r.jsx(Y,{variant:"contained",color:"error",startIcon:r.jsx(kl,{}),onClick:b,children:"Sign Out Everywhere Else"})]}),r.jsxs(K,{container:!0,spacing:3,mb:3,children:[r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"primary",children:t.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Active Sessions"})]}),r.jsx(Ar,{sx:{fontSize:32,color:"primary.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"success.main",children:t.filter(F=>F.isCurrent).length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Current Device"})]}),r.jsx(Ne,{sx:{fontSize:32,color:"success.main",opacity:.3}})]})})})}),r.jsx(K,{item:!0,xs:12,sm:6,md:4,children:r.jsx(Ve,{elevation:3,children:r.jsx(Oe,{children:r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"h4",color:"secondary",children:o.length}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Recent Events"})]}),r.jsx(Qo,{sx:{fontSize:32,color:"secondary.main",opacity:.3}})]})})})})]}),r.jsxs(ae,{elevation:3,children:[r.jsxs(qi,{value:c,onChange:I,sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(jn,{icon:r.jsx(Ar,{}),label:"Active Sessions",iconPosition:"start"}),r.jsx(jn,{icon:r.jsx(Qo,{}),label:"Security Events",iconPosition:"start"}),r.jsx(jn,{icon:r.jsx(ir,{}),label:"Backup Codes",iconPosition:"start"})]}),r.jsxs(A,{sx:{p:3},children:[c===0&&r.jsx(ot,{children:t.length>0?t.map((F,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(ft,{}),r.jsxs(ge,{sx:{py:2,backgroundColor:F.isCurrent?"primary.light":"transparent",bgcolor:F.isCurrent?V=>V.palette.primary.main+"10":"transparent",borderRadius:1,mb:1},children:[r.jsx(Re,{children:P(F.deviceInfo?.browser)}),r.jsx(ce,{primary:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(k,{variant:"body1",fontWeight:"medium",children:F.deviceInfo?.browser||"Unknown Browser"}),F.isCurrent&&r.jsx(we,{label:"This Device",size:"small",color:"primary"})]}),secondary:r.jsxs(A,{display:"flex",gap:2,mt:1,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(ho,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:F.deviceInfo?.ip||"Unknown IP"})]}),r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(op,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:T(F.lastUsed)})]}),F.location&&r.jsxs(A,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(sb,{sx:{fontSize:16}}),r.jsx(k,{variant:"caption",children:F.location})]})]})}),!F.isCurrent&&r.jsx(un,{children:r.jsx(Y,{variant:"outlined",color:"error",size:"small",onClick:()=>y(F.id),children:"Revoke"})})]})]},F.id)):r.jsx(A,{textAlign:"center",py:8,children:r.jsx(k,{color:"text.secondary",children:"No active sessions found"})})}),c===1&&r.jsx(ot,{children:o.length>0?o.map((F,S)=>r.jsxs(Le.Fragment,{children:[S>0&&r.jsx(ft,{}),r.jsxs(ge,{sx:{py:2},children:[r.jsx(Re,{children:L(F.type)}),r.jsx(ce,{primary:r.jsx(k,{variant:"body1",fontWeight:"medium",children:F.type?.replace(/_/g," ")||"Unknown Event"}),secondary:r.jsxs(A,{display:"flex",gap:2,mt:.5,children:[r.jsx(k,{variant:"caption",children:F.ip||"Unknown IP"}),r.jsx(k,{variant:"caption",children:F.device||"Unknown Device"}),r.jsx(k,{variant:"caption",children:T(F.timestamp)})]})})]})]},S)):r.jsx(A,{textAlign:"center",py:8,children:r.jsx(k,{color:"text.secondary",children:"No security events to display"})})}),c===2&&r.jsx(A,{children:i?r.jsxs(A,{children:[r.jsxs(ye,{severity:"warning",sx:{mb:3},children:[r.jsx(Ye,{children:"Important: Save these codes securely!"}),"Each code can only be used once. Store them in a safe place like a password manager."]}),r.jsx(K,{container:!0,spacing:2,mb:3,children:i.map((F,S)=>r.jsx(K,{item:!0,xs:6,sm:4,md:2.4,children:r.jsx(ae,{variant:"outlined",sx:{p:2,textAlign:"center",bgcolor:"grey.100",fontFamily:"monospace"},children:F})},S))}),r.jsxs(A,{display:"flex",justifyContent:"center",gap:2,children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(zt,{}),onClick:R,children:"Copy All"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(rr,{}),onClick:N,children:"Download"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(gn,{}),onClick:C,children:"Regenerate"})]})]}):r.jsxs(A,{textAlign:"center",py:8,children:[r.jsx(ir,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(k,{variant:"body2",color:"text.secondary",paragraph:!0,sx:{maxWidth:400,mx:"auto"},children:"Generate one-time use backup codes for emergency access when you can't use your authenticator app."}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(ir,{}),onClick:C,sx:{mt:2},children:"Generate Backup Codes"})]})})]})]}),r.jsxs(at,{open:f.open,onClose:()=>p({open:!1,action:null,message:""}),children:[r.jsx(lt,{children:"Confirm Action"}),r.jsx(ct,{children:r.jsx(k,{children:f.message})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>p({open:!1,action:null,message:""}),children:"Cancel"}),r.jsx(Y,{onClick:v,variant:"contained",color:"error",children:"Confirm"})]})]})]})},Pf=({data:e,width:t,height:n})=>{if(!e||!e.nodes)return r.jsx(Ve,{sx:{height:n||400},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Email Flow Visualization"}),r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:r.jsx(k,{color:"text.secondary",children:"Loading email flow data..."})})]})});const o=e.links?.find(c=>c.source==="devices")?.value||1500,s=e.links?.find(c=>c.target==="relay")?.value||1500,i=e.links?.find(c=>c.target==="exchange")?.value||1400,a=e.links?.find(c=>c.target==="delivered")?.value||1350,l=e.links?.find(c=>c.target==="failed")?.value||150,u=[{name:"Devices",icon:r.jsx(ab,{}),count:o,color:"primary",percentage:100},{name:"SMTP Relay",icon:r.jsx(mo,{}),count:s,color:"info",percentage:s/o*100},{name:"Exchange Online",icon:r.jsx(jc,{}),count:i,color:"secondary",percentage:i/o*100},{name:"Delivered",icon:r.jsx(Ne,{}),count:a,color:"success",percentage:a/o*100}];return r.jsx(Ve,{sx:{height:n||"auto"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Email Flow Pipeline"}),r.jsx(K,{container:!0,spacing:2,alignItems:"center",children:u.map((c,d)=>r.jsxs(Le.Fragment,{children:[r.jsx(K,{item:!0,xs:12,md:d===u.length-1?3:2.5,children:r.jsxs(ae,{elevation:2,sx:{p:2,textAlign:"center",backgroundColor:f=>f.palette.mode==="dark"?`${f.palette[c.color].dark}15`:`${f.palette[c.color].light}15`,border:f=>`2px solid ${f.palette[c.color].main}`,position:"relative"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[r.jsx(A,{sx:{color:`${c.color}.main`,mr:1},children:c.icon}),r.jsx(k,{variant:"subtitle1",fontWeight:"bold",children:c.name})]}),r.jsx(k,{variant:"h4",color:`${c.color}.main`,children:c.count.toLocaleString()}),r.jsx(Gt,{variant:"determinate",value:c.percentage,sx:{mt:1,height:6,borderRadius:3,backgroundColor:f=>f.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:`${c.color}.main`}}}),r.jsxs(k,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:[c.percentage.toFixed(1),"% of total"]})]})}),d<u.length-1&&r.jsx(K,{item:!0,xs:12,md:.5,children:r.jsx(A,{sx:{display:"flex",justifyContent:"center"},children:r.jsx(ib,{color:"action",sx:{fontSize:30}})})})]},c.name))}),l>0&&r.jsx(A,{sx:{mt:3,p:2,backgroundColor:"error.light",borderRadius:1},children:r.jsxs(Ht,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(In,{color:"error"}),r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:l})," emails failed (",(l/o*100).toFixed(1),"%)"]}),r.jsx(we,{label:"View Details",size:"small",variant:"outlined",color:"error",onClick:()=>console.log("View failed emails")})]})}),r.jsxs(K,{container:!0,spacing:2,sx:{mt:2},children:[r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Success Rate"}),r.jsxs(k,{variant:"h6",color:"success.main",children:[(a/o*100).toFixed(1),"%"]})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Failure Rate"}),r.jsxs(k,{variant:"h6",color:"error.main",children:[(l/o*100).toFixed(1),"%"]})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Processing"}),r.jsx(k,{variant:"h6",color:"warning.main",children:(o-a-l).toLocaleString()})]})}),r.jsx(K,{item:!0,xs:6,md:3,children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:"Total Volume"}),r.jsx(k,{variant:"h6",color:"primary.main",children:o.toLocaleString()})]})})]})]})})},sF=({data:e,height:t=500})=>{const[n,o]=h.useState({}),s=e?.locations||e;h.useEffect(()=>{if(s){const a={isArray:Array.isArray(s),count:s?.length||0,hasLatLng:0,hasIP:0,hasSubnet:0,sampleData:s?.slice(0,3)||[]};Array.isArray(s)&&s.forEach(l=>{l.lat&&l.lng&&a.hasLatLng++,l.ip&&a.hasIP++,l.subnet&&a.hasSubnet++}),o(a)}},[s]);const i={hasData:!!s,isValidArray:Array.isArray(s)&&s.length>0,hasGeoData:n.hasLatLng>0,dataType:n.hasSubnet>0?"internal":n.hasLatLng>0?"external":"unknown"};return r.jsx(Ve,{sx:{height:"auto"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Geographic Distribution - Debug View"}),r.jsxs(ye,{severity:i.hasData?i.isValidArray?"success":"warning":"error",sx:{mb:2},children:[r.jsx(Ye,{children:"Data Status"}),r.jsxs(Ht,{spacing:1,children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.hasData?r.jsx(Ne,{}):r.jsx(In,{}),r.jsxs(k,{variant:"body2",children:["Data received: ",i.hasData?"Yes":"No"]})]}),i.hasData&&r.jsxs(r.Fragment,{children:[r.jsxs(k,{variant:"body2",children:["Format: ",i.isValidArray?"Valid Array":"Invalid Format"]}),r.jsxs(k,{variant:"body2",children:["Type: ",i.dataType," network"]}),r.jsxs(k,{variant:"body2",children:["Locations: ",n.count]}),r.jsxs(k,{variant:"body2",children:["With Lat/Lng: ",n.hasLatLng," / ",n.count]}),r.jsxs(k,{variant:"body2",children:["With IP: ",n.hasIP," / ",n.count]}),r.jsxs(k,{variant:"body2",children:["With Subnet: ",n.hasSubnet," / ",n.count]})]})]})]}),r.jsxs(ae,{sx:{p:2,mb:2,backgroundColor:"grey.100"},children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Raw Data Preview (First 3 items):"}),r.jsx(A,{sx:{fontFamily:"monospace",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:300,overflow:"auto",backgroundColor:"grey.900",color:"grey.100",p:2,borderRadius:1},children:JSON.stringify(n.sampleData,null,2)})]}),s&&s.length>0&&r.jsx(ps,{component:ae,children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(En,{children:[r.jsx(ue,{children:"Index"}),r.jsx(ue,{children:"Country/Name"}),r.jsx(ue,{children:"City"}),r.jsx(ue,{children:"Lat"}),r.jsx(ue,{children:"Lng"}),r.jsx(ue,{children:"IP"}),r.jsx(ue,{children:"Count"}),r.jsx(ue,{children:"Status"})]})}),r.jsx(xs,{children:s.slice(0,10).map((a,l)=>r.jsxs(En,{children:[r.jsx(ue,{children:l}),r.jsx(ue,{children:a.country||a.name||"N/A"}),r.jsx(ue,{children:a.city||"N/A"}),r.jsx(ue,{children:r.jsx(we,{label:a.lat||"missing",size:"small",color:a.lat?"success":"error",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:a.lng||"missing",size:"small",color:a.lng?"success":"error",variant:"outlined"})}),r.jsx(ue,{children:a.ip||"N/A"}),r.jsx(ue,{children:a.count}),r.jsx(ue,{children:a.lat&&a.lng?r.jsx(Ne,{color:"success",fontSize:"small"}):r.jsx(mn,{color:"warning",fontSize:"small"})})]},l))})]})}),!i.hasGeoData&&i.hasData&&r.jsxs(ye,{severity:"warning",sx:{mt:2},children:[r.jsx(Ye,{children:"Missing Geographic Data"}),r.jsxs(k,{variant:"body2",children:["The data doesn't contain latitude/longitude coordinates needed for map visualization.",n.hasIP>0&&" IP addresses are present but need geolocation lookup."]})]}),r.jsx(A,{sx:{mt:2},children:r.jsx(Y,{variant:"contained",onClick:()=>{console.log("Full data:",e),console.log("Locations:",s),console.log("Debug info:",n)},children:"Log Full Data to Console"})})]})})},kf=({data:e,timeRange:t="24h"})=>{const n=_t(),[o,s]=h.useState("all");if(!e)return r.jsx(Ve,{children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h6",children:"Time Series Analytics"}),r.jsx(A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(k,{color:"text.secondary",children:"Loading metrics..."})})]})});const i=e.sent?.map((u,c)=>({time:new Date(u.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),sent:u.value,received:e.received?.[c]?.value||0,failed:e.failed?.[c]?.value||0,queued:e.queued?.[c]?.value||0}))||[],a=u=>{if(!u||u.length===0)return{current:0,avg:0,trend:"stable"};const c=u.map(y=>y.value),d=c[c.length-1],f=c.reduce((y,b)=>y+b,0)/c.length,p=c.slice(0,Math.floor(c.length/2)),x=c.slice(Math.floor(c.length/2)),g=p.reduce((y,b)=>y+b,0)/p.length,m=x.reduce((y,b)=>y+b,0)/x.length,v=m>g*1.1?"up":m<g*.9?"down":"stable";return{current:d,avg:Math.round(f),trend:v}},l=[{key:"sent",label:"Emails Sent",color:n.palette.primary.main,icon:r.jsx(mo,{}),stats:a(e.sent)},{key:"received",label:"Received",color:n.palette.success.main,icon:r.jsx(Qo,{}),stats:a(e.received)},{key:"failed",label:"Failed",color:n.palette.error.main,icon:r.jsx(In,{}),stats:a(e.failed)},{key:"queued",label:"Queue Size",color:n.palette.warning.main,icon:r.jsx(Sc,{}),stats:a(e.queued)}];return r.jsx(Ve,{children:r.jsxs(Oe,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Time Series Analytics"}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:["Email metrics over the last ",t]})]}),r.jsx(K,{container:!0,spacing:2,sx:{mb:3},children:l.map(u=>r.jsx(K,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(ae,{sx:{p:2,cursor:"pointer",border:o===u.key?2:0,borderColor:u.color,transition:"all 0.3s","&:hover":{boxShadow:3}},onClick:()=>s(u.key),children:[r.jsxs(Ht,{direction:"row",alignItems:"center",spacing:1,children:[r.jsx(A,{sx:{color:u.color},children:u.icon}),r.jsxs(A,{sx:{flexGrow:1},children:[r.jsx(k,{variant:"caption",color:"text.secondary",children:u.label}),r.jsx(k,{variant:"h5",children:u.stats.current.toLocaleString()})]}),u.stats.trend==="up"&&r.jsx(sp,{color:"success"}),u.stats.trend==="down"&&r.jsx(lb,{color:"error"})]}),r.jsx(Gt,{variant:"determinate",value:u.stats.current/u.stats.avg*100,sx:{mt:1,height:4,borderRadius:2,backgroundColor:n.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:u.color}}}),r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Avg: ",u.stats.avg.toLocaleString()]})]})},u.key))}),r.jsx(ae,{sx:{p:2,backgroundColor:n.palette.background.default},children:r.jsx(Yb,{width:"100%",height:300,children:r.jsxs(Xb,{data:i,children:[r.jsx(Jb,{strokeDasharray:"3 3",stroke:n.palette.divider}),r.jsx(Zb,{dataKey:"time",stroke:n.palette.text.secondary,fontSize:12}),r.jsx(ev,{stroke:n.palette.text.secondary,fontSize:12}),r.jsx(tv,{contentStyle:{backgroundColor:n.palette.background.paper,border:`1px solid ${n.palette.divider}`,borderRadius:4}}),r.jsx(nv,{}),(o==="all"||o==="sent")&&r.jsx(Ls,{type:"monotone",dataKey:"sent",stroke:n.palette.primary.main,fill:n.palette.primary.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="received")&&r.jsx(Ls,{type:"monotone",dataKey:"received",stroke:n.palette.success.main,fill:n.palette.success.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="failed")&&r.jsx(Ls,{type:"monotone",dataKey:"failed",stroke:n.palette.error.main,fill:n.palette.error.light,fillOpacity:.3,strokeWidth:2}),(o==="all"||o==="queued")&&r.jsx(Ls,{type:"monotone",dataKey:"queued",stroke:n.palette.warning.main,fill:n.palette.warning.light,fillOpacity:.3,strokeWidth:2})]})})}),r.jsx(A,{sx:{mt:2,display:"flex",justifyContent:"center"},children:r.jsxs(gc,{value:o,exclusive:!0,onChange:(u,c)=>c&&s(c),size:"small",children:[r.jsx(sn,{value:"all",children:"All Metrics"}),r.jsx(sn,{value:"sent",children:"Sent"}),r.jsx(sn,{value:"received",children:"Received"}),r.jsx(sn,{value:"failed",children:"Failed"}),r.jsx(sn,{value:"queued",children:"Queue"})]})})]})})},If=({devices:e,onDeviceSelect:t,autoRefresh:n})=>{const o=_t(),[s,i]=h.useState(""),[a,l]=h.useState("all"),[u,c]=h.useState(null);if(!e)return r.jsx(Ve,{children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h6",children:"Device Health Monitor"}),r.jsx(A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(k,{color:"text.secondary",children:"Loading devices..."})})]})});const d=e.filter(m=>{const v=m.name.toLowerCase().includes(s.toLowerCase())||m.ip?.includes(s),y=a==="all"||m.status===a;return v&&y}),f={total:e.length,healthy:e.filter(m=>m.status==="healthy"||m.status==="online").length,warning:e.filter(m=>m.status==="warning").length,critical:e.filter(m=>m.status==="critical"||m.status==="error").length,offline:e.filter(m=>m.status==="offline").length},p=m=>{const v={printer:r.jsx(fb,{}),scanner:r.jsx(hb,{}),camera:r.jsx(db,{}),nas:r.jsx(Sc,{}),application:r.jsx(Pc,{}),default:r.jsx(Ar,{})};return v[m?.toLowerCase()]||v.default},x=m=>{switch(m){case"healthy":case"online":return"success";case"warning":return"warning";case"critical":case"error":return"error";case"offline":return"default";default:return"default"}},g=m=>{switch(m){case"healthy":case"online":return r.jsx(Ne,{color:"success"});case"warning":return r.jsx(mn,{color:"warning"});case"critical":case"error":return r.jsx(In,{color:"error"});case"offline":return r.jsx(ub,{color:"disabled"});default:return r.jsx(cb,{})}};return r.jsx(Ve,{children:r.jsxs(Oe,{children:[r.jsxs(A,{sx:{mb:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Device Health Monitor"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Monitor and manage your SMTP-enabled devices"})]}),r.jsxs(K,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(ae,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.success.light}20`},children:[r.jsx(k,{variant:"h4",color:"success.main",children:f.healthy}),r.jsx(k,{variant:"caption",children:"Online"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(ae,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.warning.light}20`},children:[r.jsx(k,{variant:"h4",color:"warning.main",children:f.warning}),r.jsx(k,{variant:"caption",children:"Warning"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(ae,{sx:{p:2,textAlign:"center",backgroundColor:`${o.palette.error.light}20`},children:[r.jsx(k,{variant:"h4",color:"error.main",children:f.critical}),r.jsx(k,{variant:"caption",children:"Critical"})]})}),r.jsx(K,{item:!0,xs:6,sm:3,children:r.jsxs(ae,{sx:{p:2,textAlign:"center",backgroundColor:o.palette.grey[200]},children:[r.jsx(k,{variant:"h4",color:"text.secondary",children:f.offline}),r.jsx(k,{variant:"caption",children:"Offline"})]})})]}),r.jsxs(A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[r.jsx(Fe,{size:"small",placeholder:"Search devices...",value:s,onChange:m=>i(m.target.value),sx:{flexGrow:1,maxWidth:300},InputProps:{startAdornment:r.jsx(Er,{position:"start",children:r.jsx(gi,{})})}}),r.jsxs(gc,{value:a,exclusive:!0,onChange:(m,v)=>v&&l(v),size:"small",children:[r.jsxs(sn,{value:"all",children:["All (",e.length,")"]}),r.jsxs(sn,{value:"online",children:["Online (",f.healthy,")"]}),r.jsxs(sn,{value:"warning",children:["Warning (",f.warning,")"]}),r.jsxs(sn,{value:"error",children:["Error (",f.critical,")"]}),r.jsxs(sn,{value:"offline",children:["Offline (",f.offline,")"]})]}),n&&r.jsx(we,{icon:r.jsx(gn,{}),label:"Auto Refresh",color:"primary",variant:"outlined",size:"small"})]}),r.jsx(ps,{component:ae,variant:"outlined",children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(En,{children:[r.jsx(ue,{children:"Device"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{children:"IP Address"}),r.jsx(ue,{align:"right",children:"Emails Sent"}),r.jsx(ue,{align:"right",children:"Health"}),r.jsx(ue,{children:"Last Seen"})]})}),r.jsx(xs,{children:d.map(m=>{const v=m.health||(m.status==="healthy"||m.status==="online"?100:m.status==="warning"?75:m.status==="error"||m.status==="critical"?25:0);return r.jsxs(En,{hover:!0,onClick:()=>{c(m),t?.(m)},sx:{cursor:"pointer",opacity:m.status==="offline"?.6:1},children:[r.jsx(ue,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(wn,{sx:{width:32,height:32,backgroundColor:x(m.status)==="default"?o.palette.grey[300]:o.palette[x(m.status)].light},children:p(m.type)}),r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:m.name}),r.jsx(k,{variant:"caption",color:"text.secondary",children:m.type})]})]})}),r.jsx(ue,{children:r.jsx(we,{icon:g(m.status),label:m.status,size:"small",color:x(m.status),variant:"outlined"})}),r.jsxs(ue,{children:[r.jsx(k,{variant:"body2",children:m.ip||"N/A"}),m.port&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Port ",m.port]})]}),r.jsx(ue,{align:"right",children:r.jsx(k,{variant:"body2",children:m.emailsSent?.toLocaleString()||0})}),r.jsx(ue,{align:"right",children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Gt,{variant:"determinate",value:v,sx:{width:60,height:6,borderRadius:3,backgroundColor:o.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:v>80?o.palette.success.main:v>50?o.palette.warning.main:o.palette.error.main}}}),r.jsxs(k,{variant:"caption",children:[v,"%"]})]})}),r.jsxs(ue,{children:[r.jsx(k,{variant:"caption",children:m.lastSeen?new Date(m.lastSeen).toLocaleString():"Never"}),m.lastError&&r.jsx(pt,{title:m.lastError,children:r.jsx(In,{sx:{fontSize:16,color:"error.main",ml:.5,verticalAlign:"middle"}})})]})]},m.id)})})]})}),d.length===0&&r.jsx(A,{sx:{py:4,textAlign:"center"},children:r.jsx(k,{color:"text.secondary",children:"No devices found matching your criteria"})})]})})},iF=()=>{const{apiRequest:e}=$t(),[t,n]=h.useState(0),[o,s]=h.useState(!0),[i,a]=h.useState({emailFlow:null,geoDistribution:null,timeSeries:null,deviceHealth:null,alerts:[]}),[l,u]=h.useState(!0),[c,d]=h.useState(3e4),[f,p]=h.useState(new Date),[x,g]=h.useState(null),m=async()=>{try{s(!0);const[b,C,P,L,T]=await Promise.all([e("/api/analytics/email-flow"),e("/api/analytics/geo-distribution"),e("/api/analytics/time-series"),e("/api/analytics/device-health"),e("/api/analytics/alerts")]),[I,R,N,F,S]=await Promise.all([b.json(),C.json(),P.json(),L.json(),T.json()]);a({emailFlow:I.data,geoDistribution:R.data,timeSeries:N.data,deviceHealth:F.devices,alerts:S.alerts}),p(new Date),s(!1)}catch(b){console.error("Failed to load analytics data:",b),s(!1)}};h.useEffect(()=>{if(m(),l){const b=setInterval(m,c);return()=>clearInterval(b)}},[l,c]);const v=async(b="json")=>{try{const C=await e("/api/analytics/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:b,dataTypes:["all"],range:"24h"})});if(b==="csv"){const P=await C.blob(),L=window.URL.createObjectURL(P),T=document.createElement("a");T.href=L,T.download=`analytics-${new Date().toISOString()}.csv`,T.click(),window.URL.revokeObjectURL(L)}else{const P=await C.json(),L=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),T=window.URL.createObjectURL(L),I=document.createElement("a");I.href=T,I.download=`analytics-${new Date().toISOString()}.json`,I.click(),window.URL.revokeObjectURL(T)}}catch(C){console.error("Export failed:",C)}g(null)},y=[{label:"Overview",icon:r.jsx(pb,{})},{label:"Email Flow",icon:r.jsx(Qo,{})},{label:"Geographic",icon:r.jsx(ho,{})},{label:"Time Series",icon:r.jsx(sp,{})},{label:"Device Health",icon:r.jsx(Ar,{})}];return o?r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(Ue,{size:48}),r.jsx(k,{variant:"h6",sx:{mt:2},color:"text.secondary",children:"Loading analytics data..."})]})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(Ve,{sx:{mb:3},children:r.jsx(Oe,{children:r.jsxs(K,{container:!0,alignItems:"center",spacing:2,children:[r.jsxs(K,{item:!0,xs:12,md:6,children:[r.jsx(k,{variant:"h4",gutterBottom:!0,children:"Analytics Dashboard"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Real-time insights and monitoring for your SMTP relay infrastructure"}),r.jsxs(k,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",f.toLocaleTimeString()]})]}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(Ht,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[r.jsx($n,{control:r.jsx(nr,{checked:l,onChange:b=>u(b.target.checked),color:"primary"}),label:"Auto Refresh"}),l&&r.jsx(wt,{size:"small",sx:{minWidth:80},children:r.jsxs(Mt,{value:c,onChange:b=>d(b.target.value),children:[r.jsx(de,{value:1e4,children:"10s"}),r.jsx(de,{value:3e4,children:"30s"}),r.jsx(de,{value:6e4,children:"1m"}),r.jsx(de,{value:3e5,children:"5m"})]})}),r.jsx(pt,{title:"Refresh Data",children:r.jsx(Se,{onClick:m,color:"primary",children:r.jsx(gn,{})})}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(rr,{}),onClick:b=>g(b.currentTarget),children:"Export"}),r.jsxs(Il,{anchorEl:x,open:!!x,onClose:()=>g(null),children:[r.jsx(de,{onClick:()=>v("json"),children:"Export as JSON"}),r.jsx(de,{onClick:()=>v("csv"),children:"Export as CSV"})]})]})})]})})}),i.alerts&&i.alerts.length>0&&r.jsxs(ye,{severity:"warning",sx:{mb:3},action:r.jsx(Se,{size:"small",color:"inherit",children:r.jsx(ip,{})}),children:[r.jsxs(Ye,{children:["Active Alerts (",i.alerts.length,")"]}),r.jsx(Ht,{spacing:1,children:i.alerts.slice(0,3).map(b=>r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(we,{size:"small",label:b.severity,color:b.severity==="critical"?"error":b.severity==="warning"?"warning":"info"}),r.jsx(k,{variant:"body2",children:b.message})]},b.id))})]}),r.jsxs(Ve,{children:[r.jsx(qi,{value:t,onChange:(b,C)=>n(C),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:y.map((b,C)=>r.jsx(jn,{label:b.label,icon:b.icon,iconPosition:"start"},C))}),r.jsxs(A,{sx:{p:3},children:[t===0&&r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,children:r.jsx(Pf,{data:i.emailFlow})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(kf,{data:i.timeSeries})}),r.jsx(K,{item:!0,xs:12,lg:6,children:r.jsx(If,{devices:i.deviceHealth,onDeviceSelect:b=>console.log("Selected device:",b)})})]}),t===1&&r.jsx(Pf,{data:i.emailFlow,height:600}),t===2&&r.jsx(sF,{data:i.geoDistribution,height:"600px"}),t===3&&r.jsx(kf,{data:i.timeSeries,timeRange:"24h"}),t===4&&r.jsx(If,{devices:i.deviceHealth,onDeviceSelect:b=>console.log("Selected device:",b),autoRefresh:l})]})]})]})},aF=()=>{const{enqueueSnackbar:e}=Qt(),[t,n]=h.useState([]),[o,s]=h.useState(!0),[i,a]=h.useState(!1),[l,u]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(null),[x,g]=h.useState(!1),[m,v]=h.useState({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),[y,b]=h.useState({});h.useEffect(()=>{C()},[]);const C=async()=>{try{s(!0);const w=await fetch("/api/users",{credentials:"include"});if(!w.ok)throw new Error("Failed to fetch users");const E=await w.json();n(E.users)}catch(w){console.error("Error fetching users:",w),e("Failed to load users",{variant:"error"})}finally{s(!1)}},P=()=>{const w={};return(!c||m.username)&&(m.username?/^[a-zA-Z0-9_-]{3,50}$/.test(m.username)||(w.username="Username must be 3-50 characters (letters, numbers, _, -)"):w.username="Username is required"),(!c||m.password)&&(!m.password&&!c?w.password="Password is required":m.password&&m.password.length<8&&(w.password="Password must be at least 8 characters"),m.password&&m.password!==m.confirmPassword&&(w.confirmPassword="Passwords do not match")),b(w),Object.keys(w).length===0},L=async()=>{if(P())try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),M=c?`/api/users/${f.id}`:"/api/users",$=c?"PUT":"POST",_={role:m.role,permissions:m.permissions};c?m.password&&(_.resetPassword=!0,_.newPassword=m.password):(_.username=m.username,_.password=m.password);const O=await fetch(M,{method:$,headers:{"Content-Type":"application/json","X-CSRF-Token":E},credentials:"include",body:JSON.stringify(_)});if(!O.ok){const B=await O.json();throw new Error(B.error||"Operation failed")}e(c?"User updated successfully":"User created successfully",{variant:"success"}),F(),C()}catch(w){console.error("Error saving user:",w),e(w.message,{variant:"error"})}},T=async()=>{try{const w=await fetch("/api/csrf-token",{credentials:"include"});if(!w.ok)throw new Error("Failed to get CSRF token");const{csrfToken:E}=await w.json(),M=await fetch(`/api/users/${f.id}`,{method:"DELETE",headers:{"X-CSRF-Token":E},credentials:"include"});if(!M.ok){const $=await M.json();throw new Error($.error||"Failed to delete user")}e("User deleted successfully",{variant:"success"}),u(!1),C()}catch(w){console.error("Error deleting user:",w),e(w.message,{variant:"error"})}},I=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:M}=await E.json();if(!(await fetch(`/api/users/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":M},credentials:"include",body:JSON.stringify({unlockAccount:!0})})).ok)throw new Error("Failed to unlock account");e("Account unlocked successfully",{variant:"success"}),C()}catch(E){console.error("Error unlocking account:",E),e("Failed to unlock account",{variant:"error"})}},R=async w=>{try{const E=await fetch("/api/csrf-token",{credentials:"include"});if(!E.ok)throw new Error("Failed to get CSRF token");const{csrfToken:M}=await E.json();if(!(await fetch(`/api/users/${w}/reset-2fa`,{method:"POST",headers:{"X-CSRF-Token":M},credentials:"include"})).ok)throw new Error("Failed to reset 2FA");e("2FA reset successfully",{variant:"success"}),C()}catch(E){console.error("Error resetting 2FA:",E),e("Failed to reset 2FA",{variant:"error"})}},N=(w=null)=>{w?(d(!0),p(w),v({username:w.username,password:"",confirmPassword:"",role:w.role,permissions:w.permissions||[]})):(d(!1),p(null),v({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]})),b({}),a(!0)},F=()=>{a(!1),d(!1),p(null),v({username:"",password:"",confirmPassword:"",role:"operator",permissions:[]}),b({})},S=w=>{switch(w){case"admin":return r.jsx(mi,{color:"error"});case"operator":return r.jsx(yb,{color:"primary"});case"viewer":return r.jsx(xb,{color:"action"});default:return r.jsx(xi,{})}},V=w=>{switch(w){case"admin":return"error";case"operator":return"primary";case"viewer":return"warning";default:return"default"}},D=w=>{switch(w){case"admin":return["read","write","delete","configure","manage_users"];case"operator":return["read","write"];case"viewer":return["read"];default:return[]}};return o?r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(Ue,{})}):r.jsxs(A,{children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(k,{variant:"h4",component:"h1",children:"User Management"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:()=>N(),children:"Add User"})]}),r.jsx(ps,{component:ae,children:r.jsxs(ms,{children:[r.jsx(gs,{children:r.jsxs(En,{children:[r.jsx(ue,{children:"Username"}),r.jsx(ue,{children:"Role"}),r.jsx(ue,{children:"Permissions"}),r.jsx(ue,{children:"2FA"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{children:"Last Login"}),r.jsx(ue,{align:"right",children:"Actions"})]})}),r.jsx(xs,{children:t.map(w=>r.jsxs(En,{children:[r.jsx(ue,{children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[S(w.role),r.jsx(k,{children:w.username})]})}),r.jsx(ue,{children:r.jsx(we,{label:w.role,color:V(w.role),size:"small"})}),r.jsx(ue,{children:r.jsx(A,{display:"flex",gap:.5,flexWrap:"wrap",children:w.permissions.map(E=>r.jsx(we,{label:E,size:"small",variant:"outlined"},E))})}),r.jsx(ue,{children:w.twoFactorEnabled?r.jsx(we,{label:"Enabled",color:"success",size:"small",icon:r.jsx(mb,{})}):r.jsx(we,{label:"Disabled",variant:"outlined",size:"small"})}),r.jsx(ue,{children:w.isLocked?r.jsx(we,{label:"Locked",color:"error",size:"small",icon:r.jsx(go,{})}):r.jsx(we,{label:"Active",color:"success",size:"small"})}),r.jsx(ue,{children:w.lastLogin?new Date(w.lastLogin).toLocaleString():"Never"}),r.jsxs(ue,{align:"right",children:[r.jsx(pt,{title:"Edit User",children:r.jsx(Se,{size:"small",onClick:()=>N(w),children:r.jsx(Qf,{})})}),w.isLocked&&r.jsx(pt,{title:"Unlock Account",children:r.jsx(Se,{size:"small",onClick:()=>I(w.id),children:r.jsx(xo,{})})}),w.twoFactorEnabled&&r.jsx(pt,{title:"Reset 2FA",children:r.jsx(Se,{size:"small",onClick:()=>R(w.id),children:r.jsx(ir,{})})}),r.jsx(pt,{title:"Delete User",children:r.jsx(Se,{size:"small",color:"error",onClick:()=>{p(w),u(!0)},children:r.jsx(Xt,{})})})]})]},w.id))})]})}),r.jsxs(at,{open:i,onClose:F,maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:c?"Edit User":"Add New User"}),r.jsx(ct,{children:r.jsxs(A,{display:"flex",flexDirection:"column",gap:2,mt:2,children:[!c&&r.jsx(Fe,{label:"Username",value:m.username,onChange:w=>v({...m,username:w.target.value}),error:!!y.username,helperText:y.username,fullWidth:!0,required:!0}),r.jsx(Fe,{label:c?"New Password (leave empty to keep current)":"Password",type:x?"text":"password",value:m.password,onChange:w=>v({...m,password:w.target.value}),error:!!y.password,helperText:y.password,fullWidth:!0,required:!c,InputProps:{endAdornment:r.jsx(Er,{position:"end",children:r.jsx(Se,{onClick:()=>g(!x),edge:"end",children:x?r.jsx(yc,{}):r.jsx(bc,{})})})}}),r.jsx(Fe,{label:"Confirm Password",type:"password",value:m.confirmPassword,onChange:w=>v({...m,confirmPassword:w.target.value}),error:!!y.confirmPassword,helperText:y.confirmPassword,fullWidth:!0,required:!c||!!m.password}),r.jsxs(wt,{fullWidth:!0,children:[r.jsx(Bt,{children:"Role"}),r.jsxs(Mt,{value:m.role,onChange:w=>v({...m,role:w.target.value,permissions:D(w.target.value)}),label:"Role",children:[r.jsx(de,{value:"admin",children:"Admin (Full Access)"}),r.jsx(de,{value:"operator",children:"Engineering (Read/Write)"}),r.jsx(de,{value:"viewer",children:"Helpdesk (Read Only)"})]}),r.jsx(gb,{children:"Admin: Full system control | Engineering: Can modify settings | Helpdesk: View only"})]}),r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Permissions:"}),r.jsx(A,{display:"flex",gap:.5,flexWrap:"wrap",children:m.permissions.map(w=>r.jsx(we,{label:w,size:"small",variant:"outlined"},w))})]})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:F,children:"Cancel"}),r.jsx(Y,{onClick:L,variant:"contained",children:c?"Update":"Create"})]})]}),r.jsxs(at,{open:l,onClose:()=>u(!1),children:[r.jsx(lt,{children:"Confirm Delete"}),r.jsx(ct,{children:r.jsxs(ye,{severity:"warning",children:['Are you sure you want to delete user "',f?.username,'"? This action cannot be undone.']})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>u(!1),children:"Cancel"}),r.jsx(Y,{onClick:T,color:"error",variant:"contained",children:"Delete"})]})]})]})};var to={},hl,Tf;function Zx(){return Tf||(Tf=1,hl={L:1,M:0,Q:3,H:2}),hl}var fl,Ef;function ey(){return Ef||(Ef=1,fl={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),fl}var pl,Af;function lF(){if(Af)return pl;Af=1;var e=ey();function t(n){this.mode=e.MODE_8BIT_BYTE,this.data=n}return t.prototype={getLength:function(n){return this.data.length},write:function(n){for(var o=0;o<this.data.length;o++)n.put(this.data.charCodeAt(o),8)}},pl=t,pl}var ml,Mf;function cF(){if(Mf)return ml;Mf=1;var e=Zx();function t(n,o){this.totalCount=n,this.dataCount=o}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(n,o){var s=t.getRsBlockTable(n,o);if(s==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+o);for(var i=s.length/3,a=new Array,l=0;l<i;l++)for(var u=s[l*3+0],c=s[l*3+1],d=s[l*3+2],f=0;f<u;f++)a.push(new t(c,d));return a},t.getRsBlockTable=function(n,o){switch(o){case e.L:return t.RS_BLOCK_TABLE[(n-1)*4+0];case e.M:return t.RS_BLOCK_TABLE[(n-1)*4+1];case e.Q:return t.RS_BLOCK_TABLE[(n-1)*4+2];case e.H:return t.RS_BLOCK_TABLE[(n-1)*4+3];default:return}},ml=t,ml}var gl,Rf;function uF(){if(Rf)return gl;Rf=1;function e(){this.buffer=new Array,this.length=0}return e.prototype={get:function(t){var n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)==1},put:function(t,n){for(var o=0;o<n;o++)this.putBit((t>>>n-o-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},gl=e,gl}var xl,Df;function ty(){if(Df)return xl;Df=1;for(var e={glog:function(n){if(n<1)throw new Error("glog("+n+")");return e.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return e.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return xl=e,xl}var yl,Ff;function ny(){if(Ff)return yl;Ff=1;var e=ty();function t(n,o){if(n.length==null)throw new Error(n.length+"/"+o);for(var s=0;s<n.length&&n[s]==0;)s++;this.num=new Array(n.length-s+o);for(var i=0;i<n.length-s;i++)this.num[i]=n[i+s]}return t.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var o=new Array(this.getLength()+n.getLength()-1),s=0;s<this.getLength();s++)for(var i=0;i<n.getLength();i++)o[s+i]^=e.gexp(e.glog(this.get(s))+e.glog(n.get(i)));return new t(o,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var o=e.glog(this.get(0))-e.glog(n.get(0)),s=new Array(this.getLength()),i=0;i<this.getLength();i++)s[i]=this.get(i);for(var i=0;i<n.getLength();i++)s[i]^=e.gexp(e.glog(n.get(i))+o);return new t(s,0).mod(n)}},yl=t,yl}var bl,Of;function dF(){if(Of)return bl;Of=1;var e=ey(),t=ny(),n=ty(),o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var a=i<<10;s.getBCHDigit(a)-s.getBCHDigit(s.G15)>=0;)a^=s.G15<<s.getBCHDigit(a)-s.getBCHDigit(s.G15);return(i<<10|a)^s.G15_MASK},getBCHTypeNumber:function(i){for(var a=i<<12;s.getBCHDigit(a)-s.getBCHDigit(s.G18)>=0;)a^=s.G18<<s.getBCHDigit(a)-s.getBCHDigit(s.G18);return i<<12|a},getBCHDigit:function(i){for(var a=0;i!=0;)a++,i>>>=1;return a},getPatternPosition:function(i){return s.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,a,l){switch(i){case o.PATTERN000:return(a+l)%2==0;case o.PATTERN001:return a%2==0;case o.PATTERN010:return l%3==0;case o.PATTERN011:return(a+l)%3==0;case o.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2==0;case o.PATTERN101:return a*l%2+a*l%3==0;case o.PATTERN110:return(a*l%2+a*l%3)%2==0;case o.PATTERN111:return(a*l%3+(a+l)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var a=new t([1],0),l=0;l<i;l++)a=a.multiply(new t([1,n.gexp(l)],0));return a},getLengthInBits:function(i,a){if(1<=a&&a<10)switch(i){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(a<27)switch(i){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(a<41)switch(i){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+a)},getLostPoint:function(i){for(var a=i.getModuleCount(),l=0,u=0;u<a;u++)for(var c=0;c<a;c++){for(var d=0,f=i.isDark(u,c),p=-1;p<=1;p++)if(!(u+p<0||a<=u+p))for(var x=-1;x<=1;x++)c+x<0||a<=c+x||p==0&&x==0||f==i.isDark(u+p,c+x)&&d++;d>5&&(l+=3+d-5)}for(var u=0;u<a-1;u++)for(var c=0;c<a-1;c++){var g=0;i.isDark(u,c)&&g++,i.isDark(u+1,c)&&g++,i.isDark(u,c+1)&&g++,i.isDark(u+1,c+1)&&g++,(g==0||g==4)&&(l+=3)}for(var u=0;u<a;u++)for(var c=0;c<a-6;c++)i.isDark(u,c)&&!i.isDark(u,c+1)&&i.isDark(u,c+2)&&i.isDark(u,c+3)&&i.isDark(u,c+4)&&!i.isDark(u,c+5)&&i.isDark(u,c+6)&&(l+=40);for(var c=0;c<a;c++)for(var u=0;u<a-6;u++)i.isDark(u,c)&&!i.isDark(u+1,c)&&i.isDark(u+2,c)&&i.isDark(u+3,c)&&i.isDark(u+4,c)&&!i.isDark(u+5,c)&&i.isDark(u+6,c)&&(l+=40);for(var m=0,c=0;c<a;c++)for(var u=0;u<a;u++)i.isDark(u,c)&&m++;var v=Math.abs(100*m/a/a-50)/5;return l+=v*10,l}};return bl=s,bl}var vl,Lf;function hF(){if(Lf)return vl;Lf=1;var e=lF(),t=cF(),n=uF(),o=dF(),s=ny();function i(l,u){this.typeNumber=l,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var a=i.prototype;return a.addData=function(l){var u=new e(l);this.dataList.push(u),this.dataCache=null},a.isDark=function(l,u){if(l<0||this.moduleCount<=l||u<0||this.moduleCount<=u)throw new Error(l+","+u);return this.modules[l][u]},a.getModuleCount=function(){return this.moduleCount},a.make=function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var u=t.getRSBlocks(l,this.errorCorrectLevel),c=new n,d=0,f=0;f<u.length;f++)d+=u[f].dataCount;for(var f=0;f<this.dataList.length;f++){var p=this.dataList[f];c.put(p.mode,4),c.put(p.getLength(),o.getLengthInBits(p.mode,l)),p.write(c)}if(c.getLengthInBits()<=d*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},a.makeImpl=function(l,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,u),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},a.setupPositionProbePattern=function(l,u){for(var c=-1;c<=7;c++)if(!(l+c<=-1||this.moduleCount<=l+c))for(var d=-1;d<=7;d++)u+d<=-1||this.moduleCount<=u+d||(0<=c&&c<=6&&(d==0||d==6)||0<=d&&d<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=d&&d<=4?this.modules[l+c][u+d]=!0:this.modules[l+c][u+d]=!1)},a.getBestMaskPattern=function(){for(var l=0,u=0,c=0;c<8;c++){this.makeImpl(!0,c);var d=o.getLostPoint(this);(c==0||l>d)&&(l=d,u=c)}return u},a.createMovieClip=function(l,u,c){var d=l.createEmptyMovieClip(u,c),f=1;this.make();for(var p=0;p<this.modules.length;p++)for(var x=p*f,g=0;g<this.modules[p].length;g++){var m=g*f,v=this.modules[p][g];v&&(d.beginFill(0,100),d.moveTo(m,x),d.lineTo(m+f,x),d.lineTo(m+f,x+f),d.lineTo(m,x+f),d.endFill())}return d},a.setupTimingPattern=function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},a.setupPositionAdjustPattern=function(){for(var l=o.getPatternPosition(this.typeNumber),u=0;u<l.length;u++)for(var c=0;c<l.length;c++){var d=l[u],f=l[c];if(this.modules[d][f]==null)for(var p=-2;p<=2;p++)for(var x=-2;x<=2;x++)p==-2||p==2||x==-2||x==2||p==0&&x==0?this.modules[d+p][f+x]=!0:this.modules[d+p][f+x]=!1}},a.setupTypeNumber=function(l){for(var u=o.getBCHTypeNumber(this.typeNumber),c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;c<18;c++){var d=!l&&(u>>c&1)==1;this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},a.setupTypeInfo=function(l,u){for(var c=this.errorCorrectLevel<<3|u,d=o.getBCHTypeInfo(c),f=0;f<15;f++){var p=!l&&(d>>f&1)==1;f<6?this.modules[f][8]=p:f<8?this.modules[f+1][8]=p:this.modules[this.moduleCount-15+f][8]=p}for(var f=0;f<15;f++){var p=!l&&(d>>f&1)==1;f<8?this.modules[8][this.moduleCount-f-1]=p:f<9?this.modules[8][15-f-1+1]=p:this.modules[8][15-f-1]=p}this.modules[this.moduleCount-8][8]=!l},a.mapData=function(l,u){for(var c=-1,d=this.moduleCount-1,f=7,p=0,x=this.moduleCount-1;x>0;x-=2)for(x==6&&x--;;){for(var g=0;g<2;g++)if(this.modules[d][x-g]==null){var m=!1;p<l.length&&(m=(l[p]>>>f&1)==1);var v=o.getMask(u,d,x-g);v&&(m=!m),this.modules[d][x-g]=m,f--,f==-1&&(p++,f=7)}if(d+=c,d<0||this.moduleCount<=d){d-=c,c=-c;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(l,u,c){for(var d=t.getRSBlocks(l,u),f=new n,p=0;p<c.length;p++){var x=c[p];f.put(x.mode,4),f.put(x.getLength(),o.getLengthInBits(x.mode,l)),x.write(f)}for(var g=0,p=0;p<d.length;p++)g+=d[p].dataCount;if(f.getLengthInBits()>g*8)throw new Error("code length overflow. ("+f.getLengthInBits()+">"+g*8+")");for(f.getLengthInBits()+4<=g*8&&f.put(0,4);f.getLengthInBits()%8!=0;)f.putBit(!1);for(;!(f.getLengthInBits()>=g*8||(f.put(i.PAD0,8),f.getLengthInBits()>=g*8));)f.put(i.PAD1,8);return i.createBytes(f,d)},i.createBytes=function(l,u){for(var c=0,d=0,f=0,p=new Array(u.length),x=new Array(u.length),g=0;g<u.length;g++){var m=u[g].dataCount,v=u[g].totalCount-m;d=Math.max(d,m),f=Math.max(f,v),p[g]=new Array(m);for(var y=0;y<p[g].length;y++)p[g][y]=255&l.buffer[y+c];c+=m;var b=o.getErrorCorrectPolynomial(v),C=new s(p[g],b.getLength()-1),P=C.mod(b);x[g]=new Array(b.getLength()-1);for(var y=0;y<x[g].length;y++){var L=y+P.getLength()-x[g].length;x[g][y]=L>=0?P.get(L):0}}for(var T=0,y=0;y<u.length;y++)T+=u[y].totalCount;for(var I=new Array(T),R=0,y=0;y<d;y++)for(var g=0;g<u.length;g++)y<p[g].length&&(I[R++]=p[g][y]);for(var y=0;y<f;y++)for(var g=0;g<u.length;g++)y<x[g].length&&(I[R++]=x[g][y]);return I},vl=i,vl}var Js={},_f;function fF(){if(_f)return Js;_f=1,Object.defineProperty(Js,"__esModule",{value:!0});var e=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(c[p]=f[p])}return c},t=ap(),n=i(t),o=up(),s=i(o);function i(c){return c&&c.__esModule?c:{default:c}}function a(c,d){var f={};for(var p in c)d.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p]);return f}var l={bgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,bgD:n.default.string.isRequired,fgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,fgD:n.default.string.isRequired,size:n.default.number.isRequired,title:n.default.string,viewBoxSize:n.default.number.isRequired,xmlns:n.default.string},u=(0,o.forwardRef)(function(c,d){var f=c.bgColor,p=c.bgD,x=c.fgD,g=c.fgColor,m=c.size,v=c.title,y=c.viewBoxSize,b=c.xmlns,C=b===void 0?"http://www.w3.org/2000/svg":b,P=a(c,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",e({},P,{height:m,ref:d,viewBox:"0 0 "+y+" "+y,width:m,xmlns:C}),v?s.default.createElement("title",null,v):null,s.default.createElement("path",{d:p,fill:f}),s.default.createElement("path",{d:x,fill:g}))});return u.displayName="QRCodeSvg",u.propTypes=l,Js.default=u,Js}var $f;function pF(){if($f)return to;$f=1,Object.defineProperty(to,"__esModule",{value:!0}),to.QRCode=void 0;var e=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])}return m},t=ap(),n=f(t),o=Zx(),s=f(o),i=hF(),a=f(i),l=up(),u=f(l),c=fF(),d=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function p(m,v){var y={};for(var b in m)v.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(m,b)&&(y[b]=m[b]);return y}var x={bgColor:n.default.oneOfType([n.default.object,n.default.string]),fgColor:n.default.oneOfType([n.default.object,n.default.string]),level:n.default.string,size:n.default.number,value:n.default.string.isRequired},g=(0,l.forwardRef)(function(m,v){var y=m.bgColor,b=y===void 0?"#FFFFFF":y,C=m.fgColor,P=C===void 0?"#000000":C,L=m.level,T=L===void 0?"L":L,I=m.size,R=I===void 0?256:I,N=m.value,F=p(m,["bgColor","fgColor","level","size","value"]),S=new a.default(-1,s.default[T]);S.addData(N),S.make();var V=S.modules;return u.default.createElement(d.default,e({},F,{bgColor:b,bgD:V.map(function(D,w){return D.map(function(E,M){return E?"":"M "+M+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:P,fgD:V.map(function(D,w){return D.map(function(E,M){return E?"M "+M+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:v,size:R,viewBoxSize:V.length}))});return to.QRCode=g,g.displayName="QRCode",g.propTypes=x,to.default=g,to}var mF=pF();const gF=Ic(mF),xF=({onComplete:e})=>{const{enqueueSnackbar:t}=Qt(),[n,o]=h.useState(0),[s,i]=h.useState(!1),[a,l]=h.useState(null),[u,c]=h.useState(""),[d,f]=h.useState([]),p=["Generate QR Code","Scan with App","Verify Setup"],x=async()=>{i(!0);try{const y=await fetch("/api/mfa/totp/setup",{method:"POST",credentials:"include"});if(y.ok){const b=await y.json();l(b.data),o(1)}else throw new Error("Failed to generate TOTP")}catch{t("Failed to setup authenticator",{variant:"error"})}finally{i(!1)}},g=async()=>{if(u.length!==6){t("Please enter a 6-digit code",{variant:"warning"});return}i(!0);try{const y=await fetch("/api/mfa/totp/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:u})});if(y.ok){const b=await y.json();b.backupCodes&&f(b.backupCodes),o(2),t("Authenticator app enabled successfully!",{variant:"success"}),setTimeout(()=>{e()},2e3)}else{const b=await y.json();throw new Error(b.error||"Invalid code")}}catch(y){t(y.message,{variant:"error"})}finally{i(!1)}},m=y=>{navigator.clipboard.writeText(y),t("Copied to clipboard",{variant:"success"})},v=()=>{const y=d.join(`
`),b=new Blob([y],{type:"text/plain"}),C=URL.createObjectURL(b),P=document.createElement("a");P.href=C,P.download="backup-codes.txt",P.click(),URL.revokeObjectURL(C)};return r.jsxs(A,{children:[r.jsx(zr,{activeStep:n,sx:{mb:4},children:p.map(y=>r.jsx(Hn,{children:r.jsx(zn,{children:y})},y))}),n===0&&r.jsxs(A,{textAlign:"center",children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Setup Authenticator App"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Use Microsoft Authenticator, Google Authenticator, or any compatible TOTP app"}),r.jsx(Y,{variant:"contained",size:"large",onClick:x,disabled:s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(bb,{}),children:s?"Generating...":"Generate QR Code"})]}),n===1&&a&&r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{elevation:2,sx:{p:3,textAlign:"center"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Scan QR Code"}),r.jsx(A,{sx:{my:3,bgcolor:"white",p:2,borderRadius:1},children:r.jsx(gF,{value:a.uri,size:200})}),r.jsx(k,{variant:"caption",color:"textSecondary",children:"Scan this QR code with your authenticator app"})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{elevation:2,sx:{p:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Manual Entry"}),r.jsx(ye,{severity:"info",sx:{mb:2},children:"Can't scan? Enter this key manually:"}),r.jsxs(A,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,mb:2},children:[r.jsx(k,{variant:"body2",sx:{fontFamily:"monospace",wordBreak:"break-all"},children:a.manualEntryKey}),r.jsx(Y,{size:"small",startIcon:r.jsx(zt,{}),onClick:()=>m(a.secret),sx:{mt:1},children:"Copy"})]}),r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Enter Verification Code"}),r.jsx(Fe,{fullWidth:!0,placeholder:"000000",value:u,onChange:y=>c(y.target.value.replace(/\D/g,"").slice(0,6)),inputProps:{maxLength:6,style:{fontSize:"1.5rem",letterSpacing:"0.5rem",textAlign:"center"}},sx:{mb:2}}),r.jsx(Y,{fullWidth:!0,variant:"contained",onClick:g,disabled:s||u.length!==6,children:s?r.jsx(Ue,{size:24}):"Verify & Enable"})]})})]}),n===2&&r.jsxs(A,{textAlign:"center",children:[r.jsx(Ne,{color:"success",sx:{fontSize:64,mb:2}}),r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Setup Complete!"}),r.jsx(k,{variant:"body1",color:"textSecondary",paragraph:!0,children:"Your authenticator app has been successfully configured."}),d.length>0&&r.jsxs(ae,{sx:{p:3,mt:3,bgcolor:"warning.light",color:"warning.contrastText"},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Backup Codes"}),r.jsx(k,{variant:"body2",paragraph:!0,children:"Save these codes in a safe place. Each can be used once if you lose access to your authenticator."}),r.jsx(K,{container:!0,spacing:1,sx:{mb:2},children:d.map((y,b)=>r.jsx(K,{item:!0,xs:6,children:r.jsx(k,{variant:"body2",sx:{fontFamily:"monospace"},children:y})},b))}),r.jsx(Y,{variant:"contained",size:"small",onClick:v,sx:{bgcolor:"warning.dark"},children:"Download Codes"})]})]})]})},yF=({onComplete:e,existingDevices:t=[]})=>{const{enqueueSnackbar:n}=Qt(),[o,s]=h.useState(0),[i,a]=h.useState(!1),[l,u]=h.useState(""),[c,d]=h.useState(t),[f,p]=h.useState(null),x=["Name Your Key","Insert Security Key","Verify Registration"],g=()=>window.PublicKeyCredential!==void 0,m=async()=>{if(!l.trim()){n("Please enter a name for your security key",{variant:"warning"});return}if(!g()){n("WebAuthn is not supported in this browser",{variant:"error"});return}a(!0),s(1);try{const C=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:P}=await C.json(),L=await fetch("/api/mfa/fido2/register/begin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":P},credentials:"include"});if(!L.ok)throw new Error("Failed to start registration");const{data:T}=await L.json();console.log("Received options from server:",T);let I;typeof T.user.id=="string"?I=y(T.user.id):T.user.id instanceof Object&&T.user.id.type==="Buffer"?I=new Uint8Array(T.user.id.data).buffer:I=T.user.id;const R={...T,challenge:y(T.challenge),user:{...T.user,id:I},pubKeyCredParams:T.pubKeyCredParams||[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:T.authenticatorSelection||{authenticatorAttachment:"cross-platform",userVerification:"preferred",requireResidentKey:!1},attestation:T.attestation||"direct",timeout:T.timeout||6e4};s(2),n("Please interact with your security key...",{variant:"info"});const N=await navigator.credentials.create({publicKey:R});if(!N)throw new Error("Failed to create credential");const F={id:N.id,rawId:b(N.rawId),type:N.type,response:{clientDataJSON:b(N.response.clientDataJSON),attestationObject:b(N.response.attestationObject)}},S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:V}=await S.json(),D=await fetch("/api/mfa/fido2/register/complete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":V},credentials:"include",body:JSON.stringify({credential:F,deviceName:l.trim()})});if(!D.ok){const M=await D.json();throw new Error(M.error||"Failed to complete registration")}const E={id:(await D.json()).credentialID,name:l.trim(),registered:new Date().toISOString(),lastUsed:null};d([...c,E]),s(3),n("Security key registered successfully!",{variant:"success"}),setTimeout(()=>{s(0),u(""),e&&e(E)},2e3)}catch(C){console.error("Registration error:",C),C.name==="NotAllowedError"?n("Registration was cancelled or timed out",{variant:"warning"}):C.name==="InvalidStateError"?n("This key may already be registered",{variant:"warning"}):n(C.message||"Failed to register security key",{variant:"error"}),s(0)}finally{a(!1)}},v=async C=>{try{if(!(await fetch(`/api/mfa/fido2/devices/${C}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to remove device");d(c.filter(L=>L.id!==C)),n("Security key removed successfully",{variant:"success"})}catch{n("Failed to remove security key",{variant:"error"})}finally{p(null)}},y=C=>{let P=C.replace(/-/g,"+").replace(/_/g,"/");const L=(4-P.length%4)%4;L&&(P+="=".repeat(L));const T=window.atob(P),I=T.length,R=new Uint8Array(I);for(let N=0;N<I;N++)R[N]=T.charCodeAt(N);return R.buffer},b=C=>{const P=new Uint8Array(C);let L="";for(let T=0;T<P.byteLength;T++)L+=String.fromCharCode(P[T]);return window.btoa(L).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};return g()?r.jsxs(A,{children:[c.length>0&&r.jsxs(A,{mb:3,children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Registered Security Keys"}),r.jsx(ot,{children:c.map(C=>r.jsxs(ge,{children:[r.jsx($r,{sx:{mr:2}}),r.jsx(ce,{primary:C.name,secondary:`Registered: ${new Date(C.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Se,{edge:"end",onClick:()=>p(C),color:"error",children:r.jsx(Xt,{})})})]},C.id))})]}),r.jsxs(ae,{variant:"outlined",sx:{p:3},children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Add New Security Key"}),r.jsx(zr,{activeStep:o,sx:{mb:3},children:x.map(C=>r.jsx(Hn,{children:r.jsx(zn,{children:C})},C))}),r.jsxs(A,{children:[o===0&&r.jsxs(A,{children:[r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Give your security key a name to identify it later."}),r.jsx(Fe,{fullWidth:!0,label:"Security Key Name",value:l,onChange:C=>u(C.target.value),placeholder:"e.g., YubiKey 5C, Work Key, etc.",disabled:i,sx:{mb:2}}),r.jsx(Y,{variant:"contained",startIcon:r.jsx($r,{}),onClick:m,disabled:i||!l.trim(),fullWidth:!0,children:"Start Registration"})]}),o===1&&r.jsxs(A,{textAlign:"center",children:[r.jsx(vb,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Insert Your Security Key"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Please insert your security key into a USB port or hold it near the NFC reader."}),r.jsx(Ue,{})]}),o===2&&r.jsxs(A,{textAlign:"center",children:[r.jsx(np,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Verify Your Identity"}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Touch your security key or use your biometric verification when prompted."}),r.jsx(Ue,{})]}),o===3&&r.jsxs(A,{textAlign:"center",children:[r.jsx(Rn,{sx:{fontSize:64,color:"success.main",mb:2}}),r.jsx(k,{variant:"h6",color:"success.main",gutterBottom:!0,children:"Registration Successful!"}),r.jsx(k,{variant:"body2",color:"textSecondary",children:"Your security key has been registered successfully."})]})]}),r.jsx(ye,{severity:"info",sx:{mt:3},children:r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:"Supported devices:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"YubiKey (all models)"}),r.jsx("li",{children:"Windows Hello (fingerprint, face, PIN)"}),r.jsx("li",{children:"Touch ID / Face ID (macOS, iOS)"}),r.jsx("li",{children:"Android biometrics"}),r.jsx("li",{children:"Other FIDO2-compatible security keys"})]})]})})]}),r.jsxs(at,{open:!!f,onClose:()=>p(null),children:[r.jsx(lt,{children:"Remove Security Key"}),r.jsxs(ct,{children:[r.jsxs(k,{children:['Are you sure you want to remove "',f?.name,'"?']}),r.jsx(k,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"You won't be able to use this key for authentication anymore."})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>p(null),children:"Cancel"}),r.jsx(Y,{onClick:()=>v(f.id),color:"error",variant:"contained",children:"Remove"})]})]})]}):r.jsx(ye,{severity:"warning",children:"Your browser doesn't support WebAuthn/Security Keys. Please use a modern browser like Chrome, Firefox, Safari, or Edge."})},bF=()=>{const{enqueueSnackbar:e}=Qt(),[t,n]=h.useState(!0),[o,s]=h.useState(null),[i,a]=h.useState(null),[l,u]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[x,g]=h.useState([]),[m,v]=h.useState(!1),[y,b]=h.useState({current:"",new:"",confirm:""});h.useEffect(()=>{C(),P()},[]);const C=async()=>{try{const S=await fetch("/api/auth/me",{credentials:"include"});if(S.ok){const V=await S.json();a(V.user)}}catch(S){console.error("Failed to fetch user info:",S)}},P=async()=>{try{n(!0);const S=await fetch("/api/mfa/status",{credentials:"include"});if(S.ok){const V=await S.json();s(V.data)}else throw new Error("Failed to fetch MFA status")}catch(S){console.error("MFA status error:",S),e("Failed to load MFA status",{variant:"error"})}finally{n(!1)}},L=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:V}=await S.json();if((await fetch("/api/mfa/totp/disable",{method:"POST",headers:{"X-CSRF-Token":V},credentials:"include"})).ok)e("TOTP disabled successfully",{variant:"success"}),P();else throw new Error("Failed to disable TOTP")}catch{e("Failed to disable TOTP",{variant:"error"})}},T=async S=>{try{const V=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:D}=await V.json();if((await fetch(`/api/mfa/fido2/devices/${S}`,{method:"DELETE",headers:{"X-CSRF-Token":D},credentials:"include"})).ok)e("Device removed successfully",{variant:"success"}),P();else throw new Error("Failed to remove device")}catch{e("Failed to remove device",{variant:"error"})}},I=async()=>{try{const S=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:V}=await S.json(),D=await fetch("/api/mfa/backup/generate",{method:"POST",headers:{"X-CSRF-Token":V},credentials:"include"});if(D.ok){const w=await D.json();g(w.codes),p(!0),P()}else throw new Error("Failed to generate backup codes")}catch{e("Failed to generate backup codes",{variant:"error"})}},R=async()=>{if(y.new!==y.confirm){e("Passwords do not match",{variant:"error"});return}try{const S=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({currentPassword:y.current,newPassword:y.new})});if(S.ok)e("Password changed successfully",{variant:"success"}),v(!1),b({current:"",new:"",confirm:""});else{const V=await S.json();throw new Error(V.error||"Failed to change password")}}catch(S){e(S.message,{variant:"error"})}},N=()=>{const S=x.join(`
`),V=new Blob([S],{type:"text/plain"}),D=URL.createObjectURL(V),w=document.createElement("a");w.href=D,w.download="backup-codes.txt",w.click(),URL.revokeObjectURL(D)},F=()=>{navigator.clipboard.writeText(x.join(`
`)),e("Backup codes copied to clipboard",{variant:"success"})};return t?r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:r.jsx(Ue,{})}):r.jsxs(A,{sx:{p:3},children:[r.jsx(k,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Profile & Security"}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(Ve,{elevation:3,children:[r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(xi,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"User Information"})]}),r.jsxs(ot,{children:[r.jsx(ge,{children:r.jsx(ce,{primary:"Username",secondary:i?.username||"N/A"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Role",secondary:r.jsx(we,{size:"small",label:i?.role||"N/A",color:i?.role==="admin"?"error":"primary"})})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Account Created",secondary:i?.createdAt?new Date(i.createdAt).toLocaleDateString():"N/A"})})]})]}),r.jsx(Cb,{children:r.jsx(Y,{startIcon:r.jsx(ir,{}),onClick:()=>v(!0),fullWidth:!0,children:"Change Password"})})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(Ve,{elevation:3,children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(Rn,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Two-Factor Authentication"})]}),r.jsx(A,{mb:2,children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(xc,{sx:{mr:1}}),r.jsx(k,{children:"Authenticator App"})]}),o?.totp?.enabled?r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(we,{size:"small",label:"Enabled",color:"success",icon:r.jsx(Ne,{})}),r.jsx(Se,{size:"small",onClick:L,color:"error",children:r.jsx(Xt,{})})]}):r.jsx(Y,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>u(!0),children:"Setup"})]})}),r.jsx(ft,{sx:{my:2}}),r.jsxs(A,{mb:2,children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx($r,{sx:{mr:1}}),r.jsx(k,{children:"Security Keys"})]}),r.jsx(Y,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>d(!0),children:"Add Key"})]}),o?.fido2?.devices?.length>0?r.jsx(ot,{dense:!0,children:o.fido2.devices.map(S=>r.jsxs(ge,{children:[r.jsx(ce,{primary:S.name,secondary:`Added: ${new Date(S.registered).toLocaleDateString()}`}),r.jsx(un,{children:r.jsx(Se,{edge:"end",size:"small",onClick:()=>T(S.id),color:"error",children:r.jsx(Xt,{})})})]},S.id))}):r.jsx(k,{variant:"body2",color:"textSecondary",children:"No security keys registered"})]}),r.jsx(ft,{sx:{my:2}}),r.jsxs(A,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsx(k,{children:"Backup Codes"}),r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[o?.backup?.remaining>0&&r.jsx(we,{size:"small",label:`${o.backup.remaining} remaining`,color:o.backup.remaining<3?"warning":"default"}),r.jsx(Y,{size:"small",onClick:I,startIcon:o?.backup?.remaining>0?r.jsx(gn,{}):r.jsx(sr,{}),children:o?.backup?.remaining>0?"Regenerate":"Generate"})]})]}),o?.backup?.remaining<3&&o?.backup?.remaining>0&&r.jsx(ye,{severity:"warning",sx:{mt:1},children:"Low on backup codes. Generate new ones soon."})]})]})})}),r.jsx(K,{item:!0,xs:12,children:r.jsx(ye,{severity:"info",variant:"outlined",children:r.jsxs(k,{variant:"body2",children:[r.jsx("strong",{children:"Security Tips:"}),r.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[r.jsx("li",{children:"Enable two-factor authentication for enhanced security"}),r.jsx("li",{children:"Use a unique, strong password for your account"}),r.jsx("li",{children:"Keep your backup codes in a safe place"}),r.jsx("li",{children:"Regularly review your security settings"})]})]})})})]}),r.jsxs(at,{open:l,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(lt,{children:"Setup Two-Factor Authentication"}),r.jsx(ct,{children:r.jsx(xF,{onComplete:()=>{u(!1),P()}})})]}),r.jsxs(at,{open:f,onClose:()=>p(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(mn,{color:"warning",sx:{mr:1}}),"Backup Codes Generated"]})}),r.jsxs(ct,{children:[r.jsx(ye,{severity:"warning",sx:{mb:2},children:"Save these codes in a secure location. Each code can only be used once."}),r.jsx(ae,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:r.jsx(K,{container:!0,spacing:1,children:x.map((S,V)=>r.jsx(K,{item:!0,xs:6,children:r.jsx(k,{variant:"body2",fontFamily:"monospace",children:S})},V))})})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:F,startIcon:r.jsx(zt,{}),children:"Copy"}),r.jsx(Y,{onClick:N,startIcon:r.jsx(rr,{}),children:"Download"}),r.jsx(Y,{onClick:()=>p(!1),variant:"contained",children:"Done"})]})]}),r.jsxs(at,{open:m,onClose:()=>v(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Change Password"}),r.jsx(ct,{children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[r.jsx(Fe,{label:"Current Password",type:"password",value:y.current,onChange:S=>b({...y,current:S.target.value}),fullWidth:!0}),r.jsx(Fe,{label:"New Password",type:"password",value:y.new,onChange:S=>b({...y,new:S.target.value}),fullWidth:!0,helperText:"At least 8 characters"}),r.jsx(Fe,{label:"Confirm New Password",type:"password",value:y.confirm,onChange:S=>b({...y,confirm:S.target.value}),fullWidth:!0,error:y.confirm&&y.new!==y.confirm,helperText:y.confirm&&y.new!==y.confirm?"Passwords do not match":""})]})}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>v(!1),children:"Cancel"}),r.jsx(Y,{onClick:R,variant:"contained",disabled:!y.current||!y.new||y.new!==y.confirm,children:"Change Password"})]})]}),r.jsxs(at,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(lt,{children:"Setup Security Keys"}),r.jsx(ct,{children:r.jsx(yF,{existingDevices:o?.fido2?.devices||[],onComplete:()=>{d(!1),P()}})}),r.jsx(bt,{children:r.jsx(Y,{onClick:()=>d(!1),children:"Close"})})]})]})},vF=({onComplete:e})=>{const{apiRequest:t}=$t(),[n,o]=h.useState(0),[s,i]=h.useState(!1),[a,l]=h.useState(null),[u,c]=h.useState(null),[d,f]=h.useState(""),[p,x]=h.useState(null),[g,m]=h.useState(null),[v,y]=h.useState(!1),[b,C]=h.useState(!1),[P,L]=h.useState({displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api"}),[T,I]=h.useState(null),R=["Enter Tenant","Admin Login","Configure App","Create App"];h.useEffect(()=>{let D;return v&&p&&(D=setInterval(async()=>{try{const E=await(await t("/api/azure-setup/setup/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p})})).json();E.success?(y(!1),C(!0),setTimeout(()=>o(2),2e3)):E.error&&(y(!1),l(E.error))}catch(w){y(!1),l(w.message)}},5e3)),()=>clearInterval(D)},[v,p]);const N=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:d})})).json();w.success?(x(w.flowId),m(w),y(!0),o(1)):l(w.error||"Failed to start authentication")}catch(D){l("Failed to start authentication: "+D.message)}finally{i(!1)}},F=async()=>{i(!0),l(null);try{const w=await(await t("/api/azure-setup/setup/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:p,appConfig:P})})).json();w.success?(I(w),c("Application created successfully!"),setTimeout(()=>{e({application:w.application,config:P})},3e3)):l(w.error||"Failed to create application")}catch(D){l("Failed to create application: "+D.message)}finally{i(!1)}},S=D=>{navigator.clipboard.writeText(D),c("Copied to clipboard!"),setTimeout(()=>c(null),2e3)},V=()=>{switch(n){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Enter Your Azure Tenant Information"}),r.jsx(Fe,{fullWidth:!0,label:"Tenant ID or Domain",value:d,onChange:D=>f(D.target.value),placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(ye,{severity:"info",sx:{mt:3},children:[r.jsx(Ye,{children:"What you'll need:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"Global Administrator access to your Azure AD tenant"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"Permission to create applications in Azure AD"})]})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:N,disabled:!d||s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(Rn,{}),children:s?"Starting...":"Start Admin Authentication"})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Admin Authentication"}),g&&r.jsxs(r.Fragment,{children:[r.jsx(Ve,{sx:{mt:3,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h4",align:"center",gutterBottom:!0,children:g.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(zt,{}),onClick:()=>S(g.userCode),children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(kc,{}),href:g.verificationUrl,target:"_blank",sx:{mt:1},children:g.verificationUrl})]}),v&&r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for authentication..."})]}),r.jsxs(ye,{severity:"info",sx:{mt:3},children:[r.jsx(Ye,{children:"Instructions"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"1. Click the link above or go to microsoft.com/devicelogin"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"2. Enter the code shown above"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"3. Sign in with your Global Administrator account"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"4. Approve the permissions requested"})})]})]})]})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),r.jsx(Fe,{fullWidth:!0,label:"Application Name",value:P.displayName,onChange:D=>L({...P,displayName:D.target.value}),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(ae,{sx:{p:2,mt:2,mb:2,bgcolor:"background.default"},children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx($r,{color:"primary"}),r.jsx(k,{variant:"subtitle2",fontWeight:"medium",children:"Authentication Method"})]}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Device Code Flow"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Interactive authentication where users sign in through a browser using their Microsoft account. This provides user-specific mail sending capabilities."})]}),r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"API Method"}),r.jsxs(Mt,{value:P.apiMethod,onChange:D=>L({...P,apiMethod:D.target.value}),label:"API Method",children:[r.jsx(de,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(de,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),P.apiMethod==="smtp_oauth"&&r.jsxs(ye,{severity:"warning",sx:{mt:2},children:[r.jsx(Ye,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:D=>D.palette.mode==="dark"?"#90caf9":"#1976d2",border:D=>`1px solid ${D.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>o(3),startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(Ve,{sx:{mt:2},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"Application Name",secondary:P.displayName})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Authentication Method",secondary:"Device Code Flow"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"API Method",secondary:P.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})})]})]})}),T?r.jsxs(ye,{severity:"success",sx:{mt:3},children:[r.jsx(Ye,{children:"Application Created Successfully!"}),r.jsxs(k,{children:[r.jsx("strong",{children:"App ID:"})," ",T.application.appId]}),r.jsxs(k,{children:[r.jsx("strong",{children:"Tenant ID:"})," ",T.application.tenantId]}),T.clientSecret&&r.jsx(k,{variant:"caption",children:"Client secret saved to config.yml"})]}):r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:F,disabled:s,color:"success",startIcon:s?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:s?"Creating Application...":"Create Application in Azure AD"})]});default:return null}};return r.jsxs(ae,{sx:{p:4},children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Azure AD Automatic Setup"}),r.jsx(zr,{activeStep:n,sx:{mb:4},children:R.map(D=>r.jsx(Hn,{children:r.jsx(zn,{children:D})},D))}),V(),a&&r.jsx(ye,{severity:"error",sx:{mt:2},onClose:()=>l(null),children:a}),u&&r.jsx(ye,{severity:"success",sx:{mt:2},onClose:()=>c(null),children:u}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:n>0&&n<3&&!v&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(os,{}),onClick:()=>o(n-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},CF=({onComplete:e,onBack:t})=>{const{apiRequest:n}=$t(),[o,s]=h.useState(0),[i,a]=h.useState(!1),[l,u]=h.useState(null),[c,d]=h.useState(null),[f,p]=h.useState({tenantId:"",clientId:"",authMethod:"device_code",apiMethod:"graph_api"}),x=["Azure Portal Setup","Enter Credentials","Save Configuration"],g=async()=>{a(!0),u(null);try{const y=await(await n("/api/azure-simple/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();y.success?(d("Configuration saved successfully!"),setTimeout(()=>{e(y)},2e3)):u(y.error||"Failed to save configuration")}catch(v){u("Failed to save configuration: "+v.message)}finally{a(!1)}},m=()=>{switch(o){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Create Azure AD Application"}),r.jsxs(ye,{severity:"info",sx:{mb:2},children:[r.jsx(Ye,{children:"Authentication Method: Device Code Flow"}),"This setup uses Device Code Flow for secure, interactive authentication. Users will sign in through their browser using their Microsoft account credentials."]}),r.jsxs(ye,{severity:"warning",sx:{mb:2},children:[r.jsx(Ye,{children:"Manual Setup Required"}),"Due to Microsoft security restrictions, you need to create the app manually in Azure Portal."]}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(lp,{}),href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps",target:"_blank",fullWidth:!0,sx:{mb:3},children:"Open Azure Portal - App Registrations"}),r.jsx(k,{variant:"subtitle1",gutterBottom:!0,children:"Follow these steps:"}),r.jsxs(ot,{children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(k,{children:"1."})}),r.jsx(ce,{primary:"Click 'New registration'",secondary:"In the Azure Portal App registrations page"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(k,{children:"2."})}),r.jsx(ce,{primary:"Basic Settings",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:" Name: SMTP Relay for Exchange Online"}),r.jsx(k,{variant:"body2",children:" Account types: Accounts in this organizational directory only"})]})})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(k,{children:"3."})}),r.jsx(ce,{primary:"Redirect URI",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:" Platform: Mobile and desktop applications"}),r.jsx(k,{variant:"body2",children:" URI: https://login.microsoftonline.com/common/oauth2/nativeclient"})]})})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(k,{children:"4."})}),r.jsx(ce,{primary:"API Permissions",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Add permission  Microsoft Graph  Delegated:"}),r.jsx(k,{variant:"body2",children:" Mail.Send"}),r.jsx(k,{variant:"body2",children:" User.Read"}),r.jsx(k,{variant:"body2",children:" offline_access"})]})})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(k,{children:"5."})}),r.jsx(ce,{primary:"Enable Public Client",secondary:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",children:"Authentication  Advanced settings"}),r.jsx(k,{variant:"body2",children:" Allow public client flows: Yes"})]})})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{color:"success"})}),r.jsx(ce,{primary:"Copy Application ID",secondary:"From the Overview page, copy the Application (client) ID"})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:2},onClick:()=>s(1),children:"I've Created the App - Continue"})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Enter Azure AD Application Details"}),r.jsx(Fe,{fullWidth:!0,label:"Tenant ID",value:f.tenantId,onChange:v=>p({...f,tenantId:v.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"Your Azure AD tenant ID (from Azure Portal  Overview)"}),r.jsx(Fe,{fullWidth:!0,label:"Application (Client) ID",value:f.clientId,onChange:v=>p({...f,clientId:v.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",required:!0,helperText:"The Application ID you copied from Azure Portal"}),r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"API Method"}),r.jsxs(Mt,{value:f.apiMethod,onChange:v=>p({...f,apiMethod:v.target.value}),label:"API Method",children:[r.jsx(de,{value:"graph_api",children:"Microsoft Graph API (Recommended)"}),r.jsx(de,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),f.apiMethod==="smtp_oauth"&&r.jsxs(ye,{severity:"warning",sx:{mt:2},children:[r.jsx(Ye,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:v=>v.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:v=>v.palette.mode==="dark"?"#90caf9":"#1976d2",border:v=>`1px solid ${v.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:()=>s(2),disabled:!f.tenantId||!f.clientId,children:"Review Configuration"})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Save Configuration"}),r.jsx(Ve,{sx:{mt:2},children:r.jsx(Oe,{children:r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"Authentication Method",secondary:"Device Code Flow"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Tenant ID",secondary:f.tenantId})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Client ID",secondary:f.clientId})}),r.jsx(ge,{children:r.jsx(ce,{primary:"API Method",secondary:f.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})})]})})}),r.jsx(ye,{severity:"info",sx:{mt:2},children:"This configuration will be saved to config.yml and used for Exchange Online authentication."}),r.jsx(Y,{variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},onClick:g,disabled:i,children:i?"Saving...":"Save Configuration"})]});default:return null}};return r.jsxs(ae,{sx:{p:4},children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Azure AD Manual Setup"}),r.jsx(zr,{activeStep:o,sx:{mb:4},children:x.map(v=>r.jsx(Hn,{children:r.jsx(zn,{children:v})},v))}),m(),l&&r.jsx(ye,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),c&&r.jsx(ye,{severity:"success",sx:{mt:2},onClose:()=>d(null),children:c}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:(o===0?t:o>0&&o<3)&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(os,{}),onClick:o===0?t:()=>s(o-1),sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"}},children:"Back"})})})]})},wF={displayName:"SMTP Relay for Exchange Online",authMethod:"device_code",apiMethod:"graph_api"},Cl=["Enter Tenant","Admin Authentication","Configure App","Create App"],jF=5e3,SF=2e3,PF=5,ry=({onComplete:e,onBack:t})=>{const{apiRequest:n}=$t(),[o,s]=h.useState(0),[i,a]=h.useState(!1),[l,u]=h.useState(null),[c,d]=h.useState(""),[f,p]=h.useState(null),[x,g]=h.useState(null),[m,v]=h.useState(!1),[y,b]=h.useState(!1),[C,P]=h.useState(null),[L,T]=h.useState(wF),[I,R]=h.useState(null),[N,F]=h.useState(null);h.useEffect(()=>{u(null)},[o]),h.useEffect(()=>{if(!m||!f)return;const B=setInterval(async()=>{try{const G=await(await n("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:f})})).json();G.success?(v(!1),b(!0),P(G),s(2)):G.error&&!G.pending&&(v(!1),u(G.error))}catch(z){console.log("Polling in progress...",z.message)}},jF);return()=>clearInterval(B)},[m,f,n]);const S=h.useCallback(async()=>{if(!c.trim()){u("Tenant ID is required");return}a(!0),u(null);try{const B=await(await n("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:c.trim()})})).json();B.success?(p(B.flowId),g(B),v(!0),s(1)):u(B.error||"Failed to start authentication")}catch(O){u(`Failed to start authentication: ${O.message}`)}finally{a(!1)}},[c,n]),V=h.useCallback(async()=>{if(!f||!L.displayName.trim()){u("Invalid configuration");return}a(!0),u(null);try{const O=await n("/api/azure-graph/admin/create-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:f,appConfig:{...L,displayName:L.displayName.trim()}})});if(!O.ok){const z=await O.json();throw new Error(z.details||z.error||"Failed to create application")}const B=await O.json();R(B),s(3),B.consentUrl&&setTimeout(()=>{window.open(B.consentUrl,"_blank","noopener,noreferrer")},SF),D(B)}catch(O){console.error("App creation error:",O),u(O.message||"Failed to create application")}finally{a(!1)}},[f,L,n,e]),D=h.useCallback(O=>{let B=PF;F(B);const z=setInterval(()=>{B-=1,F(B),B<=0&&(clearInterval(z),e&&e({application:O.application,config:L,success:!0}))},1e3);return()=>clearInterval(z)},[L,e]),w=h.useCallback(async O=>{try{await navigator.clipboard.writeText(O)}catch(B){console.error("Failed to copy to clipboard:",B),u("Failed to copy to clipboard")}},[]);h.useMemo(()=>{switch(o){case 0:return c.trim().length>0;case 1:return y;case 2:return L.displayName.trim().length>0;case 3:return!0;default:return!1}},[o,c,y,L.displayName]);const E=h.useCallback((O,B)=>{T(z=>({...z,[O]:B}))},[]),M=h.useCallback(()=>{s(O=>Math.max(0,O-1))},[]),$=h.useCallback(()=>{s(O=>Math.min(Cl.length-1,O+1))},[]),_=h.useMemo(()=>{switch(o){case 0:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Azure AD Automatic Setup with Global Admin"}),r.jsxs(ye,{severity:"warning",sx:{mb:2},children:[r.jsx(Ye,{children:"Global Administrator Required"}),"This setup requires Global Administrator or Application Administrator privileges. The setup will use Microsoft Graph PowerShell to create the application."]}),r.jsx(Ve,{sx:{mb:2,bgcolor:"primary.light",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:1,children:[r.jsx(wb,{sx:{mr:1}}),r.jsx(k,{variant:"subtitle1",children:"Using Microsoft Graph PowerShell"})]}),r.jsx(k,{variant:"body2",children:"Client ID: 14d82eec-204b-4c2f-b7e8-296a70dab67e"}),r.jsx(k,{variant:"body2",children:"This is Microsoft's official Graph PowerShell application with the necessary permissions."})]})}),r.jsx(Fe,{fullWidth:!0,label:"Tenant ID or Domain",value:c,onChange:O=>d(O.target.value),error:l&&o===0,placeholder:"contoso.onmicrosoft.com or xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",margin:"normal",helperText:"Enter your Azure AD tenant domain or ID",required:!0}),r.jsxs(ye,{severity:"info",sx:{mt:3},children:[r.jsx(Ye,{children:"What will happen:"}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"You'll authenticate with your Global Admin account"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"A new Azure AD application will be created"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"Permissions will be configured automatically"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{})}),r.jsx(ce,{primary:"Configuration will be saved to config.yml"})]})]})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:S,disabled:!c||i,startIcon:i?r.jsx(Ue,{size:20}):r.jsx(mi,{}),children:i?"Starting...":"Start Global Admin Authentication"})]});case 1:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Global Administrator Authentication"}),x&&r.jsxs(r.Fragment,{children:[r.jsx(Ve,{sx:{mt:3,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h3",align:"center",gutterBottom:!0,children:x.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(zt,{}),onClick:()=>w(x.userCode),children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Visit this URL to authenticate:"}),r.jsx(Y,{variant:"contained",startIcon:r.jsx(kc,{}),href:x.verificationUrl,target:"_blank",sx:{mt:1},children:x.verificationUrl})]}),m&&r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for Global Administrator authentication..."})]}),r.jsxs(ye,{severity:"warning",sx:{mt:3},children:[r.jsx(Ye,{children:"Important"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"1. Sign in with a Global Administrator account"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"2. You'll see 'Microsoft Graph PowerShell' requesting permissions"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"3. Accept the permissions to continue"})})]})]})]})]});case 2:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Configure Your Application"}),C&&r.jsxs(ye,{severity:"success",sx:{mb:2},children:[r.jsx(Ye,{children:"Admin Authenticated"}),r.jsxs(k,{variant:"body2",children:["User: ",C.adminUser]}),C.adminRoles?.length>0&&r.jsxs(k,{variant:"body2",children:["Roles: ",C.adminRoles.join(", ")]})]}),r.jsx(Fe,{fullWidth:!0,label:"Application Name",value:L.displayName,onChange:O=>E("displayName",O.target.value),margin:"normal",helperText:"Display name for your Azure AD application"}),r.jsxs(ae,{sx:{p:2,mt:2,mb:2,bgcolor:"background.default"},children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx($r,{color:"primary"}),r.jsx(k,{variant:"subtitle2",fontWeight:"medium",children:"Authentication Method"})]}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Device Code Flow"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Interactive authentication where users sign in through a browser using their Microsoft account. This provides user-specific mail sending capabilities."})]}),r.jsxs(wt,{fullWidth:!0,margin:"normal",children:[r.jsx(Bt,{children:"API Method"}),r.jsxs(Mt,{value:L.apiMethod,onChange:O=>E("apiMethod",O.target.value),label:"API Method",children:[r.jsx(de,{value:"graph_api",children:"Microsoft Graph API"}),r.jsx(de,{value:"smtp_oauth",children:"SMTP OAuth2"})]})]}),L.apiMethod==="smtp_oauth"&&r.jsxs(ye,{severity:"warning",sx:{mt:2},children:[r.jsx(Ye,{children:"SMTP AUTH Required"}),r.jsx(k,{variant:"body2",children:"SMTP OAuth2 requires SMTP AUTH to be enabled for each mailbox."}),r.jsx(k,{variant:"body2",sx:{mt:1},children:r.jsx("strong",{children:"To enable SMTP AUTH:"})}),r.jsx(k,{variant:"body2",component:"pre",sx:{mt:1,p:1,bgcolor:O=>O.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.04)",color:O=>O.palette.mode==="dark"?"#90caf9":"#1976d2",border:O=>`1px solid ${O.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"}`,borderRadius:1,fontSize:"0.85rem",fontFamily:"monospace"},children:`Set-CASMailbox -Identity user@domain.com \\
  -SmtpClientAuthenticationDisabled $false`}),r.jsx(k,{variant:"caption",sx:{mt:1,display:"block"},children:"Note: Microsoft Graph API does not require SMTP AUTH."})]}),r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:$,startIcon:r.jsx(Mr,{}),children:"Review & Create Application"})]});case 3:return r.jsxs(A,{children:[r.jsx(k,{variant:"h6",gutterBottom:!0,children:"Review & Create Application"}),r.jsx(Ve,{sx:{mt:2},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),r.jsxs(ot,{dense:!0,children:[r.jsx(ge,{children:r.jsx(ce,{primary:"Application Name",secondary:L.displayName})}),r.jsx(ge,{children:r.jsx(ce,{primary:"Authentication Method",secondary:"Device Code Flow"})}),r.jsx(ge,{children:r.jsx(ce,{primary:"API Method",secondary:L.apiMethod==="graph_api"?"Microsoft Graph":"SMTP OAuth2"})})]})]})}),I?r.jsxs(r.Fragment,{children:[r.jsxs(ye,{severity:"success",sx:{mt:3},children:[r.jsx(Ye,{children:" Application Created Successfully!"}),r.jsxs(k,{variant:"body1",sx:{mt:1},children:[r.jsx("strong",{children:"Application Name:"})," ",I.application.displayName]}),r.jsxs(k,{variant:"body1",children:[r.jsx("strong",{children:"Application ID:"})," ",I.application.appId]}),r.jsxs(k,{variant:"body1",children:[r.jsx("strong",{children:"Tenant ID:"})," ",I.application.tenantId]}),I.clientSecret&&r.jsx(k,{variant:"body2",sx:{mt:1},children:" Client secret has been saved to config.yml"}),r.jsx(k,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:I.nextSteps})]}),I.consentUrl&&r.jsxs(ye,{severity:"info",sx:{mt:2},children:[r.jsx(Ye,{children:"Admin Consent Required"}),r.jsx(k,{children:"A new window will open for admin consent."}),r.jsx(Y,{variant:"outlined",size:"small",href:I.consentUrl,target:"_blank",sx:{mt:1},children:"Grant Admin Consent"})]}),r.jsx(A,{sx:{mt:3,textAlign:"center"},children:r.jsxs(k,{variant:"body2",color:"text.secondary",children:["Setup complete! ",N&&N>0&&`Redirecting in ${N} seconds...`]})})]}):r.jsx(Y,{variant:"contained",fullWidth:!0,sx:{mt:3},onClick:V,disabled:i,color:"success",startIcon:i?r.jsx(Ue,{size:20}):r.jsx(Mr,{}),children:i?"Creating Application...":"Create Application in Azure AD"})]});default:return null}},[o,c,x,m,C,L,I,N,i,l,E,S,V,w,$,e]);return r.jsxs(ae,{sx:{p:4},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(mi,{sx:{mr:2,fontSize:40,color:"primary.main"}}),r.jsx(k,{variant:"h5",children:"Exchange Online Configuration"})]}),r.jsx(zr,{activeStep:o,sx:{mb:4},children:Cl.map((O,B)=>r.jsx(Hn,{completed:B<o,children:r.jsx(zn,{children:O})},O))}),r.jsx(A,{"aria-label":`Step ${o+1}: ${Cl[o]}`,children:_}),l&&r.jsx(ye,{severity:"error",sx:{mt:2},onClose:()=>u(null),children:l}),r.jsx(A,{display:"flex",justifyContent:"space-between",mt:3,children:r.jsx(A,{children:!I&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(os,{}),onClick:o===0?t:M,disabled:m,sx:{borderRadius:2,px:2,py:1,backgroundColor:"#9c27b0",color:"#ffffff",fontSize:"0.95rem",fontWeight:500,textTransform:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#7b1fa2",transform:"translateX(-2px)"},"&:disabled":{opacity:.5,backgroundColor:"#ce93d8"}},children:"Back"})})})]})};ry.propTypes={onComplete:U.func.isRequired,onBack:U.func};const kF=({open:e,onClose:t,tenantId:n,onAuthComplete:o})=>{const{apiRequest:s}=$t(),[i,a]=h.useState(!1),[l,u]=h.useState(null),[c,d]=h.useState(!1),[f,p]=h.useState(null);h.useEffect(()=>{e&&n&&!l&&x()},[e,n]),h.useEffect(()=>{let v;return c&&l&&(v=setInterval(g,5e3)),()=>clearInterval(v)},[c,l]);const x=async()=>{a(!0),p(null);try{const v=await s("/api/azure-graph/admin/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:n})}),y=await v.json();v.ok&&(y.success||y.userCode)?(u(y),d(!0)):p(y.error||"Failed to initialize admin authentication")}catch{p("Failed to start authentication process")}finally{a(!1)}},g=async()=>{try{const y=await(await s("/api/azure-graph/admin/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flowId:l.flowId})})).json();y.authenticated?(d(!1),o(!0),t()):y.error&&y.error!=="authorization_pending"&&(d(!1),p(y.error))}catch{}},m=()=>{l?.userCode&&navigator.clipboard.writeText(l.userCode)};return r.jsxs(at,{open:e,onClose:c?void 0:t,maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Rn,{sx:{mr:1}}),"Administrator Authentication Required"]})}),r.jsx(ct,{children:i&&!l?r.jsx(A,{display:"flex",justifyContent:"center",p:3,children:r.jsx(Ue,{})}):l?r.jsxs(A,{children:[r.jsxs(ye,{severity:"info",sx:{mb:2},children:[r.jsx(Ye,{children:"Sign in as Azure AD Administrator"}),"To delete the application from Azure AD, you need to authenticate with administrator privileges."]}),r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Please use this code to authenticate:"}),r.jsx(Ve,{sx:{my:2,bgcolor:"primary.main",color:"primary.contrastText"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h3",align:"center",gutterBottom:!0,children:l.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(zt,{}),onClick:m,children:"Copy Code"})})]})}),r.jsx(k,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Click the button below to open the authentication page:"}),r.jsx(Y,{variant:"contained",fullWidth:!0,startIcon:r.jsx(lp,{}),onClick:()=>window.open(l.verificationUrl,"_blank"),sx:{mb:2},children:"Open Microsoft Login"}),c&&r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"center",mt:2,children:[r.jsx(Ue,{size:20,sx:{mr:1}}),r.jsx(k,{variant:"body2",color:"text.secondary",children:"Waiting for authentication..."})]}),r.jsxs(ye,{severity:"warning",sx:{mt:2},children:[r.jsx("strong",{children:"Important:"})," Sign in with an account that has Global Administrator or Application Administrator privileges in your Azure AD tenant."]})]}):f?r.jsx(ye,{severity:"error",children:f}):null}),r.jsx(bt,{children:r.jsx(Y,{onClick:t,disabled:c,children:"Cancel"})})]})},IF=({onSetupStart:e,onEdit:t})=>{const{apiRequest:n}=$t(),[o,s]=h.useState(!0),[i,a]=h.useState(null),[l,u]=h.useState(null),[c,d]=h.useState({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),[f,p]=h.useState({open:!1,tenantId:null}),[x,g]=h.useState({applications:!0,tokens:!0,mailboxes:!0}),[m,v]=h.useState(""),[y,b]=h.useState({open:!1,mailbox:null,processing:!1});h.useEffect(()=>{C();const S=setInterval(C,6e4);return()=>clearInterval(S)},[]);const C=async()=>{try{s(!0);const[S,V,D]=await Promise.all([n("/api/exchange-config/status"),n("/api/exchange-config/token-status"),n("/api/exchange-config/mailboxes")]),w=await S.json(),E=V.ok?await V.json():null,M=D.ok?await D.json():null;a({...w,tokens:E,mailboxes:M}),u(null)}catch(S){console.error("Failed to fetch status:",S),u("Failed to load Exchange status")}finally{s(!1)}},P=S=>{g(V=>({...V,[S]:!V[S]}))},L=S=>{switch(S){case"connected":case"valid":case"active":return"success";case"expired":case"error":case"disconnected":return"error";case"warning":case"expiring":return"warning";default:return"default"}},T=S=>{if(!S)return"Unknown";const V=new Date,w=new Date(S)-V;if(w<=0)return"Expired";const E=Math.floor(w/(1e3*60*60*24)),M=Math.floor(w%(1e3*60*60*24)/(1e3*60*60)),$=Math.floor(w%(1e3*60*60)/(1e3*60));return E>0?`${E}d ${M}h`:M>0?`${M}h ${$}m`:`${$}m`},I=S=>{navigator.clipboard.writeText(S)},R=async()=>{if(y.mailbox){b(S=>({...S,processing:!0}));try{const S=await n(`/api/exchange-config/mailboxes/${encodeURIComponent(y.mailbox.email)}`,{method:"DELETE"});if(S.ok)b({open:!1,mailbox:null,processing:!1}),v(`Mailbox ${y.mailbox.email} and all associated tokens have been deleted`),await C();else{const V=await S.json();u(V.error||"Failed to delete mailbox"),b(D=>({...D,processing:!1}))}}catch{u("Failed to delete mailbox"),b(V=>({...V,processing:!1}))}}},N=async()=>{if(c.app){if(c.deleteOption==="everything"&&c.confirmName!==c.app.displayName){u("Application name does not match. Please type the exact name.");return}d(S=>({...S,processing:!0}));try{console.log("Sending delete request for app:",c.app.appId);const S=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})});console.log("Delete response status:",S.status);const V=await S.json();S.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),c.deleteOption==="everything"?(u(null),v("Application and Azure AD registration deleted successfully")):v("Application configuration deleted successfully")):S.status===401&&V.requiresAdminAuth?(console.log("Admin auth required for Azure deletion"),d(D=>({...D,processing:!1})),p({open:!0,tenantId:V.tenantId||c.app.tenantId})):(u(V.error||"Failed to delete application"),d(D=>({...D,processing:!1})))}catch{u("Failed to delete application"),d(V=>({...V,processing:!1}))}}};if(o&&!i)return r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(Ue,{})});const F=i?.configured||i?.applications?.length>0;return r.jsxs(A,{children:[r.jsx(ae,{sx:{p:3,mb:3},children:r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[F?r.jsx(jb,{sx:{fontSize:40,color:"success.main",mr:2}}):r.jsx(Sb,{sx:{fontSize:40,color:"error.main",mr:2}}),r.jsxs(A,{children:[r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Exchange Online Status"}),r.jsx(k,{variant:"body2",color:"text.secondary",children:F?"Connected and configured":"Not configured - Setup required"})]})]}),r.jsxs(A,{children:[r.jsx(Y,{variant:"outlined",startIcon:r.jsx(gn,{}),onClick:C,disabled:o,sx:{mr:1},children:"Refresh"}),!F&&r.jsx(Y,{variant:"contained",startIcon:r.jsx(sr,{}),onClick:e,children:"Start Setup"})]})]})}),l&&r.jsx(ye,{severity:"error",sx:{mb:2},children:l}),r.jsx(Ve,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Pc,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Azure AD Applications"}),i?.applications?.length>0&&r.jsx(we,{label:i.applications.length,size:"small",sx:{ml:1}})]}),r.jsx(Se,{onClick:()=>P("applications"),children:x.applications?r.jsx(Aa,{}):r.jsx(ar,{})})]}),r.jsxs(Bn,{in:x.applications,children:[r.jsx(ft,{sx:{my:2}}),i?.applications?.length>0?r.jsx(ps,{children:r.jsxs(ms,{size:"small",children:[r.jsx(gs,{children:r.jsxs(En,{children:[r.jsx(ue,{children:"Application Name"}),r.jsx(ue,{children:"Application ID"}),r.jsx(ue,{children:"Tenant ID"}),r.jsx(ue,{children:"Auth Method"}),r.jsx(ue,{children:"API Method"}),r.jsx(ue,{children:"Status"}),r.jsx(ue,{align:"right",children:"Actions"})]})}),r.jsx(xs,{children:i.applications.map((S,V)=>r.jsxs(En,{children:[r.jsx(ue,{children:r.jsx(k,{variant:"body2",fontWeight:"medium",children:S.displayName||"Unnamed Application"})}),r.jsx(ue,{children:r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsxs(k,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.appId?.substring(0,8),"..."]}),r.jsx(Se,{size:"small",onClick:()=>I(S.appId),children:r.jsx(zt,{fontSize:"small"})})]})}),r.jsx(ue,{children:r.jsxs(k,{variant:"body2",sx:{fontFamily:"monospace"},children:[S.tenantId?.substring(0,8),"..."]})}),r.jsx(ue,{children:r.jsx(we,{label:S.authMethod||"Unknown",size:"small",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:S.apiMethod==="smtp_oauth"?"SMTP OAuth2":"Graph API",size:"small",color:S.apiMethod==="smtp_oauth"?"warning":"primary",variant:"outlined"})}),r.jsx(ue,{children:r.jsx(we,{label:S.status||"Active",color:L(S.status||"active"),size:"small"})}),r.jsx(ue,{align:"right",children:r.jsx(Se,{size:"small",onClick:()=>d({open:!0,app:S}),children:r.jsx(Xt,{fontSize:"small"})})})]},V))})]})}):r.jsx(ye,{severity:"info",children:'No Azure AD applications configured. Click "Start Setup" to configure.'})]})]})}),r.jsx(Ve,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Rn,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Token Status"})]}),r.jsx(Se,{onClick:()=>P("tokens"),children:x.tokens?r.jsx(Aa,{}):r.jsx(ar,{})})]}),r.jsxs(Bn,{in:x.tokens,children:[r.jsx(ft,{sx:{my:2}}),i?.tokens||i?.accounts?.length>0?r.jsxs(K,{container:!0,spacing:2,children:[i?.accounts?.length>0&&r.jsx(K,{item:!0,xs:12,children:r.jsxs(ae,{variant:"outlined",sx:{p:2,bgcolor:"background.default"},children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Accounts with Active Tokens"}),i.accounts.map((S,V)=>r.jsxs(A,{display:"flex",alignItems:"center",sx:{mt:V>0?2:1},children:[r.jsx(qu,{sx:{mr:1},color:S.hasValidToken?"primary":"disabled"}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:S.email||S.displayName||"Unknown Account"}),S.displayName&&S.email&&r.jsx(k,{variant:"caption",color:"text.secondary",children:S.displayName})]}),r.jsxs(A,{display:"flex",gap:1,children:[S.isDefault&&r.jsx(we,{label:"Default",size:"small",color:"primary",variant:"outlined"}),r.jsx(we,{label:S.hasValidToken?"Active":"Expired",size:"small",color:S.hasValidToken?"success":"error"})]})]},V))]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{variant:"outlined",sx:{p:2},children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",children:"Access Token"}),r.jsx(k,{variant:"h6",children:i.tokens?.accessToken||i.hasTokens?"Valid":"Not Available"}),(i.tokens?.accessToken||i.hasTokens)&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)]})]}),r.jsx(A,{children:i.tokens?.accessToken||i.hasTokens?r.jsx(Ne,{color:"success"}):r.jsx(In,{color:"error"})})]}),(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)&&r.jsx(Gt,{variant:"determinate",value:mc(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt),sx:{mt:1},color:Nf(i.tokens?.accessTokenExpiry||i.accounts?.[0]?.tokenExpiresAt)})]})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsxs(ae,{variant:"outlined",sx:{p:2},children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{children:[r.jsx(k,{variant:"subtitle2",color:"text.secondary",children:"Refresh Token"}),r.jsx(k,{variant:"h6",children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?"Valid":"Not Available"}),(i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken)&&r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Expires in: ",T(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))]})]}),r.jsx(A,{children:i.tokens?.refreshToken||i.accounts?.[0]?.hasRefreshToken?r.jsx(Ne,{color:"success"}):r.jsx(In,{color:"error"})})]}),(i.tokens?.refreshTokenExpiry||i.accounts?.[0]?.hasRefreshToken)&&r.jsx(Gt,{variant:"determinate",value:mc(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null)),sx:{mt:1},color:Nf(i.tokens?.refreshTokenExpiry||(i.accounts?.[0]?.tokenExpiresAt?new Date(new Date(i.accounts[0].tokenExpiresAt).getTime()+2160*60*60*1e3).toISOString():null))})]})}),i.tokens.lastRefresh&&r.jsx(K,{item:!0,xs:12,children:r.jsxs(k,{variant:"caption",color:"text.secondary",children:["Last token refresh: ",new Date(i.tokens.lastRefresh).toLocaleString()]})})]}):r.jsx(ye,{severity:"warning",children:"No token information available. Please complete the setup process."})]})]})}),r.jsx(Ve,{sx:{mb:2},children:r.jsxs(Oe,{children:[r.jsxs(A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{display:"flex",alignItems:"center",children:[r.jsx(Pl,{sx:{mr:1}}),r.jsx(k,{variant:"h6",children:"Connected Mailboxes"}),i?.mailboxes?.length>0&&r.jsx(we,{label:i.mailboxes.length,size:"small",sx:{ml:1}})]}),r.jsxs(A,{children:[r.jsx(Y,{size:"small",startIcon:r.jsx(sr,{}),onClick:()=>t?.({type:"mailbox"}),children:"Add Mailbox"}),r.jsx(Se,{onClick:()=>P("mailboxes"),children:x.mailboxes?r.jsx(Aa,{}):r.jsx(ar,{})})]})]}),r.jsxs(Bn,{in:x.mailboxes,children:[r.jsx(ft,{sx:{my:2}}),i?.mailboxes?.length>0?r.jsx(ot,{children:i.mailboxes.map((S,V)=>r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(qu,{})}),r.jsx(ce,{primary:S.email,secondary:r.jsxs(A,{children:[r.jsxs(k,{variant:"caption",display:"block",children:["Type: ",S.type||"User Mailbox"]}),r.jsxs(k,{variant:"caption",display:"block",children:["Permissions: ",S.permissions?.join(", ")||"Send As"]})]})}),r.jsxs(un,{children:[r.jsx(we,{label:S.status||"Active",color:L(S.status||"active"),size:"small",sx:{mr:1}}),r.jsx(Se,{size:"small",onClick:()=>b({open:!0,mailbox:S,processing:!1}),children:r.jsx(Xt,{fontSize:"small"})})]})]},V))}):r.jsx(ye,{severity:"info",children:"No mailboxes configured. The default account will be used for sending."})]})]})}),r.jsxs(at,{open:c.open,onClose:()=>!c.processing&&d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Delete Application"}),r.jsxs(ct,{children:[r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Application:"})," ",c.app?.displayName]}),r.jsxs(k,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[r.jsx("strong",{children:"App ID:"})," ",c.app?.appId]})]}),r.jsxs(A,{mt:3,children:[r.jsx(k,{variant:"subtitle1",gutterBottom:!0,children:"What would you like to delete?"}),r.jsx(wt,{component:"fieldset",children:r.jsxs(Pb,{value:c.deleteOption,onChange:S=>d(V=>({...V,deleteOption:S.target.value,confirmName:""})),children:[r.jsx($n,{value:"config",control:r.jsx(Ku,{}),label:r.jsxs(A,{children:[r.jsx(k,{variant:"body1",children:"Configuration only"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Remove from SMTP Relay only (Azure AD App remains)"})]})}),r.jsx($n,{value:"everything",control:r.jsx(Ku,{}),label:r.jsxs(A,{children:[r.jsx(k,{variant:"body1",children:"Configuration + Azure AD App"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Completely remove everything from Azure AD"})]})})]})})]}),c.deleteOption==="everything"&&r.jsxs(A,{mt:3,children:[r.jsxs(ye,{severity:"error",sx:{mb:2},children:[r.jsx(Ye,{children:" Permanent Deletion Warning"}),"This will permanently delete the application from Azure AD. This action cannot be undone!"]}),r.jsxs(k,{variant:"body2",gutterBottom:!0,children:["Please type ",r.jsx("strong",{children:c.app?.displayName})," to confirm:"]}),r.jsx(Fe,{fullWidth:!0,size:"small",value:c.confirmName,onChange:S=>d(V=>({...V,confirmName:S.target.value})),placeholder:"Type application name here",disabled:c.processing,error:c.confirmName&&c.confirmName!==c.app?.displayName,helperText:c.confirmName&&c.confirmName!==c.app?.displayName?"Name does not match":""}),r.jsxs(ye,{severity:"info",sx:{mt:2},children:[r.jsx("strong",{children:"Note:"})," This operation requires Azure AD administrator authentication."]})]}),c.deleteOption==="config"&&r.jsx(ye,{severity:"info",sx:{mt:2},children:"The Azure AD application will remain in your tenant and can be reused later."})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),disabled:c.processing,children:"Cancel"}),r.jsx(Y,{onClick:N,color:"error",variant:"contained",disabled:c.processing||c.deleteOption==="everything"&&c.confirmName!==c.app?.displayName,children:c.processing?r.jsx(Ue,{size:24}):c.deleteOption==="everything"?"Delete Everything":"Delete Configuration"})]})]}),r.jsx(kF,{open:f.open,tenantId:f.tenantId,onClose:()=>p({open:!1,tenantId:null}),onAuthComplete:async S=>{if(p({open:!1,tenantId:null}),S&&c.app){console.log("Admin auth complete, retrying delete for:",c.app.appId);try{const V=await n("/api/exchange-config/delete-app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:c.app.appId,tenantId:c.app.tenantId,displayName:c.app.displayName,deleteFromAzure:c.deleteOption==="everything"})}),D=await V.json();V.ok?(d({open:!1,app:null,deleteOption:"config",confirmName:"",adminAuth:!1,processing:!1}),C(),v("Application and Azure AD registration deleted successfully")):(u(D.error||"Failed to delete application"),d(w=>({...w,processing:!1})))}catch{u("Failed to delete application"),d(D=>({...D,processing:!1}))}}}}),r.jsxs(at,{open:y.open,onClose:()=>!y.processing&&b({open:!1,mailbox:null,processing:!1}),maxWidth:"sm",fullWidth:!0,children:[r.jsx(lt,{children:"Delete Mailbox"}),r.jsxs(ct,{children:[r.jsxs(ye,{severity:"warning",sx:{mb:2},children:[r.jsx(Ye,{children:"Warning"}),"This will delete the mailbox configuration and all associated tokens. The mailbox will need to be re-authenticated if you want to use it again."]}),y.mailbox&&r.jsxs(A,{mt:2,children:[r.jsxs(k,{variant:"body1",gutterBottom:!0,children:[r.jsx("strong",{children:"Mailbox:"})," ",y.mailbox.email]}),r.jsxs(k,{variant:"body2",color:"text.secondary",children:[r.jsx("strong",{children:"Type:"})," ",y.mailbox.type||"User Mailbox"]})]}),r.jsx(k,{variant:"body2",sx:{mt:2},children:"Are you sure you want to delete this mailbox and all its tokens?"})]}),r.jsxs(bt,{children:[r.jsx(Y,{onClick:()=>b({open:!1,mailbox:null,processing:!1}),disabled:y.processing,children:"Cancel"}),r.jsx(Y,{onClick:R,color:"error",variant:"contained",disabled:y.processing,children:y.processing?r.jsx(Ue,{size:24}):"Delete Mailbox"})]})]}),r.jsx(kb,{open:!!m,autoHideDuration:6e3,onClose:()=>v(""),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(ye,{onClose:()=>v(""),severity:"success",sx:{width:"100%"},children:m})})]})},mc=e=>{if(!e)return 0;const t=new Date,n=new Date(e),o=new Date(n.getTime()-3600*1e3),s=n-o,i=n-t;return Math.max(0,Math.min(100,i/s*100))},Nf=e=>{const t=mc(e);return t>50?"success":t>20?"warning":"error"};class TF extends Le.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n),this.setState({error:t,errorInfo:n})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?r.jsx(A,{sx:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:r.jsxs(ae,{sx:{p:4,maxWidth:600,textAlign:"center"},children:[r.jsx(In,{sx:{fontSize:64,color:"error.main",mb:2}}),r.jsx(k,{variant:"h5",gutterBottom:!0,children:"Something went wrong"}),r.jsx(k,{variant:"body2",color:"text.secondary",paragraph:!0,children:this.state.error?.message||"An unexpected error occurred"}),!1,r.jsx(Y,{variant:"contained",color:"primary",onClick:this.handleReset,sx:{mt:3},children:"Try Again"})]})}):this.props.children}}const EF=1e3,AF=2e3,MF=["Choose Method","Configure Azure AD","Authenticate","Test Connection"],wl=Ut(Ve),Vf=Ut(A),RF=()=>{const{apiRequest:e}=$t(),t=_t(),[n,o]=h.useState(0),[s,i]=h.useState(!0),[a,l]=h.useState(null),[u,c]=h.useState([]),[d,f]=h.useState(!1),[p,x]=h.useState({authMethod:"device_code",tenantId:"",clientId:"",clientSecret:"",apiMethod:"graph_api",sendAs:""}),[g,m]=h.useState(null),[v,y]=h.useState(!1),[b,C]=h.useState(!1),[P,L]=h.useState(null),[T,I]=h.useState(null),[R,N]=h.useState(null),[F,S]=h.useState(null),[V,D]=h.useState(!1),[w,E]=h.useState("choose"),[M,$]=h.useState(!1),[_,O]=h.useState(0),B=h.useMemo(()=>MF,[]),z=h.useCallback(async()=>{i(!0);try{const ne=await(await e("/api/exchange-config/status")).json();console.log("Exchange status data:",ne),l(ne),c(ne.accounts||[]);const je=ne.isConfigured||ne.hasConfig,Z=ne.applications?.length>0,xe=ne.hasTokens,me=ne.clientId||ne.exchangeConfig?.auth?.client_id;console.log("Setup check:",{hasConfig:je,hasApplications:Z,hasTokens:xe,hasClientId:me}),je||Z||me&&xe?(console.log("Showing dashboard view"),f(!1)):(console.log("Showing setup wizard"),f(!0))}catch(X){console.error("Failed to check status:",X),f(!0)}finally{i(!1)}},[e]),G=h.useCallback(()=>{o(X=>X+1)},[]),J=h.useCallback(()=>{o(X=>{const ne=Math.max(0,X-1);return X===1&&ne===0&&E("choose"),ne})},[]);h.useCallback(()=>{o(0),m(null),y(!1),L(null),I(null),N(null)},[]);const ee=h.useCallback(async(X=!1)=>{i(!0),I(null);try{const ne=a?.applications?.[0];if(!ne){I("No Azure AD application configured. Please complete setup first."),i(!1);return}const Z=await(await e("/api/exchange-config/oauth/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authMethod:"device_code",tenantId:ne.tenantId,clientId:ne.appId,apiMethod:"graph_api"})})).json();m(Z),y(!0),!X&&d&&G()}catch{I("Failed to start authentication")}finally{i(!1)}},[a,d,e,G]),te=h.useCallback(async()=>{try{(await(await e("/api/exchange-config/oauth/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceCode:g.deviceCode,tenantId:a?.applications?.[0]?.tenantId,clientId:a?.applications?.[0]?.appId})})).json()).success&&(y(!1),N("Authentication successful!"),await z(),M?($(!1),m(null),O(je=>je+1)):d&&G())}catch(X){X.message?.includes("authorization_pending")||(I("Authentication failed"),y(!1))}},[g,a,e,M,d,G,z]);h.useCallback(async()=>{i(!0),I(null);try{(await e("/api/exchange-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(N("Configuration saved successfully"),await z(),p.authMethod==="device_code"?await ee():G())}catch{I("Failed to save configuration")}finally{i(!1)}},[p,e,z,ee,G]);const ve=h.useCallback(async X=>{i(!0),I(null);try{const je=await(await e("/api/exchange-config/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:X})})).json();L(je),je.success?N("Connection test successful!"):I(je.error||"Connection test failed")}catch{I("Connection test failed")}finally{i(!1)}},[e]);h.useCallback(async X=>{i(!0);try{await e(`/api/exchange-config/accounts/${X}/refresh`,{method:"POST"}),N("Token refreshed successfully"),await z()}catch{I("Failed to refresh token")}finally{i(!1)}},[e,z]),h.useCallback(async X=>{try{await e(`/api/exchange-config/accounts/${X}/set-default`,{method:"POST"}),await z()}catch{I("Failed to set default account")}},[e,z]),h.useCallback(async X=>{try{await e(`/api/exchange-config/accounts/${X}`,{method:"DELETE"}),await z()}catch{I("Failed to delete account")}},[e,z]);const W=h.useCallback(X=>{navigator.clipboard.writeText(X).then(()=>{N("Copied to clipboard!"),setTimeout(()=>N(null),AF)}).catch(ne=>{console.error("Failed to copy:",ne),I("Failed to copy to clipboard")})},[]);h.useCallback(X=>X?new Date(X).toLocaleString():"Never",[]),h.useCallback(X=>{if(!X)return"Expired";const ne=new Date,Z=new Date(X)-ne;if(Z<=0)return"Expired";const xe=Math.floor(Z/(1e3*60*60*24)),me=Math.floor(Z%(1e3*60*60*24)/(1e3*60*60));return xe>0?`${xe} days ${me} hours`:`${me} hours`},[]);const Q=h.useCallback(async X=>{X&&X.success&&(N("Azure AD application created successfully!"),await z(),f(!1),X.application&&N(`Application "${X.application.displayName}" created successfully! Application ID: ${X.application.appId}`))},[z]);if(h.useEffect(()=>{z()},[z]),h.useEffect(()=>{let X;return v&&g&&(X=setInterval(()=>{te()},(g.interval||5)*EF)),()=>clearInterval(X)},[v,g,te]),s&&!a)return r.jsx(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #0f0f23 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsx(Vf,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(ae,{sx:{p:4,borderRadius:4,boxShadow:6},children:r.jsxs(A,{display:"flex",flexDirection:"column",alignItems:"center",children:[r.jsx(Ue,{size:60,thickness:4}),r.jsx(k,{variant:"h6",sx:{mt:2},children:"Loading Exchange Configuration..."})]})})})});if((a?.isConfigured||a?.applications?.length>0)&&!d)return r.jsxs(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:[r.jsx(IF,{onSetupStart:()=>f(!0),onEdit:X=>{console.log("Edit item:",X),X?.type==="mailbox"?($(!0),ee(!0)):f(!0)}},_),r.jsxs(at,{open:M,onClose:()=>{$(!1),y(!1),m(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[r.jsx(lt,{children:r.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Ib,{color:"primary"}),r.jsx(k,{variant:"h6",children:"Add User Mailbox"})]})}),r.jsx(ct,{children:g?r.jsxs(r.Fragment,{children:[r.jsx(k,{variant:"body1",gutterBottom:!0,children:"Authenticate the user account that will send emails:"}),r.jsx(wl,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},sx:{mt:2,background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:r.jsxs(Oe,{children:[r.jsx(k,{variant:"h2",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",letterSpacing:3},children:g.userCode}),r.jsx(A,{display:"flex",justifyContent:"center",mt:2,children:r.jsx(Y,{variant:"contained",color:"secondary",startIcon:r.jsx(zt,{}),onClick:()=>W(g.userCode),sx:{borderRadius:3,textTransform:"none",fontWeight:"bold"},children:"Copy Code"})})]})}),r.jsxs(A,{mt:3,textAlign:"center",children:[r.jsx(k,{variant:"body2",gutterBottom:!0,color:"textSecondary",children:"Go to this URL and enter the code:"}),r.jsx(Y,{variant:"outlined",startIcon:r.jsx(kc,{}),href:g.verificationUrl||"https://microsoft.com/devicelogin",target:"_blank",sx:{mt:1,borderRadius:3,textTransform:"none"},children:"microsoft.com/devicelogin"})]}),v&&r.jsx(Ma,{in:v,children:r.jsxs(A,{mt:3,display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(Ue,{size:20,sx:{mr:2}}),r.jsx(k,{children:"Waiting for user authentication..."})]})}),r.jsxs(ye,{severity:"info",sx:{mt:3,borderRadius:2},children:[r.jsx(Ye,{children:"Important"}),"The user must:",r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ce,{primary:"Sign in with their Exchange account"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ce,{primary:"Accept the Mail.Send permission"})]}),r.jsxs(ge,{children:[r.jsx(Re,{children:r.jsx(Ne,{fontSize:"small"})}),r.jsx(ce,{primary:"Grant permission to send emails as this user"})]})]})]})]}):r.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",py:4,children:r.jsx(Ue,{})})}),r.jsx(bt,{sx:{p:3},children:r.jsx(Y,{onClick:()=>{$(!1),y(!1),m(null)},sx:{borderRadius:2},children:"Cancel"})})]})]});const ie=X=>{switch(X){case 0:return r.jsx(Ma,{in:!0,children:r.jsxs(A,{children:[r.jsx(A,{textAlign:"center",mb:4,children:r.jsxs(Ut.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[r.jsx(Ko,{sx:{fontSize:64,color:"primary.main",mb:2}}),r.jsx(k,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:a?.isConfigured?"Reconfigure Exchange Online":"Welcome to Exchange Online Setup"}),r.jsx(k,{variant:"subtitle1",color:"textSecondary",children:"Connect your Microsoft Exchange to enable email functionality"})]})}),a?.isConfigured&&r.jsx(jl,{in:!0,children:r.jsxs(ye,{severity:"info",sx:{mb:3,borderRadius:2},children:[r.jsx(Ye,{children:"Current Configuration"}),"You have an existing configuration. Creating a new app will replace the current one.",r.jsx(Y,{size:"small",startIcon:r.jsx(os,{}),sx:{mt:1,color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},onClick:()=>f(!1),children:"Back to Dashboard"})]})}),r.jsx(k,{variant:"h6",gutterBottom:!0,sx:{mt:3,mb:2,fontWeight:"medium"},children:"Choose Your Setup Method:"}),r.jsxs(K,{container:!0,spacing:3,children:[r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(wl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="automatic"?"2px solid":"1px solid",borderColor:w==="automatic"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="automatic"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("automatic"),children:r.jsxs(Oe,{sx:{p:3},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(A,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(Jf,{sx:{fontSize:32,color:"white"}})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"Automatic Setup"}),r.jsx(we,{label:"Recommended",color:"success",size:"small",sx:{mt:.5},icon:r.jsx(Zf,{})})]})]}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Let the wizard automatically create and configure your Azure AD application with all required permissions."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ce,{primary:"One-click setup",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ce,{primary:"Automatic permissions",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"success",fontSize:"small"})}),r.jsx(ce,{primary:"Admin consent handling",primaryTypographyProps:{variant:"body2"}})]})]})]})})}),r.jsx(K,{item:!0,xs:12,md:6,children:r.jsx(wl,{whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.98},sx:{cursor:"pointer",border:w==="manual"?"2px solid":"1px solid",borderColor:w==="manual"?"primary.main":"divider",borderRadius:3,overflow:"hidden",position:"relative",background:w==="manual"?t.palette.mode==="dark"?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)":"transparent"},onClick:()=>E("manual"),children:r.jsxs(Oe,{sx:{p:3},children:[r.jsxs(A,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(A,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:2,p:1,mr:2,display:"flex"},children:r.jsx(rs,{sx:{fontSize:32,color:"white"}})}),r.jsxs(A,{flex:1,children:[r.jsx(k,{variant:"h5",fontWeight:"bold",children:"Manual Setup"}),r.jsx(we,{label:"Advanced",color:"info",size:"small",sx:{mt:.5},icon:r.jsx(Zs,{})})]})]}),r.jsx(k,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Manually enter your existing Azure AD application details for complete control."}),r.jsxs(ot,{dense:!0,children:[r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ce,{primary:"Use existing app",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ce,{primary:"Custom configuration",primaryTypographyProps:{variant:"body2"}})]}),r.jsxs(ge,{sx:{pl:0},children:[r.jsx(Re,{sx:{minWidth:32},children:r.jsx(Ne,{color:"info",fontSize:"small"})}),r.jsx(ce,{primary:"Full control",primaryTypographyProps:{variant:"body2"}})]})]})]})})})]}),r.jsx(A,{mt:4,display:"flex",justifyContent:"center",children:r.jsxs(Y,{variant:"contained",size:"large",onClick:()=>o(1),disabled:!w,startIcon:r.jsx(Tb,{}),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontSize:"1.1rem",fontWeight:"bold",background:w?t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":void 0},children:["Continue with ",w==="automatic"?"Automatic":w==="manual"?"Manual":""," Setup"]})})]})});case 1:return w==="automatic"?r.jsx(TF,{onReset:()=>o(0),children:r.jsx(ry,{onComplete:Q,onBack:J})}):r.jsx(CF,{onComplete:()=>z(),onBack:J});case 2:return r.jsx(vF,{deviceCodeInfo:g,polling:v,onSuccess:()=>{z(),G()}});case 3:return r.jsx(Ma,{in:!0,children:r.jsxs(A,{textAlign:"center",children:[r.jsx(Ut.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsx(Ne,{sx:{fontSize:80,color:"success.main",mb:2}})}),r.jsx(k,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Configuration Complete!"}),r.jsx(k,{variant:"subtitle1",color:"textSecondary",paragraph:!0,children:"Your Exchange Online integration is ready to use."}),r.jsxs(A,{mt:4,children:[r.jsx(Y,{variant:"contained",size:"large",onClick:()=>ve(a?.defaultAccount),disabled:s,startIcon:s?r.jsx(Ue,{size:20}):r.jsx(Sl,{}),sx:{borderRadius:3,px:4,py:1.5,mr:2,textTransform:"none",background:t.palette.mode==="dark"?"linear-gradient(135deg, #4c63b6 0%, #542f75 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:"Test Connection"}),r.jsx(Y,{variant:"outlined",size:"large",onClick:()=>f(!1),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none"},children:"Go to Dashboard"})]}),P&&r.jsx(jl,{in:!0,children:r.jsxs(ye,{severity:P.success?"success":"error",sx:{mt:3,borderRadius:2},children:[r.jsx(Ye,{children:P.success?"Test Successful":"Test Failed"}),P.message||P.error]})})]})});default:return null}};return r.jsx(A,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?t.palette.background.default:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",py:4},children:r.jsx(Vf,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},sx:{maxWidth:1200,mx:"auto",px:3},children:r.jsxs(ae,{sx:{p:{xs:3,md:5},borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[r.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[r.jsxs(A,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Ko,{sx:{fontSize:40,color:"primary.main"}}),r.jsx(k,{variant:"h4",fontWeight:"bold",children:"Exchange Online Setup"})]}),n>0&&!(n===1&&(w==="automatic"||w==="manual"))&&r.jsx(Y,{variant:"outlined",startIcon:r.jsx(os,{}),onClick:J,sx:{borderRadius:2,borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.23)":"rgba(0, 0, 0, 0.23)",color:t.palette.mode==="dark"?t.palette.grey[300]:t.palette.grey[700],"&:hover":{borderColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},children:"Back"})]}),(n===0||w!=="automatic")&&r.jsx(zr,{activeStep:n,sx:{mb:5},children:B.map((X,ne)=>r.jsx(Hn,{children:r.jsx(zn,{StepIconProps:{sx:{fontSize:28,"&.Mui-completed":{color:"success.main"},"&.Mui-active":{color:"primary.main"}}},children:r.jsx(k,{variant:"body1",fontWeight:n===ne?"bold":"normal",children:X})})},X))}),r.jsx(A,{sx:{minHeight:400},children:ie(n)}),w!=="automatic"&&r.jsxs(r.Fragment,{children:[r.jsx(Bn,{in:!!T,children:r.jsx(ye,{severity:"error",sx:{mt:3,borderRadius:2},onClose:()=>I(null),children:T})}),r.jsx(Bn,{in:!!R,children:r.jsx(ye,{severity:"success",sx:{mt:3,borderRadius:2},onClose:()=>N(null),children:R})})]})]})})})},DF=({children:e})=>{const{user:t,loading:n}=$t();return n?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?e:r.jsx(dp,{to:"/login",replace:!0})},Ho=240,zo=65,FF=({darkMode:e,toggleDarkMode:t})=>{const[n,o]=h.useState(!0),[s,i]=h.useState(null),[a,l]=h.useState(null),{user:u}=$t(),c=Wb(),d=Ec(),f=_t(),p=[{path:"/dashboard",name:"Dashboard",icon:r.jsx(tp,{})},{path:"/analytics",name:"Analytics",icon:r.jsx(Eb,{})},{path:"/devices",name:"Devices",icon:r.jsx(Hf,{})},{path:"/queue",name:"Queue",icon:r.jsx(mo,{})},{path:"/logs",name:"Logs",icon:r.jsx(Ab,{})},{path:"/security",name:"Security",icon:r.jsx(Wi,{})},{path:"/ip-whitelist",name:"IP Whitelist",icon:r.jsx(Yf,{})},{path:"/sessions",name:"Sessions",icon:r.jsx(go,{})},...u?.role==="admin"?[{path:"/users",name:"User Management",icon:r.jsx(Mb,{})}]:[],{path:"/exchange-setup",name:"Exchange Setup",icon:r.jsx(jc,{})},{path:"/settings",name:"Settings",icon:r.jsx(rs,{})}],x=()=>{o(!n)},g=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(m){console.error("Logout error:",m)}sessionStorage.clear(),d("/login")};return r.jsxs(A,{sx:{display:"flex"},children:[r.jsx(cp,{}),r.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
          }
        `}),r.jsx(Rb,{position:"fixed",sx:{width:`calc(100% - ${n?Ho:zo}px)`,ml:`${n?Ho:zo}px`,transition:f.transitions.create(["width","margin"],{easing:f.transitions.easing.sharp,duration:f.transitions.duration.leavingScreen})},children:r.jsxs(Db,{children:[r.jsx(Se,{color:"inherit","aria-label":"toggle drawer",onClick:x,edge:"start",sx:{mr:2},children:n?r.jsx(Fb,{}):r.jsx(Ob,{})}),r.jsx(k,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:p.find(m=>m.path===c.pathname)?.name||"SMTP Relay"}),r.jsxs(Ht,{direction:"row",spacing:1,alignItems:"center",children:[r.jsxs(ae,{sx:{px:1.5,py:.5,display:"flex",alignItems:"center",gap:1,bgcolor:f.palette.mode==="dark"?"rgba(76, 175, 80, 0.15)":"rgba(76, 175, 80, 0.1)",border:"1px solid",borderColor:f.palette.mode==="dark"?"rgba(76, 175, 80, 0.3)":"rgba(76, 175, 80, 0.2)",borderRadius:2},children:[r.jsx(Lb,{sx:{fontSize:18,animation:"pulse 2s infinite",color:f.palette.mode==="dark"?"#4caf50":"success.main"}}),r.jsx(k,{variant:"caption",fontWeight:"medium",sx:{color:f.palette.mode==="dark"?"#4caf50":"success.main"},children:"ONLINE"})]}),r.jsxs(ae,{sx:{px:2,py:.5,display:{xs:"none",md:"flex"},alignItems:"center",gap:1,bgcolor:f.palette.mode==="dark"?"grey.800":"grey.100",borderRadius:2},children:[r.jsx(_b,{sx:{fontSize:16,color:"text.secondary"}}),r.jsx(k,{variant:"body2",children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),r.jsx(ft,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),r.jsx(op,{sx:{fontSize:16,color:"text.secondary"}}),r.jsx(k,{variant:"body2",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),r.jsx(pt,{title:"Notifications",children:r.jsx(Se,{color:"inherit",onClick:m=>l(m.currentTarget),sx:{bgcolor:f.palette.mode==="dark"?"grey.800":"grey.100","&:hover":{bgcolor:f.palette.mode==="dark"?"grey.700":"grey.200"}},children:r.jsx(So,{badgeContent:2,color:"error",children:r.jsx(ip,{fontSize:"small"})})})}),r.jsx(pt,{title:"Toggle theme",children:r.jsx(Se,{onClick:t,color:"inherit",sx:{bgcolor:f.palette.mode==="dark"?"grey.800":"grey.100","&:hover":{bgcolor:f.palette.mode==="dark"?"grey.700":"grey.200"}},children:e?r.jsx($b,{fontSize:"small"}):r.jsx(Nb,{fontSize:"small"})})}),r.jsx(Y,{onClick:m=>i(m.currentTarget),sx:{borderRadius:2,px:1.5,py:.5,bgcolor:f.palette.mode==="dark"?"grey.800":"grey.100","&:hover":{bgcolor:f.palette.mode==="dark"?"grey.700":"grey.200"},textTransform:"none"},children:r.jsxs(Ht,{direction:"row",spacing:1,alignItems:"center",children:[r.jsx(wn,{sx:{width:28,height:28,bgcolor:"primary.main",fontSize:"0.875rem"},children:u?.username?.charAt(0).toUpperCase()||"A"}),r.jsxs(A,{sx:{display:{xs:"none",sm:"block"}},children:[r.jsx(k,{variant:"body2",fontWeight:"medium",color:"text.primary",children:u?.displayName||u?.username||"Admin"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:u?.role||"Administrator"})]}),r.jsx(ar,{fontSize:"small"})]})}),r.jsxs(Il,{anchorEl:s,open:!!s,onClose:()=>i(null),PaperProps:{sx:{mt:1,minWidth:200,borderRadius:2}},children:[r.jsxs(A,{sx:{px:2,py:1.5,borderBottom:1,borderColor:"divider"},children:[r.jsx(k,{variant:"subtitle2",fontWeight:"bold",children:u?.displayName||u?.username||"Admin"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:u?.email||`${u?.username||"admin"}@smtp-relay.local`})]}),r.jsxs(de,{component:Os,to:"/profile",onClick:()=>i(null),children:[r.jsx(Re,{children:r.jsx(xi,{fontSize:"small"})}),"My Profile"]}),r.jsxs(de,{component:Os,to:"/settings",onClick:()=>i(null),children:[r.jsx(Re,{children:r.jsx(rs,{fontSize:"small"})}),"Settings"]}),r.jsx(ft,{}),r.jsxs(de,{onClick:()=>{i(null),g()},sx:{color:"error.main"},children:[r.jsx(Re,{children:r.jsx(kl,{fontSize:"small",color:"error"})}),"Logout"]})]}),r.jsxs(Il,{anchorEl:a,open:!!a,onClose:()=>l(null),PaperProps:{sx:{mt:1,width:320,borderRadius:2}},children:[r.jsx(A,{sx:{px:2,py:1.5,borderBottom:1,borderColor:"divider"},children:r.jsx(k,{variant:"subtitle1",fontWeight:"bold",children:"Notifications"})}),r.jsx(de,{onClick:()=>l(null),children:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:"System Update Available"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"Version 1.2.0 is ready to install"})]})}),r.jsx(de,{onClick:()=>l(null),children:r.jsxs(A,{children:[r.jsx(k,{variant:"body2",fontWeight:"medium",children:"Queue Processing Complete"}),r.jsx(k,{variant:"caption",color:"text.secondary",children:"15 emails sent successfully"})]})}),r.jsx(ft,{}),r.jsx(A,{sx:{p:1},children:r.jsx(Y,{fullWidth:!0,size:"small",children:"View All Notifications"})})]})]})]})}),r.jsxs(Vb,{sx:{width:n?Ho:zo,flexShrink:0,"& .MuiDrawer-paper":{width:n?Ho:zo,boxSizing:"border-box",transition:f.transitions.create("width",{easing:f.transitions.easing.sharp,duration:f.transitions.duration.enteringScreen}),overflowX:"hidden"}},variant:"permanent",anchor:"left",children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:n?"flex-start":"center",p:2,minHeight:64},children:[r.jsx(mo,{sx:{fontSize:32,color:"primary.main",mr:n?1:0}}),n&&r.jsx(k,{variant:"h6",sx:{fontWeight:"bold"},children:"SMTP Relay"})]}),r.jsx(ft,{}),r.jsx(ot,{sx:{flexGrow:1},children:p.map(m=>r.jsx(ge,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ra,{component:Os,to:m.path,selected:c.pathname===m.path,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected","&:hover":{backgroundColor:"action.hover"}}},children:[r.jsx(pt,{title:n?"":m.name,placement:"right",children:r.jsx(Re,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:c.pathname===m.path?"primary.main":"inherit"},children:m.icon})}),n&&r.jsx(ce,{primary:m.name,primaryTypographyProps:{fontSize:14,fontWeight:c.pathname===m.path?"medium":"regular"}})]})},m.path))}),r.jsx(ft,{}),r.jsxs(ot,{children:[r.jsx(ge,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ra,{component:Os,to:"/profile",selected:c.pathname==="/profile",sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,"&.Mui-selected":{backgroundColor:"action.selected"}},children:[r.jsx(pt,{title:n?"":"Profile",placement:"right",children:r.jsx(Re,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center"},children:r.jsx(xi,{})})}),n&&r.jsx(ce,{primary:"Profile",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})}),r.jsx(ge,{disablePadding:!0,sx:{display:"block"},children:r.jsxs(Ra,{onClick:g,sx:{minHeight:48,justifyContent:n?"initial":"center",px:2.5,color:"error.main","&:hover":{backgroundColor:m=>(m.palette.mode==="dark","rgba(244, 67, 54, 0.08)")}},children:[r.jsx(pt,{title:n?"":"Logout",placement:"right",children:r.jsx(Re,{sx:{minWidth:0,mr:n?3:"auto",justifyContent:"center",color:"error.main"},children:r.jsx(kl,{})})}),n&&r.jsx(ce,{primary:"Logout",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}})]})})]})]}),r.jsx(A,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",p:3,width:`calc(100% - ${n?Ho:zo}px)`,minHeight:"100vh",mt:8},children:r.jsx(qb,{})})]})},OF=new iC({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});function LF(){const e=h.useRef(),[t,n]=h.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!0}),o=h.useMemo(()=>Bb({palette:{mode:t?"dark":"light",primary:{main:"#667eea",light:"#8b9cff",dark:"#4c63b6"},secondary:{main:"#764ba2",light:"#a374cc",dark:"#542f75"},success:{main:"#84fab0",light:"#b4ffd4",dark:"#52c77e"},error:{main:"#f5576c",light:"#ff8a95",dark:"#c62641"},background:{default:t?"#0f0f23":"#f5f5f5",paper:t?"#1a1a2e":"#ffffff"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700,fontSize:"2.5rem"},h2:{fontWeight:600,fontSize:"2rem"},h3:{fontWeight:600,fontSize:"1.75rem"},h4:{fontWeight:600,fontSize:"1.5rem"},h5:{fontWeight:500,fontSize:"1.25rem"},h6:{fontWeight:500,fontSize:"1rem"},button:{textTransform:"none",fontWeight:500}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 16px",fontSize:"0.875rem"},contained:{boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"}}}},MuiCard:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none",border:t?"1px solid rgba(255,255,255,0.1)":"none",boxShadow:t?"0 8px 32px rgba(0,0,0,0.4)":"0 2px 8px rgba(0,0,0,0.1)"}}},MuiPaper:{styleOverrides:{root:{backgroundImage:t?"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)":"none",backdropFilter:t?"blur(10px)":"none"}}}}}),[t]),s=()=>{n(i=>{const a=!i;return localStorage.setItem("darkMode",JSON.stringify(a)),a})};return r.jsx(dC,{client:OF,children:r.jsxs(Hb,{theme:o,children:[r.jsx(cp,{}),r.jsx(Vv,{ref:e,maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:4e3,TransitionComponent:Ut.div,action:i=>r.jsx(Se,{size:"small",color:"inherit",onClick:()=>e.current.closeSnackbar(i),children:r.jsx(uv,{fontSize:"small"})}),children:r.jsx(Kb,{children:r.jsx(ES,{children:r.jsx(k1,{children:r.jsx(eg,{mode:"wait",children:r.jsxs(Qb,{children:[r.jsx(Rt,{path:"/login",element:r.jsx(MS,{})}),r.jsxs(Rt,{path:"/",element:r.jsx(DF,{children:r.jsx(FF,{darkMode:t,toggleDarkMode:s})}),children:[r.jsx(Rt,{index:!0,element:r.jsx(dp,{to:"/dashboard",replace:!0})}),r.jsx(Rt,{path:"dashboard",element:r.jsx(I1,{})}),r.jsx(Rt,{path:"devices",element:r.jsx(dD,{})}),r.jsx(Rt,{path:"queue",element:r.jsx(hD,{})}),r.jsx(Rt,{path:"logs",element:r.jsx(nF,{})}),r.jsx(Rt,{path:"security",element:r.jsx(mD,{})}),r.jsx(Rt,{path:"settings",element:r.jsx(tF,{})}),r.jsx(Rt,{path:"ip-whitelist",element:r.jsx(rF,{})}),r.jsx(Rt,{path:"sessions",element:r.jsx(oF,{})}),r.jsx(Rt,{path:"analytics",element:r.jsx(iF,{})}),r.jsx(Rt,{path:"users",element:r.jsx(aF,{})}),r.jsx(Rt,{path:"profile",element:r.jsx(bF,{})}),r.jsx(Rt,{path:"exchange-setup",element:r.jsx(RF,{})})]})]})})})})})}),!1]})})}document.querySelector(".loader")?.classList.remove("active");sv.createRoot(document.getElementById("root")).render(r.jsx(Le.StrictMode,{children:r.jsx(LF,{})}));
//# sourceMappingURL=index-CARWQztB.js.map
